var NN=Object.create;var Iv=Object.defineProperty,LN=Object.defineProperties,FN=Object.getOwnPropertyDescriptor,VN=Object.getOwnPropertyDescriptors,BN=Object.getOwnPropertyNames,Uf=Object.getOwnPropertySymbols,qT=Object.getPrototypeOf,Tv=Object.prototype.hasOwnProperty,GT=Object.prototype.propertyIsEnumerable,UN=Reflect.get;var HT=(n,e,t)=>e in n?Iv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,J=(n,e)=>{for(var t in e||={})Tv.call(e,t)&&HT(n,t,e[t]);if(Uf)for(var t of Uf(e))GT.call(e,t)&&HT(n,t,e[t]);return n},ke=(n,e)=>LN(n,VN(e));var Sv=(n,e)=>{var t={};for(var i in n)Tv.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Uf)for(var i of Uf(n))e.indexOf(i)<0&&GT.call(n,i)&&(t[i]=n[i]);return t};var jN=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var zN=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of BN(e))!Tv.call(n,r)&&r!==t&&Iv(n,r,{get:()=>e[r],enumerable:!(i=FN(e,r))||i.enumerable});return n};var $N=(n,e,t)=>(t=n!=null?NN(qT(n)):{},zN(e||!n||!n.__esModule?Iv(t,"default",{value:n,enumerable:!0}):t,n));var ns=(n,e,t)=>UN(qT(n),t,e);var T=(n,e,t)=>new Promise((i,r)=>{var o=u=>{try{l(t.next(u))}catch(f){r(f)}},a=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(o,a);l((t=t.apply(n,e)).next())});var sN=jN((cv,oN)=>{"use strict";(function(n,e){typeof cv=="object"&&typeof oN<"u"?e(cv):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(cv,function(n){"use strict";var e="1.9.4";function t(s){var c,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(c in _)s[c]=_[c]}return s}var i=Object.create||function(){function s(){}return function(c){return s.prototype=c,new s}}();function r(s,c){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function l(s,c,h){var p,_,w,P;return P=function(){p=!1,_&&(w.apply(h,_),_=!1)},w=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(P,c),p=!0)},w}function u(s,c,h){var p=c[1],_=c[0],w=p-_;return s===p&&h?s:((s-_)%w+w)%w+_}function f(){return!1}function m(s,c){if(c===!1)return s;var h=Math.pow(10,c===void 0?6:c);return Math.round(s*h)/h}function v(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return v(s).split(/\s+/)}function b(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in c)s.options[h]=c[h];return s.options}function x(s,c,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function N(s,c){return s.replace(k,function(h,p){var _=c[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(c)),_})}var G=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function ne(s,c){for(var h=0;h<s.length;h++)if(s[h]===c)return h;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ue(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var Le=0;function me(s){var c=+new Date,h=Math.max(0,16-(c-Le));return Le=c+h,window.setTimeout(s,h)}var R=window.requestAnimationFrame||ue("RequestAnimationFrame")||me,D=window.cancelAnimationFrame||ue("CancelAnimationFrame")||ue("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function M(s,c,h){if(h&&R===me)s.call(c);else return R.call(window,r(s,c))}function O(s){s&&D.call(window,s)}var F={__proto__:null,extend:t,create:i,bind:r,get lastId(){return o},stamp:a,throttle:l,wrapNum:u,falseFn:f,formatNum:m,trim:v,splitWords:E,setOptions:b,getParamString:x,template:N,isArray:G,indexOf:ne,emptyImageUrl:X,requestFn:R,cancelFn:D,requestAnimFrame:M,cancelAnimFrame:O};function V(){}V.extend=function(s){var c=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=i(h);p.constructor=c,c.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(c[_]=this[_]);return s.statics&&t(c,s.statics),s.includes&&(A(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?i(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,P=p._initHooks.length;w<P;w++)p._initHooks[w].call(this)}},c},V.include=function(s){var c=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},V.mergeOptions=function(s){return t(this.prototype.options,s),this},V.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function A(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=G(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Mt={on:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h)}return this},off:function(s,c,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],c);else{s=E(s);for(var _=arguments.length===1,w=0,P=s.length;w<P;w++)_?this._off(s[w]):this._off(s[w],c,h)}return this},_on:function(s,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,h)===!1){h===this&&(h=void 0);var _={fn:c,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,c,h){var p,_,w;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,w=p.length;_<w;_++)p[_].fn=f;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var P=this._listens(s,c,h);if(P!==!1){var j=p[P];this._firingCount&&(j.fn=f,this._events[s]=p=p.slice()),p.splice(P,1)}}},fire:function(s,c,h){if(!this.listens(s,h))return this;var p=t({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,P=_.length;w<P;w++){var j=_[w],z=j.fn;j.once&&this.off(s,z,j.ctx),z.call(j.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,c,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=c;typeof c!="function"&&(p=!!c,_=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var P in this._eventParents)if(this._eventParents[P].listens(s,c,h,p))return!0}return!1},_listens:function(s,c,h){if(!this._events)return!1;var p=this._events[s]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var _=0,w=p.length;_<w;_++)if(p[_].fn===c&&p[_].ctx===h)return _;return!1},once:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c,!0);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};Mt.addEventListener=Mt.on,Mt.removeEventListener=Mt.clearAllEventListeners=Mt.off,Mt.addOneTimeEventListener=Mt.once,Mt.fireEvent=Mt.fire,Mt.hasEventListeners=Mt.listens;var Gn=V.extend(Mt);function W(s,c,h){this.x=h?Math.round(s):s,this.y=h?Math.round(c):c}var ge=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(s){return this.clone()._add(Z(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Z(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new W(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new W(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ge(this.x),this.y=ge(this.y),this},distanceTo:function(s){s=Z(s);var c=s.x-this.x,h=s.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(s){return s=Z(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Z(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function Z(s,c,h){return s instanceof W?s:G(s)?new W(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new W(s.x,s.y):new W(s,c,h)}function we(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}we.prototype={extend:function(s){var c,h;if(!s)return this;if(s instanceof W||typeof s[0]=="number"||"x"in s)c=h=Z(s);else if(s=Je(s),c=s.min,h=s.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,h;return typeof s[0]=="number"||s instanceof W?s=Z(s):s=Je(s),s instanceof we?(c=s.min,h=s.max):c=h=s,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=Je(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>=c.x&&p.x<=h.x,P=_.y>=c.y&&p.y<=h.y;return w&&P},overlaps:function(s){s=Je(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>c.x&&p.x<h.x,P=_.y>c.y&&p.y<h.y;return w&&P},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*s,_=Math.abs(c.y-h.y)*s;return Je(Z(c.x-p,c.y-_),Z(h.x+p,h.y+_))},equals:function(s){return s?(s=Je(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Je(s,c){return!s||s instanceof we?s:new we(s,c)}function Ct(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}Ct.prototype={extend:function(s){var c=this._southWest,h=this._northEast,p,_;if(s instanceof Ie)p=s,_=s;else if(s instanceof Ct){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(Ee(s)||Fe(s)):this;return!c&&!h?(this._southWest=new Ie(p.lat,p.lng),this._northEast=new Ie(_.lat,_.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*s,_=Math.abs(c.lng-h.lng)*s;return new Ct(new Ie(c.lat-p,c.lng-_),new Ie(h.lat+p,h.lng+_))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ie||"lat"in s?s=Ee(s):s=Fe(s);var c=this._southWest,h=this._northEast,p,_;return s instanceof Ct?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=c.lat&&_.lat<=h.lat&&p.lng>=c.lng&&_.lng<=h.lng},intersects:function(s){s=Fe(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>=c.lat&&p.lat<=h.lat,P=_.lng>=c.lng&&p.lng<=h.lng;return w&&P},overlaps:function(s){s=Fe(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>c.lat&&p.lat<h.lat,P=_.lng>c.lng&&p.lng<h.lng;return w&&P},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=Fe(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(s,c){return s instanceof Ct?s:new Ct(s,c)}function Ie(s,c,h){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,h!==void 0&&(this.alt=+h)}Ie.prototype={equals:function(s,c){if(!s)return!1;s=Ee(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+m(this.lat,s)+", "+m(this.lng,s)+")"},distanceTo:function(s){return Di.distance(this,Ee(s))},wrap:function(){return Di.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function Ee(s,c,h){return s instanceof Ie?s:G(s)&&typeof s[0]!="object"?s.length===3?new Ie(s[0],s[1],s[2]):s.length===2?new Ie(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ie(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new Ie(s,c,h)}var dn={latLngToPoint:function(s,c){var h=this.projection.project(s),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(s,c){var h=this.scale(c),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(c.min,h),_=this.transformation.transform(c.max,h);return new we(p,_)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ie(h,c,p)},wrapLatLngBounds:function(s){var c=s.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,_=c.lng-h.lng;if(p===0&&_===0)return s;var w=s.getSouthWest(),P=s.getNorthEast(),j=new Ie(w.lat-p,w.lng-_),z=new Ie(P.lat-p,P.lng-_);return new Ct(j,z)}},Di=t({},dn,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var h=Math.PI/180,p=s.lat*h,_=c.lat*h,w=Math.sin((c.lat-s.lat)*h/2),P=Math.sin((c.lng-s.lng)*h/2),j=w*w+Math.cos(p)*Math.cos(_)*P*P,z=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*z}}),kt=6378137,ri={R:kt,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*c);return new W(this.R*s.lng*c,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var c=180/Math.PI;return new Ie((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:function(){var s=kt*Math.PI;return new we([-s,-s],[s,s])}()};function hn(s,c,h,p){if(G(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=h,this._d=p}hn.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new W((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function Nn(s,c,h,p){return new hn(s,c,h,p)}var Mi=t({},Di,{code:"EPSG:3857",projection:ri,transformation:function(){var s=.5/(Math.PI*ri.R);return Nn(s,.5,-s,.5)}()}),vu=t({},Mi,{code:"EPSG:900913"});function yc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function wc(s,c){var h="",p,_,w,P,j,z;for(p=0,w=s.length;p<w;p++){for(j=s[p],_=0,P=j.length;_<P;_++)z=j[_],h+=(_?"L":"M")+z.x+" "+z.y;h+=c?_e.svg?"z":"x":""}return h||"M0 0"}var Zs=document.documentElement.style,Qs="ActiveXObject"in window,nf=Qs&&!document.addEventListener,rf="msLaunchUri"in navigator&&!("documentMode"in document),bc=oi("webkit"),yu=oi("android"),Ec=oi("android 2")||oi("android 3"),of=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),mv=yu&&oi("Google")&&of<537&&!("AudioNode"in window),Ys=!!window.opera,Cc=!rf&&oi("chrome"),Ic=oi("gecko")&&!bc&&!Ys&&!Qs,fn=!Cc&&oi("safari"),pn=oi("phantom"),Js="OTransition"in Zs,sf=navigator.platform.indexOf("Win")===0,wu=Qs&&"transition"in Zs,bu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ec,qo="MozPerspective"in Zs,af=!window.L_DISABLE_3D&&(wu||bu||qo)&&!Js&&!pn,Go=typeof orientation<"u"||oi("mobile"),Eu=Go&&bc,gv=Go&&bu,cf=!window.PointerEvent&&window.MSPointerEvent,Tc=!!(window.PointerEvent||cf),Cu="ontouchstart"in window||!!window.TouchEvent,lf=!window.L_NO_TOUCH&&(Cu||Tc),Xs=Go&&Ys,Iu=Go&&Ic,Tu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xr=function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return s}(),uf=function(){return!!document.createElement("canvas").getContext}(),Wo=!!(document.createElementNS&&yc("svg").createSVGRect),df=!!Wo&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ea=!Wo&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),hf=navigator.platform.indexOf("Mac")===0,Cn=navigator.platform.indexOf("Linux")===0;function oi(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var _e={ie:Qs,ielt9:nf,edge:rf,webkit:bc,android:yu,android23:Ec,androidStock:mv,opera:Ys,chrome:Cc,gecko:Ic,safari:fn,phantom:pn,opera12:Js,win:sf,ie3d:wu,webkit3d:bu,gecko3d:qo,any3d:af,mobile:Go,mobileWebkit:Eu,mobileWebkit3d:gv,msPointer:cf,pointer:Tc,touch:lf,touchNative:Cu,mobileOpera:Xs,mobileGecko:Iu,retina:Tu,passiveEvents:Xr,canvas:uf,svg:Wo,vml:ea,inlineSvg:df,mac:hf,linux:Cn},Ko=_e.msPointer?"MSPointerDown":"pointerdown",ff=_e.msPointer?"MSPointerMove":"pointermove",pf=_e.msPointer?"MSPointerUp":"pointerup",eo=_e.msPointer?"MSPointerCancel":"pointercancel",Su={touchstart:Ko,touchmove:ff,touchend:pf,touchcancel:eo},mf={touchstart:_f,touchmove:Zo,touchend:Zo,touchcancel:Zo},Ki={},Du=!1;function Mu(s,c,h){return c==="touchstart"&&Pu(),mf[c]?(h=mf[c].bind(this,h),s.addEventListener(Su[c],h,!1),h):(console.warn("wrong event specified:",c),f)}function Sc(s,c,h){if(!Su[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Su[c],h,!1)}function mr(s){Ki[s.pointerId]=s}function gf(s){Ki[s.pointerId]&&(Ki[s.pointerId]=s)}function xu(s){delete Ki[s.pointerId]}function Pu(){Du||(document.addEventListener(Ko,mr,!0),document.addEventListener(ff,gf,!0),document.addEventListener(pf,xu,!0),document.addEventListener(eo,xu,!0),Du=!0)}function Zo(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in Ki)c.touches.push(Ki[h]);c.changedTouches=[c],s(c)}}function _f(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&zt(c),Zo(s,c)}function vf(s){var c={},h,p;for(p in s)h=s[p],c[p]=h&&h.bind?h.bind(s):h;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var _v=200;function Dc(s,c){s.addEventListener("dblclick",c);var h=0,p;function _(w){if(w.detail!==1){p=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var P=Bu(w);if(!(P.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!P.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var j=Date.now();j-h<=_v?(p++,p===2&&c(vf(w))):p=1,h=j}}}return s.addEventListener("click",_),{dblclick:c,simDblclick:_}}function yf(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var ta=xi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zi=xi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gr=Zi==="webkitTransition"||Zi==="OTransition"?Zi+"End":"transitionend";function Mc(s){return typeof s=="string"?document.getElementById(s):s}function na(s,c){var h=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[c]:null}return h==="auto"?null:h}function it(s,c,h){var p=document.createElement(s);return p.className=c||"",h&&h.appendChild(p),p}function xt(s){var c=s.parentNode;c&&c.removeChild(s)}function ia(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function _r(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function vr(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function xc(s,c){if(s.classList!==void 0)return s.classList.contains(c);var h=ra(s);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function Ve(s,c){if(s.classList!==void 0)for(var h=E(c),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!xc(s,c)){var w=ra(s);Au(s,(w?w+" ":"")+c)}}function jt(s,c){s.classList!==void 0?s.classList.remove(c):Au(s,v((" "+ra(s)+" ").replace(" "+c+" "," ")))}function Au(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function ra(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Ln(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&vv(s,c)}function vv(s,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):s.style.filter+=" progid:"+p+"(opacity="+c+")"}function xi(s){for(var c=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in c)return s[h];return!1}function In(s,c,h){var p=c||new W(0,0);s.style[ta]=(_e.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function Nt(s,c){s._leaflet_pos=c,_e.any3d?In(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Pi(s){return s._leaflet_pos||new W(0,0)}var Qo,mt,Yo;if("onselectstart"in document)Qo=function(){Oe(window,"selectstart",zt)},mt=function(){wt(window,"selectstart",zt)};else{var Qi=xi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qo=function(){if(Qi){var s=document.documentElement.style;Yo=s[Qi],s[Qi]="none"}},mt=function(){Qi&&(document.documentElement.style[Qi]=Yo,Yo=void 0)}}function to(){Oe(window,"dragstart",zt)}function Ru(){wt(window,"dragstart",zt)}var oa,Ou;function ku(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Pc(),oa=s,Ou=s.style.outlineStyle,s.style.outlineStyle="none",Oe(window,"keydown",Pc))}function Pc(){oa&&(oa.style.outlineStyle=Ou,oa=void 0,Ou=void 0,wt(window,"keydown",Pc))}function wf(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function no(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var yr={__proto__:null,TRANSFORM:ta,TRANSITION:Zi,TRANSITION_END:gr,get:Mc,getStyle:na,create:it,remove:xt,empty:ia,toFront:_r,toBack:vr,hasClass:xc,addClass:Ve,removeClass:jt,setClass:Au,getClass:ra,setOpacity:Ln,testProp:xi,setTransform:In,setPosition:Nt,getPosition:Pi,get disableTextSelection(){return Qo},get enableTextSelection(){return mt},disableImageDrag:to,enableImageDrag:Ru,preventOutline:ku,restoreOutline:Pc,getSizedParentNode:wf,getScale:no};function Oe(s,c,h,p){if(c&&typeof c=="object")for(var _ in c)Lu(s,_,c[_],h);else{c=E(c);for(var w=0,P=c.length;w<P;w++)Lu(s,c[w],h,p)}return this}var si="_leaflet_events";function wt(s,c,h,p){if(arguments.length===1)io(s),delete s[si];else if(c&&typeof c=="object")for(var _ in c)Fu(s,_,c[_],h);else if(c=E(c),arguments.length===2)io(s,function(j){return ne(c,j)!==-1});else for(var w=0,P=c.length;w<P;w++)Fu(s,c[w],h,p);return this}function io(s,c){for(var h in s[si]){var p=h.split(/\d/)[0];(!c||c(p))&&Fu(s,p,null,null,h)}}var Nu={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Lu(s,c,h,p){var _=c+a(h)+(p?"_"+a(p):"");if(s[si]&&s[si][_])return this;var w=function(j){return h.call(p||s,j||window.event)},P=w;!_e.touchNative&&_e.pointer&&c.indexOf("touch")===0?w=Mu(s,c,w):_e.touch&&c==="dblclick"?w=Dc(s,w):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(Nu[c]||c,w,_e.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(w=function(j){j=j||window.event,ca(s,j)&&P(j)},s.addEventListener(Nu[c],w,!1)):s.addEventListener(c,P,!1):s.attachEvent("on"+c,w),s[si]=s[si]||{},s[si][_]=w}function Fu(s,c,h,p,_){_=_||c+a(h)+(p?"_"+a(p):"");var w=s[si]&&s[si][_];if(!w)return this;!_e.touchNative&&_e.pointer&&c.indexOf("touch")===0?Sc(s,c,w):_e.touch&&c==="dblclick"?yf(s,w):"removeEventListener"in s?s.removeEventListener(Nu[c]||c,w,!1):s.detachEvent("on"+c,w),s[si][_]=null}function Dn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Vu(s){return Lu(s,"wheel",Dn),this}function sa(s){return Oe(s,"mousedown touchstart dblclick contextmenu",Dn),s._leaflet_disable_click=!0,this}function zt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Ai(s){return zt(s),Dn(s),this}function Bu(s){if(s.composedPath)return s.composedPath();for(var c=[],h=s.target;h;)c.push(h),h=h.parentNode;return c}function Jo(s,c){if(!c)return new W(s.clientX,s.clientY);var h=no(c),p=h.boundingClientRect;return new W((s.clientX-p.left)/h.x-c.clientLeft,(s.clientY-p.top)/h.y-c.clientTop)}var aa=_e.linux&&_e.chrome?window.devicePixelRatio:_e.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Uu(s){return _e.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/aa:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ca(s,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var Ft={__proto__:null,on:Oe,off:wt,stopPropagation:Dn,disableScrollPropagation:Vu,disableClickPropagation:sa,preventDefault:zt,stop:Ai,getPropagationPath:Bu,getMousePosition:Jo,getWheelDelta:Uu,isExternalTarget:ca,addListener:Oe,removeListener:wt},bf=Gn.extend({run:function(s,c,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Pi(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var h=this._startPos.add(this._offset.multiplyBy(s));c&&h._round(),Nt(this._el,h),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Xe=Gn.extend({options:{crs:Mi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=b(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Ee(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zi&&_e.any3d&&!_e.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Oe(this._proxy,gr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(Ee(s),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(_e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(_e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,h){var p=this.getZoomScale(c),_=this.getSize().divideBy(2),w=s instanceof W?s:this.latLngToContainerPoint(s),P=w.subtract(_).multiplyBy(1-1/p),j=this.containerPointToLatLng(_.add(P));return this.setView(j,c,{zoom:h})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():Fe(s);var h=Z(c.paddingTopLeft||c.padding||[0,0]),p=Z(c.paddingBottomRight||c.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof c.maxZoom=="number"?Math.min(c.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var w=p.subtract(h).divideBy(2),P=this.project(s.getSouthWest(),_),j=this.project(s.getNorthEast(),_),z=this.unproject(P.add(j).divideBy(2).add(w),_);return{center:z,zoom:_}},fitBounds:function(s,c){if(s=Fe(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=Z(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ve(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,h){if(h=h||{},h.animate===!1||!_e.any3d)return this.setView(s,c,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),w=this.getSize(),P=this._zoom;s=Ee(s),c=c===void 0?P:c;var j=Math.max(w.x,w.y),z=j*this.getZoomScale(P,c),K=_.distanceTo(p)||1,ce=1.42,Me=ce*ce;function Qe(Zt){var Bf=Zt?-1:1,AN=Zt?z:j,RN=z*z-j*j+Bf*Me*Me*K*K,ON=2*AN*Me*K,Cv=RN/ON,$T=Math.sqrt(Cv*Cv+1)-Cv,kN=$T<1e-9?-18:Math.log($T);return kN}function Vn(Zt){return(Math.exp(Zt)-Math.exp(-Zt))/2}function gn(Zt){return(Math.exp(Zt)+Math.exp(-Zt))/2}function Ri(Zt){return Vn(Zt)/gn(Zt)}var Kn=Qe(0);function zc(Zt){return j*(gn(Kn)/gn(Kn+ce*Zt))}function DN(Zt){return j*(gn(Kn)*Ri(Kn+ce*Zt)-Vn(Kn))/Me}function MN(Zt){return 1-Math.pow(1-Zt,1.5)}var xN=Date.now(),jT=(Qe(1)-Kn)/ce,PN=h.duration?1e3*h.duration:1e3*jT*.8;function zT(){var Zt=(Date.now()-xN)/PN,Bf=MN(Zt)*jT;Zt<=1?(this._flyToFrame=M(zT,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(DN(Bf)/K)),P),this.getScaleZoom(j/zc(Bf),P),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),zT.call(this),this},flyToBounds:function(s,c){var h=this._getBoundsCenterZoom(s,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(s){return s=Fe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,Fe(s));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var h=Z(c.paddingTopLeft||c.padding||[0,0]),p=Z(c.paddingBottomRight||c.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(s),P=this.getPixelBounds(),j=Je([P.min.add(h),P.max.subtract(p)]),z=j.getSize();if(!j.contains(w)){this._enforcingBounds=!0;var K=w.subtract(j.getCenter()),ce=j.extend(w).getSize().subtract(z);_.x+=K.x<0?-ce.x:ce.x,_.y+=K.y<0?-ce.y:ce.y,this.panTo(this.unproject(_),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),_=h.divideBy(2).round(),w=p.subtract(_);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,s):navigator.geolocation.getCurrentPosition(c,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,h=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,h=s.coords.longitude,p=new Ie(c,h),_=p.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var P=this.getBoundsZoom(_);this.setView(p,w.maxZoom?Math.min(P,w.maxZoom):P)}var j={latlng:p,bounds:_,timestamp:s.timestamp};for(var z in s.coords)typeof s.coords[z]=="number"&&(j[z]=s.coords[z]);this.fire("locationfound",j)}},addHandler:function(s,c){if(!c)return this;var h=this[s]=new c(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)xt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=it("div",h,c||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new Ct(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,h){s=Fe(s),h=Z(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),P=s.getNorthWest(),j=s.getSouthEast(),z=this.getSize().subtract(h),K=Je(this.project(j,p),this.project(P,p)).getSize(),ce=_e.any3d?this.options.zoomSnap:1,Me=z.x/K.x,Qe=z.y/K.y,Vn=c?Math.max(Me,Qe):Math.min(Me,Qe);return p=this.getScaleZoom(Vn,p),ce&&(p=Math.round(p/(ce/100))*(ce/100),p=c?Math.ceil(p/ce)*ce:Math.floor(p/ce)*ce),Math.max(_,Math.min(w,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var h=this._getTopLeftPoint(s,c);return new we(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(s)/h.scale(c)},getScaleZoom:function(s,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(s*h.scale(c));return isNaN(p)?1/0:p},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Ee(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Z(s),c)},layerPointToLatLng:function(s){var c=Z(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(Ee(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Ee(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Fe(s))},distance:function(s,c){return this.options.crs.distance(Ee(s),Ee(c))},containerPointToLayerPoint:function(s){return Z(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Z(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(Z(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ee(s)))},mouseEventToContainerPoint:function(s){return Jo(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=Mc(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Oe(c,"scroll",this._onScroll,this),this._containerId=a(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&_e.any3d,Ve(s,"leaflet-container"+(_e.touch?" leaflet-touch":"")+(_e.retina?" leaflet-retina":"")+(_e.ielt9?" leaflet-oldie":"")+(_e.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=na(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Nt(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ve(s.markerPane,"leaflet-zoom-hide"),Ve(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,h){Nt(this._mapPane,new W(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var _=this._zoom!==c;this._moveStart(_,h)._move(s,c)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,h,p){c===void 0&&(c=this._zoom);var _=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Nt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var c=s?wt:Oe;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),_e.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var h=[],p,_=c==="mouseout"||c==="mouseover",w=s.target||s.srcElement,P=!1;w;){if(p=this._targets[a(w)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){P=!0;break}if(p&&p.listens(c,!0)&&(_&&!ca(w,s)||(h.push(p),_))||w===this._container)break;w=w.parentNode}return!h.length&&!P&&!_&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var h=s.type;h==="mousedown"&&ku(c),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,c);if(h){for(var w=[],P=0;P<h.length;P++)h[P].listens(c,!0)&&w.push(h[P]);_=w.concat(_)}if(_.length){c==="contextmenu"&&zt(s);var j=_[0],z={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var K=j.getLatLng&&(!j._radius||j._radius<=10);z.containerPoint=K?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(s),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=K?j.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(P=0;P<_.length;P++)if(_[P].fire(c,z,!0),z.originalEvent._stopped||_[P].options.bubblingMouseEvents===!1&&ne(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Pi(this._mapPane)||new W(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var h=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var h=this.getSize()._divideBy(2);return this.project(s,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(s,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return Je([this.project(s.getSouthWest(),c)._subtract(p),this.project(s.getNorthWest(),c)._subtract(p),this.project(s.getSouthEast(),c)._subtract(p),this.project(s.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,h){if(!h)return s;var p=this.project(s,c),_=this.getSize().divideBy(2),w=new we(p.subtract(_),p.add(_)),P=this._getBoundsOffset(w,h,c);return Math.abs(P.x)<=1&&Math.abs(P.y)<=1?s:this.unproject(p.add(P),c)},_limitOffset:function(s,c){if(!c)return s;var h=this.getPixelBounds(),p=new we(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(s,c,h){var p=Je(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),_=p.min.subtract(s.min),w=p.max.subtract(s.max),P=this._rebound(_.x,-w.x),j=this._rebound(_.y,-w.y);return new W(P,j)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),h=this.getMaxZoom(),p=_e.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(c,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){jt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var h=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var s=this._proxy=it("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var h=ta,p=this._proxy.style[h];In(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();In(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(M(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&jt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ef(s,c){return new Xe(s,c)}var Wn=V.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Ve(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Xo=function(s){return new Wn(s)};Xe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",h=this._controlContainer=it("div",c+"control-container",this._container);function p(_,w){var P=c+_+" "+c+w;s[_+w]=it("div",P,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)xt(this._controlCorners[s]);xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var la=Wn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,c,h){b(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Wn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(a(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):jt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return jt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=it("div",s),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),sa(c),Vu(c);var p=this._section=it("section",s+"-list");h&&(this._map.on("click",this.collapse,this),Oe(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=it("a",s+"-toggle",c);_.href="#",_.title="Layers",_.setAttribute("role","button"),Oe(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){zt(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=it("div",s+"-base",p),this._separator=it("div",s+"-separator",p),this._overlaysList=it("div",s+"-overlays",p),c.appendChild(p)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&a(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ia(this._baseLayersList),ia(this._overlaysList),this._layerControlInputs=[];var s,c,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(a(s.target)),h=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(s,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var c=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),Oe(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var w=document.createElement("span");c.appendChild(w),w.appendChild(p),w.appendChild(_);var P=s.overlay?this._overlaysList:this._baseLayersList;return P.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,h,p=[],_=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)c=s[w],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||_.push(h);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])||this._map.addLayer(p[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)c=s[_],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Oe(s,"click",zt),this.expand();var c=this;setTimeout(function(){wt(s,"click",zt),c._preventClick=!1})}}),Cf=function(s,c,h){return new la(s,c,h)},ai=Wn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",h=it("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,h,p,_){var w=it("a",h,p);return w.innerHTML=s,w.href="#",w.title=c,w.setAttribute("role","button"),w.setAttribute("aria-label",c),sa(w),Oe(w,"click",Ai),Oe(w,"click",_,this),Oe(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";jt(this._zoomInButton,c),jt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Ve(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Ve(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xe.mergeOptions({zoomControl:!0}),Xe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ai,this.addControl(this.zoomControl))});var If=function(s){return new ai(s)},Tf=Wn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",h=it("div",c),p=this.options;return this._addScales(p,c+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,h){s.metric&&(this._mScale=it("div",c,h)),s.imperial&&(this._iScale=it("div",c,h))},_update:function(){var s=this._map,c=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/s)},_updateImperial:function(s){var c=s*3.2808399,h,p,_;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(c),this._updateScale(this._iScale,_+" ft",_/c))},_updateScale:function(s,c,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),h=s/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),ua=function(s){return new Tf(s)},Sf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',da=Wn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(_e.inlineSvg?Sf+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=it("div","leaflet-control-attribution"),sa(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Xe.mergeOptions({attributionControl:!0}),Xe.addInitHook(function(){this.options.attributionControl&&new da().addTo(this)});var Ac=function(s){return new da(s)};Wn.Layers=la,Wn.Zoom=ai,Wn.Scale=Tf,Wn.Attribution=da,Xo.layers=Cf,Xo.zoom=If,Xo.scale=ua,Xo.attribution=Ac;var ci=V.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ci.addTo=function(s,c){return s.addHandler(c,this),this};var Rc={Events:Mt},Df=_e.touch?"touchstart mousedown":"mousedown",Yi=Gn.extend({options:{clickTolerance:3},initialize:function(s,c,h,p){b(this,p),this._element=s,this._dragStartTarget=c||s,this._preventOutline=h},enable:function(){this._enabled||(Oe(this._dragStartTarget,Df,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Yi._dragging===this&&this.finishDrag(!0),wt(this._dragStartTarget,Df,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!xc(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Yi._dragging===this&&this.finishDrag();return}if(!(Yi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Yi._dragging=this,this._preventOutline&&ku(this._element),to(),Qo(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,h=wf(this._element);this._startPoint=new W(c.clientX,c.clientY),this._startPos=Pi(this._element),this._parentScale=no(h);var p=s.type==="mousedown";Oe(document,p?"mousemove":"touchmove",this._onMove,this),Oe(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,h=new W(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,zt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Ve(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Nt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){jt(document.body,"leaflet-dragging"),this._lastTarget&&(jt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),wt(document,"mousemove touchmove",this._onMove,this),wt(document,"mouseup touchend touchcancel",this._onUp,this),Ru(),mt();var c=this._moved&&this._moving;this._moving=!1,Yi._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function es(s,c,h){var p,_=[1,4,2,8],w,P,j,z,K,ce,Me,Qe;for(w=0,ce=s.length;w<ce;w++)s[w]._code=wr(s[w],c);for(j=0;j<4;j++){for(Me=_[j],p=[],w=0,ce=s.length,P=ce-1;w<ce;P=w++)z=s[w],K=s[P],z._code&Me?K._code&Me||(Qe=ha(K,z,Me,c,h),Qe._code=wr(Qe,c),p.push(Qe)):(K._code&Me&&(Qe=ha(K,z,Me,c,h),Qe._code=wr(Qe,c),p.push(Qe)),p.push(z));s=p}return s}function ju(s,c){var h,p,_,w,P,j,z,K,ce;if(!s||s.length===0)throw new Error("latlngs not passed");Fn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Me=Ee([0,0]),Qe=Fe(s),Vn=Qe.getNorthWest().distanceTo(Qe.getSouthWest())*Qe.getNorthEast().distanceTo(Qe.getNorthWest());Vn<1700&&(Me=Oc(s));var gn=s.length,Ri=[];for(h=0;h<gn;h++){var Kn=Ee(s[h]);Ri.push(c.project(Ee([Kn.lat-Me.lat,Kn.lng-Me.lng])))}for(j=z=K=0,h=0,p=gn-1;h<gn;p=h++)_=Ri[h],w=Ri[p],P=_.y*w.x-w.y*_.x,z+=(_.x+w.x)*P,K+=(_.y+w.y)*P,j+=P*3;j===0?ce=Ri[0]:ce=[z/j,K/j];var zc=c.unproject(Z(ce));return Ee([zc.lat+Me.lat,zc.lng+Me.lng])}function Oc(s){for(var c=0,h=0,p=0,_=0;_<s.length;_++){var w=Ee(s[_]);c+=w.lat,h+=w.lng,p++}return Ee([c/p,h/p])}var zu={__proto__:null,clipPolygon:es,polygonCenter:ju,centroid:Oc};function kc(s,c){if(!c||!s.length)return s.slice();var h=c*c;return s=ro(s,h),s=Mf(s,h),s}function $u(s,c,h){return Math.sqrt(on(s,c,h,!0))}function Nc(s,c,h){return on(s,c,h)}function Mf(s,c){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,Lc(s,_,c,0,h-1);var w,P=[];for(w=0;w<h;w++)_[w]&&P.push(s[w]);return P}function Lc(s,c,h,p,_){var w=0,P,j,z;for(j=p+1;j<=_-1;j++)z=on(s[j],s[p],s[_],!0),z>w&&(P=j,w=z);w>h&&(c[P]=1,Lc(s,c,h,p,P),Lc(s,c,h,P,_))}function ro(s,c){for(var h=[s[0]],p=1,_=0,w=s.length;p<w;p++)Fc(s[p],s[_])>c&&(h.push(s[p]),_=p);return _<w-1&&h.push(s[w-1]),h}var Hu;function qu(s,c,h,p,_){var w=p?Hu:wr(s,h),P=wr(c,h),j,z,K;for(Hu=P;;){if(!(w|P))return[s,c];if(w&P)return!1;j=w||P,z=ha(s,c,j,h,_),K=wr(z,h),j===w?(s=z,w=K):(c=z,P=K)}}function ha(s,c,h,p,_){var w=c.x-s.x,P=c.y-s.y,j=p.min,z=p.max,K,ce;return h&8?(K=s.x+w*(z.y-s.y)/P,ce=z.y):h&4?(K=s.x+w*(j.y-s.y)/P,ce=j.y):h&2?(K=z.x,ce=s.y+P*(z.x-s.x)/w):h&1&&(K=j.x,ce=s.y+P*(j.x-s.x)/w),new W(K,ce,_)}function wr(s,c){var h=0;return s.x<c.min.x?h|=1:s.x>c.max.x&&(h|=2),s.y<c.min.y?h|=4:s.y>c.max.y&&(h|=8),h}function Fc(s,c){var h=c.x-s.x,p=c.y-s.y;return h*h+p*p}function on(s,c,h,p){var _=c.x,w=c.y,P=h.x-_,j=h.y-w,z=P*P+j*j,K;return z>0&&(K=((s.x-_)*P+(s.y-w)*j)/z,K>1?(_=h.x,w=h.y):K>0&&(_+=P*K,w+=j*K)),P=s.x-_,j=s.y-w,p?P*P+j*j:new W(_,w)}function Fn(s){return!G(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Gu(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fn(s)}function oo(s,c){var h,p,_,w,P,j,z,K;if(!s||s.length===0)throw new Error("latlngs not passed");Fn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ce=Ee([0,0]),Me=Fe(s),Qe=Me.getNorthWest().distanceTo(Me.getSouthWest())*Me.getNorthEast().distanceTo(Me.getNorthWest());Qe<1700&&(ce=Oc(s));var Vn=s.length,gn=[];for(h=0;h<Vn;h++){var Ri=Ee(s[h]);gn.push(c.project(Ee([Ri.lat-ce.lat,Ri.lng-ce.lng])))}for(h=0,p=0;h<Vn-1;h++)p+=gn[h].distanceTo(gn[h+1])/2;if(p===0)K=gn[0];else for(h=0,w=0;h<Vn-1;h++)if(P=gn[h],j=gn[h+1],_=P.distanceTo(j),w+=_,w>p){z=(w-p)/_,K=[j.x-z*(j.x-P.x),j.y-z*(j.y-P.y)];break}var Kn=c.unproject(Z(K));return Ee([Kn.lat+ce.lat,Kn.lng+ce.lng])}var d={__proto__:null,simplify:kc,pointToSegmentDistance:$u,closestPointOnSegment:Nc,clipSegment:qu,_getEdgeIntersection:ha,_getBitCode:wr,_sqClosestPointOnSegment:on,isFlat:Fn,_flat:Gu,polylineCenter:oo},g={project:function(s){return new W(s.lng,s.lat)},unproject:function(s){return new Ie(s.y,s.x)},bounds:new we([-180,-90],[180,90])},y={R:6378137,R_MINOR:6356752314245179e-9,bounds:new we([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,h=this.R,p=s.lat*c,_=this.R_MINOR/h,w=Math.sqrt(1-_*_),P=w*Math.sin(p),j=Math.tan(Math.PI/4-p/2)/Math.pow((1-P)/(1+P),w/2);return p=-h*Math.log(Math.max(j,1e-10)),new W(s.lng*c*h,p)},unproject:function(s){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),w=Math.exp(-s.y/h),P=Math.PI/2-2*Math.atan(w),j=0,z=.1,K;j<15&&Math.abs(z)>1e-7;j++)K=_*Math.sin(P),K=Math.pow((1-K)/(1+K),_/2),z=Math.PI/2-2*Math.atan(w*K)-P,P+=z;return new Ie(P*c,s.x*c/h)}},C={__proto__:null,LonLat:g,Mercator:y,SphericalMercator:ri},B=t({},Di,{code:"EPSG:3395",projection:y,transformation:function(){var s=.5/(Math.PI*y.R);return Nn(s,.5,-s,.5)}()}),$=t({},Di,{code:"EPSG:4326",projection:g,transformation:Nn(1/180,1,-1/180,.5)}),oe=t({},dn,{projection:g,transformation:Nn(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var h=c.lng-s.lng,p=c.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});dn.Earth=Di,dn.EPSG3395=B,dn.EPSG3857=Mi,dn.EPSG900913=vu,dn.EPSG4326=$,dn.Simple=oe;var Ke=Gn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Xe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=a(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=a(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},_addLayers:function(s){s=s?G(s)?s:[s]:[];for(var c=0,h=s.length;c<h;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=a(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),c=_.maxZoom===void 0?c:Math.max(c,_.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Vt=Ke.extend({initialize:function(s,c){b(this,c),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),ot=function(s,c){return new Vt(s,c)},Pt=Vt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Vt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Vt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ct;for(var c in this._layers){var h=this._layers[c];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),mn=function(s,c){return new Pt(s,c)},li=V.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var _=Z(p),w=Z(c==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return _e.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function ui(s){return new li(s)}var br=li.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof br.imagePath!="string"&&(br.imagePath=this._detectIconPath()),(this.options.imagePath||br.imagePath)+li.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(h,p,_){var w=p.exec(h);return w&&w[_]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=it("div","leaflet-default-icon-path",document.body),c=na(s,"background-image")||na(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Vc=ci.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Yi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ve(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&jt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=Pi(c._icon),P=h.getPixelBounds(),j=h.getPixelOrigin(),z=Je(P.min._subtract(j).add(_),P.max._subtract(j).subtract(_));if(!z.contains(w)){var K=Z((Math.max(z.max.x,w.x)-z.max.x)/(P.max.x-z.max.x)-(Math.min(z.min.x,w.x)-z.min.x)/(P.min.x-z.min.x),(Math.max(z.max.y,w.y)-z.max.y)/(P.max.y-z.max.y)-(Math.min(z.min.y,w.y)-z.min.y)/(P.min.y-z.min.y)).multiplyBy(p);h.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),Nt(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=M(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,h=c._shadow,p=Pi(c._icon),_=c._map.layerPointToLatLng(p);h&&Nt(h,p),c._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),xf=Ke.extend({options:{icon:new br,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){b(this,c),this._latlng=Ee(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=Ee(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Ve(h,c),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Oe(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(Ve(_,c),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&wt(this._icon,"focus",this._panOnFocus,this),xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Nt(this._icon,s),this._shadow&&Nt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Vc)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Vc(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Ln(this._icon,s),this._shadow&&Ln(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,h=c.iconSize?Z(c.iconSize):Z(0,0),p=c.iconAnchor?Z(c.iconAnchor):Z(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function lN(s,c){return new xf(s,c)}var ts=Ke.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pf=ts.extend({options:{fill:!0,radius:10},initialize:function(s,c){b(this,c),this._latlng=Ee(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=Ee(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return ts.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,h=this._clickTolerance(),p=[s+h,c+h];this._pxBounds=new we(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function uN(s,c){return new Pf(s,c)}var yv=Pf.extend({initialize:function(s,c,h){if(typeof c=="number"&&(c=t({},h,{radius:c})),b(this,c),this._latlng=Ee(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ct(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:ts.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Di.distance){var _=Math.PI/180,w=this._mRadius/Di.R/_,P=h.project([c+w,s]),j=h.project([c-w,s]),z=P.add(j).divideBy(2),K=h.unproject(z).lat,ce=Math.acos((Math.cos(w*_)-Math.sin(c*_)*Math.sin(K*_))/(Math.cos(c*_)*Math.cos(K*_)))/_;(isNaN(ce)||ce===0)&&(ce=w/Math.cos(Math.PI/180*c)),this._point=z.subtract(h.getPixelOrigin()),this._radius=isNaN(ce)?0:z.x-h.project([K,s-ce]).x,this._radiusY=z.y-P.y}else{var Me=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Me).x}this._updateBounds()}});function dN(s,c,h){return new yv(s,c,h)}var so=ts.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){b(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,h=null,p=on,_,w,P=0,j=this._parts.length;P<j;P++)for(var z=this._parts[P],K=1,ce=z.length;K<ce;K++){_=z[K-1],w=z[K];var Me=p(s,_,w,!0);Me<c&&(c=Me,h=p(s,_,w))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return oo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=Ee(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ct,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Fn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],h=Fn(s),p=0,_=s.length;p<_;p++)h?(c[p]=Ee(s[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(s[p]);return c},_project:function(){var s=new we;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new W(s,s);this._rawPxBounds&&(this._pxBounds=new we([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,h){var p=s[0]instanceof Ie,_=s.length,w,P;if(p){for(P=[],w=0;w<_;w++)P[w]=this._map.latLngToLayerPoint(s[w]),h.extend(P[w]);c.push(P)}else for(w=0;w<_;w++)this._projectLatlngs(s[w],c,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,_,w,P,j,z;for(h=0,_=0,w=this._rings.length;h<w;h++)for(z=this._rings[h],p=0,P=z.length;p<P-1;p++)j=qu(z[p],z[p+1],s,p,!0),j&&(c[_]=c[_]||[],c[_].push(j[0]),(j[1]!==z[p+1]||p===P-2)&&(c[_].push(j[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=kc(s[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var h,p,_,w,P,j,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(j=this._parts[h],p=0,P=j.length,_=P-1;p<P;_=p++)if(!(!c&&p===0)&&$u(s,j[_],j[p])<=z)return!0;return!1}});function hN(s,c){return new so(s,c)}so._flat=Gu;var Bc=so.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ju(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=so.prototype._convertLatLngs.call(this,s),h=c.length;return h>=2&&c[0]instanceof Ie&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(s){so.prototype._setLatLngs.call(this,s),Fn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Fn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,h=new W(c,c);if(s=new we(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,w;p<_;p++)w=es(this._rings[p],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,h,p,_,w,P,j,z,K;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,z=this._parts.length;w<z;w++)for(h=this._parts[w],P=0,K=h.length,j=K-1;P<K;j=P++)p=h[P],_=h[j],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(c=!c);return c||so.prototype._containsPoint.call(this,s,!0)}});function fN(s,c){return new Bc(s,c)}var ao=Pt.extend({initialize:function(s,c){b(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=G(s)?s:s.features,h,p,_;if(c){for(h=0,p=c.length;h<p;h++)_=c[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var P=Af(s,w);return P?(P.feature=kf(s),P.defaultOptions=P.options,this.resetStyle(P),w.onEachFeature&&w.onEachFeature(s,P),this.addLayer(P)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function Af(s,c){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],w=c&&c.pointToLayer,P=c&&c.coordsToLatLng||wv,j,z,K,ce;if(!p&&!h)return null;switch(h.type){case"Point":return j=P(p),CT(w,s,j,c);case"MultiPoint":for(K=0,ce=p.length;K<ce;K++)j=P(p[K]),_.push(CT(w,s,j,c));return new Pt(_);case"LineString":case"MultiLineString":return z=Rf(p,h.type==="LineString"?0:1,P),new so(z,c);case"Polygon":case"MultiPolygon":return z=Rf(p,h.type==="Polygon"?1:2,P),new Bc(z,c);case"GeometryCollection":for(K=0,ce=h.geometries.length;K<ce;K++){var Me=Af({geometry:h.geometries[K],type:"Feature",properties:s.properties},c);Me&&_.push(Me)}return new Pt(_);case"FeatureCollection":for(K=0,ce=h.features.length;K<ce;K++){var Qe=Af(h.features[K],c);Qe&&_.push(Qe)}return new Pt(_);default:throw new Error("Invalid GeoJSON object.")}}function CT(s,c,h,p){return s?s(c,h):new xf(h,p&&p.markersInheritOptions&&p)}function wv(s){return new Ie(s[1],s[0],s[2])}function Rf(s,c,h){for(var p=[],_=0,w=s.length,P;_<w;_++)P=c?Rf(s[_],c-1,h):(h||wv)(s[_]),p.push(P);return p}function bv(s,c){return s=Ee(s),s.alt!==void 0?[m(s.lng,c),m(s.lat,c),m(s.alt,c)]:[m(s.lng,c),m(s.lat,c)]}function Of(s,c,h,p){for(var _=[],w=0,P=s.length;w<P;w++)_.push(c?Of(s[w],Fn(s[w])?0:c-1,h,p):bv(s[w],p));return!c&&h&&_.length>0&&_.push(_[0].slice()),_}function Uc(s,c){return s.feature?t({},s.feature,{geometry:c}):kf(c)}function kf(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Ev={toGeoJSON:function(s){return Uc(this,{type:"Point",coordinates:bv(this.getLatLng(),s)})}};xf.include(Ev),yv.include(Ev),Pf.include(Ev),so.include({toGeoJSON:function(s){var c=!Fn(this._latlngs),h=Of(this._latlngs,c?1:0,!1,s);return Uc(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),Bc.include({toGeoJSON:function(s){var c=!Fn(this._latlngs),h=c&&!Fn(this._latlngs[0]),p=Of(this._latlngs,h?2:c?1:0,!0,s);return c||(p=[p]),Uc(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),Vt.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(s).geometry.coordinates)}),Uc(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(s);if(h)p.push(w.geometry);else{var P=kf(w);P.type==="FeatureCollection"?p.push.apply(p,P.features):p.push(P)}}}),h?Uc(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function IT(s,c){return new ao(s,c)}var pN=IT,Nf=Ke.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,h){this._url=s,this._bounds=Fe(c),b(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&_r(this._image),this},bringToBack:function(){return this._map&&vr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Fe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:it("img");if(Ve(c,"leaflet-image-layer"),this._zoomAnimated&&Ve(c,"leaflet-zoom-animated"),this.options.className&&Ve(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=r(this.fire,this,"load"),c.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;In(this._image,h,c)},_reset:function(){var s=this._image,c=new we(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();Nt(s,c.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){Ln(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),mN=function(s,c,h){return new Nf(s,c,h)},TT=Nf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:it("video");if(Ve(c,"leaflet-image-layer"),this._zoomAnimated&&Ve(c,"leaflet-zoom-animated"),this.options.className&&Ve(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=r(this.fire,this,"load"),s){for(var h=c.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[c.src];return}G(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var P=it("source");P.src=this._url[w],c.appendChild(P)}}});function gN(s,c,h){return new TT(s,c,h)}var ST=Nf.extend({_initImage:function(){var s=this._image=this._url;Ve(s,"leaflet-image-layer"),this._zoomAnimated&&Ve(s,"leaflet-zoom-animated"),this.options.className&&Ve(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function _N(s,c,h){return new ST(s,c,h)}var Er=Ke.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof Ie||G(s))?(this._latlng=Ee(s),b(this,c)):(b(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Ln(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Ln(this._container,1),this.bringToFront(),this.options.interactive&&(Ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Ln(this._container,0),this._removeTimeout=setTimeout(r(xt,void 0,this._container),200)):xt(this._container),this.options.interactive&&(jt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Ee(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_r(this._container),this},bringToBack:function(){return this._map&&vr(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof Pt){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=Z(this.options.offset),h=this._getAnchor();this._zoomAnimated?Nt(this._container,s.add(h)):c=c.add(s).add(h);var p=this._containerBottom=-c.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Xe.include({_initOverlay:function(s,c,h,p){var _=c;return _ instanceof s||(_=new s(p).setContent(c)),h&&_.setLatLng(h),_}}),Ke.include({_initOverlay:function(s,c,h,p){var _=h;return _ instanceof s?(b(_,p),_._source=this):(_=c&&!p?c:new s(p,this),_.setContent(h)),_}});var Lf=Er.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Er.prototype.openOn.call(this,s)},onAdd:function(s){Er.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ts||this._source.on("preclick",Dn))},onRemove:function(s){Er.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ts||this._source.off("preclick",Dn))},getEvents:function(){var s=Er.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=it("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=it("div",s+"-content-wrapper",c);if(this._contentNode=it("div",s+"-content",h),sa(c),Vu(this._contentNode),Oe(c,"contextmenu",Dn),this._tipContainer=it("div",s+"-tip-container",c),this._tip=it("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=it("a",s+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Oe(p,"click",function(_){zt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=s.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&p>_?(c.height=_+"px",Ve(s,w)):jt(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();Nt(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(na(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,_=new W(this._containerLeft,-h-this._containerBottom);_._add(Pi(this._container));var w=s.layerPointToContainerPoint(_),P=Z(this.options.autoPanPadding),j=Z(this.options.autoPanPaddingTopLeft||P),z=Z(this.options.autoPanPaddingBottomRight||P),K=s.getSize(),ce=0,Me=0;w.x+p+z.x>K.x&&(ce=w.x+p-K.x+z.x),w.x-ce-j.x<0&&(ce=w.x-j.x),w.y+h+z.y>K.y&&(Me=w.y+h-K.y+z.y),w.y-Me-j.y<0&&(Me=w.y-j.y),(ce||Me)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ce,Me]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),vN=function(s,c){return new Lf(s,c)};Xe.mergeOptions({closePopupOnClick:!0}),Xe.include({openPopup:function(s,c,h){return this._initOverlay(Lf,s,c,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ke.include({bindPopup:function(s,c){return this._popup=this._initOverlay(Lf,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Pt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Ai(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof ts)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Ff=Er.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Er.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Er.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Er.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=it("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,h,p=this._map,_=this._container,w=p.latLngToContainerPoint(p.getCenter()),P=p.layerPointToContainerPoint(s),j=this.options.direction,z=_.offsetWidth,K=_.offsetHeight,ce=Z(this.options.offset),Me=this._getAnchor();j==="top"?(c=z/2,h=K):j==="bottom"?(c=z/2,h=0):j==="center"?(c=z/2,h=K/2):j==="right"?(c=0,h=K/2):j==="left"?(c=z,h=K/2):P.x<w.x?(j="right",c=0,h=K/2):(j="left",c=z+(ce.x+Me.x)*2,h=K/2),s=s.subtract(Z(c,h,!0)).add(ce).add(Me),jt(_,"leaflet-tooltip-right"),jt(_,"leaflet-tooltip-left"),jt(_,"leaflet-tooltip-top"),jt(_,"leaflet-tooltip-bottom"),Ve(_,"leaflet-tooltip-"+j),Nt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Ln(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),yN=function(s,c){return new Ff(s,c)};Xe.include({openTooltip:function(s,c,h){return this._initOverlay(Ff,s,c,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ke.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ff,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Pt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(Oe(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Oe(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var DT=li.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(ia(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=Z(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function wN(s){return new DT(s)}li.Default=br;var Wu=Ke.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_e.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),xt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_r(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof W?s:new W(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,h=-s(-1/0,1/0),p=0,_=c.length,w;p<_;p++)w=c[p].style.zIndex,c[p]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!_e.ielt9){Ln(this._container,this.options.opacity);var s=+new Date,c=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var w=Math.min(1,(s-_.loaded)/200);Ln(_.el,w),w<1?c=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(O(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=it("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=c-Math.abs(s-h),this._onUpdateLevel(h)):(xt(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=it("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)xt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,h,p){var _=Math.floor(s/2),w=Math.floor(c/2),P=h-1,j=new W(+_,+w);j.z=+P;var z=this._tileCoordsToKey(j),K=this._tiles[z];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),P>p?this._retainParent(_,w,P,p):!1)},_retainChildren:function(s,c,h,p){for(var _=2*s;_<2*s+2;_++)for(var w=2*c;w<2*c+2;w++){var P=new W(_,w);P.z=h+1;var j=this._tileCoordsToKey(P),z=this._tiles[j];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);h+1<p&&this._retainChildren(_,w,h+1,p)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,h,p){var _=Math.round(c);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,c)},_setZoomTransform:function(s,c,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();_e.any3d?In(s.el,_,p):Nt(s.el,_)},_resetGrid:function(){var s=this._map,c=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),_=c.project(s,this._tileZoom).floor(),w=c.getSize().divideBy(p*2);return new we(_.subtract(w),_.add(w))},_update:function(s){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),w=_.getCenter(),P=[],j=this.options.keepBuffer,z=new we(_.getBottomLeft().subtract([j,-j]),_.getTopRight().add([j,-j]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var ce=this._tiles[K].coords;(ce.z!==this._tileZoom||!z.contains(new W(ce.x,ce.y)))&&(this._tiles[K].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var Me=_.min.y;Me<=_.max.y;Me++)for(var Qe=_.min.x;Qe<=_.max.x;Qe++){var Vn=new W(Qe,Me);if(Vn.z=this._tileZoom,!!this._isValidTile(Vn)){var gn=this._tiles[this._tileCoordsToKey(Vn)];gn?gn.current=!0:P.push(Vn)}}if(P.sort(function(Kn,zc){return Kn.distanceTo(w)-zc.distanceTo(w)}),P.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ri=document.createDocumentFragment();for(Qe=0;Qe<P.length;Qe++)this._addTile(P[Qe],Ri);this._level.el.appendChild(Ri)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!c.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Fe(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),w=c.unproject(p,s.z),P=c.unproject(_,s.z);return[w,P]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),h=new Ct(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),h=new W(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(s){var c=this._tiles[s];c&&(xt(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Ve(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=f,s.onmousemove=f,_e.ielt9&&this.options.opacity<1&&Ln(s,this.options.opacity)},_addTile:function(s,c){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&M(r(this._tileReady,this,s,null,_)),Nt(_,h),this._tiles[p]={el:_,coords:s,current:!0},c.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Ln(h.el,0),O(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(Ve(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),_e.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new W(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new we(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function bN(s){return new Wu(s)}var jc=Wu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=b(this,c),c.detectRetina&&_e.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var h=document.createElement("img");return Oe(h,"load",r(this._tileOnLoad,this,c,h)),Oe(h,"error",r(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var c={r:_e.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=h),c["-y"]=h}return N(this._url,t(c,this.options))},_tileOnLoad:function(s,c){_e.ielt9?setTimeout(r(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),s(h,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=c-s),s+p},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=f,c.onerror=f,!c.complete)){c.src=X;var h=this._tiles[s].coords;xt(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",X),Wu.prototype._removeTile.call(this,s)},_tileReady:function(s,c,h){if(!(!this._map||h&&h.getAttribute("src")===X))return Wu.prototype._tileReady.call(this,s,c,h)}});function MT(s,c){return new jc(s,c)}var xT=jc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var h=t({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=b(this,c);var _=c.detectRetina&&_e.retina?2:1,w=this.getTileSize();h.width=w.x*_,h.height=w.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,jc.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),h=this._crs,p=Je(h.project(c[0]),h.project(c[1])),_=p.min,w=p.max,P=(this._wmsVersion>=1.3&&this._crs===$?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),j=jc.prototype.getTileUrl.call(this,s);return j+x(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+P},setParams:function(s,c){return t(this.wmsParams,s),c||this.redraw(),this}});function EN(s,c){return new xT(s,c)}jc.WMS=xT,MT.wms=EN;var co=Ke.extend({options:{padding:.1},initialize:function(s){b(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,c),w=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,c));_e.any3d?In(this._container,w,h):Nt(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new we(h,h.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),PT=co.extend({options:{tolerance:0},getEvents:function(){var s=co.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){co.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Oe(s,"mousemove",this._onMouseMove,this),Oe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Oe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,xt(this._container),wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){co.prototype._update.call(this);var s=this._bounds,c=this._container,h=s.getSize(),p=_e.retina?2:1;Nt(c,s.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",_e.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){co.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<c.length;_++){if(p=Number(c[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new we,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var h,p,_,w,P=s._parts,j=P.length,z=this._ctx;if(j){for(z.beginPath(),h=0;h<j;h++){for(p=0,_=P[h].length;p<_;p++)w=P[h][p],z[p?"lineTo":"moveTo"](w.x,w.y);c&&z.closePath()}this._fillStroke(z,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(c.x,c.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,c){var h=c.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(jt(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Ve(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,h){this._map._fireDOMEvent(c,h||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function AT(s){return _e.canvas?new PT(s):null}var Ku=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),CN={_initContainer:function(){this._container=it("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(co.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=Ku("shape");Ve(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=Ku("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;xt(c),s.removeInteractiveTarget(c),delete this._layers[a(s)]},_updateStyle:function(s){var c=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(c||(c=s._stroke=Ku("stroke")),_.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=G(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(_.removeChild(c),s._stroke=null),p.fill?(h||(h=s._fill=Ku("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){_r(s._container)},_bringToBack:function(s){vr(s._container)}},Vf=_e.vml?Ku:yc,Zu=co.extend({_initContainer:function(){this._container=Vf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xt(this._container),wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){co.prototype._update.call(this);var s=this._bounds,c=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),Nt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=Vf("path");s.options.className&&Ve(c,s.options.className),s.options.interactive&&Ve(c,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){xt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,h=s.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,wc(s._parts,c))},_updateCircle:function(s){var c=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(c.x-h)+","+c.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){_r(s._path)},_bringToBack:function(s){vr(s._path)}});_e.vml&&Zu.include(CN);function RT(s){return _e.svg||_e.vml?new Zu(s):null}Xe.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&AT(s)||RT(s)}});var OT=Bc.extend({initialize:function(s,c){Bc.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Fe(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function IN(s,c){return new OT(s,c)}Zu.create=Vf,Zu.pointsToPath=wc,ao.geometryToLayer=Af,ao.coordsToLatLng=wv,ao.coordsToLatLngs=Rf,ao.latLngToCoords=bv,ao.latLngsToCoords=Of,ao.getFeature=Uc,ao.asFeature=kf,Xe.mergeOptions({boxZoom:!0});var kT=ci.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qo(),to(),this._startPoint=this._map.mouseEventToContainerPoint(s),Oe(document,{contextmenu:Ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=it("div","leaflet-zoom-box",this._container),Ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new we(this._point,this._startPoint),h=c.getSize();Nt(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(xt(this._box),jt(this._container,"leaflet-crosshair")),mt(),Ru(),wt(document,{contextmenu:Ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var c=new Ct(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xe.addInitHook("addHandler","boxZoom",kT),Xe.mergeOptions({doubleClickZoom:!0});var NT=ci.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(_):c.setZoomAround(s.containerPoint,_)}});Xe.addInitHook("addHandler","doubleClickZoom",NT),Xe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var LT=ci.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Yi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){jt(this._map._container,"leaflet-grab"),jt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Fe(this._map.options.maxBounds);this._offsetLimit=Je(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-c+h)%s+c-h,w=(p+c+h)%s-c-h,P=Math.abs(_+h)<Math.abs(w+h)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=P},_onDragEnd:function(s){var c=this._map,h=c.options,p=!h.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),p)c.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,P=h.easeLinearity,j=_.multiplyBy(P/w),z=j.distanceTo([0,0]),K=Math.min(h.inertiaMaxSpeed,z),ce=j.multiplyBy(K/z),Me=K/(h.inertiaDeceleration*P),Qe=ce.multiplyBy(-Me/2).round();!Qe.x&&!Qe.y?c.fire("moveend"):(Qe=c._limitOffset(Qe,c.options.maxBounds),M(function(){c.panBy(Qe,{duration:Me,easeLinearity:P,noMoveStart:!0,animate:!0})}))}}});Xe.addInitHook("addHandler","dragging",LT),Xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var FT=ci.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Oe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,h=s.scrollTop||c.scrollTop,p=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)c[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)c[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)c[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)c[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)c[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)c[h.zoomOut[p]]=-s},_addHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],s.shiftKey&&(p=Z(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(Z(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Ai(s)}}});Xe.addInitHook("addHandler","keyboard",FT),Xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var VT=ci.extend({addHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=Uu(s),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),p),Ai(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,w=h?Math.ceil(_/h)*h:_,P=s._limitZoom(c+(this._delta>0?w:-w))-c;this._delta=0,this._startTime=null,P&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+P):s.setZoomAround(this._lastMousePos,c+P))}});Xe.addInitHook("addHandler","scrollWheelZoom",VT);var TN=600;Xe.mergeOptions({tapHold:_e.touchNative&&_e.safari&&_e.mobile,tapTolerance:15});var BT=ci.extend({addHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new W(c.clientX,c.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Oe(document,"touchend",zt),Oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),TN),Oe(document,"touchend touchcancel contextmenu",this._cancel,this),Oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){wt(document,"touchend",zt),wt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),wt(document,"touchend touchcancel contextmenu",this._cancel,this),wt(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new W(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});Xe.addInitHook("addHandler","tapHold",BT),Xe.mergeOptions({touchZoom:_e.touch,bounceAtZoomLimits:!0});var UT=ci.extend({addHooks:function(){Ve(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){jt(this._map._container,"leaflet-touch-zoom"),wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend touchcancel",this._onTouchEnd,this),zt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(_,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&_<1||this._zoom>c.getMaxZoom()&&_>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var P=r(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(P,this,!0),zt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),wt(document,"touchmove",this._onTouchMove,this),wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xe.addInitHook("addHandler","touchZoom",UT),Xe.BoxZoom=kT,Xe.DoubleClickZoom=NT,Xe.Drag=LT,Xe.Keyboard=FT,Xe.ScrollWheelZoom=VT,Xe.TapHold=BT,Xe.TouchZoom=UT,n.Bounds=we,n.Browser=_e,n.CRS=dn,n.Canvas=PT,n.Circle=yv,n.CircleMarker=Pf,n.Class=V,n.Control=Wn,n.DivIcon=DT,n.DivOverlay=Er,n.DomEvent=Ft,n.DomUtil=yr,n.Draggable=Yi,n.Evented=Gn,n.FeatureGroup=Pt,n.GeoJSON=ao,n.GridLayer=Wu,n.Handler=ci,n.Icon=li,n.ImageOverlay=Nf,n.LatLng=Ie,n.LatLngBounds=Ct,n.Layer=Ke,n.LayerGroup=Vt,n.LineUtil=d,n.Map=Xe,n.Marker=xf,n.Mixin=Rc,n.Path=ts,n.Point=W,n.PolyUtil=zu,n.Polygon=Bc,n.Polyline=so,n.Popup=Lf,n.PosAnimation=bf,n.Projection=C,n.Rectangle=OT,n.Renderer=co,n.SVG=Zu,n.SVGOverlay=ST,n.TileLayer=jc,n.Tooltip=Ff,n.Transformation=hn,n.Util=F,n.VideoOverlay=TT,n.bind=r,n.bounds=Je,n.canvas=AT,n.circle=dN,n.circleMarker=uN,n.control=Xo,n.divIcon=wN,n.extend=t,n.featureGroup=mn,n.geoJSON=IT,n.geoJson=pN,n.gridLayer=bN,n.icon=ui,n.imageOverlay=mN,n.latLng=Ee,n.latLngBounds=Fe,n.layerGroup=ot,n.map=Ef,n.marker=lN,n.point=Z,n.polygon=fN,n.polyline=hN,n.popup=vN,n.rectangle=IN,n.setOptions=b,n.stamp=a,n.svg=RT,n.svgOverlay=_N,n.tileLayer=MT,n.tooltip=yN,n.transformation=Nn,n.version=e,n.videoOverlay=gN;var SN=window.L;n.noConflict=function(){return window.L=SN,this},window.L=n})});function WT(n,e){return Object.is(n,e)}var sn=null,jf=!1,zf=1,lo=Symbol("SIGNAL");function ct(n){let e=sn;return sn=n,e}function KT(){return sn}var Yu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xv(n){if(jf)throw new Error("");if(sn===null)return;sn.consumerOnSignalRead(n);let e=sn.nextProducerIndex++;if(Gf(sn),e<sn.producerNode.length&&sn.producerNode[e]!==n&&Qu(sn)){let t=sn.producerNode[e];qf(t,sn.producerIndexOfThis[e])}sn.producerNode[e]!==n&&(sn.producerNode[e]=n,sn.producerIndexOfThis[e]=Qu(sn)?JT(n,sn,e):0),sn.producerLastReadVersion[e]=n.version}function HN(){zf++}function ZT(n){if(!(Qu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===zf)){if(!n.producerMustRecompute(n)&&!Av(n)){n.dirty=!1,n.lastCleanEpoch=zf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=zf}}function QT(n){if(n.liveConsumerNode===void 0)return;let e=jf;jf=!0;try{for(let t of n.liveConsumerNode)t.dirty||qN(t)}finally{jf=e}}function YT(){return sn?.consumerAllowSignalWrites!==!1}function qN(n){n.dirty=!0,QT(n),n.consumerMarkedDirty?.(n)}function Hf(n){return n&&(n.nextProducerIndex=0),ct(n)}function Pv(n,e){if(ct(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Qu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)qf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Av(n){Gf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(ZT(t),i!==t.version))return!0}return!1}function Rv(n){if(Gf(n),Qu(n))for(let e=0;e<n.producerNode.length;e++)qf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function JT(n,e,t){if(XT(n),n.liveConsumerNode.length===0&&eS(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=JT(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function qf(n,e){if(XT(n),n.liveConsumerNode.length===1&&eS(n))for(let i=0;i<n.producerNode.length;i++)qf(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Gf(r),r.producerIndexOfThis[i]=e}}function Qu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Gf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function XT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function eS(n){return n.producerNode!==void 0}function tS(n){let e=Object.create(GN);e.computation=n;let t=()=>{if(ZT(e),xv(e),e.value===$f)throw e.error;return e.value};return t[lo]=e,t}var Dv=Symbol("UNSET"),Mv=Symbol("COMPUTING"),$f=Symbol("ERRORED"),GN=ke(J({},Yu),{value:Dv,dirty:!0,error:null,equal:WT,producerMustRecompute(n){return n.value===Dv||n.value===Mv},producerRecomputeValue(n){if(n.value===Mv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Mv;let t=Hf(n),i;try{i=n.computation()}catch(r){i=$f,n.error=r}finally{Pv(n,t)}if(e!==Dv&&e!==$f&&i!==$f&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function WN(){throw new Error}var nS=WN;function iS(){nS()}function rS(n){nS=n}var KN=null;function oS(n){let e=Object.create(aS);e.value=n;let t=()=>(xv(e),e.value);return t[lo]=e,t}function Ov(n,e){YT()||iS(),n.equal(n.value,e)||(n.value=e,ZN(n))}function sS(n,e){YT()||iS(),Ov(n,e(n.value))}var aS=ke(J({},Yu),{equal:WT,value:void 0});function ZN(n){n.version++,HN(),QT(n),KN?.()}function Be(n){return typeof n=="function"}function $c(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wf=$c(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fa(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $t=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Be(i))try{i()}catch(o){e=o instanceof Wf?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{cS(o)}catch(a){e=e??[],a instanceof Wf?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Wf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)cS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fa(t,e)}remove(e){let{_finalizers:t}=this;t&&fa(t,e),e instanceof n&&e._removeParent(this)}};$t.EMPTY=(()=>{let n=new $t;return n.closed=!0,n})();var kv=$t.EMPTY;function Kf(n){return n instanceof $t||n&&"closed"in n&&Be(n.remove)&&Be(n.add)&&Be(n.unsubscribe)}function cS(n){Be(n)?n():n.unsubscribe()}var Ji={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Hc={setTimeout(n,e,...t){let{delegate:i}=Hc;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Hc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zf(n){Hc.setTimeout(()=>{let{onUnhandledError:e}=Ji;if(e)e(n);else throw n})}function Ju(){}var lS=Nv("C",void 0,void 0);function uS(n){return Nv("E",void 0,n)}function dS(n){return Nv("N",n,void 0)}function Nv(n,e,t){return{kind:n,value:e,error:t}}var pa=null;function qc(n){if(Ji.useDeprecatedSynchronousErrorHandling){let e=!pa;if(e&&(pa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=pa;if(pa=null,t)throw i}}else n()}function hS(n){Ji.useDeprecatedSynchronousErrorHandling&&pa&&(pa.errorThrown=!0,pa.error=n)}var ma=class extends $t{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Kf(e)&&e.add(this)):this.destination=JN}static create(e,t,i){return new Gc(e,t,i)}next(e){this.isStopped?Fv(dS(e),this):this._next(e)}error(e){this.isStopped?Fv(uS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Fv(lS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},QN=Function.prototype.bind;function Lv(n,e){return QN.call(n,e)}var Vv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Qf(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Qf(i)}else Qf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Qf(t)}}},Gc=class extends ma{constructor(e,t,i){super();let r;if(Be(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Ji.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Lv(e.next,o),error:e.error&&Lv(e.error,o),complete:e.complete&&Lv(e.complete,o)}):r=e}this.destination=new Vv(r)}};function Qf(n){Ji.useDeprecatedSynchronousErrorHandling?hS(n):Zf(n)}function YN(n){throw n}function Fv(n,e){let{onStoppedNotification:t}=Ji;t&&Hc.setTimeout(()=>t(n,e))}var JN={closed:!0,next:Ju,error:YN,complete:Ju};var Wc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function di(n){return n}function Bv(...n){return Uv(n)}function Uv(n){return n.length===0?di:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var ze=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=eL(t)?t:new Gc(t,i,r);return qc(()=>{let{operator:a,source:l}=this;o.add(a?a.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=fS(i),new i((r,o)=>{let a=new Gc({next:l=>{try{t(l)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Wc](){return this}pipe(...t){return Uv(t)(this)}toPromise(t){return t=fS(t),new t((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return n.create=e=>new n(e),n})();function fS(n){var e;return(e=n??Ji.Promise)!==null&&e!==void 0?e:Promise}function XN(n){return n&&Be(n.next)&&Be(n.error)&&Be(n.complete)}function eL(n){return n&&n instanceof ma||XN(n)&&Kf(n)}function jv(n){return Be(n?.lift)}function st(n){return e=>{if(jv(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function et(n,e,t,i,r){return new zv(n,e,t,i,r)}var zv=class extends ma{constructor(e,t,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(l){try{t(l)}catch(u){e.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Kc(){return st((n,e)=>{let t=null;n._refCount++;let i=et(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Zc=class extends ze{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,jv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $t;let t=this.getSubject();e.add(this.source.subscribe(et(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$t.EMPTY)}return e}refCount(){return Kc()(this)}};var pS=$c(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _n=(()=>{class n extends ze{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Yf(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new pS}next(t){qc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){qc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){qc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?kv:(this.currentObservers=null,o.push(t),new $t(()=>{this.currentObservers=null,fa(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new ze;return t.source=this,t}}return n.create=(e,t)=>new Yf(e,t),n})(),Yf=class extends _n{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:kv}};var Wt=class extends _n{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var $v={now(){return($v.delegate||Date).now()},delegate:void 0};var Jf=class extends $t{constructor(e,t){super()}schedule(e,t=0){return this}};var Xu={setInterval(n,e,...t){let{delegate:i}=Xu;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Qc=class extends Jf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Xu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Xu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fa(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Yc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Yc.now=$v.now;var Jc=class extends Yc{constructor(e,t=Yc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Hv=new Jc(Qc);var Xf=class extends Qc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var ep=class extends Jc{};var qv=new ep(Xf);var hi=new ze(n=>n.complete());function mS(n){return n&&Be(n.schedule)}function gS(n){return n[n.length-1]}function tp(n){return Be(gS(n))?n.pop():void 0}function is(n){return mS(gS(n))?n.pop():void 0}function Gv(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function vS(n,e,t,i){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(m){try{f(i.next(m))}catch(v){a(v)}}function u(m){try{f(i.throw(m))}catch(v){a(v)}}function f(m){m.done?o(m.value):r(m.value).then(l,u)}f((i=i.apply(n,e||[])).next())})}function _S(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ga(n){return this instanceof ga?(this.v=n,this):new ga(n)}function yS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(b){return function(x){return Promise.resolve(x).then(b,v)}}function l(b,x){i[b]&&(r[b]=function(k){return new Promise(function(N,G){o.push([b,k,N,G])>1||u(b,k)})},x&&(r[b]=x(r[b])))}function u(b,x){try{f(i[b](x))}catch(k){E(o[0][3],k)}}function f(b){b.value instanceof ga?Promise.resolve(b.value.v).then(m,v):E(o[0][2],b)}function m(b){u("next",b)}function v(b){u("throw",b)}function E(b,x){b(x),o.shift(),o.length&&u(o[0][0],o[0][1])}}function wS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof _S=="function"?_S(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(a){return new Promise(function(l,u){a=n[o](a),r(l,u,a.done,a.value)})}}function r(o,a,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},a)}}var np=n=>n&&typeof n.length=="number"&&typeof n!="function";function ip(n){return Be(n?.then)}function rp(n){return Be(n[Wc])}function op(n){return Symbol.asyncIterator&&Be(n?.[Symbol.asyncIterator])}function sp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ap=tL();function cp(n){return Be(n?.[ap])}function lp(n){return yS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield ga(t.read());if(r)return yield ga(void 0);yield yield ga(i)}}finally{t.releaseLock()}})}function up(n){return Be(n?.getReader)}function Qt(n){if(n instanceof ze)return n;if(n!=null){if(rp(n))return nL(n);if(np(n))return iL(n);if(ip(n))return rL(n);if(op(n))return bS(n);if(cp(n))return oL(n);if(up(n))return sL(n)}throw sp(n)}function nL(n){return new ze(e=>{let t=n[Wc]();if(Be(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iL(n){return new ze(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function rL(n){return new ze(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Zf)})}function oL(n){return new ze(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function bS(n){return new ze(e=>{aL(n,e).catch(t=>e.error(t))})}function sL(n){return bS(lp(n))}function aL(n,e){var t,i,r,o;return vS(this,void 0,void 0,function*(){try{for(t=wS(n);i=yield t.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Zn(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function rs(n,e=0){return st((t,i)=>{t.subscribe(et(i,r=>Zn(i,n,()=>i.next(r),e),()=>Zn(i,n,()=>i.complete(),e),r=>Zn(i,n,()=>i.error(r),e)))})}function os(n,e=0){return st((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function ES(n,e){return Qt(n).pipe(os(e),rs(e))}function CS(n,e){return Qt(n).pipe(os(e),rs(e))}function IS(n,e){return new ze(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function TS(n,e){return new ze(t=>{let i;return Zn(t,e,()=>{i=n[ap](),Zn(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){t.error(a);return}o?t.complete():t.next(r)},0,!0)}),()=>Be(i?.return)&&i.return()})}function dp(n,e){if(!n)throw new Error("Iterable cannot be null");return new ze(t=>{Zn(t,e,()=>{let i=n[Symbol.asyncIterator]();Zn(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function SS(n,e){return dp(lp(n),e)}function DS(n,e){if(n!=null){if(rp(n))return ES(n,e);if(np(n))return IS(n,e);if(ip(n))return CS(n,e);if(op(n))return dp(n,e);if(cp(n))return TS(n,e);if(up(n))return SS(n,e)}throw sp(n)}function At(n,e){return e?DS(n,e):Qt(n)}function De(...n){let e=is(n);return At(n,e)}function Xc(n,e){let t=Be(n)?n:()=>n,i=r=>r.error(t());return new ze(e?r=>e.schedule(i,0,r):i)}function Wv(n){return!!n&&(n instanceof ze||Be(n.lift)&&Be(n.subscribe))}var Xi=$c(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Kv(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=!1,a;n.subscribe({next:l=>{a=l,o=!0},error:r,complete:()=>{o?i(a):t?i(e.defaultValue):r(new Xi)}})})}function Ae(n,e){return st((t,i)=>{let r=0;t.subscribe(et(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:cL}=Array;function lL(n,e){return cL(e)?n(...e):n(e)}function hp(n){return Ae(e=>lL(n,e))}var{isArray:uL}=Array,{getPrototypeOf:dL,prototype:hL,keys:fL}=Object;function fp(n){if(n.length===1){let e=n[0];if(uL(e))return{args:e,keys:null};if(pL(e)){let t=fL(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function pL(n){return n&&typeof n=="object"&&dL(n)===hL}function pp(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function ed(...n){let e=is(n),t=tp(n),{args:i,keys:r}=fp(n);if(i.length===0)return At([],e);let o=new ze(mL(i,e,r?a=>pp(r,a):di));return t?o.pipe(hp(t)):o}function mL(n,e,t=di){return i=>{MS(e,()=>{let{length:r}=n,o=new Array(r),a=r,l=r;for(let u=0;u<r;u++)MS(e,()=>{let f=At(n[u],e),m=!1;f.subscribe(et(i,v=>{o[u]=v,m||(m=!0,l--),l||i.next(t(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function MS(n,e,t){n?Zn(t,n,e):e()}function xS(n,e,t,i,r,o,a,l){let u=[],f=0,m=0,v=!1,E=()=>{v&&!u.length&&!f&&e.complete()},b=k=>f<i?x(k):u.push(k),x=k=>{o&&e.next(k),f++;let N=!1;Qt(t(k,m++)).subscribe(et(e,G=>{r?.(G),o?b(G):e.next(G)},()=>{N=!0},void 0,()=>{if(N)try{for(f--;u.length&&f<i;){let G=u.shift();a?Zn(e,a,()=>x(G)):x(G)}E()}catch(G){e.error(G)}}))};return n.subscribe(et(e,b,()=>{v=!0,E()})),()=>{l?.()}}function Yt(n,e,t=1/0){return Be(e)?Yt((i,r)=>Ae((o,a)=>e(i,o,r,a))(Qt(n(i,r))),t):(typeof e=="number"&&(t=e),st((i,r)=>xS(i,r,n,t)))}function el(n=1/0){return Yt(di,n)}function PS(){return el(1)}function tl(...n){return PS()(At(n,is(n)))}function mp(n){return new ze(e=>{Qt(n()).subscribe(e)})}function Zv(...n){let e=tp(n),{args:t,keys:i}=fp(n),r=new ze(o=>{let{length:a}=t;if(!a){o.complete();return}let l=new Array(a),u=a,f=a;for(let m=0;m<a;m++){let v=!1;Qt(t[m]).subscribe(et(o,E=>{v||(v=!0,f--),l[m]=E},()=>u--,void 0,()=>{(!u||!v)&&(f||o.next(i?pp(i,l):l),o.complete())}))}});return e?r.pipe(hp(e)):r}function Qn(n,e){return st((t,i)=>{let r=0;t.subscribe(et(i,o=>n.call(e,o,r++)&&i.next(o)))})}function ss(n){return st((e,t)=>{let i=null,r=!1,o;i=e.subscribe(et(t,void 0,void 0,a=>{o=Qt(n(a,ss(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function AS(n,e,t,i,r){return(o,a)=>{let l=t,u=e,f=0;o.subscribe(et(a,m=>{let v=f++;u=l?n(u,m,v):(l=!0,m),i&&a.next(u)},r&&(()=>{l&&a.next(u),a.complete()})))}}function uo(n,e){return Be(e)?Yt(n,e,1):Yt(n,1)}function as(n){return st((e,t)=>{let i=!1;e.subscribe(et(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function ho(n){return n<=0?()=>hi:st((e,t)=>{let i=0;e.subscribe(et(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Qv(n){return Ae(()=>n)}function gp(n=gL){return st((e,t)=>{let i=!1;e.subscribe(et(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function gL(){return new Xi}function _a(n){return st((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Cr(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Qn((r,o)=>n(r,o,i)):di,ho(1),t?as(e):gp(()=>new Xi))}function nl(n){return n<=0?()=>hi:st((e,t)=>{let i=[];e.subscribe(et(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Yv(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Qn((r,o)=>n(r,o,i)):di,nl(1),t?as(e):gp(()=>new Xi))}function Jv(n,e){return st(AS(n,e,arguments.length>=2,!0))}function Xv(...n){let e=is(n);return st((t,i)=>{(e?tl(n,t,e):tl(n,t)).subscribe(i)})}function Yn(n,e){return st((t,i)=>{let r=null,o=0,a=!1,l=()=>a&&!r&&i.complete();t.subscribe(et(i,u=>{r?.unsubscribe();let f=0,m=o++;Qt(n(u,m)).subscribe(r=et(i,v=>i.next(e?e(u,v,m,f++):v),()=>{r=null,l()}))},()=>{a=!0,l()}))})}function ey(n){return st((e,t)=>{Qt(n).subscribe(et(t,()=>t.complete(),Ju)),!t.closed&&e.subscribe(t)})}function Jt(n,e,t){let i=Be(n)||e||t?{next:n,error:e,complete:t}:n;return i?st((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let l=!0;r.subscribe(et(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;l=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;l=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;l&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):di}var _D="https://g.co/ng/security#xss",ee=class extends Error{constructor(e,t){super(Jp(e,t)),this.code=e}};function Jp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ld(n){return{toString:n}.toString()}var _p="__parameters__";function _L(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function vD(n,e,t){return ld(()=>{let i=_L(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return l.annotation=a,l;function l(u,f,m){let v=u.hasOwnProperty(_p)?u[_p]:Object.defineProperty(u,_p,{value:[]})[_p];for(;v.length<=m;)v.push(null);return(v[m]=v[m]||[]).push(a),u}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var ya=globalThis;function It(n){for(let e in n)if(n[e]===It)return e;throw Error("Could not find renamed property on target object.")}function vL(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Un(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Un).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function RS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var yL=It({__forward_ref__:It});function _o(n){return n.__forward_ref__=_o,n.toString=function(){return Un(this())},n}function Bn(n){return yD(n)?n():n}function yD(n){return typeof n=="function"&&n.hasOwnProperty(yL)&&n.__forward_ref__===_o}function le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Pr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xp(n){return OS(n,bD)||OS(n,ED)}function wD(n){return Xp(n)!==null}function OS(n,e){return n.hasOwnProperty(e)?n[e]:null}function wL(n){let e=n&&(n[bD]||n[ED]);return e||null}function kS(n){return n&&(n.hasOwnProperty(NS)||n.hasOwnProperty(bL))?n[NS]:null}var bD=It({\u0275prov:It}),NS=It({\u0275inj:It}),ED=It({ngInjectableDef:It}),bL=It({ngInjectorDef:It}),pe=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function CD(n){return n&&!!n.\u0275providers}var EL=It({\u0275cmp:It}),CL=It({\u0275dir:It}),IL=It({\u0275pipe:It}),TL=It({\u0275mod:It}),Mp=It({\u0275fac:It}),nd=It({__NG_ELEMENT_ID__:It}),LS=It({__NG_ENV_ID__:It});function ll(n){return typeof n=="string"?n:n==null?"":String(n)}function SL(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ll(n)}function DL(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ee(-200,n)}function h0(n,e){throw new ee(-201,!1)}var Ze=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ze||{}),my;function ID(){return my}function Jn(n){let e=my;return my=n,e}function TD(n,e,t){let i=Xp(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&Ze.Optional)return null;if(e!==void 0)return e;h0(n,"Injector")}var ML={},id=ML,gy="__NG_DI_FLAG__",xp="ngTempTokenPath",xL="ngTokenPath",PL=/\n/gm,AL="\u0275",FS="__source",al;function RL(){return al}function cs(n){let e=al;return al=n,e}function OL(n,e=Ze.Default){if(al===void 0)throw new ee(-203,!1);return al===null?TD(n,void 0,e):al.get(n,e&Ze.Optional?null:void 0,e)}function ve(n,e=Ze.Default){return(ID()||OL)(Bn(n),e)}function Q(n,e=Ze.Default){return ve(n,em(e))}function em(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function _y(n){let e=[];for(let t=0;t<n.length;t++){let i=Bn(n[t]);if(Array.isArray(i)){if(i.length===0)throw new ee(900,!1);let r,o=Ze.Default;for(let a=0;a<i.length;a++){let l=i[a],u=kL(l);typeof u=="number"?u===-1?r=l.token:o|=u:r=l}e.push(ve(r,o))}else e.push(ve(i))}return e}function SD(n,e){return n[gy]=e,n.prototype[gy]=e,n}function kL(n){return n[gy]}function NL(n,e,t,i){let r=n[xp];throw e[FS]&&r.unshift(e[FS]),n.message=LL(`
`+n.message,r,t,i),n[xL]=r,n[xp]=null,n}function LL(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==AL?n.slice(2):n;let r=Un(e);if(Array.isArray(e))r=e.map(Un).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let l=e[a];o.push(a+":"+(typeof l=="string"?JSON.stringify(l):Un(l)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(PL,`
  `)}`}var xn=SD(vD("Optional"),8);var f0=SD(vD("SkipSelf"),4);function ba(n,e){let t=n.hasOwnProperty(Mp);return t?n[Mp]:null}function FL(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function VL(n){return n.flat(Number.POSITIVE_INFINITY)}function p0(n,e){n.forEach(t=>Array.isArray(t)?p0(t,e):e(t))}function DD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Pp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function BL(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function UL(n,e,t){let i=ud(n,e);return i>=0?n[i|1]=t:(i=~i,BL(n,i,e,t)),i}function ty(n,e){let t=ud(n,e);if(t>=0)return n[t|1]}function ud(n,e){return jL(n,e,1)}function jL(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),a=n[o<<t];if(e===a)return o<<t;a>e?r=o:i=o+1}return~(r<<t)}var ul={},Oi=[],dl=new pe(""),MD=new pe("",-1),xD=new pe(""),Ap=class{get(e,t=id){if(t===id){let i=new Error(`NullInjectorError: No provider for ${Un(e)}!`);throw i.name="NullInjectorError",i}return t}},PD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(PD||{}),Sr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Sr||{}),ds=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ds||{});function zL(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function vy(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],a=t[i++],l=t[i++];n.setAttribute(e,a,l,o)}else{let o=r,a=t[++i];$L(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),i++}}return i}function AD(n){return n===3||n===4||n===6}function $L(n){return n.charCodeAt(0)===64}function rd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?VS(n,t,r,null,e[++i]):VS(n,t,r,null,null))}}return n}function VS(n,e,t,i,r){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let l=n[o++];if(typeof l=="number"){if(l===e){a=-1;break}else if(l>e){a=o-1;break}}}for(;o<n.length;){let l=n[o];if(typeof l=="number")break;if(l===t){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var RD="ng-template";function HL(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&zL(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(m0(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function m0(n){return n.type===4&&n.value!==RD}function qL(n,e,t){let i=n.type===4&&!t?RD:n.value;return e===i}function GL(n,e,t){let i=4,r=n.attrs,o=r!==null?ZL(r):0,a=!1;for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="number"){if(!a&&!er(i)&&!er(u))return!1;if(a&&er(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!qL(n,u,t)||u===""&&e.length===1){if(er(i))return!1;a=!0}}else if(i&8){if(r===null||!HL(n,r,u,t)){if(er(i))return!1;a=!0}}else{let f=e[++l],m=WL(u,r,m0(n),t);if(m===-1){if(er(i))return!1;a=!0;continue}if(f!==""){let v;if(m>o?v="":v=r[m+1].toLowerCase(),i&2&&f!==v){if(er(i))return!1;a=!0}}}}return er(i)||a}function er(n){return(n&1)===0}function WL(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let a=e[r];if(a===n)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return QL(e,n)}function KL(n,e,t=!1){for(let i=0;i<e.length;i++)if(GL(n,e[i],t))return!0;return!1}function ZL(n){for(let e=0;e<n.length;e++){let t=n[e];if(AD(t))return e}return n.length}function QL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function BS(n,e){return n?":not("+e.trim()+")":e}function YL(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(i&2){let l=n[++t];r+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!er(a)&&(e+=BS(o,r),r=""),i=a,o=o||!er(i);t++}return r!==""&&(e+=BS(o,r)),e}function JL(n){return n.map(YL).join(",")}function XL(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!er(r))break;r=o}i++}return{attrs:e,classes:t}}function ht(n){return ld(()=>{let e=FD(n),t=ke(J({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===PD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Sr.Emulated,styles:n.styles||Oi,_:null,schemas:n.schemas||null,tView:null,id:""});VD(t);let i=n.dependencies;return t.directiveDefs=jS(i,!1),t.pipeDefs=jS(i,!0),t.id=n2(t),t})}function e2(n){return hs(n)||OD(n)}function t2(n){return n!==null}function Ar(n){return ld(()=>({type:n.type,bootstrap:n.bootstrap||Oi,declarations:n.declarations||Oi,imports:n.imports||Oi,exports:n.exports||Oi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function US(n,e){if(n==null)return ul;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,a,l=ds.None;Array.isArray(r)?(l=r[0],o=r[1],a=r[2]??o):(o=r,a=r),e?(t[o]=l!==ds.None?[i,l]:i,e[o]=a):t[o]=i}return t}function Sn(n){return ld(()=>{let e=FD(n);return VD(e),e})}function g0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function hs(n){return n[EL]||null}function OD(n){return n[CL]||null}function kD(n){return n[IL]||null}function ND(n){let e=hs(n)||OD(n)||kD(n);return e!==null?e.standalone:!1}function LD(n,e){let t=n[TL]||null;if(!t&&e===!0)throw new Error(`Type ${Un(n)} does not have '\u0275mod' property.`);return t}function FD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ul,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Oi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:US(n.inputs,e),outputs:US(n.outputs),debugInfo:null}}function VD(n){n.features?.forEach(e=>e(n))}function jS(n,e){if(!n)return null;let t=e?kD:e2;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(t2)}function n2(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rr(n){return{\u0275providers:n}}function i2(...n){return{\u0275providers:BD(!0,n),\u0275fromNgModule:!0}}function BD(n,...e){let t=[],i=new Set,r,o=a=>{t.push(a)};return p0(e,a=>{let l=a;yy(l,o,[],i)&&(r||=[],r.push(l))}),r!==void 0&&UD(r,o),t}function UD(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];_0(r,o=>{e(o,i)})}}function yy(n,e,t,i){if(n=Bn(n),!n)return!1;let r=null,o=kS(n),a=!o&&hs(n);if(!o&&!a){let u=n.ngModule;if(o=kS(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=n}let l=i.has(r);if(a){if(l)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)yy(f,e,t,i)}}else if(o){if(o.imports!=null&&!l){i.add(r);let f;try{p0(o.imports,m=>{yy(m,e,t,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&UD(f,e)}if(!l){let f=ba(r)||(()=>new r);e({provide:r,useFactory:f,deps:Oi},r),e({provide:xD,useValue:r,multi:!0},r),e({provide:dl,useValue:()=>ve(r),multi:!0},r)}let u=o.providers;if(u!=null&&!l){let f=n;_0(u,m=>{e(m,f)})}}else return!1;return r!==n&&n.providers!==void 0}function _0(n,e){for(let t of n)CD(t)&&(t=t.\u0275providers),Array.isArray(t)?_0(t,e):e(t)}var r2=It({provide:String,useValue:It});function jD(n){return n!==null&&typeof n=="object"&&r2 in n}function o2(n){return!!(n&&n.useExisting)}function s2(n){return!!(n&&n.useFactory)}function hl(n){return typeof n=="function"}function a2(n){return!!n.useClass}var tm=new pe(""),Ep={},c2={},ny;function v0(){return ny===void 0&&(ny=new Ap),ny}var jn=class{},od=class extends jn{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,by(e,a=>this.processProvider(a)),this.records.set(MD,il(void 0,this)),r.has("environment")&&this.records.set(jn,il(void 0,this));let o=this.records.get(tm);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xD,Oi,Ze.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ct(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ct(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=cs(this),i=Jn(void 0),r;try{return e()}finally{cs(t),Jn(i)}}get(e,t=id,i=Ze.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(LS))return e[LS](this);i=em(i);let r,o=cs(this),a=Jn(void 0);try{if(!(i&Ze.SkipSelf)){let u=this.records.get(e);if(u===void 0){let f=f2(e)&&Xp(e);f&&this.injectableDefInScope(f)?u=il(wy(e),Ep):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let l=i&Ze.Self?v0():this.parent;return t=i&Ze.Optional&&t===id?null:t,l.get(e,t)}catch(l){if(l.name==="NullInjectorError"){if((l[xp]=l[xp]||[]).unshift(Un(e)),o)throw l;return NL(l,e,"R3InjectorError",this.source)}else throw l}finally{Jn(a),cs(o)}}resolveInjectorInitializers(){let e=ct(null),t=cs(this),i=Jn(void 0),r;try{let o=this.get(dl,Oi,Ze.Self);for(let a of o)a()}finally{cs(t),Jn(i),ct(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Un(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=Bn(e);let t=hl(e)?e:Bn(e&&e.provide),i=u2(e);if(!hl(e)&&e.multi===!0){let r=this.records.get(t);r||(r=il(void 0,Ep,!0),r.factory=()=>_y(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=ct(null);try{return t.value===Ep&&(t.value=c2,t.value=t.factory()),typeof t.value=="object"&&t.value&&h2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ct(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Bn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function wy(n){let e=Xp(n),t=e!==null?e.factory:ba(n);if(t!==null)return t;if(n instanceof pe)throw new ee(204,!1);if(n instanceof Function)return l2(n);throw new ee(204,!1)}function l2(n){if(n.length>0)throw new ee(204,!1);let t=wL(n);return t!==null?()=>t.factory(n):()=>new n}function u2(n){if(jD(n))return il(void 0,n.useValue);{let e=zD(n);return il(e,Ep)}}function zD(n,e,t){let i;if(hl(n)){let r=Bn(n);return ba(r)||wy(r)}else if(jD(n))i=()=>Bn(n.useValue);else if(s2(n))i=()=>n.useFactory(..._y(n.deps||[]));else if(o2(n))i=()=>ve(Bn(n.useExisting));else{let r=Bn(n&&(n.useClass||n.provide));if(d2(n))i=()=>new r(..._y(n.deps));else return ba(r)||wy(r)}return i}function il(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function d2(n){return!!n.deps}function h2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function f2(n){return typeof n=="function"||typeof n=="object"&&n instanceof pe}function by(n,e){for(let t of n)Array.isArray(t)?by(t,e):t&&CD(t)?by(t.\u0275providers,e):e(t)}function Ni(n,e){n instanceof od&&n.assertNotDestroyed();let t,i=cs(n),r=Jn(void 0);try{return e()}finally{cs(i),Jn(r)}}function $D(){return ID()!==void 0||RL()!=null}function p2(n){if(!$D())throw new ee(-203,!1)}function m2(n){return typeof n=="function"}var vo=0,$e=1,Re=2,Mn=3,tr=4,or=5,Rp=6,Op=7,nr=8,fl=9,Dr=10,an=11,sd=12,zS=13,yl=14,Mr=15,Ea=16,rl=17,fo=18,nm=19,HD=20,ls=21,iy=22,ki=23,ir=25,qD=1;var Ca=7,kp=8,pl=9,fi=10,Np=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Np||{});function us(n){return Array.isArray(n)&&typeof n[qD]=="object"}function yo(n){return Array.isArray(n)&&n[qD]===!0}function GD(n){return(n.flags&4)!==0}function im(n){return n.componentOffset>-1}function y0(n){return(n.flags&1)===1}function fs(n){return!!n.template}function Ey(n){return(n[Re]&512)!==0}var Cy=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function WD(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function Li(){return KD}function KD(n){return n.type.prototype.ngOnChanges&&(n.setInput=_2),g2}Li.ngInherit=!0;function g2(){let n=QD(this),e=n?.current;if(e){let t=n.previous;if(t===ul)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function _2(n,e,t,i,r){let o=this.declaredInputs[i],a=QD(n)||v2(n,{previous:ul,current:null}),l=a.current||(a.current={}),u=a.previous,f=u[o];l[o]=new Cy(f&&f.currentValue,t,u===ul),WD(n,e,r,t)}var ZD="__ngSimpleChanges__";function QD(n){return n[ZD]||null}function v2(n,e){return n[ZD]=e}var $S=null;var Ir=function(n,e,t){$S?.(n,e,t)},YD="svg",y2="math";function xr(n){for(;Array.isArray(n);)n=n[vo];return n}function JD(n,e){return xr(e[n])}function Fi(n,e){return xr(e[n.index])}function XD(n,e){return n.data[e]}function e1(n,e){return n[e]}function gs(n,e){let t=e[n];return us(t)?t:t[vo]}function w2(n){return(n[Re]&4)===4}function w0(n){return(n[Re]&128)===128}function b2(n){return yo(n[Mn])}function Lp(n,e){return e==null?null:n[e]}function t1(n){n[rl]=0}function n1(n){n[Re]&1024||(n[Re]|=1024,w0(n)&&om(n))}function E2(n,e){for(;n>0;)e=e[yl],n--;return e}function rm(n){return!!(n[Re]&9216||n[ki]?.dirty)}function Iy(n){n[Dr].changeDetectionScheduler?.notify(8),n[Re]&64&&(n[Re]|=1024),rm(n)&&om(n)}function om(n){n[Dr].changeDetectionScheduler?.notify(0);let e=Ia(n);for(;e!==null&&!(e[Re]&8192||(e[Re]|=8192,!w0(e)));)e=Ia(e)}function i1(n,e){if((n[Re]&256)===256)throw new ee(911,!1);n[ls]===null&&(n[ls]=[]),n[ls].push(e)}function C2(n,e){if(n[ls]===null)return;let t=n[ls].indexOf(e);t!==-1&&n[ls].splice(t,1)}function Ia(n){let e=n[Mn];return yo(e)?e[Mn]:e}var Ue={lFrame:p1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var r1=!1;function I2(){return Ue.lFrame.elementDepthCount}function T2(){Ue.lFrame.elementDepthCount++}function S2(){Ue.lFrame.elementDepthCount--}function o1(){return Ue.bindingsEnabled}function D2(){return Ue.skipHydrationRootTNode!==null}function M2(n){return Ue.skipHydrationRootTNode===n}function x2(){Ue.skipHydrationRootTNode=null}function dt(){return Ue.lFrame.lView}function Pn(){return Ue.lFrame.tView}function he(n){return Ue.lFrame.contextLView=n,n[nr]}function fe(n){return Ue.lFrame.contextLView=null,n}function zn(){let n=s1();for(;n!==null&&n.type===64;)n=n.parent;return n}function s1(){return Ue.lFrame.currentTNode}function P2(){let n=Ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function dd(n,e){let t=Ue.lFrame;t.currentTNode=n,t.isParent=e}function a1(){return Ue.lFrame.isParent}function A2(){Ue.lFrame.isParent=!1}function R2(){return Ue.lFrame.contextLView}function c1(){return r1}function HS(n){r1=n}function l1(){let n=Ue.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function O2(){return Ue.lFrame.bindingIndex}function k2(n){return Ue.lFrame.bindingIndex=n}function sm(){return Ue.lFrame.bindingIndex++}function u1(n){let e=Ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function N2(){return Ue.lFrame.inI18n}function L2(n,e){let t=Ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ty(e)}function F2(){return Ue.lFrame.currentDirectiveIndex}function Ty(n){Ue.lFrame.currentDirectiveIndex=n}function V2(n){let e=Ue.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function d1(){return Ue.lFrame.currentQueryIndex}function b0(n){Ue.lFrame.currentQueryIndex=n}function B2(n){let e=n[$e];return e.type===2?e.declTNode:e.type===1?n[or]:null}function h1(n,e,t){if(t&Ze.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&Ze.Host);)if(r=B2(o),r===null||(o=o[yl],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Ue.lFrame=f1();return i.currentTNode=e,i.lView=n,!0}function E0(n){let e=f1(),t=n[$e];Ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function f1(){let n=Ue.lFrame,e=n===null?null:n.child;return e===null?p1(n):e}function p1(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function m1(){let n=Ue.lFrame;return Ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var g1=m1;function C0(){let n=m1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function U2(n){return(Ue.lFrame.contextLView=E2(n,Ue.lFrame.contextLView))[nr]}function Oa(){return Ue.lFrame.selectedIndex}function Ta(n){Ue.lFrame.selectedIndex=n}function I0(){let n=Ue.lFrame;return XD(n.tView,n.selectedIndex)}function Ce(){Ue.lFrame.currentNamespace=YD}function xe(){j2()}function j2(){Ue.lFrame.currentNamespace=null}function z2(){return Ue.lFrame.currentNamespace}var _1=!0;function T0(){return _1}function S0(n){_1=n}function $2(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=KD(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function D0(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:m}=o;a&&(n.contentHooks??=[]).push(-t,a),l&&((n.contentHooks??=[]).push(t,l),(n.contentCheckHooks??=[]).push(t,l)),u&&(n.viewHooks??=[]).push(-t,u),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),m!=null&&(n.destroyHooks??=[]).push(t,m)}}function Cp(n,e,t){v1(n,e,3,t)}function Ip(n,e,t,i){(n[Re]&3)===t&&v1(n,e,t,i)}function ry(n,e){let t=n[Re];(t&3)===e&&(t&=16383,t+=1,n[Re]=t)}function v1(n,e,t,i){let r=i!==void 0?n[rl]&65535:0,o=i??-1,a=e.length-1,l=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(l=e[u],i!=null&&l>=i)break}else e[u]<0&&(n[rl]+=65536),(l<o||o==-1)&&(H2(n,t,e,u),n[rl]=(n[rl]&4294901760)+u+2),u++}function qS(n,e){Ir(4,n,e);let t=ct(null);try{e.call(n)}finally{ct(t),Ir(5,n,e)}}function H2(n,e,t,i){let r=t[i]<0,o=t[i+1],a=r?-t[i]:t[i],l=n[a];r?n[Re]>>14<n[rl]>>16&&(n[Re]&3)===e&&(n[Re]+=16384,qS(l,o)):qS(l,o)}var cl=-1,Sa=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function q2(n){return n instanceof Sa}function G2(n){return(n.flags&8)!==0}function W2(n){return(n.flags&16)!==0}var oy={},Sy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=em(i);let r=this.injector.get(e,oy,i);return r!==oy||t===oy?r:this.parentInjector.get(e,t,i)}};function y1(n){return n!==cl}function Fp(n){return n&32767}function K2(n){return n>>16}function Vp(n,e){let t=K2(n),i=e;for(;t>0;)i=i[yl],t--;return i}var Dy=!0;function Bp(n){let e=Dy;return Dy=n,e}var Z2=256,w1=Z2-1,b1=5,Q2=0,Tr={};function Y2(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(nd)&&(i=t[nd]),i==null&&(i=t[nd]=Q2++);let r=i&w1,o=1<<r;e.data[n+(r>>b1)]|=o}function Up(n,e){let t=E1(n,e);if(t!==-1)return t;let i=e[$e];i.firstCreatePass&&(n.injectorIndex=e.length,sy(i.data,n),sy(e,null),sy(i.blueprint,null));let r=M0(n,e),o=n.injectorIndex;if(y1(r)){let a=Fp(r),l=Vp(r,e),u=l[$e].data;for(let f=0;f<8;f++)e[o+f]=l[a+f]|u[a+f]}return e[o+8]=r,o}function sy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function E1(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function M0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=D1(r),i===null)return cl;if(t++,r=r[yl],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return cl}function My(n,e,t){Y2(n,e,t)}function J2(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(AD(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function C1(n,e,t){if(t&Ze.Optional||n!==void 0)return n;h0(e,"NodeInjector")}function I1(n,e,t,i){if(t&Ze.Optional&&i===void 0&&(i=null),!(t&(Ze.Self|Ze.Host))){let r=n[fl],o=Jn(void 0);try{return r?r.get(e,i,t&Ze.Optional):TD(e,i,t&Ze.Optional)}finally{Jn(o)}}return C1(i,e,t)}function T1(n,e,t,i=Ze.Default,r){if(n!==null){if(e[Re]&2048&&!(i&Ze.Self)){let a=nF(n,e,t,i,Tr);if(a!==Tr)return a}let o=S1(n,e,t,i,Tr);if(o!==Tr)return o}return I1(e,t,i,r)}function S1(n,e,t,i,r){let o=eF(t);if(typeof o=="function"){if(!h1(e,n,i))return i&Ze.Host?C1(r,t,i):I1(e,t,i,r);try{let a;if(a=o(i),a==null&&!(i&Ze.Optional))h0(t);else return a}finally{g1()}}else if(typeof o=="number"){let a=null,l=E1(n,e),u=cl,f=i&Ze.Host?e[Mr][or]:null;for((l===-1||i&Ze.SkipSelf)&&(u=l===-1?M0(n,e):e[l+8],u===cl||!WS(i,!1)?l=-1:(a=e[$e],l=Fp(u),e=Vp(u,e)));l!==-1;){let m=e[$e];if(GS(o,l,m.data)){let v=X2(l,e,t,a,i,f);if(v!==Tr)return v}u=e[l+8],u!==cl&&WS(i,e[$e].data[l+8]===f)&&GS(o,l,e)?(a=m,l=Fp(u),e=Vp(u,e)):l=-1}}return r}function X2(n,e,t,i,r,o){let a=e[$e],l=a.data[n+8],u=i==null?im(l)&&Dy:i!=a&&(l.type&3)!==0,f=r&Ze.Host&&o===l,m=Tp(l,a,t,u,f);return m!==null?Da(e,a,m,l):Tr}function Tp(n,e,t,i,r){let o=n.providerIndexes,a=e.data,l=o&1048575,u=n.directiveStart,f=n.directiveEnd,m=o>>20,v=i?l:l+m,E=r?l+m:f;for(let b=v;b<E;b++){let x=a[b];if(b<u&&t===x||b>=u&&x.type===t)return b}if(r){let b=a[u];if(b&&fs(b)&&b.type===t)return u}return null}function Da(n,e,t,i){let r=n[t],o=e.data;if(q2(r)){let a=r;a.resolving&&DL(SL(o[t]));let l=Bp(a.canSeeViewProviders);a.resolving=!0;let u,f=a.injectImpl?Jn(a.injectImpl):null,m=h1(n,i,Ze.Default);try{r=n[t]=a.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&$2(t,o[t],e)}finally{f!==null&&Jn(f),Bp(l),a.resolving=!1,g1()}}return r}function eF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(nd)?n[nd]:void 0;return typeof e=="number"?e>=0?e&w1:tF:e}function GS(n,e,t){let i=1<<n;return!!(t[e+(n>>b1)]&i)}function WS(n,e){return!(n&Ze.Self)&&!(n&Ze.Host&&e)}var wa=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return T1(this._tNode,this._lView,e,em(i),t)}};function tF(){return new wa(zn(),dt())}function wo(n){return ld(()=>{let e=n.prototype.constructor,t=e[Mp]||xy(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Mp]||xy(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function xy(n){return yD(n)?()=>{let e=xy(Bn(n));return e&&e()}:ba(n)}function nF(n,e,t,i,r){let o=n,a=e;for(;o!==null&&a!==null&&a[Re]&2048&&!(a[Re]&512);){let l=S1(o,a,t,i|Ze.Self,Tr);if(l!==Tr)return l;let u=o.parent;if(!u){let f=a[HD];if(f){let m=f.get(t,Tr,i);if(m!==Tr)return m}u=D1(a),a=a[yl]}o=u}return r}function D1(n){let e=n[$e],t=e.type;return t===2?e.declTNode:t===1?n[or]:null}function x0(n){return J2(zn(),n)}function KS(n,e=null,t=null,i){let r=M1(n,e,t,i);return r.resolveInjectorInitializers(),r}function M1(n,e=null,t=null,i,r=new Set){let o=[t||Oi,i2(n)];return i=i||(typeof n=="object"?void 0:Un(n)),new od(o,e||v0(),i||null,r)}var Tn=class n{static{this.THROW_IF_NOT_FOUND=id}static{this.NULL=new Ap}static create(e,t){if(Array.isArray(e))return KS({name:""},t,e,"");{let i=e.name??"";return KS({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=le({token:n,providedIn:"any",factory:()=>ve(MD)})}static{this.__NG_ELEMENT_ID__=-1}};var iF=new pe("");iF.__NG_ELEMENT_ID__=n=>{let e=zn();if(e===null)throw new ee(204,!1);if(e.type&2)return e.value;if(n&Ze.Optional)return null;throw new ee(204,!1)};var rF="ngOriginalError";function ay(n){return n[rF]}var x1=!0,P0=(()=>{class n{static{this.__NG_ELEMENT_ID__=oF}static{this.__NG_ENV_ID__=t=>t}}return n})(),Py=class extends P0{constructor(e){super(),this._lView=e}onDestroy(e){return i1(this._lView,e),()=>C2(this._lView,e)}};function oF(){return new Py(dt())}var _s=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Wt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Ay=class extends _n{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,$D()&&(this.destroyRef=Q(P0,{optional:!0})??void 0,this.pendingTasks=Q(_s,{optional:!0})??void 0)}emit(e){let t=ct(null);try{super.next(e)}finally{ct(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let l=super.subscribe({next:r,error:o,complete:a});return e instanceof $t&&e.add(l),l}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},Ge=Ay;function jp(...n){}function P1(n){let e,t;function i(){n=jp;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function ZS(n){return queueMicrotask(()=>n()),()=>{n=jp}}var A0="isAngularZone",zp=A0+"_ID",sF=0,lt=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ge(!1),this.onMicrotaskEmpty=new Ge(!1),this.onStable=new Ge(!1),this.onError=new Ge(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=x1}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=o,lF(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(A0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,aF,jp,jp);try{return o.runTask(a,t,i)}finally{o.cancelTask(a)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},aF={};function R0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function cF(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){P1(()=>{n.callbackScheduled=!1,Ry(n),n.isCheckStableRunning=!0,R0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ry(n)}function lF(n){let e=()=>{cF(n)},t=sF++;n._inner=n._inner.fork({name:"angular",properties:{[A0]:!0,[zp]:t,[zp+t]:!0},onInvokeTask:(i,r,o,a,l,u)=>{if(uF(u))return i.invokeTask(o,a,l,u);try{return QS(n),i.invokeTask(o,a,l,u)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),YS(n)}},onInvoke:(i,r,o,a,l,u,f)=>{try{return QS(n),i.invoke(o,a,l,u,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!dF(u)&&e(),YS(n)}},onHasTask:(i,r,o,a)=>{i.hasTask(o,a),r===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,Ry(n),R0(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,o,a)=>(i.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function Ry(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function QS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YS(n){n._nesting--,R0(n)}var Oy=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ge,this.onMicrotaskEmpty=new Ge,this.onStable=new Ge,this.onError=new Ge}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function uF(n){return A1(n,"__ignore_ng_zone__")}function dF(n){return A1(n,"__scheduler_tick__")}function A1(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var po=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ay(e);for(;t&&ay(t);)t=ay(t);return t||null}},hF=new pe("",{providedIn:"root",factory:()=>{let n=Q(lt),e=Q(po);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function fF(){return wl(zn(),dt())}function wl(n,e){return new sr(Fi(n,e))}var sr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=fF}}return n})();function pF(n){return n instanceof sr?n.nativeElement:n}function mF(){return this._results[Symbol.iterator]()}var ky=class n{get changes(){return this._changes??=new Ge}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=mF)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=VL(e);(this._changesDetected=!FL(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function R1(n){return(n.flags&128)===128}var O1=new Map,gF=0;function _F(){return gF++}function vF(n){O1.set(n[nm],n)}function Ny(n){O1.delete(n[nm])}var JS="__ngContext__";function Ma(n,e){us(e)?(n[JS]=e[nm],vF(e)):n[JS]=e}function k1(n){return L1(n[sd])}function N1(n){return L1(n[tr])}function L1(n){for(;n!==null&&!yo(n);)n=n[tr];return n}var Ly;function F1(n){Ly=n}function yF(){if(Ly!==void 0)return Ly;if(typeof document<"u")return document;throw new ee(210,!1)}var O0=new pe("",{providedIn:"root",factory:()=>wF}),wF="ng",k0=new pe(""),Vi=new pe("",{providedIn:"platform",factory:()=>"unknown"});var N0=new pe(""),L0=new pe("",{providedIn:"root",factory:()=>yF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bF="h",EF="b";var CF=()=>null;function F0(n,e,t=!1){return CF(n,e,t)}var V1=!1,IF=new pe("",{providedIn:"root",factory:()=>V1});var vp;function TF(){if(vp===void 0&&(vp=null,ya.trustedTypes))try{vp=ya.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return vp}function XS(n){return TF()?.createScriptURL(n)||n}var $p=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_D})`}};function hd(n){return n instanceof $p?n.changingThisBreaksApplicationSecurity:n}function V0(n,e){let t=SF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${_D})`)}return t===e}function SF(n){return n instanceof $p&&n.getTypeName()||null}var DF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function B1(n){return n=String(n),n.match(DF)?n:"unsafe:"+n}var am=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(am||{});function ar(n){let e=j1();return e?e.sanitize(am.URL,n)||"":V0(n,"URL")?hd(n):B1(ll(n))}function MF(n){let e=j1();if(e)return XS(e.sanitize(am.RESOURCE_URL,n)||"");if(V0(n,"ResourceURL"))return XS(hd(n));throw new ee(904,!1)}function xF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?MF:ar}function U1(n,e,t){return xF(e,t)(n)}function j1(){let n=dt();return n&&n[Dr].sanitizer}function z1(n){return n instanceof Function?n():n}function PF(n){return(n??Q(Tn)).get(Vi)==="browser"}var mo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(mo||{}),AF;function B0(n,e){return AF(n,e)}function ol(n,e,t,i,r){if(i!=null){let o,a=!1;yo(i)?o=i:us(i)&&(a=!0,i=i[vo]);let l=xr(i);n===0&&t!==null?r==null?W1(e,t,l):Hp(e,t,l,r||null,!0):n===1&&t!==null?Hp(e,t,l,r||null,!0):n===2?GF(e,l,a):n===3&&e.destroyNode(l),o!=null&&KF(e,n,o,t,r)}}function RF(n,e){return n.createText(e)}function OF(n,e,t){n.setValue(e,t)}function $1(n,e,t){return n.createElement(e,t)}function kF(n,e){H1(n,e),e[vo]=null,e[or]=null}function NF(n,e,t,i,r,o){i[vo]=r,i[or]=e,cm(n,i,t,1,r,o)}function H1(n,e){e[Dr].changeDetectionScheduler?.notify(9),cm(n,e,e[an],2,null,null)}function LF(n){let e=n[sd];if(!e)return cy(n[$e],n);for(;e;){let t=null;if(us(e))t=e[sd];else{let i=e[fi];i&&(t=i)}if(!t){for(;e&&!e[tr]&&e!==n;)us(e)&&cy(e[$e],e),e=e[Mn];e===null&&(e=n),us(e)&&cy(e[$e],e),t=e&&e[tr]}e=t}}function FF(n,e,t,i){let r=fi+i,o=t.length;i>0&&(t[r-1][tr]=e),i<o-fi?(e[tr]=t[r],DD(t,fi+i,e)):(t.push(e),e[tr]=null),e[Mn]=t;let a=e[Ea];a!==null&&t!==a&&q1(a,e);let l=e[fo];l!==null&&l.insertView(n),Iy(e),e[Re]|=128}function q1(n,e){let t=n[pl],i=e[Mn];if(us(i))n[Re]|=Np.HasTransplantedViews;else{let r=i[Mn][Mr];e[Mr]!==r&&(n[Re]|=Np.HasTransplantedViews)}t===null?n[pl]=[e]:t.push(e)}function U0(n,e){let t=n[pl],i=t.indexOf(e);t.splice(i,1)}function Fy(n,e){if(n.length<=fi)return;let t=fi+e,i=n[t];if(i){let r=i[Ea];r!==null&&r!==n&&U0(r,i),e>0&&(n[t-1][tr]=i[tr]);let o=Pp(n,fi+e);kF(i[$e],i);let a=o[fo];a!==null&&a.detachView(o[$e]),i[Mn]=null,i[tr]=null,i[Re]&=-129}return i}function G1(n,e){if(!(e[Re]&256)){let t=e[an];t.destroyNode&&cm(n,e,t,3,null,null),LF(e)}}function cy(n,e){if(e[Re]&256)return;let t=ct(null);try{e[Re]&=-129,e[Re]|=256,e[ki]&&Rv(e[ki]),BF(n,e),VF(n,e),e[$e].type===1&&e[an].destroy();let i=e[Ea];if(i!==null&&yo(e[Mn])){i!==e[Mn]&&U0(i,e);let r=e[fo];r!==null&&r.detachView(n)}Ny(e)}finally{ct(t)}}function VF(n,e){let t=n.cleanup,i=e[Op];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[t[o+1]];t[o].call(a)}i!==null&&(e[Op]=null);let r=e[ls];if(r!==null){e[ls]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}}function BF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Sa)){let o=t[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let l=r[o[a]],u=o[a+1];Ir(4,l,u);try{u.call(l)}finally{Ir(5,l,u)}}else{Ir(4,r,o);try{o.call(r)}finally{Ir(5,r,o)}}}}}function UF(n,e,t){return jF(n,e.parent,t)}function jF(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[vo];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===Sr.None||o===Sr.Emulated)return null}return Fi(i,t)}}function Hp(n,e,t,i,r){n.insertBefore(e,t,i,r)}function W1(n,e,t){n.appendChild(e,t)}function eD(n,e,t,i,r){i!==null?Hp(n,e,t,i,r):W1(n,e,t)}function K1(n,e){return n.parentNode(e)}function zF(n,e){return n.nextSibling(e)}function $F(n,e,t){return qF(n,e,t)}function HF(n,e,t){return n.type&40?Fi(n,t):null}var qF=HF,tD;function j0(n,e,t,i){let r=UF(n,i,e),o=e[an],a=i.parent||e[or],l=$F(a,i,e);if(r!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)eD(o,r,t[u],l,!1);else eD(o,r,t,l,!1);tD!==void 0&&tD(o,i,e,t,r)}function td(n,e){if(e!==null){let t=e.type;if(t&3)return Fi(e,n);if(t&4)return Vy(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return td(n,i);{let r=n[e.index];return yo(r)?Vy(-1,r):xr(r)}}else{if(t&128)return td(n,e.next);if(t&32)return B0(e,n)()||xr(n[e.index]);{let i=Z1(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Ia(n[Mr]);return td(r,i)}else return td(n,e.next)}}}return null}function Z1(n,e){if(e!==null){let i=n[Mr][or],r=e.projection;return i.projection[r]}return null}function Vy(n,e){let t=fi+n+1;if(t<e.length){let i=e[t],r=i[$e].firstChild;if(r!==null)return td(i,r)}return e[Ca]}function GF(n,e,t){n.removeChild(null,e,t)}function z0(n,e,t,i,r,o,a){for(;t!=null;){if(t.type===128){t=t.next;continue}let l=i[t.index],u=t.type;if(a&&e===0&&(l&&Ma(xr(l),i),t.flags|=2),(t.flags&32)!==32)if(u&8)z0(n,e,t.child,i,r,o,!1),ol(e,n,r,l,o);else if(u&32){let f=B0(t,i),m;for(;m=f();)ol(e,n,r,m,o);ol(e,n,r,l,o)}else u&16?WF(n,e,i,t,r,o):ol(e,n,r,l,o);t=a?t.projectionNext:t.next}}function cm(n,e,t,i,r,o){z0(t,i,n.firstChild,e,r,o,!1)}function WF(n,e,t,i,r,o){let a=t[Mr],u=a[or].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let m=u[f];ol(e,n,r,m,o)}else{let f=u,m=a[Mn];R1(i)&&(f.flags|=128),z0(n,e,f,m,r,o,!0)}}function KF(n,e,t,i,r){let o=t[Ca],a=xr(t);o!==a&&ol(e,n,i,o,r);for(let l=fi;l<t.length;l++){let u=t[l];cm(u[$e],u,n,e,i,o)}}function ZF(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:mo.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=mo.Important),n.setStyle(t,i,r,o))}}function QF(n,e,t){n.setAttribute(e,"style",t)}function Q1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Y1(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&vy(n,e,i),r!==null&&Q1(n,e,r),o!==null&&QF(n,e,o)}var Rr={};function U(n=1){J1(Pn(),dt(),Oa()+n,!1)}function J1(n,e,t,i){if(!i)if((e[Re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Cp(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ip(e,o,0,t)}Ta(t)}function se(n,e=Ze.Default){let t=dt();if(t===null)return ve(n,e);let i=zn();return T1(i,t,Bn(n),e)}function X1(){let n="invalid";throw new Error(n)}function eM(n,e,t,i,r,o){let a=ct(null);try{let l=null;r&ds.SignalBased&&(l=e[i][lo]),l!==null&&l.transformFn!==void 0&&(o=l.transformFn(o)),r&ds.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(e,o)),n.setInput!==null?n.setInput(e,l,o,t,i):WD(e,l,i,o)}finally{ct(a)}}function YF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Ta(~r);else{let o=r,a=t[++i],l=t[++i];L2(a,o);let u=e[o];l(2,u)}}}finally{Ta(-1)}}function lm(n,e,t,i,r,o,a,l,u,f,m){let v=e.blueprint.slice();return v[vo]=r,v[Re]=i|4|128|8|64,(f!==null||n&&n[Re]&2048)&&(v[Re]|=2048),t1(v),v[Mn]=v[yl]=n,v[nr]=t,v[Dr]=a||n&&n[Dr],v[an]=l||n&&n[an],v[fl]=u||n&&n[fl]||null,v[or]=o,v[nm]=_F(),v[Rp]=m,v[HD]=f,v[Mr]=e.type==2?n[Mr]:v,v}function um(n,e,t,i,r){let o=n.data[e];if(o===null)o=JF(n,e,t,i,r),N2()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let a=P2();o.injectorIndex=a===null?-1:a.injectorIndex}return dd(o,!0),o}function JF(n,e,t,i,r){let o=s1(),a=a1(),l=a?o:o&&o.parent,u=n.data[e]=rV(n,l,t,e,i,r);return n.firstChild===null&&(n.firstChild=u),o!==null&&(a?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function tM(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function nM(n,e,t,i,r){let o=Oa(),a=i&2;try{Ta(-1),a&&e.length>ir&&J1(n,e,ir,!1),Ir(a?2:0,r),t(i,r)}finally{Ta(o),Ir(a?3:1,r)}}function iM(n,e,t){if(GD(e)){let i=ct(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let l=n.data[a];if(l.contentQueries){let u=t[a];l.contentQueries(1,u,a)}}}finally{ct(i)}}}function rM(n,e,t){o1()&&(uV(n,e,t,Fi(t,e)),(t.flags&64)===64&&uM(n,e,t))}function oM(n,e,t=Fi){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],l=a===-1?t(e,n):n[a];n[r++]=l}}}function sM(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=$0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $0(n,e,t,i,r,o,a,l,u,f,m){let v=ir+i,E=v+r,b=XF(v,E),x=typeof f=="function"?f():f;return b[$e]={type:n,blueprint:b,template:t,queries:null,viewQuery:l,declTNode:e,data:b.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:x,incompleteFirstPass:!1,ssrId:m}}function XF(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Rr);return t}function eV(n,e,t,i){let o=i.get(IF,V1)||t===Sr.ShadowDom,a=n.selectRootElement(e,o);return tV(a),a}function tV(n){nV(n)}var nV=()=>null;function iV(n,e,t,i){let r=fM(e);r.push(t),n.firstCreatePass&&pM(n).push(i,r.length-1)}function rV(n,e,t,i,r,o){let a=e?e.injectorIndex:-1,l=0;return D2()&&(l|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function nD(n,e,t,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;i??={};let l,u=ds.None;Array.isArray(a)?(l=a[0],u=a[1]):l=a;let f=o;if(r!==null){if(!r.hasOwnProperty(o))continue;f=r[o]}n===0?iD(i,t,f,l,u):iD(i,t,f,l)}return i}function iD(n,e,t,i,r){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,i):o=n[t]=[e,i],r!==void 0&&o.push(r)}function oV(n,e,t){let i=e.directiveStart,r=e.directiveEnd,o=n.data,a=e.attrs,l=[],u=null,f=null;for(let m=i;m<r;m++){let v=o[m],E=t?t.get(v):null,b=E?E.inputs:null,x=E?E.outputs:null;u=nD(0,v.inputs,m,u,b),f=nD(1,v.outputs,m,f,x);let k=u!==null&&a!==null&&!m0(e)?bV(u,m,a):null;l.push(k)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=l,e.inputs=u,e.outputs=f}function sV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function aM(n,e,t,i,r,o,a,l){let u=Fi(e,t),f=e.inputs,m;!l&&f!=null&&(m=f[i])?(H0(n,t,m,i,r),im(e)&&aV(t,e.index)):e.type&3?(i=sV(i),r=a!=null?a(r,e.value||"",i):r,o.setProperty(u,i,r)):e.type&12}function aV(n,e){let t=gs(e,n);t[Re]&16||(t[Re]|=64)}function cM(n,e,t,i){if(o1()){let r=i===null?null:{"":-1},o=hV(n,t),a,l;o===null?a=l=null:[a,l]=o,a!==null&&lM(n,e,t,a,r,l),r&&fV(t,i,r)}t.mergedAttrs=rd(t.mergedAttrs,t.attrs)}function lM(n,e,t,i,r,o){for(let f=0;f<i.length;f++)My(Up(t,e),n,i[f].type);mV(t,n.data.length,i.length);for(let f=0;f<i.length;f++){let m=i[f];m.providersResolver&&m.providersResolver(m)}let a=!1,l=!1,u=tM(n,e,i.length,null);for(let f=0;f<i.length;f++){let m=i[f];t.mergedAttrs=rd(t.mergedAttrs,m.hostAttrs),gV(n,t,e,u,m),pV(u,m,r),m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let v=m.type.prototype;!a&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),a=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),l=!0),u++}oV(n,t,o)}function cV(n,e,t,i,r){let o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let l=~e.index;lV(a)!=l&&a.push(l),a.push(t,i,o)}}function lV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function uV(n,e,t,i){let r=t.directiveStart,o=t.directiveEnd;im(t)&&_V(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Up(t,e),Ma(i,e);let a=t.initialInputs;for(let l=r;l<o;l++){let u=n.data[l],f=Da(e,n,l,t);if(Ma(f,e),a!==null&&wV(e,l-r,f,u,t,a),fs(u)){let m=gs(t.index,e);m[nr]=Da(e,n,l,t)}}}function uM(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,a=F2();try{Ta(o);for(let l=i;l<r;l++){let u=n.data[l],f=e[l];Ty(l),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&dV(u,f)}}finally{Ta(-1),Ty(a)}}function dV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function hV(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let o=0;o<t.length;o++){let a=t[o];if(KL(e,a.selectors,!1))if(i||(i=[]),fs(a))if(a.findHostDirectiveDefs!==null){let l=[];r=r||new Map,a.findHostDirectiveDefs(a,l,r),i.unshift(...l,a);let u=l.length;By(n,e,u)}else i.unshift(a),By(n,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return i===null?null:[i,r]}function By(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function fV(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new ee(-301,!1);i.push(e[r],o)}}}function pV(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;fs(e)&&(t[""]=n)}}function mV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function gV(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=ba(r.type,!0)),a=new Sa(o,fs(r),se);n.blueprint[i]=a,t[i]=a,cV(n,e,i,tM(n,t,r.hostVars,Rr),r)}function _V(n,e,t){let i=Fi(e,n),r=sM(t),o=n[Dr].rendererFactory,a=16;t.signals?a=4096:t.onPush&&(a=64);let l=dm(n,lm(n,r,null,a,i,e,null,o.createRenderer(i,t),null,null,null));n[e.index]=l}function vV(n,e,t,i,r,o){let a=Fi(n,e);yV(e[an],a,o,n.value,t,i,r)}function yV(n,e,t,i,r,o,a){if(o==null)n.removeAttribute(e,r,t);else{let l=a==null?ll(o):a(o,i||"",r);n.setAttribute(e,r,l,t)}}function wV(n,e,t,i,r,o){let a=o[e];if(a!==null)for(let l=0;l<a.length;){let u=a[l++],f=a[l++],m=a[l++],v=a[l++];eM(i,t,u,f,m,v)}}function bV(n,e,t){let i=null,r=0;for(;r<t.length;){let o=t[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let a=n[o];for(let l=0;l<a.length;l+=3)if(a[l]===e){i.push(o,a[l+1],a[l+2],t[r+1]);break}}r+=2}return i}function dM(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function hM(n,e){let t=n.contentQueries;if(t!==null){let i=ct(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],a=t[r+1];if(a!==-1){let l=n.data[a];b0(o),l.contentQueries(2,e[a],a)}}}finally{ct(i)}}}function dm(n,e){return n[sd]?n[zS][tr]=e:n[sd]=e,n[zS]=e,e}function Uy(n,e,t){b0(0);let i=ct(null);try{e(n,t)}finally{ct(i)}}function fM(n){return n[Op]??=[]}function pM(n){return n.cleanup??=[]}function mM(n,e){let t=n[fl],i=t?t.get(po,null):null;i&&i.handleError(e)}function H0(n,e,t,i,r){for(let o=0;o<t.length;){let a=t[o++],l=t[o++],u=t[o++],f=e[a],m=n.data[a];eM(m,f,i,l,u,r)}}function gM(n,e,t){let i=JD(e,n);OF(n[an],i,t)}function EV(n,e){let t=gs(e,n),i=t[$e];CV(i,t);let r=t[vo];r!==null&&t[Rp]===null&&(t[Rp]=F0(r,t[fl])),q0(i,t,t[nr])}function CV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function q0(n,e,t){E0(e);try{let i=n.viewQuery;i!==null&&Uy(1,i,t);let r=n.template;r!==null&&nM(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[fo]?.finishViewCreation(n),n.staticContentQueries&&hM(n,e),n.staticViewQueries&&Uy(2,n.viewQuery,t);let o=n.components;o!==null&&IV(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Re]&=-5,C0()}}function IV(n,e){for(let t=0;t<e.length;t++)EV(n,e[t])}function TV(n,e,t,i){let r=ct(null);try{let o=e.tView,l=n[Re]&4096?4096:16,u=lm(n,o,t,l,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[e.index];u[Ea]=f;let m=n[fo];return m!==null&&(u[fo]=m.createEmbeddedView(o)),q0(o,u,t),u}finally{ct(r)}}function rD(n,e){return!e||e.firstChild===null||R1(n)}function SV(n,e,t,i=!0){let r=e[$e];if(FF(r,e,n,t),i){let a=Vy(t,n),l=e[an],u=K1(l,n[Ca]);u!==null&&NF(r,n[or],l,e,u,a)}let o=e[Rp];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qp(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(xr(o)),yo(o)&&DV(o,i);let a=t.type;if(a&8)qp(n,e,t.child,i);else if(a&32){let l=B0(t,e),u;for(;u=l();)i.push(u)}else if(a&16){let l=Z1(e,t);if(Array.isArray(l))i.push(...l);else{let u=Ia(e[Mr]);qp(u[$e],u,l,i,!0)}}t=r?t.projectionNext:t.next}return i}function DV(n,e){for(let t=fi;t<n.length;t++){let i=n[t],r=i[$e].firstChild;r!==null&&qp(i[$e],i,r,e)}n[Ca]!==n[vo]&&e.push(n[Ca])}var _M=[];function MV(n){return n[ki]??xV(n)}function xV(n){let e=_M.pop()??Object.create(AV);return e.lView=n,e}function PV(n){n.lView[ki]!==n&&(n.lView=null,_M.push(n))}var AV=ke(J({},Yu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{om(n.lView)},consumerOnSignalRead(){this.lView[ki]=this}});function RV(n){let e=n[ki]??Object.create(OV);return e.lView=n,e}var OV=ke(J({},Yu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ia(n.lView);for(;e&&!vM(e[$e]);)e=Ia(e);e&&n1(e)},consumerOnSignalRead(){this.lView[ki]=this}});function vM(n){return n.type!==2}var kV=100;function yM(n,e=!0,t=0){let i=n[Dr],r=i.rendererFactory,o=!1;o||r.begin?.();try{NV(n,t)}catch(a){throw e&&mM(n,a),a}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function NV(n,e){let t=c1();try{HS(!0),jy(n,e);let i=0;for(;rm(n);){if(i===kV)throw new ee(103,!1);i++,jy(n,1)}}finally{HS(t)}}function LV(n,e,t,i){let r=e[Re];if((r&256)===256)return;let o=!1,a=!1;!o&&e[Dr].inlineEffectRunner?.flush(),E0(e);let l=!0,u=null,f=null;o||(vM(n)?(f=MV(e),u=Hf(f)):KT()===null?(l=!1,f=RV(e),u=Hf(f)):e[ki]&&(Rv(e[ki]),e[ki]=null));try{t1(e),k2(n.bindingStartIndex),t!==null&&nM(n,e,t,2,i);let m=(r&3)===3;if(!o)if(m){let b=n.preOrderCheckHooks;b!==null&&Cp(e,b,null)}else{let b=n.preOrderHooks;b!==null&&Ip(e,b,0,null),ry(e,0)}if(a||FV(e),wM(e,0),n.contentQueries!==null&&hM(n,e),!o)if(m){let b=n.contentCheckHooks;b!==null&&Cp(e,b)}else{let b=n.contentHooks;b!==null&&Ip(e,b,1),ry(e,1)}YF(n,e);let v=n.components;v!==null&&EM(e,v,0);let E=n.viewQuery;if(E!==null&&Uy(2,E,i),!o)if(m){let b=n.viewCheckHooks;b!==null&&Cp(e,b)}else{let b=n.viewHooks;b!==null&&Ip(e,b,2),ry(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[iy]){for(let b of e[iy])b();e[iy]=null}o||(e[Re]&=-73)}catch(m){throw o||om(e),m}finally{f!==null&&(Pv(f,u),l&&PV(f)),C0()}}function wM(n,e){for(let t=k1(n);t!==null;t=N1(t))for(let i=fi;i<t.length;i++){let r=t[i];bM(r,e)}}function FV(n){for(let e=k1(n);e!==null;e=N1(e)){if(!(e[Re]&Np.HasTransplantedViews))continue;let t=e[pl];for(let i=0;i<t.length;i++){let r=t[i];n1(r)}}}function VV(n,e,t){let i=gs(e,n);bM(i,t)}function bM(n,e){w0(n)&&jy(n,e)}function jy(n,e){let i=n[$e],r=n[Re],o=n[ki],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&Av(o)),a||=!1,o&&(o.dirty=!1),n[Re]&=-9217,a)LV(i,n,i.template,n[nr]);else if(r&8192){wM(n,1);let l=i.components;l!==null&&EM(n,l,1)}}function EM(n,e,t){for(let i=0;i<e.length;i++)VV(n,e[i],t)}function G0(n,e){let t=c1()?64:1088;for(n[Dr].changeDetectionScheduler?.notify(e);n;){n[Re]|=t;let i=Ia(n);if(Ey(n)&&!i)return n;n=i}return null}var xa=class{get rootNodes(){let e=this._lView,t=e[$e];return qp(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nr]}set context(e){this._lView[nr]=e}get destroyed(){return(this._lView[Re]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Mn];if(yo(e)){let t=e[kp],i=t?t.indexOf(this):-1;i>-1&&(Fy(e,i),Pp(t,i))}this._attachedToViewContainer=!1}G1(this._lView[$e],this._lView)}onDestroy(e){i1(this._lView,e)}markForCheck(){G0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Re]&=-129}reattach(){Iy(this._lView),this._lView[Re]|=128}detectChanges(){this._lView[Re]|=1024,yM(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ey(this._lView),t=this._lView[Ea];t!==null&&!e&&U0(t,this._lView),H1(this._lView[$e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=Ey(this._lView),i=this._lView[Ea];i!==null&&!t&&q1(i,this._lView),Iy(this._lView)}},Pa=(()=>{class n{static{this.__NG_ELEMENT_ID__=jV}}return n})(),BV=Pa,UV=class extends BV{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=TV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new xa(r)}};function jV(){return hm(zn(),dt())}function hm(n,e){return n.type&4?new UV(e,n,wl(n,e)):null}var aX=new RegExp(`^(\\d+)*(${EF}|${bF})*(.*)`);var zV=()=>null;function oD(n,e){return zV(n,e)}var ml=class{},W0=new pe("",{providedIn:"root",factory:()=>!1});var CM=new pe(""),IM=new pe(""),zy=class{},Gp=class{};function $V(n){let e=Error(`No component factory found for ${Un(n)}.`);return e[HV]=n,e}var HV="ngComponent";var $y=class{resolveComponentFactory(e){throw $V(e)}},gl=class{static{this.NULL=new $y}},ps=class{},ka=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>qV()}}return n})();function qV(){let n=dt(),e=zn(),t=gs(e.index,n);return(us(t)?t:n)[an]}var GV=(()=>{class n{static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>null})}}return n})();function Hy(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number")o=l;else if(o==1)r=RS(r,l);else if(o==2){let u=l,f=e[++a];i=RS(i,u+": "+f+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var Wp=class extends gl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=hs(e);return new _l(t,this.ngModule)}};function sD(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let o=Array.isArray(r),a=o?r[0]:r,l=o?r[1]:ds.None;e?t.push({propName:a,templateName:i,isSignal:(l&ds.SignalBased)!==0}):t.push({propName:a,templateName:i})}return t}function WV(n){let e=n.toLowerCase();return e==="svg"?YD:e==="math"?y2:null}var _l=class extends Gp{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=sD(e.inputs,!0);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return sD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=JL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=ct(null);try{r=r||this.ngModule;let a=r instanceof jn?r:r?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let l=a?new Sy(e,a):e,u=l.get(ps,null);if(u===null)throw new ee(407,!1);let f=l.get(GV,null),m=l.get(ml,null),v={rendererFactory:u,sanitizer:f,inlineEffectRunner:null,changeDetectionScheduler:m},E=u.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",x=i?eV(E,i,this.componentDef.encapsulation,l):$1(E,b,WV(b)),k=512;this.componentDef.signals?k|=4096:this.componentDef.onPush||(k|=16);let N=null;x!==null&&(N=F0(x,l,!0));let G=$0(0,null,null,1,0,null,null,null,null,null,null),ne=lm(null,G,null,k,null,null,v,E,l,null,N);E0(ne);let X,ue,Le=null;try{let me=this.componentDef,R,D=null;me.findHostDirectiveDefs?(R=[],D=new Map,me.findHostDirectiveDefs(me,R,D),R.push(me)):R=[me];let M=KV(ne,x);Le=ZV(M,x,me,R,ne,v,E),ue=XD(G,ir),x&&JV(E,me,x,i),t!==void 0&&XV(ue,this.ngContentSelectors,t),X=YV(Le,me,R,D,ne,[e5]),q0(G,ne,null)}catch(me){throw Le!==null&&Ny(Le),Ny(ne),me}finally{C0()}return new qy(this.componentType,X,wl(ue,ne),ne,ue)}finally{ct(o)}}},qy=class extends zy{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new xa(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;H0(o[$e],o,r,e,t),this.previousInputValues.set(e,t);let a=gs(this._tNode.index,o);G0(a,1)}}get injector(){return new wa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function KV(n,e){let t=n[$e],i=ir;return n[i]=e,um(t,i,2,"#host",null)}function ZV(n,e,t,i,r,o,a){let l=r[$e];QV(i,n,e,a);let u=null;e!==null&&(u=F0(e,r[fl]));let f=o.rendererFactory.createRenderer(e,t),m=16;t.signals?m=4096:t.onPush&&(m=64);let v=lm(r,sM(t),null,m,r[n.index],n,o,f,null,null,u);return l.firstCreatePass&&By(l,n,i.length-1),dm(r,v),r[n.index]=v}function QV(n,e,t,i){for(let r of n)e.mergedAttrs=rd(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Hy(e,e.mergedAttrs,!0),t!==null&&Y1(i,t,e))}function YV(n,e,t,i,r,o){let a=zn(),l=r[$e],u=Fi(a,r);lM(l,r,a,t,null,i);for(let m=0;m<t.length;m++){let v=a.directiveStart+m,E=Da(r,l,v,a);Ma(E,r)}uM(l,r,a),u&&Ma(u,r);let f=Da(r,l,a.directiveStart+a.componentOffset,a);if(n[nr]=r[nr]=f,o!==null)for(let m of o)m(f,e);return iM(l,a,r),f}function JV(n,e,t,i){if(i)vy(n,t,["ng-version","18.2.14"]);else{let{attrs:r,classes:o}=XL(e.selectors[0]);r&&vy(n,t,r),o&&o.length>0&&Q1(n,t,o.join(" "))}}function XV(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null?Array.from(o):null)}}function e5(){let n=zn();D0(dt()[$e],n)}var vs=(()=>{class n{static{this.__NG_ELEMENT_ID__=t5}}return n})();function t5(){let n=zn();return SM(n,dt())}var n5=vs,TM=class extends n5{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return wl(this._hostTNode,this._hostLView)}get injector(){return new wa(this._hostTNode,this._hostLView)}get parentInjector(){let e=M0(this._hostTNode,this._hostLView);if(y1(e)){let t=Vp(e,this._hostLView),i=Fp(e),r=t[$e].data[i+8];return new wa(r,t)}else return new wa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=aD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-fi}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=oD(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(l,r,rD(this._hostTNode,a)),l}createComponent(e,t,i,r,o){let a=e&&!m2(e),l;if(a)l=t;else{let x=t||{};l=x.index,i=x.injector,r=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef}let u=a?e:new _l(hs(e)),f=i||this.parentInjector;if(!o&&u.ngModule==null){let k=(a?f:this.parentInjector).get(jn,null);k&&(o=k)}let m=hs(u.componentType??{}),v=oD(this._lContainer,m?.id??null),E=v?.firstChild??null,b=u.create(f,r,E,o);return this.insertImpl(b.hostView,l,rD(this._hostTNode,v)),b}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(b2(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let u=r[Mn],f=new TM(u,u[or],u[Mn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return SV(a,r,o,i),e.attachToViewContainerRef(),DD(ly(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=aD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Fy(this._lContainer,t);i&&(Pp(ly(this._lContainer),t),G1(i[$e],i))}detach(e){let t=this._adjustIndex(e,-1),i=Fy(this._lContainer,t);return i&&Pp(ly(this._lContainer),t)!=null?new xa(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function aD(n){return n[kp]}function ly(n){return n[kp]||(n[kp]=[])}function SM(n,e){let t,i=e[n.index];return yo(i)?t=i:(t=dM(i,e,null,n),e[n.index]=t,dm(e,t)),r5(t,e,n,i),new TM(t,n,e)}function i5(n,e){let t=n[an],i=t.createComment(""),r=Fi(e,n),o=K1(t,r);return Hp(t,o,i,zF(t,r),!1),i}var r5=a5,o5=()=>!1;function s5(n,e,t){return o5(n,e,t)}function a5(n,e,t,i){if(n[Ca])return;let r;t.type&8?r=xr(i):r=i5(e,t),n[Ca]=r}var Gy=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Wy=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let a=t.getByIndex(o),l=this.queries[a.indexInDeclarationView];r.push(l.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)K0(e,t).matches!==null&&this.queries[t].setDirty()}},Ky=class{constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=m5(e):this.predicate=e}},Zy=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Qy=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,c5(t,o)),this.matchTNodeWithReadOption(e,t,Tp(t,e,o,!1,!1))}else i===Pa?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Tp(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===sr||r===vs||r===Pa&&t.type&4)this.addMatch(t.index,-2);else{let o=Tp(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function c5(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function l5(n,e){return n.type&11?wl(n,e):n.type&4?hm(n,e):null}function u5(n,e,t,i){return t===-1?l5(e,n):t===-2?d5(n,e,i):Da(n,n[$e],t,e)}function d5(n,e,t){if(t===sr)return wl(e,n);if(t===Pa)return hm(e,n);if(t===vs)return SM(e,n)}function DM(n,e,t,i){let r=e[fo].queries[i];if(r.matches===null){let o=n.data,a=t.matches,l=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)l.push(null);else{let m=o[f];l.push(u5(e,m,a[u+1],t.metadata.read))}}r.matches=l}return r.matches}function Yy(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let a=DM(n,e,r,t);for(let l=0;l<o.length;l+=2){let u=o[l];if(u>0)i.push(a[l/2]);else{let f=o[l+1],m=e[-u];for(let v=fi;v<m.length;v++){let E=m[v];E[Ea]===E[Mn]&&Yy(E[$e],E,f,i)}if(m[pl]!==null){let v=m[pl];for(let E=0;E<v.length;E++){let b=v[E];Yy(b[$e],b,f,i)}}}}}return i}function h5(n,e){return n[fo].queries[e].queryList}function f5(n,e,t){let i=new ky((t&4)===4);return iV(n,e,i,i.destroy),(e[fo]??=new Wy).queries.push(new Gy(i))-1}function p5(n,e,t){let i=Pn();return i.firstCreatePass&&(g5(i,new Ky(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),f5(i,dt(),e)}function m5(n){return n.split(",").map(e=>e.trim())}function g5(n,e,t){n.queries===null&&(n.queries=new Zy),n.queries.track(new Qy(e,t))}function K0(n,e){return n.queries.getByIndex(e)}function _5(n,e){let t=n[$e],i=K0(t,e);return i.crossesNgTemplate?Yy(t,n,e,[]):DM(t,n,i,e)}var cD=new Set;function ys(n){cD.has(n)||(cD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function v5(n){return typeof n=="function"&&n[lo]!==void 0}function fm(n,e){ys("NgSignals");let t=oS(n),i=t[lo];return e?.equal&&(i.equal=e.equal),t.set=r=>Ov(i,r),t.update=r=>sS(i,r),t.asReadonly=y5.bind(t),t}function y5(){let n=this[lo];if(n.readonlyFn===void 0){let e=()=>this();e[lo]=n,n.readonlyFn=e}return n.readonlyFn}function MM(n){return v5(n)&&typeof n.set=="function"}function w5(n){return Object.getPrototypeOf(n.prototype).constructor}function Or(n){let e=w5(n.type),t=!0,i=[n];for(;e;){let r;if(fs(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let a=n;a.inputs=yp(n.inputs),a.inputTransforms=yp(n.inputTransforms),a.declaredInputs=yp(n.declaredInputs),a.outputs=yp(n.outputs);let l=r.hostBindings;l&&T5(n,l);let u=r.viewQuery,f=r.contentQueries;if(u&&C5(n,u),f&&I5(n,f),b5(n,r),vL(n.outputs,r.outputs),fs(r)&&r.data.animation){let m=n.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let l=o[a];l&&l.ngInherit&&l(n),l===Or&&(t=!1)}}e=Object.getPrototypeOf(e)}E5(i)}function b5(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function E5(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=rd(r.hostAttrs,t=rd(t,r.hostAttrs))}}function yp(n){return n===ul?{}:n===Oi?[]:n}function C5(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function I5(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function T5(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Z0(n){let e=n.inputConfig,t={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(t[i]=r[3])}n.inputTransforms=t}var ms=class{},ad=class{};var Jy=class extends ms{constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wp(this);let o=LD(e);this._bootstrapComponents=z1(o.bootstrap),this._r3Injector=M1(e,t,[{provide:ms,useValue:this},{provide:gl,useValue:this.componentFactoryResolver},...i],Un(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xy=class extends ad{constructor(e){super(),this.moduleType=e}create(e){return new Jy(this.moduleType,e,[])}};var Kp=class extends ms{constructor(e){super(),this.componentFactoryResolver=new Wp(this),this.instance=null;let t=new od([...e.providers,{provide:ms,useValue:this},{provide:gl,useValue:this.componentFactoryResolver}],e.parent||v0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function pm(n,e,t=null){return new Kp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function xM(n){return D5(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function S5(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function D5(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function PM(n,e,t){return n[e]=t}function M5(n,e){return n[e]}function Aa(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function AM(n,e,t,i){let r=Aa(n,e,t);return Aa(n,e+1,i)||r}function x5(n){return(n.flags&32)===32}function P5(n,e,t,i,r,o,a,l,u){let f=e.consts,m=um(e,n,4,a||null,l||null);cM(e,t,m,Lp(f,u)),D0(e,m);let v=m.tView=$0(2,m,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,m),v.queries=e.queries.embeddedTView(m)),m}function A5(n,e,t,i,r,o,a,l,u,f){let m=t+ir,v=e.firstCreatePass?P5(m,e,n,i,r,o,a,l,u):e.data[m];dd(v,!1);let E=R5(e,n,v,t);T0()&&j0(e,n,E,v),Ma(E,n);let b=dM(E,n,E,v);return n[m]=b,dm(n,b),s5(b,v,n),y0(v)&&rM(e,n,v),u!=null&&oM(n,v,f),v}function Se(n,e,t,i,r,o,a,l){let u=dt(),f=Pn(),m=Lp(f.consts,o);return A5(u,f,n,e,t,i,r,m,a,l),Se}var R5=O5;function O5(n,e,t,i){return S0(!0),e[an].createComment("")}var sl=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(sl||{}),RM=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}}return n})(),e0=class n{constructor(){this.ngZone=Q(lt),this.scheduler=Q(ml),this.errorHandler=Q(po,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[sl.EarlyRead,sl.Write,sl.MixedReadWrite,sl.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}},t0=class{constructor(e,t,i,r){this.impl=e,this.hooks=t,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Q0(n,e){!e?.injector&&p2(Q0);let t=e?.injector??Q(Tn);return PF(t)?(ys("NgAfterNextRender"),N5(n,t,e,!0)):L5}function k5(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function N5(n,e,t,i){let r=e.get(RM);r.impl??=e.get(e0);let o=t?.phase??sl.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(P0):null,l=new t0(r.impl,k5(n,o),i,a);return r.impl.register(l),l}var L5={destroy(){}};function kr(n,e,t,i){let r=dt(),o=sm();if(Aa(r,o,e)){let a=Pn(),l=I0();vV(l,r,n,e,t,i)}return kr}function F5(n,e,t,i){return Aa(n,sm(),t)?e+ll(t)+i:Rr}function V5(n,e,t,i,r,o){let a=O2(),l=AM(n,a,t,r);return u1(2),l?e+ll(t)+i+ll(r)+o:Rr}function wp(n,e){return n<<17|e<<2}function Ra(n){return n>>17&32767}function B5(n){return(n&2)==2}function U5(n,e){return n&131071|e<<17}function n0(n){return n|2}function vl(n){return(n&131068)>>2}function uy(n,e){return n&-131069|e<<2}function j5(n){return(n&1)===1}function i0(n){return n|1}function z5(n,e,t,i,r,o){let a=o?e.classBindings:e.styleBindings,l=Ra(a),u=vl(a);n[i]=t;let f=!1,m;if(Array.isArray(t)){let v=t;m=v[1],(m===null||ud(v,m)>0)&&(f=!0)}else m=t;if(r)if(u!==0){let E=Ra(n[l+1]);n[i+1]=wp(E,l),E!==0&&(n[E+1]=uy(n[E+1],i)),n[l+1]=U5(n[l+1],i)}else n[i+1]=wp(l,0),l!==0&&(n[l+1]=uy(n[l+1],i)),l=i;else n[i+1]=wp(u,0),l===0?l=i:n[u+1]=uy(n[u+1],i),u=i;f&&(n[i+1]=n0(n[i+1])),lD(n,m,i,!0),lD(n,m,i,!1),$5(e,m,n,i,o),a=wp(l,u),o?e.classBindings=a:e.styleBindings=a}function $5(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ud(o,e)>=0&&(t[i+1]=i0(t[i+1]))}function lD(n,e,t,i){let r=n[t+1],o=e===null,a=i?Ra(r):vl(r),l=!1;for(;a!==0&&(l===!1||o);){let u=n[a],f=n[a+1];H5(u,e)&&(l=!0,n[a+1]=i?i0(f):n0(f)),a=i?Ra(f):vl(f)}l&&(n[t+1]=i?n0(r):i0(r))}function H5(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ud(n,e)>=0:!1}function Y(n,e,t){let i=dt(),r=sm();if(Aa(i,r,e)){let o=Pn(),a=I0();aM(o,a,i,n,e,i[an],t,!1)}return Y}function uD(n,e,t,i,r){let o=e.inputs,a=r?"class":"style";H0(n,t,o[a],a,i)}function ws(n,e,t){return OM(n,e,t,!1),ws}function We(n,e){return OM(n,e,null,!0),We}function OM(n,e,t,i){let r=dt(),o=Pn(),a=u1(2);if(o.firstUpdatePass&&G5(o,n,a,i),e!==Rr&&Aa(r,a,e)){let l=o.data[Oa()];Y5(o,l,r,r[an],n,r[a+1]=J5(e,t),i,a)}}function q5(n,e){return e>=n.expandoStartIndex}function G5(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[Oa()],a=q5(n,t);X5(o,i)&&e===null&&!a&&(e=!1),e=W5(r,o,e,i),z5(r,o,e,t,a,i)}}function W5(n,e,t,i){let r=V2(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=dy(null,n,e,t,i),t=cd(t,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==r)if(t=dy(r,n,e,t,i),o===null){let u=K5(n,e,i);u!==void 0&&Array.isArray(u)&&(u=dy(null,n,e,u[1],i),u=cd(u,e.attrs,i),Z5(n,e,i,u))}else o=Q5(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function K5(n,e,t){let i=t?e.classBindings:e.styleBindings;if(vl(i)!==0)return n[Ra(i)]}function Z5(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Ra(r)]=i}function Q5(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=n[o].hostAttrs;i=cd(i,a,t)}return cd(i,e.attrs,t)}function dy(n,e,t,i,r){let o=null,a=t.directiveEnd,l=t.directiveStylingLast;for(l===-1?l=t.directiveStart:l++;l<a&&(o=e[l],i=cd(i,o.hostAttrs,r),o!==n);)l++;return n!==null&&(t.directiveStylingLast=l),i}function cd(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),UL(n,a,t?!0:e[++o]))}return n===void 0?null:n}function Y5(n,e,t,i,r,o,a,l){if(!(e.type&3))return;let u=n.data,f=u[l+1],m=j5(f)?dD(u,e,t,r,vl(f),a):void 0;if(!Zp(m)){Zp(o)||B5(f)&&(o=dD(u,null,t,r,l,a));let v=JD(Oa(),t);ZF(i,a,v,r,o)}}function dD(n,e,t,i,r,o){let a=e===null,l;for(;r>0;){let u=n[r],f=Array.isArray(u),m=f?u[1]:u,v=m===null,E=t[r+1];E===Rr&&(E=v?Oi:void 0);let b=v?ty(E,i):m===i?E:void 0;if(f&&!Zp(b)&&(b=ty(u,i)),Zp(b)&&(l=b,a))return l;let x=n[r+1];r=a?Ra(x):vl(x)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(l=ty(u,i))}return l}function Zp(n){return n!==void 0}function J5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Un(hd(n)))),n}function X5(n,e){return(n.flags&(e?8:16))!==0}function eB(n,e,t,i,r,o){let a=e.consts,l=Lp(a,r),u=um(e,n,2,i,l);return cM(e,t,u,Lp(a,o)),u.attrs!==null&&Hy(u,u.attrs,!1),u.mergedAttrs!==null&&Hy(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function I(n,e,t,i){let r=dt(),o=Pn(),a=ir+n,l=r[an],u=o.firstCreatePass?eB(a,o,r,e,t,i):o.data[a],f=tB(o,r,u,l,e,n);r[a]=f;let m=y0(u);return dd(u,!0),Y1(l,f,u),!x5(u)&&T0()&&j0(o,r,f,u),I2()===0&&Ma(f,r),T2(),m&&(rM(o,r,u),iM(o,u,r)),i!==null&&oM(r,u),I}function S(){let n=zn();a1()?A2():(n=n.parent,dd(n,!1));let e=n;M2(e)&&x2(),S2();let t=Pn();return t.firstCreatePass&&(D0(t,n),GD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&G2(e)&&uD(t,e,dt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&W2(e)&&uD(t,e,dt(),e.stylesWithoutHost,!1),S}function te(n,e,t,i){return I(n,e,t,i),S(),te}var tB=(n,e,t,i,r,o)=>(S0(!0),$1(i,r,z2()));function rt(){return dt()}var va=void 0;function nB(n){let e=n,t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&i===0?1:5}var iB=["en",[["a","p"],["AM","PM"],va],[["AM","PM"],va,va],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],va,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],va,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",va,"{1} 'at' {0}",va],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",nB],hy={};function pi(n){let e=rB(n),t=hD(e);if(t)return t;let i=e.split("-")[0];if(t=hD(i),t)return t;if(i==="en")return iB;throw new ee(701,!1)}function hD(n){return n in hy||(hy[n]=ya.ng&&ya.ng.common&&ya.ng.common.locales&&ya.ng.common.locales[n]),hy[n]}var Ht=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ht||{});function rB(n){return n.toLowerCase().replace(/_/g,"-")}var Qp="en-US";var oB=Qp;function sB(n){typeof n=="string"&&(oB=n.toLowerCase().replace(/_/g,"-"))}var aB=(n,e,t)=>{};function re(n,e,t,i){let r=dt(),o=Pn(),a=zn();return kM(o,r,r[an],a,n,e,i),re}function cB(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===t&&r[o+1]===i){let l=e[Op],u=r[o+2];return l.length>u?l[u]:null}typeof a=="string"&&(o+=2)}return null}function kM(n,e,t,i,r,o,a){let l=y0(i),f=n.firstCreatePass&&pM(n),m=e[nr],v=fM(e),E=!0;if(i.type&3||a){let k=Fi(i,e),N=a?a(k):k,G=v.length,ne=a?ue=>a(xr(ue[i.index])):i.index,X=null;if(!a&&l&&(X=cB(n,e,r,i.index)),X!==null){let ue=X.__ngLastListenerFn__||X;ue.__ngNextListenerFn__=o,X.__ngLastListenerFn__=o,E=!1}else{o=pD(i,e,m,o),aB(k,r,o);let ue=t.listen(N,r,o);v.push(o,ue),f&&f.push(r,ne,G,G+1)}}else o=pD(i,e,m,o);let b=i.outputs,x;if(E&&b!==null&&(x=b[r])){let k=x.length;if(k)for(let N=0;N<k;N+=2){let G=x[N],ne=x[N+1],Le=e[G][ne].subscribe(o),me=v.length;v.push(o,Le),f&&f.push(r,i.index,me,-(me+1))}}}function fD(n,e,t,i){let r=ct(null);try{return Ir(6,e,t),t(i)!==!1}catch(o){return mM(n,o),!1}finally{Ir(7,e,t),ct(r)}}function pD(n,e,t,i){return function r(o){if(o===Function)return i;let a=n.componentOffset>-1?gs(n.index,e):e;G0(a,5);let l=fD(e,t,i,o),u=r.__ngNextListenerFn__;for(;u;)l=fD(e,t,u,o)&&l,u=u.__ngNextListenerFn__;return l}}function de(n=1){return U2(n)}function mi(n,e,t){p5(n,e,t)}function Xn(n){let e=dt(),t=Pn(),i=d1();b0(i+1);let r=K0(t,i);if(n.dirty&&w2(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=_5(e,i);n.reset(o,pF),n.notifyOnChanges()}return!0}return!1}function ei(){return h5(dt(),d1())}function lB(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Na(n){let e=R2();return e1(e,ir+n)}function H(n,e=""){let t=dt(),i=Pn(),r=n+ir,o=i.firstCreatePass?um(i,r,1,e,null):i.data[r],a=uB(i,t,o,e,n);t[r]=a,T0()&&j0(i,t,a,o),dd(o,!1)}var uB=(n,e,t,i,r)=>(S0(!0),RF(e[an],i));function gt(n){return Ye("",n,""),gt}function Ye(n,e,t){let i=dt(),r=F5(i,n,e,t);return r!==Rr&&gM(i,Oa(),r),Ye}function Y0(n,e,t,i,r){let o=dt(),a=V5(o,n,e,t,i,r);return a!==Rr&&gM(o,Oa(),a),Y0}function cn(n,e,t){MM(e)&&(e=e());let i=dt(),r=sm();if(Aa(i,r,e)){let o=Pn(),a=I0();aM(o,a,i,n,e,i[an],t,!1)}return cn}function vn(n,e){let t=MM(n);return t&&n.set(e),t}function ln(n,e){let t=dt(),i=Pn(),r=zn();return kM(i,t,t[an],r,n,e),ln}function dB(n,e,t){let i=Pn();if(i.firstCreatePass){let r=fs(n);r0(t,i.data,i.blueprint,r,!0),r0(e,i.data,i.blueprint,r,!1)}}function r0(n,e,t,i,r){if(n=Bn(n),Array.isArray(n))for(let o=0;o<n.length;o++)r0(n[o],e,t,i,r);else{let o=Pn(),a=dt(),l=zn(),u=hl(n)?n:Bn(n.provide),f=zD(n),m=l.providerIndexes&1048575,v=l.directiveStart,E=l.providerIndexes>>20;if(hl(n)||!n.multi){let b=new Sa(f,r,se),x=py(u,e,r?m:m+E,v);x===-1?(My(Up(l,a),o,u),fy(o,n,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(b),a.push(b)):(t[x]=b,a[x]=b)}else{let b=py(u,e,m+E,v),x=py(u,e,m,m+E),k=b>=0&&t[b],N=x>=0&&t[x];if(r&&!N||!r&&!k){My(Up(l,a),o,u);let G=pB(r?fB:hB,t.length,r,i,f);!r&&N&&(t[x].providerFactory=G),fy(o,n,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(G),a.push(G)}else{let G=NM(t[r?x:b],f,!r&&i);fy(o,n,b>-1?b:x,G)}!r&&i&&N&&t[x].componentProviders++}}}function fy(n,e,t,i){let r=hl(e),o=a2(e);if(r||o){let u=(o?Bn(e.useClass):e).prototype.ngOnDestroy;if(u){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let m=f.indexOf(t);m===-1?f.push(t,[i,u]):f[m+1].push(i,u)}else f.push(t,u)}}}function NM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function py(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function hB(n,e,t,i){return o0(this.multi,[])}function fB(n,e,t,i){let r=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Da(t,t[$e],this.providerFactory.index,i);o=l.slice(0,a),o0(r,o);for(let u=a;u<l.length;u++)o.push(l[u])}else o=[],o0(r,o);return o}function o0(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function pB(n,e,t,i,r){let o=new Sa(n,t,se);return o.multi=[],o.index=e,o.componentProviders=0,NM(o,r,i&&!t),o}function La(n,e=[]){return t=>{t.providersResolver=(i,r)=>dB(i,r?r(n):n,e)}}var mB=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=BD(!1,t.type),r=i.length>0?pm([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=le({token:n,providedIn:"environment",factory:()=>new n(ve(jn))})}}return n})();function ft(n){ys("NgStandalone"),n.getStandaloneInjector=e=>e.get(mB).getOrCreateStandaloneInjector(n)}function LM(n,e,t){let i=l1()+n,r=dt();return r[i]===Rr?PM(r,i,t?e.call(t):e()):M5(r,i)}function gB(n,e){let t=n[e];return t===Rr?void 0:t}function _B(n,e,t,i,r,o,a){let l=e+t;return AM(n,l,r,o)?PM(n,l+2,a?i.call(a,r,o):i(r,o)):gB(n,l+2)}function fd(n,e){let t=Pn(),i,r=n+ir;t.firstCreatePass?(i=vB(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=ba(i.type,!0)),a,l=Jn(se);try{let u=Bp(!1),f=o();return Bp(u),lB(t,dt(),r,f),f}finally{Jn(l)}}function vB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function pd(n,e,t,i){let r=n+ir,o=dt(),a=e1(o,r);return yB(o,r)?_B(o,l1(),e,a.transform,t,i,a):a.transform(t,i)}function yB(n,e){return n[$e].data[e].pure}function mm(n,e){return hm(n,e)}var go=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},FM=new go("18.2.14");var gm=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var VM=new pe("");function Fa(n){return!!n&&typeof n.then=="function"}function BM(n){return!!n&&typeof n.subscribe=="function"}var _m=new pe(""),UM=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Q(_m,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=r();if(Fa(o))t.push(o);else if(BM(o)){let a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});t.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),md=new pe("");function wB(){rS(()=>{throw new ee(600,!1)})}function bB(n){return n.isBoundToModule}var EB=10;function CB(n,e,t){try{let i=t();return Fa(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var bs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Q(hF),this.afterRenderManager=Q(RM),this.zonelessEnabled=Q(W0),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new _n,this.afterTick=new _n,this.componentTypes=[],this.components=[],this.isStable=Q(_s).hasPendingTasks.pipe(Ae(t=>!t)),this._injector=Q(jn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){let r=t instanceof Gp;if(!this._injector.get(UM).done){let E=!r&&ND(t),b=!1;throw new ee(405,b)}let a;r?a=t:a=this._injector.get(gl).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=bB(a)?void 0:this._injector.get(ms),u=i||a.selector,f=a.create(Tn.NULL,[],u,l),m=f.location.nativeElement,v=f.injector.get(VM,null);return v?.registerApplication(m),f.onDestroy(()=>{this.detachView(f.hostView),Sp(this.components,f),v?.unregisterApplication(m)}),this._loadComponent(f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ee(101,!1);let t=ct(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ct(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ps,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<EB;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)IB(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>rm(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Sp(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(md,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Sp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Sp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function IB(n,e,t,i){if(!t&&!rm(n))return;yM(n,e,t&&!i?0:1)}var s0=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},vm=(()=>{class n{compileModuleSync(t){return new Xy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=LD(t),o=z1(r.declarations).reduce((a,l)=>{let u=hs(l);return u&&a.push(new _l(u)),a},[]);return new s0(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var TB=(()=>{class n{constructor(){this.zone=Q(lt),this.changeDetectionScheduler=Q(ml),this.applicationRef=Q(bs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function SB({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new lt(ke(J({},DB()),{scheduleInRootZone:t})),[{provide:lt,useFactory:n},{provide:dl,multi:!0,useFactory:()=>{let i=Q(TB,{optional:!0});return()=>i.initialize()}},{provide:dl,multi:!0,useFactory:()=>{let i=Q(MB);return()=>{i.initialize()}}},e===!0?{provide:CM,useValue:!0}:[],{provide:IM,useValue:t??x1}]}function DB(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var MB=(()=>{class n{constructor(){this.subscription=new $t,this.initialized=!1,this.zone=Q(lt),this.pendingTasks=Q(_s)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{lt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{lt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xB=(()=>{class n{constructor(){this.appRef=Q(bs),this.taskService=Q(_s),this.ngZone=Q(lt),this.zonelessEnabled=Q(W0),this.disableScheduling=Q(CM,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $t,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zp):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Q(IM,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Oy||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?ZS:P1;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ZS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PB(){return typeof $localize<"u"&&$localize.locale||Qp}var gd=new pe("",{providedIn:"root",factory:()=>Q(gd,Ze.Optional|Ze.SkipSelf)||PB()});var a0=new pe("");function bp(n){return!n.moduleRef}function AB(n){let e=bp(n)?n.r3Injector:n.moduleRef.injector,t=e.get(lt);return t.run(()=>{bp(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(po,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),bp(n)){let o=()=>e.destroy(),a=n.platformInjector.get(a0);a.add(o),e.onDestroy(()=>{r.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(a0);a.add(o),n.moduleRef.onDestroy(()=>{Sp(n.allPlatformModules,n.moduleRef),r.unsubscribe(),a.delete(o)})}return CB(i,t,()=>{let o=e.get(UM);return o.runInitializers(),o.donePromise.then(()=>{let a=e.get(gd,Qp);if(sB(a||Qp),bp(n)){let l=e.get(bs);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return RB(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function RB(n,e){let t=n.injector.get(bs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ee(-403,!1);e.push(n)}var Dp=null,jM=new pe("");function OB(n=[],e){return Tn.create({name:e,providers:[{provide:tm,useValue:"platform"},{provide:a0,useValue:new Set([()=>Dp=null])},...n]})}function kB(n=[]){if(Dp)return Dp;let e=OB(n);return e.get(jM,!1)||(Dp=e),wB(),NB(e),e}function NB(n){n.get(k0,null)?.forEach(t=>t())}var gi=(()=>{class n{static{this.__NG_ELEMENT_ID__=LB}}return n})();function LB(n){return FB(zn(),dt(),(n&16)===16)}function FB(n,e,t){if(im(n)&&!t){let i=gs(n.index,e);return new xa(i,i)}else if(n.type&175){let i=e[Mr];return new xa(i,e)}return null}var c0=class{constructor(){}supports(e){return xM(e)}create(e){return new l0(e)}},VB=(n,e)=>e,l0=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||VB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let a=!i||t&&t.currentIndex<mD(i,r,o)?t:i,l=mD(a,r,o),u=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(t=t._next,a.previousIndex==null)r++;else{o||(o=[]);let f=l-r,m=u-r;if(f!=m){for(let E=0;E<f;E++){let b=E<o.length?o[E]:o[E]=0,x=b+E;m<=x&&x<f&&(o[E]=b+1)}let v=a.previousIndex;o[v]=m-f}}l!==u&&e(a,l,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!xM(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,a;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],a=this._trackByFn(l,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,l),i=!0):(i&&(t=this._verifyReinsertion(t,o,a,l)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,S5(e,l=>{a=this._trackByFn(r,l),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,l,a,r),i=!0):(i&&(t=this._verifyReinsertion(t,l,a,r)),Object.is(t.item,l)||this._addIdentityChange(t,l)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new u0(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yp),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},u0=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},d0=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Yp=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new d0,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function mD(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function gD(){return new J0([new c0])}var J0=(()=>{class n{static{this.\u0275prov=le({token:n,providedIn:"root",factory:gD})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||gD()),deps:[[n,new f0,new xn]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new ee(901,!1)}}return n})();function zM(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;try{let o=r?.injector??kB(i);if(o.get(jM,!1)===!0&&!n.platformRef)throw new ee(401,!1);let a=[SB({}),{provide:ml,useExisting:xB},...t||[]],l=new Kp({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return AB({r3Injector:l.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}}function Va(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ym(n,e){ys("NgSignals");let t=tS(n);return e?.equal&&(t[lo].equal=e.equal),t}function Es(n){let e=ct(null);try{return n()}finally{ct(e)}}function $M(n){let e=hs(n);if(!e)return null;let t=new _l(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var QM=null;function To(){return QM}function YM(n){QM??=n}var Mm=class{};var yn=new pe(""),cw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(UB),providedIn:"platform"})}}return n})(),JM=new pe(""),UB=(()=>{class n extends cw{constructor(){super(),this._doc=Q(yn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return To().getBaseHref(this._doc)}onPopState(t){let i=To().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=To().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function lw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function HM(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function Eo(n){return n&&n[0]!=="?"?"?"+n:n}var So=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(uw),providedIn:"root"})}}return n})(),XM=new pe(""),uw=(()=>{class n extends So{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Q(yn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return lw(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Eo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Eo(o));this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Eo(o));this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(ve(cw),ve(XM,8))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ex=(()=>{class n extends So{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=lw(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Eo(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Eo(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(ve(cw),ve(XM,8))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),El=(()=>{class n{constructor(t){this._subject=new Ge,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=$B(HM(qM(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Eo(i))}normalize(t){return n.stripTrailingSlash(zB(this._basePath,qM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Eo(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Eo(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=Eo}static{this.joinWithSlash=lw}static{this.stripTrailingSlash=HM}static{this.\u0275fac=function(i){return new(i||n)(ve(So))}}static{this.\u0275prov=le({token:n,factory:()=>jB(),providedIn:"root"})}}return n})();function jB(){return new El(ve(So))}function zB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function qM(n){return n.replace(/\/index.html$/,"")}function $B(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var tx=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(tx||{});var $n=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}($n||{}),St=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(St||{}),_i=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(_i||{}),vi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function HB(n){return pi(n)[Ht.LocaleId]}function qB(n,e,t){let i=pi(n),r=[i[Ht.DayPeriodsFormat],i[Ht.DayPeriodsStandalone]],o=Bi(r,e);return Bi(o,t)}function GB(n,e,t){let i=pi(n),r=[i[Ht.DaysFormat],i[Ht.DaysStandalone]],o=Bi(r,e);return Bi(o,t)}function WB(n,e,t){let i=pi(n),r=[i[Ht.MonthsFormat],i[Ht.MonthsStandalone]],o=Bi(r,e);return Bi(o,t)}function KB(n,e){let i=pi(n)[Ht.Eras];return Bi(i,e)}function wm(n,e){let t=pi(n);return Bi(t[Ht.DateFormat],e)}function bm(n,e){let t=pi(n);return Bi(t[Ht.TimeFormat],e)}function Em(n,e){let i=pi(n)[Ht.DateTimeFormat];return Bi(i,e)}function Co(n,e){let t=pi(n),i=t[Ht.NumberSymbols][e];if(typeof i>"u"){if(e===vi.CurrencyDecimal)return t[Ht.NumberSymbols][vi.Decimal];if(e===vi.CurrencyGroup)return t[Ht.NumberSymbols][vi.Group]}return i}function ZB(n,e){return pi(n)[Ht.NumberFormats][e]}function nx(n){if(!n[Ht.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Ht.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function QB(n){let e=pi(n);return nx(e),(e[Ht.ExtraData][2]||[]).map(i=>typeof i=="string"?X0(i):[X0(i[0]),X0(i[1])])}function YB(n,e,t){let i=pi(n);nx(i);let r=[i[Ht.ExtraData][0],i[Ht.ExtraData][1]],o=Bi(r,e)||[];return Bi(o,t)||[]}function Bi(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function X0(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var JB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Cm={},XB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Io=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Io||{}),vt=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(vt||{}),_t=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(_t||{});function eU(n,e,t,i){let r=lU(n);e=bo(t,e)||e;let a=[],l;for(;e;)if(l=XB.exec(e),l){a=a.concat(l.slice(1));let m=a.pop();if(!m)break;e=m}else{a.push(e);break}let u=r.getTimezoneOffset();i&&(u=rx(i,u),r=cU(r,i,!0));let f="";return a.forEach(m=>{let v=sU(m);f+=v?v(r,t,u):m==="''"?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function xm(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function bo(n,e){let t=HB(n);if(Cm[t]??={},Cm[t][e])return Cm[t][e];let i="";switch(e){case"shortDate":i=wm(n,_i.Short);break;case"mediumDate":i=wm(n,_i.Medium);break;case"longDate":i=wm(n,_i.Long);break;case"fullDate":i=wm(n,_i.Full);break;case"shortTime":i=bm(n,_i.Short);break;case"mediumTime":i=bm(n,_i.Medium);break;case"longTime":i=bm(n,_i.Long);break;case"fullTime":i=bm(n,_i.Full);break;case"short":let r=bo(n,"shortTime"),o=bo(n,"shortDate");i=Im(Em(n,_i.Short),[r,o]);break;case"medium":let a=bo(n,"mediumTime"),l=bo(n,"mediumDate");i=Im(Em(n,_i.Medium),[a,l]);break;case"long":let u=bo(n,"longTime"),f=bo(n,"longDate");i=Im(Em(n,_i.Long),[u,f]);break;case"full":let m=bo(n,"fullTime"),v=bo(n,"fullDate");i=Im(Em(n,_i.Full),[m,v]);break}return i&&(Cm[t][e]=i),i}function Im(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function cr(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let a=String(n);for(;a.length<e;)a="0"+a;return i&&(a=a.slice(a.length-e)),o+a}function tU(n,e){return cr(n,3).substring(0,e)}function Xt(n,e,t=0,i=!1,r=!1){return function(o,a){let l=nU(n,o);if((t>0||l>-t)&&(l+=t),n===vt.Hours)l===0&&t===-12&&(l=12);else if(n===vt.FractionalSeconds)return tU(l,e);let u=Co(a,vi.MinusSign);return cr(l,e,u,i,r)}}function nU(n,e){switch(n){case vt.FullYear:return e.getFullYear();case vt.Month:return e.getMonth();case vt.Date:return e.getDate();case vt.Hours:return e.getHours();case vt.Minutes:return e.getMinutes();case vt.Seconds:return e.getSeconds();case vt.FractionalSeconds:return e.getMilliseconds();case vt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Rt(n,e,t=$n.Format,i=!1){return function(r,o){return iU(r,o,n,e,t,i)}}function iU(n,e,t,i,r,o){switch(t){case _t.Months:return WB(e,r,i)[n.getMonth()];case _t.Days:return GB(e,r,i)[n.getDay()];case _t.DayPeriods:let a=n.getHours(),l=n.getMinutes();if(o){let f=QB(e),m=YB(e,r,i),v=f.findIndex(E=>{if(Array.isArray(E)){let[b,x]=E,k=a>=b.hours&&l>=b.minutes,N=a<x.hours||a===x.hours&&l<x.minutes;if(b.hours<x.hours){if(k&&N)return!0}else if(k||N)return!0}else if(E.hours===a&&E.minutes===l)return!0;return!1});if(v!==-1)return m[v]}return qB(e,r,i)[a<12?0:1];case _t.Eras:return KB(e,i)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Tm(n){return function(e,t,i){let r=-1*i,o=Co(t,vi.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Io.Short:return(r>=0?"+":"")+cr(a,2,o)+cr(Math.abs(r%60),2,o);case Io.ShortGMT:return"GMT"+(r>=0?"+":"")+cr(a,1,o);case Io.Long:return"GMT"+(r>=0?"+":"")+cr(a,2,o)+":"+cr(Math.abs(r%60),2,o);case Io.Extended:return i===0?"Z":(r>=0?"+":"")+cr(a,2,o)+":"+cr(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var rU=0,Dm=4;function oU(n){let e=xm(n,rU,1).getDay();return xm(n,0,1+(e<=Dm?Dm:Dm+7)-e)}function ix(n){let e=n.getDay(),t=e===0?-3:Dm-e;return xm(n.getFullYear(),n.getMonth(),n.getDate()+t)}function ew(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,a=t.getDate();r=1+Math.floor((a+o)/7)}else{let o=ix(t),a=oU(o.getFullYear()),l=o.getTime()-a.getTime();r=1+Math.round(l/6048e5)}return cr(r,n,Co(i,vi.MinusSign))}}function Sm(n,e=!1){return function(t,i){let o=ix(t).getFullYear();return cr(o,n,Co(i,vi.MinusSign),e)}}var tw={};function sU(n){if(tw[n])return tw[n];let e;switch(n){case"G":case"GG":case"GGG":e=Rt(_t.Eras,St.Abbreviated);break;case"GGGG":e=Rt(_t.Eras,St.Wide);break;case"GGGGG":e=Rt(_t.Eras,St.Narrow);break;case"y":e=Xt(vt.FullYear,1,0,!1,!0);break;case"yy":e=Xt(vt.FullYear,2,0,!0,!0);break;case"yyy":e=Xt(vt.FullYear,3,0,!1,!0);break;case"yyyy":e=Xt(vt.FullYear,4,0,!1,!0);break;case"Y":e=Sm(1);break;case"YY":e=Sm(2,!0);break;case"YYY":e=Sm(3);break;case"YYYY":e=Sm(4);break;case"M":case"L":e=Xt(vt.Month,1,1);break;case"MM":case"LL":e=Xt(vt.Month,2,1);break;case"MMM":e=Rt(_t.Months,St.Abbreviated);break;case"MMMM":e=Rt(_t.Months,St.Wide);break;case"MMMMM":e=Rt(_t.Months,St.Narrow);break;case"LLL":e=Rt(_t.Months,St.Abbreviated,$n.Standalone);break;case"LLLL":e=Rt(_t.Months,St.Wide,$n.Standalone);break;case"LLLLL":e=Rt(_t.Months,St.Narrow,$n.Standalone);break;case"w":e=ew(1);break;case"ww":e=ew(2);break;case"W":e=ew(1,!0);break;case"d":e=Xt(vt.Date,1);break;case"dd":e=Xt(vt.Date,2);break;case"c":case"cc":e=Xt(vt.Day,1);break;case"ccc":e=Rt(_t.Days,St.Abbreviated,$n.Standalone);break;case"cccc":e=Rt(_t.Days,St.Wide,$n.Standalone);break;case"ccccc":e=Rt(_t.Days,St.Narrow,$n.Standalone);break;case"cccccc":e=Rt(_t.Days,St.Short,$n.Standalone);break;case"E":case"EE":case"EEE":e=Rt(_t.Days,St.Abbreviated);break;case"EEEE":e=Rt(_t.Days,St.Wide);break;case"EEEEE":e=Rt(_t.Days,St.Narrow);break;case"EEEEEE":e=Rt(_t.Days,St.Short);break;case"a":case"aa":case"aaa":e=Rt(_t.DayPeriods,St.Abbreviated);break;case"aaaa":e=Rt(_t.DayPeriods,St.Wide);break;case"aaaaa":e=Rt(_t.DayPeriods,St.Narrow);break;case"b":case"bb":case"bbb":e=Rt(_t.DayPeriods,St.Abbreviated,$n.Standalone,!0);break;case"bbbb":e=Rt(_t.DayPeriods,St.Wide,$n.Standalone,!0);break;case"bbbbb":e=Rt(_t.DayPeriods,St.Narrow,$n.Standalone,!0);break;case"B":case"BB":case"BBB":e=Rt(_t.DayPeriods,St.Abbreviated,$n.Format,!0);break;case"BBBB":e=Rt(_t.DayPeriods,St.Wide,$n.Format,!0);break;case"BBBBB":e=Rt(_t.DayPeriods,St.Narrow,$n.Format,!0);break;case"h":e=Xt(vt.Hours,1,-12);break;case"hh":e=Xt(vt.Hours,2,-12);break;case"H":e=Xt(vt.Hours,1);break;case"HH":e=Xt(vt.Hours,2);break;case"m":e=Xt(vt.Minutes,1);break;case"mm":e=Xt(vt.Minutes,2);break;case"s":e=Xt(vt.Seconds,1);break;case"ss":e=Xt(vt.Seconds,2);break;case"S":e=Xt(vt.FractionalSeconds,1);break;case"SS":e=Xt(vt.FractionalSeconds,2);break;case"SSS":e=Xt(vt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Tm(Io.Short);break;case"ZZZZZ":e=Tm(Io.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Tm(Io.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Tm(Io.Long);break;default:return null}return tw[n]=e,e}function rx(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function aU(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function cU(n,e,t){let i=t?-1:1,r=n.getTimezoneOffset(),o=rx(e,r);return aU(n,i*(o-r))}function lU(n){if(GM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,a=1]=n.split("-").map(l=>+l);return xm(r,o-1,a)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(JB))return uU(i)}let e=new Date(n);if(!GM(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function uU(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let a=Number(n[4]||0)-t,l=Number(n[5]||0)-i,u=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,a,l,u,f),e}function GM(n){return n instanceof Date&&!isNaN(n.valueOf())}var dU=/^(\d+)?\.((\d+)(-(\d+))?)?$/,WM=22,Pm=".",_d="0",hU=";",fU=",",nw="#";function pU(n,e,t,i,r,o,a=!1){let l="",u=!1;if(!isFinite(n))l=Co(t,vi.Infinity);else{let f=vU(n);a&&(f=_U(f));let m=e.minInt,v=e.minFrac,E=e.maxFrac;if(o){let ne=o.match(dU);if(ne===null)throw new Error(`${o} is not a valid digit info`);let X=ne[1],ue=ne[3],Le=ne[5];X!=null&&(m=iw(X)),ue!=null&&(v=iw(ue)),Le!=null?E=iw(Le):ue!=null&&v>E&&(E=v)}yU(f,v,E);let b=f.digits,x=f.integerLen,k=f.exponent,N=[];for(u=b.every(ne=>!ne);x<m;x++)b.unshift(0);for(;x<0;x++)b.unshift(0);x>0?N=b.splice(x,b.length):(N=b,b=[0]);let G=[];for(b.length>=e.lgSize&&G.unshift(b.splice(-e.lgSize,b.length).join(""));b.length>e.gSize;)G.unshift(b.splice(-e.gSize,b.length).join(""));b.length&&G.unshift(b.join("")),l=G.join(Co(t,i)),N.length&&(l+=Co(t,r)+N.join("")),k&&(l+=Co(t,vi.Exponential)+"+"+k)}return n<0&&!u?l=e.negPre+l+e.negSuf:l=e.posPre+l+e.posSuf,l}function mU(n,e,t){let i=ZB(e,tx.Decimal),r=gU(i,Co(e,vi.MinusSign));return pU(n,r,e,vi.Group,vi.Decimal,t)}function gU(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(hU),r=i[0],o=i[1],a=r.indexOf(Pm)!==-1?r.split(Pm):[r.substring(0,r.lastIndexOf(_d)+1),r.substring(r.lastIndexOf(_d)+1)],l=a[0],u=a[1]||"";t.posPre=l.substring(0,l.indexOf(nw));for(let m=0;m<u.length;m++){let v=u.charAt(m);v===_d?t.minFrac=t.maxFrac=m+1:v===nw?t.maxFrac=m+1:t.posSuf+=v}let f=l.split(fU);if(t.gSize=f[1]?f[1].length:0,t.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let m=r.length-t.posPre.length-t.posSuf.length,v=o.indexOf(nw);t.negPre=o.substring(0,v).replace(/'/g,""),t.negSuf=o.slice(v+m).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function _U(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function vU(n){let e=Math.abs(n)+"",t=0,i,r,o,a,l;for((r=e.indexOf(Pm))>-1&&(e=e.replace(Pm,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===_d;o++);if(o===(l=e.length))i=[0],r=1;else{for(l--;e.charAt(l)===_d;)l--;for(r-=o,i=[],a=0;o<=l;o++,a++)i[a]=Number(e.charAt(o))}return r>WM&&(i=i.splice(0,WM-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function yU(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),a=o+n.integerLen,l=i[a];if(a>0){i.splice(Math.max(n.integerLen,a));for(let v=a;v<i.length;v++)i[v]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let v=1;v<a;v++)i[v]=0}if(l>=5)if(a-1<0){for(let v=0;v>a;v--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[a-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+n.integerLen,m=i.reduceRight(function(v,E,b,x){return E=E+v,x[b]=E<10?E:E-10,u&&(x[b]===0&&b>=f?x.pop():u=!1),E>=10?1:0},0);m&&(i.unshift(m),n.integerLen++)}function iw(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Am(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var rw=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},An=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,a)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new rw(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),KM(l,r)}});for(let r=0,o=i.length;r<o;r++){let l=i.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);KM(o,r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(se(vs),se(Pa),se(J0))}}static{this.\u0275dir=Sn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function KM(n,e){n.context.$implicit=e.item}var Ot=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new ow,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ZM("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ZM("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(se(vs),se(Pa))}}static{this.\u0275dir=Sn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),ow=class{constructor(){this.$implicit=null,this.ngIf=null}};function ZM(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Un(e)}'.`)}function ox(n,e){return new ee(2100,!1)}var wU="mediumDate",bU=new pe(""),EU=new pe(""),sx=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let a=i??this.defaultOptions?.dateFormat??wU,l=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return eU(t,a,o||this.locale,l)}catch(a){throw ox(n,a.message)}}static{this.\u0275fac=function(i){return new(i||n)(se(gd,16),se(bU,24),se(EU,24))}}static{this.\u0275pipe=g0({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var ax=(()=>{class n{constructor(t){this._locale=t}transform(t,i,r){if(!CU(t))return null;r||=this._locale;try{let o=IU(t);return mU(o,r,i)}catch(o){throw ox(n,o.message)}}static{this.\u0275fac=function(i){return new(i||n)(se(gd,16))}}static{this.\u0275pipe=g0({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function CU(n){return!(n==null||n===""||n!==n)}function IU(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var bt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ar({type:n})}static{this.\u0275inj=Pr({})}}return n})(),dw="browser",TU="server";function SU(n){return n===dw}function Rm(n){return n===TU}var cx=(()=>{class n{static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>SU(Q(Vi))?new sw(Q(yn),window):new aw})}}return n})(),sw=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=DU(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function DU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}var aw=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},bl=class{};var yd=class{},km=class{},Do=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=r.toLowerCase(),a=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(l=>o.indexOf(l)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var fw=class{encodeKey(e){return lx(e)}encodeValue(e){return lx(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function MU(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[a,l]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],u=t.get(a)||[];u.push(l),t.set(a,u)}),t}var xU=/%(\d[a-f0-9])/gi,PU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function lx(n){return encodeURIComponent(n).replace(xU,(e,t)=>PU[t]??e)}function Om(n){return`${n}`}var Is=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new fw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=MU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Om):[Om(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Om(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Om(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var pw=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function AU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ux(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function dx(n){return typeof Blob<"u"&&n instanceof Blob}function hx(n){return typeof FormData<"u"&&n instanceof FormData}function RU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var vd=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(AU(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Do,this.context??=new pw,!this.params)this.params=new Is,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let l=t.indexOf("?"),u=l===-1?"?":l<t.length-1?"&":"";this.urlWithParams=t+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ux(this.body)||dx(this.body)||hx(this.body)||RU(this.body)?this.body:this.body instanceof Is?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||hx(this.body)?null:dx(this.body)?this.body.type||null:ux(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Is?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,l=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,f=e.headers||this.headers,m=e.params||this.params,v=e.context??this.context;return e.setHeaders!==void 0&&(f=Object.keys(e.setHeaders).reduce((E,b)=>E.set(b,e.setHeaders[b]),f)),e.setParams&&(m=Object.keys(e.setParams).reduce((E,b)=>E.set(b,e.setParams[b]),m)),new n(t,i,a,{params:m,headers:f,context:v,reportProgress:u,responseType:r,withCredentials:l,transferCache:o})}},lr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(lr||{}),wd=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new Do,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Nm=class n extends wd{constructor(e={}){super(e),this.type=lr.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},bd=class n extends wd{constructor(e={}){super(e),this.type=lr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Cs=class extends wd{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},gx=200,OU=204;function hw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var _w=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof vd)o=t;else{let u;r.headers instanceof Do?u=r.headers:u=new Do(r.headers);let f;r.params&&(r.params instanceof Is?f=r.params:f=new Is({fromObject:r.params})),o=new vd(t,i,r.body!==void 0?r.body:null,{headers:u,context:r.context,params:f,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let a=De(o).pipe(uo(u=>this.handler.handle(u)));if(t instanceof vd||r.observe==="events")return a;let l=a.pipe(Qn(u=>u instanceof bd));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(Ae(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(Ae(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(Ae(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return l.pipe(Ae(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Is().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,hw(r,i))}post(t,i,r={}){return this.request("POST",t,hw(r,i))}put(t,i,r={}){return this.request("PUT",t,hw(r,i))}static{this.\u0275fac=function(i){return new(i||n)(ve(yd))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),kU=/^\)\]\}',?\n/,NU="X-Request-URL";function fx(n){if(n.url)return n.url;let e=NU.toLocaleLowerCase();return n.headers.get(e)}var LU=(()=>{class n{constructor(){this.fetchImpl=Q(mw,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=Q(lt)}handle(t){return new ze(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(gw,o=>i.error(new Cs({error:o}))),()=>r.abort()})}doRequest(t,i,r){return T(this,null,function*(){let o=this.createRequestInit(t),a;try{let b=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,J({signal:i},o)));FU(b),r.next({type:lr.Sent}),a=yield b}catch(b){r.error(new Cs({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}));return}let l=new Do(a.headers),u=a.statusText,f=fx(a)??t.urlWithParams,m=a.status,v=null;if(t.reportProgress&&r.next(new Nm({headers:l,status:m,statusText:u,url:f})),a.body){let b=a.headers.get("content-length"),x=[],k=a.body.getReader(),N=0,G,ne,X=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>T(this,null,function*(){for(;;){let{done:Le,value:me}=yield k.read();if(Le)break;if(x.push(me),N+=me.length,t.reportProgress){ne=t.responseType==="text"?(ne??"")+(G??=new TextDecoder).decode(me,{stream:!0}):void 0;let R=()=>r.next({type:lr.DownloadProgress,total:b?+b:void 0,loaded:N,partialText:ne});X?X.run(R):R()}}}));let ue=this.concatChunks(x,N);try{let Le=a.headers.get("Content-Type")??"";v=this.parseBody(t,ue,Le)}catch(Le){r.error(new Cs({error:Le,headers:new Do(a.headers),status:a.status,statusText:a.statusText,url:fx(a)??t.urlWithParams}));return}}m===0&&(m=v?gx:0),m>=200&&m<300?(r.next(new bd({body:v,headers:l,status:m,statusText:u,url:f})),r.complete()):r.error(new Cs({error:v,headers:l,status:m,statusText:u,url:f}))})}parseBody(t,i,r){switch(t.responseType){case"json":let o=new TextDecoder().decode(i).replace(kU,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((o,a)=>i[o]=a.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),o=0;for(let a of t)r.set(a,o),o+=a.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),mw=class{};function gw(){}function FU(n){n.then(gw,gw)}function VU(n,e){return e(n)}function BU(n,e,t){return(i,r)=>Ni(t,()=>e(i,o=>n(o,r)))}var _x=new pe(""),UU=new pe(""),jU=new pe("",{providedIn:"root",factory:()=>!0});var px=(()=>{class n extends yd{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Q(_s),this.contributeToStability=Q(jU)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(_x),...this.injector.get(UU,[])]));this.chain=i.reduceRight((r,o)=>BU(r,o,this.injector),VU)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(_a(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(ve(km),ve(jn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();var zU=/^\)\]\}',?\n/;function $U(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var mx=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ee(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?At(i.\u0275loadImpl()):De(null)).pipe(Yn(()=>new ze(o=>{let a=i.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((k,N)=>a.setRequestHeader(k,N.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let k=t.detectContentTypeHeader();k!==null&&a.setRequestHeader("Content-Type",k)}if(t.responseType){let k=t.responseType.toLowerCase();a.responseType=k!=="json"?k:"text"}let l=t.serializeBody(),u=null,f=()=>{if(u!==null)return u;let k=a.statusText||"OK",N=new Do(a.getAllResponseHeaders()),G=$U(a)||t.url;return u=new Nm({headers:N,status:a.status,statusText:k,url:G}),u},m=()=>{let{headers:k,status:N,statusText:G,url:ne}=f(),X=null;N!==OU&&(X=typeof a.response>"u"?a.responseText:a.response),N===0&&(N=X?gx:0);let ue=N>=200&&N<300;if(t.responseType==="json"&&typeof X=="string"){let Le=X;X=X.replace(zU,"");try{X=X!==""?JSON.parse(X):null}catch(me){X=Le,ue&&(ue=!1,X={error:me,text:X})}}ue?(o.next(new bd({body:X,headers:k,status:N,statusText:G,url:ne||void 0})),o.complete()):o.error(new Cs({error:X,headers:k,status:N,statusText:G,url:ne||void 0}))},v=k=>{let{url:N}=f(),G=new Cs({error:k,status:a.status||0,statusText:a.statusText||"Unknown Error",url:N||void 0});o.error(G)},E=!1,b=k=>{E||(o.next(f()),E=!0);let N={type:lr.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(N.total=k.total),t.responseType==="text"&&a.responseText&&(N.partialText=a.responseText),o.next(N)},x=k=>{let N={type:lr.UploadProgress,loaded:k.loaded};k.lengthComputable&&(N.total=k.total),o.next(N)};return a.addEventListener("load",m),a.addEventListener("error",v),a.addEventListener("timeout",v),a.addEventListener("abort",v),t.reportProgress&&(a.addEventListener("progress",b),l!==null&&a.upload&&a.upload.addEventListener("progress",x)),a.send(l),o.next({type:lr.Sent}),()=>{a.removeEventListener("error",v),a.removeEventListener("abort",v),a.removeEventListener("load",m),a.removeEventListener("timeout",v),t.reportProgress&&(a.removeEventListener("progress",b),l!==null&&a.upload&&a.upload.removeEventListener("progress",x)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(ve(bl))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),vx=new pe(""),HU="XSRF-TOKEN",qU=new pe("",{providedIn:"root",factory:()=>HU}),GU="X-XSRF-TOKEN",WU=new pe("",{providedIn:"root",factory:()=>GU}),Lm=class{},KU=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Am(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(ve(yn),ve(Vi),ve(qU))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function ZU(n,e){let t=n.url.toLowerCase();if(!Q(vx)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=Q(Lm).getToken(),r=Q(WU);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}function yx(...n){let e=[_w,mx,px,{provide:yd,useExisting:px},{provide:km,useFactory:()=>Q(LU,{optional:!0})??Q(mx)},{provide:_x,useValue:ZU,multi:!0},{provide:vx,useValue:!0},{provide:Lm,useClass:KU}];for(let t of n)e.push(...t.\u0275providers);return rr(e)}var ww=class extends Mm{constructor(){super(...arguments),this.supportsDOMEvents=!0}},bw=class n extends ww{static makeCurrent(){YM(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=YU();return t==null?null:JU(t)}resetBaseElement(){Ed=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Am(document.cookie,e)}},Ed=null;function YU(){return Ed=Ed||document.querySelector("base"),Ed?Ed.getAttribute("href"):null}function JU(n){return new URL(n,document.baseURI).pathname}var XU=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),Ew=new pe(""),Ex=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(ve(Ew),ve(lt))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),Fm=class{constructor(e){this._doc=e}},vw="ng-app-id",Cx=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rm(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${vw}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(vw),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(vw,this.appId),t.appendChild(a),a}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(ve(yn),ve(O0),ve(L0,8),ve(Vi))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),yw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Iw=/%COMP%/g,Ix="%COMP%",ej=`_nghost-${Ix}`,tj=`_ngcontent-${Ix}`,nj=!0,ij=new pe("",{providedIn:"root",factory:()=>nj});function rj(n){return tj.replace(Iw,n)}function oj(n){return ej.replace(Iw,n)}function Tx(n,e){return e.map(t=>t.replace(Iw,n))}var Vm=(()=>{class n{constructor(t,i,r,o,a,l,u,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Rm(l),this.defaultRenderer=new Cd(t,a,u,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Sr.ShadowDom&&(i=ke(J({},i),{encapsulation:Sr.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Bm?r.applyToHost(t):r instanceof Id&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,l=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(i.encapsulation){case Sr.Emulated:o=new Bm(u,f,i,this.appId,m,a,l,v);break;case Sr.ShadowDom:return new Cw(u,f,t,i,a,l,this.nonce,v);default:o=new Id(u,f,i,m,a,l,v);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(ve(Ex),ve(Cx),ve(O0),ve(ij),ve(yn),ve(Vi),ve(lt),ve(L0))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),Cd=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(yw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wx(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(wx(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ee(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=yw[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=yw[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(mo.DashCase|mo.Important)?e.style.setProperty(t,i,r&mo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&mo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=To().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function wx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Cw=class extends Cd{constructor(e,t,i,r,o,a,l,u){super(e,o,a,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=Tx(r.id,r.styles);for(let m of f){let v=document.createElement("style");l&&v.setAttribute("nonce",l),v.textContent=m,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Id=class extends Cd{constructor(e,t,i,r,o,a,l,u){super(e,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=u?Tx(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Bm=class extends Id{constructor(e,t,i,r,o,a,l,u){let f=r+"-"+i.id;super(e,t,i,o,a,l,u,f),this.contentAttr=rj(f),this.hostAttr=oj(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},sj=(()=>{class n extends Fm{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(ve(yn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),bx=["alt","control","meta","shift"],aj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},lj=(()=>{class n extends Fm{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>To().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),bx.forEach(f=>{let m=i.indexOf(f);m>-1&&(i.splice(m,1),a+=f+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(t,i){let r=aj[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),bx.forEach(a=>{if(a!==r){let l=cj[a];l(t)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(ve(yn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function Sx(n,e,t){return zM(J({rootComponent:n,platformRef:t?.platformRef},uj(e)))}function uj(n){return{appProviders:[...mj,...n?.providers??[]],platformProviders:pj}}function dj(){bw.makeCurrent()}function hj(){return new po}function fj(){return F1(document),document}var pj=[{provide:Vi,useValue:dw},{provide:k0,useValue:dj,multi:!0},{provide:yn,useFactory:fj,deps:[]}];var mj=[{provide:tm,useValue:"root"},{provide:po,useFactory:hj,deps:[]},{provide:Ew,useClass:sj,multi:!0,deps:[yn,lt,Vi]},{provide:Ew,useClass:lj,multi:!0,deps:[yn]},Vm,Cx,Ex,{provide:ps,useExisting:Vm},{provide:bl,useClass:XU,deps:[]},[]];var Dx=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(ve(yn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var He="primary",Bd=Symbol("RouteTitle"),xw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ml(n){return new xw(n)}function _j(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],l=n[o];if(a[0]===":")r[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function vj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Nr(n[t],e[t]))return!1;return!0}function Nr(n,e){let t=n?Pw(n):void 0,i=e?Pw(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!Vx(n[r],e[r]))return!1;return!0}function Pw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Vx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function Bx(n){return n.length>0?n[n.length-1]:null}function Ds(n){return Wv(n)?n:Fa(n)?At(Promise.resolve(n)):De(n)}var yj={exact:jx,subset:zx},Ux={exact:wj,subset:bj,ignored:()=>!0};function Mx(n,e,t){return yj[t.paths](n.root,e.root,t.matrixParams)&&Ux[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function wj(n,e){return Nr(n,e)}function jx(n,e,t){if(!Ua(n.segments,e.segments)||!zm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!jx(n.children[i],e.children[i],t))return!1;return!0}function bj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Vx(n[t],e[t]))}function zx(n,e,t){return $x(n,e,e.segments,t)}function $x(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Ua(r,t)||e.hasChildren()||!zm(r,t,i))}else if(n.segments.length===t.length){if(!Ua(n.segments,t)||!zm(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!zx(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ua(n.segments,r)||!zm(n.segments,r,i)||!n.children[He]?!1:$x(n.children[He],e,o,i)}}function zm(n,e,t){return e.every((i,r)=>Ux[t](n[r].parameters,i.parameters))}var xo=class{constructor(e=new yt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ml(this.queryParams),this._queryParamMap}toString(){return Ij.serialize(this)}},yt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $m(this)}},Ba=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ml(this.parameters),this._parameterMap}toString(){return qx(this)}};function Ej(n,e){return Ua(n,e)&&n.every((t,i)=>Nr(t.parameters,e[i].parameters))}function Ua(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function Cj(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===He&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==He&&(t=t.concat(e(r,i)))}),t}var Ud=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>new xl,providedIn:"root"})}}return n})(),xl=class{parse(e){let t=new Rw(e);return new xo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Td(e.root,!0)}`,i=Dj(e.queryParams),r=typeof e.fragment=="string"?`#${Tj(e.fragment)}`:"";return`${t}${i}${r}`}},Ij=new xl;function $m(n){return n.segments.map(e=>qx(e)).join("/")}function Td(n,e){if(!n.hasChildren())return $m(n);if(e){let t=n.children[He]?Td(n.children[He],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==He&&i.push(`${r}:${Td(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Cj(n,(i,r)=>r===He?[Td(n.children[He],!1)]:[`${r}:${Td(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[He]!=null?`${$m(n)}/${t[0]}`:`${$m(n)}/(${t.join("//")})`}}function Hx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Um(n){return Hx(n).replace(/%3B/gi,";")}function Tj(n){return encodeURI(n)}function Aw(n){return Hx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hm(n){return decodeURIComponent(n)}function xx(n){return Hm(n.replace(/\+/g,"%20"))}function qx(n){return`${Aw(n.path)}${Sj(n.parameters)}`}function Sj(n){return Object.entries(n).map(([e,t])=>`;${Aw(e)}=${Aw(t)}`).join("")}function Dj(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Um(t)}=${Um(r)}`).join("&"):`${Um(t)}=${Um(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Mj=/^[^\/()?;#]+/;function Tw(n){let e=n.match(Mj);return e?e[0]:""}var xj=/^[^\/()?;=#]+/;function Pj(n){let e=n.match(xj);return e?e[0]:""}var Aj=/^[^=?&#]+/;function Rj(n){let e=n.match(Aj);return e?e[0]:""}var Oj=/^[^&#]+/;function kj(n){let e=n.match(Oj);return e?e[0]:""}var Rw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new yt([],{}):new yt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[He]=new yt(e,t)),i}parseSegment(){let e=Tw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new Ba(Hm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Pj(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Tw(this.remaining);r&&(i=r,this.capture(i))}e[Hm(t)]=Hm(i)}parseQueryParam(e){let t=Rj(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=kj(this.remaining);a&&(i=a,this.capture(i))}let r=xx(t),o=xx(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Tw(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ee(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=He);let a=this.parseChildren();t[o]=Object.keys(a).length===1?a[He]:new yt([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function Gx(n){return n.segments.length>0?new yt([],{[He]:n}):n}function Wx(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=Wx(r);if(i===He&&o.segments.length===0&&o.hasChildren())for(let[a,l]of Object.entries(o.children))e[a]=l;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new yt(n.segments,e);return Nj(t)}function Nj(n){if(n.numberOfChildren===1&&n.children[He]){let e=n.children[He];return new yt(n.segments.concat(e.segments),e.children)}return n}function ja(n){return n instanceof xo}function Lj(n,e,t=null,i=null){let r=Kx(n);return Zx(r,e,t,i)}function Kx(n){let e;function t(o){let a={};for(let u of o.children){let f=t(u);a[u.outlet]=f}let l=new yt(o.url,a);return o===n&&(e=l),l}let i=t(n.root),r=Gx(i);return e??r}function Zx(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Sw(r,r,r,t,i);let o=Fj(e);if(o.toRoot())return Sw(r,r,new yt([],{}),t,i);let a=Vj(o,r,n),l=a.processChildren?Md(a.segmentGroup,a.index,o.commands):Yx(a.segmentGroup,a.index,o.commands);return Sw(r,a.segmentGroup,l,t,i)}function qm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ad(n){return typeof n=="object"&&n!=null&&n.outlets}function Sw(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let a;n===e?a=t:a=Qx(n,e,t);let l=Gx(Wx(a));return new xo(l,o,r)}function Qx(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=Qx(o,e,t)}),new yt(n.segments,i)}var Gm=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&qm(i[0]))throw new ee(4003,!1);let r=i.find(Ad);if(r&&r!==Bx(i))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Fj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Gm(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([u,f])=>{l[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?t=!0:l===".."?e++:l!=""&&r.push(l))}),r):[...r,o]},[]);return new Gm(t,e,i)}var Tl=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function Vj(n,e,t){if(n.isAbsolute)return new Tl(e,!0,0);if(!t)return new Tl(e,!1,NaN);if(t.parent===null)return new Tl(t,!0,0);let i=qm(n.commands[0])?0:1,r=t.segments.length-1+i;return Bj(t,r,n.numberOfDoubleDots)}function Bj(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ee(4005,!1);r=i.segments.length}return new Tl(i,!1,r-o)}function Uj(n){return Ad(n[0])?n[0].outlets:{[He]:n}}function Yx(n,e,t){if(n??=new yt([],{}),n.segments.length===0&&n.hasChildren())return Md(n,e,t);let i=jj(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new yt(n.segments.slice(0,i.pathIndex),{});return o.children[He]=new yt(n.segments.slice(i.pathIndex),n.children),Md(o,0,r)}else return i.match&&r.length===0?new yt(n.segments,{}):i.match&&!n.hasChildren()?Ow(n,e,t):i.match?Md(n,0,r):Ow(n,e,t)}function Md(n,e,t){if(t.length===0)return new yt(n.segments,{});{let i=Uj(t),r={};if(Object.keys(i).some(o=>o!==He)&&n.children[He]&&n.numberOfChildren===1&&n.children[He].segments.length===0){let o=Md(n.children[He],e,t);return new yt(n.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=Yx(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new yt(n.segments,r)}}function jj(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let a=n.segments[r],l=t[i];if(Ad(l))break;let u=`${l}`,f=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!Ax(u,f,a))return o;i+=2}else{if(!Ax(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Ow(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Ad(o)){let u=zj(o.outlets);return new yt(i,u)}if(r===0&&qm(t[0])){let u=n.segments[e];i.push(new Ba(u.path,Px(t[0]))),r++;continue}let a=Ad(o)?o.outlets[He]:`${o}`,l=r<t.length-1?t[r+1]:null;a&&l&&qm(l)?(i.push(new Ba(a,Px(l))),r+=2):(i.push(new Ba(a,{})),r++)}return new yt(i,{})}function zj(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Ow(new yt([],{}),0,i))}),e}function Px(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Ax(n,e,t){return n==t.path&&Nr(e,t.parameters)}var xd="imperative",wn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(wn||{}),Ui=class{constructor(e,t){this.id=e,this.url=t}},Pl=class extends Ui{constructor(e,t,i="imperative",r=null){super(e,t),this.type=wn.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Lr=class extends Ui{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=wn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},wi=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(wi||{}),Wm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Wm||{}),Mo=class extends Ui{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=wn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ts=class extends Ui{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=wn.NavigationSkipped}},Rd=class extends Ui{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=wn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Km=class extends Ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=wn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kw=class extends Ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=wn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nw=class extends Ui{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=wn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lw=class extends Ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=wn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fw=class extends Ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=wn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vw=class{constructor(e){this.route=e,this.type=wn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bw=class{constructor(e){this.route=e,this.type=wn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Uw=class{constructor(e){this.snapshot=e,this.type=wn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jw=class{constructor(e){this.snapshot=e,this.type=wn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zw=class{constructor(e){this.snapshot=e,this.type=wn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$w=class{constructor(e){this.snapshot=e,this.type=wn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zm=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=wn.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Od=class{},Al=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function $j(n,e){return n.providers&&!n._injector&&(n._injector=pm(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ur(n){return n.outlet||He}function Hj(n,e){let t=n.filter(i=>ur(i)===e);return t.push(...n.filter(i=>ur(i)!==e)),t}function jd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Hw=class{get injector(){return jd(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new zd(this.rootInjector),this.attachRef=null}},zd=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Hw(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(ve(jn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=qw(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=qw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Gw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Gw(e,this._root).map(t=>t.value)}};function qw(n,e){if(n===e.value)return e;for(let t of e.children){let i=qw(n,t);if(i)return i}return null}function Gw(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Gw(n,t);if(i.length)return i.unshift(e),i}return[]}var yi=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Il(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ym=class extends Qm{constructor(e,t){super(e),this.snapshot=t,tb(this,e)}toString(){return this.snapshot.toString()}};function Jx(n){let e=qj(n),t=new Wt([new Ba("",{})]),i=new Wt({}),r=new Wt({}),o=new Wt({}),a=new Wt(""),l=new Ss(t,i,o,a,r,He,n,e.root);return l.snapshot=e.root,new Ym(new yi(l,[]),e)}function qj(n){let e={},t={},i={},r="",o=new Sl([],e,i,r,t,He,n,null,{});return new Xm("",new yi(o,[]))}var Ss=class{constructor(e,t,i,r,o,a,l,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ae(f=>f[Bd]))??De(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ae(e=>Ml(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ae(e=>Ml(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jm(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:J(J({},e.params),n.params),data:J(J({},e.data),n.data),resolve:J(J(J(J({},n.data),e.data),r?.data),n._resolvedData)}:i={params:J({},n.params),data:J({},n.data),resolve:J(J({},n.data),n._resolvedData??{})},r&&eP(r)&&(i.resolve[Bd]=r.title),i}var Sl=class{get title(){return this.data?.[Bd]}constructor(e,t,i,r,o,a,l,u,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ml(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ml(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Xm=class extends Qm{constructor(e,t){super(t),this.url=e,tb(this,t)}toString(){return Xx(this._root)}};function tb(n,e){e.value._routerState=n,e.children.forEach(t=>tb(n,t))}function Xx(n){let e=n.children.length>0?` { ${n.children.map(Xx).join(", ")} } `:"";return`${n.value}${e}`}function Dw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Nr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Nr(e.params,t.params)||n.paramsSubject.next(t.params),vj(e.url,t.url)||n.urlSubject.next(t.url),Nr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ww(n,e){let t=Nr(n.params,e.params)&&Ej(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Ww(n.parent,e.parent))}function eP(n){return typeof n.title=="string"||n.title===null}var nb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=He,this.activateEvents=new Ge,this.deactivateEvents=new Ge,this.attachEvents=new Ge,this.detachEvents=new Ge,this.parentContexts=Q(zd),this.location=Q(vs),this.changeDetector=Q(gi),this.inputBinder=Q(ig,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let r=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new Kw(t,l,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Sn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Li]})}}return n})(),Kw=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ss?this.route:e===zd?this.childContexts:this.parent.get(e,t)}},ig=new pe(""),Rx=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=ed([i.queryParams,i.params,i.data]).pipe(Yn(([o,a,l],u)=>(l=J(J(J({},o),a),l),u===0?De(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let a=$M(i.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function Gj(n,e,t){let i=kd(n,e._root,t?t._root:void 0);return new Ym(i,e)}function kd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=Wj(n,e,t);return new yi(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(l=>kd(n,l)),a}}let i=Kj(e.value),r=e.children.map(o=>kd(n,o));return new yi(i,r)}}function Wj(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return kd(n,i,r);return kd(n,i)})}function Kj(n){return new Ss(new Wt(n.url),new Wt(n.params),new Wt(n.queryParams),new Wt(n.fragment),new Wt(n.data),n.outlet,n.component,n)}var Nd=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},tP="ngNavigationCancelingError";function eg(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=ja(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=nP(!1,wi.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function nP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[tP]=!0,t.cancellationCode=e,t}function Zj(n){return iP(n)&&ja(n.url)}function iP(n){return!!n&&n[tP]}var Qj=(n,e,t,i)=>Ae(r=>(new Zw(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Zw=class{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Dw(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Il(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Il(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Il(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Il(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new $w(o.value.snapshot))}),e.children.length&&this.forwardEvent(new jw(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Dw(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),Dw(l.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},tg=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Dl=class{constructor(e,t){this.component=e,this.route=t}};function Yj(n,e,t){let i=n._root,r=e?e._root:null;return Sd(i,r,t,[i.value])}function Jj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ol(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!wD(n)?n:e.get(n):i}function Sd(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Il(e);return n.children.forEach(a=>{Xj(a,o[a.value.outlet],t,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,l])=>Pd(l,t.getContext(a),r)),r}function Xj(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=e3(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new tg(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Sd(n,e,l?l.children:null,i,r):Sd(n,e,t,i,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new Dl(l.outlet.component,a))}else a&&Pd(e,l,r),r.canActivateChecks.push(new tg(i)),o.component?Sd(n,null,l?l.children:null,i,r):Sd(n,null,t,i,r);return r}function e3(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ua(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ua(n.url,e.url)||!Nr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ww(n,e)||!Nr(n.queryParams,e.queryParams);case"paramsChange":default:return!Ww(n,e)}}function Pd(n,e,t){let i=Il(n),r=n.value;Object.entries(i).forEach(([o,a])=>{r.component?e?Pd(a,e.children.getContext(o),t):Pd(a,null,t):Pd(a,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Dl(e.outlet.component,r)):t.canDeactivateChecks.push(new Dl(null,r)):t.canDeactivateChecks.push(new Dl(null,r))}function $d(n){return typeof n=="function"}function t3(n){return typeof n=="boolean"}function n3(n){return n&&$d(n.canLoad)}function i3(n){return n&&$d(n.canActivate)}function r3(n){return n&&$d(n.canActivateChild)}function o3(n){return n&&$d(n.canDeactivate)}function s3(n){return n&&$d(n.canMatch)}function rP(n){return n instanceof Xi||n?.name==="EmptyError"}var jm=Symbol("INITIAL_VALUE");function Rl(){return Yn(n=>ed(n.map(e=>e.pipe(ho(1),Xv(jm)))).pipe(Ae(e=>{for(let t of e)if(t!==!0){if(t===jm)return jm;if(t===!1||a3(t))return t}return!0}),Qn(e=>e!==jm),ho(1)))}function a3(n){return ja(n)||n instanceof Nd}function c3(n,e){return Yt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?De(ke(J({},t),{guardsResult:!0})):l3(a,i,r,n).pipe(Yt(l=>l&&t3(l)?u3(i,o,n,e):De(l)),Ae(l=>ke(J({},t),{guardsResult:l})))})}function l3(n,e,t,i){return At(n).pipe(Yt(r=>m3(r.component,r.route,t,e,i)),Cr(r=>r!==!0,!0))}function u3(n,e,t,i){return At(e).pipe(uo(r=>tl(h3(r.route.parent,i),d3(r.route,i),p3(n,r.path,t),f3(n,r.route,t))),Cr(r=>r!==!0,!0))}function d3(n,e){return n!==null&&e&&e(new zw(n)),De(!0)}function h3(n,e){return n!==null&&e&&e(new Uw(n)),De(!0)}function f3(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return De(!0);let r=i.map(o=>mp(()=>{let a=jd(e)??t,l=Ol(o,a),u=i3(l)?l.canActivate(e,n):Ni(a,()=>l(e,n));return Ds(u).pipe(Cr())}));return De(r).pipe(Rl())}function p3(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>Jj(a)).filter(a=>a!==null).map(a=>mp(()=>{let l=a.guards.map(u=>{let f=jd(a.node)??t,m=Ol(u,f),v=r3(m)?m.canActivateChild(i,n):Ni(f,()=>m(i,n));return Ds(v).pipe(Cr())});return De(l).pipe(Rl())}));return De(o).pipe(Rl())}function m3(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return De(!0);let a=o.map(l=>{let u=jd(e)??r,f=Ol(l,u),m=o3(f)?f.canDeactivate(n,e,t,i):Ni(u,()=>f(n,e,t,i));return Ds(m).pipe(Cr())});return De(a).pipe(Rl())}function g3(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return De(!0);let o=r.map(a=>{let l=Ol(a,n),u=n3(l)?l.canLoad(e,t):Ni(n,()=>l(e,t));return Ds(u)});return De(o).pipe(Rl(),oP(i))}function oP(n){return Bv(Jt(e=>{if(typeof e!="boolean")throw eg(n,e)}),Ae(e=>e===!0))}function _3(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return De(!0);let o=r.map(a=>{let l=Ol(a,n),u=s3(l)?l.canMatch(e,t):Ni(n,()=>l(e,t));return Ds(u)});return De(o).pipe(Rl(),oP(i))}var Ld=class{constructor(e){this.segmentGroup=e||null}},Fd=class extends Error{constructor(e){super(),this.urlTree=e}};function Cl(n){return Xc(new Ld(n))}function v3(n){return Xc(new ee(4e3,!1))}function y3(n){return Xc(nP(!1,wi.GuardRejected))}var Qw=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return De(i);if(r.numberOfChildren>1||!r.children[He])return v3(`${e.redirectTo}`);r=r.children[He]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let l=t,{queryParams:u,fragment:f,routeConfig:m,url:v,outlet:E,params:b,data:x,title:k}=r,N=Ni(o,()=>l({params:b,data:x,queryParams:u,fragment:f,routeConfig:m,url:v,outlet:E,title:k}));if(N instanceof xo)throw new Fd(N);t=N}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Fd(a);return a}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new xo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);i[r]=t[l]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),a={};return Object.entries(t.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(e,u,i,r)}),new yt(o,a)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new ee(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Yw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function w3(n,e,t,i,r){let o=sP(n,e,t);return o.matched?(i=$j(e,i),_3(i,e,t,r).pipe(Ae(a=>a===!0?o:J({},Yw)))):De(o)}function sP(n,e,t){if(e.path==="**")return b3(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?J({},Yw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||_j)(t,n,e);if(!r)return J({},Yw);let o={};Object.entries(r.posParams??{}).forEach(([l,u])=>{o[l]=u.path});let a=r.consumed.length>0?J(J({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function b3(n){return{matched:!0,parameters:n.length>0?Bx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Ox(n,e,t,i){return t.length>0&&I3(n,t,i)?{segmentGroup:new yt(e,C3(i,new yt(t,n.children))),slicedSegments:[]}:t.length===0&&T3(n,t,i)?{segmentGroup:new yt(n.segments,E3(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new yt(n.segments,n.children),slicedSegments:t}}function E3(n,e,t,i){let r={};for(let o of t)if(rg(n,e,o)&&!i[ur(o)]){let a=new yt([],{});r[ur(o)]=a}return J(J({},i),r)}function C3(n,e){let t={};t[He]=e;for(let i of n)if(i.path===""&&ur(i)!==He){let r=new yt([],{});t[ur(i)]=r}return t}function I3(n,e,t){return t.some(i=>rg(n,e,i)&&ur(i)!==He)}function T3(n,e,t){return t.some(i=>rg(n,e,i))}function rg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function S3(n,e,t){return e.length===0&&!n.children[t]}var Jw=class{};function D3(n,e,t,i,r,o,a="emptyOnly"){return new Xw(n,e,t,i,r,a,o).recognize()}var M3=31,Xw=class{constructor(e,t,i,r,o,a,l){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new Qw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ox(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ae(({children:t,rootSnapshot:i})=>{let r=new yi(i,t),o=new Xm("",r),a=Lj(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new Sl([],Object.freeze({}),Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),He,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,He,t).pipe(Ae(i=>({children:i,rootSnapshot:t})),ss(i=>{if(i instanceof Fd)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ld?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(Ae(a=>a instanceof yi?[a]:[]))}processChildren(e,t,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return At(o).pipe(uo(a=>{let l=i.children[a],u=Hj(t,a);return this.processSegmentGroup(e,u,l,a,r)}),Jv((a,l)=>(a.push(...l),a)),as(null),Yv(),Yt(a=>{if(a===null)return Cl(i);let l=aP(a);return x3(l),De(l)}))}processSegment(e,t,i,r,o,a,l){return At(t).pipe(uo(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,o,a,l).pipe(ss(f=>{if(f instanceof Ld)return De(null);throw f}))),Cr(u=>!!u),ss(u=>{if(rP(u))return S3(i,r,o)?De(new Jw):Cl(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,o,a,l,u){return ur(i)!==a&&(a===He||!rg(r,o,i))?Cl(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,a,u):Cl(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,a,l){let{matched:u,parameters:f,consumedSegments:m,positionalParamSegments:v,remainingSegments:E}=sP(t,r,o);if(!u)return Cl(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>M3&&(this.allowRedirects=!1));let b=new Sl(o,f,Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,kx(r),ur(r),r.component??r._loadedComponent??null,r,Nx(r)),x=Jm(b,l,this.paramsInheritanceStrategy);b.params=Object.freeze(x.params),b.data=Object.freeze(x.data);let k=this.applyRedirects.applyRedirectCommands(m,r.redirectTo,v,b,e);return this.applyRedirects.lineralizeSegments(r,k).pipe(Yt(N=>this.processSegment(e,i,t,N.concat(E),a,!1,l)))}matchSegmentAgainstRoute(e,t,i,r,o,a){let l=w3(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),l.pipe(Yn(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Yn(({routes:f})=>{let m=i._loadedInjector??e,{parameters:v,consumedSegments:E,remainingSegments:b}=u,x=new Sl(E,v,Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,kx(i),ur(i),i.component??i._loadedComponent??null,i,Nx(i)),k=Jm(x,a,this.paramsInheritanceStrategy);x.params=Object.freeze(k.params),x.data=Object.freeze(k.data);let{segmentGroup:N,slicedSegments:G}=Ox(t,E,b,f);if(G.length===0&&N.hasChildren())return this.processChildren(m,f,N,x).pipe(Ae(X=>new yi(x,X)));if(f.length===0&&G.length===0)return De(new yi(x,[]));let ne=ur(i)===o;return this.processSegment(m,f,N,G,ne?He:o,!0,x).pipe(Ae(X=>new yi(x,X instanceof yi?[X]:[])))}))):Cl(t)))}getChildConfig(e,t,i){return t.children?De({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?De({routes:t._loadedRoutes,injector:t._loadedInjector}):g3(e,t,i,this.urlSerializer).pipe(Yt(r=>r?this.configLoader.loadChildren(e,t).pipe(Jt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):y3(t))):De({routes:[],injector:e})}};function x3(n){n.sort((e,t)=>e.value.outlet===He?-1:t.value.outlet===He?1:e.value.outlet.localeCompare(t.value.outlet))}function P3(n){let e=n.value.routeConfig;return e&&e.path===""}function aP(n){let e=[],t=new Set;for(let i of n){if(!P3(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=aP(i.children);e.push(new yi(i.value,r))}return e.filter(i=>!t.has(i))}function kx(n){return n.data||{}}function Nx(n){return n.resolve||{}}function A3(n,e,t,i,r,o){return Yt(a=>D3(n,e,t,i,a.extractedUrl,r,o).pipe(Ae(({state:l,tree:u})=>ke(J({},a),{targetSnapshot:l,urlAfterRedirects:u}))))}function R3(n,e){return Yt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return De(t);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of cP(u))a.add(f);let l=0;return At(a).pipe(uo(u=>o.has(u)?O3(u,i,n,e):(u.data=Jm(u,u.parent,n).resolve,De(void 0))),Jt(()=>l++),nl(1),Yt(u=>l===a.size?De(t):hi))})}function cP(n){let e=n.children.map(t=>cP(t)).flat();return[n,...e]}function O3(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!eP(r)&&(o[Bd]=r.title),k3(o,n,e,i).pipe(Ae(a=>(n._resolvedData=a,n.data=Jm(n,n.parent,t).resolve,null)))}function k3(n,e,t,i){let r=Pw(n);if(r.length===0)return De({});let o={};return At(r).pipe(Yt(a=>N3(n[a],e,t,i).pipe(Cr(),Jt(l=>{if(l instanceof Nd)throw eg(new xl,l);o[a]=l}))),nl(1),Qv(o),ss(a=>rP(a)?hi:Xc(a)))}function N3(n,e,t,i){let r=jd(e)??i,o=Ol(n,r),a=o.resolve?o.resolve(e,t):Ni(r,()=>o(e,t));return Ds(a)}function Mw(n){return Yn(e=>{let t=n(e);return t?At(t).pipe(Ae(()=>e)):De(e)})}var lP=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===He);return i}getResolvedTitleForRoute(t){return t.data[Bd]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(L3),providedIn:"root"})}}return n})(),L3=(()=>{class n extends lP{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(ve(Dx))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hd=new pe("",{providedIn:"root",factory:()=>({})}),F3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ht({type:n,selectors:[["ng-component"]],standalone:!0,features:[ft],decls:1,vars:0,template:function(i,r){i&1&&te(0,"router-outlet")},dependencies:[nb],encapsulation:2})}}return n})();function ib(n){let e=n.children&&n.children.map(ib),t=e?ke(J({},n),{children:e}):J({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==He&&(t.component=F3),t}var Vd=new pe(""),rb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Q(vm)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return De(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Ds(t.loadComponent()).pipe(Ae(uP),Jt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),_a(()=>{this.componentLoaders.delete(t)})),r=new Zc(i,()=>new _n).pipe(Kc());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return De({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=V3(i,this.compiler,t,this.onLoadEndListener).pipe(_a(()=>{this.childrenLoaders.delete(i)})),a=new Zc(o,()=>new _n).pipe(Kc());return this.childrenLoaders.set(i,a),a}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function V3(n,e,t,i){return Ds(n.loadChildren()).pipe(Ae(uP),Yt(r=>r instanceof ad||Array.isArray(r)?De(r):At(e.compileModuleAsync(r))),Ae(r=>{i&&i(n);let o,a,l=!1;return Array.isArray(r)?(a=r,l=!0):(o=r.create(t).injector,a=o.get(Vd,[],{optional:!0,self:!0}).flat()),{routes:a.map(ib),injector:o}}))}function B3(n){return n&&typeof n=="object"&&"default"in n}function uP(n){return B3(n)?n.default:n}var ob=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(U3),providedIn:"root"})}}return n})(),U3=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dP=new pe(""),hP=new pe("");function j3(n,e,t){let i=n.get(hP),r=n.get(yn);return n.get(lt).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),l=r.startViewTransition(()=>(o(),z3(n))),{onViewTransitionCreated:u}=i;return u&&Ni(n,()=>u({transition:l,from:e,to:t})),a})}function z3(n){return new Promise(e=>{Q0({read:()=>setTimeout(e)},{injector:n})})}var $3=new pe(""),sb=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _n,this.transitionAbortSubject=new _n,this.configLoader=Q(rb),this.environmentInjector=Q(jn),this.urlSerializer=Q(Ud),this.rootContexts=Q(zd),this.location=Q(El),this.inputBindingEnabled=Q(ig,{optional:!0})!==null,this.titleStrategy=Q(lP),this.options=Q(Hd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Q(ob),this.createViewTransition=Q(dP,{optional:!0}),this.navigationErrorHandler=Q($3,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>De(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Vw(r)),i=r=>this.events.next(new Bw(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(ke(J(J({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new Wt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:xd,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qn(o=>o.id!==0),Ae(o=>ke(J({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Yn(o=>{let a=!1,l=!1;return De(o).pipe(Yn(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",wi.SupersededByNewNavigation),hi;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ke(J({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!f&&m!=="reload"){let v="";return this.events.next(new Ts(u.id,this.urlSerializer.serialize(u.rawUrl),v,Wm.IgnoredSameUrlNavigation)),u.resolve(!1),hi}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return De(u).pipe(Yn(v=>{let E=this.transitions?.getValue();return this.events.next(new Pl(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),E!==this.transitions?.getValue()?hi:Promise.resolve(v)}),A3(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Jt(v=>{o.targetSnapshot=v.targetSnapshot,o.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation=ke(J({},this.currentNavigation),{finalUrl:v.urlAfterRedirects});let E=new Km(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(E)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:v,extractedUrl:E,source:b,restoredState:x,extras:k}=u,N=new Pl(v,this.urlSerializer.serialize(E),b,x);this.events.next(N);let G=Jx(this.rootComponentType).snapshot;return this.currentTransition=o=ke(J({},u),{targetSnapshot:G,urlAfterRedirects:E,extras:ke(J({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,De(o)}else{let v="";return this.events.next(new Ts(u.id,this.urlSerializer.serialize(u.extractedUrl),v,Wm.IgnoredByUrlHandlingStrategy)),u.resolve(!1),hi}}),Jt(u=>{let f=new kw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),Ae(u=>(this.currentTransition=o=ke(J({},u),{guards:Yj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),c3(this.environmentInjector,u=>this.events.next(u)),Jt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw eg(this.urlSerializer,u.guardsResult);let f=new Nw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(f)}),Qn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",wi.GuardRejected),!1)),Mw(u=>{if(u.guards.canActivateChecks.length)return De(u).pipe(Jt(f=>{let m=new Lw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),Yn(f=>{let m=!1;return De(f).pipe(R3(this.paramsInheritanceStrategy,this.environmentInjector),Jt({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(f,"",wi.NoDataFromResolver)}}))}),Jt(f=>{let m=new Fw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),Mw(u=>{let f=m=>{let v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe(Jt(E=>{m.component=E}),Ae(()=>{})));for(let E of m.children)v.push(...f(E));return v};return ed(f(u.targetSnapshot.root)).pipe(as(null),ho(1))}),Mw(()=>this.afterPreactivation()),Yn(()=>{let{currentSnapshot:u,targetSnapshot:f}=o,m=this.createViewTransition?.(this.environmentInjector,u.root,f.root);return m?At(m).pipe(Ae(()=>o)):De(o)}),Ae(u=>{let f=Gj(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ke(J({},u),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Jt(()=>{this.events.next(new Od)}),Qj(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ho(1),Jt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),ey(this.transitionAbortSubject.pipe(Jt(u=>{throw u}))),_a(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",wi.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ss(u=>{if(l=!0,iP(u))this.events.next(new Mo(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),Zj(u)?this.events.next(new Al(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let f=new Rd(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let m=Ni(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(m instanceof Nd){let{message:v,cancellationCode:E}=eg(this.urlSerializer,m);this.events.next(new Mo(o.id,this.urlSerializer.serialize(o.extractedUrl),v,E)),this.events.next(new Al(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(f);let v=t.errorHandler(u);o.resolve(!!v)}}catch(m){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(m)}}return hi}))}))}cancelNavigationTransition(t,i,r){let o=new Mo(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function H3(n){return n!==xd}var q3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(G3),providedIn:"root"})}}return n})(),eb=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},G3=(()=>{class n extends eb{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(W3),providedIn:"root"})}}return n})(),W3=(()=>{class n extends fP{constructor(){super(...arguments),this.location=Q(El),this.urlSerializer=Q(Ud),this.options=Q(Hd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Q(ob),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new xo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Jx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Pl)this.stateMemento=this.createStateMemento();else if(t instanceof Ts)this.rawUrlTree=i.initialUrl;else if(t instanceof Km){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Od?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Mo&&(t.code===wi.GuardRejected||t.code===wi.NoDataFromResolver)?this.restoreHistory(i):t instanceof Rd?this.restoreHistory(i,!0):t instanceof Lr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof xo?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,a=J(J({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",a)}else{let o=J(J({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dd=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Dd||{});function pP(n,e){n.events.pipe(Qn(t=>t instanceof Lr||t instanceof Mo||t instanceof Rd||t instanceof Ts),Ae(t=>t instanceof Lr||t instanceof Ts?Dd.COMPLETE:(t instanceof Mo?t.code===wi.Redirect||t.code===wi.SupersededByNewNavigation:!1)?Dd.REDIRECTING:Dd.FAILED),Qn(t=>t!==Dd.REDIRECTING),ho(1)).subscribe(()=>{e()})}function K3(n){throw n}var Z3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Q3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ut=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Q(gm),this.stateManager=Q(fP),this.options=Q(Hd,{optional:!0})||{},this.pendingTasks=Q(_s),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Q(sb),this.urlSerializer=Q(Ud),this.location=Q(El),this.urlHandlingStrategy=Q(ob),this._events=new _n,this.errorHandler=this.options.errorHandler||K3,this.navigated=!1,this.routeReuseStrategy=Q(q3),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Q(Vd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Q(ig,{optional:!0}),this.eventsSubscription=new $t,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Mo&&i.code!==wi.Redirect&&i.code!==wi.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Lr)this.navigated=!0;else if(i instanceof Al){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=J({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||H3(r.source)},a);this.scheduleNavigation(l,xd,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}J3(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let u=J({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(t);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ib),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,f=u?this.currentUrlTree.fragment:a,m=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":m=J(J({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let v;try{let E=r?r.snapshot:this.routerState.snapshot.root;v=Kx(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),v=this.currentUrlTree.root}return Zx(v,t,m,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=ja(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,xd,null,i)}navigate(t,i={skipLocationChange:!1}){return Y3(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=J({},Z3):i===!1?r=J({},Q3):r=i,ja(t))return Mx(this.currentUrlTree,t,r);let o=this.parseUrl(t);return Mx(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let l,u,f;a?(l=a.resolve,u=a.reject,f=a.promise):f=new Promise((v,E)=>{l=v,u=E});let m=this.pendingTasks.add();return pP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(v=>Promise.reject(v))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Y3(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function J3(n){return!(n instanceof Od)&&!(n instanceof Al)}var mP=(()=>{class n{constructor(t,i,r,o,a,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.onChanges=new _n,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(f=>{f instanceof Lr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ja(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||i||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:U1(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ja(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(se(ut),se(Ss),x0("tabindex"),se(ka),se(sr),se(So))}}static{this.\u0275dir=Sn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&re("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&kr("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Va],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Va],replaceUrl:[2,"replaceUrl","replaceUrl",Va],routerLink:"routerLink"},standalone:!0,features:[Z0,Li]})}}return n})();var ng=class{};var X3=(()=>{class n{constructor(t,i,r,o,a){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Qn(t=>t instanceof Lr),uo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=pm(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(l,o.children??o._loadedRoutes))}return At(r).pipe(el())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=De(null);let o=r.pipe(Yt(a=>a===null?De(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return At([o,a]).pipe(el())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(ve(ut),ve(vm),ve(jn),ve(ng),ve(rb))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gP=new pe(""),e4=(()=>{class n{constructor(t,i,r,o,a={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Pl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Lr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ts&&t.code===Wm.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zm&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zm(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){X1()}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function _P(n,...e){return rr([{provide:Vd,multi:!0,useValue:n},[],{provide:Ss,useFactory:vP,deps:[ut]},{provide:md,multi:!0,useFactory:yP},e.map(t=>t.\u0275providers)])}function vP(n){return n.routerState.root}function qd(n,e){return{\u0275kind:n,\u0275providers:e}}function yP(){let n=Q(Tn);return e=>{let t=n.get(bs);if(e!==t.components[0])return;let i=n.get(ut),r=n.get(wP);n.get(ab)===1&&i.initialNavigation(),n.get(bP,null,Ze.Optional)?.setUpPreloading(),n.get(gP,null,Ze.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var wP=new pe("",{factory:()=>new _n}),ab=new pe("",{providedIn:"root",factory:()=>1});function t4(){return qd(2,[{provide:ab,useValue:0},{provide:_m,multi:!0,deps:[Tn],useFactory:e=>{let t=e.get(JM,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(ut),o=e.get(wP);pP(r,()=>{i(!0)}),e.get(sb).afterPreactivation=()=>(i(!0),o.closed?De(void 0):o),r.initialNavigation()}))}}])}function n4(){return qd(3,[{provide:_m,multi:!0,useFactory:()=>{let e=Q(ut);return()=>{e.setUpLocationChangeListener()}}},{provide:ab,useValue:2}])}var bP=new pe("");function i4(n){return qd(0,[{provide:bP,useExisting:X3},{provide:ng,useExisting:n}])}function r4(){return qd(8,[Rx,{provide:ig,useExisting:Rx}])}function o4(n){let e=[{provide:dP,useValue:j3},{provide:hP,useValue:J({skipNextTransition:!!n?.skipInitialTransition},n)}];return qd(9,e)}var Lx=new pe("ROUTER_FORROOT_GUARD"),s4=[El,{provide:Ud,useClass:xl},ut,zd,{provide:Ss,useFactory:vP,deps:[ut]},rb,[]],EP=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[s4,[],{provide:Vd,multi:!0,useValue:t},{provide:Lx,useFactory:u4,deps:[[ut,new xn,new f0]]},{provide:Hd,useValue:i||{}},i?.useHash?c4():l4(),a4(),i?.preloadingStrategy?i4(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?d4(i):[],i?.bindToComponentInputs?r4().\u0275providers:[],i?.enableViewTransitions?o4().\u0275providers:[],h4()]}}static forChild(t){return{ngModule:n,providers:[{provide:Vd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(ve(Lx,8))}}static{this.\u0275mod=Ar({type:n})}static{this.\u0275inj=Pr({})}}return n})();function a4(){return{provide:gP,useFactory:()=>{let n=Q(cx),e=Q(lt),t=Q(Hd),i=Q(sb),r=Q(Ud);return t.scrollOffset&&n.setOffset(t.scrollOffset),new e4(r,i,n,e,t)}}}function c4(){return{provide:So,useClass:ex}}function l4(){return{provide:So,useClass:uw}}function u4(n){return"guarded"}function d4(n){return[n.initialNavigation==="disabled"?n4().\u0275providers:[],n.initialNavigation==="enabledBlocking"?t4().\u0275providers:[]]}var Fx=new pe("");function h4(){return[{provide:Fx,useFactory:yP},{provide:md,multi:!0,useExisting:Fx}]}var qe=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(qe||{}),Vr="*";function cb(n,e){return{type:qe.Trigger,name:n,definitions:e,options:{}}}function Wd(n,e=null){return{type:qe.Animate,styles:e,timings:n}}function CP(n,e=null){return{type:qe.Sequence,steps:n,options:e}}function Br(n){return{type:qe.Style,styles:n,offset:null}}function Kd(n,e,t=null){return{type:qe.Transition,expr:n,animation:e,options:t}}var Ms=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Gd=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==o&&this._onFinish()}),a.onDestroy(()=>{++i==o&&this._onDestroy()}),a.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((a,l)=>Math.max(a,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},og="!";function IP(n){return new ee(3e3,!1)}function f4(){return new ee(3100,!1)}function p4(){return new ee(3101,!1)}function m4(n){return new ee(3001,!1)}function g4(n){return new ee(3003,!1)}function _4(n){return new ee(3004,!1)}function v4(n,e){return new ee(3005,!1)}function y4(){return new ee(3006,!1)}function w4(){return new ee(3007,!1)}function b4(n,e){return new ee(3008,!1)}function E4(n){return new ee(3002,!1)}function C4(n,e,t,i,r){return new ee(3010,!1)}function I4(){return new ee(3011,!1)}function T4(){return new ee(3012,!1)}function S4(){return new ee(3200,!1)}function D4(){return new ee(3202,!1)}function M4(){return new ee(3013,!1)}function x4(n){return new ee(3014,!1)}function P4(n){return new ee(3015,!1)}function A4(n){return new ee(3016,!1)}function R4(n,e){return new ee(3404,!1)}function O4(n){return new ee(3502,!1)}function k4(n){return new ee(3503,!1)}function N4(){return new ee(3300,!1)}function L4(n){return new ee(3504,!1)}function F4(n){return new ee(3301,!1)}function V4(n,e){return new ee(3302,!1)}function B4(n){return new ee(3303,!1)}function U4(n,e){return new ee(3400,!1)}function j4(n){return new ee(3401,!1)}function z4(n){return new ee(3402,!1)}function $4(n,e){return new ee(3505,!1)}function xs(n){switch(n.length){case 0:return new Ms;case 1:return n[0];default:return new Gd(n)}}function VP(n,e,t=new Map,i=new Map){let r=[],o=[],a=-1,l=null;if(e.forEach(u=>{let f=u.get("offset"),m=f==a,v=m&&l||new Map;u.forEach((E,b)=>{let x=b,k=E;if(b!=="offset")switch(x=n.normalizePropertyName(x,r),k){case og:k=t.get(b);break;case Vr:k=i.get(b);break;default:k=n.normalizeStyleValue(b,x,k,r);break}v.set(x,k)}),m||o.push(v),l=v,a=f}),r.length)throw O4(r);return o}function Ab(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&lb(t,"start",n)));break;case"done":n.onDone(()=>i(t&&lb(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&lb(t,"destroy",n)));break}}function lb(n,e,t){let i=t.totalTime,r=!!t.disabled,o=Rb(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),a=n._data;return a!=null&&(o._data=a),o}function Rb(n,e,t,i,r="",o=0,a){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!a}}function Ei(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function TP(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var H4=typeof document>"u"?null:document.documentElement;function Ob(n){let e=n.parentNode||n.host||null;return e===H4?null:e}function q4(n){return n.substring(1,6)=="ebkit"}var za=null,SP=!1;function G4(n){za||(za=W4()||{},SP=za.style?"WebkitAppearance"in za.style:!1);let e=!0;return za.style&&!q4(n)&&(e=n in za.style,!e&&SP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in za.style)),e}function W4(){return typeof document<"u"?document.body:null}function BP(n,e){for(;e;){if(e===n)return!0;e=Ob(e)}return!1}function UP(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var kb=(()=>{class n{validateStyleProperty(t){return G4(t)}containsElement(t,i){return BP(t,i)}getParentElement(t){return Ob(t)}query(t,i,r){return UP(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,a,l=[],u){return new Ms(r,o)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),qa=class{static{this.NOOP=new kb}},Ga=class{};var K4=1e3,jP="{{",Z4="}}",zP="ng-enter",mb="ng-leave",sg="ng-trigger",dg=".ng-trigger",DP="ng-animating",gb=".ng-animating";function Po(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:_b(parseFloat(e[1]),e[2])}function _b(n,e){switch(e){case"s":return n*K4;default:return n}}function hg(n,e,t){return n.hasOwnProperty("duration")?n:Q4(n,e,t)}function Q4(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,a="";if(typeof n=="string"){let l=n.match(i);if(l===null)return e.push(IP(n)),{duration:0,delay:0,easing:""};r=_b(parseFloat(l[1]),l[2]);let u=l[3];u!=null&&(o=_b(parseFloat(u),l[4]));let f=l[5];f&&(a=f)}else r=n;if(!t){let l=!1,u=e.length;r<0&&(e.push(f4()),l=!0),o<0&&(e.push(p4()),l=!0),l&&e.splice(u,0,IP(n))}return{duration:r,delay:o,easing:a}}function Y4(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Ur(n,e,t){e.forEach((i,r)=>{let o=Nb(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Ha(n,e){e.forEach((t,i)=>{let r=Nb(i);n.style[r]=""})}function Zd(n){return Array.isArray(n)?n.length==1?n[0]:CP(n):n}function J4(n,e,t){let i=e.params||{},r=$P(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(m4(o))})}var vb=new RegExp(`${jP}\\s*(.+?)\\s*${Z4}`,"g");function $P(n){let e=[];if(typeof n=="string"){let t;for(;t=vb.exec(n);)e.push(t[1]);vb.lastIndex=0}return e}function Yd(n,e,t){let i=`${n}`,r=i.replace(vb,(o,a)=>{let l=e[a];return l==null&&(t.push(g4(a)),l=""),l.toString()});return r==i?n:r}var X4=/-+([a-z0-9])/g;function Nb(n){return n.replace(X4,(...e)=>e[1].toUpperCase())}function e6(n,e){return n===0||e===0}function t6(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,a)=>{i.has(a)||r.push(a),i.set(a,o)}),r.length)for(let o=1;o<e.length;o++){let a=e[o];r.forEach(l=>a.set(l,Lb(n,l)))}}return e}function bi(n,e,t){switch(e.type){case qe.Trigger:return n.visitTrigger(e,t);case qe.State:return n.visitState(e,t);case qe.Transition:return n.visitTransition(e,t);case qe.Sequence:return n.visitSequence(e,t);case qe.Group:return n.visitGroup(e,t);case qe.Animate:return n.visitAnimate(e,t);case qe.Keyframes:return n.visitKeyframes(e,t);case qe.Style:return n.visitStyle(e,t);case qe.Reference:return n.visitReference(e,t);case qe.AnimateChild:return n.visitAnimateChild(e,t);case qe.AnimateRef:return n.visitAnimateRef(e,t);case qe.Query:return n.visitQuery(e,t);case qe.Stagger:return n.visitStagger(e,t);default:throw _4(e.type)}}function Lb(n,e){return window.getComputedStyle(n)[e]}var n6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),fg=class extends Ga{normalizePropertyName(e,t){return Nb(e)}normalizeStyleValue(e,t,i,r){let o="",a=i.toString().trim();if(n6.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let l=i.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&l[1].length==0&&r.push(v4(e,i))}return a+o}};var pg="*";function i6(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>r6(i,t,e)):t.push(n),t}function r6(n,e,t){if(n[0]==":"){let u=o6(n,t);if(typeof u=="function"){e.push(u);return}n=u}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(P4(n)),e;let r=i[1],o=i[2],a=i[3];e.push(MP(r,a));let l=r==pg&&a==pg;o[0]=="<"&&!l&&e.push(MP(a,r))}function o6(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(A4(n)),"* => *"}}var ag=new Set(["true","1"]),cg=new Set(["false","0"]);function MP(n,e){let t=ag.has(n)||cg.has(n),i=ag.has(e)||cg.has(e);return(r,o)=>{let a=n==pg||n==r,l=e==pg||e==o;return!a&&t&&typeof r=="boolean"&&(a=r?ag.has(n):cg.has(n)),!l&&i&&typeof o=="boolean"&&(l=o?ag.has(e):cg.has(e)),a&&l}}var HP=":self",s6=new RegExp(`s*${HP}s*,?`,"g");function qP(n,e,t,i){return new yb(n).build(e,t,i)}var xP="",yb=class{constructor(e){this._driver=e}build(e,t,i){let r=new wb(t);return this._resetContextStyleTimingState(r),bi(this,Zd(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=xP,e.collectedStyles=new Map,e.collectedStyles.set(xP,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],a=[];return e.name.charAt(0)=="@"&&t.errors.push(y4()),e.definitions.forEach(l=>{if(this._resetContextStyleTimingState(t),l.type==qe.State){let u=l,f=u.name;f.toString().split(/\s*,\s*/).forEach(m=>{u.name=m,o.push(this.visitState(u,t))}),u.name=f}else if(l.type==qe.Transition){let u=this.visitTransition(l,t);i+=u.queryCount,r+=u.depCount,a.push(u)}else t.errors.push(w4())}),{type:qe.Trigger,name:e.name,states:o,transitions:a,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,a=r||{};i.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{$P(u).forEach(f=>{a.hasOwnProperty(f)||o.add(f)})})}),o.size&&t.errors.push(b4(e.name,[...o.values()]))}return{type:qe.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=bi(this,Zd(e.animation),t),r=i6(e.expr,t.errors);return{type:qe.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:$a(e.options)}}visitSequence(e,t){return{type:qe.Sequence,steps:e.steps.map(i=>bi(this,i,t)),options:$a(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(a=>{t.currentTime=i;let l=bi(this,a,t);return r=Math.max(r,t.currentTime),l});return t.currentTime=r,{type:qe.Group,steps:o,options:$a(e.options)}}visitAnimate(e,t){let i=u6(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Br({});if(o.type==qe.Keyframes)r=this.visitKeyframes(o,t);else{let a=e.styles,l=!1;if(!a){l=!0;let f={};i.easing&&(f.easing=i.easing),a=Br(f)}t.currentTime+=i.duration+i.delay;let u=this.visitStyle(a,t);u.isEmptyStep=l,r=u}return t.currentAnimateTimings=null,{type:qe.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let l of r)typeof l=="string"?l===Vr?i.push(l):t.errors.push(E4(l)):i.push(new Map(Object.entries(l)));let o=!1,a=null;return i.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(a=l.get("easing"),l.delete("easing")),!o)){for(let u of l.values())if(u.toString().indexOf(jP)>=0){o=!0;break}}}),{type:qe.Style,styles:i,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(a=>{typeof a!="string"&&a.forEach((l,u)=>{let f=t.collectedStyles.get(t.currentQuerySelector),m=f.get(u),v=!0;m&&(o!=r&&o>=m.startTime&&r<=m.endTime&&(t.errors.push(C4(u,m.startTime,m.endTime,o,r)),v=!1),o=m.startTime),v&&f.set(u,{startTime:o,endTime:r}),t.options&&J4(l,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:qe.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(I4()),i;let r=1,o=0,a=[],l=!1,u=!1,f=0,m=e.steps.map(G=>{let ne=this._makeStyleAst(G,t),X=ne.offset!=null?ne.offset:l6(ne.styles),ue=0;return X!=null&&(o++,ue=ne.offset=X),u=u||ue<0||ue>1,l=l||ue<f,f=ue,a.push(ue),ne});u&&t.errors.push(T4()),l&&t.errors.push(S4());let v=e.steps.length,E=0;o>0&&o<v?t.errors.push(D4()):o==0&&(E=r/(v-1));let b=v-1,x=t.currentTime,k=t.currentAnimateTimings,N=k.duration;return m.forEach((G,ne)=>{let X=E>0?ne==b?1:E*ne:a[ne],ue=X*N;t.currentTime=x+k.delay+ue,k.duration=ue,this._validateStyleAst(G,t),G.offset=X,i.styles.push(G)}),i}visitReference(e,t){return{type:qe.Reference,animation:bi(this,Zd(e.animation),t),options:$a(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:qe.AnimateChild,options:$a(e.options)}}visitAnimateRef(e,t){return{type:qe.AnimateRef,animation:this.visitReference(e.animation,t),options:$a(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,a]=a6(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,Ei(t.collectedStyles,t.currentQuerySelector,new Map);let l=bi(this,Zd(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:qe.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:l,originalSelector:e.selector,options:$a(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(M4());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:hg(e.timings,t.errors,!0);return{type:qe.Stagger,animation:bi(this,Zd(e.animation),t),timings:i,options:null}}};function a6(n){let e=!!n.split(/\s*,\s*/).find(t=>t==HP);return e&&(n=n.replace(s6,"")),n=n.replace(/@\*/g,dg).replace(/@\w+/g,t=>dg+"-"+t.slice(1)).replace(/:animating/g,gb),[n,e]}function c6(n){return n?J({},n):null}var wb=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function l6(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function u6(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=hg(n,e).duration;return ub(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=ub(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=hg(t,e);return ub(r.duration,r.delay,r.easing)}function $a(n){return n?(n=J({},n),n.params&&(n.params=c6(n.params))):n={},n}function ub(n,e,t){return{duration:n,delay:e,easing:t}}function Fb(n,e,t,i,r,o,a=null,l=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:l}}var Jd=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},d6=1,h6=":enter",f6=new RegExp(h6,"g"),p6=":leave",m6=new RegExp(p6,"g");function GP(n,e,t,i,r,o=new Map,a=new Map,l,u,f=[]){return new bb().buildKeyframes(n,e,t,i,r,o,a,l,u,f)}var bb=class{buildKeyframes(e,t,i,r,o,a,l,u,f,m=[]){f=f||new Jd;let v=new Eb(e,t,f,r,o,m,[]);v.options=u;let E=u.delay?Po(u.delay):0;v.currentTimeline.delayNextStep(E),v.currentTimeline.setStyles([a],null,v.errors,u),bi(this,i,v);let b=v.timelines.filter(x=>x.containsAnimation());if(b.length&&l.size){let x;for(let k=b.length-1;k>=0;k--){let N=b[k];if(N.element===t){x=N;break}}x&&!x.allowOnlyTimelineStyles()&&x.setStyles([l],null,v.errors,u)}return b.length?b.map(x=>x.buildKeyframes()):[Fb(t,[],[],[],0,E,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,a=this._visitSubInstructions(i,r,r.options);o!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let a=typeof o=="number"?o:Po(Yd(o,r?.params??{},t.errors));i.delayNextStep(a)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,a=i.duration!=null?Po(i.duration):null,l=i.delay!=null?Po(i.delay):null;return a!==0&&e.forEach(u=>{let f=t.appendInstructionToTimeline(u,a,l);o=Math.max(o,f.duration+f.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),bi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==qe.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=mg);let a=Po(o.delay);r.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>bi(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Po(e.options.delay):0;e.steps.forEach(a=>{let l=t.createSubContext(e.options);o&&l.delayNextStep(o),bi(this,a,l),r=Math.max(r,l.currentTimeline.currentTime),i.push(l.currentTimeline)}),i.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Yd(i,t.params,t.errors):i;return hg(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==qe.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,l=t.createSubContext().currentTimeline;l.easing=i.easing,e.styles.forEach(u=>{let f=u.offset||0;l.forwardTime(f*o),l.setStyles(u.styles,u.easing,t.errors,t.options),l.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(l),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Po(r.delay):0;o&&(t.previousNode.type===qe.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=mg);let a=i,l=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=l.length;let u=null;l.forEach((f,m)=>{t.currentQueryIndex=m;let v=t.createSubContext(e.options,f);o&&v.delayNextStep(o),f===t.element&&(u=v.currentTimeline),bi(this,e.animation,v),v.currentTimeline.applyStylesToKeyframe();let E=v.currentTimeline.currentTime;a=Math.max(a,E)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,a=Math.abs(o.duration),l=a*(t.currentQueryTotal-1),u=a*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":u=l-u;break;case"full":u=i.currentStaggerTime;break}let m=t.currentTimeline;u&&m.delayNextStep(u);let v=m.currentTime;bi(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-v+(r.startTime-i.currentTimeline.startTime)}},mg={},Eb=class n{constructor(e,t,i,r,o,a,l,u){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=a,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new gg(this._driver,t,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=Po(i.duration)),i.delay!=null&&(r.delay=Po(i.delay));let o=i.params;if(o){let a=r.params;a||(a=this.options.params={}),Object.keys(o).forEach(l=>{(!t||!a.hasOwnProperty(l))&&(a[l]=Yd(o[l],a,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=mg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new Cb(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,a){let l=[];if(r&&l.push(this.element),e.length>0){e=e.replace(f6,"."+this._enterClassName),e=e.replace(m6,"."+this._leaveClassName);let u=i!=1,f=this._driver.query(this.element,e,u);i!==0&&(f=i<0?f.slice(f.length+i,f.length):f.slice(0,i)),l.push(...f)}return!o&&l.length==0&&a.push(x4(t)),l}},gg=class n{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=d6,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Vr),this._currentKeyframe.set(t,Vr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},a=g6(e,this._globalTimelineStyles);for(let[l,u]of a){let f=Yd(u,o,i);this._pendingStyles.set(l,f),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??Vr),this._updateStyle(l,f)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((l,u)=>{let f=new Map([...this._backFill,...l]);f.forEach((m,v)=>{m===og?e.add(v):m===Vr&&t.add(v)}),i||f.set("offset",u/this.duration),r.push(f)});let o=[...e.values()],a=[...t.values()];if(i){let l=r[0],u=new Map(l);l.set("offset",0),u.set("offset",1),r=[l,u]}return Fb(this.element,r,o,a,this.duration,this.startTime,this.easing,!1)}},Cb=class extends gg{constructor(e,t,i,r,o,a,l=!1){super(e,t,a.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=l,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],a=i+t,l=t/a,u=new Map(e[0]);u.set("offset",0),o.push(u);let f=new Map(e[0]);f.set("offset",PP(l)),o.push(f);let m=e.length-1;for(let v=1;v<=m;v++){let E=new Map(e[v]),b=E.get("offset"),x=t+b*i;E.set("offset",PP(x/a)),o.push(E)}i=a,t=0,r="",e=o}return Fb(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function PP(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function g6(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,Vr)}else for(let[o,a]of r)t.set(o,a)}),t}function AP(n,e,t,i,r,o,a,l,u,f,m,v,E){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:a,timelines:l,queriedElements:u,preStyleProps:f,postStyleProps:m,totalTime:v,errors:E}}var db={},_g=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return _6(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,a,l,u,f,m){let v=[],E=this.ast.options&&this.ast.options.params||db,b=l&&l.params||db,x=this.buildStyles(i,b,v),k=u&&u.params||db,N=this.buildStyles(r,k,v),G=new Set,ne=new Map,X=new Map,ue=r==="void",Le={params:WP(k,E),delay:this.ast.options?.delay},me=m?[]:GP(e,t,this.ast.animation,o,a,x,N,Le,f,v),R=0;return me.forEach(D=>{R=Math.max(D.duration+D.delay,R)}),v.length?AP(t,this._triggerName,i,r,ue,x,N,[],[],ne,X,R,v):(me.forEach(D=>{let M=D.element,O=Ei(ne,M,new Set);D.preStyleProps.forEach(V=>O.add(V));let F=Ei(X,M,new Set);D.postStyleProps.forEach(V=>F.add(V)),M!==t&&G.add(M)}),AP(t,this._triggerName,i,r,ue,x,N,me,[...G.values()],ne,X,R))}};function _6(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function WP(n,e){let t=J({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var Ib=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=WP(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{a&&(a=Yd(a,r,t));let u=this.normalizer.normalizePropertyName(l,t);a=this.normalizer.normalizeStyleValue(l,u,a,t),i.set(l,a)})}),i}};function v6(n,e,t){return new Tb(n,e,t)}var Tb=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new Ib(r.style,o,i))}),RP(this.states,"true","1"),RP(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new _g(e,r,this.states))}),this.fallbackTransition=y6(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(a=>a.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function y6(n,e,t){let i=[(a,l)=>!0],r={type:qe.Sequence,steps:[],options:null},o={type:qe.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new _g(n,o,e)}function RP(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var w6=new Jd,Sb=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],r=[],o=qP(this._driver,t,i,r);if(i.length)throw k4(i);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=VP(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),a,l=new Map;if(o?(a=GP(this._driver,t,o,zP,mb,new Map,new Map,i,w6,r),a.forEach(m=>{let v=Ei(l,m.element,new Map);m.postStyleProps.forEach(E=>v.set(E,null))})):(r.push(N4()),a=[]),r.length)throw L4(r);l.forEach((m,v)=>{m.forEach((E,b)=>{m.set(b,this._driver.computeStyle(v,b,Vr))})});let u=a.map(m=>{let v=l.get(m.element);return this._buildPlayer(m,new Map,v)}),f=xs(u);return this._playersById.set(e,f),f.onDestroy(()=>this.destroy(e)),this.players.push(f),f}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw F4(e);return t}listen(e,t,i,r){let o=Rb(t,"","","");return Ab(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let a=r[0]||{};this.create(e,t,a);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},OP="ng-animate-queued",b6=".ng-animate-queued",hb="ng-animate-disabled",E6=".ng-animate-disabled",C6="ng-star-inserted",I6=".ng-star-inserted",T6=[],KP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},S6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},dr="__ng_removed",Xd=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=M6(r),i){let o=e,{value:a}=o,l=Sv(o,["value"]);this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},Qd="void",fb=new Xd(Qd),Db=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ji(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw V4(i,t);if(i==null||i.length==0)throw B4(t);if(!x6(i))throw U4(i,t);let o=Ei(this._elementListeners,e,[]),a={name:t,phase:i,callback:r};o.push(a);let l=Ei(this._engine.statesByElement,e,new Map);return l.has(t)||(ji(e,sg),ji(e,sg+"-"+t),l.set(t,fb)),()=>{this._engine.afterFlush(()=>{let u=o.indexOf(a);u>=0&&o.splice(u,1),this._triggers.has(t)||l.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw j4(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),a=new eh(this.id,t,e),l=this._engine.statesByElement.get(e);l||(ji(e,sg),ji(e,sg+"-"+t),this._engine.statesByElement.set(e,l=new Map));let u=l.get(t),f=new Xd(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&u&&f.absorbOptions(u.options),l.set(t,f),u||(u=fb),!(f.value===Qd)&&u.value===f.value){if(!R6(u.params,f.params)){let k=[],N=o.matchStyles(u.value,u.params,k),G=o.matchStyles(f.value,f.params,k);k.length?this._engine.reportError(k):this._engine.afterFlush(()=>{Ha(e,N),Ur(e,G)})}return}let E=Ei(this._engine.playersByElement,e,[]);E.forEach(k=>{k.namespaceId==this.id&&k.triggerName==t&&k.queued&&k.destroy()});let b=o.matchTransition(u.value,f.value,e,f.params),x=!1;if(!b){if(!r)return;b=o.fallbackTransition,x=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:b,fromState:u,toState:f,player:a,isFallbackTransition:x}),x||(ji(e,OP),a.onStart(()=>{kl(e,OP)})),a.onDone(()=>{let k=this.players.indexOf(a);k>=0&&this.players.splice(k,1);let N=this._engine.playersByElement.get(e);if(N){let G=N.indexOf(a);G>=0&&N.splice(G,1)}}),this.players.push(a),E.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,dg,!0);i.forEach(r=>{if(r[dr])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(a=>a.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),a=new Map;if(o){let l=[];if(o.forEach((u,f)=>{if(a.set(f,u.value),this._triggers.has(f)){let m=this.trigger(e,f,Qd,r);m&&l.push(m)}}),l.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),i&&xs(l).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let a=o.name;if(r.has(a))return;r.add(a);let u=this._triggers.get(a).fallbackTransition,f=i.get(a)||fb,m=new Xd(Qd),v=new eh(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:u,fromState:f,toState:m,player:v,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let a=e;for(;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[dr];(!o||o===KP)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){ji(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,a=this._elementListeners.get(o);a&&a.forEach(l=>{if(l.name==i.triggerName){let u=Rb(o,i.triggerName,i.fromState.value,i.toState.value);u._data=e,Ab(i.player,l.phase,u,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,a=r.transition.ast.depCount;return o==0||a==0?o-a:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Mb=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new Db(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let a=!1,l=this.driver.getParentElement(t);for(;l;){let u=r.get(l);if(u){let f=i.indexOf(u);i.splice(f+1,0,e),a=!0;break}l=this.driver.getParentElement(l)}a||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(lg(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!lg(t))return;let o=t[dr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){let a=this._fetchNamespace(e);a&&a.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ji(e,hb)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),kl(e,hb))}removeNode(e,t,i){if(lg(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[dr]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return lg(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,dg,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,gb,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return xs(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[dr];if(t&&t.setForRemoval){if(e[dr]=KP,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(hb)&&this.markElementAsDisabled(e,!1),this.driver.query(e,E6,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];ji(r,C6)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?xs(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw z4(e)}_flushAnimations(e,t){let i=new Jd,r=[],o=new Map,a=[],l=new Map,u=new Map,f=new Map,m=new Set;this.disabledNodes.forEach(W=>{m.add(W);let ge=this.driver.query(W,b6,!0);for(let Z=0;Z<ge.length;Z++)m.add(ge[Z])});let v=this.bodyNode,E=Array.from(this.statesByElement.keys()),b=LP(E,this.collectedEnterElements),x=new Map,k=0;b.forEach((W,ge)=>{let Z=zP+k++;x.set(ge,Z),W.forEach(we=>ji(we,Z))});let N=[],G=new Set,ne=new Set;for(let W=0;W<this.collectedLeaveElements.length;W++){let ge=this.collectedLeaveElements[W],Z=ge[dr];Z&&Z.setForRemoval&&(N.push(ge),G.add(ge),Z.hasAnimation?this.driver.query(ge,I6,!0).forEach(we=>G.add(we)):ne.add(ge))}let X=new Map,ue=LP(E,Array.from(G));ue.forEach((W,ge)=>{let Z=mb+k++;X.set(ge,Z),W.forEach(we=>ji(we,Z))}),e.push(()=>{b.forEach((W,ge)=>{let Z=x.get(ge);W.forEach(we=>kl(we,Z))}),ue.forEach((W,ge)=>{let Z=X.get(ge);W.forEach(we=>kl(we,Z))}),N.forEach(W=>{this.processLeaveNode(W)})});let Le=[],me=[];for(let W=this._namespaceList.length-1;W>=0;W--)this._namespaceList[W].drainQueuedTransitions(t).forEach(Z=>{let we=Z.player,Je=Z.element;if(Le.push(we),this.collectedEnterElements.length){let kt=Je[dr];if(kt&&kt.setForMove){if(kt.previousTriggersValues&&kt.previousTriggersValues.has(Z.triggerName)){let ri=kt.previousTriggersValues.get(Z.triggerName),hn=this.statesByElement.get(Z.element);if(hn&&hn.has(Z.triggerName)){let Nn=hn.get(Z.triggerName);Nn.value=ri,hn.set(Z.triggerName,Nn)}}we.destroy();return}}let Ct=!v||!this.driver.containsElement(v,Je),Fe=X.get(Je),Ie=x.get(Je),Ee=this._buildInstruction(Z,i,Ie,Fe,Ct);if(Ee.errors&&Ee.errors.length){me.push(Ee);return}if(Ct){we.onStart(()=>Ha(Je,Ee.fromStyles)),we.onDestroy(()=>Ur(Je,Ee.toStyles)),r.push(we);return}if(Z.isFallbackTransition){we.onStart(()=>Ha(Je,Ee.fromStyles)),we.onDestroy(()=>Ur(Je,Ee.toStyles)),r.push(we);return}let dn=[];Ee.timelines.forEach(kt=>{kt.stretchStartingKeyframe=!0,this.disabledNodes.has(kt.element)||dn.push(kt)}),Ee.timelines=dn,i.append(Je,Ee.timelines);let Di={instruction:Ee,player:we,element:Je};a.push(Di),Ee.queriedElements.forEach(kt=>Ei(l,kt,[]).push(we)),Ee.preStyleProps.forEach((kt,ri)=>{if(kt.size){let hn=u.get(ri);hn||u.set(ri,hn=new Set),kt.forEach((Nn,Mi)=>hn.add(Mi))}}),Ee.postStyleProps.forEach((kt,ri)=>{let hn=f.get(ri);hn||f.set(ri,hn=new Set),kt.forEach((Nn,Mi)=>hn.add(Mi))})});if(me.length){let W=[];me.forEach(ge=>{W.push($4(ge.triggerName,ge.errors))}),Le.forEach(ge=>ge.destroy()),this.reportError(W)}let R=new Map,D=new Map;a.forEach(W=>{let ge=W.element;i.has(ge)&&(D.set(ge,ge),this._beforeAnimationBuild(W.player.namespaceId,W.instruction,R))}),r.forEach(W=>{let ge=W.element;this._getPreviousPlayers(ge,!1,W.namespaceId,W.triggerName,null).forEach(we=>{Ei(R,ge,[]).push(we),we.destroy()})});let M=N.filter(W=>FP(W,u,f)),O=new Map;NP(O,this.driver,ne,f,Vr).forEach(W=>{FP(W,u,f)&&M.push(W)});let V=new Map;b.forEach((W,ge)=>{NP(V,this.driver,new Set(W),u,og)}),M.forEach(W=>{let ge=O.get(W),Z=V.get(W);O.set(W,new Map([...ge?.entries()??[],...Z?.entries()??[]]))});let A=[],Mt=[],Gn={};a.forEach(W=>{let{element:ge,player:Z,instruction:we}=W;if(i.has(ge)){if(m.has(ge)){Z.onDestroy(()=>Ur(ge,we.toStyles)),Z.disabled=!0,Z.overrideTotalTime(we.totalTime),r.push(Z);return}let Je=Gn;if(D.size>1){let Fe=ge,Ie=[];for(;Fe=Fe.parentNode;){let Ee=D.get(Fe);if(Ee){Je=Ee;break}Ie.push(Fe)}Ie.forEach(Ee=>D.set(Ee,Je))}let Ct=this._buildAnimation(Z.namespaceId,we,R,o,V,O);if(Z.setRealPlayer(Ct),Je===Gn)A.push(Z);else{let Fe=this.playersByElement.get(Je);Fe&&Fe.length&&(Z.parentPlayer=xs(Fe)),r.push(Z)}}else Ha(ge,we.fromStyles),Z.onDestroy(()=>Ur(ge,we.toStyles)),Mt.push(Z),m.has(ge)&&r.push(Z)}),Mt.forEach(W=>{let ge=o.get(W.element);if(ge&&ge.length){let Z=xs(ge);W.setRealPlayer(Z)}}),r.forEach(W=>{W.parentPlayer?W.syncPlayerEvents(W.parentPlayer):W.destroy()});for(let W=0;W<N.length;W++){let ge=N[W],Z=ge[dr];if(kl(ge,mb),Z&&Z.hasAnimation)continue;let we=[];if(l.size){let Ct=l.get(ge);Ct&&Ct.length&&we.push(...Ct);let Fe=this.driver.query(ge,gb,!0);for(let Ie=0;Ie<Fe.length;Ie++){let Ee=l.get(Fe[Ie]);Ee&&Ee.length&&we.push(...Ee)}}let Je=we.filter(Ct=>!Ct.destroyed);Je.length?P6(this,ge,Je):this.processLeaveNode(ge)}return N.length=0,A.forEach(W=>{this.players.push(W),W.onDone(()=>{W.destroy();let ge=this.players.indexOf(W);this.players.splice(ge,1)}),W.play()}),A}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let a=[];if(t){let l=this.playersByQueriedElement.get(e);l&&(a=l)}else{let l=this.playersByElement.get(e);if(l){let u=!o||o==Qd;l.forEach(f=>{f.queued||!u&&f.triggerName!=r||a.push(f)})}}return(i||r)&&(a=a.filter(l=>!(i&&i!=l.namespaceId||r&&r!=l.triggerName))),a}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,a=t.isRemovalTransition?void 0:e,l=t.isRemovalTransition?void 0:r;for(let u of t.timelines){let f=u.element,m=f!==o,v=Ei(i,f,[]);this._getPreviousPlayers(f,m,a,l,t.toState).forEach(b=>{let x=b.getRealPlayer();x.beforeDestroy&&x.beforeDestroy(),b.destroy(),v.push(b)})}Ha(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,a){let l=t.triggerName,u=t.element,f=[],m=new Set,v=new Set,E=t.timelines.map(x=>{let k=x.element;m.add(k);let N=k[dr];if(N&&N.removedBeforeQueried)return new Ms(x.duration,x.delay);let G=k!==u,ne=A6((i.get(k)||T6).map(R=>R.getRealPlayer())).filter(R=>{let D=R;return D.element?D.element===k:!1}),X=o.get(k),ue=a.get(k),Le=VP(this._normalizer,x.keyframes,X,ue),me=this._buildPlayer(x,Le,ne);if(x.subTimeline&&r&&v.add(k),G){let R=new eh(e,l,k);R.setRealPlayer(me),f.push(R)}return me});f.forEach(x=>{Ei(this.playersByQueriedElement,x.element,[]).push(x),x.onDone(()=>D6(this.playersByQueriedElement,x.element,x))}),m.forEach(x=>ji(x,DP));let b=xs(E);return b.onDestroy(()=>{m.forEach(x=>kl(x,DP)),Ur(u,t.toStyles)}),v.forEach(x=>{Ei(r,x,[]).push(b)}),b}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Ms(e.duration,e.delay)}},eh=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Ms,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>Ab(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ei(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function D6(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function M6(n){return n??null}function lg(n){return n&&n.nodeType===1}function x6(n){return n=="start"||n=="done"}function kP(n,e){let t=n.style.display;return n.style.display=e??"none",t}function NP(n,e,t,i,r){let o=[];t.forEach(u=>o.push(kP(u)));let a=[];i.forEach((u,f)=>{let m=new Map;u.forEach(v=>{let E=e.computeStyle(f,v,r);m.set(v,E),(!E||E.length==0)&&(f[dr]=S6,a.push(f))}),n.set(f,m)});let l=0;return t.forEach(u=>kP(u,o[l++])),a}function LP(n,e){let t=new Map;if(n.forEach(l=>t.set(l,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function a(l){if(!l)return i;let u=o.get(l);if(u)return u;let f=l.parentNode;return t.has(f)?u=f:r.has(f)?u=i:u=a(f),o.set(l,u),u}return e.forEach(l=>{let u=a(l);u!==i&&t.get(u).push(l)}),t}function ji(n,e){n.classList?.add(e)}function kl(n,e){n.classList?.remove(e)}function P6(n,e,t){xs(t).onDone(()=>n.processLeaveNode(e))}function A6(n){let e=[];return ZP(n,e),e}function ZP(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Gd?ZP(i.players,e):e.push(i)}}function R6(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function FP(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var Nl=class{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Mb(e.body,t,i),this._timelineEngine=new Sb(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let a=e+"-"+r,l=this._triggerCache[a];if(!l){let u=[],f=[],m=qP(this._driver,o,u,f);if(u.length)throw R4(r,u);f.length&&void 0,l=v6(r,m,this._normalizer),this._triggerCache[a]=l}this._transitionEngine.registerTrigger(t,r,l)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,a]=TP(i),l=r;this._timelineEngine.command(o,t,a,l)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[a,l]=TP(i);return this._timelineEngine.listen(a,t,l,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function O6(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=pb(e[0]),e.length>1&&(i=pb(e[e.length-1]))):e instanceof Map&&(t=pb(e)),t||i?new xb(n,t,i):null}var xb=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=n.initialStylesByElement.get(e);r||n.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Ur(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ur(this._element,this._initialStyles),this._endStyles&&(Ur(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ha(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ha(this._element,this._endStyles),this._endStyles=null),Ur(this._element,this._initialStyles),this._state=3)}};function pb(n){let e=null;return n.forEach((t,i)=>{k6(i)&&(e=e||new Map,e.set(i,t))}),e}function k6(n){return n==="display"||n==="position"}var vg=class{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:Lb(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},yg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return BP(e,t)}getParentElement(e){return Ob(e)}query(e,t,i){return UP(e,t,i)}computeStyle(e,t,i){return Lb(e,t)}animate(e,t,i,r,o,a=[]){let l=r==0?"both":"forwards",u={duration:i,delay:r,fill:l};o&&(u.easing=o);let f=new Map,m=a.filter(b=>b instanceof vg);e6(i,r)&&m.forEach(b=>{b.currentSnapshot.forEach((x,k)=>f.set(k,x))});let v=Y4(t).map(b=>new Map(b));v=t6(e,v,f);let E=O6(e,v);return new vg(e,v,u,E)}};var ug="@",QP="@.disabled",wg=class{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==ug&&t==QP?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Pb=class extends wg{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==ug?t.charAt(1)=="."&&t==QP?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==ug){let r=N6(e),o=t.slice(1),a="";return o.charAt(0)!=ug&&([o,a]=L6(o)),this.engine.listen(this.namespaceId,r,o,a,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,i,l)})}return this.delegate.listen(e,t,i)}};function N6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function L6(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var bg=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let f=this._rendererCache,m=f.get(r);if(!m){let v=()=>f.delete(r);m=new wg(i,r,this.engine,v),f.set(r,m)}return m}let o=t.id,a=t.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);let l=f=>{Array.isArray(f)?f.forEach(l):this.engine.registerTrigger(o,a,e,f.name,f)};return t.data.animation.forEach(l),new Pb(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[a,l]=o;a(l)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var V6=(()=>{class n extends Nl{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(ve(yn),ve(qa),ve(Ga))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function B6(){return new fg}function U6(n,e,t){return new bg(n,e,t)}var YP=[{provide:Ga,useFactory:B6},{provide:Nl,useClass:V6},{provide:ps,useFactory:U6,deps:[Vm,Nl,lt]}],j6=[{provide:qa,useFactory:()=>new yg},{provide:N0,useValue:"BrowserAnimations"},...YP],Hee=[{provide:qa,useClass:kb},{provide:N0,useValue:"NoopAnimations"},...YP];function JP(){return ys("NgEagerAnimations"),[...j6]}var eA=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},z6=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[t++],a=n[t++],l=n[t++],u=((r&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},tA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],a=r+1<n.length,l=a?n[r+1]:0,u=r+2<n.length,f=u?n[r+2]:0,m=o>>2,v=(o&3)<<4|l>>4,E=(l&15)<<2|f>>6,b=f&63;u||(b=64,a||(E=64)),i.push(t[m],t[v],t[E],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):z6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;let f=r<n.length?t[n.charAt(r)]:64;++r;let v=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||l==null||f==null||v==null)throw new Bb;let E=o<<2|l>>4;if(i.push(E),f!==64){let b=l<<4&240|f>>2;if(i.push(b),v!==64){let x=f<<6&192|v;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Bb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$6=function(n){let e=eA(n);return tA.encodeByteArray(e,!0)},th=function(n){return $6(n).replace(/\./g,"")},jb=function(n){try{return tA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function H6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var q6=()=>H6().__FIREBASE_DEFAULTS__,G6=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},W6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&jb(n[1]);return e&&JSON.parse(e)},Cg=()=>{try{return q6()||G6()||W6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},zb=n=>{var e,t;return(t=(e=Cg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},nA=n=>{let e=zb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},$b=()=>{var n;return(n=Cg())===null||n===void 0?void 0:n.config},Hb=n=>{var e;return(e=Cg())===null||e===void 0?void 0:e[`_${n}`]};var Eg=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function iA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[th(JSON.stringify(t)),th(JSON.stringify(a)),""].join(".")}function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function K6(){var n;let e=(n=Cg())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function aA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cA(){let n=bn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lA(){return!K6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qb(){try{return typeof indexedDB=="object"}catch{return!1}}function uA(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Z6="FirebaseError",Ci=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Z6,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}},Ao=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?Q6(o,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Ci(r,l,i)}};function Q6(n,e){return n.replace(Y6,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Y6=/\{\$([^}]+)}/g;function dA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ro(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let o=n[r],a=e[r];if(XP(o)&&XP(a)){if(!Ro(o,a))return!1}else if(o!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function XP(n){return n!==null&&typeof n=="object"}function Ll(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function hA(n,e){let t=new Ub(n,e);return t.subscribe.bind(t)}var Ub=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");J6(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Vb),r.error===void 0&&(r.error=Vb),r.complete===void 0&&(r.complete=Vb);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function J6(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Vb(){}var Gee=4*60*60*1e3;function Kt(n){return n&&n._delegate?n._delegate:n}var zi=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Wa="[DEFAULT]";var Gb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Eg;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ez(e))try{this.getOrInitializeService({instanceIdentifier:Wa})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Wa){return this.instances.has(e)}getOptions(e=Wa){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[o,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);let a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:X6(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Wa){return this.component?this.component.multipleInstances?e:Wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function X6(n){return n===Wa?void 0:n}function ez(n){return n.instantiationMode==="EAGER"}var Ig=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Gb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var tz=[],tt=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(tt||{}),nz={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},iz=tt.INFO,rz={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},oz=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=rz[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ps=class{constructor(e){this.name=e,this._logLevel=iz,this._logHandler=oz,this._userLogHandler=null,tz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}};var sz=(n,e)=>e.some(t=>n instanceof t),fA,pA;function az(){return fA||(fA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cz(){return pA||(pA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var mA=new WeakMap,Kb=new WeakMap,gA=new WeakMap,Wb=new WeakMap,Qb=new WeakMap;function lz(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(jr(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&mA.set(t,n)}).catch(()=>{}),Qb.set(e,n),e}function uz(n){if(Kb.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Kb.set(n,e)}var Zb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _A(n){Zb=n(Zb)}function dz(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Tg(this),e,...t);return gA.set(i,e.sort?e.sort():[e]),jr(i)}:cz().includes(n)?function(...e){return n.apply(Tg(this),e),jr(mA.get(this))}:function(...e){return jr(n.apply(Tg(this),e))}}function hz(n){return typeof n=="function"?dz(n):(n instanceof IDBTransaction&&uz(n),sz(n,az())?new Proxy(n,Zb):n)}function jr(n){if(n instanceof IDBRequest)return lz(n);if(Wb.has(n))return Wb.get(n);let e=hz(n);return e!==n&&(Wb.set(n,e),Qb.set(e,n)),e}var Tg=n=>Qb.get(n);function yA(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){let a=indexedDB.open(n,e),l=jr(a);return i&&a.addEventListener("upgradeneeded",u=>{i(jr(a.result),u.oldVersion,u.newVersion,jr(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var fz=["get","getKey","getAll","getAllKeys","count"],pz=["put","add","delete","clear"],Yb=new Map;function vA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yb.get(e))return Yb.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=pz.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||fz.includes(t)))return;let o=function(a,...l){return T(this,null,function*(){let u=this.transaction(a,r?"readwrite":"readonly"),f=u.store;return i&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),r&&u.done]))[0]})};return Yb.set(e,o),o}_A(n=>ke(J({},n),{get:(e,t,i)=>vA(e,t)||n.get(e,t,i),has:(e,t)=>!!vA(e,t)||n.has(e,t)}));var Xb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mz(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function mz(n){let e=n.getComponent();return e?.type==="VERSION"}var eE="@firebase/app",wA="0.10.13";var Oo=new Ps("@firebase/app"),gz="@firebase/app-compat",_z="@firebase/analytics-compat",vz="@firebase/analytics",yz="@firebase/app-check-compat",wz="@firebase/app-check",bz="@firebase/auth",Ez="@firebase/auth-compat",Cz="@firebase/database",Iz="@firebase/data-connect",Tz="@firebase/database-compat",Sz="@firebase/functions",Dz="@firebase/functions-compat",Mz="@firebase/installations",xz="@firebase/installations-compat",Pz="@firebase/messaging",Az="@firebase/messaging-compat",Rz="@firebase/performance",Oz="@firebase/performance-compat",kz="@firebase/remote-config",Nz="@firebase/remote-config-compat",Lz="@firebase/storage",Fz="@firebase/storage-compat",Vz="@firebase/firestore",Bz="@firebase/vertexai-preview",Uz="@firebase/firestore-compat",jz="firebase",zz="10.14.1";var tE="[DEFAULT]",$z={[eE]:"fire-core",[gz]:"fire-core-compat",[vz]:"fire-analytics",[_z]:"fire-analytics-compat",[wz]:"fire-app-check",[yz]:"fire-app-check-compat",[bz]:"fire-auth",[Ez]:"fire-auth-compat",[Cz]:"fire-rtdb",[Iz]:"fire-data-connect",[Tz]:"fire-rtdb-compat",[Sz]:"fire-fn",[Dz]:"fire-fn-compat",[Mz]:"fire-iid",[xz]:"fire-iid-compat",[Pz]:"fire-fcm",[Az]:"fire-fcm-compat",[Rz]:"fire-perf",[Oz]:"fire-perf-compat",[kz]:"fire-rc",[Nz]:"fire-rc-compat",[Lz]:"fire-gcs",[Fz]:"fire-gcs-compat",[Vz]:"fire-fst",[Uz]:"fire-fst-compat",[Bz]:"fire-vertex","fire-js":"fire-js",[jz]:"fire-js-all"};var nh=new Map,Hz=new Map,nE=new Map;function bA(n,e){try{n.container.addComponent(e)}catch(t){Oo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rs(n){let e=n.name;if(nE.has(e))return Oo.debug(`There were multiple attempts to register component ${e}.`),!1;nE.set(e,n);for(let t of nh.values())bA(t,n);for(let t of Hz.values())bA(t,n);return!0}function rh(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function zr(n){return n.settings!==void 0}var qz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new Ao("app","Firebase",qz);var iE=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}};var Os=zz;function sE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:tE,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw As.create("bad-app-name",{appName:String(r)});if(t||(t=$b()),!t)throw As.create("no-options");let o=nh.get(r);if(o){if(Ro(t,o.options)&&Ro(i,o.config))return o;throw As.create("duplicate-app",{appName:r})}let a=new Ig(r);for(let u of nE.values())a.addComponent(u);let l=new iE(t,i,a);return nh.set(r,l),l}function Fl(n=tE){let e=nh.get(n);if(!e&&n===tE&&$b())return sE();if(!e)throw As.create("no-app",{appName:n});return e}function Sg(){return Array.from(nh.values())}function un(n,e,t){var i;let r=(i=$z[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oo.warn(l.join(" "));return}Rs(new zi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Gz="firebase-heartbeat-database",Wz=1,ih="firebase-heartbeat-store",Jb=null;function TA(){return Jb||(Jb=yA(Gz,Wz,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ih)}catch(t){console.warn(t)}}}}).catch(n=>{throw As.create("idb-open",{originalErrorMessage:n.message})})),Jb}function Kz(n){return T(this,null,function*(){try{let t=(yield TA()).transaction(ih),i=yield t.objectStore(ih).get(SA(n));return yield t.done,i}catch(e){if(e instanceof Ci)Oo.warn(e.message);else{let t=As.create("idb-get",{originalErrorMessage:e?.message});Oo.warn(t.message)}}})}function EA(n,e){return T(this,null,function*(){try{let i=(yield TA()).transaction(ih,"readwrite");yield i.objectStore(ih).put(e,SA(n)),yield i.done}catch(t){if(t instanceof Ci)Oo.warn(t.message);else{let i=As.create("idb-set",{originalErrorMessage:t?.message});Oo.warn(i.message)}}})}function SA(n){return`${n.name}!${n.options.appId}`}var Zz=1024,Qz=30*24*60*60*1e3,rE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new oE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return T(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=CA();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let l=new Date(a.date).valueOf();return Date.now()-l<=Qz}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Oo.warn(i)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=CA(),{heartbeatsToSend:i,unsentEntries:r}=Yz(this._heartbeatsCache.heartbeats),o=th(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Oo.warn(t),""}})}};function CA(){return new Date().toISOString().substring(0,10)}function Yz(n,e=Zz){let t=[],i=n.slice();for(let r of n){let o=t.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),IA(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),IA(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var oE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return qb()?uA().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Kz(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return EA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return EA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function IA(n){return th(JSON.stringify({version:2,heartbeats:n})).length}function Jz(n){Rs(new zi("platform-logger",e=>new Xb(e),"PRIVATE")),Rs(new zi("heartbeat",e=>new rE(e),"PRIVATE")),un(eE,wA,n),un(eE,wA,"esm2017"),un("fire-js","")}Jz("");var Xz="firebase",e$="10.14.1";un(Xz,e$,"app");var Za=new go("ANGULARFIRE2_VERSION");function Mg(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var oh=(n,e)=>{let t=e?[e]:Sg(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},Bl=class{constructor(){return oh(t$)}},t$="app-check";function Vl(){}var Dg=class{zone;delegate;constructor(e,t=qv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,o=function(a){r.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,t,i)}},aE=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vl,{},Vl,Vl)),t.pipe(Jt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ul=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Dg(Zone.current)),this.insideAngular=t.run(()=>new Dg(Zone.current,Hv)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(ve(lt))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xg(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function n$(n){return xg().ngZone.runOutsideAngular(()=>n())}function Ka(n){return xg().ngZone.run(()=>n())}function i$(n){return r$(xg())(n)}function r$(n){return function(t){return t=t.lift(new aE(n.ngZone)),t.pipe(os(n.outsideAngular),rs(n.insideAngular))}}var o$=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ka(()=>n.apply(void 0,i))},Lt=(n,e)=>function(){let t,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(e&&(t||=Ka(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vl,{},Vl,Vl))),i[o]=o$(i[o],t));let r=n$(()=>n.apply(this,i));if(!e)if(r instanceof ze){let o=xg();return r.pipe(os(o.outsideAngular),rs(o.insideAngular))}else return Ka(()=>r);return r instanceof ze?r.pipe(i$):r instanceof Promise?Ka(()=>new Promise((o,a)=>r.then(l=>Ka(()=>o(l)),l=>Ka(()=>a(l))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:Ka(()=>r)};var ko=class{constructor(e){return e}},Qa=class{constructor(){return Sg()}};function s$(n){return n&&n.length===1?n[0]:new ko(Fl())}var cE=new pe("angularfire2._apps"),a$={provide:ko,useFactory:s$,deps:[[new xn,cE]]},c$={provide:Qa,deps:[[new xn,cE]]};function l$(n){return(e,t)=>{let i=t.get(Vi);un("angularfire",Za.full,"core"),un("angularfire",Za.full,"app"),un("angular",FM.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new ko(r)}}function DA(n,...e){return rr([a$,c$,{provide:cE,useFactory:l$(n),multi:!0,deps:[lt,Tn,Ul,...e]}])}var MA=Lt(sE,!0);function HA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var qA=HA,GA=new Ao("auth","Firebase",HA());var Ng=new Ps("@firebase/auth");function u$(n,...e){Ng.logLevel<=tt.WARN&&Ng.warn(`Auth (${Os}): ${n}`,...e)}function Ag(n,...e){Ng.logLevel<=tt.ERROR&&Ng.error(`Auth (${Os}): ${n}`,...e)}function Ls(n,...e){throw kE(n,...e)}function $r(n,...e){return kE(n,...e)}function WA(n,e,t){let i=Object.assign(Object.assign({},qA()),{[e]:t});return new Ao("auth","Firebase",i).create(e,{appName:n.name})}function Ns(n){return WA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kE(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return GA.create(n,...e)}function be(n,e,...t){if(!n)throw kE(e,...t)}function No(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ag(e),new Error(e)}function Fs(n,e){n||No(e)}function fE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function KA(){return xA()==="http:"||xA()==="https:"}function xA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function d$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KA()||sA()||"connection"in navigator)?navigator.onLine:!0}function h$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ya=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fs(t>e,"Short delay should be less than long delay!"),this.isMobile=rA()||aA()}get(){return d$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function NE(n,e){Fs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Lg=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;No("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;No("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;No("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var f$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var p$=new Ya(3e4,6e4);function Fo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Hr(o,a,l,u){return T(this,arguments,function*(n,e,t,i,r={}){return ZA(n,r,()=>T(this,null,function*(){let f={},m={};i&&(e==="GET"?m=i:f={body:JSON.stringify(i)});let v=Ll(Object.assign({key:n.config.apiKey},m)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let b=Object.assign({method:e,headers:E},f);return oA()||(b.referrerPolicy="no-referrer"),Lg.fetch()(QA(n,n.config.apiHost,t,v),b)}))})}function ZA(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},f$),e);try{let r=new pE(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw sh(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let l=o.ok?a.errorMessage:a.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw sh(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw sh(n,"user-disabled",a);let m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw WA(n,m,f);Ls(n,m)}}catch(r){if(r instanceof Ci)throw r;Ls(n,"network-request-failed",{message:String(r)})}})}function Gg(o,a,l,u){return T(this,arguments,function*(n,e,t,i,r={}){let f=yield Hr(n,e,t,i,r);return"mfaPendingCredential"in f&&Ls(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function QA(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?NE(n.config,r):`${n.config.apiScheme}://${r}`}var pE=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i($r(this.auth,"network-request-failed")),p$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function sh(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=$r(n,e,i);return r.customData._tokenResponse=t,r}function PA(n){return n!==void 0&&n.getResponse!==void 0}function m$(n){return T(this,null,function*(){return(yield Hr(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})}function g$(n,e){return T(this,null,function*(){return Hr(n,"POST","/v1/accounts:delete",e)})}function YA(n,e){return T(this,null,function*(){return Hr(n,"POST","/v1/accounts:lookup",e)})}function ah(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function LE(n,e=!1){return T(this,null,function*(){let t=Kt(n),i=yield t.getIdToken(e),r=FE(i);be(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,a=o?.sign_in_provider;return{claims:r,token:i,authTime:ah(lE(r.auth_time)),issuedAtTime:ah(lE(r.iat)),expirationTime:ah(lE(r.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function lE(n){return Number(n)*1e3}function FE(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ag("JWT malformed, contained fewer than 3 sections"),null;try{let r=jb(t);return r?JSON.parse(r):(Ag("Failed to decode base64 JWT payload"),null)}catch(r){return Ag("Caught error parsing JWT payload as JSON",r?.toString()),null}}function AA(n){let e=FE(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function lh(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Ci&&_$(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function _$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var mE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var uh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ah(this.lastLoginAt),this.creationTime=ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Fg(n){return T(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield lh(n,YA(t,{idToken:i}));be(r?.users.length,t,"internal-error");let o=r.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?JA(o.providerUserInfo):[],l=v$(n.providerData,a),u=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,m=u?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new uh(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)})}function VE(n){return T(this,null,function*(){let e=Kt(n);yield Fg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function v$(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function JA(n){return n.map(e=>{var{providerId:t}=e,i=Gv(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function y$(n,e){return T(this,null,function*(){let t=yield ZA(n,{},()=>T(this,null,function*(){let i=Ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,a=QA(n,r,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Lg.fetch()(a,{method:"POST",headers:l,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function w$(n,e){return T(this,null,function*(){return Hr(n,"POST","/v2/accounts:revokeToken",Fo(n,e))})}var ch=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");let t=AA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield y$(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,a=new n;return i&&(be(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(be(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(be(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return No("not implemented")}};function ks(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var jl=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=Gv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new uh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield lh(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return LE(this,e)}reload(){return VE(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Fg(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(zr(this.auth.app))return Promise.reject(Ns(this.auth));let e=yield this.getIdToken();return yield lh(this,g$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,a,l,u,f,m;let v=(i=t.displayName)!==null&&i!==void 0?i:void 0,E=(r=t.email)!==null&&r!==void 0?r:void 0,b=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,x=(a=t.photoURL)!==null&&a!==void 0?a:void 0,k=(l=t.tenantId)!==null&&l!==void 0?l:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,G=(f=t.createdAt)!==null&&f!==void 0?f:void 0,ne=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:X,emailVerified:ue,isAnonymous:Le,providerData:me,stsTokenManager:R}=t;be(X&&R,e,"internal-error");let D=ch.fromJSON(this.name,R);be(typeof X=="string",e,"internal-error"),ks(v,e.name),ks(E,e.name),be(typeof ue=="boolean",e,"internal-error"),be(typeof Le=="boolean",e,"internal-error"),ks(b,e.name),ks(x,e.name),ks(k,e.name),ks(N,e.name),ks(G,e.name),ks(ne,e.name);let M=new n({uid:X,auth:e,email:E,emailVerified:ue,displayName:v,isAnonymous:Le,photoURL:x,phoneNumber:b,tenantId:k,stsTokenManager:D,createdAt:G,lastLoginAt:ne});return me&&Array.isArray(me)&&(M.providerData=me.map(O=>Object.assign({},O))),N&&(M._redirectEventId=N),M}static _fromIdTokenResponse(e,t,i=!1){return T(this,null,function*(){let r=new ch;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Fg(o),o})}static _fromGetAccountInfoResponse(e,t,i){return T(this,null,function*(){let r=t.users[0];be(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?JA(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!o?.length,l=new ch;l.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new uh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(u,f),u})}};var RA=new Map;function Lo(n){Fs(n instanceof Function,"Expected a class definition");let e=RA.get(n);return e?(Fs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,RA.set(n,e),e)}var b$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,i){return T(this,null,function*(){this.storage[t]=i})}_get(t){return T(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),gE=b$;function Rg(n,e,t){return`firebase:${n}:${e}:${t}`}var Vg=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=Rg(this.userKey,r.apiKey,o),this.fullPersistenceKey=Rg("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?jl._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return T(this,null,function*(){if(!t.length)return new n(Lo(gE),e,i);let r=(yield Promise.all(t.map(f=>T(this,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=r[0]||Lo(gE),a=Rg(i,e.config.apiKey,e.name),l=null;for(let f of t)try{let m=yield f._get(a);if(m){let v=jl._fromJSON(e,m);f!==o&&(l=v),o=f;break}}catch{}let u=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,i):(o=u[0],l&&(yield o._set(a,l.toJSON())),yield Promise.all(t.map(f=>T(this,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,i))})}};function OA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rR(e))return"Blackberry";if(oR(e))return"Webos";if(eR(e))return"Safari";if((e.includes("chrome/")||tR(e))&&!e.includes("edge/"))return"Chrome";if(iR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function XA(n=bn()){return/firefox\//i.test(n)}function eR(n=bn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tR(n=bn()){return/crios\//i.test(n)}function nR(n=bn()){return/iemobile/i.test(n)}function iR(n=bn()){return/android/i.test(n)}function rR(n=bn()){return/blackberry/i.test(n)}function oR(n=bn()){return/webos/i.test(n)}function BE(n=bn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function E$(n=bn()){var e;return BE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function C$(){return cA()&&document.documentMode===10}function sR(n=bn()){return BE(n)||iR(n)||oR(n)||rR(n)||/windows phone/i.test(n)||nR(n)}function aR(n,e=[]){let t;switch(n){case"Browser":t=OA(bn());break;case"Worker":t=`${OA(bn())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Os}/${i}`}var _E=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((a,l)=>{try{let u=e(o);a(u)}catch(u){l(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function I$(t){return T(this,arguments,function*(n,e={}){return Hr(n,"GET","/v2/passwordPolicy",Fo(n,e))})}var T$=6,vE=class{constructor(e){var t,i,r,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:T$,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,a,l;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var yE=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bg(this),this.idTokenSubscription=new Bg(this),this.beforeStateQueue=new _E(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lo(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Vg.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield YA(this,{idToken:e}),i=yield jl._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var t;if(zr(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield Fg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=h$()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(zr(this.app))return Promise.reject(Ns(this));let t=e?Kt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return zr(this.app)?Promise.reject(Ns(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zr(this.app)?Promise.reject(Ns(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(Lo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield I$(this),t=new vE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield w$(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Lo(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=yield Vg.create(this,[Lo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{a=!0,u()}}else{let u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return T(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&u$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function zl(n){return Kt(n)}var Bg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=hA(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Wg={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function S$(n){Wg=n}function cR(n){return Wg.loadJS(n)}function D$(){return Wg.recaptchaV2Script}function M$(){return Wg.gapiScript}function lR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function UE(n,e){let t=rh(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),o=t.getOptions();if(Ro(o,e??{}))return r;Ls(r,"already-initialized")}return t.initialize({options:e})}function x$(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Lo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function jE(n,e,t){let i=zl(n);be(i._canInitEmulator,i,"emulator-config-failed"),be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,o=uR(e),{host:a,port:l}=P$(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${o}//${a}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||A$()}function uR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function P$(n){let e=uR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:kA(i.substr(o.length+1))}}else{let[o,a]=i.split(":");return{host:o,port:kA(a)}}}function kA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function A$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var dh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return No("not implemented")}_getIdTokenResponse(e){return No("not implemented")}_linkToIdToken(e,t){return No("not implemented")}_getReauthenticationResolver(e){return No("not implemented")}};function uE(n,e){return T(this,null,function*(){return Gg(n,"POST","/v1/accounts:signInWithIdp",Fo(n,e))})}function R$(n,e){return T(this,null,function*(){return Hr(n,"POST","/v1/accounts:sendVerificationCode",Fo(n,e))})}function O$(n,e){return T(this,null,function*(){return Gg(n,"POST","/v1/accounts:signInWithPhoneNumber",Fo(n,e))})}function k$(n,e){return T(this,null,function*(){let t=yield Gg(n,"POST","/v1/accounts:signInWithPhoneNumber",Fo(n,e));if(t.temporaryProof)throw sh(n,"account-exists-with-different-credential",t);return t})}var N$={USER_NOT_FOUND:"user-not-found"};function L$(n,e){return T(this,null,function*(){let t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Gg(n,"POST","/v1/accounts:signInWithPhoneNumber",Fo(n,t),N$)})}var Ug=class n extends dh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new n({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new n({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return O$(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return k$(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return L$(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:o}=e;return!i&&!t&&!r&&!o?null:new n({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:o})}};var jg=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var wE=class extends jg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var hh=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return T(this,null,function*(){let o=yield jl._fromIdTokenResponse(e,i,r),a=NA(i);return new n({user:o,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return T(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=NA(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function NA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var bE=class n extends Ci{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function dR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?bE._fromErrorAndOperation(n,o,e,i):o})}function F$(n,e,t=!1){return T(this,null,function*(){let i=yield lh(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return hh._forOperation(n,"link",i)})}function V$(n,e,t=!1){return T(this,null,function*(){let{auth:i}=n;if(zr(i.app))return Promise.reject(Ns(i));let r="reauthenticate";try{let o=yield lh(n,dR(i,r,e,n),t);be(o.idToken,i,"internal-error");let a=FE(o.idToken);be(a,i,"internal-error");let{sub:l}=a;return be(n.uid===l,i,"user-mismatch"),hh._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ls(i,"user-mismatch"),o}})}function hR(n,e,t=!1){return T(this,null,function*(){if(zr(n.app))return Promise.reject(Ns(n));let i="signIn",r=yield dR(n,i,e),o=yield hh._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})}function zE(n,e){return T(this,null,function*(){return hR(zl(n),e)})}function Kg(n,e,t,i){return Kt(n).onIdTokenChanged(e,t,i)}function $E(n,e,t){return Kt(n).beforeAuthStateChanged(e,t)}function ph(n,e,t,i){return Kt(n).onAuthStateChanged(e,t,i)}function B$(n,e){return Hr(n,"POST","/v2/accounts/mfaEnrollment:start",Fo(n,e))}var zg="__sak";var $g=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zg,"1"),this.storage.removeItem(zg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var U$=1e3,j$=10,z$=(()=>{class n extends $g{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}let r=t.key;i?this.detachListener():this.stopPolling();let o=()=>{let l=this.storage.getItem(r);!i&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);C$()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,j$):o()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},U$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return T(this,null,function*(){yield ns(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return T(this,null,function*(){let i=yield ns(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return T(this,null,function*(){yield ns(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),fR=z$;var $$=(()=>{class n extends $g{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),HE=$$;function H$(n){return Promise.all(n.map(e=>T(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var q$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return T(this,null,function*(){let i=t,{eventId:r,eventType:o,data:a}=i.data,l=this.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let u=Array.from(l).map(m=>T(this,null,function*(){return m(i.origin,a)})),f=yield H$(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function pR(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var EE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return T(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{let f=pR("",20);r.port1.start();let m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(v){let E=v;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(E.data.response);break;default:clearTimeout(m),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function en(){return window}function G$(n){en().location.href=n}function qE(){return typeof en().WorkerGlobalScope<"u"&&typeof en().importScripts=="function"}function W$(){return T(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function K$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Z$(){return qE()?self:null}var mR="firebaseLocalStorageDb",Q$=1,Hg="firebaseLocalStorage",gR="fbase_key",Ja=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Zg(n,e){return n.transaction([Hg],e?"readwrite":"readonly").objectStore(Hg)}function Y$(){let n=indexedDB.deleteDatabase(mR);return new Ja(n).toPromise()}function CE(){let n=indexedDB.open(mR,Q$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Hg,{keyPath:gR})}catch(r){t(r)}}),n.addEventListener("success",()=>T(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Hg)?e(i):(i.close(),yield Y$(),e(yield CE()))}))})}function LA(n,e,t){return T(this,null,function*(){let i=Zg(n,!0).put({[gR]:e,value:t});return new Ja(i).toPromise()})}function J$(n,e){return T(this,null,function*(){let t=Zg(n,!1).get(e),i=yield new Ja(t).toPromise();return i===void 0?null:i.value})}function FA(n,e){let t=Zg(n,!0).delete(e);return new Ja(t).toPromise()}var X$=800,e8=3,t8=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return T(this,null,function*(){return this.db?this.db:(this.db=yield CE(),this.db)})}_withRetries(t){return T(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>e8)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return T(this,null,function*(){return qE()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return T(this,null,function*(){this.receiver=q$._getInstance(Z$()),this.receiver._subscribe("keyChanged",(t,i)=>T(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>T(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return T(this,null,function*(){var t,i;if(this.activeServiceWorker=yield W$(),!this.activeServiceWorker)return;this.sender=new EE(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return T(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||K$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return T(this,null,function*(){try{if(!indexedDB)return!1;let t=yield CE();return yield LA(t,zg,"1"),yield FA(t,zg),!0}catch{}return!1})}_withPendingWrite(t){return T(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(r=>LA(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return T(this,null,function*(){let i=yield this._withRetries(r=>J$(r,t));return this.localCache[t]=i,i})}_remove(t){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(i=>FA(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return T(this,null,function*(){let t=yield this._withRetries(o=>{let a=Zg(o,!1).getAll();return new Ja(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>T(this,null,function*(){return this._poll()}),X$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),_R=t8;function n8(n,e){return Hr(n,"POST","/v2/accounts/mfaSignIn:start",Fo(n,e))}var i8=500,r8=6e4,Pg=1e12,IE=class{constructor(e){this.auth=e,this.counter=Pg,this._widgets=new Map}render(e,t){let i=this.counter;return this._widgets.set(i,new TE(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;let i=e||Pg;(t=this._widgets.get(i))===null||t===void 0||t.delete(),this._widgets.delete(i)}getResponse(e){var t;let i=e||Pg;return((t=this._widgets.get(i))===null||t===void 0?void 0:t.getResponse())||""}execute(e){return T(this,null,function*(){var t;let i=e||Pg;return(t=this._widgets.get(i))===null||t===void 0||t.execute(),""})}},TE=class{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let r=typeof e=="string"?document.getElementById(e):e;be(r,"argument-error",{appName:t}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=o8(50);let{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},r8)},i8))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}};function o8(n){let e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}var dE=lR("rcb"),s8=new Ya(3e4,6e4),SE=class{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=en().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return be(a8(t),e,"argument-error"),this.shouldResolveImmediately(t)&&PA(en().grecaptcha)?Promise.resolve(en().grecaptcha):new Promise((i,r)=>{let o=en().setTimeout(()=>{r($r(e,"network-request-failed"))},s8.get());en()[dE]=()=>{en().clearTimeout(o),delete en()[dE];let l=en().grecaptcha;if(!l||!PA(l)){r($r(e,"internal-error"));return}let u=l.render;l.render=(f,m)=>{let v=u(f,m);return this.counter++,v},this.hostLanguage=t,i(l)};let a=`${D$()}?${Ll({onload:dE,render:"explicit",hl:t})}`;cR(a).catch(()=>{clearTimeout(o),r($r(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=en().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}};function a8(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}var DE=class{load(e){return T(this,null,function*(){return new IE(e)})}clearedOneInstance(){}};var vR="recaptcha",c8={theme:"light",type:"image"},Xa=class{constructor(e,t,i=Object.assign({},c8)){this.parameters=i,this.type=vR,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zl(e),this.isInvisible=this.parameters.size==="invisible",be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");let r=typeof t=="string"?document.getElementById(t):t;be(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new DE:new SE,this.validateStartingState()}verify(){return T(this,null,function*(){this.assertNotDestroyed();let e=yield this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(r=>{let o=a=>{a&&(this.tokenChangeListeners.delete(o),r(a))};this.tokenChangeListeners.add(o),this.isInvisible&&t.execute(e)})})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){be(!this.parameters.sitekey,this.auth,"argument-error"),be(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){let i=en()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){be(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){return T(this,null,function*(){if(yield this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId})}init(){return T(this,null,function*(){be(KA()&&!qE(),this.auth,"internal-error"),yield l8(),this.recaptcha=yield this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let e=yield m$(this.auth);be(e,this.auth,"internal-error"),this.parameters.sitekey=e})}getAssertedRecaptcha(){return be(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function l8(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}var ME=class{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){let t=Ug._fromVerification(this.verificationId,e);return this.onConfirmation(t)}};function GE(n,e,t){return T(this,null,function*(){if(zr(n.app))return Promise.reject(Ns(n));let i=zl(n),r=yield u8(i,e,Kt(t));return new ME(r,o=>zE(i,o))})}function u8(n,e,t){return T(this,null,function*(){var i;let r=yield t.verify();try{be(typeof r=="string",n,"argument-error"),be(t.type===vR,n,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){let a=o.session;if("phoneNumber"in o)return be(a.type==="enroll",n,"internal-error"),(yield B$(n,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{be(a.type==="signin",n,"internal-error");let l=((i=o.multiFactorHint)===null||i===void 0?void 0:i.uid)||o.multiFactorUid;return be(l,n,"missing-multi-factor-info"),(yield n8(n,{mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{let{sessionInfo:a}=yield R$(n,{phoneNumber:o.phoneNumber,recaptchaToken:r});return a}}finally{t._reset()}})}function d8(n,e){return e?Lo(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var fh=class extends dh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return uE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return uE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function h8(n){return hR(n.auth,new fh(n),n.bypassAuthState)}function f8(n){let{auth:e,user:t}=n;return be(t,e,"internal-error"),V$(t,new fh(n),n.bypassAuthState)}function p8(n){return T(this,null,function*(){let{auth:e,user:t}=n;return be(t,e,"internal-error"),F$(t,new fh(n),n.bypassAuthState)})}var xE=class{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>T(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return T(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(u))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h8;case"linkViaPopup":case"linkViaRedirect":return p8;case"reauthViaPopup":case"reauthViaRedirect":return f8;default:Ls(this.auth,"internal-error")}}resolve(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var jte=new Ya(2e3,1e4);var m8="pendingRedirect",Og=new Map,PE=class n extends xE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return T(this,null,function*(){let e=Og.get(this.auth._key());if(!e){try{let i=(yield g8(this.resolver,this.auth))?yield ns(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Og.set(this.auth._key(),e)}return this.bypassAuthState||Og.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return T(this,null,function*(){if(e.type==="signInViaRedirect")return ns(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ns(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return T(this,null,function*(){})}cleanUp(){}};function g8(n,e){return T(this,null,function*(){let t=y8(e),i=v8(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function _8(n,e){Og.set(n._key(),e)}function v8(n){return Lo(n._redirectPersistence)}function y8(n){return Rg(m8,n.config.apiKey,n.name)}function w8(n,e,t=!1){return T(this,null,function*(){if(zr(n.app))return Promise.reject(Ns(n));let i=zl(n),r=d8(i,e),a=yield new PE(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var b8=10*60*1e3,AE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!yR(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError($r(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=b8&&this.cachedEventUids.clear(),this.cachedEventUids.has(VA(e))}saveEventToCache(e){this.cachedEventUids.add(VA(e)),this.lastProcessedEventTime=Date.now()}};function VA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function E8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yR(n);default:return!1}}function C8(t){return T(this,arguments,function*(n,e={}){return Hr(n,"GET","/v1/projects",e)})}var I8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T8=/^https?/;function S8(n){return T(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield C8(n);for(let t of e)try{if(D8(t))return}catch{}Ls(n,"unauthorized-domain")})}function D8(n){let e=fE(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!T8.test(t))return!1;if(I8.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var M8=new Ya(3e4,6e4);function BA(){let n=en().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function x8(n){return new Promise((e,t)=>{var i,r,o;function a(){BA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BA(),t($r(n,"network-request-failed"))},timeout:M8.get()})}if(!((r=(i=en().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=en().gapi)===null||o===void 0)&&o.load)a();else{let l=lR("iframefcb");return en()[l]=()=>{gapi.load?a():t($r(n,"network-request-failed"))},cR(`${M$()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw kg=null,e})}var kg=null;function P8(n){return kg=kg||x8(n),kg}var A8=new Ya(5e3,15e3),R8="__/auth/iframe",O8="emulator/auth/iframe",k8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L8(n){let e=n.config;be(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?NE(e,O8):`https://${n.config.authDomain}/${R8}`,i={apiKey:e.apiKey,appName:n.name,v:Os},r=N8.get(n.config.apiHost);r&&(i.eid=r);let o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Ll(i).slice(1)}`}function F8(n){return T(this,null,function*(){let e=yield P8(n),t=en().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:L8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k8,dontclear:!0},i=>new Promise((r,o)=>T(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=$r(n,"network-request-failed"),l=en().setTimeout(()=>{o(a)},A8.get());function u(){en().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{o(a)})})))})}var V8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B8=500,U8=600,j8="_blank",z8="http://localhost",qg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function $8(n,e,t,i=B8,r=U8){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),l="",u=Object.assign(Object.assign({},V8),{width:i.toString(),height:r.toString(),top:o,left:a}),f=bn().toLowerCase();t&&(l=tR(f)?j8:t),XA(f)&&(e=e||z8,u.scrollbars="yes");let m=Object.entries(u).reduce((E,[b,x])=>`${E}${b}=${x},`,"");if(E$(f)&&l!=="_self")return H8(e||"",l),new qg(null);let v=window.open(e||"",l,m);be(v,n,"popup-blocked");try{v.focus()}catch{}return new qg(v)}function H8(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var q8="__/auth/handler",G8="emulator/auth/handler",W8=encodeURIComponent("fac");function UA(n,e,t,i,r,o){return T(this,null,function*(){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Os,eventId:r};if(e instanceof jg){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",dA(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[m,v]of Object.entries(o||{}))a[m]=v}if(e instanceof wE){let m=e.getScopes().filter(v=>v!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);let l=a;for(let m of Object.keys(l))l[m]===void 0&&delete l[m];let u=yield n._getAppCheckToken(),f=u?`#${W8}=${encodeURIComponent(u)}`:"";return`${K8(n)}?${Ll(l).slice(1)}${f}`})}function K8({config:n}){return n.emulator?NE(n,G8):`https://${n.authDomain}/${q8}`}var hE="webStorageSupport",RE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HE,this._completeRedirectFn=w8,this._overrideRedirectResult=_8}_openPopup(e,t,i,r){return T(this,null,function*(){var o;Fs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield UA(e,t,i,fE(),r);return $8(e,a,pR())})}_openRedirect(e,t,i,r){return T(this,null,function*(){yield this._originValidation(e);let o=yield UA(e,t,i,fE(),r);return G$(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(Fs(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return T(this,null,function*(){let t=yield F8(e),i=new AE(e);return t.register("authEvent",r=>(be(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hE,{type:hE},r=>{var o;let a=(o=r?.[0])===null||o===void 0?void 0:o[hE];a!==void 0&&t(!!a),Ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=S8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sR()||eR()||BE()}},wR=RE;var jA="@firebase/auth",zA="1.7.9";var OE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Z8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q8(n){Rs(new zi("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;be(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aR(n)},f=new yE(i,r,o,u);return x$(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Rs(new zi("auth-internal",e=>{let t=zl(e.getProvider("auth").getImmediate());return(i=>new OE(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),un(jA,zA,Z8(n)),un(jA,zA,"esm2017")}var Y8=5*60,J8=Hb("authIdTokenMaxAge")||Y8,$A=null,X8=n=>e=>T(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>J8)return;let r=t?.token;$A!==r&&($A=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function WE(n=Fl()){let e=rh(n,"auth");if(e.isInitialized())return e.getImmediate();let t=UE(n,{popupRedirectResolver:wR,persistence:[_R,fR,HE]}),i=Hb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let a=X8(o.toString());$E(t,a,()=>a(t.currentUser)),Kg(t,l=>a(l))}}let r=zb("auth");return r&&jE(t,`http://${r}`),t}function e7(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}S$({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=$r("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",e7().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q8("Browser");function ER(n){return new ze(function(e){var t=ph(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var CR="auth",Dt=class{constructor(e){return e}},mh=class{constructor(){return oh(CR)}};var KE=new pe("angularfire2.auth-instances");function H7(n,e){let t=Mg(CR,n,e);return t&&new Dt(t)}function q7(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Dt(i)}}var G7={provide:mh,deps:[[new xn,KE]]},W7={provide:Dt,useFactory:H7,deps:[[new xn,KE],ko]};function IR(n,...e){return un("angularfire",Za.full,"auth"),rr([W7,G7,{provide:KE,useFactory:q7(n),multi:!0,deps:[lt,Tn,Ul,Qa,[new xn,Bl],...e]}])}var Qg=Lt(ER,!0);var TR=Lt(WE,!0);var SR=Lt(ph,!0);var DR=Lt(GE,!0);var MR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xR={};var Vs,ZE;(function(){var n;function e(R,D){function M(){}M.prototype=D.prototype,R.D=D.prototype,R.prototype=new M,R.prototype.constructor=R,R.C=function(O,F,V){for(var A=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)A[Mt-2]=arguments[Mt];return D.prototype[F].apply(O,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,D,M){M||(M=0);var O=Array(16);if(typeof D=="string")for(var F=0;16>F;++F)O[F]=D.charCodeAt(M++)|D.charCodeAt(M++)<<8|D.charCodeAt(M++)<<16|D.charCodeAt(M++)<<24;else for(F=0;16>F;++F)O[F]=D[M++]|D[M++]<<8|D[M++]<<16|D[M++]<<24;D=R.g[0],M=R.g[1],F=R.g[2];var V=R.g[3],A=D+(V^M&(F^V))+O[0]+3614090360&4294967295;D=M+(A<<7&4294967295|A>>>25),A=V+(F^D&(M^F))+O[1]+3905402710&4294967295,V=D+(A<<12&4294967295|A>>>20),A=F+(M^V&(D^M))+O[2]+606105819&4294967295,F=V+(A<<17&4294967295|A>>>15),A=M+(D^F&(V^D))+O[3]+3250441966&4294967295,M=F+(A<<22&4294967295|A>>>10),A=D+(V^M&(F^V))+O[4]+4118548399&4294967295,D=M+(A<<7&4294967295|A>>>25),A=V+(F^D&(M^F))+O[5]+1200080426&4294967295,V=D+(A<<12&4294967295|A>>>20),A=F+(M^V&(D^M))+O[6]+2821735955&4294967295,F=V+(A<<17&4294967295|A>>>15),A=M+(D^F&(V^D))+O[7]+4249261313&4294967295,M=F+(A<<22&4294967295|A>>>10),A=D+(V^M&(F^V))+O[8]+1770035416&4294967295,D=M+(A<<7&4294967295|A>>>25),A=V+(F^D&(M^F))+O[9]+2336552879&4294967295,V=D+(A<<12&4294967295|A>>>20),A=F+(M^V&(D^M))+O[10]+4294925233&4294967295,F=V+(A<<17&4294967295|A>>>15),A=M+(D^F&(V^D))+O[11]+2304563134&4294967295,M=F+(A<<22&4294967295|A>>>10),A=D+(V^M&(F^V))+O[12]+1804603682&4294967295,D=M+(A<<7&4294967295|A>>>25),A=V+(F^D&(M^F))+O[13]+4254626195&4294967295,V=D+(A<<12&4294967295|A>>>20),A=F+(M^V&(D^M))+O[14]+2792965006&4294967295,F=V+(A<<17&4294967295|A>>>15),A=M+(D^F&(V^D))+O[15]+1236535329&4294967295,M=F+(A<<22&4294967295|A>>>10),A=D+(F^V&(M^F))+O[1]+4129170786&4294967295,D=M+(A<<5&4294967295|A>>>27),A=V+(M^F&(D^M))+O[6]+3225465664&4294967295,V=D+(A<<9&4294967295|A>>>23),A=F+(D^M&(V^D))+O[11]+643717713&4294967295,F=V+(A<<14&4294967295|A>>>18),A=M+(V^D&(F^V))+O[0]+3921069994&4294967295,M=F+(A<<20&4294967295|A>>>12),A=D+(F^V&(M^F))+O[5]+3593408605&4294967295,D=M+(A<<5&4294967295|A>>>27),A=V+(M^F&(D^M))+O[10]+38016083&4294967295,V=D+(A<<9&4294967295|A>>>23),A=F+(D^M&(V^D))+O[15]+3634488961&4294967295,F=V+(A<<14&4294967295|A>>>18),A=M+(V^D&(F^V))+O[4]+3889429448&4294967295,M=F+(A<<20&4294967295|A>>>12),A=D+(F^V&(M^F))+O[9]+568446438&4294967295,D=M+(A<<5&4294967295|A>>>27),A=V+(M^F&(D^M))+O[14]+3275163606&4294967295,V=D+(A<<9&4294967295|A>>>23),A=F+(D^M&(V^D))+O[3]+4107603335&4294967295,F=V+(A<<14&4294967295|A>>>18),A=M+(V^D&(F^V))+O[8]+1163531501&4294967295,M=F+(A<<20&4294967295|A>>>12),A=D+(F^V&(M^F))+O[13]+2850285829&4294967295,D=M+(A<<5&4294967295|A>>>27),A=V+(M^F&(D^M))+O[2]+4243563512&4294967295,V=D+(A<<9&4294967295|A>>>23),A=F+(D^M&(V^D))+O[7]+1735328473&4294967295,F=V+(A<<14&4294967295|A>>>18),A=M+(V^D&(F^V))+O[12]+2368359562&4294967295,M=F+(A<<20&4294967295|A>>>12),A=D+(M^F^V)+O[5]+4294588738&4294967295,D=M+(A<<4&4294967295|A>>>28),A=V+(D^M^F)+O[8]+2272392833&4294967295,V=D+(A<<11&4294967295|A>>>21),A=F+(V^D^M)+O[11]+1839030562&4294967295,F=V+(A<<16&4294967295|A>>>16),A=M+(F^V^D)+O[14]+4259657740&4294967295,M=F+(A<<23&4294967295|A>>>9),A=D+(M^F^V)+O[1]+2763975236&4294967295,D=M+(A<<4&4294967295|A>>>28),A=V+(D^M^F)+O[4]+1272893353&4294967295,V=D+(A<<11&4294967295|A>>>21),A=F+(V^D^M)+O[7]+4139469664&4294967295,F=V+(A<<16&4294967295|A>>>16),A=M+(F^V^D)+O[10]+3200236656&4294967295,M=F+(A<<23&4294967295|A>>>9),A=D+(M^F^V)+O[13]+681279174&4294967295,D=M+(A<<4&4294967295|A>>>28),A=V+(D^M^F)+O[0]+3936430074&4294967295,V=D+(A<<11&4294967295|A>>>21),A=F+(V^D^M)+O[3]+3572445317&4294967295,F=V+(A<<16&4294967295|A>>>16),A=M+(F^V^D)+O[6]+76029189&4294967295,M=F+(A<<23&4294967295|A>>>9),A=D+(M^F^V)+O[9]+3654602809&4294967295,D=M+(A<<4&4294967295|A>>>28),A=V+(D^M^F)+O[12]+3873151461&4294967295,V=D+(A<<11&4294967295|A>>>21),A=F+(V^D^M)+O[15]+530742520&4294967295,F=V+(A<<16&4294967295|A>>>16),A=M+(F^V^D)+O[2]+3299628645&4294967295,M=F+(A<<23&4294967295|A>>>9),A=D+(F^(M|~V))+O[0]+4096336452&4294967295,D=M+(A<<6&4294967295|A>>>26),A=V+(M^(D|~F))+O[7]+1126891415&4294967295,V=D+(A<<10&4294967295|A>>>22),A=F+(D^(V|~M))+O[14]+2878612391&4294967295,F=V+(A<<15&4294967295|A>>>17),A=M+(V^(F|~D))+O[5]+4237533241&4294967295,M=F+(A<<21&4294967295|A>>>11),A=D+(F^(M|~V))+O[12]+1700485571&4294967295,D=M+(A<<6&4294967295|A>>>26),A=V+(M^(D|~F))+O[3]+2399980690&4294967295,V=D+(A<<10&4294967295|A>>>22),A=F+(D^(V|~M))+O[10]+4293915773&4294967295,F=V+(A<<15&4294967295|A>>>17),A=M+(V^(F|~D))+O[1]+2240044497&4294967295,M=F+(A<<21&4294967295|A>>>11),A=D+(F^(M|~V))+O[8]+1873313359&4294967295,D=M+(A<<6&4294967295|A>>>26),A=V+(M^(D|~F))+O[15]+4264355552&4294967295,V=D+(A<<10&4294967295|A>>>22),A=F+(D^(V|~M))+O[6]+2734768916&4294967295,F=V+(A<<15&4294967295|A>>>17),A=M+(V^(F|~D))+O[13]+1309151649&4294967295,M=F+(A<<21&4294967295|A>>>11),A=D+(F^(M|~V))+O[4]+4149444226&4294967295,D=M+(A<<6&4294967295|A>>>26),A=V+(M^(D|~F))+O[11]+3174756917&4294967295,V=D+(A<<10&4294967295|A>>>22),A=F+(D^(V|~M))+O[2]+718787259&4294967295,F=V+(A<<15&4294967295|A>>>17),A=M+(V^(F|~D))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+D&4294967295,R.g[1]=R.g[1]+(F+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.u=function(R,D){D===void 0&&(D=R.length);for(var M=D-this.blockSize,O=this.B,F=this.h,V=0;V<D;){if(F==0)for(;V<=M;)r(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<D;)if(O[F++]=R.charCodeAt(V++),F==this.blockSize){r(this,O),F=0;break}}else for(;V<D;)if(O[F++]=R[V++],F==this.blockSize){r(this,O),F=0;break}}this.h=F,this.o+=D},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var D=1;D<R.length-8;++D)R[D]=0;var M=8*this.o;for(D=R.length-8;D<R.length;++D)R[D]=M&255,M/=256;for(this.u(R),R=Array(16),D=M=0;4>D;++D)for(var O=0;32>O;O+=8)R[M++]=this.g[D]>>>O&255;return R};function o(R,D){var M=l;return Object.prototype.hasOwnProperty.call(M,R)?M[R]:M[R]=D(R)}function a(R,D){this.h=D;for(var M=[],O=!0,F=R.length-1;0<=F;F--){var V=R[F]|0;O&&V==D||(M[F]=V,O=!1)}this.g=M}var l={};function u(R){return-128<=R&&128>R?o(R,function(D){return new a([D|0],0>D?-1:0)}):new a([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return v;if(0>R)return N(f(-R));for(var D=[],M=1,O=0;R>=M;O++)D[O]=R/M|0,M*=4294967296;return new a(D,0)}function m(R,D){if(R.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(R.charAt(0)=="-")return N(m(R.substring(1),D));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=f(Math.pow(D,8)),O=v,F=0;F<R.length;F+=8){var V=Math.min(8,R.length-F),A=parseInt(R.substring(F,F+V),D);8>V?(V=f(Math.pow(D,V)),O=O.j(V).add(f(A))):(O=O.j(M),O=O.add(f(A)))}return O}var v=u(0),E=u(1),b=u(16777216);n=a.prototype,n.m=function(){if(k(this))return-N(this).m();for(var R=0,D=1,M=0;M<this.g.length;M++){var O=this.i(M);R+=(0<=O?O:4294967296+O)*D,D*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x(this))return"0";if(k(this))return"-"+N(this).toString(R);for(var D=f(Math.pow(R,6)),M=this,O="";;){var F=ue(M,D).g;M=G(M,F.j(D));var V=((0<M.g.length?M.g[0]:M.h)>>>0).toString(R);if(M=F,x(M))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function x(R){if(R.h!=0)return!1;for(var D=0;D<R.g.length;D++)if(R.g[D]!=0)return!1;return!0}function k(R){return R.h==-1}n.l=function(R){return R=G(this,R),k(R)?-1:x(R)?0:1};function N(R){for(var D=R.g.length,M=[],O=0;O<D;O++)M[O]=~R.g[O];return new a(M,~R.h).add(E)}n.abs=function(){return k(this)?N(this):this},n.add=function(R){for(var D=Math.max(this.g.length,R.g.length),M=[],O=0,F=0;F<=D;F++){var V=O+(this.i(F)&65535)+(R.i(F)&65535),A=(V>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);O=A>>>16,V&=65535,A&=65535,M[F]=A<<16|V}return new a(M,M[M.length-1]&-2147483648?-1:0)};function G(R,D){return R.add(N(D))}n.j=function(R){if(x(this)||x(R))return v;if(k(this))return k(R)?N(this).j(N(R)):N(N(this).j(R));if(k(R))return N(this.j(N(R)));if(0>this.l(b)&&0>R.l(b))return f(this.m()*R.m());for(var D=this.g.length+R.g.length,M=[],O=0;O<2*D;O++)M[O]=0;for(O=0;O<this.g.length;O++)for(var F=0;F<R.g.length;F++){var V=this.i(O)>>>16,A=this.i(O)&65535,Mt=R.i(F)>>>16,Gn=R.i(F)&65535;M[2*O+2*F]+=A*Gn,ne(M,2*O+2*F),M[2*O+2*F+1]+=V*Gn,ne(M,2*O+2*F+1),M[2*O+2*F+1]+=A*Mt,ne(M,2*O+2*F+1),M[2*O+2*F+2]+=V*Mt,ne(M,2*O+2*F+2)}for(O=0;O<D;O++)M[O]=M[2*O+1]<<16|M[2*O];for(O=D;O<2*D;O++)M[O]=0;return new a(M,0)};function ne(R,D){for(;(R[D]&65535)!=R[D];)R[D+1]+=R[D]>>>16,R[D]&=65535,D++}function X(R,D){this.g=R,this.h=D}function ue(R,D){if(x(D))throw Error("division by zero");if(x(R))return new X(v,v);if(k(R))return D=ue(N(R),D),new X(N(D.g),N(D.h));if(k(D))return D=ue(R,N(D)),new X(N(D.g),D.h);if(30<R.g.length){if(k(R)||k(D))throw Error("slowDivide_ only works with positive integers.");for(var M=E,O=D;0>=O.l(R);)M=Le(M),O=Le(O);var F=me(M,1),V=me(O,1);for(O=me(O,2),M=me(M,2);!x(O);){var A=V.add(O);0>=A.l(R)&&(F=F.add(M),V=A),O=me(O,1),M=me(M,1)}return D=G(R,F.j(D)),new X(F,D)}for(F=v;0<=R.l(D);){for(M=Math.max(1,Math.floor(R.m()/D.m())),O=Math.ceil(Math.log(M)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=f(M),A=V.j(D);k(A)||0<A.l(R);)M-=O,V=f(M),A=V.j(D);x(V)&&(V=E),F=F.add(V),R=G(R,A)}return new X(F,R)}n.A=function(R){return ue(this,R).h},n.and=function(R){for(var D=Math.max(this.g.length,R.g.length),M=[],O=0;O<D;O++)M[O]=this.i(O)&R.i(O);return new a(M,this.h&R.h)},n.or=function(R){for(var D=Math.max(this.g.length,R.g.length),M=[],O=0;O<D;O++)M[O]=this.i(O)|R.i(O);return new a(M,this.h|R.h)},n.xor=function(R){for(var D=Math.max(this.g.length,R.g.length),M=[],O=0;O<D;O++)M[O]=this.i(O)^R.i(O);return new a(M,this.h^R.h)};function Le(R){for(var D=R.g.length+1,M=[],O=0;O<D;O++)M[O]=R.i(O)<<1|R.i(O-1)>>>31;return new a(M,R.h)}function me(R,D){var M=D>>5;D%=32;for(var O=R.g.length-M,F=[],V=0;V<O;V++)F[V]=0<D?R.i(V+M)>>>D|R.i(V+M+1)<<32-D:R.i(V+M);return new a(F,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ZE=xR.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Vs=xR.Integer=a}).apply(typeof MR<"u"?MR:typeof self<"u"?self:typeof window<"u"?window:{});var Yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bo={};var QE,K7,$l,YE,gh,Jg,JE,XE,eC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yg=="object"&&Yg];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function r(d,g){if(g)e:{var y=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var B=d[C];if(!(B in y))break e;y=y[B]}d=d[d.length-1],C=y[d],g=g(C),g!=C&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,C=!1,B={next:function(){if(!C&&y<d.length){var $=y++;return{value:g($,d[$]),done:!1}}return C=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var a=a||{},l=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function m(d,g,y){return d.call.apply(d.bind,arguments)}function v(d,g,y){if(!d)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,C),d.apply(g,B)}}return function(){return d.apply(g,arguments)}}function E(d,g,y){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,E.apply(null,arguments)}function b(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function x(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(C,B,$){for(var oe=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)oe[Ke-2]=arguments[Ke];return g.prototype[B].apply(C,oe)}}function k(d){let g=d.length;if(0<g){let y=Array(g);for(let C=0;C<g;C++)y[C]=d[C];return y}return[]}function N(d,g){for(let y=1;y<arguments.length;y++){let C=arguments[y];if(u(C)){let B=d.length||0,$=C.length||0;d.length=B+$;for(let oe=0;oe<$;oe++)d[B+oe]=C[oe]}else d.push(C)}}class G{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ne(d){return/^[\s\xa0]*$/.test(d)}function X(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function ue(d){return ue[" "](d),d}ue[" "]=function(){};var Le=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function me(d,g,y){for(let C in d)g.call(y,d[C],C,d)}function R(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function D(d){let g={};for(let y in d)g[y]=d[y];return g}let M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(d,g){let y,C;for(let B=1;B<arguments.length;B++){C=arguments[B];for(y in C)d[y]=C[y];for(let $=0;$<M.length;$++)y=M[$],Object.prototype.hasOwnProperty.call(C,y)&&(d[y]=C[y])}}function F(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function V(d){l.setTimeout(()=>{throw d},0)}function A(){var d=we;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Mt{constructor(){this.h=this.g=null}add(g,y){let C=Gn.get();C.set(g,y),this.h?this.h.next=C:this.g=C,this.h=C}}var Gn=new G(()=>new W,d=>d.reset());class W{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,Z=!1,we=new Mt,Je=()=>{let d=l.Promise.resolve(void 0);ge=()=>{d.then(Ct)}};var Ct=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(y){V(y)}var g=Gn;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}Z=!1};function Fe(){this.s=this.s,this.C=this.C}Fe.prototype.s=!1,Fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};l.addEventListener("test",y,g),l.removeEventListener("test",y,g)}catch{}return d}();function dn(d,g){if(Ie.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(Le){e:{try{ue(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Di[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&dn.aa.h.call(this)}}x(dn,Ie);var Di={2:"touch",3:"pen",4:"mouse"};dn.prototype.h=function(){dn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),ri=0;function hn(d,g,y,C,B){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!C,this.ha=B,this.key=++ri,this.da=this.fa=!1}function Nn(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Mi(d){this.src=d,this.g={},this.h=0}Mi.prototype.add=function(d,g,y,C,B){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var oe=yc(d,g,C,B);return-1<oe?(g=d[oe],y||(g.fa=!1)):(g=new hn(g,this.src,$,!!C,B),g.fa=y,d.push(g)),g};function vu(d,g){var y=g.type;if(y in d.g){var C=d.g[y],B=Array.prototype.indexOf.call(C,g,void 0),$;($=0<=B)&&Array.prototype.splice.call(C,B,1),$&&(Nn(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function yc(d,g,y,C){for(var B=0;B<d.length;++B){var $=d[B];if(!$.da&&$.listener==g&&$.capture==!!y&&$.ha==C)return B}return-1}var wc="closure_lm_"+(1e6*Math.random()|0),Zs={};function Qs(d,g,y,C,B){if(C&&C.once)return bc(d,g,y,C,B);if(Array.isArray(g)){for(var $=0;$<g.length;$++)Qs(d,g[$],y,C,B);return null}return y=Ic(y),d&&d[kt]?d.K(g,y,f(C)?!!C.capture:!!C,B):nf(d,g,y,!1,C,B)}function nf(d,g,y,C,B,$){if(!g)throw Error("Invalid event type");var oe=f(B)?!!B.capture:!!B,Ke=Ys(d);if(Ke||(d[wc]=Ke=new Mi(d)),y=Ke.add(g,y,C,oe,$),y.proxy)return y;if(C=rf(),y.proxy=C,C.src=d,C.listener=y,d.addEventListener)Ee||(B=oe),B===void 0&&(B=!1),d.addEventListener(g.toString(),C,B);else if(d.attachEvent)d.attachEvent(of(g.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function rf(){function d(y){return g.call(d.src,d.listener,y)}let g=mv;return d}function bc(d,g,y,C,B){if(Array.isArray(g)){for(var $=0;$<g.length;$++)bc(d,g[$],y,C,B);return null}return y=Ic(y),d&&d[kt]?d.L(g,y,f(C)?!!C.capture:!!C,B):nf(d,g,y,!0,C,B)}function yu(d,g,y,C,B){if(Array.isArray(g))for(var $=0;$<g.length;$++)yu(d,g[$],y,C,B);else C=f(C)?!!C.capture:!!C,y=Ic(y),d&&d[kt]?(d=d.i,g=String(g).toString(),g in d.g&&($=d.g[g],y=yc($,y,C,B),-1<y&&(Nn($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete d.g[g],d.h--)))):d&&(d=Ys(d))&&(g=d.g[g.toString()],d=-1,g&&(d=yc(g,y,C,B)),(y=-1<d?g[d]:null)&&Ec(y))}function Ec(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[kt])vu(g.i,d);else{var y=d.type,C=d.proxy;g.removeEventListener?g.removeEventListener(y,C,d.capture):g.detachEvent?g.detachEvent(of(y),C):g.addListener&&g.removeListener&&g.removeListener(C),(y=Ys(g))?(vu(y,d),y.h==0&&(y.src=null,g[wc]=null)):Nn(d)}}}function of(d){return d in Zs?Zs[d]:Zs[d]="on"+d}function mv(d,g){if(d.da)d=!0;else{g=new dn(g,this);var y=d.listener,C=d.ha||d.src;d.fa&&Ec(d),d=y.call(C,g)}return d}function Ys(d){return d=d[wc],d instanceof Mi?d:null}var Cc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ic(d){return typeof d=="function"?d:(d[Cc]||(d[Cc]=function(g){return d.handleEvent(g)}),d[Cc])}function fn(){Fe.call(this),this.i=new Mi(this),this.M=this,this.F=null}x(fn,Fe),fn.prototype[kt]=!0,fn.prototype.removeEventListener=function(d,g,y,C){yu(this,d,g,y,C)};function pn(d,g){var y,C=d.F;if(C)for(y=[];C;C=C.F)y.push(C);if(d=d.M,C=g.type||g,typeof g=="string")g=new Ie(g,d);else if(g instanceof Ie)g.target=g.target||d;else{var B=g;g=new Ie(C,d),O(g,B)}if(B=!0,y)for(var $=y.length-1;0<=$;$--){var oe=g.g=y[$];B=Js(oe,C,!0,g)&&B}if(oe=g.g=d,B=Js(oe,C,!0,g)&&B,B=Js(oe,C,!1,g)&&B,y)for($=0;$<y.length;$++)oe=g.g=y[$],B=Js(oe,C,!1,g)&&B}fn.prototype.N=function(){if(fn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],C=0;C<y.length;C++)Nn(y[C]);delete d.g[g],d.h--}}this.F=null},fn.prototype.K=function(d,g,y,C){return this.i.add(String(d),g,!1,y,C)},fn.prototype.L=function(d,g,y,C){return this.i.add(String(d),g,!0,y,C)};function Js(d,g,y,C){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,$=0;$<g.length;++$){var oe=g[$];if(oe&&!oe.da&&oe.capture==y){var Ke=oe.listener,Vt=oe.ha||oe.src;oe.fa&&vu(d.i,oe),B=Ke.call(Vt,C)!==!1&&B}}return B&&!C.defaultPrevented}function sf(d,g,y){if(typeof d=="function")y&&(d=E(d,y));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(d,g||0)}function wu(d){d.g=sf(()=>{d.g=null,d.i&&(d.i=!1,wu(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class bu extends Fe{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:wu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qo(d){Fe.call(this),this.h=d,this.g={}}x(qo,Fe);var af=[];function Go(d){me(d.g,function(g,y){this.g.hasOwnProperty(y)&&Ec(g)},d),d.g={}}qo.prototype.N=function(){qo.aa.N.call(this),Go(this)},qo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eu=l.JSON.stringify,gv=l.JSON.parse,cf=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Tc(){}Tc.prototype.h=null;function Cu(d){return d.h||(d.h=d.i())}function lf(){}var Xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Iu(){Ie.call(this,"d")}x(Iu,Ie);function Tu(){Ie.call(this,"c")}x(Tu,Ie);var Xr={},uf=null;function Wo(){return uf=uf||new fn}Xr.La="serverreachability";function df(d){Ie.call(this,Xr.La,d)}x(df,Ie);function ea(d){let g=Wo();pn(g,new df(g))}Xr.STAT_EVENT="statevent";function hf(d,g){Ie.call(this,Xr.STAT_EVENT,d),this.stat=g}x(hf,Ie);function Cn(d){let g=Wo();pn(g,new hf(g,d))}Xr.Ma="timingevent";function oi(d,g){Ie.call(this,Xr.Ma,d),this.size=g}x(oi,Ie);function _e(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},g)}function Ko(){this.g=!0}Ko.prototype.xa=function(){this.g=!1};function ff(d,g,y,C,B,$){d.info(function(){if(d.g)if($)for(var oe="",Ke=$.split("&"),Vt=0;Vt<Ke.length;Vt++){var ot=Ke[Vt].split("=");if(1<ot.length){var Pt=ot[0];ot=ot[1];var mn=Pt.split("_");oe=2<=mn.length&&mn[1]=="type"?oe+(Pt+"="+ot+"&"):oe+(Pt+"=redacted&")}}else oe=null;else oe=$;return"XMLHTTP REQ ("+C+") [attempt "+B+"]: "+g+`
`+y+`
`+oe})}function pf(d,g,y,C,B,$,oe){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+B+"]: "+g+`
`+y+`
`+$+" "+oe})}function eo(d,g,y,C){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+mf(d,y)+(C?" "+C:"")})}function Su(d,g){d.info(function(){return"TIMEOUT: "+g})}Ko.prototype.info=function(){};function mf(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var C=y[d];if(!(2>C.length)){var B=C[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var oe=1;oe<B.length;oe++)B[oe]=""}}}}return Eu(y)}catch{return g}}var Ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Du={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mu;function Sc(){}x(Sc,Tc),Sc.prototype.g=function(){return new XMLHttpRequest},Sc.prototype.i=function(){return{}},Mu=new Sc;function mr(d,g,y,C){this.j=d,this.i=g,this.l=y,this.R=C||1,this.U=new qo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gf}function gf(){this.i=null,this.g="",this.h=!1}var xu={},Pu={};function Zo(d,g,y){d.L=1,d.v=Yo(In(g)),d.m=y,d.P=!0,_f(d,null)}function _f(d,g){d.F=Date.now(),Dc(d),d.A=In(d.v);var y=d.A,C=d.R;Array.isArray(C)||(C=[String(C)]),wt(y.i,"t",C),d.C=0,y=d.j.J,d.h=new gf,d.g=ha(d.j,y?g:null,!d.m),0<d.O&&(d.M=new bu(E(d.Y,d,d.g),d.O)),g=d.U,y=d.g,C=d.ca;var B="readystatechange";Array.isArray(B)||(B&&(af[0]=B.toString()),B=af);for(var $=0;$<B.length;$++){var oe=Qs(y,B[$],C||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=d.H?D(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),ea(),ff(d.i,d.u,d.A,d.l,d.R,d.m)}mr.prototype.ca=function(d){d=d.target;let g=this.M;g&&ai(d)==3?g.j():this.Y(d)},mr.prototype.Y=function(d){try{if(d==this.g)e:{let mn=ai(this.g);var g=this.g.Ba();let li=this.g.Z();if(!(3>mn)&&(mn!=3||this.g&&(this.h.h||this.g.oa()||If(this.g)))){this.J||mn!=4||g==7||(g==8||0>=li?ea(3):ea(2)),ta(this);var y=this.g.Z();this.X=y;t:if(vf(this)){var C=If(this.g);d="";var B=C.length,$=ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gr(this),Zi(this);var oe="";break t}this.h.i=new l.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,d+=this.h.i.decode(C[g],{stream:!($&&g==B-1)});C.length=0,this.h.g+=d,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=y==200,pf(this.i,this.u,this.A,this.l,this.R,mn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Vt=this.g;if((Ke=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Ke)){var ot=Ke;break t}}ot=null}if(y=ot)eo(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mc(this,y);else{this.o=!1,this.s=3,Cn(12),gr(this),Zi(this);break e}}if(this.P){y=!0;let ui;for(;!this.J&&this.C<oe.length;)if(ui=_v(this,oe),ui==Pu){mn==4&&(this.s=4,Cn(14),y=!1),eo(this.i,this.l,null,"[Incomplete Response]");break}else if(ui==xu){this.s=4,Cn(15),eo(this.i,this.l,oe,"[Invalid Chunk]"),y=!1;break}else eo(this.i,this.l,ui,null),Mc(this,ui);if(vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mn!=4||oe.length!=0||this.h.h||(this.s=1,Cn(16),y=!1),this.o=this.o&&y,!y)eo(this.i,this.l,oe,"[Invalid Chunked Response]"),gr(this),Zi(this);else if(0<oe.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),kc(Pt),Pt.M=!0,Cn(11))}}else eo(this.i,this.l,oe,null),Mc(this,oe);mn==4&&gr(this),this.o&&!this.J&&(mn==4?Mf(this.j,this):(this.o=!1,Dc(this)))}else Tf(this.g),y==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Cn(12)):(this.s=0,Cn(13)),gr(this),Zi(this)}}}catch{}finally{}};function vf(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function _v(d,g){var y=d.C,C=g.indexOf(`
`,y);return C==-1?Pu:(y=Number(g.substring(y,C)),isNaN(y)?xu:(C+=1,C+y>g.length?Pu:(g=g.slice(C,C+y),d.C=C+y,g)))}mr.prototype.cancel=function(){this.J=!0,gr(this)};function Dc(d){d.S=Date.now()+d.I,yf(d,d.I)}function yf(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=_e(E(d.ba,d),g)}function ta(d){d.B&&(l.clearTimeout(d.B),d.B=null)}mr.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Su(this.i,this.A),this.L!=2&&(ea(),Cn(17)),gr(this),this.s=2,Zi(this)):yf(this,this.S-d)};function Zi(d){d.j.G==0||d.J||Mf(d.j,d)}function gr(d){ta(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Go(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Mc(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||_r(y.h,d))){if(!d.K&&_r(y.h,d)&&y.G==3){try{var C=y.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var B=C;if(B[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)Nc(y),Ac(y);else break e;zu(y),Cn(18)}}else y.za=B[1],0<y.za-y.T&&37500>B[2]&&y.F&&y.v==0&&!y.C&&(y.C=_e(E(y.Za,y),6e3));if(1>=ia(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ro(y,11)}else if((d.K||y.g==d)&&Nc(y),!ne(g))for(B=y.Da.g.parse(g),g=0;g<B.length;g++){let ot=B[g];if(y.T=ot[0],ot=ot[1],y.G==2)if(ot[0]=="c"){y.K=ot[1],y.ia=ot[2];let Pt=ot[3];Pt!=null&&(y.la=Pt,y.j.info("VER="+y.la));let mn=ot[4];mn!=null&&(y.Aa=mn,y.j.info("SVER="+y.Aa));let li=ot[5];li!=null&&typeof li=="number"&&0<li&&(C=1.5*li,y.L=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;let ui=d.g;if(ui){let br=ui.g?ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(br){var $=C.h;$.g||br.indexOf("spdy")==-1&&br.indexOf("quic")==-1&&br.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(vr($,$.h),$.h=null))}if(C.D){let Vc=ui.g?ui.g.getResponseHeader("X-HTTP-Session-Id"):null;Vc&&(C.ya=Vc,mt(C.I,C.D,Vc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),C=y;var oe=d;if(C.qa=qu(C,C.J?C.ia:null,C.W),oe.K){xc(C.h,oe);var Ke=oe,Vt=C.L;Vt&&(Ke.I=Vt),Ke.B&&(ta(Ke),Dc(Ke)),C.g=oe}else Oc(C);0<y.i.length&&Rc(y)}else ot[0]!="stop"&&ot[0]!="close"||ro(y,7);else y.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?ro(y,7):da(y):ot[0]!="noop"&&y.l&&y.l.ta(ot),y.v=0)}}ea(4)}catch{}}var na=class{constructor(d,g){this.g=d,this.map=g}};function it(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xt(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ia(d){return d.h?1:d.g?d.g.size:0}function _r(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function vr(d,g){d.g?d.g.add(g):d.h=g}function xc(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}it.prototype.cancel=function(){if(this.i=Ve(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Ve(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return k(d.i)}function jt(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,C=0;C<y;C++)g.push(d[C]);return g}g=[],y=0;for(C in d)g[y++]=d[C];return g}function Au(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let C in d)g[y++]=C;return g}}}function ra(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=Au(d),C=jt(d),B=C.length,$=0;$<B;$++)g.call(void 0,C[$],y&&y[$],d)}var Ln=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vv(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var C=d[y].indexOf("="),B=null;if(0<=C){var $=d[y].substring(0,C);B=d[y].substring(C+1)}else $=d[y];g($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function xi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof xi){this.h=d.h,Nt(this,d.j),this.o=d.o,this.g=d.g,Pi(this,d.s),this.l=d.l;var g=d.i,y=new no;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Qo(this,y),this.m=d.m}else d&&(g=String(d).match(Ln))?(this.h=!1,Nt(this,g[1]||"",!0),this.o=Qi(g[2]||""),this.g=Qi(g[3]||"",!0),Pi(this,g[4]),this.l=Qi(g[5]||"",!0),Qo(this,g[6]||"",!0),this.m=Qi(g[7]||"")):(this.h=!1,this.i=new no(null,this.h))}xi.prototype.toString=function(){var d=[],g=this.j;g&&d.push(to(g,oa,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(to(g,oa,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(to(y,y.charAt(0)=="/"?ku:Ou,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",to(y,wf)),d.join("")};function In(d){return new xi(d)}function Nt(d,g,y){d.j=y?Qi(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Pi(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Qo(d,g,y){g instanceof no?(d.i=g,Nu(d.i,d.h)):(y||(g=to(g,Pc)),d.i=new no(g,d.h))}function mt(d,g,y){d.i.set(g,y)}function Yo(d){return mt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Qi(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function to(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,Ru),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Ru(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var oa=/[#\/\?@]/g,Ou=/[#\?:]/g,ku=/[#\?]/g,Pc=/[#\?@]/g,wf=/#/g;function no(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function yr(d){d.g||(d.g=new Map,d.h=0,d.i&&vv(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=no.prototype,n.add=function(d,g){yr(this),this.i=null,d=io(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function Oe(d,g){yr(d),g=io(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function si(d,g){return yr(d),g=io(d,g),d.g.has(g)}n.forEach=function(d,g){yr(this),this.g.forEach(function(y,C){y.forEach(function(B){d.call(g,B,C,this)},this)},this)},n.na=function(){yr(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let C=0;C<g.length;C++){let B=d[C];for(let $=0;$<B.length;$++)y.push(g[C])}return y},n.V=function(d){yr(this);let g=[];if(typeof d=="string")si(this,d)&&(g=g.concat(this.g.get(io(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},n.set=function(d,g){return yr(this),this.i=null,d=io(this,d),si(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function wt(d,g,y){Oe(d,g),0<y.length&&(d.i=null,d.g.set(io(d,g),k(y)),d.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var C=g[y];let $=encodeURIComponent(String(C)),oe=this.V(C);for(C=0;C<oe.length;C++){var B=$;oe[C]!==""&&(B+="="+encodeURIComponent(String(oe[C]))),d.push(B)}}return this.i=d.join("&")};function io(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Nu(d,g){g&&!d.j&&(yr(d),d.i=null,d.g.forEach(function(y,C){var B=C.toLowerCase();C!=B&&(Oe(this,C),wt(this,B,y))},d)),d.j=g}function Lu(d,g){let y=new Ko;if(l.Image){let C=new Image;C.onload=b(Dn,y,"TestLoadImage: loaded",!0,g,C),C.onerror=b(Dn,y,"TestLoadImage: error",!1,g,C),C.onabort=b(Dn,y,"TestLoadImage: abort",!1,g,C),C.ontimeout=b(Dn,y,"TestLoadImage: timeout",!1,g,C),l.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else g(!1)}function Fu(d,g){let y=new Ko,C=new AbortController,B=setTimeout(()=>{C.abort(),Dn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:C.signal}).then($=>{clearTimeout(B),$.ok?Dn(y,"TestPingServer: ok",!0,g):Dn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Dn(y,"TestPingServer: error",!1,g)})}function Dn(d,g,y,C,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),C(y)}catch{}}function Vu(){this.g=new cf}function sa(d,g,y){let C=y||"";try{ra(d,function(B,$){let oe=B;f(B)&&(oe=Eu(B)),g.push(C+$+"="+encodeURIComponent(oe))})}catch(B){throw g.push(C+"type="+encodeURIComponent("_badmap")),B}}function zt(d){this.l=d.Ub||null,this.j=d.eb||!1}x(zt,Tc),zt.prototype.g=function(){return new Ai(this.l,this.j)},zt.prototype.i=function(d){return function(){return d}}({});function Ai(d,g){fn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ai,fn),n=Ai.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,aa(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jo(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Jo(this):aa(this),this.readyState==3&&Bu(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Jo(this))},n.Qa=function(d){this.g&&(this.response=d,Jo(this))},n.ga=function(){this.g&&Jo(this)};function Jo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,aa(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function aa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Uu(d){let g="";return me(d,function(y,C){g+=C,g+=":",g+=y,g+=`\r
`}),g}function ca(d,g,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=Uu(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):mt(d,g,y))}function Ft(d){fn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ft,fn);var bf=/^https?$/i,Xe=["POST","PUT"];n=Ft.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mu.g(),this.v=this.o?Cu(this.o):Cu(Mu),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch($){Ef(this,$);return}if(d=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var B in C)y.set(B,C[B]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(let $ of C.keys())y.set($,C.get($));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),B=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Xe,g,void 0))||C||B||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[$,oe]of y)this.g.setRequestHeader($,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cf(this),this.u=!0,this.g.send(d),this.u=!1}catch($){Ef(this,$)}};function Ef(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,Wn(d),la(d)}function Wn(d){d.A||(d.A=!0,pn(d,"complete"),pn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,pn(this,"complete"),pn(this,"abort"),la(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),Ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Xo(this):this.bb())},n.bb=function(){Xo(this)};function Xo(d){if(d.h&&typeof a<"u"&&(!d.v[1]||ai(d)!=4||d.Z()!=2)){if(d.u&&ai(d)==4)sf(d.Ea,0,d);else if(pn(d,"readystatechange"),ai(d)==4){d.h=!1;try{let oe=d.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var C;if(C=oe===0){var B=String(d.D).match(Ln)[1]||null;!B&&l.self&&l.self.location&&(B=l.self.location.protocol.slice(0,-1)),C=!bf.test(B?B.toLowerCase():"")}y=C}if(y)pn(d,"complete"),pn(d,"success");else{d.m=6;try{var $=2<ai(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",Wn(d)}}finally{la(d)}}}}function la(d,g){if(d.g){Cf(d);let y=d.g,C=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||pn(d,"ready");try{y.onreadystatechange=C}catch{}}}function Cf(d){d.I&&(l.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function ai(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),gv(g)}};function If(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Tf(d){let g={};d=(d.g&&2<=ai(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(ne(d[C]))continue;var y=F(d[C]);let B=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let $=g[B]||[];g[B]=$,$.push(y)}R(g,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function Sf(d){this.Aa=0,this.i=[],this.j=new Ko,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,d),this.cb=ua("retryDelaySeedMs",1e4,d),this.Wa=ua("forwardChannelMaxRetries",2,d),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new it(d&&d.concurrentRequestLimit),this.Da=new Vu,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sf.prototype,n.la=8,n.G=1,n.connect=function(d,g,y,C){Cn(0),this.W=d,this.H=g||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.I=qu(this,null,this.W),Rc(this)};function da(d){if(ci(d),d.G==3){var g=d.U++,y=In(d.I);if(mt(y,"SID",d.K),mt(y,"RID",g),mt(y,"TYPE","terminate"),es(d,y),g=new mr(d,d.j,g),g.L=2,g.v=Yo(In(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=g.v,y=!0),y||(g.g=ha(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Dc(g)}Hu(d)}function Ac(d){d.g&&(kc(d),d.g.cancel(),d.g=null)}function ci(d){Ac(d),d.u&&(l.clearTimeout(d.u),d.u=null),Nc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Rc(d){if(!xt(d.h)&&!d.s){d.s=!0;var g=d.Ga;ge||Je(),Z||(ge(),Z=!0),we.add(g,d),d.B=0}}function Df(d,g){return ia(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=_e(E(d.Ga,d,g),Lc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let B=new mr(this,this.j,d),$=this.o;if(this.S&&($?($=D($),O($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=ju(this,B,g),y=In(this.I),mt(y,"RID",d),mt(y,"CVER",22),this.D&&mt(y,"X-HTTP-Session-Id",this.D),es(this,y),$&&(this.O?g="headers="+encodeURIComponent(String(Uu($)))+"&"+g:this.m&&ca(y,this.m,$)),vr(this.h,B),this.Ua&&mt(y,"TYPE","init"),this.P?(mt(y,"$req",g),mt(y,"SID","null"),B.T=!0,Zo(B,y,null)):Zo(B,y,g),this.G=2}}else this.G==3&&(d?Yi(this,d):this.i.length==0||xt(this.h)||Yi(this))};function Yi(d,g){var y;g?y=g.l:y=d.U++;let C=In(d.I);mt(C,"SID",d.K),mt(C,"RID",y),mt(C,"AID",d.T),es(d,C),d.m&&d.o&&ca(C,d.m,d.o),y=new mr(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=ju(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),vr(d.h,y),Zo(y,C,g)}function es(d,g){d.H&&me(d.H,function(y,C){mt(g,C,y)}),d.l&&ra({},function(y,C){mt(g,C,y)})}function ju(d,g,y){y=Math.min(d.i.length,y);var C=d.l?E(d.l.Na,d.l,d):null;e:{var B=d.i;let $=-1;for(;;){let oe=["count="+y];$==-1?0<y?($=B[0].g,oe.push("ofs="+$)):$=0:oe.push("ofs="+$);let Ke=!0;for(let Vt=0;Vt<y;Vt++){let ot=B[Vt].g,Pt=B[Vt].map;if(ot-=$,0>ot)$=Math.max(0,B[Vt].g-100),Ke=!1;else try{sa(Pt,oe,"req"+ot+"_")}catch{C&&C(Pt)}}if(Ke){C=oe.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,C}function Oc(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;ge||Je(),Z||(ge(),Z=!0),we.add(g,d),d.v=0}}function zu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=_e(E(d.Fa,d),Lc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,$u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=_e(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Cn(10),Ac(this),$u(this))};function kc(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function $u(d){d.g=new mr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=In(d.qa);mt(g,"RID","rpc"),mt(g,"SID",d.K),mt(g,"AID",d.T),mt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&mt(g,"TO",d.ja),mt(g,"TYPE","xmlhttp"),es(d,g),d.m&&d.o&&ca(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=Yo(In(g)),y.m=null,y.P=!0,_f(y,d)}n.Za=function(){this.C!=null&&(this.C=null,Ac(this),zu(this),Cn(19))};function Nc(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Mf(d,g){var y=null;if(d.g==g){Nc(d),kc(d),d.g=null;var C=2}else if(_r(d.h,g))y=g.D,xc(d.h,g),C=1;else return;if(d.G!=0){if(g.o)if(C==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var B=d.B;C=Wo(),pn(C,new oi(C,y)),Rc(d)}else Oc(d);else if(B=g.s,B==3||B==0&&0<g.X||!(C==1&&Df(d,g)||C==2&&zu(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),B){case 1:ro(d,5);break;case 4:ro(d,10);break;case 3:ro(d,6);break;default:ro(d,2)}}}function Lc(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function ro(d,g){if(d.j.info("Error code "+g),g==2){var y=E(d.fb,d),C=d.Xa;let B=!C;C=new xi(C||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Nt(C,"https"),Yo(C),B?Lu(C.toString(),y):Fu(C.toString(),y)}else Cn(2);d.G=0,d.l&&d.l.sa(g),Hu(d),ci(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Cn(2)):(this.j.info("Failed to ping google.com"),Cn(1))};function Hu(d){if(d.G=0,d.ka=[],d.l){let g=Ve(d.h);(g.length!=0||d.i.length!=0)&&(N(d.ka,g),N(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function qu(d,g,y){var C=y instanceof xi?In(y):new xi(y);if(C.g!="")g&&(C.g=g+"."+C.g),Pi(C,C.s);else{var B=l.location;C=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var $=new xi(null);C&&Nt($,C),g&&($.g=g),B&&Pi($,B),y&&($.l=y),C=$}return y=d.D,g=d.ya,y&&g&&mt(C,y,g),mt(C,"VER",d.la),es(d,C),C}function ha(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Ft(new zt({eb:y})):new Ft(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wr(){}n=wr.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fc(){}Fc.prototype.g=function(d,g){return new on(d,g)};function on(d,g){fn.call(this),this.g=new Sf(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!ne(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ne(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new oo(this)}x(on,fn),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){da(this.g)},on.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=Eu(d),d=y);g.i.push(new na(g.Ya++,d)),g.G==3&&Rc(g)},on.prototype.N=function(){this.g.l=null,delete this.j,da(this.g),delete this.g,on.aa.N.call(this)};function Fn(d){Iu.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}x(Fn,Iu);function Gu(){Tu.call(this),this.status=1}x(Gu,Tu);function oo(d){this.g=d}x(oo,wr),oo.prototype.ua=function(){pn(this.g,"a")},oo.prototype.ta=function(d){pn(this.g,new Fn(d))},oo.prototype.sa=function(d){pn(this.g,new Gu)},oo.prototype.ra=function(){pn(this.g,"b")},Fc.prototype.createWebChannel=Fc.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,eC=Bo.createWebChannelTransport=function(){return new Fc},XE=Bo.getStatEventTarget=function(){return Wo()},JE=Bo.Event=Xr,Jg=Bo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,gh=Bo.ErrorCode=Ki,Du.COMPLETE="complete",YE=Bo.EventType=Du,lf.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",fn.prototype.listen=fn.prototype.K,$l=Bo.WebChannel=lf,K7=Bo.FetchXmlHttpFactory=zt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,QE=Bo.XhrIo=Ft}).apply(typeof Yg<"u"?Yg:typeof self<"u"?self:typeof window<"u"?window:{});var PR="@firebase/firestore";var En=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");var cu="10.14.0";var ic=new Ps("@firebase/firestore");function _h(){return ic.logLevel}function ye(n,...e){if(ic.logLevel<=tt.DEBUG){let t=e.map(BI);ic.debug(`Firestore (${cu}): ${n}`,...t)}}function jo(n,...e){if(ic.logLevel<=tt.ERROR){let t=e.map(BI);ic.error(`Firestore (${cu}): ${n}`,...t)}}function Yl(n,...e){if(ic.logLevel<=tt.WARN){let t=e.map(BI);ic.warn(`Firestore (${cu}): ${n}`,...t)}}function BI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Pe(n="Unexpected state"){let e=`FIRESTORE (${cu}) INTERNAL ASSERTION FAILED: `+n;throw jo(e),new Error(e)}function Et(n,e){n||Pe()}function Ne(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ae=class extends Ci{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var hr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var i_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},oC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(En.UNAUTHENTICATED))}shutdown(){}},sC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},aC=class{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Et(this.o===void 0);let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),o=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hr,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>T(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},l=u=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?l(u):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hr)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Et(typeof i.accessToken=="string"),new i_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string"),new En(e)}},cC=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=En.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},lC=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new cC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uC=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},dC=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Et(this.o===void 0);let i=o=>{o.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,ye("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et(typeof t.token=="string"),this.R=t.token,new uC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Z7(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var r_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=Z7(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%e.length))}return i}};function pt(n,e){return n<e?-1:n>e?1:0}function Jl(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var qt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ae(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pt(this.nanoseconds,e.nanoseconds):pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var je=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new qt(0,0))}static max(){return new n(new qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var o_=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Pe(),i===void 0?i=e.length-t:i>e.length-t&&Pe(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=e.get(r),a=t.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ut=class n extends o_{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new ae(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},Q7=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ti=class n extends o_{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return Q7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new ae(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},a=!1;for(;r<e.length;){let l=e[r];if(l==="\\"){if(r+1===e.length)throw new ae(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ae(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(o(),r++)}if(o(),a)throw new ae(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Te=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ut.fromString(e))}static fromName(e){return new n(Ut.fromString(e).popFirst(5))}static empty(){return new n(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ut(e.slice()))}};var hC=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};hC.UNKNOWN_ID=-1;function Y7(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=je.fromTimestamp(i===1e9?new qt(t+1,0):new qt(t,i));return new rc(r,Te.empty(),e)}function J7(n){return new rc(n.readTime,n.key,-1)}var rc=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(je.min(),Te.empty(),-1)}static max(){return new n(je.max(),Te.empty(),-1)}};function X7(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:pt(n.largestBatchId,e.largestBatchId))}var e9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fC=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Bh(n){return T(this,null,function*(){if(n.code!==q.FAILED_PRECONDITION||n.message!==e9)throw n;ye("LocalStore","Unexpectedly lost primary lease")})}var ie=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++o,a&&o===r&&t()},u=>i(u))}),a=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,a=new Array(o),l=0;for(let u=0;u<o;u++){let f=u;t(e[f]).next(m=>{a[f]=m,++l,l===o&&i(a)},m=>r(m))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};function t9(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Uh(n){return n.name==="IndexedDbTransactionError"}var uO=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function F_(n){return n==null}function Eh(n){return n===0&&1/n==-1/0}function n9(n){return typeof n=="number"&&Number.isInteger(n)&&!Eh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var i9=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$ne=[...i9,"documentOverlays"],r9=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],o9=r9,s9=[...o9,"indexConfiguration","indexState","indexEntries"];var Hne=[...s9,"globals"];function AR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Gt=class n{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wl(this.root,e,this.comparator,!0)}},Wl=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gr=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();let e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}};Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1;Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,t,i,r,o){return this}insert(e,t,i){return new Gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var On=class n{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new s_(this.data.getIterator())}getIteratorFrom(e){return new s_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},s_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $i=class n{constructor(e){this.fields=e,e.sort(Ti.comparator)}static empty(){return new n([])}unionWith(e){let t=new On(Ti.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var a_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var kn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new a_("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};kn.EMPTY_BYTE_STRING=new kn("");var a9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(n){if(Et(!!n),typeof n=="string"){let e=0,t=a9.exec(n);if(Et(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bt(n.seconds),nanos:Bt(n.nanos)}}function Bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Us(n){return typeof n=="string"?kn.fromBase64String(n):kn.fromUint8Array(n)}function V_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function UI(n){let e=n.mapValue.fields.__previous_value__;return V_(e)?UI(e):e}function Ch(n){let e=zo(n.mapValue.fields.__local_write_time__.timestampValue);return new qt(e.seconds,e.nanos)}var pC=class{constructor(e,t,i,r,o,a,l,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f}},c_=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Xg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function oc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?V_(n)?4:fO(n)?9007199254740991:hO(n)?10:11:Pe()}function Zr(n,e){if(n===e)return!0;let t=oc(n);if(t!==oc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ch(n).isEqual(Ch(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=zo(r.timestampValue),l=zo(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,o){return Us(r.bytesValue).isEqual(Us(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Bt(r.geoPointValue.latitude)===Bt(o.geoPointValue.latitude)&&Bt(r.geoPointValue.longitude)===Bt(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Bt(r.integerValue)===Bt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=Bt(r.doubleValue),l=Bt(o.doubleValue);return a===l?Eh(a)===Eh(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Jl(n.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(r,o){let a=r.mapValue.fields||{},l=o.mapValue.fields||{};if(AR(a)!==AR(l))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Zr(a[u],l[u])))return!1;return!0}(n,e);default:return Pe()}}function Ih(n,e){return(n.values||[]).find(t=>Zr(t,e))!==void 0}function Xl(n,e){if(n===e)return 0;let t=oc(n),i=oc(e);if(t!==i)return pt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return pt(n.booleanValue,e.booleanValue);case 2:return function(o,a){let l=Bt(o.integerValue||o.doubleValue),u=Bt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return RR(n.timestampValue,e.timestampValue);case 4:return RR(Ch(n),Ch(e));case 5:return pt(n.stringValue,e.stringValue);case 6:return function(o,a){let l=Us(o),u=Us(a);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let l=o.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){let m=pt(l[f],u[f]);if(m!==0)return m}return pt(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let l=pt(Bt(o.latitude),Bt(a.latitude));return l!==0?l:pt(Bt(o.longitude),Bt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return OR(n.arrayValue,e.arrayValue);case 10:return function(o,a){var l,u,f,m;let v=o.fields||{},E=a.fields||{},b=(l=v.value)===null||l===void 0?void 0:l.arrayValue,x=(u=E.value)===null||u===void 0?void 0:u.arrayValue,k=pt(((f=b?.values)===null||f===void 0?void 0:f.length)||0,((m=x?.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:OR(b,x)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===Xg.mapValue&&a===Xg.mapValue)return 0;if(o===Xg.mapValue)return 1;if(a===Xg.mapValue)return-1;let l=o.fields||{},u=Object.keys(l),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let v=0;v<u.length&&v<m.length;++v){let E=pt(u[v],m[v]);if(E!==0)return E;let b=Xl(l[u[v]],f[m[v]]);if(b!==0)return b}return pt(u.length,m.length)}(n.mapValue,e.mapValue);default:throw Pe()}}function RR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pt(n,e);let t=zo(n),i=zo(e),r=pt(t.seconds,i.seconds);return r!==0?r:pt(t.nanos,i.nanos)}function OR(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let o=Xl(t[r],i[r]);if(o)return o}return pt(t.length,i.length)}function eu(n){return mC(n)}function mC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=zo(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Us(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=mC(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${mC(t.fields[a])}`;return r+"}"}(n.mapValue):Pe()}function l_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gC(n){return!!n&&"integerValue"in n}function jI(n){return!!n&&"arrayValue"in n}function kR(n){return!!n&&"nullValue"in n}function NR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function t_(n){return!!n&&"mapValue"in n}function hO(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function yh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return lc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=yh(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ii=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!t_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yh(t)}setAll(e){let t=Ti.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){let u=this.getFieldsMap(t);this.applyChanges(u,i,r),i={},r=[],t=l.popLast()}a?i[l.lastSegment()]=yh(a):r.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());t_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];t_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){lc(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(yh(this.value))}};function pO(n){let e=[];return lc(n.fields,(t,i)=>{let r=new Ti([t]);if(t_(i)){let o=pO(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new $i(e)}var fr=class n{constructor(e,t,i,r,o,a,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new n(e,0,je.min(),je.min(),je.min(),Ii.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,je.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,je.min(),je.min(),Ii.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,je.min(),je.min(),Ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var js=class{constructor(e,t){this.position=e,this.inclusive=t}};function LR(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],a=n.position[r];if(o.field.isKeyField()?i=Te.comparator(Te.fromName(a.referenceValue),t.key):i=Xl(a,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function FR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zr(n.position[t],e.position[t]))return!1;return!0}var sc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function c9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var u_=class{},rn=class n extends u_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new vC(e,t,i):t==="array-contains"?new bC(e,i):t==="in"?new EC(e,i):t==="not-in"?new CC(e,i):t==="array-contains-any"?new IC(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new yC(e,i):new wC(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Xl(t,this.value)):t!==null&&oc(this.value)===oc(t)&&this.matchesComparison(Xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},pr=class n extends u_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return mO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function mO(n){return n.op==="and"}function gO(n){return l9(n)&&mO(n)}function l9(n){for(let e of n.filters)if(e instanceof pr)return!1;return!0}function _C(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+eu(n.value);if(gO(n))return n.filters.map(e=>_C(e)).join(",");{let e=n.filters.map(t=>_C(t)).join(",");return`${n.op}(${e})`}}function _O(n,e){return n instanceof rn?function(i,r){return r instanceof rn&&i.op===r.op&&i.field.isEqual(r.field)&&Zr(i.value,r.value)}(n,e):n instanceof pr?function(i,r){return r instanceof pr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,l)=>o&&_O(a,r.filters[l]),!0):!1}(n,e):void Pe()}function vO(n){return n instanceof rn?function(t){return`${t.field.canonicalString()} ${t.op} ${eu(t.value)}`}(n):n instanceof pr?function(t){return t.op.toString()+" {"+t.getFilters().map(vO).join(" ,")+"}"}(n):"Filter"}var vC=class extends rn{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){let t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}},yC=class extends rn{constructor(e,t){super(e,"in",t),this.keys=yO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wC=class extends rn{constructor(e,t){super(e,"not-in",t),this.keys=yO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function yO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Te.fromName(i.referenceValue))}var bC=class extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return jI(t)&&Ih(t.arrayValue,this.value)}},EC=class extends rn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ih(this.value.arrayValue,t)}},CC=class extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Ih(this.value.arrayValue,t)}},IC=class extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!jI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ih(this.value.arrayValue,i))}};var TC=class{constructor(e,t=null,i=[],r=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=l,this.ue=null}};function VR(n,e=null,t=[],i=[],r=null,o=null,a=null){return new TC(n,e,t,i,r,o,a)}function zI(n){let e=Ne(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>_C(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),F_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>eu(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>eu(i)).join(",")),e.ue=t}return e.ue}function $I(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_O(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FR(n.startAt,e.startAt)&&FR(n.endAt,e.endAt)}function SC(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var $o=class{constructor(e,t=null,i=[],r=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function u9(n,e,t,i,r,o,a,l){return new $o(n,e,t,i,r,o,a,l)}function B_(n){return new $o(n)}function BR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function HI(n){return n.collectionGroup!==null}function Kl(n){let e=Ne(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new On(Ti.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new sc(o,i))}),t.has(Ti.keyField().canonicalString())||e.ce.push(new sc(Ti.keyField(),i))}return e.ce}function Wr(n){let e=Ne(n);return e.le||(e.le=d9(e,Kl(n))),e.le}function d9(n,e){if(n.limitType==="F")return VR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new sc(r.field,o)});let t=n.endAt?new js(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new js(n.startAt.position,n.startAt.inclusive):null;return VR(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function DC(n,e){let t=n.filters.concat([e]);return new $o(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function d_(n,e,t){return new $o(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function U_(n,e){return $I(Wr(n),Wr(e))&&n.limitType===e.limitType}function wO(n){return`${zI(Wr(n))}|lt:${n.limitType}`}function Hl(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>vO(r)).join(", ")}]`),F_(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>eu(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>eu(r)).join(",")),`Target(${i})`}(Wr(n))}; limitType=${n.limitType})`}function j_(n,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Te.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,r){for(let o of Kl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(a,l,u){let f=LR(a,l,u);return a.inclusive?f<=0:f<0}(i.startAt,Kl(i),r)||i.endAt&&!function(a,l,u){let f=LR(a,l,u);return a.inclusive?f>=0:f>0}(i.endAt,Kl(i),r))}(n,e)}function h9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bO(n){return(e,t)=>{let i=!1;for(let r of Kl(n)){let o=f9(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function f9(n,e,t){let i=n.field.isKeyField()?Te.comparator(e.key,t.key):function(o,a,l){let u=a.data.field(o),f=l.data.field(o);return u!==null&&f!==null?Xl(u,f):Pe()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Pe()}}var zs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lc(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return dO(this.inner)}size(){return this.innerSize}};var p9=new Gt(Te.comparator);function Ho(){return p9}var EO=new Gt(Te.comparator);function vh(...n){let e=EO;for(let t of n)e=e.insert(t.key,t);return e}function CO(n){let e=EO;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ec(){return wh()}function IO(){return wh()}function wh(){return new zs(n=>n.toString(),(n,e)=>n.isEqual(e))}var m9=new Gt(Te.comparator),g9=new On(Te.comparator);function nt(...n){let e=g9;for(let t of n)e=e.add(t);return e}var _9=new On(pt);function v9(){return _9}function qI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function TO(n){return{integerValue:""+n}}function SO(n,e){return n9(e)?TO(e):qI(n,e)}var tu=class{constructor(){this._=void 0}};function y9(n,e,t){return n instanceof nu?function(r,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&V_(o)&&(o=UI(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof $s?MO(n,e):n instanceof Hs?xO(n,e):function(r,o){let a=DO(r,o),l=UR(a)+UR(r.Pe);return gC(a)&&gC(r.Pe)?TO(l):qI(r.serializer,l)}(n,e)}function w9(n,e,t){return n instanceof $s?MO(n,e):n instanceof Hs?xO(n,e):t}function DO(n,e){return n instanceof ac?function(i){return gC(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var nu=class extends tu{},$s=class extends tu{constructor(e){super(),this.elements=e}};function MO(n,e){let t=PO(e);for(let i of n.elements)t.some(r=>Zr(r,i))||t.push(i);return{arrayValue:{values:t}}}var Hs=class extends tu{constructor(e){super(),this.elements=e}};function xO(n,e){let t=PO(e);for(let i of n.elements)t=t.filter(r=>!Zr(r,i));return{arrayValue:{values:t}}}var ac=class extends tu{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function UR(n){return Bt(n.integerValue||n.doubleValue)}function PO(n){return jI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Th=class{constructor(e,t){this.field=e,this.transform=t}};function b9(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof $s&&r instanceof $s||i instanceof Hs&&r instanceof Hs?Jl(i.elements,r.elements,Zr):i instanceof ac&&r instanceof ac?Zr(i.Pe,r.Pe):i instanceof nu&&r instanceof nu}(n.transform,e.transform)}var MC=class{constructor(e,t){this.version=e,this.transformResults=t}},Uo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function n_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var iu=class{};function AO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sh(n.key,Uo.none()):new cc(n.key,n.data,Uo.none());{let t=n.data,i=Ii.empty(),r=new On(Ti.comparator);for(let o of e.fields)if(!r.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Qr(n.key,i,new $i(r.toArray()),Uo.none())}}function E9(n,e,t){n instanceof cc?function(r,o,a){let l=r.value.clone(),u=zR(r.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Qr?function(r,o,a){if(!n_(r.precondition,o))return void o.convertToUnknownDocument(a.version);let l=zR(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(RO(r)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function bh(n,e,t,i){return n instanceof cc?function(o,a,l,u){if(!n_(o.precondition,a))return l;let f=o.value.clone(),m=$R(o.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof Qr?function(o,a,l,u){if(!n_(o.precondition,a))return l;let f=$R(o.fieldTransforms,u,a),m=a.data;return m.setAll(RO(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(o,a,l){return n_(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,t)}function C9(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),o=DO(i.transform,r||null);o!=null&&(t===null&&(t=Ii.empty()),t.set(i.field,o))}return t||null}function jR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Jl(i,r,(o,a)=>b9(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var cc=class extends iu{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Qr=class extends iu{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function RO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function zR(n,e,t){let i=new Map;Et(n.length===t.length);for(let r=0;r<t.length;r++){let o=n[r],a=o.transform,l=e.data.field(o.field);i.set(o.field,w9(a,l,t[r]))}return i}function $R(n,e,t){let i=new Map;for(let r of n){let o=r.transform,a=t.data.field(r.field);i.set(r.field,y9(o,a,e))}return i}var Sh=class extends iu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xC=class extends iu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var PC=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&E9(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=bh(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=bh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=IO();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,l=this.applyToLocalView(a,o.mutatedFields);l=t.has(r.key)?null:l;let u=AO(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(je.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nt())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(t,i)=>jR(t,i))&&Jl(this.baseMutations,e.baseMutations,(t,i)=>jR(t,i))}},AC=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Et(e.mutations.length===i.length);let r=function(){return m9}(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new n(e,t,i,r)}};var RC=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var OC=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tn,at;function I9(n){switch(n){default:return Pe();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function OO(n){if(n===void 0)return jo("GRPC error has no .code"),q.UNKNOWN;switch(n){case tn.OK:return q.OK;case tn.CANCELLED:return q.CANCELLED;case tn.UNKNOWN:return q.UNKNOWN;case tn.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case tn.INTERNAL:return q.INTERNAL;case tn.UNAVAILABLE:return q.UNAVAILABLE;case tn.UNAUTHENTICATED:return q.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case tn.NOT_FOUND:return q.NOT_FOUND;case tn.ALREADY_EXISTS:return q.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return q.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case tn.ABORTED:return q.ABORTED;case tn.OUT_OF_RANGE:return q.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return q.UNIMPLEMENTED;case tn.DATA_LOSS:return q.DATA_LOSS;default:return Pe()}}(at=tn||(tn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";var HR=null;function T9(){return new TextEncoder}var S9=new Vs([4294967295,4294967295],0);function qR(n){let e=T9().encode(n),t=new ZE;return t.update(e),new Uint8Array(t.digest())}function GR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vs([t,i],0),new Vs([r,o],0)]}var kC=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new tc(`Invalid padding: ${t}`);if(i<0)throw new tc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new tc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Vs.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Vs.fromNumber(i)));return r.compare(S9)===1&&(r=new Vs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=qR(e),[i,r]=GR(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,r,t);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;let t=qR(e),[i,r]=GR(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},tc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var h_=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Dh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(je.min(),r,new Gt(pt),Ho(),nt())}},Dh=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,nt(),nt(),nt())}};var Zl=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},f_=class{constructor(e,t){this.targetId=e,this.me=t}},p_=class{constructor(e,t,i=kn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},m_=class{constructor(){this.fe=0,this.ge=KR(),this.pe=kn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=nt(),t=nt(),i=nt();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Pe()}}),new Dh(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=KR()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},NC=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ho(),this.qe=WR(),this.Qe=new Gt(pt)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let o=r.target;if(SC(o))if(i===0){let a=new Te(o.path);this.Ue(t,a,fr.newNoDocument(a,je.min()))}else Et(i===1);else{let a=this.Ye(t);if(a!==i){let l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(t);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}HR?.et(function(m,v,E,b,x){var k,N,G,ne,X,ue;let Le={localCacheCount:m,existenceFilterCount:v.count,databaseId:E.database,projectId:E.projectId},me=v.unchangedNames;return me&&(Le.bloomFilter={applied:x===0,hashCount:(k=me?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(ne=(G=(N=me?.bits)===null||N===void 0?void 0:N.bitmap)===null||G===void 0?void 0:G.length)!==null&&ne!==void 0?ne:0,padding:(ue=(X=me?.bits)===null||X===void 0?void 0:X.padding)!==null&&ue!==void 0?ue:0,mightContain:R=>{var D;return(D=b?.mightContain(R))!==null&&D!==void 0&&D}}),Le}(a,e.me,this.Le.tt(),l,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,a,l;try{a=Us(i).toUint8Array()}catch(u){if(u instanceof a_)return Yl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new kC(a,r,o)}catch(u){return Yl(u instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(t,o,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((o,a)=>{let l=this.Je(a);if(l){if(o.current&&SC(l.target)){let u=new Te(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,fr.newNoDocument(u,e))}o.be&&(t.set(a,o.ve()),o.Ce())}});let i=nt();this.qe.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{let f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let r=new h_(e,t,this.Qe,this.ke,i);return this.ke=Ho(),this.qe=WR(),this.Qe=new Gt(pt),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new m_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new On(pt),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new m_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function WR(){return new Gt(Te.comparator)}function KR(){return new Gt(Te.comparator)}var D9={asc:"ASCENDING",desc:"DESCENDING"},M9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x9={and:"AND",or:"OR"},LC=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function FC(n,e){return n.useProto3Json||F_(e)?e:{value:e}}function g_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function P9(n,e){return g_(n,e.toTimestamp())}function Kr(n){return Et(!!n),je.fromTimestamp(function(t){let i=zo(t);return new qt(i.seconds,i.nanos)}(n))}function GI(n,e){return VC(n,e).canonicalString()}function VC(n,e){let t=function(r){return new Ut(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function NO(n){let e=Ut.fromString(n);return Et(UO(e)),e}function BC(n,e){return GI(n.databaseId,e.path)}function tC(n,e){let t=NO(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(FO(t))}function LO(n,e){return GI(n.databaseId,e)}function A9(n){let e=NO(n);return e.length===4?Ut.emptyPath():FO(e)}function UC(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FO(n){return Et(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ZR(n,e,t){return{name:BC(n,e),fields:t.value.mapValue.fields}}function R9(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Et(m===void 0||typeof m=="string"),kn.fromBase64String(m||"")):(Et(m===void 0||m instanceof Buffer||m instanceof Uint8Array),kn.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(f){let m=f.code===void 0?q.UNKNOWN:OO(f.code);return new ae(m,f.message||"")}(a);t=new p_(i,r,o,l||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=tC(n,i.document.name),o=Kr(i.document.updateTime),a=i.document.createTime?Kr(i.document.createTime):je.min(),l=new Ii({mapValue:{fields:i.document.fields}}),u=fr.newFoundDocument(r,o,a,l),f=i.targetIds||[],m=i.removedTargetIds||[];t=new Zl(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=tC(n,i.document),o=i.readTime?Kr(i.readTime):je.min(),a=fr.newNoDocument(r,o),l=i.removedTargetIds||[];t=new Zl([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=tC(n,i.document),o=i.removedTargetIds||[];t=new Zl([],o,r,null)}else{if(!("filter"in e))return Pe();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new OC(r,o),l=i.targetId;t=new f_(l,a)}}return t}function O9(n,e){let t;if(e instanceof cc)t={update:ZR(n,e.key,e.value)};else if(e instanceof Sh)t={delete:BC(n,e.key)};else if(e instanceof Qr)t={update:ZR(n,e.key,e.data),updateMask:z9(e.fieldMask)};else{if(!(e instanceof xC))return Pe();t={verify:BC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,a){let l=a.transform;if(l instanceof nu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $s)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ac)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Pe()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:P9(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Pe()}(n,e.precondition)),t}function k9(n,e){return n&&n.length>0?(Et(e!==void 0),n.map(t=>function(r,o){let a=r.updateTime?Kr(r.updateTime):Kr(o);return a.isEqual(je.min())&&(a=Kr(o)),new MC(a,r.transformResults||[])}(t,e))):[]}function N9(n,e){return{documents:[LO(n,e.path)]}}function L9(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=LO(n,r);let o=function(f){if(f.length!==0)return BO(pr.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(m=>function(E){return{field:ql(E.field),direction:B9(E.dir)}}(m))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let l=FC(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:t,parent:r}}function F9(n){let e=A9(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Et(i===1);let m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(v){let E=VO(v);return E instanceof pr&&gO(E)?E.getFilters():[E]}(t.where));let a=[];t.orderBy&&(a=function(v){return v.map(E=>function(x){return new sc(Gl(x.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(E))}(t.orderBy));let l=null;t.limit&&(l=function(v){let E;return E=typeof v=="object"?v.value:v,F_(E)?null:E}(t.limit));let u=null;t.startAt&&(u=function(v){let E=!!v.before,b=v.values||[];return new js(b,E)}(t.startAt));let f=null;return t.endAt&&(f=function(v){let E=!v.before,b=v.values||[];return new js(b,E)}(t.endAt)),u9(e,r,a,o,l,"F",u,f)}function V9(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VO(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Gl(t.unaryFilter.field);return rn.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Gl(t.unaryFilter.field);return rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Gl(t.unaryFilter.field);return rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Gl(t.unaryFilter.field);return rn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(n):n.fieldFilter!==void 0?function(t){return rn.create(Gl(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return pr.create(t.compositeFilter.filters.map(i=>VO(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Pe()}}(t.compositeFilter.op))}(n):Pe()}function B9(n){return D9[n]}function U9(n){return M9[n]}function j9(n){return x9[n]}function ql(n){return{fieldPath:n.canonicalString()}}function Gl(n){return Ti.fromServerFormat(n.fieldPath)}function BO(n){return n instanceof rn?function(t){if(t.op==="=="){if(NR(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NAN"}};if(kR(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NR(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NAN"}};if(kR(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(t.field),op:U9(t.op),value:t.value}}}(n):n instanceof pr?function(t){let i=t.getFilters().map(r=>BO(r));return i.length===1?i[0]:{compositeFilter:{op:j9(t.op),filters:i}}}(n):Pe()}function z9(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Mh=class n{constructor(e,t,i,r,o=je.min(),a=je.min(),l=kn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jC=class{constructor(e){this.ct=e}};function $9(n){let e=F9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?d_(e,e.limit,"L"):e}var __=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Bt(e.integerValue));else if("doubleValue"in e){let i=Bt(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),Eh(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=zo(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Us(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?fO(e)?this.dt(t,Number.MAX_SAFE_INTEGER):hO(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Pe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let o=e.fields||{};this.dt(t,53);let a="value",l=((r=(i=o[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Bt(l)),this.Vt(a,t),this.Tt(o[a],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),Te.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};__.vt=new __;var zC=class{constructor(){this.un=new $C}addToCollectionParentIndex(e,t){return this.un.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(rc.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(rc.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}},$C=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new On(Ut.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new On(Ut.comparator)).toArray()}};var Gne=new Uint8Array(0);var qr=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};qr.DEFAULT_COLLECTION_PERCENTILE=10,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qr.DEFAULT=new qr(41943040,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qr.DISABLED=new qr(-1,0,0);var xh=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var HC=class{constructor(){this.changes=new zs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qC=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var GC=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&bh(i.mutation,r,$i.empty(),qt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,nt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=nt()){let r=ec();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let a=vh();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let i=ec();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,nt()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,i,r){let o=Ho(),a=wh(),l=function(){return wh()}();return t.forEach((u,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Qr)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),bh(m.mutation,f,m.mutation.getFieldMask(),qt.now())):a.set(f.key,$i.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,m)=>a.set(f,m)),t.forEach((f,m)=>{var v;return l.set(f,new qC(m,(v=a.get(f))!==null&&v!==void 0?v:null))}),l))}recalculateAndSaveOverlays(e,t){let i=wh(),r=new Gt((a,l)=>a-l),o=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let l of a)l.keys().forEach(u=>{let f=t.get(u);if(f===null)return;let m=i.get(u)||$i.empty();m=l.applyToLocalView(f,m),i.set(u,m);let v=(r.get(l.batchId)||nt()).add(u);r=r.insert(l.batchId,v)})}).next(()=>{let a=[],l=r.getReverseIterator();for(;l.hasNext();){let u=l.getNext(),f=u.key,m=u.value,v=IO();m.forEach(E=>{if(!o.has(E)){let b=AO(t.get(E),i.get(E));b!==null&&v.set(E,b),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,v))}return ie.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(a){return Te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):ie.resolve(ec()),l=-1,u=o;return a.next(f=>ie.forEach(f,(m,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),o.get(m)?ie.resolve():this.remoteDocumentCache.getEntry(e,m).next(E=>{u=u.insert(m,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,nt())).next(m=>({batchId:l,changes:CO(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(i=>{let r=vh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,a=vh();return this.indexManager.getCollectionParents(e,o).next(l=>ie.forEach(l,u=>{let f=function(v,E){return new $o(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((v,E)=>{a=a.insert(v,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(a=>{o.forEach((u,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,fr.newInvalidDocument(m)))});let l=vh();return a.forEach((u,f)=>{let m=o.get(u);m!==void 0&&bh(m.mutation,f,$i.empty(),qt.now()),j_(t,f)&&(l=l.insert(u,f))}),l})}};var WC=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ie.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Kr(r.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:$9(r.bundledQuery),readTime:Kr(r.readTime)}}(t)),ie.resolve()}};var KC=class{constructor(){this.overlays=new Gt(Te.comparator),this.Ir=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){let i=ec();return ie.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.ht(e,t,o)}),ie.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){let r=ec(),o=t.length+1,a=new Te(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){let u=l.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return ie.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Gt((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=ec(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let l=ec(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=r)););return ie.resolve(l)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new RC(t,i));let o=this.Ir.get(t);o===void 0&&(o=nt(),this.Ir.set(t,o)),this.Ir.set(t,o.add(i.key))}};var ZC=class{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}};var Ph=class{constructor(){this.Tr=new On(nn.Er),this.dr=new On(nn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new nn(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new nn(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new Te(new Ut([])),i=new nn(t,e),r=new nn(t,e+1),o=[];return this.dr.forEachInRange([i,r],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Te(new Ut([])),i=new nn(t,e),r=new nn(t,e+1),o=nt();return this.dr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new nn(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},nn=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Te.comparator(e.key,t.key)||pt(e.wr,t.wr)}static Ar(e,t){return pt(e.wr,t.wr)||Te.comparator(e.key,t.key)}};var QC=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new On(nn.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new PC(o,t,i,r);this.mutationQueue.push(a);for(let l of r)this.br=this.br.add(new nn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ie.resolve(a)}lookupMutationBatch(e,t){return ie.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),o=r<0?0:r;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new nn(t,0),r=new nn(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],a=>{let l=this.Dr(a.wr);o.push(l)}),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new On(pt);return t.forEach(r=>{let o=new nn(r,0),a=new nn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],l=>{i=i.add(l.wr)})}),ie.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;Te.isDocumentKey(o)||(o=o.child(""));let a=new nn(new Te(o),0),l=new On(pt);return this.br.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(u.wr)),!0)},a),ie.resolve(this.Cr(l))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Et(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ie.forEach(t.mutations,r=>{let o=new nn(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new nn(t,0),r=this.br.firstAfterOrEqual(i);return ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var YC=class{constructor(e){this.Mr=e,this.docs=function(){return new Gt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,a=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let i=Ho();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():fr.newInvalidDocument(r))}),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Ho(),a=t.path,l=new Te(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){let{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||X7(J7(m),i)<=0||(r.has(m.key)||j_(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Pe()}Or(e,t){return ie.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new JC(this)}getSize(e){return ie.resolve(this.size)}},JC=class extends HC{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),ie.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var XC=class{constructor(e){this.persistence=e,this.Nr=new zs(t=>zI(t),$I),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ph,this.targetCount=0,this.kr=xh.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),ie.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new xh(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Kn(t),ie.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),ie.waitFor(o).next(()=>r)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this.Br.containsKey(t))}};var eI=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new uO(0),this.Kr=!1,this.Kr=!0,this.$r=new ZC,this.referenceDelegate=e(this),this.Ur=new XC(this),this.indexManager=new zC,this.remoteDocumentCache=function(r){return new YC(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new jC(t),this.Gr=new WC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new QC(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);let r=new tI(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,t){return ie.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},tI=class extends fC{constructor(e){super(),this.currentSequenceNumber=e}},nI=class n{constructor(e){this.persistence=e,this.Jr=new Ph,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,i=>{let r=Te.fromPath(i);return this.ei(e,r).next(o=>{o||t.removeEntry(r,je.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ie.or([()=>ie.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var iI=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=nt(),r=nt();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var rI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var oI=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lA()?8:t9(bn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.Yi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,t,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new rI;return this.Xi(e,t,a).next(l=>{if(o.result=l,this.zi)return this.es(e,t,a,l.size)})}).next(()=>o.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(_h()<=tt.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Hl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(_h()<=tt.DEBUG&&ye("QueryEngine","Query:",Hl(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(_h()<=tt.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Hl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(t))):ie.resolve())}Yi(e,t){if(BR(t))return ie.resolve(null);let i=Wr(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=d_(t,null,"F"),i=Wr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=nt(...o);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.ts(t,l);return this.ns(t,f,a,u.readTime)?this.Yi(e,d_(t,null,"F")):this.rs(e,f,t,u)}))})))}Zi(e,t,i,r){return BR(t)||r.isEqual(je.min())?ie.resolve(null):this.Ji.getDocuments(e,i).next(o=>{let a=this.ts(t,o);return this.ns(t,a,i,r)?ie.resolve(null):(_h()<=tt.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hl(t)),this.rs(e,a,t,Y7(r,-1)).next(l=>l))})}ts(e,t){let i=new On(bO(e));return t.forEach((r,o)=>{j_(e,o)&&(i=i.add(o))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,t,i){return _h()<=tt.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Hl(t)),this.Ji.getDocumentsMatchingQuery(e,t,rc.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var sI=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Gt(pt),this._s=new zs(o=>zI(o),$I),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function H9(n,e,t,i){return new sI(n,e,t,i)}function jO(n,e){return T(this,null,function*(){let t=Ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],l=[],u=nt();for(let f of r){a.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}for(let f of o){l.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}return t.localDocuments.getDocuments(i,u).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:l}))})})})}function q9(n,e){let t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,f,m){let v=f.batch,E=v.keys(),b=ie.resolve();return E.forEach(x=>{b=b.next(()=>m.getEntry(u,x)).next(k=>{let N=f.docVersions.get(x);Et(N!==null),k.version.compareTo(N)<0&&(v.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(u,v))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=nt();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function zO(n){let e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function G9(n,e){let t=Ne(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let l=[];e.targetChanges.forEach((m,v)=>{let E=r.get(v);if(!E)return;l.push(t.Ur.removeMatchingKeys(o,m.removedDocuments,v).next(()=>t.Ur.addMatchingKeys(o,m.addedDocuments,v)));let b=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(kn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,i)),r=r.insert(v,b),function(k,N,G){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(E,b,m)&&l.push(t.Ur.updateTargetData(o,b))});let u=Ho(),f=nt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),l.push(W9(o,a,e.documentUpdates).next(m=>{u=m.Ps,f=m.Is})),!i.isEqual(je.min())){let m=t.Ur.getLastRemoteSnapshotVersion(o).next(v=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(m)}return ie.waitFor(l).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(t.os=r,o))}function W9(n,e,t){let i=nt(),r=nt();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=Ho();return t.forEach((l,u)=>{let f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(je.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):ye("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{Ps:a,Is:r}})}function K9(n,e){let t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Z9(n,e){let t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(o=>o?(r=o,ie.resolve(r)):t.Ur.allocateTargetId(i).next(a=>(r=new Mh(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function aI(n,e,t){return T(this,null,function*(){let i=Ne(n),r=i.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Uh(a))throw a;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function QR(n,e,t){let i=Ne(n),r=je.min(),o=nt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){let v=Ne(u),E=v._s.get(m);return E!==void 0?ie.resolve(v.os.get(E)):v.Ur.getTargetData(f,m)}(i,a,Wr(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,t?r:je.min(),t?o:nt())).next(l=>(Q9(i,h9(e),l),{documents:l,Ts:o})))}function Q9(n,e,t){let i=n.us.get(e)||je.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.us.set(e,i)}var v_=class{constructor(){this.activeTargetIds=v9()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var cI=class{constructor(){this.so=new v_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new v_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lI=class{_o(e){}shutdown(){}};var y_=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var e_=null;function nC(){return e_===null?e_=function(){return 268435456+Math.round(2147483648*Math.random())}():e_++,"0x"+e_.toString(16)}var Y9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var uI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Rn="WebChannelConnection",dI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(t,i,r,o,a){let l=nC(),u=this.xo(t,i.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${l}:`,u,r);let f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(t,u,f,r).then(m=>(ye("RestConnection",`Received RPC '${t}' ${l}: `,m),m),m=>{throw Yl("RestConnection",`RPC '${t}' ${l} failed with error: `,m,"url: ",u,"request:",r),m})}Lo(t,i,r,o,a,l){return this.Mo(t,i,r,o,a)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>t[a]=o),r&&r.headers.forEach((o,a)=>t[a]=o)}xo(t,i){let r=Y9[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let o=nC();return new Promise((a,l)=>{let u=new QE;u.setWithCredentials(!0),u.listenOnce(YE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case gh.NO_ERROR:let m=u.getResponseJson();ye(Rn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case gh.TIMEOUT:ye(Rn,`RPC '${e}' ${o} timed out`),l(new ae(q.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:let v=u.getStatus();if(ye(Rn,`RPC '${e}' ${o} failed with status:`,v,"response text:",u.getResponseText()),v>0){let E=u.getResponseJson();Array.isArray(E)&&(E=E[0]);let b=E?.error;if(b&&b.status&&b.message){let x=function(N){let G=N.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(G)>=0?G:q.UNKNOWN}(b.status);l(new ae(x,b.message))}else l(new ae(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ae(q.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{ye(Rn,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(r);ye(Rn,`RPC '${e}' ${o} sending request:`,r),u.send(t,"POST",f,i,15)})}Bo(e,t,i){let r=nC(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=eC(),l=XE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;let m=o.join("");ye(Rn,`Creating RPC '${e}' stream ${r}: ${m}`,u);let v=a.createWebChannel(m,u),E=!1,b=!1,x=new uI({Io:N=>{b?ye(Rn,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(E||(ye(Rn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),E=!0),ye(Rn,`RPC '${e}' stream ${r} sending:`,N),v.send(N))},To:()=>v.close()}),k=(N,G,ne)=>{N.listen(G,X=>{try{ne(X)}catch(ue){setTimeout(()=>{throw ue},0)}})};return k(v,$l.EventType.OPEN,()=>{b||(ye(Rn,`RPC '${e}' stream ${r} transport opened.`),x.yo())}),k(v,$l.EventType.CLOSE,()=>{b||(b=!0,ye(Rn,`RPC '${e}' stream ${r} transport closed`),x.So())}),k(v,$l.EventType.ERROR,N=>{b||(b=!0,Yl(Rn,`RPC '${e}' stream ${r} transport errored:`,N),x.So(new ae(q.UNAVAILABLE,"The operation could not be completed")))}),k(v,$l.EventType.MESSAGE,N=>{var G;if(!b){let ne=N.data[0];Et(!!ne);let X=ne,ue=X.error||((G=X[0])===null||G===void 0?void 0:G.error);if(ue){ye(Rn,`RPC '${e}' stream ${r} received error:`,ue);let Le=ue.status,me=function(M){let O=tn[M];if(O!==void 0)return OO(O)}(Le),R=ue.message;me===void 0&&(me=q.INTERNAL,R="Unknown error status: "+Le+" with message "+ue.message),b=!0,x.So(new ae(me,R)),v.close()}else ye(Rn,`RPC '${e}' stream ${r} received:`,ne),x.bo(ne)}}),k(l,JE.STAT_EVENT,N=>{N.stat===Jg.PROXY?ye(Rn,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===Jg.NOPROXY&&ye(Rn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}};function iC(){return typeof document<"u"?document:null}function z_(n){return new LC(n,!0)}var w_=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var b_=class{constructor(e,t,i,r,o,a,l,u){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new w_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return T(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return T(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return T(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(jo(t.toString()),jo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new ae(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>T(this,null,function*(){this.state=0,this.start()}))}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},hI=class extends b_{constructor(e,t,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=R9(this.serializer,e),i=function(o){if(!("targetChange"in o))return je.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?je.min():a.readTime?Kr(a.readTime):je.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=UC(this.serializer),t.addTarget=function(o,a){let l,u=a.target;if(l=SC(u)?{documents:N9(o,u)}:{query:L9(o,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=kO(o,a.resumeToken);let f=FC(o,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(je.min())>0){l.readTime=g_(o,a.snapshotVersion.toTimestamp());let f=FC(o,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);let i=V9(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=UC(this.serializer),t.removeTarget=e,this.a_(t)}},fI=class extends b_{constructor(e,t,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Et(!!e.streamToken),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=k9(e.writeResults,e.commitTime),i=Kr(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=UC(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>O9(this.serializer,i))};this.a_(t)}};var pI=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ae(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,VC(t,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(q.UNKNOWN,o.toString())})}Lo(e,t,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,VC(t,i),r,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},mI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jo(t),this.D_=!1):ye("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var gI=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{i.enqueueAndForget(()=>T(this,null,function*(){uc(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),yield function(u){return T(this,null,function*(){let f=Ne(u);f.L_.add(4),yield jh(f),f.q_.set("Unknown"),f.L_.delete(4),yield $_(f)})}(this))}))}),this.q_=new mI(i,r)}};function $_(n){return T(this,null,function*(){if(uc(n))for(let e of n.B_)yield e(!0)})}function jh(n){return T(this,null,function*(){for(let e of n.B_)yield e(!1)})}function $O(n,e){let t=Ne(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),QI(t)?ZI(t):lu(t).r_()&&KI(t,e))}function WI(n,e){let t=Ne(n),i=lu(t);t.N_.delete(e),i.r_()&&HO(t,e),t.N_.size===0&&(i.r_()?i.o_():uc(t)&&t.q_.set("Unknown"))}function KI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lu(n).A_(e)}function HO(n,e){n.Q_.xe(e),lu(n).R_(e)}function ZI(n){n.Q_=new NC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),lu(n).start(),n.q_.v_()}function QI(n){return uc(n)&&!lu(n).n_()&&n.N_.size>0}function uc(n){return Ne(n).L_.size===0}function qO(n){n.Q_=void 0}function J9(n){return T(this,null,function*(){n.q_.set("Online")})}function X9(n){return T(this,null,function*(){n.N_.forEach((e,t)=>{KI(n,e)})})}function eH(n,e){return T(this,null,function*(){qO(n),QI(n)?(n.q_.M_(e),ZI(n)):n.q_.set("Unknown")})}function tH(n,e,t){return T(this,null,function*(){if(n.q_.set("Online"),e instanceof p_&&e.state===2&&e.cause)try{yield function(r,o){return T(this,null,function*(){let a=o.cause;for(let l of o.targetIds)r.N_.has(l)&&(yield r.remoteSyncer.rejectListen(l,a),r.N_.delete(l),r.Q_.removeTarget(l))})}(n,e)}catch(i){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield E_(n,i)}else if(e instanceof Zl?n.Q_.Ke(e):e instanceof f_?n.Q_.He(e):n.Q_.We(e),!t.isEqual(je.min()))try{let i=yield zO(n.localStore);t.compareTo(i)>=0&&(yield function(o,a){let l=o.Q_.rt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let m=o.N_.get(f);m&&o.N_.set(f,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{let m=o.N_.get(u);if(!m)return;o.N_.set(u,m.withResumeToken(kn.EMPTY_BYTE_STRING,m.snapshotVersion)),HO(o,u);let v=new Mh(m.target,u,f,m.sequenceNumber);KI(o,v)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){ye("RemoteStore","Failed to raise snapshot:",i),yield E_(n,i)}})}function E_(n,e,t){return T(this,null,function*(){if(!Uh(e))throw e;n.L_.add(1),yield jh(n),n.q_.set("Offline"),t||(t=()=>zO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(this,null,function*(){ye("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield $_(n)}))})}function GO(n,e){return e().catch(t=>E_(n,t,e))}function H_(n){return T(this,null,function*(){let e=Ne(n),t=qs(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nH(e);)try{let r=yield K9(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,iH(e,r)}catch(r){yield E_(e,r)}WO(e)&&KO(e)})}function nH(n){return uc(n)&&n.O_.length<10}function iH(n,e){n.O_.push(e);let t=qs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function WO(n){return uc(n)&&!qs(n).n_()&&n.O_.length>0}function KO(n){qs(n).start()}function rH(n){return T(this,null,function*(){qs(n).p_()})}function oH(n){return T(this,null,function*(){let e=qs(n);for(let t of n.O_)e.m_(t.mutations)})}function sH(n,e,t){return T(this,null,function*(){let i=n.O_.shift(),r=AC.from(i,e,t);yield GO(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield H_(n)})}function aH(n,e){return T(this,null,function*(){e&&qs(n).V_&&(yield function(i,r){return T(this,null,function*(){if(function(a){return I9(a)&&a!==q.ABORTED}(r.code)){let o=i.O_.shift();qs(i).s_(),yield GO(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield H_(i)}})}(n,e)),WO(n)&&KO(n)})}function YR(n,e){return T(this,null,function*(){let t=Ne(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");let i=uc(t);t.L_.add(3),yield jh(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield $_(t)})}function cH(n,e){return T(this,null,function*(){let t=Ne(n);e?(t.L_.delete(2),yield $_(t)):e||(t.L_.add(2),yield jh(t),t.q_.set("Unknown"))})}function lu(n){return n.K_||(n.K_=function(t,i,r){let o=Ne(t);return o.w_(),new hI(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:J9.bind(null,n),Ro:X9.bind(null,n),mo:eH.bind(null,n),d_:tH.bind(null,n)}),n.B_.push(e=>T(this,null,function*(){e?(n.K_.s_(),QI(n)?ZI(n):n.q_.set("Unknown")):(yield n.K_.stop(),qO(n))}))),n.K_}function qs(n){return n.U_||(n.U_=function(t,i,r){let o=Ne(t);return o.w_(),new fI(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rH.bind(null,n),mo:aH.bind(null,n),f_:oH.bind(null,n),g_:sH.bind(null,n)}),n.B_.push(e=>T(this,null,function*(){e?(n.U_.s_(),yield H_(n)):(yield n.U_.stop(),n.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var _I=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let a=Date.now()+i,l=new n(e,t,a,r,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function YI(n,e){if(jo("AsyncQueue",`${e}: ${n}`),Uh(n))return new ae(q.UNAVAILABLE,`${e}: ${n}`);throw n}var C_=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=vh(),this.sortedSet=new Gt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var I_=class{constructor(){this.W_=new Gt(Te.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},ru=class n{constructor(e,t,i,r,o,a,l,u,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){let a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new n(e,t,C_.emptySet(t),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&U_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var vI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},yI=class{constructor(){this.queries=JR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=Ne(t),o=r.queries;r.queries=JR(),o.forEach((a,l)=>{for(let u of l.j_)u.onError(i)})})(this,new ae(q.ABORTED,"Firestore shutting down"))}};function JR(){return new zs(n=>wO(n),U_)}function JI(n,e){return T(this,null,function*(){let t=Ne(n),i=3,r=e.query,o=t.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new vI,i=e.J_()?0:1);try{switch(i){case 0:o.z_=yield t.onListen(r,!0);break;case 1:o.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(a){let l=YI(a,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&eT(t)})}function XI(n,e){return T(this,null,function*(){let t=Ne(n),i=e.query,r=3,o=t.queries.get(i);if(o){let a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function lH(n,e){let t=Ne(n),i=!1;for(let r of e){let o=r.query,a=t.queries.get(o);if(a){for(let l of a.j_)l.X_(r)&&(i=!0);a.z_=r}}i&&eT(t)}function uH(n,e,t){let i=Ne(n),r=i.queries.get(e);if(r)for(let o of r.j_)o.onError(t);i.queries.delete(e)}function eT(n){n.Y_.forEach(e=>{e.next()})}var wI,XR;(XR=wI||(wI={})).ea="default",XR.Cache="cache";var Ah=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new ru(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wI.Cache}};var T_=class{constructor(e){this.key=e}},S_=class{constructor(e){this.key=e}},bI=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=nt(),this.mutatedKeys=nt(),this.Aa=bO(e),this.Ra=new C_(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new I_,r=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,a=r,l=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,v)=>{let E=r.get(m),b=j_(this.query,v)?v:null,x=!!E&&this.mutatedKeys.has(E.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),N=!1;E&&b?E.data.isEqual(b.data)?x!==k&&(i.track({type:3,doc:b}),N=!0):this.ga(E,b)||(i.track({type:2,doc:b}),N=!0,(u&&this.Aa(b,u)>0||f&&this.Aa(b,f)<0)&&(l=!0)):!E&&b?(i.track({type:0,doc:b}),N=!0):E&&!b&&(i.track({type:1,doc:E}),N=!0,(u||f)&&(l=!0)),N&&(b?(a=a.add(b),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ra:a,fa:i,ns:l,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((m,v)=>function(b,x){let k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return k(b)-k(x)}(m.type,v.type)||this.Aa(m.doc,v.doc)),this.pa(i),r=r!=null&&r;let l=t&&!r?this.ya():[],u=this.da.size===0&&this.current&&!r?1:0,f=u!==this.Ea;return this.Ea=u,a.length!==0||f?{snapshot:new ru(this.query,e.Ra,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new I_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=nt(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new S_(i))}),this.da.forEach(i=>{e.has(i)||t.push(new T_(i))}),t}ba(e){this.Ta=e.Ts,this.da=nt();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ru.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},EI=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},CI=class{constructor(e){this.key=e,this.va=!1}},II=class{constructor(e,t,i,r,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new zs(l=>wO(l),U_),this.Ma=new Map,this.xa=new Set,this.Oa=new Gt(Te.comparator),this.Na=new Map,this.La=new Ph,this.Ba={},this.ka=new Map,this.qa=xh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function dH(n,e,t=!0){return T(this,null,function*(){let i=ek(n),r,o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield ZO(i,e,t,!0),r})}function hH(n,e){return T(this,null,function*(){let t=ek(n);yield ZO(t,e,!0,!1)})}function ZO(n,e,t,i){return T(this,null,function*(){let r=yield Z9(n.localStore,Wr(e)),o=r.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),l;return i&&(l=yield fH(n,e,o,a==="current",r.resumeToken)),n.isPrimaryClient&&t&&$O(n.remoteStore,r),l})}function fH(n,e,t,i,r){return T(this,null,function*(){n.Ka=(v,E,b)=>function(k,N,G,ne){return T(this,null,function*(){let X=N.view.ma(G);X.ns&&(X=yield QR(k.localStore,N.query,!1).then(({documents:R})=>N.view.ma(R,X)));let ue=ne&&ne.targetChanges.get(N.targetId),Le=ne&&ne.targetMismatches.get(N.targetId)!=null,me=N.view.applyChanges(X,k.isPrimaryClient,ue,Le);return tO(k,N.targetId,me.wa),me.snapshot})}(n,v,E,b);let o=yield QR(n.localStore,e,!0),a=new bI(e,o.Ts),l=a.ma(o.documents),u=Dh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=a.applyChanges(l,n.isPrimaryClient,u);tO(n,t,f.wa);let m=new EI(e,t,a);return n.Fa.set(e,m),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot})}function pH(n,e,t){return T(this,null,function*(){let i=Ne(n),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(a=>!U_(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield aI(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&WI(i.remoteStore,r.targetId),TI(i,r.targetId)}).catch(Bh))):(TI(i,r.targetId),yield aI(i.localStore,r.targetId,!0))})}function mH(n,e){return T(this,null,function*(){let t=Ne(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),WI(t.remoteStore,i.targetId))})}function gH(n,e,t){return T(this,null,function*(){let i=CH(n);try{let r=yield function(a,l){let u=Ne(a),f=qt.now(),m=l.reduce((b,x)=>b.add(x.key),nt()),v,E;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let x=Ho(),k=nt();return u.cs.getEntries(b,m).next(N=>{x=N,x.forEach((G,ne)=>{ne.isValidDocument()||(k=k.add(G))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,x)).next(N=>{v=N;let G=[];for(let ne of l){let X=C9(ne,v.get(ne.key).overlayedDocument);X!=null&&G.push(new Qr(ne.key,X,pO(X.value.mapValue),Uo.exists(!0)))}return u.mutationQueue.addMutationBatch(b,f,G,l)}).next(N=>{E=N;let G=N.applyToLocalDocumentSet(v,k);return u.documentOverlayCache.saveOverlays(b,N.batchId,G)})}).then(()=>({batchId:E.batchId,changes:CO(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let f=a.Ba[a.currentUser.toKey()];f||(f=new Gt(pt)),f=f.insert(l,u),a.Ba[a.currentUser.toKey()]=f}(i,r.batchId,t),yield zh(i,r.changes),yield H_(i.remoteStore)}catch(r){let o=YI(r,"Failed to persist write");t.reject(o)}})}function QO(n,e){return T(this,null,function*(){let t=Ne(n);try{let i=yield G9(t.localStore,e);e.targetChanges.forEach((r,o)=>{let a=t.Na.get(o);a&&(Et(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?Et(a.va):r.removedDocuments.size>0&&(Et(a.va),a.va=!1))}),yield zh(t,i,e)}catch(i){yield Bh(i)}})}function eO(n,e,t){let i=Ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((o,a)=>{let l=a.view.Z_(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){let u=Ne(a);u.onlineState=l;let f=!1;u.queries.forEach((m,v)=>{for(let E of v.j_)E.Z_(l)&&(f=!0)}),f&&eT(u)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function _H(n,e,t){return T(this,null,function*(){let i=Ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),o=r&&r.key;if(o){let a=new Gt(Te.comparator);a=a.insert(o,fr.newNoDocument(o,je.min()));let l=nt().add(o),u=new h_(je.min(),new Map,new Gt(pt),a,l);yield QO(i,u),i.Oa=i.Oa.remove(o),i.Na.delete(e),tT(i)}else yield aI(i.localStore,e,!1).then(()=>TI(i,e,t)).catch(Bh)})}function vH(n,e){return T(this,null,function*(){let t=Ne(n),i=e.batch.batchId;try{let r=yield q9(t.localStore,e);JO(t,i,null),YO(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield zh(t,r)}catch(r){yield Bh(r)}})}function yH(n,e,t){return T(this,null,function*(){let i=Ne(n);try{let r=yield function(a,l){let u=Ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,l).next(v=>(Et(v!==null),m=v.keys(),u.mutationQueue.removeMutationBatch(f,v))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,e);JO(i,e,t),YO(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield zh(i,r)}catch(r){yield Bh(r)}})}function YO(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function JO(n,e,t){let i=Ne(n),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function TI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||XO(n,i)})}function XO(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(WI(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),tT(n))}function tO(n,e,t){for(let i of t)i instanceof T_?(n.La.addReference(i.key,e),wH(n,i)):i instanceof S_?(ye("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||XO(n,i.key)):Pe()}function wH(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(ye("SyncEngine","New document in limbo: "+t),n.xa.add(i),tT(n))}function tT(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Te(Ut.fromString(e)),i=n.qa.next();n.Na.set(i,new CI(t)),n.Oa=n.Oa.insert(t,i),$O(n.remoteStore,new Mh(Wr(B_(t.path)),i,"TargetPurposeLimboResolution",uO.oe))}}function zh(n,e,t){return T(this,null,function*(){let i=Ne(n),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((l,u)=>{a.push(i.Ka(u,e,t).then(f=>{var m;if((f||t)&&i.isPrimaryClient){let v=f?!f.fromCache:(m=t?.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,v?"current":"not-current")}if(f){r.push(f);let v=iI.Wi(u.targetId,f);o.push(v)}}))}),yield Promise.all(a),i.Ca.d_(r),yield function(u,f){return T(this,null,function*(){let m=Ne(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ie.forEach(f,E=>ie.forEach(E.$i,b=>m.persistence.referenceDelegate.addReference(v,E.targetId,b)).next(()=>ie.forEach(E.Ui,b=>m.persistence.referenceDelegate.removeReference(v,E.targetId,b)))))}catch(v){if(!Uh(v))throw v;ye("LocalStore","Failed to update sequence numbers: "+v)}for(let v of f){let E=v.targetId;if(!v.fromCache){let b=m.os.get(E),x=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(x);m.os=m.os.insert(E,k)}}})}(i.localStore,o))})}function bH(n,e){return T(this,null,function*(){let t=Ne(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());let i=yield jO(t.localStore,e);t.currentUser=e,function(o,a){o.ka.forEach(l=>{l.forEach(u=>{u.reject(new ae(q.CANCELLED,a))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield zh(t,i.hs)}})}function EH(n,e){let t=Ne(n),i=t.Na.get(e);if(i&&i.va)return nt().add(i.key);{let r=nt(),o=t.Ma.get(e);if(!o)return r;for(let a of o){let l=t.Fa.get(a);r=r.unionWith(l.view.Va)}return r}}function ek(n){let e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_H.bind(null,e),e.Ca.d_=lH.bind(null,e.eventManager),e.Ca.$a=uH.bind(null,e.eventManager),e}function CH(n){let e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yH.bind(null,e),e}var nO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=z_(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return H9(this.persistence,new oI,t.initialUser,this.serializer)}Ga(t){return new eI(nI.Zr,this.serializer)}Wa(t){return new cI}terminate(){return T(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var IH=(()=>{class n{initialize(t,i){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eO(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bH.bind(null,this.syncEngine),yield cH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new yI}()}createDatastore(t){let i=z_(t.databaseInfo.databaseId),r=function(a){return new dI(a)}(t.databaseInfo);return function(a,l,u,f){return new pI(a,l,u,f)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,o,a,l,u){return new gI(r,o,a,l,u)}(this.localStore,this.datastore,t.asyncQueue,i=>eO(this.syncEngine,i,0),function(){return y_.D()?new y_:new lI}())}createSyncEngine(t,i){return function(o,a,l,u,f,m,v){let E=new II(o,a,l,u,f,m);return v&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return T(this,null,function*(){var t,i;yield function(o){return T(this,null,function*(){let a=Ne(o);ye("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield jh(a),a.k_.shutdown(),a.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Rh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):jo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var SI=class{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=En.UNAUTHENTICATED,this.clientId=r_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,a=>T(this,null,function*(){ye("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(ye("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=YI(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function rC(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>T(this,null,function*(){i.isEqual(r)||(yield jO(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function iO(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield TH(n);ye("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>YR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>YR(e.remoteStore,r)),n._onlineComponents=e})}function TH(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rC(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Yl("Error using user provided cache. Falling back to memory cache: "+t),yield rC(n,new nO)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),yield rC(n,new nO);return n._offlineComponents})}function tk(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),yield iO(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),yield iO(n,new IH))),n._onlineComponents})}function SH(n){return tk(n).then(e=>e.syncEngine)}function D_(n){return T(this,null,function*(){let e=yield tk(n),t=e.eventManager;return t.onListen=dH.bind(null,e.syncEngine),t.onUnlisten=pH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mH.bind(null,e.syncEngine),t})}function DH(n,e,t={}){let i=new hr;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(o,a,l,u,f){let m=new Rh({next:E=>{m.Za(),a.enqueueAndForget(()=>XI(o,v));let b=E.docs.has(l);!b&&E.fromCache?f.reject(new ae(q.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&E.fromCache&&u&&u.source==="server"?f.reject(new ae(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),v=new Ah(B_(l.path),m,{includeMetadataChanges:!0,_a:!0});return JI(o,v)}(yield D_(n),n.asyncQueue,e,t,i)})),i.promise}function MH(n,e,t={}){let i=new hr;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(o,a,l,u,f){let m=new Rh({next:E=>{m.Za(),a.enqueueAndForget(()=>XI(o,v)),E.fromCache&&u.source==="server"?f.reject(new ae(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),v=new Ah(l,m,{includeMetadataChanges:!0,_a:!0});return JI(o,v)}(yield D_(n),n.asyncQueue,e,t,i)})),i.promise}function nk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var rO=new Map;function ik(n,e,t){if(!t)throw new ae(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xH(n,e,t,i){if(e===!0&&i===!0)throw new ae(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oO(n){if(!Te.isDocumentKey(n))throw new ae(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sO(n){if(Te.isDocumentKey(n))throw new ae(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function q_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe()}function Hi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=q_(n);throw new ae(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function PH(n,e){if(e<=0)throw new ae(q.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var M_=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ou=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new oC;switch(i.type){case"firstParty":return new lC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=rO.get(t);i&&(ye("ComponentProvider","Removing Datastore"),rO.delete(t),i.terminate())}(this),Promise.resolve()}};function rk(n,e,t,i={}){var r;let o=(n=Hi(n,ou))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=En.MOCK_USER;else{l=iA(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new ae(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new En(f)}n._authCredentials=new sC(new i_(l,u))}}var Yr=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},qn=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Bs=class n extends Yr{constructor(e,t,i){super(e,t,B_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ok(n,e,...t){if(n=Kt(n),ik("collection","path",e),n instanceof ou){let i=Ut.fromString(e,...t);return sO(i),new Bs(n,null,i)}{if(!(n instanceof qn||n instanceof Bs))throw new ae(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ut.fromString(e,...t));return sO(i),new Bs(n.firestore,null,i)}}function nT(n,e,...t){if(n=Kt(n),arguments.length===1&&(e=r_.newId()),ik("doc","path",e),n instanceof ou){let i=Ut.fromString(e,...t);return oO(i),new qn(n,null,new Te(i))}{if(!(n instanceof qn||n instanceof Bs))throw new ae(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ut.fromString(e,...t));return oO(i),new qn(n.firestore,n instanceof Bs?n.converter:null,new Te(i))}}var x_=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new w_(this,"async_queue_retry"),this.Vu=()=>{let i=iC();i&&ye("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=iC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=iC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new hr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return T(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Uh(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw jo("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=_I.createAndSchedule(this,e,t,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}wu(){return T(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function aO(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Jr=class extends ou{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new x_,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new x_(e),this._firestoreClient=void 0,yield e}})}};function sk(n,e){let t=typeof n=="object"?n:Fl(),i=typeof n=="string"?n:e||"(default)",r=rh(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=nA("firestore");o&&rk(r,...o)}return r}function G_(n){if(n._terminated)throw new ae(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||AH(n),n._firestoreClient}function AH(n){var e,t,i;let r=n._freezeSettings(),o=function(l,u,f,m){return new pC(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,nk(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new SI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(l){let u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}}(n._componentsProvider))}var Oh=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(kn.fromBase64String(e))}catch(t){throw new ae(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var su=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ti(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gs=class{constructor(e){this._methodName=e}};var kh=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pt(this._lat,e._lat)||pt(this._long,e._long)}};var Nh=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}};var RH=/^__.*__$/,DI=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms):new cc(e,this.data,t,this.fieldTransforms)}},P_=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function ak(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}var A_=class n{constructor(e,t,i,r,o,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return O_(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ak(this.Cu)&&RH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},MI=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||z_(e)}Qu(e,t,i,r=!1){return new A_({Cu:e,methodName:t,qu:i,path:Ti.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function W_(n){let e=n._freezeSettings(),t=z_(n._databaseId);return new MI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function OH(n,e,t,i,r,o={}){let a=n.Qu(o.merge||o.mergeFields?2:0,e,t,r);iT("Data must be an object, but it was:",a,i);let l=uk(i,a),u,f;if(o.merge)u=new $i(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let v of o.mergeFields){let E=RI(e,v,t);if(!a.contains(E))throw new ae(q.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);hk(m,E)||m.push(E)}u=new $i(m),f=a.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,f=a.fieldTransforms;return new DI(new Ii(l),u,f)}var R_=class n extends Gs{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function ck(n,e,t){return new A_({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var xI=class n extends Gs{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=ck(this,e,!0),i=this.Ku.map(o=>dc(o,t)),r=new $s(i);return new Th(e.path,r)}isEqual(e){return e instanceof n&&Ro(this.Ku,e.Ku)}},PI=class n extends Gs{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=ck(this,e,!0),i=this.Ku.map(o=>dc(o,t)),r=new Hs(i);return new Th(e.path,r)}isEqual(e){return e instanceof n&&Ro(this.Ku,e.Ku)}},AI=class n extends Gs{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new ac(e.serializer,SO(e.serializer,this.$u));return new Th(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function kH(n,e,t,i){let r=n.Qu(1,e,t);iT("Data must be an object, but it was:",r,i);let o=[],a=Ii.empty();lc(i,(u,f)=>{let m=rT(e,u,t);f=Kt(f);let v=r.Nu(m);if(f instanceof R_)o.push(m);else{let E=dc(f,v);E!=null&&(o.push(m),a.set(m,E))}});let l=new $i(o);return new P_(a,l,r.fieldTransforms)}function NH(n,e,t,i,r,o){let a=n.Qu(1,e,t),l=[RI(e,i,t)],u=[r];if(o.length%2!=0)throw new ae(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)l.push(RI(e,o[E])),u.push(o[E+1]);let f=[],m=Ii.empty();for(let E=l.length-1;E>=0;--E)if(!hk(f,l[E])){let b=l[E],x=u[E];x=Kt(x);let k=a.Nu(b);if(x instanceof R_)f.push(b);else{let N=dc(x,k);N!=null&&(f.push(b),m.set(b,N))}}let v=new $i(f);return new P_(m,v,a.fieldTransforms)}function lk(n,e,t,i=!1){return dc(t,n.Qu(i?4:3,e))}function dc(n,e){if(dk(n=Kt(n)))return iT("Unsupported field value:",e,n),uk(n,e);if(n instanceof Gs)return function(i,r){if(!ak(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){let o=[],a=0;for(let l of i){let u=dc(l,r.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(n,e)}return function(i,r){if((i=Kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return SO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=qt.fromDate(i);return{timestampValue:g_(r.serializer,o)}}if(i instanceof qt){let o=new qt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:g_(r.serializer,o)}}if(i instanceof kh)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Oh)return{bytesValue:kO(r.serializer,i._byteString)};if(i instanceof qn){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:GI(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Nh)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return qI(l.serializer,u)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${q_(i)}`)}(n,e)}function uk(n,e){let t={};return dO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lc(n,(i,r)=>{let o=dc(r,e.Mu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function dk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qt||n instanceof kh||n instanceof Oh||n instanceof qn||n instanceof Gs||n instanceof Nh)}function iT(n,e,t){if(!dk(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=q_(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function RI(n,e,t){if((e=Kt(e))instanceof su)return e._internalPath;if(typeof e=="string")return rT(n,e);throw O_("Field path arguments must be of type string or ",n,!1,void 0,t)}var LH=new RegExp("[~\\*/\\[\\]]");function rT(n,e,t){if(e.search(LH)>=0)throw O_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new su(...e.split("."))._internalPath}catch{throw O_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function O_(n,e,t,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new ae(q.INVALID_ARGUMENT,l+n+u)}function hk(n,e){return n.some(t=>t.isEqual(e))}var Lh=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new OI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(K_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},OI=class extends Lh{data(){return super.data()}};function K_(n,e){return typeof e=="string"?rT(n,e):e instanceof su?e._internalPath:e._delegate._internalPath}function fk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fh=class{},au=class extends Fh{};function pk(n,e,...t){let i=[];e instanceof Fh&&i.push(e),i=i.concat(t),function(o){let a=o.filter(u=>u instanceof kI).length,l=o.filter(u=>u instanceof k_).length;if(a>1||a>0&&l>0)throw new ae(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var k_=class n extends au{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return yk(e._query,t),new Yr(e.firestore,e.converter,DC(e._query,t))}_parse(e){let t=W_(e.firestore);return function(o,a,l,u,f,m,v){let E;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ae(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){lO(v,m);let b=[];for(let x of v)b.push(cO(u,o,x));E={arrayValue:{values:b}}}else E=cO(u,o,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||lO(v,m),E=lk(l,a,v,m==="in"||m==="not-in");return rn.create(f,m,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function mk(n,e,t){let i=e,r=K_("where",n);return k_._create(r,i,t)}var kI=class n extends Fh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:pr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,o){let a=r,l=o.getFlattenedFilters();for(let u of l)yk(a,u),a=DC(a,u)}(e._query,t),new Yr(e.firestore,e.converter,DC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var NI=class n extends au{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,o,a){if(r.startAt!==null)throw new ae(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ae(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sc(o,a)}(e._query,this._field,this._direction);return new Yr(e.firestore,e.converter,function(r,o){let a=r.explicitOrderBy.concat([o]);return new $o(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function gk(n,e="asc"){let t=e,i=K_("orderBy",n);return NI._create(i,t)}var LI=class n extends au{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new Yr(e.firestore,e.converter,d_(e._query,this._limit,this._limitType))}};function _k(n){return PH("limit",n),LI._create("limit",n,"F")}var FI=class n extends au{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=FH(e,this.type,this._docOrFields,this._inclusive);return new Yr(e.firestore,e.converter,function(r,o){return new $o(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,t))}};function vk(...n){return FI._create("startAfter",n,!1)}function FH(n,e,t,i){if(t[0]=Kt(t[0]),t[0]instanceof Lh)return function(o,a,l,u,f){if(!u)throw new ae(q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);let m=[];for(let v of Kl(o))if(v.field.isKeyField())m.push(l_(a,u.key));else{let E=u.data.field(v.field);if(V_(E))throw new ae(q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){let b=v.field.canonicalString();throw new ae(q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}m.push(E)}return new js(m,f)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=W_(n.firestore);return function(a,l,u,f,m,v){let E=a.explicitOrderBy;if(m.length>E.length)throw new ae(q.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let b=[];for(let x=0;x<m.length;x++){let k=m[x];if(E[x].field.isKeyField()){if(typeof k!="string")throw new ae(q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof k}`);if(!HI(a)&&k.indexOf("/")!==-1)throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${k}' contains a slash.`);let N=a.path.child(Ut.fromString(k));if(!Te.isDocumentKey(N))throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let G=new Te(N);b.push(l_(l,G))}else{let N=lk(u,f,k);b.push(N)}}return new js(b,v)}(n._query,n.firestore._databaseId,r,e,t,i)}}function cO(n,e,t){if(typeof(t=Kt(t))=="string"){if(t==="")throw new ae(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HI(e)&&t.indexOf("/")!==-1)throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Ut.fromString(t));if(!Te.isDocumentKey(i))throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return l_(n,new Te(i))}if(t instanceof qn)return l_(n,t._key);throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${q_(t)}.`)}function lO(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yk(n,e){let t=function(r,o){for(let a of r)for(let l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var VI=class{convertValue(e,t="none"){switch(oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return lc(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,r;let o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>Bt(a.doubleValue));return new Nh(o)}convertGeoPoint(e){return new kh(Bt(e.latitude),Bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=UI(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ch(e));default:return null}}convertTimestamp(e){let t=zo(e);return new qt(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Ut.fromString(e);Et(UO(i));let r=new c_(i.get(1),i.get(3)),o=new Te(i.popFirst(5));return r.isEqual(t)||jo(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function VH(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var nc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},N_=class extends Lh{constructor(e,t,i,r,o,a){super(e,t,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ql(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(K_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Ql=class extends N_{data(e={}){return super.data(e)}},L_=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ql(this._firestore,this._userDataWriter,i.key,i,new nc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{let u=new Ql(r._firestore,r._userDataWriter,l.doc.key,l.doc,new nc(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{let u=new Ql(r._firestore,r._userDataWriter,l.doc.key,l.doc,new nc(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:BH(l.type),doc:u,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function BH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}function wk(n){n=Hi(n,qn);let e=Hi(n.firestore,Jr);return DH(G_(e),n._key).then(t=>Sk(e,n,t))}var Vh=class extends VI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oh(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}};function bk(n){n=Hi(n,Yr);let e=Hi(n.firestore,Jr),t=G_(e),i=new Vh(e);return fk(n._query),MH(t,n._query).then(r=>new L_(e,i,n,r))}function Ek(n,e,t,...i){n=Hi(n,qn);let r=Hi(n.firestore,Jr),o=W_(r),a;return a=typeof(e=Kt(e))=="string"||e instanceof su?NH(o,"updateDoc",n._key,e,t,i):kH(o,"updateDoc",n._key,e),oT(r,[a.toMutation(n._key,Uo.exists(!0))])}function Ck(n){return oT(Hi(n.firestore,Jr),[new Sh(n._key,Uo.none())])}function Ik(n,e){let t=Hi(n.firestore,Jr),i=nT(n),r=VH(n.converter,e);return oT(t,[OH(W_(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Uo.exists(!1))]).then(()=>i)}function Tk(n,...e){var t,i,r;n=Kt(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||aO(e[a])||(o=e[a],a++);let l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(aO(e[a])){let v=e[a];e[a]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[a+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[a+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let u,f,m;if(n instanceof qn)f=Hi(n.firestore,Jr),m=B_(n._key.path),u={next:v=>{e[a]&&e[a](Sk(f,n,v))},error:e[a+1],complete:e[a+2]};else{let v=Hi(n,Yr);f=Hi(v.firestore,Jr),m=v._query;let E=new Vh(f);u={next:b=>{e[a]&&e[a](new L_(f,E,v,b))},error:e[a+1],complete:e[a+2]},fk(n._query)}return function(E,b,x,k){let N=new Rh(k),G=new Ah(b,N,x);return E.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return JI(yield D_(E),G)})),()=>{N.Za(),E.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return XI(yield D_(E),G)}))}}(G_(f),m,l,u)}function oT(n,e){return function(i,r){let o=new hr;return i.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return gH(yield SH(i),r,o)})),o.promise}(G_(n),e)}function Sk(n,e,t){let i=t.docs.get(e._key),r=new Vh(n);return new N_(n,r,e._key,i,new nc(t.hasPendingWrites,t.fromCache),e.converter)}function Dk(...n){return new xI("arrayUnion",n)}function Mk(...n){return new PI("arrayRemove",n)}function xk(n){return new AI("increment",n)}(function(e,t=!0){(function(r){cu=r})(Os),Rs(new zi("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),l=new Jr(new aC(i.getProvider("auth-internal")),new dC(i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ae(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new c_(f.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),un(PR,"4.7.3",e),un(PR,"4.7.3","esm2017")})();var hc=class{constructor(e){return e}},Pk="firestore",sT=class{constructor(){return oh(Pk)}};var aT=new pe("angularfire2.firestore-instances");function UH(n,e){let t=Mg(Pk,n,e);return t&&new hc(t)}function jH(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new hc(i)}}var zH={provide:sT,deps:[[new xn,aT]]},$H={provide:hc,useFactory:UH,deps:[[new xn,aT],ko]};function Ak(n,...e){return un("angularfire",Za.full,"fst"),rr([$H,zH,{provide:aT,useFactory:jH(n),multi:!0,deps:[lt,Tn,Ul,Qa,[new xn,mh],[new xn,Bl],...e]}])}var Rk=Lt(Ik,!0);var cT=Lt(Mk,!0),lT=Lt(Dk,!0);var uu=Lt(ok,!0);var Ok=Lt(Ck,!0);var fc=Lt(nT,!0);var kk=Lt(wk,!0);var Z_=Lt(bk,!0);var Nk=Lt(sk,!0);var Q_=Lt(xk,!0);var Y_=Lt(_k,!0);var Lk=Lt(Tk,!0);var $h=Lt(gk,!0);var du=Lt(pk,!0);var Fk=Lt(vk,!0);var pc=Lt(Ek,!0);var Vk=Lt(mk,!0);var Hh={production:!1,firebase:{apiKey:"AIzaSyA9H-CYGk2kEsfzKyFMA6cdPQRRQMf750M",authDomain:"bengaluru-swada-1ecca.firebaseapp.com",projectId:"bengaluru-swada-1ecca",storageBucket:"bengaluru-swada-1ecca.firebasestorage.app",messagingSenderId:"831575973864",appId:"1:831575973864:web:8ba5a2fa1e28b9e16bce5d",measurementId:"G-DEZTYKDN53"},cloudflare:{workerUrl:"https://r2-video-uploader.bengaluru-swada.workers.dev",cdnUrl:"https://r2-video-uploader.bengaluru-swada.workers.dev",bucketName:"bengaluru-swada-videos"}};var mc=class{hasShownSplash=!1;markSplashShown(){this.hasShownSplash=!0}shouldShowSplash(){return!this.hasShownSplash}reset(){this.hasShownSplash=!1}},gc=()=>{let n=Q(ut);return Q(mc).shouldShowSplash()?(console.log("[SplashGuard] Redirecting to splash screen"),n.createUrlTree(["/"])):!0};var J_=class n{constructor(e,t,i){this.router=e;this.auth=t;this.appInit=i}minSplashDuration=3e3;splashStartTime=0;authUnsubscribe;ngOnInit(){this.splashStartTime=Date.now(),console.log("[Splash] Splash screen started at:",new Date().toISOString()),this.authUnsubscribe=SR(this.auth,e=>{let t=Date.now()-this.splashStartTime,i=Math.max(0,this.minSplashDuration-t);console.log(`[Splash] Auth checked. Elapsed: ${t}ms, Waiting additional: ${i}ms`),setTimeout(()=>{this.appInit.markSplashShown(),e?(console.log("[Splash] User is logged in:",e.uid),this.router.navigate(["/main-app"],{replaceUrl:!0})):(console.log("[Splash] User is not logged in, navigating to phone-input"),this.router.navigate(["/phone-input"],{replaceUrl:!0}))},i)})}ngOnDestroy(){this.authUnsubscribe&&this.authUnsubscribe()}static \u0275fac=function(t){return new(t||n)(se(ut),se(Dt),se(mc))};static \u0275cmp=ht({type:n,selectors:[["app-splash"]],standalone:!0,features:[ft],decls:2,vars:0,consts:[[1,"splash-container"],["src","logo.jpg","alt","Bengaluru Swada Logo",1,"splash-logo"]],template:function(t,i){t&1&&(I(0,"div",0),te(1,"img",1),S())},dependencies:[bt],styles:[".splash-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#fff}.splash-logo[_ngcontent-%COMP%]{max-width:80%;max-height:50vh;object-fit:contain;animation:_ngcontent-%COMP%_fadeIn 1.5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}"]})};var Gk=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(se(ka),se(sr))}}static{this.\u0275dir=Sn({type:n})}}return n})(),Wk=(()=>{class n extends Gk{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275dir=Sn({type:n,features:[Or]})}}return n})(),gT=new pe("");var GH={provide:gT,useExisting:_o(()=>ni),multi:!0};function WH(){let n=To()?To().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var KH=new pe(""),ni=(()=>{class n extends Gk{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!WH())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(se(ka),se(sr),se(KH,8))}}static{this.\u0275dir=Sn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&re("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[La([GH]),Or]})}}return n})();function uT(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function ZH(n){return n!=null&&typeof n.length=="number"}var iv=new pe(""),QH=new pe("");function YH(n){return e=>{if(uT(e.value)||uT(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function JH(n){return e=>ZH(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function XH(n){if(!n)return dT;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(uT(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function dT(n){return null}function Kk(n){return n!=null}function Zk(n){return Fa(n)?At(n):n}function Qk(n){let e={};return n.forEach(t=>{e=t!=null?J(J({},e),t):e}),Object.keys(e).length===0?null:e}function Yk(n,e){return e.map(t=>t(n))}function eq(n){return!n.validate}function Jk(n){return n.map(e=>eq(e)?e:t=>e.validate(t))}function tq(n){if(!n)return null;let e=n.filter(Kk);return e.length==0?null:function(t){return Qk(Yk(t,e))}}function Xk(n){return n!=null?tq(Jk(n)):null}function nq(n){if(!n)return null;let e=n.filter(Kk);return e.length==0?null:function(t){let i=Yk(t,e).map(Zk);return Zv(i).pipe(Ae(Qk))}}function eN(n){return n!=null?nq(Jk(n)):null}function Bk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function iq(n){return n._rawValidators}function rq(n){return n._rawAsyncValidators}function hT(n){return n?Array.isArray(n)?n:[n]:[]}function ev(n,e){return Array.isArray(n)?n.includes(e):n===e}function Uk(n,e){let t=hT(e);return hT(n).forEach(r=>{ev(t,r)||t.push(r)}),t}function jk(n,e){return hT(e).filter(t=>!ev(n,t))}var tv=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},fT=class extends tv{get formDirective(){return null}get path(){return null}},Zh=class extends tv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},pT=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},oq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Tre=ke(J({},oq),{"[class.ng-submitted]":"isSubmitted"}),qi=(()=>{class n extends pT{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(se(Zh,2))}}static{this.\u0275dir=Sn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&We("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Or]})}}return n})();var qh="VALID",X_="INVALID",hu="PENDING",Gh="DISABLED",pu=class{},nv=class extends pu{constructor(e,t){super(),this.value=e,this.source=t}},Wh=class extends pu{constructor(e,t){super(),this.pristine=e,this.source=t}},Kh=class extends pu{constructor(e,t){super(),this.touched=e,this.source=t}},fu=class extends pu{constructor(e,t){super(),this.status=e,this.source=t}};function sq(n){return(rv(n)?n.validators:n)||null}function aq(n){return Array.isArray(n)?Xk(n):n||null}function cq(n,e){return(rv(e)?e.asyncValidators:n)||null}function lq(n){return Array.isArray(n)?eN(n):n||null}function rv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var mT=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ym(()=>this.statusReactive()),this.statusReactive=fm(void 0),this._pristine=ym(()=>this.pristineReactive()),this.pristineReactive=fm(!0),this._touched=ym(()=>this.touchedReactive()),this.touchedReactive=fm(!1),this._events=new _n,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Es(this.statusReactive)}set status(e){Es(()=>this.statusReactive.set(e))}get valid(){return this.status===qh}get invalid(){return this.status===X_}get pending(){return this.status==hu}get disabled(){return this.status===Gh}get enabled(){return this.status!==Gh}get pristine(){return Es(this.pristineReactive)}set pristine(e){Es(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Es(this.touchedReactive)}set touched(e){Es(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Uk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Uk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jk(e,this._rawAsyncValidators))}hasValidator(e){return ev(this._rawValidators,e)}hasAsyncValidator(e){return ev(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ke(J({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Kh(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Kh(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ke(J({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Wh(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Wh(!0,i))}markAsPending(e={}){this.status=hu;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fu(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ke(J({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Gh,this.errors=null,this._forEachChild(r=>{r.disable(ke(J({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nv(this.value,i)),this._events.next(new fu(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ke(J({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qh,this._forEachChild(i=>{i.enable(ke(J({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ke(J({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qh||this.status===hu)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nv(this.value,t)),this._events.next(new fu(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ke(J({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gh:qh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=hu,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=Zk(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new fu(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?Gh:this.errors?X_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hu)?hu:this._anyControlsHaveStatus(X_)?X_:qh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Wh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Kh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=aq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=lq(this._rawAsyncValidators)}};var tN=new pe("CallSetDisabledState",{providedIn:"root",factory:()=>_T}),_T="always";function uq(n,e){return[...e.path,n]}function dq(n,e,t=_T){fq(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),pq(n,e),gq(n,e),mq(n,e),hq(n,e)}function zk(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hq(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function fq(n,e){let t=iq(n);e.validator!==null?n.setValidators(Bk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=rq(n);e.asyncValidator!==null?n.setAsyncValidators(Bk(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();zk(e._rawValidators,r),zk(e._rawAsyncValidators,r)}function pq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&nN(n,e)})}function mq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&nN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function nN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gq(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function _q(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function vq(n){return Object.getPrototypeOf(n.constructor)===Wk}function yq(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===ni?t=o:vq(o)?i=o:r=o}),r||i||t||null}function $k(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Hk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var wq=class extends mT{constructor(e=null,t,i){super(sq(t),cq(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Hk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){$k(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){$k(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Hk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var bq={provide:Zh,useExisting:_o(()=>Si)},qk=Promise.resolve(),Si=(()=>{class n extends Zh{constructor(t,i,r,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new wq,this._registered=!1,this.name="",this.update=new Ge,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=yq(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),_q(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){dq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){qk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Va(i);qk.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?uq(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(se(fT,9),se(iv,10),se(QH,10),se(gT,10),se(gi,8),se(tN,8))}}static{this.\u0275dir=Sn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[La([bq]),Or,Li]})}}return n})();var Eq={provide:gT,useExisting:_o(()=>vT),multi:!0},vT=(()=>{class n extends Wk{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275dir=Sn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&re("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[La([Eq]),Or]})}}return n})();function Cq(n){return typeof n=="number"?n:parseInt(n,10)}function Iq(n){return typeof n=="number"?n:parseFloat(n)}var yT=(()=>{class n{constructor(){this._validator=dT}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):dT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Sn({type:n,features:[Li]})}}return n})();var Tq={provide:iv,useExisting:_o(()=>wT),multi:!0},wT=(()=>{class n extends yT{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>Iq(t),this.createValidator=t=>YH(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275dir=Sn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&kr("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[La([Tq]),Or]})}}return n})();var Sq={provide:iv,useExisting:_o(()=>Qh),multi:!0},Qh=(()=>{class n extends yT{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>Cq(t),this.createValidator=t=>JH(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275dir=Sn({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&kr("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[La([Sq]),Or]})}}return n})(),Dq={provide:iv,useExisting:_o(()=>bT),multi:!0},bT=(()=>{class n extends yT{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>XH(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275dir=Sn({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&kr("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[La([Dq]),Or]})}}return n})();var Mq=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ar({type:n})}static{this.\u0275inj=Pr({})}}return n})();var ii=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:tN,useValue:t.callSetDisabledState??_T}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ar({type:n})}static{this.\u0275inj=Pr({imports:[Mq]})}}return n})();var gu=class n{constructor(e){this.auth=e}confirmationResult=null;phoneNumber="";sendOtp(e,t){return T(this,null,function*(){try{let i=yield DR(this.auth,e,t);return this.setConfirmationResult(i),this.setPhoneNumber(e),i}catch(i){throw i}})}setConfirmationResult(e){this.confirmationResult=e}getConfirmationResult(){return this.confirmationResult}setPhoneNumber(e){this.phoneNumber=e}getPhoneNumber(){return this.phoneNumber}static \u0275fac=function(t){return new(t||n)(ve(Dt))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};function xq(n,e){if(n&1&&(I(0,"div",14)(1,"span"),H(2),S()()),n&2){let t=de();U(2),Ye("\u26A0\uFE0F ",t.error,"")}}function Pq(n,e){n&1&&(I(0,"span"),H(1,"Continue"),S())}function Aq(n,e){n&1&&(I(0,"span",15),H(1,"Sending OTP..."),S())}var ov=class n{constructor(e,t,i){this.router=e;this.auth=t;this.phoneAuthService=i}mobile="";valid=!1;loading=!1;error="";recaptchaVerifier;confirmationResult;ngOnInit(){setTimeout(()=>{this.recaptchaVerifier=new Xa(this.auth,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA success"),"expired-callback":()=>this.error="ReCAPTCHA expired. Try again."}),this.recaptchaVerifier.render()})}onInput(){this.valid=/^\d{10}$/.test(this.mobile),this.error=""}continue(){return T(this,null,function*(){if(!(!this.valid||this.loading)){this.loading=!0,this.error="";try{let e="+91"+this.mobile;this.confirmationResult=yield this.phoneAuthService.sendOtp(e,this.recaptchaVerifier),this.router.navigate(["/otp"])}catch(e){console.error(e),e.code==="auth/invalid-phone-number"?this.error="Invalid phone number.":e.code==="auth/too-many-requests"?this.error="Too many attempts. Try again later.":e.code==="auth/quota-exceeded"?this.error="SMS quota exceeded.":e.code==="auth/billing-not-enabled"?this.error="Firebase billing is not enabled. Please enable it in the Firebase Console.":this.error=`Failed to send OTP: ${e.message} (${e.code})`,this.loading=!1}}})}static \u0275fac=function(t){return new(t||n)(se(ut),se(Dt),se(gu))};static \u0275cmp=ht({type:n,selectors:[["app-phone-input"]],standalone:!0,features:[ft],decls:18,vars:8,consts:[[1,"phone-input-page"],[1,"mobile-input-section"],[1,"mobile-form"],[1,"welcome-text"],[1,"subtitle","light-grey"],[1,"input-container"],[1,"country-code"],["type","tel","id","mobileNumber","placeholder","Enter your mobile number","maxlength","10","pattern","[0-9]{10}",3,"ngModelChange","input","ngModel","disabled"],["class","error-message",4,"ngIf"],[1,"continue-btn",3,"click","disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"privacy-text","light-grey"],["id","recaptcha-container"],[1,"error-message"],[1,"loading-spinner"]],template:function(t,i){t&1&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),H(4,"Welcome to Bengaluru Swada!"),S(),I(5,"p",4),H(6," Enter your mobile number to discover amazing street food near you "),S(),I(7,"div",5)(8,"div",6),H(9,"+91"),S(),I(10,"input",7),ln("ngModelChange",function(o){return vn(i.mobile,o)||(i.mobile=o),o}),re("input",function(){return i.onInput()}),S()(),Se(11,xq,3,1,"div",8),I(12,"button",9),re("click",function(){return i.continue()}),Se(13,Pq,2,0,"span",10)(14,Aq,2,0,"span",11),S(),I(15,"p",12),H(16," We'll send you an OTP to verify your number. Your privacy is important to us. "),S(),te(17,"div",13),S()()()),t&2&&(U(10),cn("ngModel",i.mobile),Y("disabled",i.loading),U(),Y("ngIf",i.error),U(),We("active",i.valid&&!i.loading),Y("disabled",!i.valid||i.loading),U(),Y("ngIf",!i.loading),U(),Y("ngIf",i.loading))},dependencies:[bt,Ot,ii,ni,qi,Qh,bT,Si],styles:[".mobile-input-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1rem}.welcome-text[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-bottom:1rem}.mobile-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:2rem;line-height:1.5}.input-container[_ngcontent-%COMP%]{display:flex;background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;overflow:hidden;margin:2rem 0}.country-code[_ngcontent-%COMP%]{padding:1rem;border-right:1px solid #e9ecef;font-weight:600}#mobileNumber[_ngcontent-%COMP%]{flex:1;padding:1rem;border:none;outline:none;font-size:1.1rem;background:transparent}#mobileNumber[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#fee;border:1px solid #fcc;border-radius:8px;padding:.75rem 1rem;margin-bottom:1rem;color:#c33;font-size:.9rem;text-align:left}#recaptcha-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1.5rem 0;min-height:78px}.continue-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;font-weight:600;border-radius:12px;border:none;background:#dee2e6;color:#6c757d;margin-bottom:20px;cursor:pointer;transition:all .2s;font-size:1rem}.continue-btn.active[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;box-shadow:0 4px 15px #ff6b354d;transform:translateY(-1px)}.continue-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.privacy-text[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.4}.light-grey[_ngcontent-%COMP%]{color:#6c757d}"]})};var Rq=()=>[0,1,2,3,4,5];function Oq(n,e){if(n&1){let t=rt();I(0,"input",15),ln("ngModelChange",function(r){let o=he(t).index,a=de();return vn(a.otp[o],r)||(a.otp[o]=r),fe(r)}),re("input",function(){let r=he(t).index,o=de();return fe(o.onOtpInput(r))}),S()}if(n&2){let t=e.index,i=de();We("error-border",i.hasError),cn("ngModel",i.otp[t])}}function kq(n,e){if(n&1&&(I(0,"p",16),H(1,"Resend in "),I(2,"span",17),H(3),S()()),n&2){let t=de();U(3),Ye("",t.countdown,"s")}}function Nq(n,e){if(n&1){let t=rt();I(0,"p",18),re("click",function(){he(t);let r=de();return fe(r.resend())}),H(1,"Resend OTP"),S()}}function Lq(n,e){n&1&&(I(0,"div",19)(1,"div",20)(2,"div",21),te(3,"div",22),S(),I(4,"h2"),H(5,"Verified!"),S()()())}var sv=class n{constructor(e,t,i,r){this.router=e;this.cdr=t;this.phoneAuthService=i;this.auth=r;this.phone=this.phoneAuthService.getPhoneNumber(),this.confirmationResult=this.phoneAuthService.getConfirmationResult(),this.confirmationResult||this.router.navigate(["/phone-input"])}phone="";back=new Ge;verified=new Ge;otp=["","","","","",""];countdown=30;timerHandle;complete=!1;loading=!1;error="";confirmationResult=null;hasError=!1;isVerified=!1;recaptchaVerifier;ngOnInit(){this.startTimer(),setTimeout(()=>{this.recaptchaVerifier||(this.recaptchaVerifier=new Xa(this.auth,"recaptcha-container-otp",{size:"invisible",callback:()=>{}}))})}startTimer(){clearInterval(this.timerHandle),this.countdown=30,this.timerHandle=setInterval(()=>{this.countdown>0?this.countdown--:clearInterval(this.timerHandle),this.cdr.detectChanges()},1e3)}onOtpInput(e){if(this.complete=this.otp.join("").length===6&&/^\d{6}$/.test(this.otp.join("")),this.error="",this.hasError=!1,this.otp[e]&&e<5){let t=document.querySelectorAll(".otp-input")[e+1];t&&t.focus()}}verify(){return T(this,null,function*(){if(!(!this.complete||this.loading||!this.confirmationResult)){this.loading=!0,this.error="",this.hasError=!1;try{let e=this.otp.join(""),t=yield this.confirmationResult.confirm(e);console.log("User signed in successfully:",t.user),this.isVerified=!0,this.loading=!1,setTimeout(()=>{this.router.navigate(["/location-permission"],{replaceUrl:!0})},2e3)}catch(e){console.error("Error verifying OTP:",e),e.code==="auth/invalid-verification-code"?this.error="Invalid OTP. Please check and try again.":e.code==="auth/code-expired"?this.error="OTP has expired. Please request a new one.":this.error="Verification failed. Please try again.",this.loading=!1,this.hasError=!0,this.otp=["","","","","",""],this.complete=!1}}})}resend(){return T(this,null,function*(){if(!this.loading){this.loading=!0,this.error="";try{console.log("Current stored phone:",this.phone);let e=this.phone;e.startsWith("+")||(e="+91"+e),console.log("Sending OTP to:",e);let t=yield this.phoneAuthService.sendOtp(e,this.recaptchaVerifier);this.confirmationResult=t,this.phoneAuthService.setConfirmationResult(t),this.startTimer(),this.otp=["","","","","",""],this.complete=!1,this.loading=!1}catch(e){console.error("Resend error:",e),this.error="Failed to resend OTP. Try again later.",this.loading=!1}}})}change(){this.router.navigate(["/phone-input"])}static \u0275fac=function(t){return new(t||n)(se(ut),se(gi),se(gu),se(Dt))};static \u0275cmp=ht({type:n,selectors:[["app-otp"]],outputs:{back:"back",verified:"verified"},standalone:!0,features:[ft],decls:22,vars:8,consts:[[1,"otp-container"],[1,"otp-section"],[1,"otp-form"],[1,"otp-title"],[1,"otp-subtitle"],[1,"phone-number"],["class","otp-input","type","text","inputmode","numeric","maxlength","1",3,"error-border","ngModel","ngModelChange","input",4,"ngFor","ngForOf"],[1,"verify-btn",3,"click","disabled"],[1,"resend-container"],[1,"resend-text"],["class","timer",4,"ngIf"],["class","resend-link",3,"click",4,"ngIf"],[3,"click"],["id","recaptcha-container-otp"],["class","success-overlay",4,"ngIf"],["type","text","inputmode","numeric","maxlength","1",1,"otp-input",3,"ngModelChange","input","ngModel"],[1,"timer"],[1,"countdown"],[1,"resend-link",3,"click"],[1,"success-overlay"],[1,"success-content"],[1,"checkmark-circle"],[1,"checkmark","draw"]],template:function(t,i){t&1&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),H(4,"Verify Your Number"),S(),I(5,"p",4),H(6,"We've sent a 6-digit OTP to "),I(7,"span",5),H(8),S()(),I(9,"div",0),Se(10,Oq,1,3,"input",6),S(),I(11,"button",7),re("click",function(){return i.verify()}),H(12),S(),I(13,"div",8)(14,"p",9),H(15,"Didn't receive OTP?"),S(),Se(16,kq,4,1,"p",10)(17,Nq,2,0,"p",11),S(),I(18,"div",12),re("click",function(){return i.change()}),H(19,"\u2190 Change Number"),S(),te(20,"div",13),S()(),Se(21,Lq,6,0,"div",14),S()),t&2&&(U(8),gt(i.phone),U(2),Y("ngForOf",LM(7,Rq)),U(),Y("disabled",!i.complete||i.loading),U(),Ye(" ",i.loading?"Verifying OTP...":"Verify OTP"," "),U(4),Y("ngIf",i.countdown>0),U(),Y("ngIf",i.countdown===0),U(4),Y("ngIf",i.isVerified))},dependencies:[ii,ni,qi,Qh,Si,bt,An,Ot],styles:['.otp-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1rem;background:#fff;font-family:Poppins,sans-serif}.otp-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.otp-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.otp-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin-bottom:2.5rem}.phone-number[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600}.otp-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-bottom:2rem;width:100%}@media (min-width: 400px){.otp-container[_ngcontent-%COMP%]{gap:1rem}}.otp-input[_ngcontent-%COMP%]{width:100%;max-width:45px;aspect-ratio:1;height:auto;border:1px solid #dee2e6;border-radius:12px;text-align:center;font-size:1.2rem;background:#fff;color:#495057;transition:all .2s;box-shadow:0 2px 5px #00000005;padding:0}@media (min-width: 400px){.otp-input[_ngcontent-%COMP%]{max-width:60px;font-size:1.5rem}}.otp-input[_ngcontent-%COMP%]:focus{border-color:#ff6b35;outline:none;box-shadow:0 0 0 3px #ff6b351a}.error-border[_ngcontent-%COMP%]{border-color:red!important;box-shadow:0 0 0 3px #ff00001a!important}.verify-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;border-radius:12px;border:none;background:#dfe4ea;color:#495057;font-size:1rem;font-weight:600;cursor:not-allowed;margin-bottom:2rem;transition:all .2s}.verify-btn[_ngcontent-%COMP%]:not([disabled]){background:#ff6b35;color:#fff;cursor:pointer;box-shadow:0 4px 10px #ff6b354d}.resend-container[_ngcontent-%COMP%]{margin-bottom:2rem;color:#7f8c8d;font-size:.9rem}.resend-text[_ngcontent-%COMP%]{margin-bottom:.3rem;cursor:pointer;font-size:.9rem;transition:color .2s}.resend-text[_ngcontent-%COMP%]:hover{color:#495057}.timer[_ngcontent-%COMP%]{color:#7f8c8d}.timer[_ngcontent-%COMP%]   .countdown[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600}.resend-link[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600;cursor:pointer;text-decoration:underline}.success-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffffff2;display:flex;justify-content:center;align-items:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.success-content[_ngcontent-%COMP%]{text-align:center}.success-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin:1rem 0 .5rem;font-size:2rem}.success-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d}.checkmark-circle[_ngcontent-%COMP%]{width:80px;height:80px;position:relative;display:inline-block;vertical-align:top;border-radius:50%;background-color:#2ecc71;animation:_ngcontent-%COMP%_scaleIn .3s cubic-bezier(.175,.885,.32,1.275) forwards}.checkmark[_ngcontent-%COMP%]:after{content:"";display:block;width:20px;height:40px;border:solid #fff;border-width:0 4px 4px 0;position:absolute;top:16px;left:28px;transform:rotate(45deg);opacity:0;animation:_ngcontent-%COMP%_checkmark .3s ease-out .3s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_checkmark{0%{opacity:0;height:0}to{opacity:1;height:40px}}']})};var Gi=class n{userLocation=null;locationPromise=null;LOCATION_TIMEOUT_MS=5e3;DEFAULT_LOCATION={latitude:12.9352,longitude:77.6245};AREAS=[{name:"Adugodi",pincode:"560030",lat:12.9716,lng:77.5946},{name:"Agaram",pincode:"560007",lat:12.8431,lng:77.4863},{name:"Air Force Stn. Yelahanka",pincode:"560063",lat:13.1048,lng:77.5763},{name:"Banashankari",pincode:"560050",lat:12.925453,lng:77.546761},{name:"Banashankari 2nd Stage",pincode:"560070",lat:12.9249,lng:77.5662},{name:"Banashankari 3rd Stage",pincode:"560085",lat:12.9216,lng:77.5543},{name:"Banashankari 6th Stage",pincode:"560062",lat:12.8963,lng:77.5353},{name:"Banaswadi",pincode:"560043",lat:13.0159,lng:77.6516},{name:"Basavanapura",pincode:"560036",lat:12.9835,lng:77.6773},{name:"Basaveshwaranagar",pincode:"560079",lat:12.9975,lng:77.5334},{name:"Bellandur",pincode:"560103",lat:12.9304,lng:77.6784},{name:"Bidadi",pincode:"562109",lat:12.8274,lng:77.3971},{name:"Bilekahalli",pincode:"560076",lat:12.8989,lng:77.6103},{name:"Binnamangala",pincode:"560038",lat:12.9837,lng:77.6388},{name:"Bommanahalli",pincode:"560068",lat:12.9082,lng:77.6245},{name:"Bommasandra",pincode:"560099",lat:12.8009,lng:77.699},{name:"Brookefield",pincode:"560037",lat:12.9698,lng:77.7184},{name:"BTM 2nd Stage",pincode:"560076",lat:12.9167,lng:77.6108},{name:"Budigere",pincode:"562129",lat:13.035,lng:77.7478},{name:"Byatarayanapura",pincode:"560026",lat:13.056,lng:77.5926},{name:"C V Raman Nagar",pincode:"560093",lat:12.9767,lng:77.6597},{name:"Chamarajpet",pincode:"560018",lat:12.9582,lng:77.5709},{name:"Channasandra",pincode:"560067",lat:12.9629,lng:77.758},{name:"Chikbasavanapura",pincode:"560067",lat:12.9948,lng:77.7327},{name:"Chickpet",pincode:"560053",lat:12.9662,lng:77.5767},{name:"Chikkalasandra",pincode:"560061",lat:12.9132,lng:77.5454},{name:"Choodasandra",pincode:"560099",lat:12.8848,lng:77.6785},{name:"Cox Town",pincode:"560005",lat:12.9996,lng:77.6229},{name:"D J Halli",pincode:"560005",lat:13.0083,lng:77.6228},{name:"Doddabidarakallu",pincode:"560073",lat:13.0426,lng:77.5019},{name:"Doorvaninagar",pincode:"560016",lat:13.0252,lng:77.6688},{name:"Ejipura",pincode:"560047",lat:12.9437,lng:77.6274},{name:"Electronic City",pincode:"560100",lat:12.8394,lng:77.677},{name:"Frazer Town",pincode:"560005",lat:12.999,lng:77.6226},{name:"Gandhi Nagar",pincode:"560009",lat:12.9772,lng:77.573},{name:"Gavipuram Extn",pincode:"560019",lat:12.9552,lng:77.5668},{name:"Geddalahalli",pincode:"560077",lat:13.0309,lng:77.6389},{name:"Gottigere",pincode:"560083",lat:12.8725,lng:77.5944},{name:"Halasur",pincode:"560042",lat:12.9833,lng:77.6194},{name:"Hebbal",pincode:"560024",lat:13.0355,lng:77.606},{name:"Heggere",pincode:"560073",lat:13.0172,lng:77.5004},{name:"HMT Layout",pincode:"560031",lat:13.039,lng:77.547},{name:"Horamavu",pincode:"560043",lat:13.0267,lng:77.6571},{name:"Hosakerehalli",pincode:"560085",lat:12.9251,lng:77.536},{name:"HSR Layout",pincode:"560102",lat:12.9121,lng:77.6446},{name:"Hulimavu",pincode:"560076",lat:12.8829,lng:77.6083},{name:"Indiranagar",pincode:"560038",lat:12.9719,lng:77.6412},{name:"ISRO Layout",pincode:"560078",lat:12.9056,lng:77.5665},{name:"J P Nagar",pincode:"560078",lat:12.9041,lng:77.5852},{name:"Jakkur",pincode:"560064",lat:13.0811,lng:77.5924},{name:"Jalahalli",pincode:"560013",lat:13.0491,lng:77.5422},{name:"Jayanagar 4th T Block",pincode:"560041",lat:12.9352,lng:77.5837},{name:"Jigani",pincode:"560105",lat:12.7849,lng:77.642},{name:"Kadubeesanahalli",pincode:"560103",lat:12.956,lng:77.7026},{name:"Kadugodi",pincode:"560067",lat:12.9968,lng:77.7583},{name:"Kaggadasapura",pincode:"560093",lat:12.9782,lng:77.6801},{name:"Kalasipalyam",pincode:"560002",lat:12.9636,lng:77.5777},{name:"Kalyananagar",pincode:"560043",lat:13.0288,lng:77.6402},{name:"Kamakshipalya",pincode:"560079",lat:12.9829,lng:77.5208},{name:"Kengeri",pincode:"560060",lat:12.9177,lng:77.4822},{name:"Kodichikkanahalli",pincode:"560068",lat:12.8903,lng:77.6239},{name:"Koramangala",pincode:"560095",lat:12.9344,lng:77.6173},{name:"KR Puram",pincode:"560036",lat:13.0022,lng:77.6951},{name:"Kyalasanahalli",pincode:"560077",lat:13.0269,lng:77.6589},{name:"Laggere",pincode:"560058",lat:13.0102,lng:77.5157},{name:"Mahadevapura",pincode:"560048",lat:12.9923,lng:77.6957},{name:"Majestic",pincode:"560009",lat:12.9779,lng:77.572},{name:"Malleshpalya",pincode:"560075",lat:12.9839,lng:77.6702},{name:"Malleshwaram",pincode:"560003",lat:12.9999,lng:77.5715},{name:"Manorayanapalya",pincode:"560032",lat:13.0365,lng:77.5726},{name:"Marathahalli",pincode:"560037",lat:12.9563,lng:77.7019},{name:"Mathikere",pincode:"560054",lat:13.0307,lng:77.5639},{name:"Munnekollal",pincode:"560037",lat:12.9568,lng:77.7045},{name:"Nagarbhavi",pincode:"560072",lat:12.9674,lng:77.5049},{name:"Nayandahalli",pincode:"560039",lat:12.9413,lng:77.5159},{name:"Neelasandra",pincode:"560047",lat:12.9479,lng:77.6236},{name:"Peenya",pincode:"560058",lat:13.0194,lng:77.5153},{name:"Raghuvanahalli",pincode:"560062",lat:12.8821,lng:77.5466},{name:"Rajajinagar",pincode:"560010",lat:12.9989,lng:77.5536},{name:"Ramamurthy Nagar",pincode:"560016",lat:13.0045,lng:77.6797},{name:"RT Nagar",pincode:"560032",lat:13.0266,lng:77.5979},{name:"Sadashivanagar",pincode:"560080",lat:13.0093,lng:77.5772},{name:"Shanti Nagar",pincode:"560027",lat:12.9537,lng:77.5926},{name:"Tavarekere",pincode:"560029",lat:12.931,lng:77.6106},{name:"Varthur",pincode:"560087",lat:12.9352,lng:77.7501},{name:"Vidyaranyapura",pincode:"560097",lat:13.067,lng:77.56}];locationSource=new Wt(null);currentLocation$=this.locationSource.asObservable();updateLocation(e,t,i){this.setUserLocation(t,i),this.locationSource.next({name:e,lat:t,lng:i})}DEFAULT_LOCATION_DATA={name:"Koramangala",lat:12.9352,lng:77.6245};getUserLocation(){return this.userLocation?Promise.resolve(this.userLocation):this.locationPromise?this.locationPromise:(this.locationPromise=new Promise(e=>{let t=!1,i=setTimeout(()=>{t||(t=!0,console.warn("[LocationService] Timeout expired. Using default location."),this.userLocation=this.DEFAULT_LOCATION,e(this.DEFAULT_LOCATION),this.locationPromise=null)},this.LOCATION_TIMEOUT_MS);if(!("geolocation"in navigator)){t||(t=!0,clearTimeout(i),this.userLocation=this.DEFAULT_LOCATION,e(this.DEFAULT_LOCATION));return}navigator.geolocation.getCurrentPosition(r=>{t||(t=!0,clearTimeout(i),this.userLocation={latitude:r.coords.latitude,longitude:r.coords.longitude},e(this.userLocation))},r=>{t||(t=!0,clearTimeout(i),console.warn("[LocationService] Geolocation error, using default. Code:",r.code),this.userLocation=this.DEFAULT_LOCATION,e(this.DEFAULT_LOCATION))},{enableHighAccuracy:!1,timeout:4e3,maximumAge:6e5})}),this.locationPromise)}setUserLocation(e,t){this.userLocation={latitude:e,longitude:t}}calculateDistance(e,t,i,r){let a=this.toRadians(i-e),l=this.toRadians(r-t),u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(i))*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}formatDistance(e){return e<1?`${Math.round(e*1e3)} m`:`${e.toFixed(1)} km`}getDistanceFromUser(e,t){return T(this,null,function*(){let i=yield this.getUserLocation(),r=this.calculateDistance(i.latitude,i.longitude,e,t);return this.formatDistance(r)})}toRadians(e){return e*(Math.PI/180)}clearLocation(){this.userLocation=null}getAreaName(e,t){return this.findNearestArea(e,t)}findNearestArea(e,t){let i="Bangalore",r=1/0;for(let o of this.AREAS){let a=this.calculateDistance(e,t,o.lat,o.lng);a<r&&(r=a,i=o.name)}return i}static \u0275fac=function(t){return new(t||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};var Fq=["searchInput"];function Vq(n,e){if(n&1){let t=rt();I(0,"div",33),re("click",function(){let r=he(t).$implicit,o=de(2);return fe(o.selectLocation(r))}),I(1,"div",3),Ce(),I(2,"svg",34),te(3,"path",35),S()(),xe(),I(4,"div",36)(5,"div",37),H(6),S(),I(7,"div",38),H(8),S()(),Ce(),I(9,"svg",39),te(10,"path",40),S()()}if(n&2){let t=e.$implicit;U(6),gt(t.name),U(2),Ye("Pincode: ",t.pincode,"")}}function Bq(n,e){n&1&&(I(0,"div",41),Ce(),I(1,"svg",42),te(2,"circle",27)(3,"path",28),S(),xe(),I(4,"p"),H(5,"No locations found"),S(),I(6,"span"),H(7,"Try searching for a different area"),S()())}function Uq(n,e){if(n&1){let t=rt();I(0,"div",19),re("click",function(){he(t);let r=de();return fe(r.closeLocationModal())}),I(1,"div",20),re("click",function(r){return he(t),fe(r.stopPropagation())}),I(2,"div",21)(3,"h2"),H(4,"Select Location"),S(),I(5,"button",22),re("click",function(){he(t);let r=de();return fe(r.closeLocationModal())}),Ce(),I(6,"svg",23),te(7,"path",24),S()()(),xe(),I(8,"div",25),Ce(),I(9,"svg",26),te(10,"circle",27)(11,"path",28),S(),xe(),I(12,"input",29,0),ln("ngModelChange",function(r){he(t);let o=de();return vn(o.searchQuery,r)||(o.searchQuery=r),fe(r)}),S()(),I(14,"div",30),Se(15,Vq,11,2,"div",31)(16,Bq,8,0,"div",32),S()()()}if(n&2){let t=de();U(12),cn("ngModel",t.searchQuery),U(3),Y("ngForOf",t.filteredLocations),U(),Y("ngIf",t.filteredLocations.length===0)}}var av=class n{constructor(e,t){this.router=e;this.locationService=t}searchInput;showLocationModal=!1;searchQuery="";locations=[{name:"Adugodi",pincode:"560030",lat:12.9716,lng:77.5946},{name:"Agaram",pincode:"560007",lat:12.8431,lng:77.4863},{name:"Air Force Stn. Yelahanka",pincode:"560063",lat:13.1048,lng:77.5763},{name:"Banashankari",pincode:"560050",lat:12.925453,lng:77.546761},{name:"Banashankari 2nd Stage",pincode:"560070",lat:12.9249,lng:77.5662},{name:"Banashankari 3rd Stage",pincode:"560085",lat:12.9216,lng:77.5543},{name:"Banashankari 6th Stage",pincode:"560062",lat:12.8963,lng:77.5353},{name:"Banaswadi",pincode:"560043",lat:13.0159,lng:77.6516},{name:"Basavanapura",pincode:"560036",lat:12.9835,lng:77.6773},{name:"Basaveshwaranagar",pincode:"560079",lat:12.9975,lng:77.5334},{name:"Bellandur",pincode:"560103",lat:12.9304,lng:77.6784},{name:"Bidadi",pincode:"562109",lat:12.8274,lng:77.3971},{name:"Bilekahalli",pincode:"560076",lat:12.8989,lng:77.6103},{name:"Binnamangala",pincode:"560038",lat:12.9837,lng:77.6388},{name:"Bommanahalli",pincode:"560068",lat:12.9082,lng:77.6245},{name:"Bommasandra",pincode:"560099",lat:12.8009,lng:77.699},{name:"Brookefield",pincode:"560037",lat:12.9698,lng:77.7184},{name:"BTM 2nd Stage",pincode:"560076",lat:12.9167,lng:77.6108},{name:"Budigere",pincode:"562129",lat:13.035,lng:77.7478},{name:"Byatarayanapura",pincode:"560026",lat:13.056,lng:77.5926},{name:"C V Raman Nagar",pincode:"560093",lat:12.9767,lng:77.6597},{name:"Chamarajpet",pincode:"560018",lat:12.9582,lng:77.5709},{name:"Channasandra",pincode:"560067",lat:12.9629,lng:77.758},{name:"Chikbasavanapura",pincode:"560067",lat:12.9948,lng:77.7327},{name:"Chickpet",pincode:"560053",lat:12.9662,lng:77.5767},{name:"Chikkalasandra",pincode:"560061",lat:12.9132,lng:77.5454},{name:"Choodasandra",pincode:"560099",lat:12.8848,lng:77.6785},{name:"Cox Town",pincode:"560005",lat:12.9996,lng:77.6229},{name:"D J Halli",pincode:"560005",lat:13.0083,lng:77.6228},{name:"Doddabidarakallu",pincode:"560073",lat:13.0426,lng:77.5019},{name:"Doorvaninagar",pincode:"560016",lat:13.0252,lng:77.6688},{name:"Ejipura",pincode:"560047",lat:12.9437,lng:77.6274},{name:"Electronic City",pincode:"560100",lat:12.8394,lng:77.677},{name:"Frazer Town",pincode:"560005",lat:12.999,lng:77.6226},{name:"Gandhi Nagar",pincode:"560009",lat:12.9772,lng:77.573},{name:"Gavipuram Extn",pincode:"560019",lat:12.9552,lng:77.5668},{name:"Geddalahalli",pincode:"560077",lat:13.0309,lng:77.6389},{name:"Gottigere",pincode:"560083",lat:12.8725,lng:77.5944},{name:"Halasur",pincode:"560042",lat:12.9833,lng:77.6194},{name:"Hebbal",pincode:"560024",lat:13.0355,lng:77.606},{name:"Heggere",pincode:"560073",lat:13.0172,lng:77.5004},{name:"HMT Layout",pincode:"560031",lat:13.039,lng:77.547},{name:"Horamavu",pincode:"560043",lat:13.0267,lng:77.6571},{name:"Hosakerehalli",pincode:"560085",lat:12.9251,lng:77.536},{name:"HSR Layout",pincode:"560102",lat:12.9121,lng:77.6446},{name:"Hulimavu",pincode:"560076",lat:12.8829,lng:77.6083},{name:"Indiranagar",pincode:"560038",lat:12.9719,lng:77.6412},{name:"ISRO Layout",pincode:"560078",lat:12.9056,lng:77.5665},{name:"J P Nagar",pincode:"560078",lat:12.9041,lng:77.5852},{name:"Jakkur",pincode:"560064",lat:13.0811,lng:77.5924},{name:"Jalahalli",pincode:"560013",lat:13.0491,lng:77.5422},{name:"Jayanagar 4th T Block",pincode:"560041",lat:12.9352,lng:77.5837},{name:"Jigani",pincode:"560105",lat:12.7849,lng:77.642},{name:"Kadubeesanahalli",pincode:"560103",lat:12.956,lng:77.7026},{name:"Kadugodi",pincode:"560067",lat:12.9968,lng:77.7583},{name:"Kaggadasapura",pincode:"560093",lat:12.9782,lng:77.6801},{name:"Kalasipalyam",pincode:"560002",lat:12.9636,lng:77.5777},{name:"Kalyananagar",pincode:"560043",lat:13.0288,lng:77.6402},{name:"Kamakshipalya",pincode:"560079",lat:12.9829,lng:77.5208},{name:"Kengeri",pincode:"560060",lat:12.9177,lng:77.4822},{name:"Kodichikkanahalli",pincode:"560068",lat:12.8903,lng:77.6239},{name:"Koramangala",pincode:"560095",lat:12.9344,lng:77.6173},{name:"KR Puram",pincode:"560036",lat:13.0022,lng:77.6951},{name:"Kyalasanahalli",pincode:"560077",lat:13.0269,lng:77.6589},{name:"Laggere",pincode:"560058",lat:13.0102,lng:77.5157},{name:"Mahadevapura",pincode:"560048",lat:12.9923,lng:77.6957},{name:"Majestic",pincode:"560009",lat:12.9779,lng:77.572},{name:"Malleshpalya",pincode:"560075",lat:12.9839,lng:77.6702},{name:"Malleshwaram",pincode:"560003",lat:12.9999,lng:77.5715},{name:"Manorayanapalya",pincode:"560032",lat:13.0365,lng:77.5726},{name:"Marathahalli",pincode:"560037",lat:12.9563,lng:77.7019},{name:"Mathikere",pincode:"560054",lat:13.0307,lng:77.5639},{name:"Munnekollal",pincode:"560037",lat:12.9568,lng:77.7045},{name:"Nagarbhavi",pincode:"560072",lat:12.9674,lng:77.5049},{name:"Nayandahalli",pincode:"560039",lat:12.9413,lng:77.5159},{name:"Neelasandra",pincode:"560047",lat:12.9479,lng:77.6236},{name:"Peenya",pincode:"560058",lat:13.0194,lng:77.5153},{name:"Raghuvanahalli",pincode:"560062",lat:12.8821,lng:77.5466},{name:"Rajajinagar",pincode:"560010",lat:12.9989,lng:77.5536},{name:"Ramamurthy Nagar",pincode:"560016",lat:13.0045,lng:77.6797},{name:"RT Nagar",pincode:"560032",lat:13.0266,lng:77.5979},{name:"Sadashivanagar",pincode:"560080",lat:13.0093,lng:77.5772},{name:"Shanti Nagar",pincode:"560027",lat:12.9537,lng:77.5926},{name:"Tavarekere",pincode:"560029",lat:12.931,lng:77.6106},{name:"Varthur",pincode:"560087",lat:12.9352,lng:77.7501},{name:"Vidyaranyapura",pincode:"560097",lat:13.067,lng:77.56}];ngAfterViewInit(){this.showLocationModal&&this.searchInput&&setTimeout(()=>this.searchInput?.nativeElement.focus(),300)}allow(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,i=e.coords.longitude,r=this.locationService.findNearestArea(t,i);this.locationService.setUserLocation(t,i),this.router.navigate(["/main-app"],{replaceUrl:!0,state:{location:r,latitude:t,longitude:i}})},e=>{console.error("Location error:",e),alert("Location denied or unavailable")},{enableHighAccuracy:!0,timeout:1e4}):alert("Geolocation not supported")}manual(){this.showLocationModal=!0,this.searchQuery="",setTimeout(()=>this.searchInput?.nativeElement.focus(),300)}closeLocationModal(){this.showLocationModal=!1,this.searchQuery=""}selectLocation(e){this.locationService.setUserLocation(e.lat,e.lng),this.router.navigate(["/main-app"],{replaceUrl:!0,state:{location:e.name,latitude:e.lat,longitude:e.lng}})}get filteredLocations(){if(!this.searchQuery.trim())return this.locations;let e=this.searchQuery.toLowerCase();return this.locations.filter(t=>t.name.toLowerCase().includes(e)||t.pincode.includes(e))}static \u0275fac=function(t){return new(t||n)(se(ut),se(Gi))};static \u0275cmp=ht({type:n,selectors:[["app-location-permission"]],viewQuery:function(t,i){if(t&1&&mi(Fq,5),t&2){let r;Xn(r=ei())&&(i.searchInput=r.first)}},standalone:!0,features:[ft],decls:31,vars:1,consts:[["searchInput",""],[1,"location-section"],[1,"location-form"],[1,"location-icon"],["width","80","height","80","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","locationGradient","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","#ff6b35","stop-opacity","1"],["offset","100%",2,"stop-color","#ff8c5a","stop-opacity","1"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","url(#locationGradient)"],[1,"location-title"],[1,"location-subtitle"],[1,"location-benefits"],[1,"benefit-item"],[1,"benefit-icon"],[1,"benefit-text"],[1,"allow-location-btn",3,"click"],[1,"manual-location-btn",3,"click"],[1,"location-privacy"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"location-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-box"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"search-icon"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21l-4.35-4.35","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["type","text","placeholder","Search for a location...",1,"search-input",3,"ngModelChange","ngModel"],[1,"locations-list"],["class","location-item",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"location-item",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","currentColor"],[1,"location-info"],[1,"location-name"],[1,"location-area"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"chevron-right"],["d","M9 18l6-6-6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"no-results"],["width","48","height","48","viewBox","0 0 24 24","fill","none"]],template:function(t,i){t&1&&(I(0,"div",1)(1,"div",2)(2,"div",3),Ce(),I(3,"svg",4)(4,"defs")(5,"linearGradient",5),te(6,"stop",6)(7,"stop",7),S()(),te(8,"path",8),S()(),xe(),I(9,"h2",9),H(10,"Find Street Food Near You"),S(),I(11,"p",10),H(12,"We need your location to show you the best street food options around you"),S(),I(13,"div",11)(14,"div",12)(15,"span",13),H(16,"\u{1F3AF}"),S(),I(17,"span",14),H(18,"Discover food stalls nearby"),S()(),I(19,"div",12)(20,"span",13),H(21,"\u{1F4B0}"),S(),I(22,"span",14),H(23,"See accurate prices & distance"),S()()(),I(24,"button",15),re("click",function(){return i.allow()}),H(25,"Allow Location Access"),S(),I(26,"button",16),re("click",function(){return i.manual()}),H(27,"Select Location Manually"),S(),I(28,"p",17),H(29,"Your location data is secure and only used to show nearby food options."),S()(),Se(30,Uq,17,3,"div",18),S()),t&2&&(U(30),Y("ngIf",i.showLocationModal))},dependencies:[bt,An,Ot,ii,ni,qi,Si],styles:[".location-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1.5rem;background:#fff;font-family:Poppins,sans-serif}.location-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.location-icon[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:inline-block;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.location-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 12px rgba(255,107,53,.3))}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.location-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.location-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin-bottom:2.5rem;line-height:1.5}.location-benefits[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:2.5rem}.benefit-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border-radius:12px;text-align:left}.benefit-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:1rem;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:50%;box-shadow:0 2px 5px #0000000d}.benefit-text[_ngcontent-%COMP%]{font-weight:500;color:#34495e}.allow-location-btn[_ngcontent-%COMP%]{width:100%;padding:1.2rem;background:#ff6b35;color:#fff;border-radius:12px;border:none;font-size:1.1rem;font-weight:600;cursor:pointer;box-shadow:0 4px 15px #ff6b354d;transition:transform .2s;display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem}.allow-location-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.manual-location-btn[_ngcontent-%COMP%]{width:100%;padding:1.1rem;border-radius:12px;border:2px solid #e9ecef;background:#fff;color:#7f8c8d;font-weight:600;cursor:pointer;transition:all .2s}.manual-location-btn[_ngcontent-%COMP%]:hover{border-color:#ced4da;color:#495057}.location-privacy[_ngcontent-%COMP%]{font-size:.8rem;color:#adb5bd;margin-top:2rem;padding:1rem;background:#f8f9fa;border-radius:8px;border-left:3px solid #ff6b35;text-align:left;line-height:1.4}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;backdrop-filter:blur(1px);z-index:100;display:flex;align-items:flex-end;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.location-modal[_ngcontent-%COMP%]{background:#1a1a1a;width:100%;max-height:80vh;border-radius:24px 24px 0 0;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 20px 16px;border-bottom:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff;margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#888;cursor:pointer;border-radius:50%;transition:all .2s ease}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.search-box[_ngcontent-%COMP%]{padding:16px 20px;position:relative;border-bottom:1px solid rgba(255,255,255,.1)}.search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:36px;top:50%;transform:translateY(-50%);color:#666;pointer-events:none}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 48px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:12px;color:#fff;font-size:15px;transition:all .2s ease;box-sizing:border-box}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#666}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;background:#ffffff14;border-color:#ff6b35;box-shadow:0 0 0 3px #ff6b351a}.locations-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px 0}.location-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid rgba(255,255,255,.05)}.location-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.location-item[_ngcontent-%COMP%]:active{background:#ffffff1a;transform:scale(.98)}.location-item[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#ff6b351a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35;flex-shrink:0}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]{flex:1;min-width:0}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;margin-bottom:4px}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-area[_ngcontent-%COMP%]{font-size:13px;color:#888}.location-item[_ngcontent-%COMP%]   .chevron-right[_ngcontent-%COMP%]{color:#666;flex-shrink:0}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:#666}.no-results[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 8px;color:#888}.no-results[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}@media (min-width: 768px){.location-modal[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;border-radius:24px;max-height:70vh}.modal-overlay[_ngcontent-%COMP%]{align-items:center}}"],data:{animation:[cb("fadeIn",[Kd(":enter",[Br({opacity:0}),Wd("200ms ease-out",Br({opacity:1}))]),Kd(":leave",[Wd("200ms ease-in",Br({opacity:0}))])]),cb("slideUp",[Kd(":enter",[Br({transform:"translateY(100%)",opacity:0}),Wd("300ms cubic-bezier(0.4, 0, 0.2, 1)",Br({transform:"translateY(0)",opacity:1}))]),Kd(":leave",[Wd("200ms ease-in",Br({transform:"translateY(100%)",opacity:0}))])])]}})};var jq=["videoEl"];function zq(n,e){n&1&&(I(0,"div",29),te(1,"div",30),S())}function $q(n,e){n&1&&(I(0,"div",31),Ce(),I(1,"svg",32),te(2,"path",33),S()())}function Hq(n,e){n&1&&(Ce(),I(0,"svg",37),te(1,"path",38),S())}function qq(n,e){n&1&&(Ce(),I(0,"svg",37),te(1,"path",39),S())}function Gq(n,e){if(n&1&&(I(0,"div",34)(1,"div",35),Se(2,Hq,2,0,"svg",36)(3,qq,2,0,"svg",36),S()()),n&2){let t=de();U(2),Y("ngIf",t.isMuted),U(),Y("ngIf",!t.isMuted)}}function Wq(n,e){if(n&1&&(I(0,"div",40),Ce(),I(1,"svg",41),te(2,"path",42)(3,"circle",43),S(),xe(),I(4,"span",44),H(5),S()()),n&2){let t=de();U(5),gt(t.formatViewCount(t.displayViewCount))}}function Kq(n,e){if(n&1&&(I(0,"span",45),H(1),S()),n&2){let t=de();U(),gt(t.displayLikes)}}function Zq(n,e){if(n&1){let t=rt();I(0,"button",46),re("click",function(r){he(t);let o=de();return fe(o.onDelete(r))}),Ce(),I(1,"svg",47),te(2,"path",48)(3,"line",49)(4,"line",50),S()()}}var Jh=class n{reel;src="";poster="";title="";vendor="";price="";distance="";active=!1;relativeIndex=0;priority="low";likes=0;viewCount=0;isLiked=!1;isBookmarked=!1;liked=new Ge;bookmarked=new Ge;shared=new Ge;deleted=new Ge;canDelete=!1;videoEl;lastTapTime=0;showLikeAnimation=!1;isProgressBarVisible=!1;progressBarHideTimeout;singleTapTimeout;get displaySrc(){let e=this.reel?.videoUrl||this.src;return e&&e.includes("videos.bengaluru-swada.com")&&(e=e.replace("https://videos.bengaluru-swada.com","https://r2-video-uploader.bengaluru-swada.workers.dev")),e}get displayPoster(){return this.reel?.thumbnailUrl||this.poster}get displayTitle(){return this.reel?.title||this.title}get displayVendor(){return this.reel?.vendor||this.vendor}get displayPrice(){return this.reel?.price||this.price}get displayDistance(){return this.reel?.distance||this.distance}get displayLikes(){return this.reel?.likes||this.likes}get displayViewCount(){return this.reel?.viewCount||this.viewCount}get displayIsLiked(){return this.reel?this.reel.isLiked||!1:this.isLiked}get displayIsBookmarked(){return this.reel?this.reel.isBookmarked||!1:this.isBookmarked}isLoading=!0;progress=0;isSeeking=!1;isMuted=!0;muteChanged=new Ge;showMuteIcon=!1;progressInterval;ngOnChanges(e){if(e.reel||e.src){let t=this.displaySrc,i=e.reel?.previousValue?.videoUrl||e.src?.previousValue;t!==i&&(this.isLoading=!0,this.videoEl&&this.videoEl.nativeElement&&this.videoEl.nativeElement.load())}e.active&&(this.active?this.play():(this.pause(),this.resetVideo())),e.priority&&!this.active&&this.priority==="high"&&this.videoEl?.nativeElement&&this.videoEl.nativeElement.readyState===0&&this.videoEl.nativeElement.load(),this.videoEl?.nativeElement&&(this.videoEl.nativeElement.muted=!this.active||this.isMuted)}ngOnDestroy(){this.pause(),this.progressInterval&&clearInterval(this.progressInterval),this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout),this.playWatchdogTimeout&&clearTimeout(this.playWatchdogTimeout)}ngAfterViewInit(){let e=this.videoEl.nativeElement;["loadstart","loadedmetadata","loadeddata","canplay","playing","waiting","error","stalled","suspend","emptied"].forEach(i=>{e.addEventListener(i,()=>{(i==="playing"||i==="canplay"||i==="loadeddata")&&(this.isLoading=!1,this.startProgressTracking()),i==="waiting"&&(this.isLoading=!0),i==="error"&&(console.error("[VideoCard] Video error:",e.error),this.isLoading=!1),i==="ended"&&(this.progress=0,this.play())})}),this.checkVideoReady(),this.active?this.play():this.priority==="high"&&e.load(),setTimeout(()=>{this.isLoading&&!this.active&&(this.isLoading=!1)},2e3)}resetVideo(){let e=this.videoEl?.nativeElement;e&&(e.pause(),e.currentTime=0,this.progress=0)}playWatchdogTimeout;checkVideoReady(){this.videoEl&&this.videoEl.nativeElement&&this.videoEl.nativeElement.readyState>=3&&(this.isLoading=!1)}startProgressTracking(){this.progressInterval&&clearInterval(this.progressInterval);let e=this.videoEl?.nativeElement;e&&(this.progressInterval=setInterval(()=>{!this.isSeeking&&e.duration&&(this.progress=e.currentTime/e.duration*100)},50))}play(){let e=this.videoEl?.nativeElement;if(e){e.muted=!this.active||this.isMuted,e.currentTime=0,e.readyState<3&&(this.isLoading=!0);let t=e.play();t!==void 0&&t.catch(i=>{console.error("[VideoCard] Error playing video:",i),this.isLoading=!1}),this.playWatchdogTimeout&&clearTimeout(this.playWatchdogTimeout),this.playWatchdogTimeout=setTimeout(()=>{(e.paused||e.readyState<3)&&(console.warn("[VideoCard] Playback stalled"),this.isLoading=!0)},3e3)}}preload(){let e=this.videoEl?.nativeElement;e&&(e.preload="auto",e.load())}pause(){this.playWatchdogTimeout&&clearTimeout(this.playWatchdogTimeout),this.videoEl?.nativeElement.pause()}bookmark(){this.reel||(this.isBookmarked=!this.isBookmarked),this.bookmarked.emit()}onDelete(e){e.stopPropagation(),this.deleted.emit()}openGoogleMaps(){if(this.reel?.latitude&&this.reel?.longitude){let{latitude:e,longitude:t}=this.reel,i=`https://www.google.com/maps?q=${e},${t}`;window.open(i,"_blank")}else console.warn("No location data available for this reel")}share(){this.shared.emit()}toggleLike(){this.reel||(this.isLiked=!this.isLiked),this.liked.emit(),this.isLiked&&this.showLikeAnimationEffect()}toggleMute(){let e=this.videoEl?.nativeElement;if(e){e.paused&&e.play().catch(i=>console.error("[VideoCard] Error playing on tap:",i));let t=!this.isMuted;e.muted=!this.active||t,this.isMuted=t,this.muteChanged.emit(t),this.showMuteAnimation(),this.isProgressBarVisible=!0,this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout),this.progressBarHideTimeout=setTimeout(()=>{this.isProgressBarVisible=!1},2e3)}}showMuteAnimation(){this.showMuteIcon=!0,setTimeout(()=>{this.showMuteIcon=!1},1e3)}doubleTapLike(){this.isLiked?this.showLikeAnimationEffect():this.toggleLike()}onVideoTap(e){e.preventDefault();let t=new Date().getTime(),i=t-this.lastTapTime;i<300&&i>0?(this.singleTapTimeout&&(clearTimeout(this.singleTapTimeout),this.singleTapTimeout=void 0),this.doubleTapLike(),this.lastTapTime=0):(this.lastTapTime=t,this.singleTapTimeout=window.setTimeout(()=>{this.toggleMute(),this.singleTapTimeout=void 0},300))}toggleProgressBar(){this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout),this.isProgressBarVisible=!this.isProgressBarVisible,this.isProgressBarVisible&&(this.progressBarHideTimeout=setTimeout(()=>{this.isProgressBarVisible=!1},3e3))}showLikeAnimationEffect(){this.showLikeAnimation=!0,setTimeout(()=>{this.showLikeAnimation=!1},1e3)}formatViewCount(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}onProgressBarClick(e){e.stopPropagation(),this.seekToPosition(e)}onProgressBarTouchStart(e){this.isSeeking=!0,this.seekToPosition(e)}onProgressBarTouchMove(e){this.isSeeking&&this.seekToPosition(e)}onProgressBarTouchEnd(){this.isSeeking=!1}seekToPosition(e){let i=e.currentTarget.getBoundingClientRect(),r;if(e instanceof MouseEvent)r=e.clientX;else{let u=e.touches[0]||e.changedTouches[0];if(!u)return;r=u.clientX}let a=Math.max(0,Math.min(r-i.left,i.width))/i.width,l=this.videoEl?.nativeElement;l&&l.readyState>0&&(l.currentTime=a*l.duration,this.progress=a*100)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ht({type:n,selectors:[["app-video-card"]],viewQuery:function(t,i){if(t&1&&mi(jq,5),t&2){let r;Xn(r=ei())&&(i.videoEl=r.first)}},inputs:{reel:"reel",src:"src",poster:"poster",title:"title",vendor:"vendor",price:"price",distance:"distance",active:"active",relativeIndex:"relativeIndex",priority:"priority",likes:"likes",viewCount:"viewCount",isLiked:"isLiked",isBookmarked:"isBookmarked",canDelete:"canDelete",isMuted:"isMuted"},outputs:{liked:"liked",bookmarked:"bookmarked",shared:"shared",deleted:"deleted",muteChanged:"muteChanged"},standalone:!0,features:[Li,ft],decls:34,vars:30,consts:[["videoEl",""],[1,"video-card"],["loop","","playsinline","","webkit-playsinline","","x-webkit-airplay","allow","disablePictureInPicture","",1,"video-player",3,"click","touchend","muted","preload","poster","src"],["class","loading-spinner",4,"ngIf"],["class","like-animation",4,"ngIf"],["class","mute-animation",4,"ngIf"],[1,"video-overlay"],[1,"video-info"],[1,"food-details"],[1,"title-category-row"],[1,"dish-name"],[1,"vendor-name"],[1,"price-distance"],[1,"price"],[1,"distance"],[1,"action-buttons"],["class","view-count-action",4,"ngIf"],[1,"action-btn","like-btn",3,"click"],["width","28","height","28","viewBox","0 0 24 24",1,"action-icon"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","like-count",4,"ngIf"],[1,"action-btn","bookmark-btn",3,"click"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"action-btn","map-btn",3,"click"],["width","28","height","28","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"action-icon","navigate-icon"],["points","3 11 22 2 13 21 11 13 3 11"],["class","action-btn delete-btn",3,"click",4,"ngIf"],[1,"progress-container",3,"click","touchstart","touchmove","touchend","mouseenter","mouseleave"],[1,"progress-bar"],[1,"loading-spinner"],[1,"spinner"],[1,"like-animation"],["width","100","height","100","viewBox","0 0 24 24","fill","white"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"mute-animation"],[1,"mute-icon-bg"],["width","40","height","40","viewBox","0 0 24 24","fill","white",4,"ngIf"],["width","40","height","40","viewBox","0 0 24 24","fill","white"],["d","M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z"],["d","M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"],[1,"view-count-action"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","3","stroke","currentColor","stroke-width","2"],[1,"count-text"],[1,"like-count"],[1,"action-btn","delete-btn",3,"click"],["width","26","height","26","viewBox","0 0 24 24","fill","none","stroke","#ff4444","stroke-width","2",1,"action-icon"],["d","M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"]],template:function(t,i){if(t&1){let r=rt();I(0,"div",1)(1,"video",2,0),re("click",function(a){return he(r),fe(i.onVideoTap(a))})("touchend",function(a){return he(r),fe(i.onVideoTap(a))}),S(),Se(3,zq,2,0,"div",3)(4,$q,3,0,"div",4)(5,Gq,4,2,"div",5),I(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h3",10),H(11),S()(),I(12,"p",11),H(13),S(),I(14,"div",12)(15,"span",13),H(16),S(),I(17,"span",14),H(18),S()()()(),I(19,"div",15),Se(20,Wq,6,1,"div",16),I(21,"button",17),re("click",function(){return he(r),fe(i.toggleLike())}),Ce(),I(22,"svg",18),te(23,"path",19),S(),Se(24,Kq,2,1,"span",20),S(),xe(),I(25,"button",21),re("click",function(){return he(r),fe(i.bookmark())}),Ce(),I(26,"svg",18),te(27,"path",22),S()(),xe(),I(28,"button",23),re("click",function(){return he(r),fe(i.openGoogleMaps())}),Ce(),I(29,"svg",24),te(30,"polygon",25),S()(),Se(31,Zq,5,0,"button",26),S()(),xe(),I(32,"div",27),re("click",function(a){return he(r),fe(i.onProgressBarClick(a))})("touchstart",function(a){return he(r),fe(i.onProgressBarTouchStart(a))})("touchmove",function(a){return he(r),fe(i.onProgressBarTouchMove(a))})("touchend",function(){return he(r),fe(i.onProgressBarTouchEnd())})("mouseenter",function(){return he(r),fe(i.isProgressBarVisible=!0)})("mouseleave",function(){return he(r),fe(i.isProgressBarVisible=!1)}),te(33,"div",28),S()()}t&2&&(We("active",i.active)("prev",i.relativeIndex<0)("next",i.relativeIndex>0),U(),Y("muted",!i.active||i.isMuted)("preload",i.priority==="high"?"auto":"none")("poster",i.displayPoster,ar)("src",i.displaySrc,ar),U(2),Y("ngIf",i.isLoading),U(),Y("ngIf",i.showLikeAnimation),U(),Y("ngIf",i.showMuteIcon),U(6),gt(i.displayTitle),U(2),gt(i.displayVendor),U(3),Ye("\u20B9",i.displayPrice,""),U(2),Ye("",i.displayDistance," away"),U(2),Y("ngIf",i.displayViewCount>0),U(),We("liked",i.displayIsLiked),U(),kr("fill",i.displayIsLiked?"currentColor":"none"),U(2),Y("ngIf",i.displayLikes>0),U(),We("bookmarked",i.displayIsBookmarked),U(),kr("fill",i.displayIsBookmarked?"currentColor":"none"),U(5),Y("ngIf",i.canDelete),U(),We("visible",i.isProgressBarVisible),U(),ws("width",i.progress,"%"))},dependencies:[bt,Ot],styles:[".video-card[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;transform:translateY(100%);transition:transform .4s cubic-bezier(.25,1,.5,1);background:#000;overflow:hidden;z-index:1}.video-card.prev[_ngcontent-%COMP%]{transform:translateY(-100%)}.video-card.next[_ngcontent-%COMP%]{transform:translateY(100%)}.video-card.active[_ngcontent-%COMP%]{transform:translateY(0);z-index:2}.video-player[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.progress-container[_ngcontent-%COMP%]{position:absolute;bottom:53px;left:0;width:100%;height:3px;background-color:#fff3;z-index:95;cursor:pointer;transition:opacity .3s ease;opacity:1;pointer-events:auto;margin:0;padding:0}.progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#fff;width:0%;transition:width .1s linear;box-shadow:0 0 10px #ffffff80}.progress-container[_ngcontent-%COMP%]:hover, .progress-container[_ngcontent-%COMP%]:active{height:4px;background-color:#ffffff4d}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#0000004d;z-index:10;gap:1rem}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.video-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:20px;background:linear-gradient(to top,rgba(0,0,0,.8),transparent);display:flex;justify-content:space-between;align-items:flex-end;pointer-events:none}.video-info[_ngcontent-%COMP%]{flex:1;color:#fff;padding-right:20px;pointer-events:auto;margin-bottom:50px}.title-category-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:5px;flex-wrap:wrap}.dish-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0;text-shadow:0 1px 2px rgba(0,0,0,.5)}.category-badge[_ngcontent-%COMP%]{font-size:.65rem;font-weight:800;text-transform:uppercase;letter-spacing:.6px;background:linear-gradient(135deg,#ff6b354d,#ff8c424d);backdrop-filter:blur(8px);padding:3px 10px;border-radius:6px;border:1px solid rgba(255,107,53,.4);color:#fff;box-shadow:0 4px 8px #0000004d;text-shadow:0 1px 2px rgba(0,0,0,.5)}.vendor-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin:0 0 10px;opacity:.9}.price-distance[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;font-size:.9rem;padding-bottom:20px}.price[_ngcontent-%COMP%]{font-weight:600;color:#ffffffe6;background:#ff6b35;padding:2px 8px;border-radius:4px}.distance[_ngcontent-%COMP%]{opacity:.8}.view-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;margin-top:8px;font-size:.85rem;opacity:.8}.view-count[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.9}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;pointer-events:auto;padding-bottom:60px}.action-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;display:flex;flex-direction:column;align-items:center;gap:5px;cursor:pointer;padding:0;transition:transform .2s}.action-btn[_ngcontent-%COMP%]:active{transform:scale(.9)}.action-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.like-count[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600}.like-btn.liked[_ngcontent-%COMP%]{color:#ff4757}.like-btn.liked[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse .3s cubic-bezier(.175,.885,.32,1.275)}.bookmark-btn.bookmarked[_ngcontent-%COMP%]{color:#ff6b35}.like-animation[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;pointer-events:none;animation:_ngcontent-%COMP%_pop-in-out .8s cubic-bezier(.175,.885,.32,1.275) forwards}@keyframes _ngcontent-%COMP%_pop-in-out{0%{transform:translate(-50%,-50%) scale(0);opacity:0}20%{transform:translate(-50%,-50%) scale(1.2);opacity:1}40%{transform:translate(-50%,-50%) scale(.9);opacity:1}80%{transform:translate(-50%,-50%) scale(1);opacity:1}to{transform:translate(-50%,-50%) scale(1.5);opacity:0}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}.mute-animation[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;pointer-events:none;animation:_ngcontent-%COMP%_fade-in-out 1s ease-in-out forwards}.mute-icon-bg[_ngcontent-%COMP%]{background:#0009;border-radius:50%;padding:15px;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_fade-in-out{0%{opacity:0;transform:translate(-50%,-50%) scale(.8)}20%{opacity:1;transform:translate(-50%,-50%) scale(1)}80%{opacity:1;transform:translate(-50%,-50%) scale(1)}to{opacity:0;transform:translate(-50%,-50%) scale(.8)}}.view-count-action[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;color:#fff;margin-bottom:5px}.view-count-action[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.view-count-action[_ngcontent-%COMP%]   .count-text[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.5)}"]})};var Wi=class n{constructor(e,t){this.firestore=e;this.http=t}collectionName="reels";getTrendingReels(e=20){return T(this,null,function*(){try{let t=uu(this.firestore,this.collectionName),i=du(t,$h("createdAt","desc"),Y_(e*3)),o=(yield Z_(i)).docs.map(f=>{let m=f.data();return m.videoUrl&&m.videoUrl.includes("videos.bengaluru-swada.com")&&(m.videoUrl=m.videoUrl.replace("https://videos.bengaluru-swada.com","https://r2-video-uploader.bengaluru-swada.workers.dev")),J({id:f.id},m)}),a=Date.now(),l=o.map(f=>{let m=f.viewCount||0,v=f.likes||0,E=f.bookmarkedBy?.length||0,b=m*1+v*3+E*5,x=f.createdAt.toDate().getTime(),k=Math.max(0,(a-x)/(1e3*60*60)),N=b/Math.pow(k+2,1.5);return ke(J({},f),{_score:N})});l.sort((f,m)=>m._score-f._score);let u=l.slice(0,e);return this.shuffleArray(u)}catch(t){return console.error("Error fetching trending:",t),[]}})}getNewArrivals(e=20){return T(this,null,function*(){return yield this.getReels(e)})}shuffleArray(e){for(let t=e.length-1;t>0;t--){let i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}getReels(e=10,t){return T(this,null,function*(){try{let i=uu(this.firestore,this.collectionName),r=du(i,$h("createdAt","desc"),Y_(e));return t&&(r=du(r,Fk(t))),(yield Z_(r)).docs.map(a=>J({id:a.id},a.data()))}catch(i){return console.error("Error fetching reels:",i),[]}})}getReelsByUser(e){return T(this,null,function*(){try{let t=uu(this.firestore,this.collectionName),i=du(t,Vk("uploadedBy","==",e),$h("createdAt","desc"));return(yield Z_(i)).docs.map(o=>J({id:o.id},o.data()))}catch(t){return console.error("Error fetching user reels:",t),[]}})}getReelById(e){return T(this,null,function*(){try{let t=fc(this.firestore,this.collectionName,e),i=yield kk(t);return i.exists()?J({id:i.id},i.data()):null}catch(t){return console.error("Error fetching reel:",t),null}})}createReel(e){return T(this,null,function*(){try{let t=uu(this.firestore,this.collectionName);return(yield Rk(t,ke(J({},e),{createdAt:qt.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}))).id}catch(t){throw console.error("Error creating reel:",t),t}})}updateReel(e,t){return T(this,null,function*(){try{let i=fc(this.firestore,this.collectionName,e);yield pc(i,t)}catch(i){throw console.error("Error updating reel:",i),i}})}deleteReel(e){return T(this,null,function*(){try{let t=yield this.getReelById(e);if(!t){console.warn("Reel not found, cannot delete");return}let i="";if(t.videoUrl)if(t.videoUrl.includes("bengaluru-swada.workers.dev")){let o="bengaluru-swada.workers.dev/",a=t.videoUrl.indexOf(o);a!==-1&&(i=t.videoUrl.substring(a+o.length))}else{let o=t.videoUrl.split("/");i=o[o.length-1]}if(i)try{yield Kv(this.deleteFromR2(i)),console.log(`Deleted ${i} from R2`)}catch(o){console.error("Failed to delete from R2, proceeding with DB delete:",o)}let r=fc(this.firestore,this.collectionName,e);yield Ok(r),console.log("Deleted reel metadata from Firestore")}catch(t){throw console.error("Error deleting reel:",t),t}})}toggleLike(e,t,i){return T(this,null,function*(){try{let r=fc(this.firestore,this.collectionName,e);i?yield pc(r,{likedBy:cT(t),likes:Q_(-1)}):yield pc(r,{likedBy:lT(t),likes:Q_(1)})}catch(r){throw console.error("Error toggling like:",r),r}})}toggleBookmark(e,t,i){return T(this,null,function*(){try{let r=fc(this.firestore,this.collectionName,e);i?yield pc(r,{bookmarkedBy:cT(t)}):yield pc(r,{bookmarkedBy:lT(t)})}catch(r){throw console.error("Error toggling bookmark:",r),r}})}incrementViewCount(e){return T(this,null,function*(){try{let t=fc(this.firestore,this.collectionName,e);yield pc(t,{viewCount:Q_(1)})}catch(t){console.error("Error incrementing view count:",t)}})}getReelsRealtime(e=10){return new ze(t=>{let i=uu(this.firestore,this.collectionName),r=du(i,$h("createdAt","desc"),Y_(e)),o=Lk(r,a=>{let l=a.docs.map(u=>J({id:u.id},u.data()));t.next(l)},a=>{console.error("Error in realtime reels:",a),t.error(a)});return()=>o()})}getUploadUrl(e,t){return this.http.post(Hh.cloudflare.workerUrl,{fileName:e,contentType:t})}uploadToR2(e,t){return this.http.put(e,t,{headers:{"Content-Type":t.type},reportProgress:!0,observe:"events"})}deleteFromR2(e){return this.http.delete(`${Hh.cloudflare.workerUrl}/${e}`)}isLikedByUser(e,t){return e.likedBy?.includes(t)||!1}isBookmarkedByUser(e,t){return e.bookmarkedBy?.includes(t)||!1}static \u0275fac=function(t){return new(t||n)(ve(hc),ve(_w))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};function Qq(n,e){n&1&&(I(0,"div",16),te(1,"div",17),S())}function Yq(n,e){if(n&1){let t=rt();I(0,"div",18)(1,"div",19)(2,"h2"),H(3,"No Reels Found"),S(),I(4,"p"),H(5,"Be the first to share a tasty bite!"),S(),I(6,"div",20)(7,"button",21),re("click",function(){he(t);let r=de();return fe(r.seedData())}),H(8,"Seed Sample Data"),S(),I(9,"a",22),H(10,"Upload Reel"),S()()()()}}function Jq(n,e){if(n&1){let t=rt();I(0,"app-video-card",25),re("muteChanged",function(r){he(t);let o=de(2);return fe(o.onMuteChanged(r))})("deleted",function(){let r=he(t).$implicit,o=de(2);return fe(o.onReelDeleted(r))})("liked",function(){let r=he(t).index,o=de(2);return fe(o.onLike(r))})("bookmarked",function(){let r=he(t).index,o=de(2);return fe(o.onBookmark(r))})("shared",function(){let r=he(t).index,o=de(2);return fe(o.onShare(r))}),S()}if(n&2){let t=e.$implicit,i=e.index,r=de(2);Y("reel",t)("active",i===r.currentIndex&&r.isActive)("relativeIndex",i-r.currentIndex)("priority",r.getPriority(i))("isMuted",r.isGlobalMuted)("canDelete",r.isOwner(t))}}function Xq(n,e){if(n&1&&(I(0,"div",23),Se(1,Jq,1,6,"app-video-card",24),S()),n&2){let t=de();U(),Y("ngForOf",t.reels)}}var _c=class n{constructor(e,t,i,r){this.reelsService=e;this.auth=t;this.cdr=i;this.locationService=r}isActive=!0;activeTab="all";isGlobalMuted=!0;reels=[];currentIndex=0;touchStartY=0;touchStartX=0;pullStartY=0;pullMoveY=0;isRefreshing=!1;pullThreshold=150;swipeThresholdX=50;isLoading=!0;viewedReels=new Set;viewTrackingTimeout;cards;ngOnInit(){return T(this,null,function*(){yield this.loadReels()})}ngAfterViewInit(){setTimeout(()=>{this.reels.length>0&&this.trackView()},50)}ngOnChanges(e){e.isActive}onMuteChanged(e){this.isGlobalMuted=e}ngOnDestroy(){this.viewTrackingTimeout&&clearTimeout(this.viewTrackingTimeout)}reloadReelsForNewLocation(){return T(this,null,function*(){console.log("[VideoFeed] Reloading reels for new location...");let e=[...this.reels],t=yield Promise.all(e.map(i=>T(this,null,function*(){let r="-- km";if(i.latitude&&i.longitude)try{r=yield this.locationService.getDistanceFromUser(i.latitude,i.longitude)}catch(o){console.error("[VideoFeed] Error calculating distance:",o)}return ke(J({},i),{distance:r})})));this.activeTab==="all"&&t.sort((i,r)=>{let o=i.distance==="-- km"?1/0:parseFloat(i.distance.split(" ")[0]),a=r.distance==="-- km"?1/0:parseFloat(r.distance.split(" ")[0]);return o-a}),this.reels=t,this.currentIndex=0,this.cdr.detectChanges()})}isOwner(e){return this.auth.currentUser?.uid===e.uploadedBy}onReelDeleted(e){return T(this,null,function*(){if(confirm("Are you sure you want to delete this reel permanently?"))try{yield this.reelsService.deleteReel(e.id),this.reels=this.reels.filter(t=>t.id!==e.id),this.currentIndex>=this.reels.length&&(this.currentIndex=Math.max(0,this.reels.length-1))}catch(t){console.error("Failed to delete reel:",t),alert("Failed to delete reel. Please try again.")}})}switchTab(e){return T(this,null,function*(){this.activeTab!==e&&(this.activeTab=e,this.reels=[],this.currentIndex=0,this.isLoading=!0,yield this.loadReels())})}loadReels(){return T(this,null,function*(){console.log(`[VideoFeed] Loading ${this.activeTab} reels...`),this.isLoading=!0;try{let e=[];this.activeTab==="trending"?e=yield this.reelsService.getTrendingReels(20):this.activeTab==="new"?e=yield this.reelsService.getNewArrivals(20):e=yield this.reelsService.getReels(50),console.log("[VideoFeed] Fetched reels:",e.length);let t=this.auth.currentUser;console.log("[VideoFeed] Current user:",t?.uid||"Not logged in");let i=yield Promise.all(e.map(r=>T(this,null,function*(){let o="-- km";if(r.latitude&&r.longitude)try{o=yield this.locationService.getDistanceFromUser(r.latitude,r.longitude)}catch(a){console.error("[VideoFeed] Error calculating distance:",a)}return ke(J({},r),{distance:o,isLiked:t?this.reelsService.isLikedByUser(r,t.uid):!1,isBookmarked:t?this.reelsService.isBookmarkedByUser(r,t.uid):!1})})));this.activeTab==="all"&&i.sort((r,o)=>{let a=r.distance==="-- km"?1/0:parseFloat(r.distance.split(" ")[0]),l=o.distance==="-- km"?1/0:parseFloat(o.distance.split(" ")[0]);return a-l}),this.reels=i,console.log("[VideoFeed] Final reels count:",this.reels.length)}catch(e){console.error("[VideoFeed] Error loading reels:",e)}finally{setTimeout(()=>{this.isLoading=!1,this.cdr.detectChanges(),this.reels.length>0&&this.trackView()},500)}})}trackView(){this.viewTrackingTimeout&&clearTimeout(this.viewTrackingTimeout);let e=this.reels[this.currentIndex];!e||!e.id||this.viewedReels.has(e.id)||(this.viewTrackingTimeout=window.setTimeout(()=>{e.id&&(this.reelsService.incrementViewCount(e.id),this.viewedReels.add(e.id),e.viewCount=(e.viewCount||0)+1)},3e3))}onTouchStart(e){this.touchStartY=e.touches[0].clientY,this.touchStartX=e.touches[0].clientX,this.currentIndex===0&&!this.isRefreshing&&(this.pullStartY=e.touches[0].clientY)}onTouchMove(e){if(this.currentIndex===0&&!this.isRefreshing&&this.pullStartY>0){let i=e.touches[0].clientY-this.pullStartY;i>0&&(this.pullMoveY=i*.5,i>10&&e.preventDefault())}}onTouchEnd(e){return T(this,null,function*(){let t=e.changedTouches[0].clientY,i=e.changedTouches[0].clientX,r=this.touchStartY-t,o=this.touchStartX-i;if(Math.abs(o)>this.swipeThresholdX&&Math.abs(o)>Math.abs(r)){o>0?this.activeTab==="all"?this.switchTab("trending"):this.activeTab==="trending"&&this.switchTab("new"):this.activeTab==="new"?this.switchTab("trending"):this.activeTab==="trending"&&this.switchTab("all");return}let a=80;r>a?this.next():r<-a&&this.pullMoveY<this.pullThreshold&&this.prev(),this.pullMoveY>=this.pullThreshold&&!this.isRefreshing&&(yield this.refresh()),this.pullStartY=0,this.pullMoveY=0})}scrollToTopAndRefresh(){return T(this,null,function*(){if(console.log("[VideoFeed] Animated scroll to top and refreshing..."),this.currentIndex>0){this.isGlobalMuted=!0;let e=this.currentIndex,t=Math.max(30,80-e*2);for(let i=e-1;i>=0;i--)this.currentIndex=i,this.cdr.detectChanges(),yield new Promise(r=>setTimeout(r,t))}yield this.refresh()})}refresh(){return T(this,null,function*(){this.isRefreshing=!0,navigator.vibrate&&navigator.vibrate(50);try{yield this.loadReels()}finally{setTimeout(()=>{this.isRefreshing=!1},500)}})}next(){this.currentIndex<this.reels.length-1&&(this.isGlobalMuted=!0,this.currentIndex++,this.trackView())}prev(){this.currentIndex>0&&(this.isGlobalMuted=!0,this.currentIndex--,this.trackView())}onLike(e){return T(this,null,function*(){let t=this.reels[e];if(!t||!t.id)return;let i=this.auth.currentUser;if(!i){console.warn("User must be logged in to like");return}let r=t.isLiked||!1;t.isLiked=!r,t.likes=(t.likes||0)+(r?-1:1);try{yield this.reelsService.toggleLike(t.id,i.uid,r)}catch(o){t.isLiked=r,t.likes=(t.likes||0)+(r?1:-1),console.error("Error toggling like:",o)}})}onBookmark(e){return T(this,null,function*(){let t=this.reels[e];if(!t||!t.id)return;let i=this.auth.currentUser;if(!i){console.warn("User must be logged in to bookmark");return}let r=t.isBookmarked||!1;t.isBookmarked=!r;try{yield this.reelsService.toggleBookmark(t.id,i.uid,r)}catch(o){t.isBookmarked=r,console.error("Error toggling bookmark:",o)}})}onShare(e){let t=this.reels[e];if(t)if(navigator.share)navigator.share({title:t.title,text:`Check out ${t.title} from ${t.vendor}!`,url:window.location.href}).catch(i=>console.log("Error sharing:",i));else{let i=`Check out ${t.title} from ${t.vendor}! \u20B9${t.price}`;navigator.clipboard.writeText(i).then(()=>alert("Link copied to clipboard!")).catch(r=>console.error("Error copying:",r))}}seedData(){return T(this,null,function*(){this.isLoading=!0;let e=[{title:"Masala Dosa",vendor:"CTR",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",thumbnailUrl:"https://images.unsplash.com/photo-1668236543090-82eba5ee5976?q=80&w=2070&auto=format&fit=crop",price:120,categories:["South Indian","Breakfast"],latitude:12.9352,longitude:77.6245,uploadedBy:this.auth.currentUser?.uid||"system",cloudflareVideoId:"sample-id-1",duration:596,createdAt:qt.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]},{title:"Filter Coffee",vendor:"Brahmins Coffee Bar",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",thumbnailUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Idli_Sambar.JPG/1200px-Idli_Sambar.JPG",price:80,categories:["South Indian","Beverages"],latitude:12.9716,longitude:77.6412,uploadedBy:this.auth.currentUser?.uid||"system",cloudflareVideoId:"sample-id-2",duration:600,createdAt:qt.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}];try{for(let t of e)yield this.reelsService.createReel(t);yield this.loadReels()}catch(t){console.error("Error seeding data:",t)}finally{this.isLoading=!1}})}navigateToReel(e){if(console.log(`[VideoFeed] Attempting to navigate to reel: ${e}`),console.log(`[VideoFeed] Total reels loaded: ${this.reels.length}`),this.reels.length===0){console.warn(`[VideoFeed] No reels loaded yet, cannot navigate to ${e}`);return}let t=this.reels.findIndex(i=>i.id===e);t!==-1?(console.log(`[VideoFeed] Found reel at index ${t}, navigating...`),this.currentIndex=t,this.isGlobalMuted=!0,setTimeout(()=>{this.trackView()},100),console.log(`[VideoFeed] Successfully navigated to reel: ${e}`)):(console.warn(`[VideoFeed] Reel not found in loaded reels: ${e}`),console.log("[VideoFeed] Available reel IDs:",this.reels.map(i=>i.id)))}getPriority(e){let t=Math.abs(e-this.currentIndex);return t===0?"high":t===1?"auto":"low"}static \u0275fac=function(t){return new(t||n)(se(Wi),se(Dt),se(gi),se(Gi))};static \u0275cmp=ht({type:n,selectors:[["app-video-feed"]],viewQuery:function(t,i){if(t&1&&mi(Jh,5),t&2){let r;Xn(r=ei())&&(i.cards=r)}},inputs:{isActive:"isActive"},standalone:!0,features:[Li,ft],decls:27,vars:19,consts:[[1,"video-feed",3,"touchstart","touchmove","touchend"],[1,"feed-tabs"],[1,"tab-item",3,"click"],[1,"tab-separator"],[1,"tab-indicator"],[1,"refresh-indicator"],[1,"spinner-container"],[1,"carrot-spinner"],["viewBox","0 0 40 40",1,"carrot-svg"],["d","M20 35C20 35 14 25 14 15C14 10 17 7 20 7C23 7 26 10 26 15C26 25 20 35 20 35Z","fill","#ff6b35"],["d","M17 18h6M16 22h8M18 26h4","stroke","rgba(0,0,0,0.1)","stroke-width","1.5","stroke-linecap","round"],["d","M20 7V2M20 7L16 3M20 7L24 3","stroke","#4caf50","stroke-width","2.5","stroke-linecap","round"],[1,"loading-ripple"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","reels-container",4,"ngIf"],[1,"loading-container"],[1,"simple-orange-loader"],[1,"empty-state"],[1,"empty-content"],[1,"button-group"],[1,"seed-btn",3,"click"],["routerLink","/upload-reel",1,"upload-btn"],[1,"reels-container"],[3,"reel","active","relativeIndex","priority","isMuted","canDelete","muteChanged","deleted","liked","bookmarked","shared",4,"ngFor","ngForOf"],[3,"muteChanged","deleted","liked","bookmarked","shared","reel","active","relativeIndex","priority","isMuted","canDelete"]],template:function(t,i){t&1&&(I(0,"div",0),re("touchstart",function(o){return i.onTouchStart(o)})("touchmove",function(o){return i.onTouchMove(o)})("touchend",function(o){return i.onTouchEnd(o)}),I(1,"div",1)(2,"div",2),re("click",function(){return i.switchTab("all")}),I(3,"span"),H(4,"All"),S()(),I(5,"div",3),H(6,"|"),S(),I(7,"div",2),re("click",function(){return i.switchTab("trending")}),I(8,"span"),H(9,"Trending"),S()(),I(10,"div",3),H(11,"|"),S(),I(12,"div",2),re("click",function(){return i.switchTab("new")}),I(13,"span"),H(14,"New Arrivals"),S()(),te(15,"div",4),S(),I(16,"div",5)(17,"div",6)(18,"div",7),Ce(),I(19,"svg",8),te(20,"path",9)(21,"path",10)(22,"path",11),S()(),xe(),te(23,"div",12),S()(),Se(24,Qq,2,0,"div",13)(25,Yq,11,0,"div",14)(26,Xq,2,1,"div",15),S()),t&2&&(U(2),We("active",i.activeTab==="all"),U(5),We("active",i.activeTab==="trending"),U(5),We("active",i.activeTab==="new"),U(3),We("trending-active",i.activeTab==="trending")("new-active",i.activeTab==="new"),U(),ws("transform","translateY("+(i.isRefreshing?70:i.pullMoveY)+"px)"),We("refreshing",i.isRefreshing)("visible",i.pullMoveY>10),U(8),Y("ngIf",i.isLoading),U(),Y("ngIf",!i.isLoading&&i.reels.length===0),U(),Y("ngIf",!i.isLoading&&i.reels.length>0))},dependencies:[bt,An,Ot,Jh,EP,mP],styles:[".video-feed[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden;scroll-snap-type:y mandatory;-webkit-overflow-scrolling:touch;height:100vh;background:#000}.feed-tabs[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:60px;z-index:50;display:flex;align-items:center;justify-content:center;gap:15px;background:linear-gradient(to bottom,#000c,#0000);backdrop-filter:blur(2px);padding-top:10px}.tab-item[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#fff9;cursor:pointer;transition:color .3s ease,transform .2s ease;text-shadow:0 1px 4px rgba(0,0,0,.5)}.tab-item.active[_ngcontent-%COMP%]{color:#fff;transform:scale(1.05)}.tab-separator[_ngcontent-%COMP%]{color:#fff3;font-size:.9rem}.tab-indicator[_ngcontent-%COMP%]{position:absolute;bottom:12px;height:3px;width:20px;background:#fff;border-radius:2px;transition:transform .3s cubic-bezier(.4,0,.2,1);transform:translate(-125px);box-shadow:0 0 8px #fff6}.tab-indicator.trending-active[_ngcontent-%COMP%]{transform:translate(-42px)}.tab-indicator.new-active[_ngcontent-%COMP%]{transform:translate(85px)}.loading-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;z-index:10;background:#000}.simple-orange-loader[_ngcontent-%COMP%]{width:48px;height:48px;border:3px solid rgba(255,107,53,.1);border-top:3px solid #ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_simple-spin .8s cubic-bezier(.5,.1,.5,.9) infinite;box-shadow:0 0 15px #ff6b351a}@keyframes _ngcontent-%COMP%_simple-spin{to{transform:rotate(360deg)}}.empty-content[_ngcontent-%COMP%]{text-align:center;padding:2rem}.empty-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#ff6b35}.empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa;margin-bottom:2rem}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:100%;max-width:250px}.seed-btn[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border-radius:25px;font-weight:600;text-align:center;text-decoration:none;cursor:pointer;transition:all .2s;border:none;font-size:1rem}.seed-btn[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2)}.seed-btn[_ngcontent-%COMP%]:hover{background:#fff3}.upload-btn[_ngcontent-%COMP%]{background:#ff6b35;color:#fff}.upload-btn[_ngcontent-%COMP%]:hover{background:#e55a2b;transform:translateY(-2px)}.refresh-indicator[_ngcontent-%COMP%]{position:absolute;top:-60px;left:0;width:100%;height:60px;display:flex;align-items:center;justify-content:center;z-index:100;pointer-events:none;opacity:0;transition:transform .15s linear,opacity .2s ease}.refresh-indicator.visible[_ngcontent-%COMP%]{opacity:1}.refresh-indicator.refreshing[_ngcontent-%COMP%]{transition:transform .4s cubic-bezier(.175,.885,.32,1.275),opacity .2s}.refresh-indicator.refreshing[_ngcontent-%COMP%]   .spinner-outer-ring[_ngcontent-%COMP%]{animation:spin .8s linear infinite}.refresh-indicator.refreshing[_ngcontent-%COMP%]   .spinner-inner-ring[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin-reverse 1.2s linear infinite}.refresh-indicator.refreshing[_ngcontent-%COMP%]   .carrot-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_carrot-jump .8s cubic-bezier(.175,.885,.32,1.275) infinite}.refresh-indicator.refreshing[_ngcontent-%COMP%]   .loading-ripple[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_ripple 1.2s ease-out infinite}.refresh-indicator[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{width:64px;height:64px;background:#ffffff1a;backdrop-filter:blur(12px);border:1.5px solid rgba(255,255,255,.25);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 32px #0006;position:relative;overflow:hidden}.refresh-indicator[_ngcontent-%COMP%]   .carrot-spinner[_ngcontent-%COMP%]{width:40px;height:40px;z-index:2;transition:transform .1s linear}.refresh-indicator[_ngcontent-%COMP%]   .loading-ripple[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;border-radius:50%;border:2px solid rgba(255,107,53,.3);opacity:0;z-index:1}@keyframes _ngcontent-%COMP%_spin-reverse{0%{transform:rotate(360deg)}to{transform:rotate(0)}}@keyframes _ngcontent-%COMP%_core-pulse{0%{transform:scale(.8);opacity:.5}to{transform:scale(1.2);opacity:1}}@keyframes _ngcontent-%COMP%_carrot-jump{0%,to{transform:translateY(0) scale(1)}30%{transform:translateY(0) scale(1.2,.8)}50%{transform:translateY(-12px) scale(.9,1.15)}80%{transform:translateY(0) scale(1.1,.9)}}@keyframes _ngcontent-%COMP%_ripple{0%{transform:scale(.5);opacity:1;border-width:4px}to{transform:scale(1.5);opacity:0;border-width:1px}}"]})};var _u=class n{selectedReelId=new Wt(null);selectedReelId$=this.selectedReelId.asObservable();selectReel(e){console.log("[NavigationService] Setting selected reel:",e),this.selectedReelId.next(e)}clearSelection(){this.selectedReelId.next(null)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};function eG(n,e){n&1&&(I(0,"div",6)(1,"h1"),H(2,"Favorites"),S(),I(3,"p",7),H(4,"Your bookmarked reels"),S()())}function tG(n,e){n&1&&(I(0,"div",8),te(1,"div",9),I(2,"p"),H(3,"Loading favorites..."),S()())}function nG(n,e){n&1&&(I(0,"div",10),Ce(),I(1,"svg",11),te(2,"path",12),S(),xe(),I(3,"h2"),H(4,"No Favorites Yet"),S(),I(5,"p"),H(6,"Bookmark your favorite reels to see them here"),S()())}function iG(n,e){if(n&1){let t=rt();I(0,"video",33,0),re("loadedmetadata",function(){he(t);let r=Na(1);return fe(r.currentTime=.1)}),S()}if(n&2){let t=de().$implicit;Y("src",t.videoUrl,ar)}}function rG(n,e){if(n&1){let t=rt();I(0,"div",15),re("click",function(){let r=he(t).$implicit,o=de(2);return fe(o.playReel(r))}),I(1,"div",16),Se(2,iG,2,1,"video",17),I(3,"div",18),Ce(),I(4,"svg",19),te(5,"path",20),S()(),xe(),I(6,"div",21)(7,"span",22),Ce(),I(8,"svg",23),te(9,"path",24)(10,"circle",25),S(),H(11),S(),xe(),I(12,"span",22),Ce(),I(13,"svg",23),te(14,"path",26),S(),H(15),S()()(),xe(),I(16,"div",27)(17,"h3",28),H(18),S(),I(19,"p",29),H(20),S(),I(21,"div",30)(22,"span",31),H(23),S(),I(24,"span",32),H(25),S()()()()}if(n&2){let t=e.$implicit;U(2),Y("ngIf",t.videoUrl),U(9),Ye(" ",t.viewCount||0," "),U(4),Ye(" ",t.likes||0," "),U(3),gt(t.title),U(2),gt(t.vendor),U(3),Ye("\u20B9",t.price,""),U(2),gt(t.distance)}}function oG(n,e){if(n&1&&(I(0,"div",13),Se(1,rG,26,7,"div",14),S()),n&2){let t=de();U(),Y("ngForOf",t.bookmarkedReels)}}var Ws=class n{constructor(e,t,i,r,o){this.reelsService=e;this.auth=t;this.router=i;this.cdr=r;this.navigationService=o}showHeader=!0;bookmarkedReels=[];isLoading=!0;ngOnInit(){return T(this,null,function*(){yield this.loadBookmarkedReels()})}loadBookmarkedReels(){return T(this,null,function*(){console.log("[Favorites] Starting to load bookmarked reels..."),this.isLoading=!0,this.cdr.detectChanges();try{let e=this.auth.currentUser;if(console.log("[Favorites] Current user:",e?.uid||"Not logged in"),!e){this.bookmarkedReels=[],console.log("[Favorites] No user logged in, clearing bookmarks");return}console.log("[Favorites] Fetching all reels...");let t=yield this.reelsService.getReels(100);console.log("[Favorites] Fetched reels count:",t.length),this.bookmarkedReels=t.filter(i=>this.reelsService.isBookmarkedByUser(i,e.uid)),console.log("[Favorites] Bookmarked reels count:",this.bookmarkedReels.length)}catch(e){console.error("[Favorites] Error loading bookmarked reels:",e)}finally{this.isLoading=!1,this.cdr.detectChanges(),console.log("[Favorites] Loading complete. isLoading:",this.isLoading)}})}playReel(e){console.log("[Favorites] Playing reel:",e.id,e.title),this.navigationService.selectReel(e.id),this.router.navigate(["/main-app"])}static \u0275fac=function(t){return new(t||n)(se(Wi),se(Dt),se(ut),se(gi),se(_u))};static \u0275cmp=ht({type:n,selectors:[["app-favorites"]],inputs:{showHeader:"showHeader"},standalone:!0,features:[ft],decls:5,vars:4,consts:[["videoThumb",""],[1,"favorites-container"],["class","favorites-header",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","reels-grid",4,"ngIf"],[1,"favorites-header"],[1,"subtitle"],[1,"loading-state"],[1,"spinner"],[1,"empty-state"],["width","80","height","80","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z","stroke","currentColor","stroke-width","2","fill","none"],[1,"reels-grid"],["class","reel-card",3,"click",4,"ngFor","ngForOf"],[1,"reel-card",3,"click"],[1,"reel-thumbnail"],["muted","","playsinline","","preload","metadata",3,"src","loadedmetadata",4,"ngIf"],[1,"play-overlay"],["width","48","height","48","viewBox","0 0 24 24","fill","white"],["d","M8 5v14l11-7z"],[1,"reel-stats"],[1,"stat"],["width","16","height","16","viewBox","0 0 24 24","fill","white"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","white","stroke-width","2","fill","none"],["cx","12","cy","12","r","3","stroke","white","stroke-width","2","fill","none"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"reel-info"],[1,"reel-title"],[1,"reel-vendor"],[1,"reel-meta"],[1,"price"],[1,"distance"],["muted","","playsinline","","preload","metadata",3,"loadedmetadata","src"]],template:function(t,i){t&1&&(I(0,"div",1),Se(1,eG,5,0,"div",2)(2,tG,4,0,"div",3)(3,nG,7,0,"div",4)(4,oG,2,1,"div",5),S()),t&2&&(U(),Y("ngIf",i.showHeader),U(),Y("ngIf",i.isLoading),U(),Y("ngIf",!i.isLoading&&i.bookmarkedReels.length===0),U(),Y("ngIf",!i.isLoading&&i.bookmarkedReels.length>0))},dependencies:[bt,An,Ot],styles:['@charset "UTF-8";.favorites-container[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000;overflow-y:auto;padding:4rem 1rem 5rem}.favorites-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;padding:1rem 0}.favorites-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin-bottom:.5rem;background:linear-gradient(135deg,#ff6b35,#f7931e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.favorites-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#888;font-size:.9rem}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;color:#fff;text-align:center;padding:2rem}.loading-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b35;margin-bottom:1.5rem;opacity:.5}.loading-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#fff}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;font-size:.95rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.1);border-left-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.reels-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:1rem;padding:0 .5rem}@media (min-width: 640px){.reels-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.5rem}}.reel-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}.reel-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.reel-card[_ngcontent-%COMP%]:active{transform:scale(.98)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.reel-thumbnail[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:9/16;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,#1a1a1a,#2d2d2d);margin-bottom:.5rem;display:flex;align-items:center;justify-content:center}.reel-thumbnail[_ngcontent-%COMP%]:before{content:"\\1f3ac";font-size:3rem;opacity:.3;position:absolute}.reel-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .reel-thumbnail[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:relative;z-index:1}.reel-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:#0000004d;opacity:0;transition:opacity .2s;z-index:2}.reel-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 8px rgba(0,0,0,.5))}.reel-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;left:.5rem;right:.5rem;display:flex;gap:.75rem;font-size:.75rem;color:#fff;z-index:2}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;background:#0009;backdrop-filter:blur(1px);padding:.25rem .5rem;border-radius:12px;font-weight:600}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.reel-info[_ngcontent-%COMP%]   .reel-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#fff;margin-bottom:.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reel-info[_ngcontent-%COMP%]   .reel-vendor[_ngcontent-%COMP%]{font-size:.8rem;color:#888;margin-bottom:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b35,#f7931e);color:#fff;padding:.25rem .5rem;border-radius:8px;font-weight:600}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]   .distance[_ngcontent-%COMP%]{color:#666}']})};var Ks=$N(sN());function sG(n,e){n&1&&(I(0,"span"),H(1,"Search"),S())}function aG(n,e){n&1&&(I(0,"span"),H(1,"..."),S())}function cG(n,e){if(n&1){let t=rt();I(0,"div",20),re("click",function(){let r=he(t).$implicit,o=de(2);return fe(o.selectSearchResult(r))}),H(1),S()}if(n&2){let t=e.$implicit;U(),Ye(" ",t.display_name," ")}}function lG(n,e){if(n&1&&(I(0,"div",18),Se(1,cG,2,1,"div",19),S()),n&2){let t=de();U(),Y("ngForOf",t.searchResults)}}var lv=class n{locationSelected=new Ge;cancel=new Ge;map;marker;searchQuery="";searchResults=[];isSearching=!1;selectedLat=12.9716;selectedLng=77.5946;constructor(){}ngOnInit(){}ngAfterViewInit(){this.initMap()}ngOnDestroy(){this.map&&this.map.remove()}initMap(){this.map=Ks.map("map").setView([this.selectedLat,this.selectedLng],13),Ks.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map),this.addMarker(this.selectedLat,this.selectedLng),this.map.on("click",e=>{this.updateLocation(e.latlng.lat,e.latlng.lng)}),setTimeout(()=>{this.map?.invalidateSize()},100)}addMarker(e,t){if(this.marker)this.marker.setLatLng([e,t]);else{let i=Ks.divIcon({className:"custom-pin",html:`<svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="#ff4757" stroke="white" stroke-width="2"/>
               </svg>`,iconSize:[30,30],iconAnchor:[15,30]});this.marker=Ks.marker([e,t],{icon:i,draggable:!0}).addTo(this.map),this.marker.on("dragend",()=>{let r=this.marker.getLatLng();this.updateLocation(r.lat,r.lng,!1)})}}updateLocation(e,t,i=!1){this.selectedLat=e,this.selectedLng=t,this.marker?this.marker.setLatLng([e,t]):this.addMarker(e,t),i&&this.map&&this.map.panTo([e,t])}searchLocation(){return T(this,null,function*(){if(this.searchQuery.trim()){this.isSearching=!0,this.searchResults=[];try{let t=yield(yield fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(this.searchQuery)}`)).json();this.searchResults=t}catch(e){console.error("Error searching location:",e)}finally{this.isSearching=!1}}})}selectSearchResult(e){let t=parseFloat(e.lat),i=parseFloat(e.lon);this.updateLocation(t,i,!0),this.searchResults=[],this.searchQuery=e.display_name.split(",")[0]}confirmSelection(){this.locationSelected.emit({lat:this.selectedLat,lng:this.selectedLng})}onCancel(){this.cancel.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ht({type:n,selectors:[["app-location-picker"]],outputs:{locationSelected:"locationSelected",cancel:"cancel"},standalone:!0,features:[ft],decls:27,vars:13,consts:[[1,"picker-overlay"],[1,"picker-container"],[1,"picker-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-bar"],["type","text","placeholder","Search for a place...",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-btn",3,"click","disabled"],[4,"ngIf"],["class","search-results",4,"ngIf"],[1,"map-container"],["id","map"],[1,"picker-footer"],[1,"coords"],[1,"actions"],[1,"cancel-btn",3,"click"],[1,"confirm-btn",3,"click"],[1,"search-results"],["class","result-item",3,"click",4,"ngFor","ngForOf"],[1,"result-item",3,"click"]],template:function(t,i){t&1&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),H(4,"Pick Location"),S(),I(5,"button",3),re("click",function(){return i.onCancel()}),Ce(),I(6,"svg",4),te(7,"path",5),S()()(),xe(),I(8,"div",6)(9,"input",7),ln("ngModelChange",function(o){return vn(i.searchQuery,o)||(i.searchQuery=o),o}),re("keyup.enter",function(){return i.searchLocation()}),S(),I(10,"button",8),re("click",function(){return i.searchLocation()}),Se(11,sG,2,0,"span",9)(12,aG,2,0,"span",9),S()(),Se(13,lG,2,1,"div",10),I(14,"div",11),te(15,"div",12),S(),I(16,"div",13)(17,"div",14)(18,"small"),H(19),fd(20,"number"),fd(21,"number"),S()(),I(22,"div",15)(23,"button",16),re("click",function(){return i.onCancel()}),H(24,"Cancel"),S(),I(25,"button",17),re("click",function(){return i.confirmSelection()}),H(26,"Confirm Location"),S()()()()()),t&2&&(U(9),cn("ngModel",i.searchQuery),U(),Y("disabled",i.isSearching),U(),Y("ngIf",!i.isSearching),U(),Y("ngIf",i.isSearching),U(),Y("ngIf",i.searchResults.length>0),U(6),Y0("",pd(20,7,i.selectedLat,"1.4-4"),", ",pd(21,10,i.selectedLng,"1.4-4"),""))},dependencies:[bt,An,Ot,ax,ii,ni,qi,Si],styles:[".picker-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;z-index:2000;display:flex;align-items:center;justify-content:center;padding:20px}.picker-container[_ngcontent-%COMP%]{background:#1a1a1a;width:100%;max-width:500px;height:80vh;border-radius:12px;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 4px 20px #00000080}.picker-header[_ngcontent-%COMP%]{padding:15px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.1)}.picker-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.1rem}.picker-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;padding:5px;cursor:pointer}.search-bar[_ngcontent-%COMP%]{padding:15px;display:flex;gap:10px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;background:#333;border:1px solid #444;border-radius:8px;padding:10px 15px;color:#fff;font-size:.95rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff4757}.search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{background:#ff4757;color:#fff;border:none;border-radius:8px;padding:0 20px;font-weight:600;cursor:pointer}.search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:disabled{opacity:.7}.search-results[_ngcontent-%COMP%]{background:#2a2a2a;max-height:150px;overflow-y:auto;border-bottom:1px solid #444}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{padding:12px 15px;color:#ddd;border-bottom:1px solid #333;cursor:pointer;font-size:.9rem}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]:hover{background:#333}.map-container[_ngcontent-%COMP%]{flex:1;position:relative;background:#eee}.map-container[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:100%}.picker-footer[_ngcontent-%COMP%]{padding:15px 20px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;border-top:1px solid rgba(255,255,255,.1)}.picker-footer[_ngcontent-%COMP%]   .coords[_ngcontent-%COMP%]{color:#888;font-family:monospace}.picker-footer[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:10px}.picker-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:600;cursor:pointer;border:none}.picker-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#333;color:#fff}.picker-footer[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{background:#ff4757;color:#fff}"]})};function uG(n,e){if(n&1){let t=rt();I(0,"div",44)(1,"div",45)(2,"div",46),Ce(),I(3,"svg",47),te(4,"path",48)(5,"path",49),S()(),xe(),I(6,"div",50)(7,"p",51),H(8),S(),I(9,"p",52),H(10),S()(),I(11,"button",53),re("click",function(){he(t);let r=de();return fe(r.removeFile())}),Ce(),I(12,"svg",54),te(13,"path",55),S()()(),xe(),I(14,"div",56)(15,"div",57),te(16,"div",58),S(),I(17,"p",59),H(18,"Ready to Upload"),S()()()}if(n&2){let t=de();U(8),gt(t.selectedFile.name),U(2),Ye("",(t.selectedFile.size/(1024*1024)).toFixed(2)," MB")}}function dG(n,e){if(n&1){let t=rt();I(0,"label",60)(1,"input",61),re("change",function(r){he(t);let o=de();return fe(o.onFileSelected(r))}),S(),I(2,"div",62),Ce(),I(3,"svg",63),te(4,"path",49)(5,"circle",64),S(),xe(),I(6,"p",65),H(7,"Select Video"),S(),I(8,"p",66),H(9,"MP4, MOV, or WebM (max 100MB)"),S()()()}}function hG(n,e){if(n&1){let t=rt();I(0,"div",67),H(1),I(2,"button",68),re("click",function(){let r=he(t).index,o=de();return fe(o.removeTag(r))}),Ce(),I(3,"svg",69),te(4,"path",70),S()()()}if(n&2){let t=e.$implicit,i=de();U(),Ye(" ",t," "),U(),Y("disabled",i.isUploading)}}function fG(n,e){if(n&1&&(I(0,"div",71),Ce(),I(1,"svg",54),te(2,"circle",72)(3,"path",73),S(),H(4),S()),n&2){let t=de();U(4),Ye(" ",t.uploadError," ")}}function pG(n,e){if(n&1){let t=rt();I(0,"div",74)(1,"div",75),Ce(),I(2,"svg",54),te(3,"path",76)(4,"path",77),S(),xe(),I(5,"span"),H(6,"Upload successful! Redirecting..."),S()(),I(7,"button",78),re("click",function(){he(t);let r=de();return fe(r.cancel())}),H(8,"Done"),S()()}}function mG(n,e){if(n&1&&(I(0,"div",79)(1,"div",80),te(2,"div",81),S(),I(3,"p",82),H(4),S()()),n&2){let t=de();U(2),ws("width",t.uploadProgress,"%"),U(2),Ye("Uploading... ",t.uploadProgress,"%")}}function gG(n,e){n&1&&(I(0,"span"),H(1,"Upload Reel"),S())}function _G(n,e){n&1&&(I(0,"span"),H(1,"Uploading..."),S())}function vG(n,e){if(n&1){let t=rt();I(0,"app-location-picker",83),re("locationSelected",function(r){he(t);let o=de();return fe(o.onLocationSelected(r))})("cancel",function(){he(t);let r=de();return fe(r.closeLocationPicker())}),S()}}var vc=class n{constructor(e,t,i,r){this.reelsService=e;this.auth=t;this.router=i;this.locationService=r}title="";vendor="";price=null;categories=[];tagInput="";latitude=null;longitude=null;uploadComplete=new Ge;canceled=new Ge;selectedFile=null;videoPreviewUrl=null;isUploading=!1;uploadProgress=0;uploadError=null;uploadSuccess=!1;maxFileSize=200*1024*1024;acceptedFormats=["video/mp4","video/quicktime","video/webm"];ngOnInit(){}onFileSelected(e){let t=e.target;if(t.files&&t.files.length>0){let i=t.files[0];this.validateAndSetFile(i)}}validateAndSetFile(e){if(this.uploadError=null,!this.acceptedFormats.includes(e.type)){this.uploadError="Please select a valid video file (MP4, MOV, or WebM)";return}if(e.size>this.maxFileSize){this.uploadError=`File size must be less than ${this.maxFileSize/(1024*1024)}MB`;return}this.selectedFile=e,this.createVideoPreview(e)}createVideoPreview(e){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl),this.videoPreviewUrl=URL.createObjectURL(e)}removeFile(){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl),this.selectedFile=null,this.videoPreviewUrl=null,this.uploadError=null}resetForm(){this.removeFile(),this.title="",this.vendor="",this.price=null,this.categories=[],this.tagInput="",this.uploadProgress=0,this.uploadSuccess=!1,this.isUploading=!1,this.latitude=null,this.longitude=null}hasChanges(){return!!(this.selectedFile||this.title||this.vendor||this.price||this.categories.length>0||this.latitude||this.longitude)&&!this.uploadSuccess}isFormValid(){return!!(this.selectedFile&&this.title.trim()&&this.vendor.trim()&&this.price!==null&&this.price>0&&this.categories.length>0&&this.latitude!==null&&this.longitude!==null)}handleTagInput(){if(this.tagInput.includes(",")){let e=this.tagInput.split(",").map(t=>t.trim()).filter(t=>t!==""&&!this.categories.includes(t));e.length>0&&(this.categories=[...this.categories,...e]),this.tagInput=""}}removeTag(e){this.categories.splice(e,1)}showLocationPicker=!1;getCurrentLocation(){return T(this,null,function*(){try{let e=yield this.locationService.getUserLocation();this.latitude=e.latitude,this.longitude=e.longitude}catch(e){console.error("Error getting location:",e),this.uploadError="Failed to get current location. Please enter coordinates manually."}})}openLocationPicker(){this.showLocationPicker=!0}onLocationSelected(e){this.latitude=e.lat,this.longitude=e.lng,this.showLocationPicker=!1}closeLocationPicker(){this.showLocationPicker=!1}uploadReel(){return T(this,null,function*(){if(!this.isFormValid()||!this.selectedFile){this.uploadError="Please fill in all fields and select a video";return}let e=this.auth.currentUser;if(!e){this.uploadError="You must be logged in to upload a reel";return}this.isUploading=!0,this.uploadError=null,this.uploadProgress=0,this.uploadSuccess=!1;try{let t=Date.now(),i=this.selectedFile.name.replace(/[^a-zA-Z0-9.]/g,"_"),r=`videos/${e.uid}/${t}_${i}`;this.reelsService.getUploadUrl(r,this.selectedFile.type).subscribe({next:o=>{let{uploadUrl:a,key:l}=o;this.selectedFile&&this.reelsService.uploadToR2(a,this.selectedFile).subscribe({next:u=>T(this,null,function*(){if(u.type===lr.UploadProgress)u.total&&(this.uploadProgress=Math.round(100*u.loaded/u.total));else if(u.type===lr.Response)try{let f=`https://r2-video-uploader.bengaluru-swada.workers.dev/${l}`;yield this.reelsService.createReel({cloudflareVideoId:"",videoUrl:f,thumbnailUrl:"",duration:0,title:this.title.trim(),vendor:this.vendor.trim(),price:this.price,categories:this.categories,latitude:this.latitude,longitude:this.longitude,uploadedBy:e.uid,createdAt:null,viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}),this.uploadSuccess=!0,this.isUploading=!1,this.uploadComplete.emit(),setTimeout(()=>{this.router.navigate(["/main-app"]).catch(m=>{console.error("Navigation failed:",m),this.uploadError='Auto-redirect failed. Please click "Done".'})},1500)}catch(f){console.error("Error creating reel record:",f),this.uploadError="Video uploaded but failed to save metadata.",this.isUploading=!1}}),error:u=>{console.error("R2 Upload error:",u),this.uploadError="Failed to upload video to server.",this.isUploading=!1}})},error:o=>{console.error("Signed URL error:",o),this.uploadError="Failed to initialize upload.",this.isUploading=!1}})}catch(t){console.error("Upload flow error:",t),this.uploadError=t instanceof Error?t.message:"Unknown error occurred",this.isUploading=!1}})}cancel(){this.canceled.emit(),this.resetForm(),this.router.navigate(["/main-app"])}ngOnDestroy(){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl)}static \u0275fac=function(t){return new(t||n)(se(Wi),se(Dt),se(ut),se(Gi))};static \u0275cmp=ht({type:n,selectors:[["app-upload-reel"]],outputs:{uploadComplete:"uploadComplete",canceled:"canceled"},standalone:!0,features:[ft],decls:72,vars:26,consts:[["fileSelector",""],[1,"upload-container"],[1,"upload-header"],[1,"spacer"],[1,"upload-content"],[1,"video-preview-section"],["class","video-preview selected",4,"ngIf","ngIfElse"],[1,"form-section"],[1,"form-group"],["for","title"],["type","text","id","title","placeholder","e.g., Masala Dosa",3,"ngModelChange","ngModel","disabled"],[1,"tag-input-container"],["class","tag-pill",4,"ngFor","ngForOf"],["type","text","id","tagInput","placeholder","Add category (comma to separate)",3,"ngModelChange","input","ngModel","disabled"],[1,"helper-text"],["for","vendor"],["type","text","id","vendor","placeholder","e.g., Vidyarthi Bhavan",3,"ngModelChange","ngModel","disabled"],["for","price"],["type","number","id","price","placeholder","50","min","0",3,"ngModelChange","ngModel","disabled"],[1,"form-group","location-group"],[1,"location-actions"],["type","button",1,"location-card",3,"click","disabled"],[1,"card-icon"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","9","r","2.5","fill","currentColor"],[1,"card-content"],[1,"card-title"],[1,"card-subtitle"],["type","button",1,"location-card","map-card",3,"click","disabled"],["d","M3 11V21H21V11M3 11L12 3L21 11M3 11H21","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","14","r","3","stroke","currentColor","stroke-width","2"],[1,"form-row"],["for","latitude"],["type","number","id","latitude","placeholder","12.9352","step","0.0001",3,"ngModelChange","ngModel","disabled"],["for","longitude"],["type","number","id","longitude","placeholder","77.6245","step","0.0001",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],["class","upload-progress",4,"ngIf"],[1,"action-buttons"],[1,"upload-btn",3,"click","disabled"],[4,"ngIf"],[3,"locationSelected","cancel",4,"ngIf"],[1,"video-preview","selected"],[1,"file-info-header"],[1,"file-icon"],["width","32","height","32","viewBox","0 0 24 24","fill","none"],["d","M15 10L19 14L15 18","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2"],[1,"file-details"],[1,"file-name"],[1,"file-size"],[1,"remove-video-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"ready-progress"],[1,"progress-bar-container"],[1,"progress-bar-fill",2,"width","100%"],[1,"progress-status"],[1,"file-selector"],["type","file","accept","video/mp4,video/quicktime,video/webm","hidden","",3,"change"],[1,"file-selector-content"],["width","48","height","48","viewBox","0 0 24 24","fill","none"],["cx","12","cy","13","r","4","stroke","currentColor","stroke-width","2"],[1,"selector-title"],[1,"selector-subtitle"],[1,"tag-pill"],[1,"remove-tag",3,"click","disabled"],["width","12","height","12","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2.5","stroke-linecap","round"],[1,"error-message"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M12 8v4M12 16h.01","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"success-message"],[1,"success-info"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M22 4L12 14.01l-3-3","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"done-btn-fallback",3,"click"],[1,"upload-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[3,"locationSelected","cancel"]],template:function(t,i){if(t&1){let r=rt();I(0,"div",1)(1,"div",2)(2,"h1"),H(3,"Upload Reel"),S(),te(4,"div",3),S(),I(5,"div",4)(6,"div",5),Se(7,uG,19,2,"div",6)(8,dG,10,0,"ng-template",null,0,mm),S(),I(10,"div",7)(11,"div",8)(12,"label",9),H(13,"Dish Name *"),S(),I(14,"input",10),ln("ngModelChange",function(a){return he(r),vn(i.title,a)||(i.title=a),fe(a)}),S()(),I(15,"div",8)(16,"label"),H(17,"Categories *"),S(),I(18,"div",11),Se(19,hG,5,2,"div",12),I(20,"input",13),ln("ngModelChange",function(a){return he(r),vn(i.tagInput,a)||(i.tagInput=a),fe(a)}),re("input",function(){return he(r),fe(i.handleTagInput())}),S()(),I(21,"small",14),H(22,"Add items like Breakfast, South Indian, Spicy, etc."),S()(),I(23,"div",8)(24,"label",15),H(25,"Vendor Name *"),S(),I(26,"input",16),ln("ngModelChange",function(a){return he(r),vn(i.vendor,a)||(i.vendor=a),fe(a)}),S()(),I(27,"div",8)(28,"label",17),H(29,"Price (\u20B9) *"),S(),I(30,"input",18),ln("ngModelChange",function(a){return he(r),vn(i.price,a)||(i.price=a),fe(a)}),S()(),I(31,"div",19)(32,"label"),H(33,"Store Location *"),S(),I(34,"div",20)(35,"button",21),re("click",function(){return he(r),fe(i.getCurrentLocation())}),I(36,"div",22),Ce(),I(37,"svg",23),te(38,"path",24)(39,"circle",25),S()(),xe(),I(40,"div",26)(41,"span",27),H(42,"Current Location"),S(),I(43,"span",28),H(44,"Use GPS coordinates"),S()()(),I(45,"button",29),re("click",function(){return he(r),fe(i.openLocationPicker())}),I(46,"div",22),Ce(),I(47,"svg",23),te(48,"path",30)(49,"circle",31),S()(),xe(),I(50,"div",26)(51,"span",27),H(52,"Pick on Map"),S(),I(53,"span",28),H(54,"Select manually"),S()()()()(),I(55,"div",32)(56,"div",8)(57,"label",33),H(58,"Latitude *"),S(),I(59,"input",34),ln("ngModelChange",function(a){return he(r),vn(i.latitude,a)||(i.latitude=a),fe(a)}),S()(),I(60,"div",8)(61,"label",35),H(62,"Longitude *"),S(),I(63,"input",36),ln("ngModelChange",function(a){return he(r),vn(i.longitude,a)||(i.longitude=a),fe(a)}),S()()(),Se(64,fG,5,1,"div",37)(65,pG,9,0,"div",38)(66,mG,5,3,"div",39),I(67,"div",40)(68,"button",41),re("click",function(){return he(r),fe(i.uploadReel())}),Se(69,gG,2,0,"span",42)(70,_G,2,0,"span",42),S()()()(),Se(71,vG,1,0,"app-location-picker",43),S()}if(t&2){let r=Na(9);U(7),Y("ngIf",i.selectedFile)("ngIfElse",r),U(7),cn("ngModel",i.title),Y("disabled",i.isUploading),U(4),We("disabled",i.isUploading),U(),Y("ngForOf",i.categories),U(),cn("ngModel",i.tagInput),Y("disabled",i.isUploading),U(6),cn("ngModel",i.vendor),Y("disabled",i.isUploading),U(4),cn("ngModel",i.price),Y("disabled",i.isUploading),U(5),Y("disabled",i.isUploading),U(10),Y("disabled",i.isUploading),U(14),cn("ngModel",i.latitude),Y("disabled",i.isUploading),U(4),cn("ngModel",i.longitude),Y("disabled",i.isUploading),U(),Y("ngIf",i.uploadError),U(),Y("ngIf",i.uploadSuccess),U(),Y("ngIf",i.isUploading),U(2),Y("disabled",!i.isFormValid()||i.isUploading),U(),Y("ngIf",!i.isUploading),U(),Y("ngIf",i.isUploading),U(),Y("ngIf",i.showLocationPicker)}},dependencies:[bt,An,Ot,ii,ni,vT,qi,wT,Si,lv],styles:['.upload-container[_ngcontent-%COMP%]{height:100vh;background:#0a0a0a;padding:0 0 100px;overflow-y:auto;position:relative}.upload-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:20px;background:#00000080;backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.1);position:sticky;top:0;z-index:10}.upload-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0;color:#fff}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;transition:all .2s ease;border-radius:50%}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.upload-header[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{width:40px}.upload-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}.video-preview-section[_ngcontent-%COMP%]{margin-bottom:24px}.video-preview[_ngcontent-%COMP%]{position:relative;background:#1a1a1a;border-radius:16px;overflow:hidden;aspect-ratio:9/16;max-height:500px;border:1px solid rgba(255,255,255,.1)}.video-preview[_ngcontent-%COMP%]   .preview-video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.video-preview.selected[_ngcontent-%COMP%]{aspect-ratio:auto;padding:24px;display:flex;flex-direction:column;gap:24px;background:#1a1a1a;min-height:auto}.video-preview[_ngcontent-%COMP%]   .file-info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;position:relative}.video-preview[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:#ff6b351a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35}.video-preview[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]{flex:1}.video-preview[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;margin:0 0 4px;word-break:break-all}.video-preview[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:14px;color:#888;margin:0}.video-preview[_ngcontent-%COMP%]   .ready-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{height:8px;background:#ffffff0d;border-radius:4px;overflow:hidden;margin-bottom:8px}.video-preview[_ngcontent-%COMP%]   .ready-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]   .progress-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ff6b35,#ff8c42);border-radius:4px}.video-preview[_ngcontent-%COMP%]   .ready-progress[_ngcontent-%COMP%]   .progress-status[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#34c759;margin:0}.video-preview[_ngcontent-%COMP%]   .remove-video-btn[_ngcontent-%COMP%]{position:static;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;color:#888;cursor:pointer;transition:all .2s ease}.video-preview[_ngcontent-%COMP%]   .remove-video-btn[_ngcontent-%COMP%]:hover{background:#ff3b301a;color:#ff3b30;border-color:#ff3b3033}.file-selector[_ngcontent-%COMP%]{display:block;cursor:pointer}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;padding:60px 40px;text-align:center;border:2px dashed rgba(255,107,53,.3);transition:all .3s ease}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b35;margin-bottom:20px}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   .selector-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#fff;margin:0 0 8px}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   .selector-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#888;margin:0}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]:hover{border-color:#ff6b35;background:#222;transform:translateY(-2px);box-shadow:0 8px 24px #ff6b3533}.form-section[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;padding:24px;border:1px solid rgba(255,255,255,.1)}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;color:#aaa;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;background:#0a0a0a;border:1px solid rgba(255,255,255,.1);border-radius:12px;font-size:16px;color:#fff;transition:all .2s ease;box-sizing:border-box}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff6b35;background:#111;box-shadow:0 0 0 3px #ff6b351a}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#0a0a0a;opacity:.5;cursor:not-allowed}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#555}.form-section[_ngcontent-%COMP%]   .tag-input-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;padding:10px 14px;background:#0a0a0a;border:1px solid rgba(255,255,255,.1);border-radius:12px;min-height:52px;align-items:center;transition:all .2s ease;box-sizing:border-box;margin-bottom:8px}.form-section[_ngcontent-%COMP%]   .tag-input-container[_ngcontent-%COMP%]:focus-within{border-color:#ff6b35;background:#111;box-shadow:0 0 0 3px #ff6b351a}.form-section[_ngcontent-%COMP%]   .tag-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:120px;border:none!important;background:transparent!important;padding:4px 0!important;margin:0!important;box-shadow:none!important;height:auto!important;font-size:15px;color:#fff}.form-section[_ngcontent-%COMP%]   .tag-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#555}.form-section[_ngcontent-%COMP%]   .tag-input-container.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.form-section[_ngcontent-%COMP%]   .tag-pill[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:linear-gradient(135deg,#ff6b35,#ff8c42);color:#fff;padding:6px 14px;border-radius:10px;font-size:14px;font-weight:700;box-shadow:0 4px 10px #ff6b3533;animation:_ngcontent-%COMP%_tag-pop .3s cubic-bezier(.175,.885,.32,1.275);border:1px solid rgba(255,255,255,.2)}.form-section[_ngcontent-%COMP%]   .tag-pill[_ngcontent-%COMP%]   .remove-tag[_ngcontent-%COMP%]{background:#00000026;border:none;color:#fff;padding:2px;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s}.form-section[_ngcontent-%COMP%]   .tag-pill[_ngcontent-%COMP%]   .remove-tag[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.form-section[_ngcontent-%COMP%]   .tag-pill[_ngcontent-%COMP%]   .remove-tag[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.form-section[_ngcontent-%COMP%]   .helper-text[_ngcontent-%COMP%]{display:block;margin-top:8px;font-size:12px;color:#888;font-weight:400;padding-left:4px;margin-bottom:20px}.form-section[_ngcontent-%COMP%]   .location-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:4px;margin-bottom:20px}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]{background:#0a0a0a;border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:16px;display:flex;flex-direction:column;align-items:flex-start;gap:12px;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);text-align:left;color:#fff;position:relative;overflow:hidden}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(circle at center,rgba(255,107,53,.1) 0%,transparent 70%);opacity:0;transition:opacity .3s ease}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:44px;height:44px;background:#ffffff08;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35;transition:all .3s ease}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]{font-size:11px;color:#666;text-transform:none;letter-spacing:0}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#ff6b3566;background:#111;transform:translateY(-2px);box-shadow:0 8px 16px #0006}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]:hover:not(:disabled):after{opacity:1}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]:hover:not(:disabled)   .card-icon[_ngcontent-%COMP%]{background:#ff6b351f;transform:scale(1.05)}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]:hover:not(:disabled)   .card-subtitle[_ngcontent-%COMP%]{color:#888}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.97)}.form-section[_ngcontent-%COMP%]   .location-card[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.form-section[_ngcontent-%COMP%]   .location-card.map-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{color:#4da3ff}.form-section[_ngcontent-%COMP%]   .location-card.map-card[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#4da3ff66}.form-section[_ngcontent-%COMP%]   .location-card.map-card[_ngcontent-%COMP%]:hover:not(:disabled):after{background:radial-gradient(circle at center,rgba(77,163,255,.1) 0%,transparent 70%)}.form-section[_ngcontent-%COMP%]   .location-card.map-card[_ngcontent-%COMP%]:hover:not(:disabled)   .card-icon[_ngcontent-%COMP%]{background:#4da3ff1f}.form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px}.form-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:12px;font-size:14px;margin-bottom:20px;font-weight:500}.form-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#ff3b301a;color:#ff3b30;border:1px solid rgba(255,59,48,.3)}.form-section[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{background:#34c7591a;color:#34c759;border:1px solid rgba(52,199,89,.3);flex-direction:column;align-items:stretch;gap:16px}.form-section[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   .success-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.form-section[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   .done-btn-fallback[_ngcontent-%COMP%]{background:#34c759;color:#fff;border:none;padding:10px 16px;border-radius:8px;font-weight:600;cursor:pointer;font-size:14px;transition:all .2s ease}.form-section[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   .done-btn-fallback[_ngcontent-%COMP%]:hover{background:#2fb34f;transform:translateY(-1px)}.form-section[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:6px;background:#ffffff1a;border-radius:3px;overflow:hidden;margin-bottom:8px}.form-section[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ff6b35,#ff8c42);transition:width .3s ease;border-radius:3px}.form-section[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:13px;color:#888;text-align:center;margin:0;font-weight:500}.form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:12px;margin-top:24px}.form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:16px 24px;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;border:none}.form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b35,#ff8c42);color:#fff;box-shadow:0 4px 12px #ff6b354d}.form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #ff6b3566;transform:translateY(-2px)}@media (max-width: 768px){.upload-container[_ngcontent-%COMP%]{padding-bottom:100px}.upload-content[_ngcontent-%COMP%]{padding:16px}.form-section[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}@keyframes _ngcontent-%COMP%_tag-pop{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}']})};function yG(n,e){if(n&1){let t=rt();I(0,"div",38),re("click",function(){let r=he(t).$implicit,o=de(2);return fe(o.selectLocation(r))}),I(1,"div",39),Ce(),I(2,"svg",40),te(3,"path",6),S()(),xe(),I(4,"div",41)(5,"div",42),H(6),S(),I(7,"div",43),H(8),S()(),Ce(),I(9,"svg",44),te(10,"path",45),S()()}if(n&2){let t=e.$implicit;U(6),gt(t.name),U(2),Ye("Pincode: ",t.pincode,"")}}function wG(n,e){n&1&&(I(0,"div",46),Ce(),I(1,"svg",47),te(2,"circle",32)(3,"path",33),S(),xe(),I(4,"p"),H(5,"No locations found"),S(),I(6,"span"),H(7,"Try searching for a different area"),S()())}function bG(n,e){if(n&1){let t=rt();I(0,"div",24),re("click",function(){he(t);let r=de();return fe(r.closeLocationModal())}),I(1,"div",25),re("click",function(r){return he(t),fe(r.stopPropagation())}),I(2,"div",26)(3,"h2"),H(4,"Select Location"),S(),I(5,"button",27),re("click",function(){he(t);let r=de();return fe(r.closeLocationModal())}),Ce(),I(6,"svg",28),te(7,"path",29),S()()(),xe(),I(8,"div",30),Ce(),I(9,"svg",31),te(10,"circle",32)(11,"path",33),S(),xe(),I(12,"input",34),ln("ngModelChange",function(r){he(t);let o=de();return vn(o.locationSearchQuery,r)||(o.locationSearchQuery=r),fe(r)}),S()(),I(13,"div",35),Se(14,yG,11,2,"div",36)(15,wG,8,0,"div",37),S()()()}if(n&2){let t=de();U(12),cn("ngModel",t.locationSearchQuery),U(2),Y("ngForOf",t.filteredLocations),U(),Y("ngIf",t.filteredLocations.length===0)}}function EG(n,e){if(n&1){let t=rt();I(0,"button",48),re("click",function(){let r=he(t).$implicit,o=de();return fe(o.selectPrice(r))}),H(1),S()}if(n&2){let t=e.$implicit,i=de();We("active",i.selectedPriceRange===t),U(),Ye(" ",t.label," ")}}function CG(n,e){if(n&1){let t=rt();I(0,"button",48),re("click",function(){let r=he(t).$implicit,o=de();return fe(o.selectDistance(r))}),H(1),S()}if(n&2){let t=e.$implicit,i=de();We("active",i.selectedDistance===t),U(),Ye(" ",t.label," ")}}function IG(n,e){if(n&1){let t=rt();I(0,"button",48),re("click",function(){let r=he(t).$implicit,o=de();return fe(o.selectSort(r))}),H(1),S()}if(n&2){let t=e.$implicit,i=de();We("active",i.selectedSort===t),U(),Ye(" ",t," ")}}function TG(n,e){n&1&&(I(0,"div",49),te(1,"div",50),S())}function SG(n,e){n&1&&(I(0,"div")(1,"p"),H(2,"Search for your favorite food or browse categories!"),S()())}function DG(n,e){n&1&&(I(0,"p"),H(1,"No tasty bites found matching your search."),S())}function MG(n,e){if(n&1&&(I(0,"div",51),Se(1,SG,3,0,"div",52)(2,DG,2,0,"ng-template",null,0,mm),S()),n&2){let t=Na(3),i=de();U(),Y("ngIf",i.reels.length===0)("ngIfElse",t)}}function xG(n,e){if(n&1){let t=rt();I(0,"div",53),re("click",function(){let r=he(t).$implicit,o=de();return fe(o.openReel(r))}),I(1,"div",54)(2,"video",55,1),re("loadedmetadata",function(){he(t);let r=Na(3);return fe(r.currentTime=.1)}),S(),I(4,"div",56),H(5),S()(),I(6,"div",57)(7,"div",58)(8,"h3",59),H(9),S()(),I(10,"p",60),H(11),S(),I(12,"div",61)(13,"span",62),H(14),S()()()()}if(n&2){let t=e.$implicit;U(2),Y("src",t.videoUrl,ar),U(3),gt(t.distanceStr),U(4),gt(t.title),U(2),gt(t.vendor),U(3),Ye("\u20B9",t.price,"")}}var uv=class n{constructor(e,t,i){this.reelsService=e;this.locationService=t;this.router=i}searchQuery="";reels=[];filteredReels=[];isLoading=!1;locationName="Koramangala, Bangalore";showLocationModal=!1;locationSearchQuery="";categories=["All","South Indian","North Indian","Street Food","Desserts","Beverages"];selectedCategory="All";priceRanges=[{label:"All",min:0,max:1/0},{label:"\u20B90-30",min:0,max:30},{label:"\u20B931-60",min:31,max:60},{label:"\u20B961-100",min:61,max:100},{label:"\u20B9100+",min:101,max:1/0}];selectedPriceRange=this.priceRanges[0];distances=[{label:"All",max:1/0},{label:"< 1 km",max:1},{label:"1-3 km",max:3},{label:"3-5 km",max:5},{label:"5+ km",max:1/0}];selectedDistance=this.distances[0];sortOptions=["Nearest First","Price: Low to High","Price: High to Low"];selectedSort="Nearest First";ngOnInit(){return T(this,null,function*(){this.locationService.currentLocation$.subscribe(e=>{e&&(this.locationName=`${e.name}, Bangalore`,this.reels.length>0&&this.loadReels())});try{let e=yield this.locationService.getUserLocation();this.locationName=this.locationService.getAreaName(e.latitude,e.longitude)+", Bangalore"}catch(e){console.warn("Could not get initial location name",e)}})}loadReels(){return T(this,null,function*(){this.isLoading=!0;try{let e=yield this.reelsService.getReels(50);this.reels=yield Promise.all(e.map(t=>T(this,null,function*(){let i=1/0,r="-- km";if(t.latitude&&t.longitude)try{let o=yield this.locationService.getUserLocation();i=this.locationService.calculateDistance(o.latitude,o.longitude,t.latitude,t.longitude),r=i.toFixed(1)+" km"}catch(o){console.error("Error calculating distance",o)}return ke(J({},t),{distanceVal:i,distanceStr:r,rating:(4+Math.random()).toFixed(1)})})))}catch(e){console.error("Error loading reels for search:",e)}finally{this.isLoading=!1}})}applyFilters(){return T(this,null,function*(){if(this.reels.length===0&&!this.isLoading){let t=this.searchQuery.trim().length>0,i=this.selectedCategory!=="All"||this.selectedPriceRange.label!=="All"||this.selectedDistance.label!=="All";if(t||i)yield this.loadReels();else{this.filteredReels=[];return}}let e=this.reels;if(this.searchQuery.trim()){let t=this.searchQuery.toLowerCase();e=e.filter(i=>i.title?.toLowerCase().includes(t)||i.vendor?.toLowerCase().includes(t))}if(this.selectedCategory!=="All"&&(e=e.filter(t=>t.categories&&Array.isArray(t.categories)&&t.categories.includes(this.selectedCategory))),e=e.filter(t=>{let i=Number(t.price);return i>=this.selectedPriceRange.min&&i<=this.selectedPriceRange.max}),this.selectedDistance.label!=="All")if(this.selectedDistance.label==="5+ km")e=e.filter(t=>t.distanceVal>5&&t.distanceVal!==1/0);else if(this.selectedDistance.label==="< 1 km")e=e.filter(t=>t.distanceVal<1);else{let t=this.selectedDistance.max,i=this.distances[this.distances.indexOf(this.selectedDistance)-1]?.max||0;this.selectedDistance.label==="1-3 km"?e=e.filter(r=>r.distanceVal>=1&&r.distanceVal<=3):this.selectedDistance.label==="3-5 km"&&(e=e.filter(r=>r.distanceVal>=3&&r.distanceVal<=5))}this.selectedSort==="Nearest First"?e.sort((t,i)=>t.distanceVal-i.distanceVal):this.selectedSort==="Price: Low to High"?e.sort((t,i)=>Number(t.price)-Number(i.price)):this.selectedSort==="Price: High to Low"&&e.sort((t,i)=>Number(i.price)-Number(t.price)),this.filteredReels=e})}selectCategory(e){this.selectedCategory=e,this.applyFilters()}selectPrice(e){this.selectedPriceRange=e,this.applyFilters()}selectDistance(e){this.selectedDistance=e,this.applyFilters()}selectSort(e){this.selectedSort=e,this.applyFilters()}openReel(e){this.router.navigate(["/main-app"],{state:{openFeed:!0,reelId:e.id}})}openLocationModal(){this.showLocationModal=!0,this.locationSearchQuery=""}closeLocationModal(){this.showLocationModal=!1,this.locationSearchQuery=""}selectLocation(e){this.locationService.updateLocation(e.name,e.lat,e.lng),this.closeLocationModal()}get filteredLocations(){let e=this.locationSearchQuery.toLowerCase().trim();return e?this.locationService.AREAS.filter(t=>t.name.toLowerCase().includes(e)||t.pincode.includes(e)):this.locationService.AREAS}static \u0275fac=function(t){return new(t||n)(se(Wi),se(Gi),se(ut))};static \u0275cmp=ht({type:n,selectors:[["app-search"]],standalone:!0,features:[ft],decls:32,vars:9,consts:[["noResults",""],["videoThumb",""],[1,"search-container"],[1,"search-header"],[1,"location-context",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none",1,"location-pin"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","currentColor"],[1,"location-text"],["width","12","height","12","viewBox","0 0 24 24","fill","none",1,"chevron-down"],["d","M6 9l6 6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-bar"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","placeholder","Search dosa, vada pav, biryani...",3,"ngModelChange","ngModel"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"filters-scroll"],[1,"filter-section-title"],[1,"filter-group"],["class","chip",3,"active","click",4,"ngFor","ngForOf"],[1,"results-grid"],["class","loading-spinner",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","food-card",3,"click",4,"ngFor","ngForOf"],[1,"modal-overlay",3,"click"],[1,"location-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"modal-search-box"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"search-icon"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21l-4.35-4.35","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["type","text","placeholder","Search for a location...",1,"search-input",3,"ngModelChange","ngModel"],[1,"locations-list"],["class","location-item",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"location-item",3,"click"],[1,"location-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],[1,"location-info"],[1,"location-name"],[1,"location-area"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"chevron-right"],["d","M9 18l6-6-6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"no-results"],["width","48","height","48","viewBox","0 0 24 24","fill","none"],[1,"chip",3,"click"],[1,"loading-spinner"],[1,"spinner"],[1,"empty-state"],[4,"ngIf","ngIfElse"],[1,"food-card",3,"click"],[1,"card-image"],["muted","","playsinline","","preload","metadata",3,"loadedmetadata","src"],[1,"distance-badge"],[1,"card-details"],[1,"header-row"],[1,"dish-name"],[1,"vendor-name"],[1,"price-row"],[1,"price"]],template:function(t,i){t&1&&(I(0,"div",2)(1,"div",3)(2,"div",4),re("click",function(){return i.openLocationModal()}),Ce(),I(3,"svg",5),te(4,"path",6),S(),xe(),I(5,"span",7),H(6),S(),Ce(),I(7,"svg",8),te(8,"path",9),S()(),xe(),I(9,"div",10),Ce(),I(10,"svg",11),te(11,"circle",12)(12,"line",13),S(),xe(),I(13,"input",14),ln("ngModelChange",function(o){return vn(i.searchQuery,o)||(i.searchQuery=o),o}),re("ngModelChange",function(){return i.applyFilters()}),S()()(),Se(14,bG,16,3,"div",15),I(15,"div",16)(16,"div",17),H(17,"Price Range"),S(),I(18,"div",18),Se(19,EG,2,3,"button",19),S(),I(20,"div",17),H(21,"Distance"),S(),I(22,"div",18),Se(23,CG,2,3,"button",19),S(),I(24,"div",17),H(25,"Sort By"),S(),I(26,"div",18),Se(27,IG,2,3,"button",19),S()(),I(28,"div",20),Se(29,TG,2,0,"div",21)(30,MG,4,2,"div",22)(31,xG,15,5,"div",23),S()()),t&2&&(U(6),gt(i.locationName),U(7),cn("ngModel",i.searchQuery),U(),Y("ngIf",i.showLocationModal),U(5),Y("ngForOf",i.priceRanges),U(4),Y("ngForOf",i.distances),U(4),Y("ngForOf",i.sortOptions),U(2),Y("ngIf",i.isLoading),U(),Y("ngIf",!i.isLoading&&i.filteredReels.length===0),U(),Y("ngForOf",i.filteredReels))},dependencies:[bt,An,Ot,ii,ni,qi,Si],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%;overflow:hidden}.search-container[_ngcontent-%COMP%]{height:100%;overflow-y:auto;background:#000;padding-bottom:100px;color:#fff;-webkit-overflow-scrolling:touch}.search-header[_ngcontent-%COMP%]{padding:16px;background:#000;position:sticky;top:0;z-index:10;display:flex;flex-direction:column;gap:12px}.location-context[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#ffffff0d;padding:8px 16px;border-radius:12px;color:#ff6b35;font-size:.9rem;font-weight:500;cursor:pointer;width:fit-content;border:1px solid rgba(255,107,53,.2)}.location-context[_ngcontent-%COMP%]   .location-text[_ngcontent-%COMP%]{color:#fff}.location-context[_ngcontent-%COMP%]   .chevron-down[_ngcontent-%COMP%]{color:#888}.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#1a1a1a;border-radius:12px;padding:12px 16px;border:1px solid rgba(255,255,255,.1)}.search-bar[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{color:#888;margin-right:12px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:15px;width:100%;outline:none}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#666}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;backdrop-filter:blur(4px);z-index:1000;display:flex;align-items:flex-end}.location-modal[_ngcontent-%COMP%]{background:#121212;width:100%;max-height:80vh;border-radius:24px 24px 0 0;display:flex;flex-direction:column;border:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 20px 16px;border-bottom:1px solid rgba(255,255,255,.05)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff;margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#888;cursor:pointer}.modal-search-box[_ngcontent-%COMP%]{padding:16px 20px;position:relative}.modal-search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:36px;top:50%;transform:translateY(-50%);color:#666}.modal-search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 48px;background:#1e1e1e;border:1px solid rgba(255,255,255,.1);border-radius:12px;color:#fff;box-sizing:border-box}.modal-search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff6b35}.locations-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:24px}.location-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;cursor:pointer;border-bottom:1px solid rgba(255,255,255,.05)}.location-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.location-item[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#ff6b351a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]{flex:1}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-area[_ngcontent-%COMP%]{font-size:13px;color:#888}.no-results[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#666}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:8px}.filters-scroll[_ngcontent-%COMP%]{padding:0 16px 16px}.filters-scroll[_ngcontent-%COMP%]   .filter-section-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#fff;margin:12px 0 8px}.filters-scroll[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;gap:8px;overflow-x:auto;padding-bottom:4px;scrollbar-width:none}.filters-scroll[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.filters-scroll[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{background:#1a1a1a;color:#aaa;border:1px solid rgba(255,255,255,.1);padding:6px 14px;border-radius:20px;font-size:13px;white-space:nowrap;cursor:pointer;transition:all .2s}.filters-scroll[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;border-color:#ff6b35}.results-grid[_ngcontent-%COMP%]{padding:0 16px;display:grid;grid-template-columns:1fr;grid-template-columns:repeat(2,1fr);gap:16px}.food-card[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;overflow:hidden;cursor:pointer;transition:transform .2s}.food-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.food-card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{position:relative;aspect-ratio:4/3;background:#222}.food-card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.food-card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   .distance-badge[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:#0009;backdrop-filter:blur(4px);padding:4px 8px;border-radius:6px;font-size:11px;font-weight:600}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{padding:12px}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .dish-name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin:0 8px 0 0;color:#fff;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{display:flex;align-items:center;background:#2ecc71;color:#fff;padding:2px 4px;border-radius:4px;font-size:11px;font-weight:700}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{font-size:10px;margin-left:2px}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .vendor-name[_ngcontent-%COMP%]{font-size:13px;color:#888;margin-bottom:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]{font-size:10px;color:#ff9f43;font-weight:700;text-transform:uppercase}.loading-spinner[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:center;padding:40px}.spinner[_ngcontent-%COMP%]{width:30px;height:30px;border:3px solid rgba(255,255,255,.1);border-top-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{grid-column:1/-1;text-align:center;padding:40px;color:#666;font-size:14px}"]})};function PG(n,e){n&1&&(I(0,"div",7),te(1,"div",8),S())}function AG(n,e){if(n&1&&(I(0,"div",12)(1,"div",13),H(2),S(),I(3,"div",14)(4,"div",15),te(5,"video",16),S(),I(6,"div",17)(7,"h3"),H(8),S(),I(9,"p",18),H(10),S(),I(11,"div",19)(12,"span"),H(13),S(),I(14,"span"),H(15),S()()()()()),n&2){let t=e.$implicit,i=e.index;U(2),Ye("#",i+1,""),U(3),Y("src",t.videoUrl,ar),U(3),gt(t.title),U(2),gt(t.vendor),U(3),Ye("\u{1F441}\uFE0F ",t.viewCount||0,""),U(2),Ye("\u2764\uFE0F ",t.likes||0,"")}}function RG(n,e){n&1&&(I(0,"div",20)(1,"p"),H(2,"No trending reels yet!"),S()())}function OG(n,e){if(n&1&&(I(0,"div",9),Se(1,AG,16,6,"div",10)(2,RG,3,0,"div",11),S()),n&2){let t=de();U(),Y("ngForOf",t.trendingReels),U(),Y("ngIf",!t.isLoading&&t.trendingReels.length===0)}}function kG(n,e){if(n&1&&(I(0,"div",12)(1,"div",21),H(2,"\u{1F195}"),S(),I(3,"div",14)(4,"div",15),te(5,"video",16),S(),I(6,"div",17)(7,"h3"),H(8),S(),I(9,"p",18),H(10),S(),I(11,"div",19)(12,"span"),H(13),fd(14,"date"),S()()()()()),n&2){let t=e.$implicit;U(5),Y("src",t.videoUrl,ar),U(3),gt(t.title),U(2),gt(t.vendor),U(3),Ye("\u{1F4C5} ",pd(14,4,t.createdAt==null?null:t.createdAt.toDate(),"shortDate"),"")}}function NG(n,e){n&1&&(I(0,"div",20)(1,"p"),H(2,"No new arrivals yet!"),S()())}function LG(n,e){if(n&1&&(I(0,"div",9),Se(1,kG,15,7,"div",10)(2,NG,3,0,"div",11),S()),n&2){let t=de();U(),Y("ngForOf",t.newArrivalsReels),U(),Y("ngIf",!t.isLoading&&t.newArrivalsReels.length===0)}}var dv=class n{constructor(e){this.reelsService=e}trendingReels=[];newArrivalsReels=[];activeTab="trending";isLoading=!0;touchStartX=0;touchEndX=0;ngOnInit(){return T(this,null,function*(){yield this.loadTrending()})}loadTrending(){return T(this,null,function*(){this.isLoading=!0;try{let e=yield this.reelsService.getReels(50);this.trendingReels=[...e].sort((t,i)=>(i.viewCount||0)-(t.viewCount||0)).slice(0,10),this.newArrivalsReels=[...e].sort((t,i)=>{let r=t.createdAt?.toDate?t.createdAt.toDate().getTime():0;return(i.createdAt?.toDate?i.createdAt.toDate().getTime():0)-r}).slice(0,10)}catch(e){console.error("Error loading trending:",e)}finally{this.isLoading=!1}})}switchTab(e){this.activeTab=e,window.scrollTo({top:0,behavior:"smooth"})}onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX}onTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.handleSwipe()}handleSwipe(){this.touchStartX-this.touchEndX>50&&this.activeTab==="trending"&&this.switchTab("new"),this.touchEndX-this.touchStartX>50&&this.activeTab==="new"&&this.switchTab("trending")}static \u0275fac=function(t){return new(t||n)(se(Wi))};static \u0275cmp=ht({type:n,selectors:[["app-trending"]],standalone:!0,features:[ft],decls:13,vars:9,consts:[[1,"trending-page"],[1,"tabs-header"],[1,"tab",3,"click"],[1,"slider"],[1,"content-container",3,"touchstart","touchend"],["class","loading-spinner",4,"ngIf"],["class","reels-list",4,"ngIf"],[1,"loading-spinner"],[1,"spinner"],[1,"reels-list"],["class","ranking-item",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"ranking-item"],[1,"rank"],[1,"reel-card"],[1,"thumbnail"],["muted","","loop","","playsinline","",3,"src"],[1,"info"],[1,"vendor"],[1,"stats"],[1,"empty-state"],[1,"rank","new"]],template:function(t,i){t&1&&(I(0,"div",0)(1,"div",1)(2,"div",2),re("click",function(){return i.switchTab("trending")}),I(3,"span"),H(4,"Trending \u{1F525}"),S()(),I(5,"div",2),re("click",function(){return i.switchTab("new")}),I(6,"span"),H(7,"New Arrivals \u2728"),S()(),te(8,"div",3),S(),I(9,"div",4),re("touchstart",function(o){return i.onTouchStart(o)})("touchend",function(o){return i.onTouchEnd(o)}),Se(10,PG,2,0,"div",5)(11,OG,3,2,"div",6)(12,LG,3,2,"div",6),S()()),t&2&&(U(2),We("active",i.activeTab==="trending"),U(3),We("active",i.activeTab==="new"),U(3),We("right",i.activeTab==="new"),U(2),Y("ngIf",i.isLoading),U(),Y("ngIf",!i.isLoading&&i.activeTab==="trending"),U(),Y("ngIf",!i.isLoading&&i.activeTab==="new"))},dependencies:[bt,An,Ot,sx],styles:[".trending-page[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:#000;color:#fff}.tabs-header[_ngcontent-%COMP%]{display:flex;position:relative;background:#000000e6;padding-top:max(12px,env(safe-area-inset-top));border-bottom:1px solid rgba(255,255,255,.1);z-index:10}.tabs-header[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1;text-align:center;padding:16px 0;font-weight:600;font-size:15px;color:#888;cursor:pointer;transition:color .3s}.tabs-header[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#ff6b35}.tabs-header[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:50%;height:2px;background:#ff6b35;transition:transform .3s ease}.tabs-header[_ngcontent-%COMP%]   .slider.right[_ngcontent-%COMP%]{transform:translate(100%)}.content-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:80px;min-height:0}.reels-list[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:16px}.ranking-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;background:#111;border-radius:12px;padding:12px}.ranking-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{font-size:24px;font-weight:900;color:#ff6b35;min-width:40px;text-align:center;font-style:italic}.ranking-item[_ngcontent-%COMP%]   .rank.new[_ngcontent-%COMP%]{font-size:20px}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]{flex:1;display:flex;gap:12px}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:80px;height:120px;border-radius:8px;overflow:hidden;background:#222}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;color:#fff}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .vendor[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#ccc}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:12px;color:#888}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:30px;height:30px;border:3px solid rgba(255,255,255,.1);border-top-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#888}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function FG(n,e){n&1&&(I(0,"div",24),te(1,"app-favorites",25),S()),n&2&&(U(),Y("showHeader",!1))}var ef=class n{constructor(e,t){this.auth=e;this.router=t;let i=this.auth.currentUser;if(i){if(this.userEmail=i.email,i.phoneNumber){let r=i.phoneNumber.replace(/\D/g,""),o=r.length===12&&r.startsWith("91")?r.substring(2):r;o.length===10?this.userPhoneNumber=`+91 ${o.substring(0,5)}-${o.substring(5)}`:this.userPhoneNumber=i.phoneNumber}else this.userPhoneNumber=null;i.displayName&&(this.fullName=i.displayName,this.userName=i.displayName.toLowerCase().replace(/\s+/g,"_"))}}favoritesComponent;userEmail=null;userPhoneNumber="+1 555-123-4567";userName="foodie_explorer";fullName="Bengaluru Foodie";stats={posts:12,followers:"1.2k",following:248};logout(){return T(this,null,function*(){try{yield this.auth.signOut(),this.router.navigate(["/"])}catch(e){console.error("Error signing out:",e)}})}reloadFavorites(){this.favoritesComponent&&this.favoritesComponent.loadBookmarkedReels()}static \u0275fac=function(t){return new(t||n)(se(Dt),se(ut))};static \u0275cmp=ht({type:n,selectors:[["app-profile"]],viewQuery:function(t,i){if(t&1&&mi(Ws,5),t&2){let r;Xn(r=ei())&&(i.favoritesComponent=r.first)}},standalone:!0,features:[ft],decls:43,vars:2,consts:[[1,"profile-page","premium-theme"],[1,"scroll-content"],[1,"hero-section"],["src","assets/dosa-header.png","alt","Vibrant Dosa Illustration",1,"header-image"],[1,"header-overlay"],[1,"profile-card"],[1,"avatar-wrapper"],["src","assets/premium-avatar.png","alt","Avatar","onerror","this.src='https://ui-avatars.com/api/?name=User&background=333&color=fff'",1,"profile-avatar"],[1,"phone-number"],[1,"logout-btn",3,"click"],[1,"menu-list"],[1,"menu-item"],[1,"menu-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"menu-text"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],["cx","12","cy","12","r","10"],["d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"],["x1","12","y1","17","x2","12.01","y2","17"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["class","hidden-content",4,"ngIf"],[1,"hidden-content"],[3,"showHeader"]],template:function(t,i){t&1&&(I(0,"div",0)(1,"div",1)(2,"div",2),te(3,"img",3)(4,"div",4),S(),I(5,"div",5)(6,"div",6),te(7,"img",7),S(),I(8,"h1",8),H(9),S(),I(10,"button",9),re("click",function(){return i.logout()}),H(11," Logout "),S(),I(12,"div",10)(13,"div",11)(14,"div",12),Ce(),I(15,"svg",13),te(16,"rect",14)(17,"path",15),S()(),xe(),I(18,"span",16),H(19,"Terms and Conditions"),S()(),I(20,"div",11)(21,"div",12),Ce(),I(22,"svg",13),te(23,"path",17),S()(),xe(),I(24,"span",16),H(25,"Privacy Policy"),S()(),I(26,"div",11)(27,"div",12),Ce(),I(28,"svg",13),te(29,"circle",18)(30,"path",19)(31,"line",20),S()(),xe(),I(32,"span",16),H(33,"Help & Support"),S()(),I(34,"div",11)(35,"div",12),Ce(),I(36,"svg",13),te(37,"circle",18)(38,"line",21)(39,"line",22),S()(),xe(),I(40,"span",16),H(41,"About Us"),S()()()(),Se(42,FG,2,1,"div",23),S()()),t&2&&(U(9),gt(i.userPhoneNumber||i.userEmail),U(33),Y("ngIf",!1))},dependencies:[bt,Ot,Ws],styles:['.profile-page.premium-theme[_ngcontent-%COMP%]{height:100vh;background:#000;color:#fff;font-family:Inter,sans-serif}.profile-page.premium-theme[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]{height:100%;overflow-y:auto;padding-bottom:env(safe-area-inset-bottom)}.profile-page.premium-theme[_ngcontent-%COMP%]   .hero-section[_ngcontent-%COMP%]{position:relative;width:100%;height:420px;overflow:hidden}.profile-page.premium-theme[_ngcontent-%COMP%]   .hero-section[_ngcontent-%COMP%]   .header-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;background:#000}.profile-page.premium-theme[_ngcontent-%COMP%]   .hero-section[_ngcontent-%COMP%]   .header-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 60%,#000 100%)}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{position:relative;margin-top:-60px;padding:0 24px 40px;display:flex;flex-direction:column;align-items:center;z-index:2}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:140px;height:140px;margin-bottom:24px;display:flex;align-items:center;justify-content:center}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-6px;background:linear-gradient(45deg,#ff6b35,#ff8c42,#ff3b30,#ff6b35);background-size:300% 300%;border-radius:50%;padding:3px;animation:_ngcontent-%COMP%_rotateGradient 6s linear infinite;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask-composite:exclude}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;border-radius:50%;box-shadow:0 0 30px #ff6b354d;pointer-events:none}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{width:124px;height:124px;border-radius:50%;object-fit:cover;background:#222;border:4px solid #000;box-shadow:0 8px 32px #0009;transition:transform .3s cubic-bezier(.175,.885,.32,1.275);z-index:1}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]:hover   .profile-avatar[_ngcontent-%COMP%]{transform:scale(1.05)}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .phone-number[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin:0 0 32px;letter-spacing:-.5px;text-shadow:0 2px 10px rgba(0,0,0,.5)}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{width:160px;background:#ff6b35;color:#fff;border:none;padding:14px 0;border-radius:14px;font-size:16px;font-weight:700;cursor:pointer;transition:all .3s ease;margin-bottom:48px;box-shadow:0 8px 20px #ff6b354d}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 12px 25px #ff6b3566;filter:brightness(1.1)}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:4px}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:18px 12px;border-radius:12px;border-bottom:1px solid rgba(255,255,255,.05);cursor:pointer;transition:all .2s ease}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#ffffff08}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:active{transform:scale(.98);background:#ffffff0d}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{color:#fff6;display:flex;align-items:center;justify-content:center}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#efefef}.profile-page.premium-theme[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.hidden-content[_ngcontent-%COMP%]{display:none}@keyframes _ngcontent-%COMP%_rotateGradient{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}']})};function VG(n,e){if(n&1){let t=rt();I(0,"button",10),re("click",function(){he(t);let r=de();return fe(r.onCancel())}),H(1),S()}if(n&2){let t=de();U(),Ye(" ",t.secondText," ")}}var hv=class n{message="By going outside all your changes will be lost.";confirmText="Discard Changes";secondText="Stay Here";showCancel=!0;confirm=new Ge;cancel=new Ge;onConfirm(){this.confirm.emit()}onCancel(){this.cancel.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ht({type:n,selectors:[["app-confirmation-modal"]],inputs:{message:"message",confirmText:"confirmText",secondText:"secondText",showCancel:"showCancel"},outputs:{confirm:"confirm",cancel:"cancel"},standalone:!0,features:[ft],decls:15,vars:4,consts:[[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-icon"],["width","40","height","40","viewBox","0 0 24 24","fill","none"],["d","M12 9V14M12 17.01L12.01 16.998","stroke","#ff6b35","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z","stroke","#ff6b35","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"modal-content"],[1,"modal-actions"],[1,"confirm-btn",3,"click"],["class","cancel-btn",3,"click",4,"ngIf"],[1,"cancel-btn",3,"click"]],template:function(t,i){t&1&&(I(0,"div",0),re("click",function(){return i.onCancel()}),I(1,"div",1),re("click",function(o){return o.stopPropagation()}),I(2,"div",2),Ce(),I(3,"svg",3),te(4,"path",4)(5,"path",5),S()(),xe(),I(6,"div",6)(7,"h3"),H(8,"Unsaved Changes"),S(),I(9,"p"),H(10),S()(),I(11,"div",7)(12,"button",8),re("click",function(){return i.onConfirm()}),H(13),S(),Se(14,VG,2,1,"button",9),S()()()),t&2&&(Y("@fadeInOut",void 0),U(10),gt(i.message),U(3),Ye(" ",i.confirmText," "),U(),Y("ngIf",i.showCancel))},dependencies:[bt,Ot],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000d9;backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:9999;padding:20px;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.modal-container[_ngcontent-%COMP%]{background:#1e1e1ecc;backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.1);border-radius:28px;padding:32px;width:100%;max-width:380px;text-align:center;box-shadow:0 25px 50px -12px #00000080;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.34,1.56,.64,1)}.modal-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:#ff6b351a;border-radius:20px;display:flex;align-items:center;justify-content:center;margin:0 auto 20px}.modal-content[_ngcontent-%COMP%]{margin-bottom:28px}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:20px;font-weight:700;margin:0 0 10px}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa;font-size:15px;line-height:1.6;margin:0}.modal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:16px;border-radius:16px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;border:none}.modal-actions[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{background:#ff3b30;color:#fff;box-shadow:0 4px 12px #ff3b304d}.modal-actions[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]:hover{background:#ff453a;transform:translateY(-2px);box-shadow:0 6px 16px #ff3b3066}.modal-actions[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#ffffff0d;color:#ddd;border:1px solid rgba(255,255,255,.1)}.modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}"]})};function BG(n,e){if(n&1){let t=rt();I(0,"app-confirmation-modal",20),re("confirm",function(){he(t);let r=de();return fe(r.onConfirmLeave())})("cancel",function(){he(t);let r=de();return fe(r.onCancelLeave())}),S()}}var fv=class n{constructor(e,t,i,r){this.router=e;this.locationService=t;this.navigationService=i;this.auth=r;let o=this.router.getCurrentNavigation();if(o?.extras?.state){let a=o.extras.state;if(a.location&&(this.location=`${a.location}, Bangalore`),a.latitude&&a.longitude&&this.locationService.setUserLocation(a.latitude,a.longitude),a.openFeed&&a.reelId){this.activeTab="feed";let l=a.reelId,u=(f=0)=>{setTimeout(()=>{this.videoFeedComponent&&this.videoFeedComponent.reels&&this.videoFeedComponent.reels.length>0?(console.log("[MainApp] Video feed loaded, navigating to reel:",l),this.videoFeedComponent.navigateToReel(l)):f<10?(console.log("[MainApp] Waiting for video feed to load... attempt",f+1),u(f+1)):console.error("[MainApp] Failed to navigate to reel - video feed did not load")},500)};u()}}}location="Koramangala, Bangalore";navigate=new Ge;activeTab="feed";showProfileMenu=!1;showConfirmModal=!1;pendingTab=null;favoritesComponent;profileComponent;videoFeedComponent;uploadReelComponent;ngOnInit(){return T(this,null,function*(){if(this.location==="Koramangala, Bangalore")try{let e=yield this.locationService.getUserLocation(),t=this.locationService.findNearestArea(e.latitude,e.longitude);this.location=`${t}, Bangalore`}catch(e){console.error("Error getting location:",e)}this.locationService.currentLocation$.subscribe(e=>{e&&(this.location=`${e.name}, Bangalore`,this.videoFeedComponent&&this.activeTab==="feed"&&this.videoFeedComponent.reloadReelsForNewLocation())}),this.navigationService.selectedReelId$.subscribe(e=>{if(e){console.log("[MainApp] Received reel selection:",e),this.activeTab="feed";let t=(i=0)=>{setTimeout(()=>{this.videoFeedComponent&&this.videoFeedComponent.reels&&this.videoFeedComponent.reels.length>0?(console.log("[MainApp] Navigating to reel:",e),this.videoFeedComponent.navigateToReel(e),this.navigationService.clearSelection()):i<15?(console.log("[MainApp] Waiting for reels... attempt",i+1),t(i+1)):console.error("[MainApp] Failed to navigate - reels not loaded")},400)};t()}})})}select(e){if(this.activeTab===e){e==="feed"&&this.videoFeedComponent&&this.videoFeedComponent.scrollToTopAndRefresh();return}if(this.activeTab==="upload"&&e!=="upload"&&this.uploadReelComponent?.hasChanges()){this.pendingTab=e,this.showConfirmModal=!0;return}this.executeTabChange(e)}executeTabChange(e){this.activeTab=e,this.navigate.emit(e),e==="profile"&&this.profileComponent&&this.profileComponent.reloadFavorites(),e==="favorites"&&this.favoritesComponent&&this.favoritesComponent.loadBookmarkedReels()}onConfirmLeave(){this.showConfirmModal=!1,this.pendingTab&&(this.uploadReelComponent.resetForm(),this.executeTabChange(this.pendingTab),this.pendingTab=null)}onCancelLeave(){this.showConfirmModal=!1,this.pendingTab=null}goToUpload(){this.select("upload")}logout(){return T(this,null,function*(){try{yield this.auth.signOut(),this.router.navigate(["/"])}catch(e){console.error("Error signing out:",e)}})}toggleProfileMenu(){this.showProfileMenu=!this.showProfileMenu}static \u0275fac=function(t){return new(t||n)(se(ut),se(Gi),se(_u),se(Dt))};static \u0275cmp=ht({type:n,selectors:[["app-main-app"]],viewQuery:function(t,i){if(t&1&&(mi(Ws,5),mi(ef,5),mi(_c,5),mi(vc,5)),t&2){let r;Xn(r=ei())&&(i.favoritesComponent=r.first),Xn(r=ei())&&(i.profileComponent=r.first),Xn(r=ei())&&(i.videoFeedComponent=r.first),Xn(r=ei())&&(i.uploadReelComponent=r.first)}},outputs:{navigate:"navigate"},standalone:!0,features:[ft],decls:32,vars:24,consts:[[1,"main-app"],[1,"top-nav"],[1,"nav-left"],[1,"nav-right"],[3,"isActive"],[3,"uploadComplete","canceled"],[1,"bottom-nav"],[1,"bottom-nav-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"nav-icon"],["x","2","y","2","width","20","height","20","rx","5","ry","5","stroke","currentColor","stroke-width","2"],["d","M10 8L16 12L10 16V8Z","fill","currentColor","stroke","none"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21L16.65 16.65","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"bottom-nav-btn","upload-btn",3,"click"],["d","M12 7v10M7 12h10","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"profile-container-bottom"],["d","M20 21C20 18.2386 17.7614 16 15 16H9C6.23858 16 4 18.2386 4 21","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","7","r","4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["message","By going outside all your changes will be lost.","confirmText","Discard Changes","secondText","Stay Here",3,"confirm","cancel",4,"ngIf"],["message","By going outside all your changes will be lost.","confirmText","Discard Changes","secondText","Stay Here",3,"confirm","cancel"]],template:function(t,i){t&1&&(I(0,"div",0)(1,"div",1),te(2,"div",2)(3,"div",3),S(),te(4,"app-video-feed",4)(5,"app-search")(6,"app-trending")(7,"app-profile")(8,"app-favorites"),I(9,"app-upload-reel",5),re("uploadComplete",function(){return i.select("feed")})("canceled",function(){return i.select("feed")}),S(),I(10,"div",6)(11,"button",7),re("click",function(){return i.select("feed")}),Ce(),I(12,"svg",8),te(13,"rect",9)(14,"path",10),S()(),xe(),I(15,"button",7),re("click",function(){return i.select("search")}),Ce(),I(16,"svg",8),te(17,"circle",11)(18,"path",12),S()(),xe(),I(19,"button",13),re("click",function(){return i.goToUpload()}),Ce(),I(20,"svg",8),te(21,"rect",9)(22,"path",14),S()(),xe(),I(23,"button",7),re("click",function(){return i.select("favorites")}),Ce(),I(24,"svg",8),te(25,"path",15),S()(),xe(),I(26,"div",16)(27,"button",7),re("click",function(){return i.select("profile")}),Ce(),I(28,"svg",8),te(29,"path",17)(30,"circle",18),S()()()(),Se(31,BG,1,0,"app-confirmation-modal",19),S()),t&2&&(U(4),We("hidden",i.activeTab!=="feed"),Y("isActive",i.activeTab==="feed"),U(),We("hidden",i.activeTab!=="search"),U(),We("hidden",i.activeTab!=="trending"),U(),We("hidden",i.activeTab!=="profile"),U(),We("hidden",i.activeTab!=="favorites"),U(),We("hidden",i.activeTab!=="upload"),U(2),We("active",i.activeTab==="feed"),U(4),We("active",i.activeTab==="search"),U(4),We("active",i.activeTab==="upload"),U(4),We("active",i.activeTab==="favorites"),U(4),We("active",i.activeTab==="profile"),U(4),Y("ngIf",i.showConfirmModal))},dependencies:[bt,Ot,_c,Ws,vc,uv,dv,ef,hv,ii],styles:['.main-app[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;flex-direction:column;background:#000;font-family:Poppins,sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.top-nav[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:10;display:flex;justify-content:space-between;padding:1rem;padding-top:max(1rem,env(safe-area-inset-top));background:linear-gradient(to bottom,rgba(0,0,0,.8) 0%,transparent 100%)}.profile-container-bottom[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.bottom-nav[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;display:flex;justify-content:space-around;padding:.75rem 0;padding-bottom:0;background:#0003;backdrop-filter:blur(1px);-webkit-backdrop-filter:blur(1px);border-top:1px solid rgba(255,255,255,.1);z-index:20}.bottom-nav-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#888;font-size:.7rem;display:flex;flex-direction:column;align-items:center;gap:.25rem;cursor:pointer;transition:color .2s;padding:.5rem 1rem;font-weight:400}.bottom-nav-btn.active[_ngcontent-%COMP%]{color:#ff6b35}.bottom-nav-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:2px}.nav-icon[_ngcontent-%COMP%]{width:24px;height:24px;color:inherit;transition:all .2s}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="M3 9.5"])   path[_ngcontent-%COMP%]{fill:currentColor;stroke:currentColor}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="19 21l-7-5"])   path[_ngcontent-%COMP%]{stroke:currentColor}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(polyline[points*="23 6"])   polyline[_ngcontent-%COMP%]{fill:none;stroke-width:3px}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="M20 21C20"])   path[_ngcontent-%COMP%], .bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="M20 21C20"])   circle[_ngcontent-%COMP%]{stroke:currentColor}@media (min-width: 768px){.location-modal[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;border-radius:24px;max-height:70vh}.modal-overlay[_ngcontent-%COMP%]{align-items:center}}']})};var tf=()=>{let n=Q(Dt),e=Q(ut);return Qg(n).pipe(Ae(t=>t?!0:(e.navigate(["/phone-input"]),!1)))};var ET=()=>{let n=Q(Dt),e=Q(ut);return Qg(n).pipe(Ae(t=>t?(console.log("[NoAuthGuard] User is authenticated, redirecting to main-app"),e.createUrlTree(["/main-app"])):!0))};var aN=[{path:"",component:J_},{path:"phone-input",component:ov,canActivate:[gc,ET]},{path:"otp",component:sv,canActivate:[gc,ET]},{path:"location-permission",component:av,canActivate:[tf,gc]},{path:"main-app",component:fv,canActivate:[tf,gc]},{path:"video-feed",component:_c,canActivate:[tf,gc]},{path:"upload-reel",component:vc,canActivate:[tf,gc]}];var cN={providers:[_P(aN),yx(),JP(),DA(()=>MA(Hh.firebase)),IR(()=>TR()),Ak(()=>Nk()),mc]};var pv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ht({type:n,selectors:[["app-root"]],standalone:!0,features:[ft],decls:1,vars:0,template:function(t,i){t&1&&te(0,"router-outlet")},dependencies:[nb]})};Sx(pv,cN).catch(n=>console.error(n));

var kN=Object.create;var Iv=Object.defineProperty,NN=Object.defineProperties,LN=Object.getOwnPropertyDescriptor,FN=Object.getOwnPropertyDescriptors,VN=Object.getOwnPropertyNames,Uf=Object.getOwnPropertySymbols,HT=Object.getPrototypeOf,Cv=Object.prototype.hasOwnProperty,qT=Object.prototype.propertyIsEnumerable,BN=Reflect.get;var $T=(n,e,t)=>e in n?Iv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Y=(n,e)=>{for(var t in e||={})Cv.call(e,t)&&$T(n,t,e[t]);if(Uf)for(var t of Uf(e))qT.call(e,t)&&$T(n,t,e[t]);return n},Oe=(n,e)=>NN(n,FN(e));var Tv=(n,e)=>{var t={};for(var i in n)Cv.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Uf)for(var i of Uf(n))e.indexOf(i)<0&&qT.call(n,i)&&(t[i]=n[i]);return t};var UN=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var jN=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of VN(e))!Cv.call(n,r)&&r!==t&&Iv(n,r,{get:()=>e[r],enumerable:!(i=LN(e,r))||i.enumerable});return n};var zN=(n,e,t)=>(t=n!=null?kN(HT(n)):{},jN(e||!n||!n.__esModule?Iv(t,"default",{value:n,enumerable:!0}):t,n));var is=(n,e,t)=>BN(HT(n),t,e);var T=(n,e,t)=>new Promise((i,r)=>{var o=u=>{try{l(t.next(u))}catch(f){r(f)}},a=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(o,a);l((t=t.apply(n,e)).next())});var oN=UN((cv,rN)=>{"use strict";(function(n,e){typeof cv=="object"&&typeof rN<"u"?e(cv):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(cv,function(n){"use strict";var e="1.9.4";function t(s){var c,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(c in _)s[c]=_[c]}return s}var i=Object.create||function(){function s(){}return function(c){return s.prototype=c,new s}}();function r(s,c){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function l(s,c,h){var p,_,w,x;return x=function(){p=!1,_&&(w.apply(h,_),_=!1)},w=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(x,c),p=!0)},w}function u(s,c,h){var p=c[1],_=c[0],w=p-_;return s===p&&h?s:((s-_)%w+w)%w+_}function f(){return!1}function m(s,c){if(c===!1)return s;var h=Math.pow(10,c===void 0?6:c);return Math.round(s*h)/h}function v(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return v(s).split(/\s+/)}function b(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in c)s.options[h]=c[h];return s.options}function M(s,c,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function N(s,c){return s.replace(k,function(h,p){var _=c[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(c)),_})}var G=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function te(s,c){for(var h=0;h<s.length;h++)if(s[h]===c)return h;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ue(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var Ne=0;function he(s){var c=+new Date,h=Math.max(0,16-(c-Ne));return Ne=c+h,window.setTimeout(s,h)}var R=window.requestAnimationFrame||ue("RequestAnimationFrame")||he,S=window.cancelAnimationFrame||ue("CancelAnimationFrame")||ue("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function A(s,c,h){if(h&&R===he)s.call(c);else return R.call(window,r(s,c))}function O(s){s&&S.call(window,s)}var F={__proto__:null,extend:t,create:i,bind:r,get lastId(){return o},stamp:a,throttle:l,wrapNum:u,falseFn:f,formatNum:m,trim:v,splitWords:E,setOptions:b,getParamString:M,template:N,isArray:G,indexOf:te,emptyImageUrl:J,requestFn:R,cancelFn:S,requestAnimFrame:A,cancelAnimFrame:O};function V(){}V.extend=function(s){var c=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=i(h);p.constructor=c,c.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(c[_]=this[_]);return s.statics&&t(c,s.statics),s.includes&&(P(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?i(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,x=p._initHooks.length;w<x;w++)p._initHooks[w].call(this)}},c},V.include=function(s){var c=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},V.mergeOptions=function(s){return t(this.prototype.options,s),this},V.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function P(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=G(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Dt={on:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h)}return this},off:function(s,c,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],c);else{s=E(s);for(var _=arguments.length===1,w=0,x=s.length;w<x;w++)_?this._off(s[w]):this._off(s[w],c,h)}return this},_on:function(s,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,h)===!1){h===this&&(h=void 0);var _={fn:c,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,c,h){var p,_,w;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,w=p.length;_<w;_++)p[_].fn=f;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var x=this._listens(s,c,h);if(x!==!1){var j=p[x];this._firingCount&&(j.fn=f,this._events[s]=p=p.slice()),p.splice(x,1)}}},fire:function(s,c,h){if(!this.listens(s,h))return this;var p=t({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,x=_.length;w<x;w++){var j=_[w],z=j.fn;j.once&&this.off(s,z,j.ctx),z.call(j.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,c,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=c;typeof c!="function"&&(p=!!c,_=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var x in this._eventParents)if(this._eventParents[x].listens(s,c,h,p))return!0}return!1},_listens:function(s,c,h){if(!this._events)return!1;var p=this._events[s]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var _=0,w=p.length;_<w;_++)if(p[_].fn===c&&p[_].ctx===h)return _;return!1},once:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c,!0);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};Dt.addEventListener=Dt.on,Dt.removeEventListener=Dt.clearAllEventListeners=Dt.off,Dt.addOneTimeEventListener=Dt.once,Dt.fireEvent=Dt.fire,Dt.hasEventListeners=Dt.listens;var Hn=V.extend(Dt);function W(s,c,h){this.x=h?Math.round(s):s,this.y=h?Math.round(c):c}var pe=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(s){return this.clone()._add(Z(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Z(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new W(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new W(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(s){s=Z(s);var c=s.x-this.x,h=s.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(s){return s=Z(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Z(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function Z(s,c,h){return s instanceof W?s:G(s)?new W(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new W(s.x,s.y):new W(s,c,h)}function ve(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}ve.prototype={extend:function(s){var c,h;if(!s)return this;if(s instanceof W||typeof s[0]=="number"||"x"in s)c=h=Z(s);else if(s=Ye(s),c=s.min,h=s.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,h;return typeof s[0]=="number"||s instanceof W?s=Z(s):s=Ye(s),s instanceof ve?(c=s.min,h=s.max):c=h=s,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=Ye(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>=c.x&&p.x<=h.x,x=_.y>=c.y&&p.y<=h.y;return w&&x},overlaps:function(s){s=Ye(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>c.x&&p.x<h.x,x=_.y>c.y&&p.y<h.y;return w&&x},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*s,_=Math.abs(c.y-h.y)*s;return Ye(Z(c.x-p,c.y-_),Z(h.x+p,h.y+_))},equals:function(s){return s?(s=Ye(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Ye(s,c){return!s||s instanceof ve?s:new ve(s,c)}function Et(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}Et.prototype={extend:function(s){var c=this._southWest,h=this._northEast,p,_;if(s instanceof Ie)p=s,_=s;else if(s instanceof Et){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(Ee(s)||Le(s)):this;return!c&&!h?(this._southWest=new Ie(p.lat,p.lng),this._northEast=new Ie(_.lat,_.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*s,_=Math.abs(c.lng-h.lng)*s;return new Et(new Ie(c.lat-p,c.lng-_),new Ie(h.lat+p,h.lng+_))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ie||"lat"in s?s=Ee(s):s=Le(s);var c=this._southWest,h=this._northEast,p,_;return s instanceof Et?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=c.lat&&_.lat<=h.lat&&p.lng>=c.lng&&_.lng<=h.lng},intersects:function(s){s=Le(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>=c.lat&&p.lat<=h.lat,x=_.lng>=c.lng&&p.lng<=h.lng;return w&&x},overlaps:function(s){s=Le(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>c.lat&&p.lat<h.lat,x=_.lng>c.lng&&p.lng<h.lng;return w&&x},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=Le(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(s,c){return s instanceof Et?s:new Et(s,c)}function Ie(s,c,h){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,h!==void 0&&(this.alt=+h)}Ie.prototype={equals:function(s,c){if(!s)return!1;s=Ee(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+m(this.lat,s)+", "+m(this.lng,s)+")"},distanceTo:function(s){return Ti.distance(this,Ee(s))},wrap:function(){return Ti.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return Le([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function Ee(s,c,h){return s instanceof Ie?s:G(s)&&typeof s[0]!="object"?s.length===3?new Ie(s[0],s[1],s[2]):s.length===2?new Ie(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ie(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new Ie(s,c,h)}var ln={latLngToPoint:function(s,c){var h=this.projection.project(s),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(s,c){var h=this.scale(c),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(c.min,h),_=this.transformation.transform(c.max,h);return new ve(p,_)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ie(h,c,p)},wrapLatLngBounds:function(s){var c=s.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,_=c.lng-h.lng;if(p===0&&_===0)return s;var w=s.getSouthWest(),x=s.getNorthEast(),j=new Ie(w.lat-p,w.lng-_),z=new Ie(x.lat-p,x.lng-_);return new Et(j,z)}},Ti=t({},ln,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var h=Math.PI/180,p=s.lat*h,_=c.lat*h,w=Math.sin((c.lat-s.lat)*h/2),x=Math.sin((c.lng-s.lng)*h/2),j=w*w+Math.cos(p)*Math.cos(_)*x*x,z=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*z}}),Ot=6378137,ei={R:Ot,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*c);return new W(this.R*s.lng*c,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var c=180/Math.PI;return new Ie((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:function(){var s=Ot*Math.PI;return new ve([-s,-s],[s,s])}()};function un(s,c,h,p){if(G(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=h,this._d=p}un.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new W((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function kn(s,c,h,p){return new un(s,c,h,p)}var Si=t({},Ti,{code:"EPSG:3857",projection:ei,transformation:function(){var s=.5/(Math.PI*ei.R);return kn(s,.5,-s,.5)}()}),vu=t({},Si,{code:"EPSG:900913"});function vc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function yc(s,c){var h="",p,_,w,x,j,z;for(p=0,w=s.length;p<w;p++){for(j=s[p],_=0,x=j.length;_<x;_++)z=j[_],h+=(_?"L":"M")+z.x+" "+z.y;h+=c?me.svg?"z":"x":""}return h||"M0 0"}var Zs=document.documentElement.style,Qs="ActiveXObject"in window,nf=Qs&&!document.addEventListener,rf="msLaunchUri"in navigator&&!("documentMode"in document),wc=ti("webkit"),yu=ti("android"),bc=ti("android 2")||ti("android 3"),of=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pv=yu&&ti("Google")&&of<537&&!("AudioNode"in window),Ys=!!window.opera,Ec=!rf&&ti("chrome"),Ic=ti("gecko")&&!wc&&!Ys&&!Qs,dn=!Ec&&ti("safari"),hn=ti("phantom"),Js="OTransition"in Zs,sf=navigator.platform.indexOf("Win")===0,wu=Qs&&"transition"in Zs,bu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!bc,Go="MozPerspective"in Zs,af=!window.L_DISABLE_3D&&(wu||bu||Go)&&!Js&&!hn,Wo=typeof orientation<"u"||ti("mobile"),Eu=Wo&&wc,mv=Wo&&bu,cf=!window.PointerEvent&&window.MSPointerEvent,Cc=!!(window.PointerEvent||cf),Iu="ontouchstart"in window||!!window.TouchEvent,lf=!window.L_NO_TOUCH&&(Iu||Cc),Xs=Wo&&Ys,Cu=Wo&&Ic,Tu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xr=function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return s}(),uf=function(){return!!document.createElement("canvas").getContext}(),Ko=!!(document.createElementNS&&vc("svg").createSVGRect),df=!!Ko&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ea=!Ko&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),hf=navigator.platform.indexOf("Mac")===0,En=navigator.platform.indexOf("Linux")===0;function ti(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var me={ie:Qs,ielt9:nf,edge:rf,webkit:wc,android:yu,android23:bc,androidStock:pv,opera:Ys,chrome:Ec,gecko:Ic,safari:dn,phantom:hn,opera12:Js,win:sf,ie3d:wu,webkit3d:bu,gecko3d:Go,any3d:af,mobile:Wo,mobileWebkit:Eu,mobileWebkit3d:mv,msPointer:cf,pointer:Cc,touch:lf,touchNative:Iu,mobileOpera:Xs,mobileGecko:Cu,retina:Tu,passiveEvents:Xr,canvas:uf,svg:Ko,vml:ea,inlineSvg:df,mac:hf,linux:En},Zo=me.msPointer?"MSPointerDown":"pointerdown",ff=me.msPointer?"MSPointerMove":"pointermove",pf=me.msPointer?"MSPointerUp":"pointerup",eo=me.msPointer?"MSPointerCancel":"pointercancel",Su={touchstart:Zo,touchmove:ff,touchend:pf,touchcancel:eo},mf={touchstart:_f,touchmove:Qo,touchend:Qo,touchcancel:Qo},Ki={},Du=!1;function Au(s,c,h){return c==="touchstart"&&xu(),mf[c]?(h=mf[c].bind(this,h),s.addEventListener(Su[c],h,!1),h):(console.warn("wrong event specified:",c),f)}function Tc(s,c,h){if(!Su[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Su[c],h,!1)}function mr(s){Ki[s.pointerId]=s}function gf(s){Ki[s.pointerId]&&(Ki[s.pointerId]=s)}function Mu(s){delete Ki[s.pointerId]}function xu(){Du||(document.addEventListener(Zo,mr,!0),document.addEventListener(ff,gf,!0),document.addEventListener(pf,Mu,!0),document.addEventListener(eo,Mu,!0),Du=!0)}function Qo(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in Ki)c.touches.push(Ki[h]);c.changedTouches=[c],s(c)}}function _f(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&jt(c),Qo(s,c)}function vf(s){var c={},h,p;for(p in s)h=s[p],c[p]=h&&h.bind?h.bind(s):h;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var gv=200;function Sc(s,c){s.addEventListener("dblclick",c);var h=0,p;function _(w){if(w.detail!==1){p=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var x=Bu(w);if(!(x.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!x.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var j=Date.now();j-h<=gv?(p++,p===2&&c(vf(w))):p=1,h=j}}}return s.addEventListener("click",_),{dblclick:c,simDblclick:_}}function yf(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var ta=Di(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zi=Di(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gr=Zi==="webkitTransition"||Zi==="OTransition"?Zi+"End":"transitionend";function Dc(s){return typeof s=="string"?document.getElementById(s):s}function na(s,c){var h=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[c]:null}return h==="auto"?null:h}function nt(s,c,h){var p=document.createElement(s);return p.className=c||"",h&&h.appendChild(p),p}function At(s){var c=s.parentNode;c&&c.removeChild(s)}function ia(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function _r(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function vr(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function Ac(s,c){if(s.classList!==void 0)return s.classList.contains(c);var h=ra(s);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function Fe(s,c){if(s.classList!==void 0)for(var h=E(c),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!Ac(s,c)){var w=ra(s);Pu(s,(w?w+" ":"")+c)}}function Ut(s,c){s.classList!==void 0?s.classList.remove(c):Pu(s,v((" "+ra(s)+" ").replace(" "+c+" "," ")))}function Pu(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function ra(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Nn(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&_v(s,c)}function _v(s,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):s.style.filter+=" progid:"+p+"(opacity="+c+")"}function Di(s){for(var c=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in c)return s[h];return!1}function In(s,c,h){var p=c||new W(0,0);s.style[ta]=(me.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function kt(s,c){s._leaflet_pos=c,me.any3d?In(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Ai(s){return s._leaflet_pos||new W(0,0)}var Yo,ft,Jo;if("onselectstart"in document)Yo=function(){Re(window,"selectstart",jt)},ft=function(){wt(window,"selectstart",jt)};else{var Qi=Di(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Yo=function(){if(Qi){var s=document.documentElement.style;Jo=s[Qi],s[Qi]="none"}},ft=function(){Qi&&(document.documentElement.style[Qi]=Jo,Jo=void 0)}}function to(){Re(window,"dragstart",jt)}function Ru(){wt(window,"dragstart",jt)}var oa,Ou;function ku(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Mc(),oa=s,Ou=s.style.outlineStyle,s.style.outlineStyle="none",Re(window,"keydown",Mc))}function Mc(){oa&&(oa.style.outlineStyle=Ou,oa=void 0,Ou=void 0,wt(window,"keydown",Mc))}function wf(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function no(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var yr={__proto__:null,TRANSFORM:ta,TRANSITION:Zi,TRANSITION_END:gr,get:Dc,getStyle:na,create:nt,remove:At,empty:ia,toFront:_r,toBack:vr,hasClass:Ac,addClass:Fe,removeClass:Ut,setClass:Pu,getClass:ra,setOpacity:Nn,testProp:Di,setTransform:In,setPosition:kt,getPosition:Ai,get disableTextSelection(){return Yo},get enableTextSelection(){return ft},disableImageDrag:to,enableImageDrag:Ru,preventOutline:ku,restoreOutline:Mc,getSizedParentNode:wf,getScale:no};function Re(s,c,h,p){if(c&&typeof c=="object")for(var _ in c)Lu(s,_,c[_],h);else{c=E(c);for(var w=0,x=c.length;w<x;w++)Lu(s,c[w],h,p)}return this}var ni="_leaflet_events";function wt(s,c,h,p){if(arguments.length===1)io(s),delete s[ni];else if(c&&typeof c=="object")for(var _ in c)Fu(s,_,c[_],h);else if(c=E(c),arguments.length===2)io(s,function(j){return te(c,j)!==-1});else for(var w=0,x=c.length;w<x;w++)Fu(s,c[w],h,p);return this}function io(s,c){for(var h in s[ni]){var p=h.split(/\d/)[0];(!c||c(p))&&Fu(s,p,null,null,h)}}var Nu={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Lu(s,c,h,p){var _=c+a(h)+(p?"_"+a(p):"");if(s[ni]&&s[ni][_])return this;var w=function(j){return h.call(p||s,j||window.event)},x=w;!me.touchNative&&me.pointer&&c.indexOf("touch")===0?w=Au(s,c,w):me.touch&&c==="dblclick"?w=Sc(s,w):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(Nu[c]||c,w,me.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(w=function(j){j=j||window.event,ca(s,j)&&x(j)},s.addEventListener(Nu[c],w,!1)):s.addEventListener(c,x,!1):s.attachEvent("on"+c,w),s[ni]=s[ni]||{},s[ni][_]=w}function Fu(s,c,h,p,_){_=_||c+a(h)+(p?"_"+a(p):"");var w=s[ni]&&s[ni][_];if(!w)return this;!me.touchNative&&me.pointer&&c.indexOf("touch")===0?Tc(s,c,w):me.touch&&c==="dblclick"?yf(s,w):"removeEventListener"in s?s.removeEventListener(Nu[c]||c,w,!1):s.detachEvent("on"+c,w),s[ni][_]=null}function Dn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Vu(s){return Lu(s,"wheel",Dn),this}function sa(s){return Re(s,"mousedown touchstart dblclick contextmenu",Dn),s._leaflet_disable_click=!0,this}function jt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Mi(s){return jt(s),Dn(s),this}function Bu(s){if(s.composedPath)return s.composedPath();for(var c=[],h=s.target;h;)c.push(h),h=h.parentNode;return c}function Xo(s,c){if(!c)return new W(s.clientX,s.clientY);var h=no(c),p=h.boundingClientRect;return new W((s.clientX-p.left)/h.x-c.clientLeft,(s.clientY-p.top)/h.y-c.clientTop)}var aa=me.linux&&me.chrome?window.devicePixelRatio:me.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Uu(s){return me.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/aa:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ca(s,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var Lt={__proto__:null,on:Re,off:wt,stopPropagation:Dn,disableScrollPropagation:Vu,disableClickPropagation:sa,preventDefault:jt,stop:Mi,getPropagationPath:Bu,getMousePosition:Xo,getWheelDelta:Uu,isExternalTarget:ca,addListener:Re,removeListener:wt},bf=Hn.extend({run:function(s,c,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Ai(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=A(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var h=this._startPos.add(this._offset.multiplyBy(s));c&&h._round(),kt(this._el,h),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Je=Hn.extend({options:{crs:Si,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=b(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Ee(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zi&&me.any3d&&!me.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Re(this._proxy,gr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(Ee(s),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,h){var p=this.getZoomScale(c),_=this.getSize().divideBy(2),w=s instanceof W?s:this.latLngToContainerPoint(s),x=w.subtract(_).multiplyBy(1-1/p),j=this.containerPointToLatLng(_.add(x));return this.setView(j,c,{zoom:h})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():Le(s);var h=Z(c.paddingTopLeft||c.padding||[0,0]),p=Z(c.paddingBottomRight||c.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof c.maxZoom=="number"?Math.min(c.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var w=p.subtract(h).divideBy(2),x=this.project(s.getSouthWest(),_),j=this.project(s.getNorthEast(),_),z=this.unproject(x.add(j).divideBy(2).add(w),_);return{center:z,zoom:_}},fitBounds:function(s,c){if(s=Le(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=Z(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Fe(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,h){if(h=h||{},h.animate===!1||!me.any3d)return this.setView(s,c,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),w=this.getSize(),x=this._zoom;s=Ee(s),c=c===void 0?x:c;var j=Math.max(w.x,w.y),z=j*this.getZoomScale(x,c),K=_.distanceTo(p)||1,ce=1.42,De=ce*ce;function Ke(Kt){var Bf=Kt?-1:1,xN=Kt?z:j,PN=z*z-j*j+Bf*De*De*K*K,RN=2*xN*De*K,Ev=PN/RN,zT=Math.sqrt(Ev*Ev+1)-Ev,ON=zT<1e-9?-18:Math.log(zT);return ON}function Fn(Kt){return(Math.exp(Kt)-Math.exp(-Kt))/2}function pn(Kt){return(Math.exp(Kt)+Math.exp(-Kt))/2}function xi(Kt){return Fn(Kt)/pn(Kt)}var Gn=Ke(0);function jc(Kt){return j*(pn(Gn)/pn(Gn+ce*Kt))}function SN(Kt){return j*(pn(Gn)*xi(Gn+ce*Kt)-Fn(Gn))/De}function DN(Kt){return 1-Math.pow(1-Kt,1.5)}var AN=Date.now(),UT=(Ke(1)-Gn)/ce,MN=h.duration?1e3*h.duration:1e3*UT*.8;function jT(){var Kt=(Date.now()-AN)/MN,Bf=DN(Kt)*UT;Kt<=1?(this._flyToFrame=A(jT,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(SN(Bf)/K)),x),this.getScaleZoom(j/jc(Bf),x),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),jT.call(this),this},flyToBounds:function(s,c){var h=this._getBoundsCenterZoom(s,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(s){return s=Le(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,Le(s));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var h=Z(c.paddingTopLeft||c.padding||[0,0]),p=Z(c.paddingBottomRight||c.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(s),x=this.getPixelBounds(),j=Ye([x.min.add(h),x.max.subtract(p)]),z=j.getSize();if(!j.contains(w)){this._enforcingBounds=!0;var K=w.subtract(j.getCenter()),ce=j.extend(w).getSize().subtract(z);_.x+=K.x<0?-ce.x:ce.x,_.y+=K.y<0?-ce.y:ce.y,this.panTo(this.unproject(_),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),_=h.divideBy(2).round(),w=p.subtract(_);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,s):navigator.geolocation.getCurrentPosition(c,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,h=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,h=s.coords.longitude,p=new Ie(c,h),_=p.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var x=this.getBoundsZoom(_);this.setView(p,w.maxZoom?Math.min(x,w.maxZoom):x)}var j={latlng:p,bounds:_,timestamp:s.timestamp};for(var z in s.coords)typeof s.coords[z]=="number"&&(j[z]=s.coords[z]);this.fire("locationfound",j)}},addHandler:function(s,c){if(!c)return this;var h=this[s]=new c(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),At(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)At(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=nt("div",h,c||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new Et(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,h){s=Le(s),h=Z(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),x=s.getNorthWest(),j=s.getSouthEast(),z=this.getSize().subtract(h),K=Ye(this.project(j,p),this.project(x,p)).getSize(),ce=me.any3d?this.options.zoomSnap:1,De=z.x/K.x,Ke=z.y/K.y,Fn=c?Math.max(De,Ke):Math.min(De,Ke);return p=this.getScaleZoom(Fn,p),ce&&(p=Math.round(p/(ce/100))*(ce/100),p=c?Math.ceil(p/ce)*ce:Math.floor(p/ce)*ce),Math.max(_,Math.min(w,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var h=this._getTopLeftPoint(s,c);return new ve(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(s)/h.scale(c)},getScaleZoom:function(s,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(s*h.scale(c));return isNaN(p)?1/0:p},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Ee(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Z(s),c)},layerPointToLatLng:function(s){var c=Z(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(Ee(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Ee(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Le(s))},distance:function(s,c){return this.options.crs.distance(Ee(s),Ee(c))},containerPointToLayerPoint:function(s){return Z(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Z(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(Z(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ee(s)))},mouseEventToContainerPoint:function(s){return Xo(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=Dc(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Re(c,"scroll",this._onScroll,this),this._containerId=a(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&me.any3d,Fe(s,"leaflet-container"+(me.touch?" leaflet-touch":"")+(me.retina?" leaflet-retina":"")+(me.ielt9?" leaflet-oldie":"")+(me.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=na(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),kt(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Fe(s.markerPane,"leaflet-zoom-hide"),Fe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,h){kt(this._mapPane,new W(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var _=this._zoom!==c;this._moveStart(_,h)._move(s,c)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,h,p){c===void 0&&(c=this._zoom);var _=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){kt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var c=s?wt:Re;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),me.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=A(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var h=[],p,_=c==="mouseout"||c==="mouseover",w=s.target||s.srcElement,x=!1;w;){if(p=this._targets[a(w)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){x=!0;break}if(p&&p.listens(c,!0)&&(_&&!ca(w,s)||(h.push(p),_))||w===this._container)break;w=w.parentNode}return!h.length&&!x&&!_&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var h=s.type;h==="mousedown"&&ku(c),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,c);if(h){for(var w=[],x=0;x<h.length;x++)h[x].listens(c,!0)&&w.push(h[x]);_=w.concat(_)}if(_.length){c==="contextmenu"&&jt(s);var j=_[0],z={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var K=j.getLatLng&&(!j._radius||j._radius<=10);z.containerPoint=K?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(s),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=K?j.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(x=0;x<_.length;x++)if(_[x].fire(c,z,!0),z.originalEvent._stopped||_[x].options.bubblingMouseEvents===!1&&te(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Ai(this._mapPane)||new W(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var h=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var h=this.getSize()._divideBy(2);return this.project(s,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(s,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return Ye([this.project(s.getSouthWest(),c)._subtract(p),this.project(s.getNorthWest(),c)._subtract(p),this.project(s.getSouthEast(),c)._subtract(p),this.project(s.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,h){if(!h)return s;var p=this.project(s,c),_=this.getSize().divideBy(2),w=new ve(p.subtract(_),p.add(_)),x=this._getBoundsOffset(w,h,c);return Math.abs(x.x)<=1&&Math.abs(x.y)<=1?s:this.unproject(p.add(x),c)},_limitOffset:function(s,c){if(!c)return s;var h=this.getPixelBounds(),p=new ve(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(s,c,h){var p=Ye(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),_=p.min.subtract(s.min),w=p.max.subtract(s.max),x=this._rebound(_.x,-w.x),j=this._rebound(_.y,-w.y);return new W(x,j)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),h=this.getMaxZoom(),p=me.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(c,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ut(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var h=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var s=this._proxy=nt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var h=ta,p=this._proxy.style[h];In(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){At(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();In(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(A(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ut(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ef(s,c){return new Je(s,c)}var qn=V.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Fe(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(At(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),es=function(s){return new qn(s)};Je.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",h=this._controlContainer=nt("div",c+"control-container",this._container);function p(_,w){var x=c+_+" "+c+w;s[_+w]=nt("div",x,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)At(this._controlCorners[s]);At(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var la=qn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,c,h){b(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return qn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(a(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ut(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ut(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=nt("div",s),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),sa(c),Vu(c);var p=this._section=nt("section",s+"-list");h&&(this._map.on("click",this.collapse,this),Re(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=nt("a",s+"-toggle",c);_.href="#",_.title="Layers",_.setAttribute("role","button"),Re(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){jt(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=nt("div",s+"-base",p),this._separator=nt("div",s+"-separator",p),this._overlaysList=nt("div",s+"-overlays",p),c.appendChild(p)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&a(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ia(this._baseLayersList),ia(this._overlaysList),this._layerControlInputs=[];var s,c,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(a(s.target)),h=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(s,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var c=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),Re(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var w=document.createElement("span");c.appendChild(w),w.appendChild(p),w.appendChild(_);var x=s.overlay?this._overlaysList:this._baseLayersList;return x.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,h,p=[],_=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)c=s[w],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||_.push(h);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])||this._map.addLayer(p[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)c=s[_],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Re(s,"click",jt),this.expand();var c=this;setTimeout(function(){wt(s,"click",jt),c._preventClick=!1})}}),If=function(s,c,h){return new la(s,c,h)},ii=qn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",h=nt("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,h,p,_){var w=nt("a",h,p);return w.innerHTML=s,w.href="#",w.title=c,w.setAttribute("role","button"),w.setAttribute("aria-label",c),sa(w),Re(w,"click",Mi),Re(w,"click",_,this),Re(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";Ut(this._zoomInButton,c),Ut(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Fe(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Fe(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Je.mergeOptions({zoomControl:!0}),Je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ii,this.addControl(this.zoomControl))});var Cf=function(s){return new ii(s)},Tf=qn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",h=nt("div",c),p=this.options;return this._addScales(p,c+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,h){s.metric&&(this._mScale=nt("div",c,h)),s.imperial&&(this._iScale=nt("div",c,h))},_update:function(){var s=this._map,c=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/s)},_updateImperial:function(s){var c=s*3.2808399,h,p,_;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(c),this._updateScale(this._iScale,_+" ft",_/c))},_updateScale:function(s,c,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),h=s/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),ua=function(s){return new Tf(s)},Sf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',da=qn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(me.inlineSvg?Sf+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=nt("div","leaflet-control-attribution"),sa(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Je.mergeOptions({attributionControl:!0}),Je.addInitHook(function(){this.options.attributionControl&&new da().addTo(this)});var xc=function(s){return new da(s)};qn.Layers=la,qn.Zoom=ii,qn.Scale=Tf,qn.Attribution=da,es.layers=If,es.zoom=Cf,es.scale=ua,es.attribution=xc;var ri=V.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ri.addTo=function(s,c){return s.addHandler(c,this),this};var Pc={Events:Dt},Df=me.touch?"touchstart mousedown":"mousedown",Yi=Hn.extend({options:{clickTolerance:3},initialize:function(s,c,h,p){b(this,p),this._element=s,this._dragStartTarget=c||s,this._preventOutline=h},enable:function(){this._enabled||(Re(this._dragStartTarget,Df,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Yi._dragging===this&&this.finishDrag(!0),wt(this._dragStartTarget,Df,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ac(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Yi._dragging===this&&this.finishDrag();return}if(!(Yi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Yi._dragging=this,this._preventOutline&&ku(this._element),to(),Yo(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,h=wf(this._element);this._startPoint=new W(c.clientX,c.clientY),this._startPos=Ai(this._element),this._parentScale=no(h);var p=s.type==="mousedown";Re(document,p?"mousemove":"touchmove",this._onMove,this),Re(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,h=new W(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,jt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Fe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),kt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ut(document.body,"leaflet-dragging"),this._lastTarget&&(Ut(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),wt(document,"mousemove touchmove",this._onMove,this),wt(document,"mouseup touchend touchcancel",this._onUp,this),Ru(),ft();var c=this._moved&&this._moving;this._moving=!1,Yi._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function ts(s,c,h){var p,_=[1,4,2,8],w,x,j,z,K,ce,De,Ke;for(w=0,ce=s.length;w<ce;w++)s[w]._code=wr(s[w],c);for(j=0;j<4;j++){for(De=_[j],p=[],w=0,ce=s.length,x=ce-1;w<ce;x=w++)z=s[w],K=s[x],z._code&De?K._code&De||(Ke=ha(K,z,De,c,h),Ke._code=wr(Ke,c),p.push(Ke)):(K._code&De&&(Ke=ha(K,z,De,c,h),Ke._code=wr(Ke,c),p.push(Ke)),p.push(z));s=p}return s}function ju(s,c){var h,p,_,w,x,j,z,K,ce;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var De=Ee([0,0]),Ke=Le(s),Fn=Ke.getNorthWest().distanceTo(Ke.getSouthWest())*Ke.getNorthEast().distanceTo(Ke.getNorthWest());Fn<1700&&(De=Rc(s));var pn=s.length,xi=[];for(h=0;h<pn;h++){var Gn=Ee(s[h]);xi.push(c.project(Ee([Gn.lat-De.lat,Gn.lng-De.lng])))}for(j=z=K=0,h=0,p=pn-1;h<pn;p=h++)_=xi[h],w=xi[p],x=_.y*w.x-w.y*_.x,z+=(_.x+w.x)*x,K+=(_.y+w.y)*x,j+=x*3;j===0?ce=xi[0]:ce=[z/j,K/j];var jc=c.unproject(Z(ce));return Ee([jc.lat+De.lat,jc.lng+De.lng])}function Rc(s){for(var c=0,h=0,p=0,_=0;_<s.length;_++){var w=Ee(s[_]);c+=w.lat,h+=w.lng,p++}return Ee([c/p,h/p])}var zu={__proto__:null,clipPolygon:ts,polygonCenter:ju,centroid:Rc};function Oc(s,c){if(!c||!s.length)return s.slice();var h=c*c;return s=ro(s,h),s=Af(s,h),s}function $u(s,c,h){return Math.sqrt(on(s,c,h,!0))}function kc(s,c,h){return on(s,c,h)}function Af(s,c){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,Nc(s,_,c,0,h-1);var w,x=[];for(w=0;w<h;w++)_[w]&&x.push(s[w]);return x}function Nc(s,c,h,p,_){var w=0,x,j,z;for(j=p+1;j<=_-1;j++)z=on(s[j],s[p],s[_],!0),z>w&&(x=j,w=z);w>h&&(c[x]=1,Nc(s,c,h,p,x),Nc(s,c,h,x,_))}function ro(s,c){for(var h=[s[0]],p=1,_=0,w=s.length;p<w;p++)Lc(s[p],s[_])>c&&(h.push(s[p]),_=p);return _<w-1&&h.push(s[w-1]),h}var Hu;function qu(s,c,h,p,_){var w=p?Hu:wr(s,h),x=wr(c,h),j,z,K;for(Hu=x;;){if(!(w|x))return[s,c];if(w&x)return!1;j=w||x,z=ha(s,c,j,h,_),K=wr(z,h),j===w?(s=z,w=K):(c=z,x=K)}}function ha(s,c,h,p,_){var w=c.x-s.x,x=c.y-s.y,j=p.min,z=p.max,K,ce;return h&8?(K=s.x+w*(z.y-s.y)/x,ce=z.y):h&4?(K=s.x+w*(j.y-s.y)/x,ce=j.y):h&2?(K=z.x,ce=s.y+x*(z.x-s.x)/w):h&1&&(K=j.x,ce=s.y+x*(j.x-s.x)/w),new W(K,ce,_)}function wr(s,c){var h=0;return s.x<c.min.x?h|=1:s.x>c.max.x&&(h|=2),s.y<c.min.y?h|=4:s.y>c.max.y&&(h|=8),h}function Lc(s,c){var h=c.x-s.x,p=c.y-s.y;return h*h+p*p}function on(s,c,h,p){var _=c.x,w=c.y,x=h.x-_,j=h.y-w,z=x*x+j*j,K;return z>0&&(K=((s.x-_)*x+(s.y-w)*j)/z,K>1?(_=h.x,w=h.y):K>0&&(_+=x*K,w+=j*K)),x=s.x-_,j=s.y-w,p?x*x+j*j:new W(_,w)}function Ln(s){return!G(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Gu(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ln(s)}function oo(s,c){var h,p,_,w,x,j,z,K;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ce=Ee([0,0]),De=Le(s),Ke=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());Ke<1700&&(ce=Rc(s));var Fn=s.length,pn=[];for(h=0;h<Fn;h++){var xi=Ee(s[h]);pn.push(c.project(Ee([xi.lat-ce.lat,xi.lng-ce.lng])))}for(h=0,p=0;h<Fn-1;h++)p+=pn[h].distanceTo(pn[h+1])/2;if(p===0)K=pn[0];else for(h=0,w=0;h<Fn-1;h++)if(x=pn[h],j=pn[h+1],_=x.distanceTo(j),w+=_,w>p){z=(w-p)/_,K=[j.x-z*(j.x-x.x),j.y-z*(j.y-x.y)];break}var Gn=c.unproject(Z(K));return Ee([Gn.lat+ce.lat,Gn.lng+ce.lng])}var d={__proto__:null,simplify:Oc,pointToSegmentDistance:$u,closestPointOnSegment:kc,clipSegment:qu,_getEdgeIntersection:ha,_getBitCode:wr,_sqClosestPointOnSegment:on,isFlat:Ln,_flat:Gu,polylineCenter:oo},g={project:function(s){return new W(s.lng,s.lat)},unproject:function(s){return new Ie(s.y,s.x)},bounds:new ve([-180,-90],[180,90])},y={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ve([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,h=this.R,p=s.lat*c,_=this.R_MINOR/h,w=Math.sqrt(1-_*_),x=w*Math.sin(p),j=Math.tan(Math.PI/4-p/2)/Math.pow((1-x)/(1+x),w/2);return p=-h*Math.log(Math.max(j,1e-10)),new W(s.lng*c*h,p)},unproject:function(s){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),w=Math.exp(-s.y/h),x=Math.PI/2-2*Math.atan(w),j=0,z=.1,K;j<15&&Math.abs(z)>1e-7;j++)K=_*Math.sin(x),K=Math.pow((1-K)/(1+K),_/2),z=Math.PI/2-2*Math.atan(w*K)-x,x+=z;return new Ie(x*c,s.x*c/h)}},I={__proto__:null,LonLat:g,Mercator:y,SphericalMercator:ei},B=t({},Ti,{code:"EPSG:3395",projection:y,transformation:function(){var s=.5/(Math.PI*y.R);return kn(s,.5,-s,.5)}()}),$=t({},Ti,{code:"EPSG:4326",projection:g,transformation:kn(1/180,1,-1/180,.5)}),re=t({},ln,{projection:g,transformation:kn(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var h=c.lng-s.lng,p=c.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});ln.Earth=Ti,ln.EPSG3395=B,ln.EPSG3857=Si,ln.EPSG900913=vu,ln.EPSG4326=$,ln.Simple=re;var Ge=Hn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Je.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=a(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=a(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},_addLayers:function(s){s=s?G(s)?s:[s]:[];for(var c=0,h=s.length;c<h;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=a(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),c=_.maxZoom===void 0?c:Math.max(c,_.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ft=Ge.extend({initialize:function(s,c){b(this,c),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),rt=function(s,c){return new Ft(s,c)},Mt=Ft.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ft.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ft.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Et;for(var c in this._layers){var h=this._layers[c];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),fn=function(s,c){return new Mt(s,c)},oi=V.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var _=Z(p),w=Z(c==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return me.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function si(s){return new oi(s)}var br=oi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof br.imagePath!="string"&&(br.imagePath=this._detectIconPath()),(this.options.imagePath||br.imagePath)+oi.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(h,p,_){var w=p.exec(h);return w&&w[_]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=nt("div","leaflet-default-icon-path",document.body),c=na(s,"background-image")||na(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Fc=ri.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Yi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Fe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ut(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=Ai(c._icon),x=h.getPixelBounds(),j=h.getPixelOrigin(),z=Ye(x.min._subtract(j).add(_),x.max._subtract(j).subtract(_));if(!z.contains(w)){var K=Z((Math.max(z.max.x,w.x)-z.max.x)/(x.max.x-z.max.x)-(Math.min(z.min.x,w.x)-z.min.x)/(x.min.x-z.min.x),(Math.max(z.max.y,w.y)-z.max.y)/(x.max.y-z.max.y)-(Math.min(z.min.y,w.y)-z.min.y)/(x.min.y-z.min.y)).multiplyBy(p);h.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),kt(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=A(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=A(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,h=c._shadow,p=Ai(c._icon),_=c._map.layerPointToLatLng(p);h&&kt(h,p),c._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Mf=Ge.extend({options:{icon:new br,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){b(this,c),this._latlng=Ee(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=Ee(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Fe(h,c),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Re(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(Fe(_,c),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&wt(this._icon,"focus",this._panOnFocus,this),At(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&At(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&kt(this._icon,s),this._shadow&&kt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Fc)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Fc(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Nn(this._icon,s),this._shadow&&Nn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,h=c.iconSize?Z(c.iconSize):Z(0,0),p=c.iconAnchor?Z(c.iconAnchor):Z(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function cN(s,c){return new Mf(s,c)}var ns=Ge.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),xf=ns.extend({options:{fill:!0,radius:10},initialize:function(s,c){b(this,c),this._latlng=Ee(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=Ee(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return ns.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,h=this._clickTolerance(),p=[s+h,c+h];this._pxBounds=new ve(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function lN(s,c){return new xf(s,c)}var vv=xf.extend({initialize:function(s,c,h){if(typeof c=="number"&&(c=t({},h,{radius:c})),b(this,c),this._latlng=Ee(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Et(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:ns.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Ti.distance){var _=Math.PI/180,w=this._mRadius/Ti.R/_,x=h.project([c+w,s]),j=h.project([c-w,s]),z=x.add(j).divideBy(2),K=h.unproject(z).lat,ce=Math.acos((Math.cos(w*_)-Math.sin(c*_)*Math.sin(K*_))/(Math.cos(c*_)*Math.cos(K*_)))/_;(isNaN(ce)||ce===0)&&(ce=w/Math.cos(Math.PI/180*c)),this._point=z.subtract(h.getPixelOrigin()),this._radius=isNaN(ce)?0:z.x-h.project([K,s-ce]).x,this._radiusY=z.y-x.y}else{var De=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(De).x}this._updateBounds()}});function uN(s,c,h){return new vv(s,c,h)}var so=ns.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){b(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,h=null,p=on,_,w,x=0,j=this._parts.length;x<j;x++)for(var z=this._parts[x],K=1,ce=z.length;K<ce;K++){_=z[K-1],w=z[K];var De=p(s,_,w,!0);De<c&&(c=De,h=p(s,_,w))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return oo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=Ee(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Et,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ln(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],h=Ln(s),p=0,_=s.length;p<_;p++)h?(c[p]=Ee(s[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(s[p]);return c},_project:function(){var s=new ve;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new W(s,s);this._rawPxBounds&&(this._pxBounds=new ve([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,h){var p=s[0]instanceof Ie,_=s.length,w,x;if(p){for(x=[],w=0;w<_;w++)x[w]=this._map.latLngToLayerPoint(s[w]),h.extend(x[w]);c.push(x)}else for(w=0;w<_;w++)this._projectLatlngs(s[w],c,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,_,w,x,j,z;for(h=0,_=0,w=this._rings.length;h<w;h++)for(z=this._rings[h],p=0,x=z.length;p<x-1;p++)j=qu(z[p],z[p+1],s,p,!0),j&&(c[_]=c[_]||[],c[_].push(j[0]),(j[1]!==z[p+1]||p===x-2)&&(c[_].push(j[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=Oc(s[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var h,p,_,w,x,j,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(j=this._parts[h],p=0,x=j.length,_=x-1;p<x;_=p++)if(!(!c&&p===0)&&$u(s,j[_],j[p])<=z)return!0;return!1}});function dN(s,c){return new so(s,c)}so._flat=Gu;var Vc=so.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ju(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=so.prototype._convertLatLngs.call(this,s),h=c.length;return h>=2&&c[0]instanceof Ie&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(s){so.prototype._setLatLngs.call(this,s),Ln(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ln(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,h=new W(c,c);if(s=new ve(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,w;p<_;p++)w=ts(this._rings[p],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,h,p,_,w,x,j,z,K;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,z=this._parts.length;w<z;w++)for(h=this._parts[w],x=0,K=h.length,j=K-1;x<K;j=x++)p=h[x],_=h[j],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(c=!c);return c||so.prototype._containsPoint.call(this,s,!0)}});function hN(s,c){return new Vc(s,c)}var ao=Mt.extend({initialize:function(s,c){b(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=G(s)?s:s.features,h,p,_;if(c){for(h=0,p=c.length;h<p;h++)_=c[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var x=Pf(s,w);return x?(x.feature=kf(s),x.defaultOptions=x.options,this.resetStyle(x),w.onEachFeature&&w.onEachFeature(s,x),this.addLayer(x)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function Pf(s,c){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],w=c&&c.pointToLayer,x=c&&c.coordsToLatLng||yv,j,z,K,ce;if(!p&&!h)return null;switch(h.type){case"Point":return j=x(p),ET(w,s,j,c);case"MultiPoint":for(K=0,ce=p.length;K<ce;K++)j=x(p[K]),_.push(ET(w,s,j,c));return new Mt(_);case"LineString":case"MultiLineString":return z=Rf(p,h.type==="LineString"?0:1,x),new so(z,c);case"Polygon":case"MultiPolygon":return z=Rf(p,h.type==="Polygon"?1:2,x),new Vc(z,c);case"GeometryCollection":for(K=0,ce=h.geometries.length;K<ce;K++){var De=Pf({geometry:h.geometries[K],type:"Feature",properties:s.properties},c);De&&_.push(De)}return new Mt(_);case"FeatureCollection":for(K=0,ce=h.features.length;K<ce;K++){var Ke=Pf(h.features[K],c);Ke&&_.push(Ke)}return new Mt(_);default:throw new Error("Invalid GeoJSON object.")}}function ET(s,c,h,p){return s?s(c,h):new Mf(h,p&&p.markersInheritOptions&&p)}function yv(s){return new Ie(s[1],s[0],s[2])}function Rf(s,c,h){for(var p=[],_=0,w=s.length,x;_<w;_++)x=c?Rf(s[_],c-1,h):(h||yv)(s[_]),p.push(x);return p}function wv(s,c){return s=Ee(s),s.alt!==void 0?[m(s.lng,c),m(s.lat,c),m(s.alt,c)]:[m(s.lng,c),m(s.lat,c)]}function Of(s,c,h,p){for(var _=[],w=0,x=s.length;w<x;w++)_.push(c?Of(s[w],Ln(s[w])?0:c-1,h,p):wv(s[w],p));return!c&&h&&_.length>0&&_.push(_[0].slice()),_}function Bc(s,c){return s.feature?t({},s.feature,{geometry:c}):kf(c)}function kf(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var bv={toGeoJSON:function(s){return Bc(this,{type:"Point",coordinates:wv(this.getLatLng(),s)})}};Mf.include(bv),vv.include(bv),xf.include(bv),so.include({toGeoJSON:function(s){var c=!Ln(this._latlngs),h=Of(this._latlngs,c?1:0,!1,s);return Bc(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),Vc.include({toGeoJSON:function(s){var c=!Ln(this._latlngs),h=c&&!Ln(this._latlngs[0]),p=Of(this._latlngs,h?2:c?1:0,!0,s);return c||(p=[p]),Bc(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),Ft.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(s).geometry.coordinates)}),Bc(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(s);if(h)p.push(w.geometry);else{var x=kf(w);x.type==="FeatureCollection"?p.push.apply(p,x.features):p.push(x)}}}),h?Bc(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function IT(s,c){return new ao(s,c)}var fN=IT,Nf=Ge.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,h){this._url=s,this._bounds=Le(c),b(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){At(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&_r(this._image),this},bringToBack:function(){return this._map&&vr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Le(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:nt("img");if(Fe(c,"leaflet-image-layer"),this._zoomAnimated&&Fe(c,"leaflet-zoom-animated"),this.options.className&&Fe(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=r(this.fire,this,"load"),c.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;In(this._image,h,c)},_reset:function(){var s=this._image,c=new ve(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();kt(s,c.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){Nn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),pN=function(s,c,h){return new Nf(s,c,h)},CT=Nf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:nt("video");if(Fe(c,"leaflet-image-layer"),this._zoomAnimated&&Fe(c,"leaflet-zoom-animated"),this.options.className&&Fe(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=r(this.fire,this,"load"),s){for(var h=c.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[c.src];return}G(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var x=nt("source");x.src=this._url[w],c.appendChild(x)}}});function mN(s,c,h){return new CT(s,c,h)}var TT=Nf.extend({_initImage:function(){var s=this._image=this._url;Fe(s,"leaflet-image-layer"),this._zoomAnimated&&Fe(s,"leaflet-zoom-animated"),this.options.className&&Fe(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function gN(s,c,h){return new TT(s,c,h)}var Er=Ge.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof Ie||G(s))?(this._latlng=Ee(s),b(this,c)):(b(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Nn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Nn(this._container,1),this.bringToFront(),this.options.interactive&&(Fe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Nn(this._container,0),this._removeTimeout=setTimeout(r(At,void 0,this._container),200)):At(this._container),this.options.interactive&&(Ut(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Ee(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_r(this._container),this},bringToBack:function(){return this._map&&vr(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof Mt){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=Z(this.options.offset),h=this._getAnchor();this._zoomAnimated?kt(this._container,s.add(h)):c=c.add(s).add(h);var p=this._containerBottom=-c.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Je.include({_initOverlay:function(s,c,h,p){var _=c;return _ instanceof s||(_=new s(p).setContent(c)),h&&_.setLatLng(h),_}}),Ge.include({_initOverlay:function(s,c,h,p){var _=h;return _ instanceof s?(b(_,p),_._source=this):(_=c&&!p?c:new s(p,this),_.setContent(h)),_}});var Lf=Er.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Er.prototype.openOn.call(this,s)},onAdd:function(s){Er.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ns||this._source.on("preclick",Dn))},onRemove:function(s){Er.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ns||this._source.off("preclick",Dn))},getEvents:function(){var s=Er.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=nt("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=nt("div",s+"-content-wrapper",c);if(this._contentNode=nt("div",s+"-content",h),sa(c),Vu(this._contentNode),Re(c,"contextmenu",Dn),this._tipContainer=nt("div",s+"-tip-container",c),this._tip=nt("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=nt("a",s+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Re(p,"click",function(_){jt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=s.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&p>_?(c.height=_+"px",Fe(s,w)):Ut(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();kt(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(na(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,_=new W(this._containerLeft,-h-this._containerBottom);_._add(Ai(this._container));var w=s.layerPointToContainerPoint(_),x=Z(this.options.autoPanPadding),j=Z(this.options.autoPanPaddingTopLeft||x),z=Z(this.options.autoPanPaddingBottomRight||x),K=s.getSize(),ce=0,De=0;w.x+p+z.x>K.x&&(ce=w.x+p-K.x+z.x),w.x-ce-j.x<0&&(ce=w.x-j.x),w.y+h+z.y>K.y&&(De=w.y+h-K.y+z.y),w.y-De-j.y<0&&(De=w.y-j.y),(ce||De)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ce,De]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_N=function(s,c){return new Lf(s,c)};Je.mergeOptions({closePopupOnClick:!0}),Je.include({openPopup:function(s,c,h){return this._initOverlay(Lf,s,c,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ge.include({bindPopup:function(s,c){return this._popup=this._initOverlay(Lf,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Mt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Mi(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof ns)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Ff=Er.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Er.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Er.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Er.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=nt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,h,p=this._map,_=this._container,w=p.latLngToContainerPoint(p.getCenter()),x=p.layerPointToContainerPoint(s),j=this.options.direction,z=_.offsetWidth,K=_.offsetHeight,ce=Z(this.options.offset),De=this._getAnchor();j==="top"?(c=z/2,h=K):j==="bottom"?(c=z/2,h=0):j==="center"?(c=z/2,h=K/2):j==="right"?(c=0,h=K/2):j==="left"?(c=z,h=K/2):x.x<w.x?(j="right",c=0,h=K/2):(j="left",c=z+(ce.x+De.x)*2,h=K/2),s=s.subtract(Z(c,h,!0)).add(ce).add(De),Ut(_,"leaflet-tooltip-right"),Ut(_,"leaflet-tooltip-left"),Ut(_,"leaflet-tooltip-top"),Ut(_,"leaflet-tooltip-bottom"),Fe(_,"leaflet-tooltip-"+j),kt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Nn(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),vN=function(s,c){return new Ff(s,c)};Je.include({openTooltip:function(s,c,h){return this._initOverlay(Ff,s,c,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ge.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ff,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Mt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(Re(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Re(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var ST=oi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(ia(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=Z(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function yN(s){return new ST(s)}oi.Default=br;var Wu=Ge.extend({options:{tileSize:256,opacity:1,updateWhenIdle:me.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),At(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_r(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof W?s:new W(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,h=-s(-1/0,1/0),p=0,_=c.length,w;p<_;p++)w=c[p].style.zIndex,c[p]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!me.ielt9){Nn(this._container,this.options.opacity);var s=+new Date,c=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var w=Math.min(1,(s-_.loaded)/200);Nn(_.el,w),w<1?c=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(O(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=nt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=c-Math.abs(s-h),this._onUpdateLevel(h)):(At(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=nt("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)At(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,h,p){var _=Math.floor(s/2),w=Math.floor(c/2),x=h-1,j=new W(+_,+w);j.z=+x;var z=this._tileCoordsToKey(j),K=this._tiles[z];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),x>p?this._retainParent(_,w,x,p):!1)},_retainChildren:function(s,c,h,p){for(var _=2*s;_<2*s+2;_++)for(var w=2*c;w<2*c+2;w++){var x=new W(_,w);x.z=h+1;var j=this._tileCoordsToKey(x),z=this._tiles[j];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);h+1<p&&this._retainChildren(_,w,h+1,p)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,h,p){var _=Math.round(c);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,c)},_setZoomTransform:function(s,c,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();me.any3d?In(s.el,_,p):kt(s.el,_)},_resetGrid:function(){var s=this._map,c=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),_=c.project(s,this._tileZoom).floor(),w=c.getSize().divideBy(p*2);return new ve(_.subtract(w),_.add(w))},_update:function(s){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),w=_.getCenter(),x=[],j=this.options.keepBuffer,z=new ve(_.getBottomLeft().subtract([j,-j]),_.getTopRight().add([j,-j]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var ce=this._tiles[K].coords;(ce.z!==this._tileZoom||!z.contains(new W(ce.x,ce.y)))&&(this._tiles[K].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var De=_.min.y;De<=_.max.y;De++)for(var Ke=_.min.x;Ke<=_.max.x;Ke++){var Fn=new W(Ke,De);if(Fn.z=this._tileZoom,!!this._isValidTile(Fn)){var pn=this._tiles[this._tileCoordsToKey(Fn)];pn?pn.current=!0:x.push(Fn)}}if(x.sort(function(Gn,jc){return Gn.distanceTo(w)-jc.distanceTo(w)}),x.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xi=document.createDocumentFragment();for(Ke=0;Ke<x.length;Ke++)this._addTile(x[Ke],xi);this._level.el.appendChild(xi)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!c.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Le(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),w=c.unproject(p,s.z),x=c.unproject(_,s.z);return[w,x]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),h=new Et(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),h=new W(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(s){var c=this._tiles[s];c&&(At(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Fe(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=f,s.onmousemove=f,me.ielt9&&this.options.opacity<1&&Nn(s,this.options.opacity)},_addTile:function(s,c){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&A(r(this._tileReady,this,s,null,_)),kt(_,h),this._tiles[p]={el:_,coords:s,current:!0},c.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Nn(h.el,0),O(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(Fe(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),me.ielt9||!this._map._fadeAnimated?A(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new W(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new ve(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function wN(s){return new Wu(s)}var Uc=Wu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=b(this,c),c.detectRetina&&me.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var h=document.createElement("img");return Re(h,"load",r(this._tileOnLoad,this,c,h)),Re(h,"error",r(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var c={r:me.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=h),c["-y"]=h}return N(this._url,t(c,this.options))},_tileOnLoad:function(s,c){me.ielt9?setTimeout(r(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),s(h,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=c-s),s+p},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=f,c.onerror=f,!c.complete)){c.src=J;var h=this._tiles[s].coords;At(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",J),Wu.prototype._removeTile.call(this,s)},_tileReady:function(s,c,h){if(!(!this._map||h&&h.getAttribute("src")===J))return Wu.prototype._tileReady.call(this,s,c,h)}});function DT(s,c){return new Uc(s,c)}var AT=Uc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var h=t({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=b(this,c);var _=c.detectRetina&&me.retina?2:1,w=this.getTileSize();h.width=w.x*_,h.height=w.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Uc.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),h=this._crs,p=Ye(h.project(c[0]),h.project(c[1])),_=p.min,w=p.max,x=(this._wmsVersion>=1.3&&this._crs===$?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),j=Uc.prototype.getTileUrl.call(this,s);return j+M(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+x},setParams:function(s,c){return t(this.wmsParams,s),c||this.redraw(),this}});function bN(s,c){return new AT(s,c)}Uc.WMS=AT,DT.wms=bN;var co=Ge.extend({options:{padding:.1},initialize:function(s){b(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,c),w=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,c));me.any3d?In(this._container,w,h):kt(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new ve(h,h.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),MT=co.extend({options:{tolerance:0},getEvents:function(){var s=co.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){co.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Re(s,"mousemove",this._onMouseMove,this),Re(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Re(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,At(this._container),wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){co.prototype._update.call(this);var s=this._bounds,c=this._container,h=s.getSize(),p=me.retina?2:1;kt(c,s.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",me.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){co.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<c.length;_++){if(p=Number(c[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||A(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ve,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var h,p,_,w,x=s._parts,j=x.length,z=this._ctx;if(j){for(z.beginPath(),h=0;h<j;h++){for(p=0,_=x[h].length;p<_;p++)w=x[h][p],z[p?"lineTo":"moveTo"](w.x,w.y);c&&z.closePath()}this._fillStroke(z,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(c.x,c.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,c){var h=c.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(Ut(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Fe(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,h){this._map._fireDOMEvent(c,h||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function xT(s){return me.canvas?new MT(s):null}var Ku=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),EN={_initContainer:function(){this._container=nt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(co.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=Ku("shape");Fe(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=Ku("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;At(c),s.removeInteractiveTarget(c),delete this._layers[a(s)]},_updateStyle:function(s){var c=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(c||(c=s._stroke=Ku("stroke")),_.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=G(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(_.removeChild(c),s._stroke=null),p.fill?(h||(h=s._fill=Ku("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){_r(s._container)},_bringToBack:function(s){vr(s._container)}},Vf=me.vml?Ku:vc,Zu=co.extend({_initContainer:function(){this._container=Vf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){At(this._container),wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){co.prototype._update.call(this);var s=this._bounds,c=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),kt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=Vf("path");s.options.className&&Fe(c,s.options.className),s.options.interactive&&Fe(c,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){At(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,h=s.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,yc(s._parts,c))},_updateCircle:function(s){var c=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(c.x-h)+","+c.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){_r(s._path)},_bringToBack:function(s){vr(s._path)}});me.vml&&Zu.include(EN);function PT(s){return me.svg||me.vml?new Zu(s):null}Je.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&xT(s)||PT(s)}});var RT=Vc.extend({initialize:function(s,c){Vc.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Le(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function IN(s,c){return new RT(s,c)}Zu.create=Vf,Zu.pointsToPath=yc,ao.geometryToLayer=Pf,ao.coordsToLatLng=yv,ao.coordsToLatLngs=Rf,ao.latLngToCoords=wv,ao.latLngsToCoords=Of,ao.getFeature=Bc,ao.asFeature=kf,Je.mergeOptions({boxZoom:!0});var OT=ri.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Re(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){At(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Yo(),to(),this._startPoint=this._map.mouseEventToContainerPoint(s),Re(document,{contextmenu:Mi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=nt("div","leaflet-zoom-box",this._container),Fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new ve(this._point,this._startPoint),h=c.getSize();kt(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(At(this._box),Ut(this._container,"leaflet-crosshair")),ft(),Ru(),wt(document,{contextmenu:Mi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var c=new Et(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Je.addInitHook("addHandler","boxZoom",OT),Je.mergeOptions({doubleClickZoom:!0});var kT=ri.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(_):c.setZoomAround(s.containerPoint,_)}});Je.addInitHook("addHandler","doubleClickZoom",kT),Je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var NT=ri.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Yi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ut(this._map._container,"leaflet-grab"),Ut(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Le(this._map.options.maxBounds);this._offsetLimit=Ye(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-c+h)%s+c-h,w=(p+c+h)%s-c-h,x=Math.abs(_+h)<Math.abs(w+h)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=x},_onDragEnd:function(s){var c=this._map,h=c.options,p=!h.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),p)c.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,x=h.easeLinearity,j=_.multiplyBy(x/w),z=j.distanceTo([0,0]),K=Math.min(h.inertiaMaxSpeed,z),ce=j.multiplyBy(K/z),De=K/(h.inertiaDeceleration*x),Ke=ce.multiplyBy(-De/2).round();!Ke.x&&!Ke.y?c.fire("moveend"):(Ke=c._limitOffset(Ke,c.options.maxBounds),A(function(){c.panBy(Ke,{duration:De,easeLinearity:x,noMoveStart:!0,animate:!0})}))}}});Je.addInitHook("addHandler","dragging",NT),Je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var LT=ri.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Re(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,h=s.scrollTop||c.scrollTop,p=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)c[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)c[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)c[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)c[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)c[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)c[h.zoomOut[p]]=-s},_addHooks:function(){Re(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],s.shiftKey&&(p=Z(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(Z(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Mi(s)}}});Je.addInitHook("addHandler","keyboard",LT),Je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var FT=ri.extend({addHooks:function(){Re(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=Uu(s),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),p),Mi(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,w=h?Math.ceil(_/h)*h:_,x=s._limitZoom(c+(this._delta>0?w:-w))-c;this._delta=0,this._startTime=null,x&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+x):s.setZoomAround(this._lastMousePos,c+x))}});Je.addInitHook("addHandler","scrollWheelZoom",FT);var CN=600;Je.mergeOptions({tapHold:me.touchNative&&me.safari&&me.mobile,tapTolerance:15});var VT=ri.extend({addHooks:function(){Re(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new W(c.clientX,c.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Re(document,"touchend",jt),Re(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),CN),Re(document,"touchend touchcancel contextmenu",this._cancel,this),Re(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){wt(document,"touchend",jt),wt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),wt(document,"touchend touchcancel contextmenu",this._cancel,this),wt(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new W(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});Je.addInitHook("addHandler","tapHold",VT),Je.mergeOptions({touchZoom:me.touch,bounceAtZoomLimits:!0});var BT=ri.extend({addHooks:function(){Fe(this._map._container,"leaflet-touch-zoom"),Re(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ut(this._map._container,"leaflet-touch-zoom"),wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Re(document,"touchmove",this._onTouchMove,this),Re(document,"touchend touchcancel",this._onTouchEnd,this),jt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(_,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&_<1||this._zoom>c.getMaxZoom()&&_>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var x=r(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=A(x,this,!0),jt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),wt(document,"touchmove",this._onTouchMove,this),wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Je.addInitHook("addHandler","touchZoom",BT),Je.BoxZoom=OT,Je.DoubleClickZoom=kT,Je.Drag=NT,Je.Keyboard=LT,Je.ScrollWheelZoom=FT,Je.TapHold=VT,Je.TouchZoom=BT,n.Bounds=ve,n.Browser=me,n.CRS=ln,n.Canvas=MT,n.Circle=vv,n.CircleMarker=xf,n.Class=V,n.Control=qn,n.DivIcon=ST,n.DivOverlay=Er,n.DomEvent=Lt,n.DomUtil=yr,n.Draggable=Yi,n.Evented=Hn,n.FeatureGroup=Mt,n.GeoJSON=ao,n.GridLayer=Wu,n.Handler=ri,n.Icon=oi,n.ImageOverlay=Nf,n.LatLng=Ie,n.LatLngBounds=Et,n.Layer=Ge,n.LayerGroup=Ft,n.LineUtil=d,n.Map=Je,n.Marker=Mf,n.Mixin=Pc,n.Path=ns,n.Point=W,n.PolyUtil=zu,n.Polygon=Vc,n.Polyline=so,n.Popup=Lf,n.PosAnimation=bf,n.Projection=I,n.Rectangle=RT,n.Renderer=co,n.SVG=Zu,n.SVGOverlay=TT,n.TileLayer=Uc,n.Tooltip=Ff,n.Transformation=un,n.Util=F,n.VideoOverlay=CT,n.bind=r,n.bounds=Ye,n.canvas=xT,n.circle=uN,n.circleMarker=lN,n.control=es,n.divIcon=yN,n.extend=t,n.featureGroup=fn,n.geoJSON=IT,n.geoJson=fN,n.gridLayer=wN,n.icon=si,n.imageOverlay=pN,n.latLng=Ee,n.latLngBounds=Le,n.layerGroup=rt,n.map=Ef,n.marker=cN,n.point=Z,n.polygon=hN,n.polyline=dN,n.popup=_N,n.rectangle=IN,n.setOptions=b,n.stamp=a,n.svg=PT,n.svgOverlay=gN,n.tileLayer=DT,n.tooltip=vN,n.transformation=kn,n.version=e,n.videoOverlay=mN;var TN=window.L;n.noConflict=function(){return window.L=TN,this},window.L=n})});function GT(n,e){return Object.is(n,e)}var sn=null,jf=!1,zf=1,lo=Symbol("SIGNAL");function at(n){let e=sn;return sn=n,e}function WT(){return sn}var Yu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Av(n){if(jf)throw new Error("");if(sn===null)return;sn.consumerOnSignalRead(n);let e=sn.nextProducerIndex++;if(Gf(sn),e<sn.producerNode.length&&sn.producerNode[e]!==n&&Qu(sn)){let t=sn.producerNode[e];qf(t,sn.producerIndexOfThis[e])}sn.producerNode[e]!==n&&(sn.producerNode[e]=n,sn.producerIndexOfThis[e]=Qu(sn)?YT(n,sn,e):0),sn.producerLastReadVersion[e]=n.version}function $N(){zf++}function KT(n){if(!(Qu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===zf)){if(!n.producerMustRecompute(n)&&!xv(n)){n.dirty=!1,n.lastCleanEpoch=zf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=zf}}function ZT(n){if(n.liveConsumerNode===void 0)return;let e=jf;jf=!0;try{for(let t of n.liveConsumerNode)t.dirty||HN(t)}finally{jf=e}}function QT(){return sn?.consumerAllowSignalWrites!==!1}function HN(n){n.dirty=!0,ZT(n),n.consumerMarkedDirty?.(n)}function Hf(n){return n&&(n.nextProducerIndex=0),at(n)}function Mv(n,e){if(at(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Qu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)qf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function xv(n){Gf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(KT(t),i!==t.version))return!0}return!1}function Pv(n){if(Gf(n),Qu(n))for(let e=0;e<n.producerNode.length;e++)qf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function YT(n,e,t){if(JT(n),n.liveConsumerNode.length===0&&XT(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=YT(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function qf(n,e){if(JT(n),n.liveConsumerNode.length===1&&XT(n))for(let i=0;i<n.producerNode.length;i++)qf(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Gf(r),r.producerIndexOfThis[i]=e}}function Qu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Gf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function JT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function XT(n){return n.producerNode!==void 0}function eS(n){let e=Object.create(qN);e.computation=n;let t=()=>{if(KT(e),Av(e),e.value===$f)throw e.error;return e.value};return t[lo]=e,t}var Sv=Symbol("UNSET"),Dv=Symbol("COMPUTING"),$f=Symbol("ERRORED"),qN=Oe(Y({},Yu),{value:Sv,dirty:!0,error:null,equal:GT,producerMustRecompute(n){return n.value===Sv||n.value===Dv},producerRecomputeValue(n){if(n.value===Dv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Dv;let t=Hf(n),i;try{i=n.computation()}catch(r){i=$f,n.error=r}finally{Mv(n,t)}if(e!==Sv&&e!==$f&&i!==$f&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function GN(){throw new Error}var tS=GN;function nS(){tS()}function iS(n){tS=n}var WN=null;function rS(n){let e=Object.create(sS);e.value=n;let t=()=>(Av(e),e.value);return t[lo]=e,t}function Rv(n,e){QT()||nS(),n.equal(n.value,e)||(n.value=e,KN(n))}function oS(n,e){QT()||nS(),Rv(n,e(n.value))}var sS=Oe(Y({},Yu),{equal:GT,value:void 0});function KN(n){n.version++,$N(),ZT(n),WN?.()}function Ve(n){return typeof n=="function"}function zc(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wf=zc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fa(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var zt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Ve(i))try{i()}catch(o){e=o instanceof Wf?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{aS(o)}catch(a){e=e??[],a instanceof Wf?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Wf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)aS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fa(t,e)}remove(e){let{_finalizers:t}=this;t&&fa(t,e),e instanceof n&&e._removeParent(this)}};zt.EMPTY=(()=>{let n=new zt;return n.closed=!0,n})();var Ov=zt.EMPTY;function Kf(n){return n instanceof zt||n&&"closed"in n&&Ve(n.remove)&&Ve(n.add)&&Ve(n.unsubscribe)}function aS(n){Ve(n)?n():n.unsubscribe()}var Ji={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $c={setTimeout(n,e,...t){let{delegate:i}=$c;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=$c;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zf(n){$c.setTimeout(()=>{let{onUnhandledError:e}=Ji;if(e)e(n);else throw n})}function Ju(){}var cS=kv("C",void 0,void 0);function lS(n){return kv("E",void 0,n)}function uS(n){return kv("N",n,void 0)}function kv(n,e,t){return{kind:n,value:e,error:t}}var pa=null;function Hc(n){if(Ji.useDeprecatedSynchronousErrorHandling){let e=!pa;if(e&&(pa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=pa;if(pa=null,t)throw i}}else n()}function dS(n){Ji.useDeprecatedSynchronousErrorHandling&&pa&&(pa.errorThrown=!0,pa.error=n)}var ma=class extends zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Kf(e)&&e.add(this)):this.destination=YN}static create(e,t,i){return new qc(e,t,i)}next(e){this.isStopped?Lv(uS(e),this):this._next(e)}error(e){this.isStopped?Lv(lS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Lv(cS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ZN=Function.prototype.bind;function Nv(n,e){return ZN.call(n,e)}var Fv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Qf(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Qf(i)}else Qf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Qf(t)}}},qc=class extends ma{constructor(e,t,i){super();let r;if(Ve(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Ji.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Nv(e.next,o),error:e.error&&Nv(e.error,o),complete:e.complete&&Nv(e.complete,o)}):r=e}this.destination=new Fv(r)}};function Qf(n){Ji.useDeprecatedSynchronousErrorHandling?dS(n):Zf(n)}function QN(n){throw n}function Lv(n,e){let{onStoppedNotification:t}=Ji;t&&$c.setTimeout(()=>t(n,e))}var YN={closed:!0,next:Ju,error:QN,complete:Ju};var Gc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ai(n){return n}function Vv(...n){return Bv(n)}function Bv(n){return n.length===0?ai:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var ze=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=XN(t)?t:new qc(t,i,r);return Hc(()=>{let{operator:a,source:l}=this;o.add(a?a.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=hS(i),new i((r,o)=>{let a=new qc({next:l=>{try{t(l)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Gc](){return this}pipe(...t){return Bv(t)(this)}toPromise(t){return t=hS(t),new t((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return n.create=e=>new n(e),n})();function hS(n){var e;return(e=n??Ji.Promise)!==null&&e!==void 0?e:Promise}function JN(n){return n&&Ve(n.next)&&Ve(n.error)&&Ve(n.complete)}function XN(n){return n&&n instanceof ma||JN(n)&&Kf(n)}function Uv(n){return Ve(n?.lift)}function ot(n){return e=>{if(Uv(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xe(n,e,t,i,r){return new jv(n,e,t,i,r)}var jv=class extends ma{constructor(e,t,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(l){try{t(l)}catch(u){e.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Wc(){return ot((n,e)=>{let t=null;n._refCount++;let i=Xe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Kc=class extends ze{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Uv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zt;let t=this.getSubject();e.add(this.source.subscribe(Xe(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zt.EMPTY)}return e}refCount(){return Wc()(this)}};var fS=zc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var mn=(()=>{class n extends ze{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Yf(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new fS}next(t){Hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Ov:(this.currentObservers=null,o.push(t),new zt(()=>{this.currentObservers=null,fa(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new ze;return t.source=this,t}}return n.create=(e,t)=>new Yf(e,t),n})(),Yf=class extends mn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:Ov}};var Gt=class extends mn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var zv={now(){return(zv.delegate||Date).now()},delegate:void 0};var Jf=class extends zt{constructor(e,t){super()}schedule(e,t=0){return this}};var Xu={setInterval(n,e,...t){let{delegate:i}=Xu;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Zc=class extends Jf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Xu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Xu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fa(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Qc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Qc.now=zv.now;var Yc=class extends Qc{constructor(e,t=Qc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var $v=new Yc(Zc);var Xf=class extends Zc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var ep=class extends Yc{};var Hv=new ep(Xf);var ci=new ze(n=>n.complete());function pS(n){return n&&Ve(n.schedule)}function mS(n){return n[n.length-1]}function tp(n){return Ve(mS(n))?n.pop():void 0}function rs(n){return pS(mS(n))?n.pop():void 0}function qv(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function _S(n,e,t,i){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(m){try{f(i.next(m))}catch(v){a(v)}}function u(m){try{f(i.throw(m))}catch(v){a(v)}}function f(m){m.done?o(m.value):r(m.value).then(l,u)}f((i=i.apply(n,e||[])).next())})}function gS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ga(n){return this instanceof ga?(this.v=n,this):new ga(n)}function vS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(b){return function(M){return Promise.resolve(M).then(b,v)}}function l(b,M){i[b]&&(r[b]=function(k){return new Promise(function(N,G){o.push([b,k,N,G])>1||u(b,k)})},M&&(r[b]=M(r[b])))}function u(b,M){try{f(i[b](M))}catch(k){E(o[0][3],k)}}function f(b){b.value instanceof ga?Promise.resolve(b.value.v).then(m,v):E(o[0][2],b)}function m(b){u("next",b)}function v(b){u("throw",b)}function E(b,M){b(M),o.shift(),o.length&&u(o[0][0],o[0][1])}}function yS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gS=="function"?gS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(a){return new Promise(function(l,u){a=n[o](a),r(l,u,a.done,a.value)})}}function r(o,a,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},a)}}var np=n=>n&&typeof n.length=="number"&&typeof n!="function";function ip(n){return Ve(n?.then)}function rp(n){return Ve(n[Gc])}function op(n){return Symbol.asyncIterator&&Ve(n?.[Symbol.asyncIterator])}function sp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ap=eL();function cp(n){return Ve(n?.[ap])}function lp(n){return vS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield ga(t.read());if(r)return yield ga(void 0);yield yield ga(i)}}finally{t.releaseLock()}})}function up(n){return Ve(n?.getReader)}function Zt(n){if(n instanceof ze)return n;if(n!=null){if(rp(n))return tL(n);if(np(n))return nL(n);if(ip(n))return iL(n);if(op(n))return wS(n);if(cp(n))return rL(n);if(up(n))return oL(n)}throw sp(n)}function tL(n){return new ze(e=>{let t=n[Gc]();if(Ve(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nL(n){return new ze(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function iL(n){return new ze(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Zf)})}function rL(n){return new ze(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function wS(n){return new ze(e=>{sL(n,e).catch(t=>e.error(t))})}function oL(n){return wS(lp(n))}function sL(n,e){var t,i,r,o;return _S(this,void 0,void 0,function*(){try{for(t=yS(n);i=yield t.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Wn(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function os(n,e=0){return ot((t,i)=>{t.subscribe(Xe(i,r=>Wn(i,n,()=>i.next(r),e),()=>Wn(i,n,()=>i.complete(),e),r=>Wn(i,n,()=>i.error(r),e)))})}function ss(n,e=0){return ot((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function bS(n,e){return Zt(n).pipe(ss(e),os(e))}function ES(n,e){return Zt(n).pipe(ss(e),os(e))}function IS(n,e){return new ze(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function CS(n,e){return new ze(t=>{let i;return Wn(t,e,()=>{i=n[ap](),Wn(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){t.error(a);return}o?t.complete():t.next(r)},0,!0)}),()=>Ve(i?.return)&&i.return()})}function dp(n,e){if(!n)throw new Error("Iterable cannot be null");return new ze(t=>{Wn(t,e,()=>{let i=n[Symbol.asyncIterator]();Wn(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function TS(n,e){return dp(lp(n),e)}function SS(n,e){if(n!=null){if(rp(n))return bS(n,e);if(np(n))return IS(n,e);if(ip(n))return ES(n,e);if(op(n))return dp(n,e);if(cp(n))return CS(n,e);if(up(n))return TS(n,e)}throw sp(n)}function xt(n,e){return e?SS(n,e):Zt(n)}function Se(...n){let e=rs(n);return xt(n,e)}function Jc(n,e){let t=Ve(n)?n:()=>n,i=r=>r.error(t());return new ze(e?r=>e.schedule(i,0,r):i)}function Gv(n){return!!n&&(n instanceof ze||Ve(n.lift)&&Ve(n.subscribe))}var Xi=zc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Wv(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=!1,a;n.subscribe({next:l=>{a=l,o=!0},error:r,complete:()=>{o?i(a):t?i(e.defaultValue):r(new Xi)}})})}function Me(n,e){return ot((t,i)=>{let r=0;t.subscribe(Xe(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:aL}=Array;function cL(n,e){return aL(e)?n(...e):n(e)}function hp(n){return Me(e=>cL(n,e))}var{isArray:lL}=Array,{getPrototypeOf:uL,prototype:dL,keys:hL}=Object;function fp(n){if(n.length===1){let e=n[0];if(lL(e))return{args:e,keys:null};if(fL(e)){let t=hL(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function fL(n){return n&&typeof n=="object"&&uL(n)===dL}function pp(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function ed(...n){let e=rs(n),t=tp(n),{args:i,keys:r}=fp(n);if(i.length===0)return xt([],e);let o=new ze(pL(i,e,r?a=>pp(r,a):ai));return t?o.pipe(hp(t)):o}function pL(n,e,t=ai){return i=>{DS(e,()=>{let{length:r}=n,o=new Array(r),a=r,l=r;for(let u=0;u<r;u++)DS(e,()=>{let f=xt(n[u],e),m=!1;f.subscribe(Xe(i,v=>{o[u]=v,m||(m=!0,l--),l||i.next(t(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function DS(n,e,t){n?Wn(t,n,e):e()}function AS(n,e,t,i,r,o,a,l){let u=[],f=0,m=0,v=!1,E=()=>{v&&!u.length&&!f&&e.complete()},b=k=>f<i?M(k):u.push(k),M=k=>{o&&e.next(k),f++;let N=!1;Zt(t(k,m++)).subscribe(Xe(e,G=>{r?.(G),o?b(G):e.next(G)},()=>{N=!0},void 0,()=>{if(N)try{for(f--;u.length&&f<i;){let G=u.shift();a?Wn(e,a,()=>M(G)):M(G)}E()}catch(G){e.error(G)}}))};return n.subscribe(Xe(e,b,()=>{v=!0,E()})),()=>{l?.()}}function Qt(n,e,t=1/0){return Ve(e)?Qt((i,r)=>Me((o,a)=>e(i,o,r,a))(Zt(n(i,r))),t):(typeof e=="number"&&(t=e),ot((i,r)=>AS(i,r,n,t)))}function Xc(n=1/0){return Qt(ai,n)}function MS(){return Xc(1)}function el(...n){return MS()(xt(n,rs(n)))}function mp(n){return new ze(e=>{Zt(n()).subscribe(e)})}function Kv(...n){let e=tp(n),{args:t,keys:i}=fp(n),r=new ze(o=>{let{length:a}=t;if(!a){o.complete();return}let l=new Array(a),u=a,f=a;for(let m=0;m<a;m++){let v=!1;Zt(t[m]).subscribe(Xe(o,E=>{v||(v=!0,f--),l[m]=E},()=>u--,void 0,()=>{(!u||!v)&&(f||o.next(i?pp(i,l):l),o.complete())}))}});return e?r.pipe(hp(e)):r}function Kn(n,e){return ot((t,i)=>{let r=0;t.subscribe(Xe(i,o=>n.call(e,o,r++)&&i.next(o)))})}function as(n){return ot((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Xe(t,void 0,void 0,a=>{o=Zt(n(a,as(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function xS(n,e,t,i,r){return(o,a)=>{let l=t,u=e,f=0;o.subscribe(Xe(a,m=>{let v=f++;u=l?n(u,m,v):(l=!0,m),i&&a.next(u)},r&&(()=>{l&&a.next(u),a.complete()})))}}function uo(n,e){return Ve(e)?Qt(n,e,1):Qt(n,1)}function cs(n){return ot((e,t)=>{let i=!1;e.subscribe(Xe(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function ho(n){return n<=0?()=>ci:ot((e,t)=>{let i=0;e.subscribe(Xe(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Zv(n){return Me(()=>n)}function gp(n=mL){return ot((e,t)=>{let i=!1;e.subscribe(Xe(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function mL(){return new Xi}function _a(n){return ot((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ir(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Kn((r,o)=>n(r,o,i)):ai,ho(1),t?cs(e):gp(()=>new Xi))}function tl(n){return n<=0?()=>ci:ot((e,t)=>{let i=[];e.subscribe(Xe(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Qv(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Kn((r,o)=>n(r,o,i)):ai,tl(1),t?cs(e):gp(()=>new Xi))}function Yv(n,e){return ot(xS(n,e,arguments.length>=2,!0))}function Jv(...n){let e=rs(n);return ot((t,i)=>{(e?el(n,t,e):el(n,t)).subscribe(i)})}function Zn(n,e){return ot((t,i)=>{let r=null,o=0,a=!1,l=()=>a&&!r&&i.complete();t.subscribe(Xe(i,u=>{r?.unsubscribe();let f=0,m=o++;Zt(n(u,m)).subscribe(r=Xe(i,v=>i.next(e?e(u,v,m,f++):v),()=>{r=null,l()}))},()=>{a=!0,l()}))})}function Xv(n){return ot((e,t)=>{Zt(n).subscribe(Xe(t,()=>t.complete(),Ju)),!t.closed&&e.subscribe(t)})}function Yt(n,e,t){let i=Ve(n)||e||t?{next:n,error:e,complete:t}:n;return i?ot((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let l=!0;r.subscribe(Xe(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;l=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;l=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;l&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):ai}var gD="https://g.co/ng/security#xss",ee=class extends Error{constructor(e,t){super(Jp(e,t)),this.code=e}};function Jp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ld(n){return{toString:n}.toString()}var _p="__parameters__";function gL(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function _D(n,e,t){return ld(()=>{let i=gL(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return l.annotation=a,l;function l(u,f,m){let v=u.hasOwnProperty(_p)?u[_p]:Object.defineProperty(u,_p,{value:[]})[_p];for(;v.length<=m;)v.push(null);return(v[m]=v[m]||[]).push(a),u}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var ya=globalThis;function It(n){for(let e in n)if(n[e]===It)return e;throw Error("Could not find renamed property on target object.")}function _L(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Bn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function PS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var vL=It({__forward_ref__:It});function _o(n){return n.__forward_ref__=_o,n.toString=function(){return Bn(this())},n}function Vn(n){return vD(n)?n():n}function vD(n){return typeof n=="function"&&n.hasOwnProperty(vL)&&n.__forward_ref__===_o}function le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xp(n){return RS(n,wD)||RS(n,bD)}function yD(n){return Xp(n)!==null}function RS(n,e){return n.hasOwnProperty(e)?n[e]:null}function yL(n){let e=n&&(n[wD]||n[bD]);return e||null}function OS(n){return n&&(n.hasOwnProperty(kS)||n.hasOwnProperty(wL))?n[kS]:null}var wD=It({\u0275prov:It}),kS=It({\u0275inj:It}),bD=It({ngInjectableDef:It}),wL=It({ngInjectorDef:It}),de=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ED(n){return n&&!!n.\u0275providers}var bL=It({\u0275cmp:It}),EL=It({\u0275dir:It}),IL=It({\u0275pipe:It}),CL=It({\u0275mod:It}),Ap=It({\u0275fac:It}),nd=It({__NG_ELEMENT_ID__:It}),NS=It({__NG_ENV_ID__:It});function cl(n){return typeof n=="string"?n:n==null?"":String(n)}function TL(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():cl(n)}function SL(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ee(-200,n)}function d0(n,e){throw new ee(-201,!1)}var We=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(We||{}),py;function ID(){return py}function Qn(n){let e=py;return py=n,e}function CD(n,e,t){let i=Xp(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&We.Optional)return null;if(e!==void 0)return e;d0(n,"Injector")}var DL={},id=DL,my="__NG_DI_FLAG__",Mp="ngTempTokenPath",AL="ngTokenPath",ML=/\n/gm,xL="\u0275",LS="__source",sl;function PL(){return sl}function ls(n){let e=sl;return sl=n,e}function RL(n,e=We.Default){if(sl===void 0)throw new ee(-203,!1);return sl===null?CD(n,void 0,e):sl.get(n,e&We.Optional?null:void 0,e)}function ge(n,e=We.Default){return(ID()||RL)(Vn(n),e)}function Q(n,e=We.Default){return ge(n,em(e))}function em(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function gy(n){let e=[];for(let t=0;t<n.length;t++){let i=Vn(n[t]);if(Array.isArray(i)){if(i.length===0)throw new ee(900,!1);let r,o=We.Default;for(let a=0;a<i.length;a++){let l=i[a],u=OL(l);typeof u=="number"?u===-1?r=l.token:o|=u:r=l}e.push(ge(r,o))}else e.push(ge(i))}return e}function TD(n,e){return n[my]=e,n.prototype[my]=e,n}function OL(n){return n[my]}function kL(n,e,t,i){let r=n[Mp];throw e[LS]&&r.unshift(e[LS]),n.message=NL(`
`+n.message,r,t,i),n[AL]=r,n[Mp]=null,n}function NL(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==xL?n.slice(2):n;let r=Bn(e);if(Array.isArray(e))r=e.map(Bn).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let l=e[a];o.push(a+":"+(typeof l=="string"?JSON.stringify(l):Bn(l)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(ML,`
  `)}`}var Mn=TD(_D("Optional"),8);var h0=TD(_D("SkipSelf"),4);function ba(n,e){let t=n.hasOwnProperty(Ap);return t?n[Ap]:null}function LL(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function FL(n){return n.flat(Number.POSITIVE_INFINITY)}function f0(n,e){n.forEach(t=>Array.isArray(t)?f0(t,e):e(t))}function SD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function xp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function VL(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function BL(n,e,t){let i=ud(n,e);return i>=0?n[i|1]=t:(i=~i,VL(n,i,e,t)),i}function ey(n,e){let t=ud(n,e);if(t>=0)return n[t|1]}function ud(n,e){return UL(n,e,1)}function UL(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),a=n[o<<t];if(e===a)return o<<t;a>e?r=o:i=o+1}return~(r<<t)}var ll={},Pi=[],ul=new de(""),DD=new de("",-1),AD=new de(""),Pp=class{get(e,t=id){if(t===id){let i=new Error(`NullInjectorError: No provider for ${Bn(e)}!`);throw i.name="NullInjectorError",i}return t}},MD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(MD||{}),Sr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Sr||{}),hs=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(hs||{});function jL(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function _y(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],a=t[i++],l=t[i++];n.setAttribute(e,a,l,o)}else{let o=r,a=t[++i];zL(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),i++}}return i}function xD(n){return n===3||n===4||n===6}function zL(n){return n.charCodeAt(0)===64}function rd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?FS(n,t,r,null,e[++i]):FS(n,t,r,null,null))}}return n}function FS(n,e,t,i,r){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let l=n[o++];if(typeof l=="number"){if(l===e){a=-1;break}else if(l>e){a=o-1;break}}}for(;o<n.length;){let l=n[o];if(typeof l=="number")break;if(l===t){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var PD="ng-template";function $L(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&jL(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(p0(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function p0(n){return n.type===4&&n.value!==PD}function HL(n,e,t){let i=n.type===4&&!t?PD:n.value;return e===i}function qL(n,e,t){let i=4,r=n.attrs,o=r!==null?KL(r):0,a=!1;for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="number"){if(!a&&!er(i)&&!er(u))return!1;if(a&&er(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!HL(n,u,t)||u===""&&e.length===1){if(er(i))return!1;a=!0}}else if(i&8){if(r===null||!$L(n,r,u,t)){if(er(i))return!1;a=!0}}else{let f=e[++l],m=GL(u,r,p0(n),t);if(m===-1){if(er(i))return!1;a=!0;continue}if(f!==""){let v;if(m>o?v="":v=r[m+1].toLowerCase(),i&2&&f!==v){if(er(i))return!1;a=!0}}}}return er(i)||a}function er(n){return(n&1)===0}function GL(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let a=e[r];if(a===n)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return ZL(e,n)}function WL(n,e,t=!1){for(let i=0;i<e.length;i++)if(qL(n,e[i],t))return!0;return!1}function KL(n){for(let e=0;e<n.length;e++){let t=n[e];if(xD(t))return e}return n.length}function ZL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function VS(n,e){return n?":not("+e.trim()+")":e}function QL(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(i&2){let l=n[++t];r+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!er(a)&&(e+=VS(o,r),r=""),i=a,o=o||!er(i);t++}return r!==""&&(e+=VS(o,r)),e}function YL(n){return n.map(QL).join(",")}function JL(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!er(r))break;r=o}i++}return{attrs:e,classes:t}}function _t(n){return ld(()=>{let e=LD(n),t=Oe(Y({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===MD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Sr.Emulated,styles:n.styles||Pi,_:null,schemas:n.schemas||null,tView:null,id:""});FD(t);let i=n.dependencies;return t.directiveDefs=US(i,!1),t.pipeDefs=US(i,!0),t.id=t2(t),t})}function XL(n){return fs(n)||RD(n)}function e2(n){return n!==null}function Pr(n){return ld(()=>({type:n.type,bootstrap:n.bootstrap||Pi,declarations:n.declarations||Pi,imports:n.imports||Pi,exports:n.exports||Pi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function BS(n,e){if(n==null)return ll;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,a,l=hs.None;Array.isArray(r)?(l=r[0],o=r[1],a=r[2]??o):(o=r,a=r),e?(t[o]=l!==hs.None?[i,l]:i,e[o]=a):t[o]=i}return t}function Tn(n){return ld(()=>{let e=LD(n);return FD(e),e})}function m0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function fs(n){return n[bL]||null}function RD(n){return n[EL]||null}function OD(n){return n[IL]||null}function kD(n){let e=fs(n)||RD(n)||OD(n);return e!==null?e.standalone:!1}function ND(n,e){let t=n[CL]||null;if(!t&&e===!0)throw new Error(`Type ${Bn(n)} does not have '\u0275mod' property.`);return t}function LD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ll,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Pi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:BS(n.inputs,e),outputs:BS(n.outputs),debugInfo:null}}function FD(n){n.features?.forEach(e=>e(n))}function US(n,e){if(!n)return null;let t=e?OD:XL;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(e2)}function t2(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rr(n){return{\u0275providers:n}}function n2(...n){return{\u0275providers:VD(!0,n),\u0275fromNgModule:!0}}function VD(n,...e){let t=[],i=new Set,r,o=a=>{t.push(a)};return f0(e,a=>{let l=a;vy(l,o,[],i)&&(r||=[],r.push(l))}),r!==void 0&&BD(r,o),t}function BD(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];g0(r,o=>{e(o,i)})}}function vy(n,e,t,i){if(n=Vn(n),!n)return!1;let r=null,o=OS(n),a=!o&&fs(n);if(!o&&!a){let u=n.ngModule;if(o=OS(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=n}let l=i.has(r);if(a){if(l)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)vy(f,e,t,i)}}else if(o){if(o.imports!=null&&!l){i.add(r);let f;try{f0(o.imports,m=>{vy(m,e,t,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&BD(f,e)}if(!l){let f=ba(r)||(()=>new r);e({provide:r,useFactory:f,deps:Pi},r),e({provide:AD,useValue:r,multi:!0},r),e({provide:ul,useValue:()=>ge(r),multi:!0},r)}let u=o.providers;if(u!=null&&!l){let f=n;g0(u,m=>{e(m,f)})}}else return!1;return r!==n&&n.providers!==void 0}function g0(n,e){for(let t of n)ED(t)&&(t=t.\u0275providers),Array.isArray(t)?g0(t,e):e(t)}var i2=It({provide:String,useValue:It});function UD(n){return n!==null&&typeof n=="object"&&i2 in n}function r2(n){return!!(n&&n.useExisting)}function o2(n){return!!(n&&n.useFactory)}function dl(n){return typeof n=="function"}function s2(n){return!!n.useClass}var tm=new de(""),Ep={},a2={},ty;function _0(){return ty===void 0&&(ty=new Pp),ty}var Un=class{},od=class extends Un{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wy(e,a=>this.processProvider(a)),this.records.set(DD,nl(void 0,this)),r.has("environment")&&this.records.set(Un,nl(void 0,this));let o=this.records.get(tm);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(AD,Pi,We.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=at(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),at(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=ls(this),i=Qn(void 0),r;try{return e()}finally{ls(t),Qn(i)}}get(e,t=id,i=We.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(NS))return e[NS](this);i=em(i);let r,o=ls(this),a=Qn(void 0);try{if(!(i&We.SkipSelf)){let u=this.records.get(e);if(u===void 0){let f=h2(e)&&Xp(e);f&&this.injectableDefInScope(f)?u=nl(yy(e),Ep):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let l=i&We.Self?_0():this.parent;return t=i&We.Optional&&t===id?null:t,l.get(e,t)}catch(l){if(l.name==="NullInjectorError"){if((l[Mp]=l[Mp]||[]).unshift(Bn(e)),o)throw l;return kL(l,e,"R3InjectorError",this.source)}else throw l}finally{Qn(a),ls(o)}}resolveInjectorInitializers(){let e=at(null),t=ls(this),i=Qn(void 0),r;try{let o=this.get(ul,Pi,We.Self);for(let a of o)a()}finally{ls(t),Qn(i),at(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Bn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=Vn(e);let t=dl(e)?e:Vn(e&&e.provide),i=l2(e);if(!dl(e)&&e.multi===!0){let r=this.records.get(t);r||(r=nl(void 0,Ep,!0),r.factory=()=>gy(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=at(null);try{return t.value===Ep&&(t.value=a2,t.value=t.factory()),typeof t.value=="object"&&t.value&&d2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{at(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Vn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yy(n){let e=Xp(n),t=e!==null?e.factory:ba(n);if(t!==null)return t;if(n instanceof de)throw new ee(204,!1);if(n instanceof Function)return c2(n);throw new ee(204,!1)}function c2(n){if(n.length>0)throw new ee(204,!1);let t=yL(n);return t!==null?()=>t.factory(n):()=>new n}function l2(n){if(UD(n))return nl(void 0,n.useValue);{let e=jD(n);return nl(e,Ep)}}function jD(n,e,t){let i;if(dl(n)){let r=Vn(n);return ba(r)||yy(r)}else if(UD(n))i=()=>Vn(n.useValue);else if(o2(n))i=()=>n.useFactory(...gy(n.deps||[]));else if(r2(n))i=()=>ge(Vn(n.useExisting));else{let r=Vn(n&&(n.useClass||n.provide));if(u2(n))i=()=>new r(...gy(n.deps));else return ba(r)||yy(r)}return i}function nl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function u2(n){return!!n.deps}function d2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function h2(n){return typeof n=="function"||typeof n=="object"&&n instanceof de}function wy(n,e){for(let t of n)Array.isArray(t)?wy(t,e):t&&ED(t)?wy(t.\u0275providers,e):e(t)}function Oi(n,e){n instanceof od&&n.assertNotDestroyed();let t,i=ls(n),r=Qn(void 0);try{return e()}finally{ls(i),Qn(r)}}function zD(){return ID()!==void 0||PL()!=null}function f2(n){if(!zD())throw new ee(-203,!1)}function p2(n){return typeof n=="function"}var vo=0,$e=1,xe=2,An=3,tr=4,or=5,Rp=6,Op=7,nr=8,hl=9,Dr=10,an=11,sd=12,jS=13,vl=14,Ar=15,Ea=16,il=17,fo=18,nm=19,$D=20,us=21,ny=22,Ri=23,ir=25,HD=1;var Ia=7,kp=8,fl=9,li=10,Np=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Np||{});function ds(n){return Array.isArray(n)&&typeof n[HD]=="object"}function yo(n){return Array.isArray(n)&&n[HD]===!0}function qD(n){return(n.flags&4)!==0}function im(n){return n.componentOffset>-1}function v0(n){return(n.flags&1)===1}function ps(n){return!!n.template}function by(n){return(n[xe]&512)!==0}var Ey=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function GD(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function ki(){return WD}function WD(n){return n.type.prototype.ngOnChanges&&(n.setInput=g2),m2}ki.ngInherit=!0;function m2(){let n=ZD(this),e=n?.current;if(e){let t=n.previous;if(t===ll)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function g2(n,e,t,i,r){let o=this.declaredInputs[i],a=ZD(n)||_2(n,{previous:ll,current:null}),l=a.current||(a.current={}),u=a.previous,f=u[o];l[o]=new Ey(f&&f.currentValue,t,u===ll),GD(n,e,r,t)}var KD="__ngSimpleChanges__";function ZD(n){return n[KD]||null}function _2(n,e){return n[KD]=e}var zS=null;var Cr=function(n,e,t){zS?.(n,e,t)},QD="svg",v2="math";function Mr(n){for(;Array.isArray(n);)n=n[vo];return n}function YD(n,e){return Mr(e[n])}function Ni(n,e){return Mr(e[n.index])}function JD(n,e){return n.data[e]}function XD(n,e){return n[e]}function _s(n,e){let t=e[n];return ds(t)?t:t[vo]}function y2(n){return(n[xe]&4)===4}function y0(n){return(n[xe]&128)===128}function w2(n){return yo(n[An])}function Lp(n,e){return e==null?null:n[e]}function e1(n){n[il]=0}function t1(n){n[xe]&1024||(n[xe]|=1024,y0(n)&&om(n))}function b2(n,e){for(;n>0;)e=e[vl],n--;return e}function rm(n){return!!(n[xe]&9216||n[Ri]?.dirty)}function Iy(n){n[Dr].changeDetectionScheduler?.notify(8),n[xe]&64&&(n[xe]|=1024),rm(n)&&om(n)}function om(n){n[Dr].changeDetectionScheduler?.notify(0);let e=Ca(n);for(;e!==null&&!(e[xe]&8192||(e[xe]|=8192,!y0(e)));)e=Ca(e)}function n1(n,e){if((n[xe]&256)===256)throw new ee(911,!1);n[us]===null&&(n[us]=[]),n[us].push(e)}function E2(n,e){if(n[us]===null)return;let t=n[us].indexOf(e);t!==-1&&n[us].splice(t,1)}function Ca(n){let e=n[An];return yo(e)?e[An]:e}var Be={lFrame:f1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var i1=!1;function I2(){return Be.lFrame.elementDepthCount}function C2(){Be.lFrame.elementDepthCount++}function T2(){Be.lFrame.elementDepthCount--}function r1(){return Be.bindingsEnabled}function S2(){return Be.skipHydrationRootTNode!==null}function D2(n){return Be.skipHydrationRootTNode===n}function A2(){Be.skipHydrationRootTNode=null}function ut(){return Be.lFrame.lView}function xn(){return Be.lFrame.tView}function ye(n){return Be.lFrame.contextLView=n,n[nr]}function we(n){return Be.lFrame.contextLView=null,n}function jn(){let n=o1();for(;n!==null&&n.type===64;)n=n.parent;return n}function o1(){return Be.lFrame.currentTNode}function M2(){let n=Be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function dd(n,e){let t=Be.lFrame;t.currentTNode=n,t.isParent=e}function s1(){return Be.lFrame.isParent}function x2(){Be.lFrame.isParent=!1}function P2(){return Be.lFrame.contextLView}function a1(){return i1}function $S(n){i1=n}function c1(){let n=Be.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function R2(){return Be.lFrame.bindingIndex}function O2(n){return Be.lFrame.bindingIndex=n}function sm(){return Be.lFrame.bindingIndex++}function l1(n){let e=Be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function k2(){return Be.lFrame.inI18n}function N2(n,e){let t=Be.lFrame;t.bindingIndex=t.bindingRootIndex=n,Cy(e)}function L2(){return Be.lFrame.currentDirectiveIndex}function Cy(n){Be.lFrame.currentDirectiveIndex=n}function F2(n){let e=Be.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function u1(){return Be.lFrame.currentQueryIndex}function w0(n){Be.lFrame.currentQueryIndex=n}function V2(n){let e=n[$e];return e.type===2?e.declTNode:e.type===1?n[or]:null}function d1(n,e,t){if(t&We.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&We.Host);)if(r=V2(o),r===null||(o=o[vl],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Be.lFrame=h1();return i.currentTNode=e,i.lView=n,!0}function b0(n){let e=h1(),t=n[$e];Be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function h1(){let n=Be.lFrame,e=n===null?null:n.child;return e===null?f1(n):e}function f1(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function p1(){let n=Be.lFrame;return Be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var m1=p1;function E0(){let n=p1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function B2(n){return(Be.lFrame.contextLView=b2(n,Be.lFrame.contextLView))[nr]}function Oa(){return Be.lFrame.selectedIndex}function Ta(n){Be.lFrame.selectedIndex=n}function I0(){let n=Be.lFrame;return JD(n.tView,n.selectedIndex)}function Te(){Be.lFrame.currentNamespace=QD}function Ue(){U2()}function U2(){Be.lFrame.currentNamespace=null}function j2(){return Be.lFrame.currentNamespace}var g1=!0;function C0(){return g1}function T0(n){g1=n}function z2(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=WD(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function S0(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:m}=o;a&&(n.contentHooks??=[]).push(-t,a),l&&((n.contentHooks??=[]).push(t,l),(n.contentCheckHooks??=[]).push(t,l)),u&&(n.viewHooks??=[]).push(-t,u),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),m!=null&&(n.destroyHooks??=[]).push(t,m)}}function Ip(n,e,t){_1(n,e,3,t)}function Cp(n,e,t,i){(n[xe]&3)===t&&_1(n,e,t,i)}function iy(n,e){let t=n[xe];(t&3)===e&&(t&=16383,t+=1,n[xe]=t)}function _1(n,e,t,i){let r=i!==void 0?n[il]&65535:0,o=i??-1,a=e.length-1,l=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(l=e[u],i!=null&&l>=i)break}else e[u]<0&&(n[il]+=65536),(l<o||o==-1)&&($2(n,t,e,u),n[il]=(n[il]&4294901760)+u+2),u++}function HS(n,e){Cr(4,n,e);let t=at(null);try{e.call(n)}finally{at(t),Cr(5,n,e)}}function $2(n,e,t,i){let r=t[i]<0,o=t[i+1],a=r?-t[i]:t[i],l=n[a];r?n[xe]>>14<n[il]>>16&&(n[xe]&3)===e&&(n[xe]+=16384,HS(l,o)):HS(l,o)}var al=-1,Sa=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function H2(n){return n instanceof Sa}function q2(n){return(n.flags&8)!==0}function G2(n){return(n.flags&16)!==0}var ry={},Ty=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=em(i);let r=this.injector.get(e,ry,i);return r!==ry||t===ry?r:this.parentInjector.get(e,t,i)}};function v1(n){return n!==al}function Fp(n){return n&32767}function W2(n){return n>>16}function Vp(n,e){let t=W2(n),i=e;for(;t>0;)i=i[vl],t--;return i}var Sy=!0;function Bp(n){let e=Sy;return Sy=n,e}var K2=256,y1=K2-1,w1=5,Z2=0,Tr={};function Q2(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(nd)&&(i=t[nd]),i==null&&(i=t[nd]=Z2++);let r=i&y1,o=1<<r;e.data[n+(r>>w1)]|=o}function Up(n,e){let t=b1(n,e);if(t!==-1)return t;let i=e[$e];i.firstCreatePass&&(n.injectorIndex=e.length,oy(i.data,n),oy(e,null),oy(i.blueprint,null));let r=D0(n,e),o=n.injectorIndex;if(v1(r)){let a=Fp(r),l=Vp(r,e),u=l[$e].data;for(let f=0;f<8;f++)e[o+f]=l[a+f]|u[a+f]}return e[o+8]=r,o}function oy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function b1(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function D0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=S1(r),i===null)return al;if(t++,r=r[vl],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return al}function Dy(n,e,t){Q2(n,e,t)}function Y2(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(xD(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function E1(n,e,t){if(t&We.Optional||n!==void 0)return n;d0(e,"NodeInjector")}function I1(n,e,t,i){if(t&We.Optional&&i===void 0&&(i=null),!(t&(We.Self|We.Host))){let r=n[hl],o=Qn(void 0);try{return r?r.get(e,i,t&We.Optional):CD(e,i,t&We.Optional)}finally{Qn(o)}}return E1(i,e,t)}function C1(n,e,t,i=We.Default,r){if(n!==null){if(e[xe]&2048&&!(i&We.Self)){let a=tF(n,e,t,i,Tr);if(a!==Tr)return a}let o=T1(n,e,t,i,Tr);if(o!==Tr)return o}return I1(e,t,i,r)}function T1(n,e,t,i,r){let o=X2(t);if(typeof o=="function"){if(!d1(e,n,i))return i&We.Host?E1(r,t,i):I1(e,t,i,r);try{let a;if(a=o(i),a==null&&!(i&We.Optional))d0(t);else return a}finally{m1()}}else if(typeof o=="number"){let a=null,l=b1(n,e),u=al,f=i&We.Host?e[Ar][or]:null;for((l===-1||i&We.SkipSelf)&&(u=l===-1?D0(n,e):e[l+8],u===al||!GS(i,!1)?l=-1:(a=e[$e],l=Fp(u),e=Vp(u,e)));l!==-1;){let m=e[$e];if(qS(o,l,m.data)){let v=J2(l,e,t,a,i,f);if(v!==Tr)return v}u=e[l+8],u!==al&&GS(i,e[$e].data[l+8]===f)&&qS(o,l,e)?(a=m,l=Fp(u),e=Vp(u,e)):l=-1}}return r}function J2(n,e,t,i,r,o){let a=e[$e],l=a.data[n+8],u=i==null?im(l)&&Sy:i!=a&&(l.type&3)!==0,f=r&We.Host&&o===l,m=Tp(l,a,t,u,f);return m!==null?Da(e,a,m,l):Tr}function Tp(n,e,t,i,r){let o=n.providerIndexes,a=e.data,l=o&1048575,u=n.directiveStart,f=n.directiveEnd,m=o>>20,v=i?l:l+m,E=r?l+m:f;for(let b=v;b<E;b++){let M=a[b];if(b<u&&t===M||b>=u&&M.type===t)return b}if(r){let b=a[u];if(b&&ps(b)&&b.type===t)return u}return null}function Da(n,e,t,i){let r=n[t],o=e.data;if(H2(r)){let a=r;a.resolving&&SL(TL(o[t]));let l=Bp(a.canSeeViewProviders);a.resolving=!0;let u,f=a.injectImpl?Qn(a.injectImpl):null,m=d1(n,i,We.Default);try{r=n[t]=a.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&z2(t,o[t],e)}finally{f!==null&&Qn(f),Bp(l),a.resolving=!1,m1()}}return r}function X2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(nd)?n[nd]:void 0;return typeof e=="number"?e>=0?e&y1:eF:e}function qS(n,e,t){let i=1<<n;return!!(t[e+(n>>w1)]&i)}function GS(n,e){return!(n&We.Self)&&!(n&We.Host&&e)}var wa=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return C1(this._tNode,this._lView,e,em(i),t)}};function eF(){return new wa(jn(),ut())}function wo(n){return ld(()=>{let e=n.prototype.constructor,t=e[Ap]||Ay(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Ap]||Ay(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Ay(n){return vD(n)?()=>{let e=Ay(Vn(n));return e&&e()}:ba(n)}function tF(n,e,t,i,r){let o=n,a=e;for(;o!==null&&a!==null&&a[xe]&2048&&!(a[xe]&512);){let l=T1(o,a,t,i|We.Self,Tr);if(l!==Tr)return l;let u=o.parent;if(!u){let f=a[$D];if(f){let m=f.get(t,Tr,i);if(m!==Tr)return m}u=S1(a),a=a[vl]}o=u}return r}function S1(n){let e=n[$e],t=e.type;return t===2?e.declTNode:t===1?n[or]:null}function A0(n){return Y2(jn(),n)}function WS(n,e=null,t=null,i){let r=D1(n,e,t,i);return r.resolveInjectorInitializers(),r}function D1(n,e=null,t=null,i,r=new Set){let o=[t||Pi,n2(n)];return i=i||(typeof n=="object"?void 0:Bn(n)),new od(o,e||_0(),i||null,r)}var Cn=class n{static{this.THROW_IF_NOT_FOUND=id}static{this.NULL=new Pp}static create(e,t){if(Array.isArray(e))return WS({name:""},t,e,"");{let i=e.name??"";return WS({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=le({token:n,providedIn:"any",factory:()=>ge(DD)})}static{this.__NG_ELEMENT_ID__=-1}};var nF=new de("");nF.__NG_ELEMENT_ID__=n=>{let e=jn();if(e===null)throw new ee(204,!1);if(e.type&2)return e.value;if(n&We.Optional)return null;throw new ee(204,!1)};var iF="ngOriginalError";function sy(n){return n[iF]}var A1=!0,M0=(()=>{class n{static{this.__NG_ELEMENT_ID__=rF}static{this.__NG_ENV_ID__=t=>t}}return n})(),My=class extends M0{constructor(e){super(),this._lView=e}onDestroy(e){return n1(this._lView,e),()=>E2(this._lView,e)}};function rF(){return new My(ut())}var vs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Gt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}}return n})();var xy=class extends mn{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,zD()&&(this.destroyRef=Q(M0,{optional:!0})??void 0,this.pendingTasks=Q(vs,{optional:!0})??void 0)}emit(e){let t=at(null);try{super.next(e)}finally{at(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let l=super.subscribe({next:r,error:o,complete:a});return e instanceof zt&&e.add(l),l}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},Qe=xy;function jp(...n){}function M1(n){let e,t;function i(){n=jp;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function KS(n){return queueMicrotask(()=>n()),()=>{n=jp}}var x0="isAngularZone",zp=x0+"_ID",oF=0,ct=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qe(!1),this.onMicrotaskEmpty=new Qe(!1),this.onStable=new Qe(!1),this.onError=new Qe(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=A1}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=o,cF(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(x0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,sF,jp,jp);try{return o.runTask(a,t,i)}finally{o.cancelTask(a)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},sF={};function P0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function aF(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){M1(()=>{n.callbackScheduled=!1,Py(n),n.isCheckStableRunning=!0,P0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Py(n)}function cF(n){let e=()=>{aF(n)},t=oF++;n._inner=n._inner.fork({name:"angular",properties:{[x0]:!0,[zp]:t,[zp+t]:!0},onInvokeTask:(i,r,o,a,l,u)=>{if(lF(u))return i.invokeTask(o,a,l,u);try{return ZS(n),i.invokeTask(o,a,l,u)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),QS(n)}},onInvoke:(i,r,o,a,l,u,f)=>{try{return ZS(n),i.invoke(o,a,l,u,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uF(u)&&e(),QS(n)}},onHasTask:(i,r,o,a)=>{i.hasTask(o,a),r===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,Py(n),P0(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,o,a)=>(i.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function Py(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ZS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function QS(n){n._nesting--,P0(n)}var Ry=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qe,this.onMicrotaskEmpty=new Qe,this.onStable=new Qe,this.onError=new Qe}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function lF(n){return x1(n,"__ignore_ng_zone__")}function uF(n){return x1(n,"__scheduler_tick__")}function x1(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var po=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&sy(e);for(;t&&sy(t);)t=sy(t);return t||null}},dF=new de("",{providedIn:"root",factory:()=>{let n=Q(ct),e=Q(po);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function hF(){return yl(jn(),ut())}function yl(n,e){return new sr(Ni(n,e))}var sr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=hF}}return n})();function fF(n){return n instanceof sr?n.nativeElement:n}function pF(){return this._results[Symbol.iterator]()}var Oy=class n{get changes(){return this._changes??=new Qe}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=pF)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=FL(e);(this._changesDetected=!LL(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function P1(n){return(n.flags&128)===128}var R1=new Map,mF=0;function gF(){return mF++}function _F(n){R1.set(n[nm],n)}function ky(n){R1.delete(n[nm])}var YS="__ngContext__";function Aa(n,e){ds(e)?(n[YS]=e[nm],_F(e)):n[YS]=e}function O1(n){return N1(n[sd])}function k1(n){return N1(n[tr])}function N1(n){for(;n!==null&&!yo(n);)n=n[tr];return n}var Ny;function L1(n){Ny=n}function vF(){if(Ny!==void 0)return Ny;if(typeof document<"u")return document;throw new ee(210,!1)}var R0=new de("",{providedIn:"root",factory:()=>yF}),yF="ng",O0=new de(""),Li=new de("",{providedIn:"platform",factory:()=>"unknown"});var k0=new de(""),N0=new de("",{providedIn:"root",factory:()=>vF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var wF="h",bF="b";var EF=()=>null;function L0(n,e,t=!1){return EF(n,e,t)}var F1=!1,IF=new de("",{providedIn:"root",factory:()=>F1});var vp;function CF(){if(vp===void 0&&(vp=null,ya.trustedTypes))try{vp=ya.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return vp}function JS(n){return CF()?.createScriptURL(n)||n}var $p=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gD})`}};function hd(n){return n instanceof $p?n.changingThisBreaksApplicationSecurity:n}function F0(n,e){let t=TF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gD})`)}return t===e}function TF(n){return n instanceof $p&&n.getTypeName()||null}var SF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function V1(n){return n=String(n),n.match(SF)?n:"unsafe:"+n}var am=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(am||{});function ar(n){let e=U1();return e?e.sanitize(am.URL,n)||"":F0(n,"URL")?hd(n):V1(cl(n))}function DF(n){let e=U1();if(e)return JS(e.sanitize(am.RESOURCE_URL,n)||"");if(F0(n,"ResourceURL"))return JS(hd(n));throw new ee(904,!1)}function AF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?DF:ar}function B1(n,e,t){return AF(e,t)(n)}function U1(){let n=ut();return n&&n[Dr].sanitizer}function j1(n){return n instanceof Function?n():n}function MF(n){return(n??Q(Cn)).get(Li)==="browser"}var mo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(mo||{}),xF;function V0(n,e){return xF(n,e)}function rl(n,e,t,i,r){if(i!=null){let o,a=!1;yo(i)?o=i:ds(i)&&(a=!0,i=i[vo]);let l=Mr(i);n===0&&t!==null?r==null?G1(e,t,l):Hp(e,t,l,r||null,!0):n===1&&t!==null?Hp(e,t,l,r||null,!0):n===2?qF(e,l,a):n===3&&e.destroyNode(l),o!=null&&WF(e,n,o,t,r)}}function PF(n,e){return n.createText(e)}function RF(n,e,t){n.setValue(e,t)}function z1(n,e,t){return n.createElement(e,t)}function OF(n,e){$1(n,e),e[vo]=null,e[or]=null}function kF(n,e,t,i,r,o){i[vo]=r,i[or]=e,cm(n,i,t,1,r,o)}function $1(n,e){e[Dr].changeDetectionScheduler?.notify(9),cm(n,e,e[an],2,null,null)}function NF(n){let e=n[sd];if(!e)return ay(n[$e],n);for(;e;){let t=null;if(ds(e))t=e[sd];else{let i=e[li];i&&(t=i)}if(!t){for(;e&&!e[tr]&&e!==n;)ds(e)&&ay(e[$e],e),e=e[An];e===null&&(e=n),ds(e)&&ay(e[$e],e),t=e&&e[tr]}e=t}}function LF(n,e,t,i){let r=li+i,o=t.length;i>0&&(t[r-1][tr]=e),i<o-li?(e[tr]=t[r],SD(t,li+i,e)):(t.push(e),e[tr]=null),e[An]=t;let a=e[Ea];a!==null&&t!==a&&H1(a,e);let l=e[fo];l!==null&&l.insertView(n),Iy(e),e[xe]|=128}function H1(n,e){let t=n[fl],i=e[An];if(ds(i))n[xe]|=Np.HasTransplantedViews;else{let r=i[An][Ar];e[Ar]!==r&&(n[xe]|=Np.HasTransplantedViews)}t===null?n[fl]=[e]:t.push(e)}function B0(n,e){let t=n[fl],i=t.indexOf(e);t.splice(i,1)}function Ly(n,e){if(n.length<=li)return;let t=li+e,i=n[t];if(i){let r=i[Ea];r!==null&&r!==n&&B0(r,i),e>0&&(n[t-1][tr]=i[tr]);let o=xp(n,li+e);OF(i[$e],i);let a=o[fo];a!==null&&a.detachView(o[$e]),i[An]=null,i[tr]=null,i[xe]&=-129}return i}function q1(n,e){if(!(e[xe]&256)){let t=e[an];t.destroyNode&&cm(n,e,t,3,null,null),NF(e)}}function ay(n,e){if(e[xe]&256)return;let t=at(null);try{e[xe]&=-129,e[xe]|=256,e[Ri]&&Pv(e[Ri]),VF(n,e),FF(n,e),e[$e].type===1&&e[an].destroy();let i=e[Ea];if(i!==null&&yo(e[An])){i!==e[An]&&B0(i,e);let r=e[fo];r!==null&&r.detachView(n)}ky(e)}finally{at(t)}}function FF(n,e){let t=n.cleanup,i=e[Op];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[t[o+1]];t[o].call(a)}i!==null&&(e[Op]=null);let r=e[us];if(r!==null){e[us]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}}function VF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Sa)){let o=t[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let l=r[o[a]],u=o[a+1];Cr(4,l,u);try{u.call(l)}finally{Cr(5,l,u)}}else{Cr(4,r,o);try{o.call(r)}finally{Cr(5,r,o)}}}}}function BF(n,e,t){return UF(n,e.parent,t)}function UF(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[vo];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===Sr.None||o===Sr.Emulated)return null}return Ni(i,t)}}function Hp(n,e,t,i,r){n.insertBefore(e,t,i,r)}function G1(n,e,t){n.appendChild(e,t)}function XS(n,e,t,i,r){i!==null?Hp(n,e,t,i,r):G1(n,e,t)}function W1(n,e){return n.parentNode(e)}function jF(n,e){return n.nextSibling(e)}function zF(n,e,t){return HF(n,e,t)}function $F(n,e,t){return n.type&40?Ni(n,t):null}var HF=$F,eD;function U0(n,e,t,i){let r=BF(n,i,e),o=e[an],a=i.parent||e[or],l=zF(a,i,e);if(r!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)XS(o,r,t[u],l,!1);else XS(o,r,t,l,!1);eD!==void 0&&eD(o,i,e,t,r)}function td(n,e){if(e!==null){let t=e.type;if(t&3)return Ni(e,n);if(t&4)return Fy(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return td(n,i);{let r=n[e.index];return yo(r)?Fy(-1,r):Mr(r)}}else{if(t&128)return td(n,e.next);if(t&32)return V0(e,n)()||Mr(n[e.index]);{let i=K1(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Ca(n[Ar]);return td(r,i)}else return td(n,e.next)}}}return null}function K1(n,e){if(e!==null){let i=n[Ar][or],r=e.projection;return i.projection[r]}return null}function Fy(n,e){let t=li+n+1;if(t<e.length){let i=e[t],r=i[$e].firstChild;if(r!==null)return td(i,r)}return e[Ia]}function qF(n,e,t){n.removeChild(null,e,t)}function j0(n,e,t,i,r,o,a){for(;t!=null;){if(t.type===128){t=t.next;continue}let l=i[t.index],u=t.type;if(a&&e===0&&(l&&Aa(Mr(l),i),t.flags|=2),(t.flags&32)!==32)if(u&8)j0(n,e,t.child,i,r,o,!1),rl(e,n,r,l,o);else if(u&32){let f=V0(t,i),m;for(;m=f();)rl(e,n,r,m,o);rl(e,n,r,l,o)}else u&16?GF(n,e,i,t,r,o):rl(e,n,r,l,o);t=a?t.projectionNext:t.next}}function cm(n,e,t,i,r,o){j0(t,i,n.firstChild,e,r,o,!1)}function GF(n,e,t,i,r,o){let a=t[Ar],u=a[or].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let m=u[f];rl(e,n,r,m,o)}else{let f=u,m=a[An];P1(i)&&(f.flags|=128),j0(n,e,f,m,r,o,!0)}}function WF(n,e,t,i,r){let o=t[Ia],a=Mr(t);o!==a&&rl(e,n,i,o,r);for(let l=li;l<t.length;l++){let u=t[l];cm(u[$e],u,n,e,i,o)}}function KF(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:mo.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=mo.Important),n.setStyle(t,i,r,o))}}function ZF(n,e,t){n.setAttribute(e,"style",t)}function Z1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Q1(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&_y(n,e,i),r!==null&&Z1(n,e,r),o!==null&&ZF(n,e,o)}var Rr={};function U(n=1){Y1(xn(),ut(),Oa()+n,!1)}function Y1(n,e,t,i){if(!i)if((e[xe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ip(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Cp(e,o,0,t)}Ta(t)}function oe(n,e=We.Default){let t=ut();if(t===null)return ge(n,e);let i=jn();return C1(i,t,Vn(n),e)}function J1(){let n="invalid";throw new Error(n)}function X1(n,e,t,i,r,o){let a=at(null);try{let l=null;r&hs.SignalBased&&(l=e[i][lo]),l!==null&&l.transformFn!==void 0&&(o=l.transformFn(o)),r&hs.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(e,o)),n.setInput!==null?n.setInput(e,l,o,t,i):GD(e,l,i,o)}finally{at(a)}}function QF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Ta(~r);else{let o=r,a=t[++i],l=t[++i];N2(a,o);let u=e[o];l(2,u)}}}finally{Ta(-1)}}function lm(n,e,t,i,r,o,a,l,u,f,m){let v=e.blueprint.slice();return v[vo]=r,v[xe]=i|4|128|8|64,(f!==null||n&&n[xe]&2048)&&(v[xe]|=2048),e1(v),v[An]=v[vl]=n,v[nr]=t,v[Dr]=a||n&&n[Dr],v[an]=l||n&&n[an],v[hl]=u||n&&n[hl]||null,v[or]=o,v[nm]=gF(),v[Rp]=m,v[$D]=f,v[Ar]=e.type==2?n[Ar]:v,v}function um(n,e,t,i,r){let o=n.data[e];if(o===null)o=YF(n,e,t,i,r),k2()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let a=M2();o.injectorIndex=a===null?-1:a.injectorIndex}return dd(o,!0),o}function YF(n,e,t,i,r){let o=o1(),a=s1(),l=a?o:o&&o.parent,u=n.data[e]=iV(n,l,t,e,i,r);return n.firstChild===null&&(n.firstChild=u),o!==null&&(a?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function eA(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function tA(n,e,t,i,r){let o=Oa(),a=i&2;try{Ta(-1),a&&e.length>ir&&Y1(n,e,ir,!1),Cr(a?2:0,r),t(i,r)}finally{Ta(o),Cr(a?3:1,r)}}function nA(n,e,t){if(qD(e)){let i=at(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let l=n.data[a];if(l.contentQueries){let u=t[a];l.contentQueries(1,u,a)}}}finally{at(i)}}}function iA(n,e,t){r1()&&(lV(n,e,t,Ni(t,e)),(t.flags&64)===64&&lA(n,e,t))}function rA(n,e,t=Ni){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],l=a===-1?t(e,n):n[a];n[r++]=l}}}function oA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=z0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function z0(n,e,t,i,r,o,a,l,u,f,m){let v=ir+i,E=v+r,b=JF(v,E),M=typeof f=="function"?f():f;return b[$e]={type:n,blueprint:b,template:t,queries:null,viewQuery:l,declTNode:e,data:b.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:m}}function JF(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Rr);return t}function XF(n,e,t,i){let o=i.get(IF,F1)||t===Sr.ShadowDom,a=n.selectRootElement(e,o);return eV(a),a}function eV(n){tV(n)}var tV=()=>null;function nV(n,e,t,i){let r=hA(e);r.push(t),n.firstCreatePass&&fA(n).push(i,r.length-1)}function iV(n,e,t,i,r,o){let a=e?e.injectorIndex:-1,l=0;return S2()&&(l|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function tD(n,e,t,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;i??={};let l,u=hs.None;Array.isArray(a)?(l=a[0],u=a[1]):l=a;let f=o;if(r!==null){if(!r.hasOwnProperty(o))continue;f=r[o]}n===0?nD(i,t,f,l,u):nD(i,t,f,l)}return i}function nD(n,e,t,i,r){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,i):o=n[t]=[e,i],r!==void 0&&o.push(r)}function rV(n,e,t){let i=e.directiveStart,r=e.directiveEnd,o=n.data,a=e.attrs,l=[],u=null,f=null;for(let m=i;m<r;m++){let v=o[m],E=t?t.get(v):null,b=E?E.inputs:null,M=E?E.outputs:null;u=tD(0,v.inputs,m,u,b),f=tD(1,v.outputs,m,f,M);let k=u!==null&&a!==null&&!p0(e)?wV(u,m,a):null;l.push(k)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=l,e.inputs=u,e.outputs=f}function oV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function sA(n,e,t,i,r,o,a,l){let u=Ni(e,t),f=e.inputs,m;!l&&f!=null&&(m=f[i])?($0(n,t,m,i,r),im(e)&&sV(t,e.index)):e.type&3?(i=oV(i),r=a!=null?a(r,e.value||"",i):r,o.setProperty(u,i,r)):e.type&12}function sV(n,e){let t=_s(e,n);t[xe]&16||(t[xe]|=64)}function aA(n,e,t,i){if(r1()){let r=i===null?null:{"":-1},o=dV(n,t),a,l;o===null?a=l=null:[a,l]=o,a!==null&&cA(n,e,t,a,r,l),r&&hV(t,i,r)}t.mergedAttrs=rd(t.mergedAttrs,t.attrs)}function cA(n,e,t,i,r,o){for(let f=0;f<i.length;f++)Dy(Up(t,e),n,i[f].type);pV(t,n.data.length,i.length);for(let f=0;f<i.length;f++){let m=i[f];m.providersResolver&&m.providersResolver(m)}let a=!1,l=!1,u=eA(n,e,i.length,null);for(let f=0;f<i.length;f++){let m=i[f];t.mergedAttrs=rd(t.mergedAttrs,m.hostAttrs),mV(n,t,e,u,m),fV(u,m,r),m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let v=m.type.prototype;!a&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),a=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),l=!0),u++}rV(n,t,o)}function aV(n,e,t,i,r){let o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let l=~e.index;cV(a)!=l&&a.push(l),a.push(t,i,o)}}function cV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function lV(n,e,t,i){let r=t.directiveStart,o=t.directiveEnd;im(t)&&gV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Up(t,e),Aa(i,e);let a=t.initialInputs;for(let l=r;l<o;l++){let u=n.data[l],f=Da(e,n,l,t);if(Aa(f,e),a!==null&&yV(e,l-r,f,u,t,a),ps(u)){let m=_s(t.index,e);m[nr]=Da(e,n,l,t)}}}function lA(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,a=L2();try{Ta(o);for(let l=i;l<r;l++){let u=n.data[l],f=e[l];Cy(l),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&uV(u,f)}}finally{Ta(-1),Cy(a)}}function uV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function dV(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let o=0;o<t.length;o++){let a=t[o];if(WL(e,a.selectors,!1))if(i||(i=[]),ps(a))if(a.findHostDirectiveDefs!==null){let l=[];r=r||new Map,a.findHostDirectiveDefs(a,l,r),i.unshift(...l,a);let u=l.length;Vy(n,e,u)}else i.unshift(a),Vy(n,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return i===null?null:[i,r]}function Vy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function hV(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new ee(-301,!1);i.push(e[r],o)}}}function fV(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ps(e)&&(t[""]=n)}}function pV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function mV(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=ba(r.type,!0)),a=new Sa(o,ps(r),oe);n.blueprint[i]=a,t[i]=a,aV(n,e,i,eA(n,t,r.hostVars,Rr),r)}function gV(n,e,t){let i=Ni(e,n),r=oA(t),o=n[Dr].rendererFactory,a=16;t.signals?a=4096:t.onPush&&(a=64);let l=dm(n,lm(n,r,null,a,i,e,null,o.createRenderer(i,t),null,null,null));n[e.index]=l}function _V(n,e,t,i,r,o){let a=Ni(n,e);vV(e[an],a,o,n.value,t,i,r)}function vV(n,e,t,i,r,o,a){if(o==null)n.removeAttribute(e,r,t);else{let l=a==null?cl(o):a(o,i||"",r);n.setAttribute(e,r,l,t)}}function yV(n,e,t,i,r,o){let a=o[e];if(a!==null)for(let l=0;l<a.length;){let u=a[l++],f=a[l++],m=a[l++],v=a[l++];X1(i,t,u,f,m,v)}}function wV(n,e,t){let i=null,r=0;for(;r<t.length;){let o=t[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let a=n[o];for(let l=0;l<a.length;l+=3)if(a[l]===e){i.push(o,a[l+1],a[l+2],t[r+1]);break}}r+=2}return i}function uA(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function dA(n,e){let t=n.contentQueries;if(t!==null){let i=at(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],a=t[r+1];if(a!==-1){let l=n.data[a];w0(o),l.contentQueries(2,e[a],a)}}}finally{at(i)}}}function dm(n,e){return n[sd]?n[jS][tr]=e:n[sd]=e,n[jS]=e,e}function By(n,e,t){w0(0);let i=at(null);try{e(n,t)}finally{at(i)}}function hA(n){return n[Op]??=[]}function fA(n){return n.cleanup??=[]}function pA(n,e){let t=n[hl],i=t?t.get(po,null):null;i&&i.handleError(e)}function $0(n,e,t,i,r){for(let o=0;o<t.length;){let a=t[o++],l=t[o++],u=t[o++],f=e[a],m=n.data[a];X1(m,f,i,l,u,r)}}function mA(n,e,t){let i=YD(e,n);RF(n[an],i,t)}function bV(n,e){let t=_s(e,n),i=t[$e];EV(i,t);let r=t[vo];r!==null&&t[Rp]===null&&(t[Rp]=L0(r,t[hl])),H0(i,t,t[nr])}function EV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function H0(n,e,t){b0(e);try{let i=n.viewQuery;i!==null&&By(1,i,t);let r=n.template;r!==null&&tA(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[fo]?.finishViewCreation(n),n.staticContentQueries&&dA(n,e),n.staticViewQueries&&By(2,n.viewQuery,t);let o=n.components;o!==null&&IV(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[xe]&=-5,E0()}}function IV(n,e){for(let t=0;t<e.length;t++)bV(n,e[t])}function CV(n,e,t,i){let r=at(null);try{let o=e.tView,l=n[xe]&4096?4096:16,u=lm(n,o,t,l,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[e.index];u[Ea]=f;let m=n[fo];return m!==null&&(u[fo]=m.createEmbeddedView(o)),H0(o,u,t),u}finally{at(r)}}function iD(n,e){return!e||e.firstChild===null||P1(n)}function TV(n,e,t,i=!0){let r=e[$e];if(LF(r,e,n,t),i){let a=Fy(t,n),l=e[an],u=W1(l,n[Ia]);u!==null&&kF(r,n[or],l,e,u,a)}let o=e[Rp];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qp(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(Mr(o)),yo(o)&&SV(o,i);let a=t.type;if(a&8)qp(n,e,t.child,i);else if(a&32){let l=V0(t,e),u;for(;u=l();)i.push(u)}else if(a&16){let l=K1(e,t);if(Array.isArray(l))i.push(...l);else{let u=Ca(e[Ar]);qp(u[$e],u,l,i,!0)}}t=r?t.projectionNext:t.next}return i}function SV(n,e){for(let t=li;t<n.length;t++){let i=n[t],r=i[$e].firstChild;r!==null&&qp(i[$e],i,r,e)}n[Ia]!==n[vo]&&e.push(n[Ia])}var gA=[];function DV(n){return n[Ri]??AV(n)}function AV(n){let e=gA.pop()??Object.create(xV);return e.lView=n,e}function MV(n){n.lView[Ri]!==n&&(n.lView=null,gA.push(n))}var xV=Oe(Y({},Yu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{om(n.lView)},consumerOnSignalRead(){this.lView[Ri]=this}});function PV(n){let e=n[Ri]??Object.create(RV);return e.lView=n,e}var RV=Oe(Y({},Yu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ca(n.lView);for(;e&&!_A(e[$e]);)e=Ca(e);e&&t1(e)},consumerOnSignalRead(){this.lView[Ri]=this}});function _A(n){return n.type!==2}var OV=100;function vA(n,e=!0,t=0){let i=n[Dr],r=i.rendererFactory,o=!1;o||r.begin?.();try{kV(n,t)}catch(a){throw e&&pA(n,a),a}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function kV(n,e){let t=a1();try{$S(!0),Uy(n,e);let i=0;for(;rm(n);){if(i===OV)throw new ee(103,!1);i++,Uy(n,1)}}finally{$S(t)}}function NV(n,e,t,i){let r=e[xe];if((r&256)===256)return;let o=!1,a=!1;!o&&e[Dr].inlineEffectRunner?.flush(),b0(e);let l=!0,u=null,f=null;o||(_A(n)?(f=DV(e),u=Hf(f)):WT()===null?(l=!1,f=PV(e),u=Hf(f)):e[Ri]&&(Pv(e[Ri]),e[Ri]=null));try{e1(e),O2(n.bindingStartIndex),t!==null&&tA(n,e,t,2,i);let m=(r&3)===3;if(!o)if(m){let b=n.preOrderCheckHooks;b!==null&&Ip(e,b,null)}else{let b=n.preOrderHooks;b!==null&&Cp(e,b,0,null),iy(e,0)}if(a||LV(e),yA(e,0),n.contentQueries!==null&&dA(n,e),!o)if(m){let b=n.contentCheckHooks;b!==null&&Ip(e,b)}else{let b=n.contentHooks;b!==null&&Cp(e,b,1),iy(e,1)}QF(n,e);let v=n.components;v!==null&&bA(e,v,0);let E=n.viewQuery;if(E!==null&&By(2,E,i),!o)if(m){let b=n.viewCheckHooks;b!==null&&Ip(e,b)}else{let b=n.viewHooks;b!==null&&Cp(e,b,2),iy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ny]){for(let b of e[ny])b();e[ny]=null}o||(e[xe]&=-73)}catch(m){throw o||om(e),m}finally{f!==null&&(Mv(f,u),l&&MV(f)),E0()}}function yA(n,e){for(let t=O1(n);t!==null;t=k1(t))for(let i=li;i<t.length;i++){let r=t[i];wA(r,e)}}function LV(n){for(let e=O1(n);e!==null;e=k1(e)){if(!(e[xe]&Np.HasTransplantedViews))continue;let t=e[fl];for(let i=0;i<t.length;i++){let r=t[i];t1(r)}}}function FV(n,e,t){let i=_s(e,n);wA(i,t)}function wA(n,e){y0(n)&&Uy(n,e)}function Uy(n,e){let i=n[$e],r=n[xe],o=n[Ri],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&xv(o)),a||=!1,o&&(o.dirty=!1),n[xe]&=-9217,a)NV(i,n,i.template,n[nr]);else if(r&8192){yA(n,1);let l=i.components;l!==null&&bA(n,l,1)}}function bA(n,e,t){for(let i=0;i<e.length;i++)FV(n,e[i],t)}function q0(n,e){let t=a1()?64:1088;for(n[Dr].changeDetectionScheduler?.notify(e);n;){n[xe]|=t;let i=Ca(n);if(by(n)&&!i)return n;n=i}return null}var Ma=class{get rootNodes(){let e=this._lView,t=e[$e];return qp(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nr]}set context(e){this._lView[nr]=e}get destroyed(){return(this._lView[xe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[An];if(yo(e)){let t=e[kp],i=t?t.indexOf(this):-1;i>-1&&(Ly(e,i),xp(t,i))}this._attachedToViewContainer=!1}q1(this._lView[$e],this._lView)}onDestroy(e){n1(this._lView,e)}markForCheck(){q0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[xe]&=-129}reattach(){Iy(this._lView),this._lView[xe]|=128}detectChanges(){this._lView[xe]|=1024,vA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=by(this._lView),t=this._lView[Ea];t!==null&&!e&&B0(t,this._lView),$1(this._lView[$e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=by(this._lView),i=this._lView[Ea];i!==null&&!t&&H1(i,this._lView),Iy(this._lView)}},xa=(()=>{class n{static{this.__NG_ELEMENT_ID__=UV}}return n})(),VV=xa,BV=class extends VV{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=CV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Ma(r)}};function UV(){return hm(jn(),ut())}function hm(n,e){return n.type&4?new BV(e,n,yl(n,e)):null}var rX=new RegExp(`^(\\d+)*(${bF}|${wF})*(.*)`);var jV=()=>null;function rD(n,e){return jV(n,e)}var pl=class{},G0=new de("",{providedIn:"root",factory:()=>!1});var EA=new de(""),IA=new de(""),jy=class{},Gp=class{};function zV(n){let e=Error(`No component factory found for ${Bn(n)}.`);return e[$V]=n,e}var $V="ngComponent";var zy=class{resolveComponentFactory(e){throw zV(e)}},ml=class{static{this.NULL=new zy}},ms=class{},ka=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>HV()}}return n})();function HV(){let n=ut(),e=jn(),t=_s(e.index,n);return(ds(t)?t:n)[an]}var qV=(()=>{class n{static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>null})}}return n})();function $y(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number")o=l;else if(o==1)r=PS(r,l);else if(o==2){let u=l,f=e[++a];i=PS(i,u+": "+f+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var Wp=class extends ml{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=fs(e);return new gl(t,this.ngModule)}};function oD(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let o=Array.isArray(r),a=o?r[0]:r,l=o?r[1]:hs.None;e?t.push({propName:a,templateName:i,isSignal:(l&hs.SignalBased)!==0}):t.push({propName:a,templateName:i})}return t}function GV(n){let e=n.toLowerCase();return e==="svg"?QD:e==="math"?v2:null}var gl=class extends Gp{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=oD(e.inputs,!0);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return oD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=at(null);try{r=r||this.ngModule;let a=r instanceof Un?r:r?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let l=a?new Ty(e,a):e,u=l.get(ms,null);if(u===null)throw new ee(407,!1);let f=l.get(qV,null),m=l.get(pl,null),v={rendererFactory:u,sanitizer:f,inlineEffectRunner:null,changeDetectionScheduler:m},E=u.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",M=i?XF(E,i,this.componentDef.encapsulation,l):z1(E,b,GV(b)),k=512;this.componentDef.signals?k|=4096:this.componentDef.onPush||(k|=16);let N=null;M!==null&&(N=L0(M,l,!0));let G=z0(0,null,null,1,0,null,null,null,null,null,null),te=lm(null,G,null,k,null,null,v,E,l,null,N);b0(te);let J,ue,Ne=null;try{let he=this.componentDef,R,S=null;he.findHostDirectiveDefs?(R=[],S=new Map,he.findHostDirectiveDefs(he,R,S),R.push(he)):R=[he];let A=WV(te,M);Ne=KV(A,M,he,R,te,v,E),ue=JD(G,ir),M&&YV(E,he,M,i),t!==void 0&&JV(ue,this.ngContentSelectors,t),J=QV(Ne,he,R,S,te,[XV]),H0(G,te,null)}catch(he){throw Ne!==null&&ky(Ne),ky(te),he}finally{E0()}return new Hy(this.componentType,J,yl(ue,te),te,ue)}finally{at(o)}}},Hy=class extends jy{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ma(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;$0(o[$e],o,r,e,t),this.previousInputValues.set(e,t);let a=_s(this._tNode.index,o);q0(a,1)}}get injector(){return new wa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function WV(n,e){let t=n[$e],i=ir;return n[i]=e,um(t,i,2,"#host",null)}function KV(n,e,t,i,r,o,a){let l=r[$e];ZV(i,n,e,a);let u=null;e!==null&&(u=L0(e,r[hl]));let f=o.rendererFactory.createRenderer(e,t),m=16;t.signals?m=4096:t.onPush&&(m=64);let v=lm(r,oA(t),null,m,r[n.index],n,o,f,null,null,u);return l.firstCreatePass&&Vy(l,n,i.length-1),dm(r,v),r[n.index]=v}function ZV(n,e,t,i){for(let r of n)e.mergedAttrs=rd(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&($y(e,e.mergedAttrs,!0),t!==null&&Q1(i,t,e))}function QV(n,e,t,i,r,o){let a=jn(),l=r[$e],u=Ni(a,r);cA(l,r,a,t,null,i);for(let m=0;m<t.length;m++){let v=a.directiveStart+m,E=Da(r,l,v,a);Aa(E,r)}lA(l,r,a),u&&Aa(u,r);let f=Da(r,l,a.directiveStart+a.componentOffset,a);if(n[nr]=r[nr]=f,o!==null)for(let m of o)m(f,e);return nA(l,a,r),f}function YV(n,e,t,i){if(i)_y(n,t,["ng-version","18.2.14"]);else{let{attrs:r,classes:o}=JL(e.selectors[0]);r&&_y(n,t,r),o&&o.length>0&&Z1(n,t,o.join(" "))}}function JV(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null?Array.from(o):null)}}function XV(){let n=jn();S0(ut()[$e],n)}var ys=(()=>{class n{static{this.__NG_ELEMENT_ID__=eB}}return n})();function eB(){let n=jn();return TA(n,ut())}var tB=ys,CA=class extends tB{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return yl(this._hostTNode,this._hostLView)}get injector(){return new wa(this._hostTNode,this._hostLView)}get parentInjector(){let e=D0(this._hostTNode,this._hostLView);if(v1(e)){let t=Vp(e,this._hostLView),i=Fp(e),r=t[$e].data[i+8];return new wa(r,t)}else return new wa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=sD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-li}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=rD(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(l,r,iD(this._hostTNode,a)),l}createComponent(e,t,i,r,o){let a=e&&!p2(e),l;if(a)l=t;else{let M=t||{};l=M.index,i=M.injector,r=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let u=a?e:new gl(fs(e)),f=i||this.parentInjector;if(!o&&u.ngModule==null){let k=(a?f:this.parentInjector).get(Un,null);k&&(o=k)}let m=fs(u.componentType??{}),v=rD(this._lContainer,m?.id??null),E=v?.firstChild??null,b=u.create(f,r,E,o);return this.insertImpl(b.hostView,l,iD(this._hostTNode,v)),b}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(w2(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let u=r[An],f=new CA(u,u[or],u[An]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return TV(a,r,o,i),e.attachToViewContainerRef(),SD(cy(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=sD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Ly(this._lContainer,t);i&&(xp(cy(this._lContainer),t),q1(i[$e],i))}detach(e){let t=this._adjustIndex(e,-1),i=Ly(this._lContainer,t);return i&&xp(cy(this._lContainer),t)!=null?new Ma(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function sD(n){return n[kp]}function cy(n){return n[kp]||(n[kp]=[])}function TA(n,e){let t,i=e[n.index];return yo(i)?t=i:(t=uA(i,e,null,n),e[n.index]=t,dm(e,t)),iB(t,e,n,i),new CA(t,n,e)}function nB(n,e){let t=n[an],i=t.createComment(""),r=Ni(e,n),o=W1(t,r);return Hp(t,o,i,jF(t,r),!1),i}var iB=sB,rB=()=>!1;function oB(n,e,t){return rB(n,e,t)}function sB(n,e,t,i){if(n[Ia])return;let r;t.type&8?r=Mr(i):r=nB(e,t),n[Ia]=r}var qy=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Gy=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let a=t.getByIndex(o),l=this.queries[a.indexInDeclarationView];r.push(l.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)W0(e,t).matches!==null&&this.queries[t].setDirty()}},Wy=class{constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=pB(e):this.predicate=e}},Ky=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Zy=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,aB(t,o)),this.matchTNodeWithReadOption(e,t,Tp(t,e,o,!1,!1))}else i===xa?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Tp(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===sr||r===ys||r===xa&&t.type&4)this.addMatch(t.index,-2);else{let o=Tp(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function aB(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function cB(n,e){return n.type&11?yl(n,e):n.type&4?hm(n,e):null}function lB(n,e,t,i){return t===-1?cB(e,n):t===-2?uB(n,e,i):Da(n,n[$e],t,e)}function uB(n,e,t){if(t===sr)return yl(e,n);if(t===xa)return hm(e,n);if(t===ys)return TA(e,n)}function SA(n,e,t,i){let r=e[fo].queries[i];if(r.matches===null){let o=n.data,a=t.matches,l=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)l.push(null);else{let m=o[f];l.push(lB(e,m,a[u+1],t.metadata.read))}}r.matches=l}return r.matches}function Qy(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let a=SA(n,e,r,t);for(let l=0;l<o.length;l+=2){let u=o[l];if(u>0)i.push(a[l/2]);else{let f=o[l+1],m=e[-u];for(let v=li;v<m.length;v++){let E=m[v];E[Ea]===E[An]&&Qy(E[$e],E,f,i)}if(m[fl]!==null){let v=m[fl];for(let E=0;E<v.length;E++){let b=v[E];Qy(b[$e],b,f,i)}}}}}return i}function dB(n,e){return n[fo].queries[e].queryList}function hB(n,e,t){let i=new Oy((t&4)===4);return nV(n,e,i,i.destroy),(e[fo]??=new Gy).queries.push(new qy(i))-1}function fB(n,e,t){let i=xn();return i.firstCreatePass&&(mB(i,new Wy(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),hB(i,ut(),e)}function pB(n){return n.split(",").map(e=>e.trim())}function mB(n,e,t){n.queries===null&&(n.queries=new Ky),n.queries.track(new Zy(e,t))}function W0(n,e){return n.queries.getByIndex(e)}function gB(n,e){let t=n[$e],i=W0(t,e);return i.crossesNgTemplate?Qy(t,n,e,[]):SA(t,n,i,e)}var aD=new Set;function ws(n){aD.has(n)||(aD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function _B(n){return typeof n=="function"&&n[lo]!==void 0}function fm(n,e){ws("NgSignals");let t=rS(n),i=t[lo];return e?.equal&&(i.equal=e.equal),t.set=r=>Rv(i,r),t.update=r=>oS(i,r),t.asReadonly=vB.bind(t),t}function vB(){let n=this[lo];if(n.readonlyFn===void 0){let e=()=>this();e[lo]=n,n.readonlyFn=e}return n.readonlyFn}function DA(n){return _B(n)&&typeof n.set=="function"}function yB(n){return Object.getPrototypeOf(n.prototype).constructor}function Or(n){let e=yB(n.type),t=!0,i=[n];for(;e;){let r;if(ps(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let a=n;a.inputs=yp(n.inputs),a.inputTransforms=yp(n.inputTransforms),a.declaredInputs=yp(n.declaredInputs),a.outputs=yp(n.outputs);let l=r.hostBindings;l&&CB(n,l);let u=r.viewQuery,f=r.contentQueries;if(u&&EB(n,u),f&&IB(n,f),wB(n,r),_L(n.outputs,r.outputs),ps(r)&&r.data.animation){let m=n.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let l=o[a];l&&l.ngInherit&&l(n),l===Or&&(t=!1)}}e=Object.getPrototypeOf(e)}bB(i)}function wB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function bB(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=rd(r.hostAttrs,t=rd(t,r.hostAttrs))}}function yp(n){return n===ll?{}:n===Pi?[]:n}function EB(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function IB(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function CB(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function K0(n){let e=n.inputConfig,t={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(t[i]=r[3])}n.inputTransforms=t}var gs=class{},ad=class{};var Yy=class extends gs{constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wp(this);let o=ND(e);this._bootstrapComponents=j1(o.bootstrap),this._r3Injector=D1(e,t,[{provide:gs,useValue:this},{provide:ml,useValue:this.componentFactoryResolver},...i],Bn(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jy=class extends ad{constructor(e){super(),this.moduleType=e}create(e){return new Yy(this.moduleType,e,[])}};var Kp=class extends gs{constructor(e){super(),this.componentFactoryResolver=new Wp(this),this.instance=null;let t=new od([...e.providers,{provide:gs,useValue:this},{provide:ml,useValue:this.componentFactoryResolver}],e.parent||_0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function pm(n,e,t=null){return new Kp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function AA(n){return SB(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function TB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function SB(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function MA(n,e,t){return n[e]=t}function DB(n,e){return n[e]}function Pa(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function xA(n,e,t,i){let r=Pa(n,e,t);return Pa(n,e+1,i)||r}function AB(n){return(n.flags&32)===32}function MB(n,e,t,i,r,o,a,l,u){let f=e.consts,m=um(e,n,4,a||null,l||null);aA(e,t,m,Lp(f,u)),S0(e,m);let v=m.tView=z0(2,m,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,m),v.queries=e.queries.embeddedTView(m)),m}function xB(n,e,t,i,r,o,a,l,u,f){let m=t+ir,v=e.firstCreatePass?MB(m,e,n,i,r,o,a,l,u):e.data[m];dd(v,!1);let E=PB(e,n,v,t);C0()&&U0(e,n,E,v),Aa(E,n);let b=uA(E,n,E,v);return n[m]=b,dm(n,b),oB(b,v,n),v0(v)&&iA(e,n,v),u!=null&&rA(n,v,f),v}function Pe(n,e,t,i,r,o,a,l){let u=ut(),f=xn(),m=Lp(f.consts,o);return xB(u,f,n,e,t,i,r,m,a,l),Pe}var PB=RB;function RB(n,e,t,i){return T0(!0),e[an].createComment("")}var ol=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ol||{}),PA=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Xy=class n{constructor(){this.ngZone=Q(ct),this.scheduler=Q(pl),this.errorHandler=Q(po,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ol.EarlyRead,ol.Write,ol.MixedReadWrite,ol.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}},e0=class{constructor(e,t,i,r){this.impl=e,this.hooks=t,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Z0(n,e){!e?.injector&&f2(Z0);let t=e?.injector??Q(Cn);return MF(t)?(ws("NgAfterNextRender"),kB(n,t,e,!0)):NB}function OB(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function kB(n,e,t,i){let r=e.get(PA);r.impl??=e.get(Xy);let o=t?.phase??ol.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(M0):null,l=new e0(r.impl,OB(n,o),i,a);return r.impl.register(l),l}var NB={destroy(){}};function kr(n,e,t,i){let r=ut(),o=sm();if(Pa(r,o,e)){let a=xn(),l=I0();_V(l,r,n,e,t,i)}return kr}function LB(n,e,t,i){return Pa(n,sm(),t)?e+cl(t)+i:Rr}function FB(n,e,t,i,r,o){let a=R2(),l=xA(n,a,t,r);return l1(2),l?e+cl(t)+i+cl(r)+o:Rr}function wp(n,e){return n<<17|e<<2}function Ra(n){return n>>17&32767}function VB(n){return(n&2)==2}function BB(n,e){return n&131071|e<<17}function t0(n){return n|2}function _l(n){return(n&131068)>>2}function ly(n,e){return n&-131069|e<<2}function UB(n){return(n&1)===1}function n0(n){return n|1}function jB(n,e,t,i,r,o){let a=o?e.classBindings:e.styleBindings,l=Ra(a),u=_l(a);n[i]=t;let f=!1,m;if(Array.isArray(t)){let v=t;m=v[1],(m===null||ud(v,m)>0)&&(f=!0)}else m=t;if(r)if(u!==0){let E=Ra(n[l+1]);n[i+1]=wp(E,l),E!==0&&(n[E+1]=ly(n[E+1],i)),n[l+1]=BB(n[l+1],i)}else n[i+1]=wp(l,0),l!==0&&(n[l+1]=ly(n[l+1],i)),l=i;else n[i+1]=wp(u,0),l===0?l=i:n[u+1]=ly(n[u+1],i),u=i;f&&(n[i+1]=t0(n[i+1])),cD(n,m,i,!0),cD(n,m,i,!1),zB(e,m,n,i,o),a=wp(l,u),o?e.classBindings=a:e.styleBindings=a}function zB(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ud(o,e)>=0&&(t[i+1]=n0(t[i+1]))}function cD(n,e,t,i){let r=n[t+1],o=e===null,a=i?Ra(r):_l(r),l=!1;for(;a!==0&&(l===!1||o);){let u=n[a],f=n[a+1];$B(u,e)&&(l=!0,n[a+1]=i?n0(f):t0(f)),a=i?Ra(f):_l(f)}l&&(n[t+1]=i?t0(r):n0(r))}function $B(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ud(n,e)>=0:!1}function X(n,e,t){let i=ut(),r=sm();if(Pa(i,r,e)){let o=xn(),a=I0();sA(o,a,i,n,e,i[an],t,!1)}return X}function lD(n,e,t,i,r){let o=e.inputs,a=r?"class":"style";$0(n,t,o[a],a,i)}function bo(n,e,t){return RA(n,e,t,!1),bo}function Ze(n,e){return RA(n,e,null,!0),Ze}function RA(n,e,t,i){let r=ut(),o=xn(),a=l1(2);if(o.firstUpdatePass&&qB(o,n,a,i),e!==Rr&&Pa(r,a,e)){let l=o.data[Oa()];QB(o,l,r,r[an],n,r[a+1]=YB(e,t),i,a)}}function HB(n,e){return e>=n.expandoStartIndex}function qB(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[Oa()],a=HB(n,t);JB(o,i)&&e===null&&!a&&(e=!1),e=GB(r,o,e,i),jB(r,o,e,t,a,i)}}function GB(n,e,t,i){let r=F2(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=uy(null,n,e,t,i),t=cd(t,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==r)if(t=uy(r,n,e,t,i),o===null){let u=WB(n,e,i);u!==void 0&&Array.isArray(u)&&(u=uy(null,n,e,u[1],i),u=cd(u,e.attrs,i),KB(n,e,i,u))}else o=ZB(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function WB(n,e,t){let i=t?e.classBindings:e.styleBindings;if(_l(i)!==0)return n[Ra(i)]}function KB(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Ra(r)]=i}function ZB(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=n[o].hostAttrs;i=cd(i,a,t)}return cd(i,e.attrs,t)}function uy(n,e,t,i,r){let o=null,a=t.directiveEnd,l=t.directiveStylingLast;for(l===-1?l=t.directiveStart:l++;l<a&&(o=e[l],i=cd(i,o.hostAttrs,r),o!==n);)l++;return n!==null&&(t.directiveStylingLast=l),i}function cd(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),BL(n,a,t?!0:e[++o]))}return n===void 0?null:n}function QB(n,e,t,i,r,o,a,l){if(!(e.type&3))return;let u=n.data,f=u[l+1],m=UB(f)?uD(u,e,t,r,_l(f),a):void 0;if(!Zp(m)){Zp(o)||VB(f)&&(o=uD(u,null,t,r,l,a));let v=YD(Oa(),t);KF(i,a,v,r,o)}}function uD(n,e,t,i,r,o){let a=e===null,l;for(;r>0;){let u=n[r],f=Array.isArray(u),m=f?u[1]:u,v=m===null,E=t[r+1];E===Rr&&(E=v?Pi:void 0);let b=v?ey(E,i):m===i?E:void 0;if(f&&!Zp(b)&&(b=ey(u,i)),Zp(b)&&(l=b,a))return l;let M=n[r+1];r=a?Ra(M):_l(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(l=ey(u,i))}return l}function Zp(n){return n!==void 0}function YB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Bn(hd(n)))),n}function JB(n,e){return(n.flags&(e?8:16))!==0}function XB(n,e,t,i,r,o){let a=e.consts,l=Lp(a,r),u=um(e,n,2,i,l);return aA(e,t,u,Lp(a,o)),u.attrs!==null&&$y(u,u.attrs,!1),u.mergedAttrs!==null&&$y(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function C(n,e,t,i){let r=ut(),o=xn(),a=ir+n,l=r[an],u=o.firstCreatePass?XB(a,o,r,e,t,i):o.data[a],f=eU(o,r,u,l,e,n);r[a]=f;let m=v0(u);return dd(u,!0),Q1(l,f,u),!AB(u)&&C0()&&U0(o,r,f,u),I2()===0&&Aa(f,r),C2(),m&&(iA(o,r,u),nA(o,u,r)),i!==null&&rA(r,u),C}function D(){let n=jn();s1()?x2():(n=n.parent,dd(n,!1));let e=n;D2(e)&&A2(),T2();let t=xn();return t.firstCreatePass&&(S0(t,n),qD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&q2(e)&&lD(t,e,ut(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&G2(e)&&lD(t,e,ut(),e.stylesWithoutHost,!1),D}function ne(n,e,t,i){return C(n,e,t,i),D(),ne}var eU=(n,e,t,i,r,o)=>(T0(!0),z1(i,r,j2()));function pt(){return ut()}var va=void 0;function tU(n){let e=n,t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&i===0?1:5}var nU=["en",[["a","p"],["AM","PM"],va],[["AM","PM"],va,va],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],va,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],va,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",va,"{1} 'at' {0}",va],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",tU],dy={};function ui(n){let e=iU(n),t=dD(e);if(t)return t;let i=e.split("-")[0];if(t=dD(i),t)return t;if(i==="en")return nU;throw new ee(701,!1)}function dD(n){return n in dy||(dy[n]=ya.ng&&ya.ng.common&&ya.ng.common.locales&&ya.ng.common.locales[n]),dy[n]}var $t=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}($t||{});function iU(n){return n.toLowerCase().replace(/_/g,"-")}var Qp="en-US";var rU=Qp;function oU(n){typeof n=="string"&&(rU=n.toLowerCase().replace(/_/g,"-"))}var sU=(n,e,t)=>{};function se(n,e,t,i){let r=ut(),o=xn(),a=jn();return OA(o,r,r[an],a,n,e,i),se}function aU(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===t&&r[o+1]===i){let l=e[Op],u=r[o+2];return l.length>u?l[u]:null}typeof a=="string"&&(o+=2)}return null}function OA(n,e,t,i,r,o,a){let l=v0(i),f=n.firstCreatePass&&fA(n),m=e[nr],v=hA(e),E=!0;if(i.type&3||a){let k=Ni(i,e),N=a?a(k):k,G=v.length,te=a?ue=>a(Mr(ue[i.index])):i.index,J=null;if(!a&&l&&(J=aU(n,e,r,i.index)),J!==null){let ue=J.__ngLastListenerFn__||J;ue.__ngNextListenerFn__=o,J.__ngLastListenerFn__=o,E=!1}else{o=fD(i,e,m,o),sU(k,r,o);let ue=t.listen(N,r,o);v.push(o,ue),f&&f.push(r,te,G,G+1)}}else o=fD(i,e,m,o);let b=i.outputs,M;if(E&&b!==null&&(M=b[r])){let k=M.length;if(k)for(let N=0;N<k;N+=2){let G=M[N],te=M[N+1],Ne=e[G][te].subscribe(o),he=v.length;v.push(o,Ne),f&&f.push(r,i.index,he,-(he+1))}}}function hD(n,e,t,i){let r=at(null);try{return Cr(6,e,t),t(i)!==!1}catch(o){return pA(n,o),!1}finally{Cr(7,e,t),at(r)}}function fD(n,e,t,i){return function r(o){if(o===Function)return i;let a=n.componentOffset>-1?_s(n.index,e):e;q0(a,5);let l=hD(e,t,i,o),u=r.__ngNextListenerFn__;for(;u;)l=hD(e,t,u,o)&&l,u=u.__ngNextListenerFn__;return l}}function fe(n=1){return B2(n)}function Fi(n,e,t){fB(n,e,t)}function di(n){let e=ut(),t=xn(),i=u1();w0(i+1);let r=W0(t,i);if(n.dirty&&y2(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=gB(e,i);n.reset(o,fF),n.notifyOnChanges()}return!0}return!1}function hi(){return dB(ut(),u1())}function cU(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Na(n){let e=P2();return XD(e,ir+n)}function H(n,e=""){let t=ut(),i=xn(),r=n+ir,o=i.firstCreatePass?um(i,r,1,e,null):i.data[r],a=lU(i,t,o,e,n);t[r]=a,C0()&&U0(i,t,a,o),dd(o,!1)}var lU=(n,e,t,i,r)=>(T0(!0),PF(e[an],i));function dt(n){return it("",n,""),dt}function it(n,e,t){let i=ut(),r=LB(i,n,e,t);return r!==Rr&&mA(i,Oa(),r),it}function Q0(n,e,t,i,r){let o=ut(),a=FB(o,n,e,t,i,r);return a!==Rr&&mA(o,Oa(),a),Q0}function gn(n,e,t){DA(e)&&(e=e());let i=ut(),r=sm();if(Pa(i,r,e)){let o=xn(),a=I0();sA(o,a,i,n,e,i[an],t,!1)}return gn}function Sn(n,e){let t=DA(n);return t&&n.set(e),t}function _n(n,e){let t=ut(),i=xn(),r=jn();return OA(i,t,t[an],r,n,e),_n}function uU(n,e,t){let i=xn();if(i.firstCreatePass){let r=ps(n);i0(t,i.data,i.blueprint,r,!0),i0(e,i.data,i.blueprint,r,!1)}}function i0(n,e,t,i,r){if(n=Vn(n),Array.isArray(n))for(let o=0;o<n.length;o++)i0(n[o],e,t,i,r);else{let o=xn(),a=ut(),l=jn(),u=dl(n)?n:Vn(n.provide),f=jD(n),m=l.providerIndexes&1048575,v=l.directiveStart,E=l.providerIndexes>>20;if(dl(n)||!n.multi){let b=new Sa(f,r,oe),M=fy(u,e,r?m:m+E,v);M===-1?(Dy(Up(l,a),o,u),hy(o,n,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(b),a.push(b)):(t[M]=b,a[M]=b)}else{let b=fy(u,e,m+E,v),M=fy(u,e,m,m+E),k=b>=0&&t[b],N=M>=0&&t[M];if(r&&!N||!r&&!k){Dy(Up(l,a),o,u);let G=fU(r?hU:dU,t.length,r,i,f);!r&&N&&(t[M].providerFactory=G),hy(o,n,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(G),a.push(G)}else{let G=kA(t[r?M:b],f,!r&&i);hy(o,n,b>-1?b:M,G)}!r&&i&&N&&t[M].componentProviders++}}}function hy(n,e,t,i){let r=dl(e),o=s2(e);if(r||o){let u=(o?Vn(e.useClass):e).prototype.ngOnDestroy;if(u){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let m=f.indexOf(t);m===-1?f.push(t,[i,u]):f[m+1].push(i,u)}else f.push(t,u)}}}function kA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function fy(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function dU(n,e,t,i){return r0(this.multi,[])}function hU(n,e,t,i){let r=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Da(t,t[$e],this.providerFactory.index,i);o=l.slice(0,a),r0(r,o);for(let u=a;u<l.length;u++)o.push(l[u])}else o=[],r0(r,o);return o}function r0(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function fU(n,e,t,i,r){let o=new Sa(n,t,oe);return o.multi=[],o.index=e,o.componentProviders=0,kA(o,r,i&&!t),o}function La(n,e=[]){return t=>{t.providersResolver=(i,r)=>uU(i,r?r(n):n,e)}}var pU=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=VD(!1,t.type),r=i.length>0?pm([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=le({token:n,providedIn:"environment",factory:()=>new n(ge(Un))})}}return n})();function vt(n){ws("NgStandalone"),n.getStandaloneInjector=e=>e.get(pU).getOrCreateStandaloneInjector(n)}function NA(n,e,t){let i=c1()+n,r=ut();return r[i]===Rr?MA(r,i,t?e.call(t):e()):DB(r,i)}function mU(n,e){let t=n[e];return t===Rr?void 0:t}function gU(n,e,t,i,r,o,a){let l=e+t;return xA(n,l,r,o)?MA(n,l+2,a?i.call(a,r,o):i(r,o)):mU(n,l+2)}function fd(n,e){let t=xn(),i,r=n+ir;t.firstCreatePass?(i=_U(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=ba(i.type,!0)),a,l=Qn(oe);try{let u=Bp(!1),f=o();return Bp(u),cU(t,ut(),r,f),f}finally{Qn(l)}}function _U(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function pd(n,e,t,i){let r=n+ir,o=ut(),a=XD(o,r);return vU(o,r)?gU(o,c1(),e,a.transform,t,i,a):a.transform(t,i)}function vU(n,e){return n[$e].data[e].pure}function mm(n,e){return hm(n,e)}var go=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},LA=new go("18.2.14");var gm=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var FA=new de("");function Fa(n){return!!n&&typeof n.then=="function"}function VA(n){return!!n&&typeof n.subscribe=="function"}var _m=new de(""),BA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Q(_m,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=r();if(Fa(o))t.push(o);else if(VA(o)){let a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});t.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),md=new de("");function yU(){iS(()=>{throw new ee(600,!1)})}function wU(n){return n.isBoundToModule}var bU=10;function EU(n,e,t){try{let i=t();return Fa(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var bs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Q(dF),this.afterRenderManager=Q(PA),this.zonelessEnabled=Q(G0),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new mn,this.afterTick=new mn,this.componentTypes=[],this.components=[],this.isStable=Q(vs).hasPendingTasks.pipe(Me(t=>!t)),this._injector=Q(Un)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){let r=t instanceof Gp;if(!this._injector.get(BA).done){let E=!r&&kD(t),b=!1;throw new ee(405,b)}let a;r?a=t:a=this._injector.get(ml).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=wU(a)?void 0:this._injector.get(gs),u=i||a.selector,f=a.create(Cn.NULL,[],u,l),m=f.location.nativeElement,v=f.injector.get(FA,null);return v?.registerApplication(m),f.onDestroy(()=>{this.detachView(f.hostView),Sp(this.components,f),v?.unregisterApplication(m)}),this._loadComponent(f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ee(101,!1);let t=at(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,at(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ms,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<bU;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)IU(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>rm(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Sp(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(md,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Sp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Sp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function IU(n,e,t,i){if(!t&&!rm(n))return;vA(n,e,t&&!i?0:1)}var o0=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},vm=(()=>{class n{compileModuleSync(t){return new Jy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=ND(t),o=j1(r.declarations).reduce((a,l)=>{let u=fs(l);return u&&a.push(new gl(u)),a},[]);return new o0(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var CU=(()=>{class n{constructor(){this.zone=Q(ct),this.changeDetectionScheduler=Q(pl),this.applicationRef=Q(bs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function TU({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ct(Oe(Y({},SU()),{scheduleInRootZone:t})),[{provide:ct,useFactory:n},{provide:ul,multi:!0,useFactory:()=>{let i=Q(CU,{optional:!0});return()=>i.initialize()}},{provide:ul,multi:!0,useFactory:()=>{let i=Q(DU);return()=>{i.initialize()}}},e===!0?{provide:EA,useValue:!0}:[],{provide:IA,useValue:t??A1}]}function SU(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var DU=(()=>{class n{constructor(){this.subscription=new zt,this.initialized=!1,this.zone=Q(ct),this.pendingTasks=Q(vs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ct.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ct.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var AU=(()=>{class n{constructor(){this.appRef=Q(bs),this.taskService=Q(vs),this.ngZone=Q(ct),this.zonelessEnabled=Q(G0),this.disableScheduling=Q(EA,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new zt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zp):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Q(IA,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ry||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?KS:M1;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,KS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function MU(){return typeof $localize<"u"&&$localize.locale||Qp}var gd=new de("",{providedIn:"root",factory:()=>Q(gd,We.Optional|We.SkipSelf)||MU()});var s0=new de("");function bp(n){return!n.moduleRef}function xU(n){let e=bp(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ct);return t.run(()=>{bp(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(po,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),bp(n)){let o=()=>e.destroy(),a=n.platformInjector.get(s0);a.add(o),e.onDestroy(()=>{r.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(s0);a.add(o),n.moduleRef.onDestroy(()=>{Sp(n.allPlatformModules,n.moduleRef),r.unsubscribe(),a.delete(o)})}return EU(i,t,()=>{let o=e.get(BA);return o.runInitializers(),o.donePromise.then(()=>{let a=e.get(gd,Qp);if(oU(a||Qp),bp(n)){let l=e.get(bs);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return PU(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function PU(n,e){let t=n.injector.get(bs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ee(-403,!1);e.push(n)}var Dp=null,UA=new de("");function RU(n=[],e){return Cn.create({name:e,providers:[{provide:tm,useValue:"platform"},{provide:s0,useValue:new Set([()=>Dp=null])},...n]})}function OU(n=[]){if(Dp)return Dp;let e=RU(n);return e.get(UA,!1)||(Dp=e),yU(),kU(e),e}function kU(n){n.get(O0,null)?.forEach(t=>t())}var fi=(()=>{class n{static{this.__NG_ELEMENT_ID__=NU}}return n})();function NU(n){return LU(jn(),ut(),(n&16)===16)}function LU(n,e,t){if(im(n)&&!t){let i=_s(n.index,e);return new Ma(i,i)}else if(n.type&175){let i=e[Ar];return new Ma(i,e)}return null}var a0=class{constructor(){}supports(e){return AA(e)}create(e){return new c0(e)}},FU=(n,e)=>e,c0=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||FU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let a=!i||t&&t.currentIndex<pD(i,r,o)?t:i,l=pD(a,r,o),u=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(t=t._next,a.previousIndex==null)r++;else{o||(o=[]);let f=l-r,m=u-r;if(f!=m){for(let E=0;E<f;E++){let b=E<o.length?o[E]:o[E]=0,M=b+E;m<=M&&M<f&&(o[E]=b+1)}let v=a.previousIndex;o[v]=m-f}}l!==u&&e(a,l,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!AA(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,a;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],a=this._trackByFn(l,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,l),i=!0):(i&&(t=this._verifyReinsertion(t,o,a,l)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,TB(e,l=>{a=this._trackByFn(r,l),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,l,a,r),i=!0):(i&&(t=this._verifyReinsertion(t,l,a,r)),Object.is(t.item,l)||this._addIdentityChange(t,l)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new l0(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yp),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},l0=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},u0=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Yp=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new u0,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function pD(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function mD(){return new Y0([new a0])}var Y0=(()=>{class n{static{this.\u0275prov=le({token:n,providedIn:"root",factory:mD})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||mD()),deps:[[n,new h0,new Mn]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new ee(901,!1)}}return n})();function jA(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;try{let o=r?.injector??OU(i);if(o.get(UA,!1)===!0&&!n.platformRef)throw new ee(401,!1);let a=[TU({}),{provide:pl,useExisting:AU},...t||[]],l=new Kp({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return xU({r3Injector:l.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}}function Va(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ym(n,e){ws("NgSignals");let t=eS(n);return e?.equal&&(t[lo].equal=e.equal),t}function Es(n){let e=at(null);try{return n()}finally{at(e)}}function zA(n){let e=fs(n);if(!e)return null;let t=new gl(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ZA=null;function So(){return ZA}function QA(n){ZA??=n}var Am=class{};var vn=new de(""),aw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(BU),providedIn:"platform"})}}return n})(),YA=new de(""),BU=(()=>{class n extends aw{constructor(){super(),this._doc=Q(vn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return So().getBaseHref(this._doc)}onPopState(t){let i=So().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=So().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function cw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function $A(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function Io(n){return n&&n[0]!=="?"?"?"+n:n}var Do=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(lw),providedIn:"root"})}}return n})(),JA=new de(""),lw=(()=>{class n extends Do{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Q(vn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cw(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Io(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Io(o));this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Io(o));this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(ge(aw),ge(JA,8))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),XA=(()=>{class n extends Do{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=cw(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Io(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Io(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(ge(aw),ge(JA,8))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),bl=(()=>{class n{constructor(t){this._subject=new Qe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=zU($A(HA(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Io(i))}normalize(t){return n.stripTrailingSlash(jU(this._basePath,HA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Io(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Io(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=Io}static{this.joinWithSlash=cw}static{this.stripTrailingSlash=$A}static{this.\u0275fac=function(i){return new(i||n)(ge(Do))}}static{this.\u0275prov=le({token:n,factory:()=>UU(),providedIn:"root"})}}return n})();function UU(){return new bl(ge(Do))}function jU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function HA(n){return n.replace(/\/index.html$/,"")}function zU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var eM=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(eM||{});var zn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(zn||{}),Ct=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ct||{}),pi=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(pi||{}),mi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function $U(n){return ui(n)[$t.LocaleId]}function HU(n,e,t){let i=ui(n),r=[i[$t.DayPeriodsFormat],i[$t.DayPeriodsStandalone]],o=Vi(r,e);return Vi(o,t)}function qU(n,e,t){let i=ui(n),r=[i[$t.DaysFormat],i[$t.DaysStandalone]],o=Vi(r,e);return Vi(o,t)}function GU(n,e,t){let i=ui(n),r=[i[$t.MonthsFormat],i[$t.MonthsStandalone]],o=Vi(r,e);return Vi(o,t)}function WU(n,e){let i=ui(n)[$t.Eras];return Vi(i,e)}function wm(n,e){let t=ui(n);return Vi(t[$t.DateFormat],e)}function bm(n,e){let t=ui(n);return Vi(t[$t.TimeFormat],e)}function Em(n,e){let i=ui(n)[$t.DateTimeFormat];return Vi(i,e)}function Co(n,e){let t=ui(n),i=t[$t.NumberSymbols][e];if(typeof i>"u"){if(e===mi.CurrencyDecimal)return t[$t.NumberSymbols][mi.Decimal];if(e===mi.CurrencyGroup)return t[$t.NumberSymbols][mi.Group]}return i}function KU(n,e){return ui(n)[$t.NumberFormats][e]}function tM(n){if(!n[$t.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[$t.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ZU(n){let e=ui(n);return tM(e),(e[$t.ExtraData][2]||[]).map(i=>typeof i=="string"?J0(i):[J0(i[0]),J0(i[1])])}function QU(n,e,t){let i=ui(n);tM(i);let r=[i[$t.ExtraData][0],i[$t.ExtraData][1]],o=Vi(r,e)||[];return Vi(o,t)||[]}function Vi(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function J0(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var YU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Im={},JU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,To=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(To||{}),gt=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(gt||{}),mt=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(mt||{});function XU(n,e,t,i){let r=c5(n);e=Eo(t,e)||e;let a=[],l;for(;e;)if(l=JU.exec(e),l){a=a.concat(l.slice(1));let m=a.pop();if(!m)break;e=m}else{a.push(e);break}let u=r.getTimezoneOffset();i&&(u=iM(i,u),r=a5(r,i,!0));let f="";return a.forEach(m=>{let v=o5(m);f+=v?v(r,t,u):m==="''"?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function Mm(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Eo(n,e){let t=$U(n);if(Im[t]??={},Im[t][e])return Im[t][e];let i="";switch(e){case"shortDate":i=wm(n,pi.Short);break;case"mediumDate":i=wm(n,pi.Medium);break;case"longDate":i=wm(n,pi.Long);break;case"fullDate":i=wm(n,pi.Full);break;case"shortTime":i=bm(n,pi.Short);break;case"mediumTime":i=bm(n,pi.Medium);break;case"longTime":i=bm(n,pi.Long);break;case"fullTime":i=bm(n,pi.Full);break;case"short":let r=Eo(n,"shortTime"),o=Eo(n,"shortDate");i=Cm(Em(n,pi.Short),[r,o]);break;case"medium":let a=Eo(n,"mediumTime"),l=Eo(n,"mediumDate");i=Cm(Em(n,pi.Medium),[a,l]);break;case"long":let u=Eo(n,"longTime"),f=Eo(n,"longDate");i=Cm(Em(n,pi.Long),[u,f]);break;case"full":let m=Eo(n,"fullTime"),v=Eo(n,"fullDate");i=Cm(Em(n,pi.Full),[m,v]);break}return i&&(Im[t][e]=i),i}function Cm(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function cr(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let a=String(n);for(;a.length<e;)a="0"+a;return i&&(a=a.slice(a.length-e)),o+a}function e5(n,e){return cr(n,3).substring(0,e)}function Jt(n,e,t=0,i=!1,r=!1){return function(o,a){let l=t5(n,o);if((t>0||l>-t)&&(l+=t),n===gt.Hours)l===0&&t===-12&&(l=12);else if(n===gt.FractionalSeconds)return e5(l,e);let u=Co(a,mi.MinusSign);return cr(l,e,u,i,r)}}function t5(n,e){switch(n){case gt.FullYear:return e.getFullYear();case gt.Month:return e.getMonth();case gt.Date:return e.getDate();case gt.Hours:return e.getHours();case gt.Minutes:return e.getMinutes();case gt.Seconds:return e.getSeconds();case gt.FractionalSeconds:return e.getMilliseconds();case gt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Rt(n,e,t=zn.Format,i=!1){return function(r,o){return n5(r,o,n,e,t,i)}}function n5(n,e,t,i,r,o){switch(t){case mt.Months:return GU(e,r,i)[n.getMonth()];case mt.Days:return qU(e,r,i)[n.getDay()];case mt.DayPeriods:let a=n.getHours(),l=n.getMinutes();if(o){let f=ZU(e),m=QU(e,r,i),v=f.findIndex(E=>{if(Array.isArray(E)){let[b,M]=E,k=a>=b.hours&&l>=b.minutes,N=a<M.hours||a===M.hours&&l<M.minutes;if(b.hours<M.hours){if(k&&N)return!0}else if(k||N)return!0}else if(E.hours===a&&E.minutes===l)return!0;return!1});if(v!==-1)return m[v]}return HU(e,r,i)[a<12?0:1];case mt.Eras:return WU(e,i)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Tm(n){return function(e,t,i){let r=-1*i,o=Co(t,mi.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case To.Short:return(r>=0?"+":"")+cr(a,2,o)+cr(Math.abs(r%60),2,o);case To.ShortGMT:return"GMT"+(r>=0?"+":"")+cr(a,1,o);case To.Long:return"GMT"+(r>=0?"+":"")+cr(a,2,o)+":"+cr(Math.abs(r%60),2,o);case To.Extended:return i===0?"Z":(r>=0?"+":"")+cr(a,2,o)+":"+cr(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var i5=0,Dm=4;function r5(n){let e=Mm(n,i5,1).getDay();return Mm(n,0,1+(e<=Dm?Dm:Dm+7)-e)}function nM(n){let e=n.getDay(),t=e===0?-3:Dm-e;return Mm(n.getFullYear(),n.getMonth(),n.getDate()+t)}function X0(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,a=t.getDate();r=1+Math.floor((a+o)/7)}else{let o=nM(t),a=r5(o.getFullYear()),l=o.getTime()-a.getTime();r=1+Math.round(l/6048e5)}return cr(r,n,Co(i,mi.MinusSign))}}function Sm(n,e=!1){return function(t,i){let o=nM(t).getFullYear();return cr(o,n,Co(i,mi.MinusSign),e)}}var ew={};function o5(n){if(ew[n])return ew[n];let e;switch(n){case"G":case"GG":case"GGG":e=Rt(mt.Eras,Ct.Abbreviated);break;case"GGGG":e=Rt(mt.Eras,Ct.Wide);break;case"GGGGG":e=Rt(mt.Eras,Ct.Narrow);break;case"y":e=Jt(gt.FullYear,1,0,!1,!0);break;case"yy":e=Jt(gt.FullYear,2,0,!0,!0);break;case"yyy":e=Jt(gt.FullYear,3,0,!1,!0);break;case"yyyy":e=Jt(gt.FullYear,4,0,!1,!0);break;case"Y":e=Sm(1);break;case"YY":e=Sm(2,!0);break;case"YYY":e=Sm(3);break;case"YYYY":e=Sm(4);break;case"M":case"L":e=Jt(gt.Month,1,1);break;case"MM":case"LL":e=Jt(gt.Month,2,1);break;case"MMM":e=Rt(mt.Months,Ct.Abbreviated);break;case"MMMM":e=Rt(mt.Months,Ct.Wide);break;case"MMMMM":e=Rt(mt.Months,Ct.Narrow);break;case"LLL":e=Rt(mt.Months,Ct.Abbreviated,zn.Standalone);break;case"LLLL":e=Rt(mt.Months,Ct.Wide,zn.Standalone);break;case"LLLLL":e=Rt(mt.Months,Ct.Narrow,zn.Standalone);break;case"w":e=X0(1);break;case"ww":e=X0(2);break;case"W":e=X0(1,!0);break;case"d":e=Jt(gt.Date,1);break;case"dd":e=Jt(gt.Date,2);break;case"c":case"cc":e=Jt(gt.Day,1);break;case"ccc":e=Rt(mt.Days,Ct.Abbreviated,zn.Standalone);break;case"cccc":e=Rt(mt.Days,Ct.Wide,zn.Standalone);break;case"ccccc":e=Rt(mt.Days,Ct.Narrow,zn.Standalone);break;case"cccccc":e=Rt(mt.Days,Ct.Short,zn.Standalone);break;case"E":case"EE":case"EEE":e=Rt(mt.Days,Ct.Abbreviated);break;case"EEEE":e=Rt(mt.Days,Ct.Wide);break;case"EEEEE":e=Rt(mt.Days,Ct.Narrow);break;case"EEEEEE":e=Rt(mt.Days,Ct.Short);break;case"a":case"aa":case"aaa":e=Rt(mt.DayPeriods,Ct.Abbreviated);break;case"aaaa":e=Rt(mt.DayPeriods,Ct.Wide);break;case"aaaaa":e=Rt(mt.DayPeriods,Ct.Narrow);break;case"b":case"bb":case"bbb":e=Rt(mt.DayPeriods,Ct.Abbreviated,zn.Standalone,!0);break;case"bbbb":e=Rt(mt.DayPeriods,Ct.Wide,zn.Standalone,!0);break;case"bbbbb":e=Rt(mt.DayPeriods,Ct.Narrow,zn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Rt(mt.DayPeriods,Ct.Abbreviated,zn.Format,!0);break;case"BBBB":e=Rt(mt.DayPeriods,Ct.Wide,zn.Format,!0);break;case"BBBBB":e=Rt(mt.DayPeriods,Ct.Narrow,zn.Format,!0);break;case"h":e=Jt(gt.Hours,1,-12);break;case"hh":e=Jt(gt.Hours,2,-12);break;case"H":e=Jt(gt.Hours,1);break;case"HH":e=Jt(gt.Hours,2);break;case"m":e=Jt(gt.Minutes,1);break;case"mm":e=Jt(gt.Minutes,2);break;case"s":e=Jt(gt.Seconds,1);break;case"ss":e=Jt(gt.Seconds,2);break;case"S":e=Jt(gt.FractionalSeconds,1);break;case"SS":e=Jt(gt.FractionalSeconds,2);break;case"SSS":e=Jt(gt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Tm(To.Short);break;case"ZZZZZ":e=Tm(To.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Tm(To.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Tm(To.Long);break;default:return null}return ew[n]=e,e}function iM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function s5(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function a5(n,e,t){let i=t?-1:1,r=n.getTimezoneOffset(),o=iM(e,r);return s5(n,i*(o-r))}function c5(n){if(qA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,a=1]=n.split("-").map(l=>+l);return Mm(r,o-1,a)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(YU))return l5(i)}let e=new Date(n);if(!qA(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function l5(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let a=Number(n[4]||0)-t,l=Number(n[5]||0)-i,u=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,a,l,u,f),e}function qA(n){return n instanceof Date&&!isNaN(n.valueOf())}var u5=/^(\d+)?\.((\d+)(-(\d+))?)?$/,GA=22,xm=".",_d="0",d5=";",h5=",",tw="#";function f5(n,e,t,i,r,o,a=!1){let l="",u=!1;if(!isFinite(n))l=Co(t,mi.Infinity);else{let f=_5(n);a&&(f=g5(f));let m=e.minInt,v=e.minFrac,E=e.maxFrac;if(o){let te=o.match(u5);if(te===null)throw new Error(`${o} is not a valid digit info`);let J=te[1],ue=te[3],Ne=te[5];J!=null&&(m=nw(J)),ue!=null&&(v=nw(ue)),Ne!=null?E=nw(Ne):ue!=null&&v>E&&(E=v)}v5(f,v,E);let b=f.digits,M=f.integerLen,k=f.exponent,N=[];for(u=b.every(te=>!te);M<m;M++)b.unshift(0);for(;M<0;M++)b.unshift(0);M>0?N=b.splice(M,b.length):(N=b,b=[0]);let G=[];for(b.length>=e.lgSize&&G.unshift(b.splice(-e.lgSize,b.length).join(""));b.length>e.gSize;)G.unshift(b.splice(-e.gSize,b.length).join(""));b.length&&G.unshift(b.join("")),l=G.join(Co(t,i)),N.length&&(l+=Co(t,r)+N.join("")),k&&(l+=Co(t,mi.Exponential)+"+"+k)}return n<0&&!u?l=e.negPre+l+e.negSuf:l=e.posPre+l+e.posSuf,l}function p5(n,e,t){let i=KU(e,eM.Decimal),r=m5(i,Co(e,mi.MinusSign));return f5(n,r,e,mi.Group,mi.Decimal,t)}function m5(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(d5),r=i[0],o=i[1],a=r.indexOf(xm)!==-1?r.split(xm):[r.substring(0,r.lastIndexOf(_d)+1),r.substring(r.lastIndexOf(_d)+1)],l=a[0],u=a[1]||"";t.posPre=l.substring(0,l.indexOf(tw));for(let m=0;m<u.length;m++){let v=u.charAt(m);v===_d?t.minFrac=t.maxFrac=m+1:v===tw?t.maxFrac=m+1:t.posSuf+=v}let f=l.split(h5);if(t.gSize=f[1]?f[1].length:0,t.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let m=r.length-t.posPre.length-t.posSuf.length,v=o.indexOf(tw);t.negPre=o.substring(0,v).replace(/'/g,""),t.negSuf=o.slice(v+m).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function g5(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function _5(n){let e=Math.abs(n)+"",t=0,i,r,o,a,l;for((r=e.indexOf(xm))>-1&&(e=e.replace(xm,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===_d;o++);if(o===(l=e.length))i=[0],r=1;else{for(l--;e.charAt(l)===_d;)l--;for(r-=o,i=[],a=0;o<=l;o++,a++)i[a]=Number(e.charAt(o))}return r>GA&&(i=i.splice(0,GA-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function v5(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),a=o+n.integerLen,l=i[a];if(a>0){i.splice(Math.max(n.integerLen,a));for(let v=a;v<i.length;v++)i[v]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let v=1;v<a;v++)i[v]=0}if(l>=5)if(a-1<0){for(let v=0;v>a;v--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[a-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+n.integerLen,m=i.reduceRight(function(v,E,b,M){return E=E+v,M[b]=E<10?E:E-10,u&&(M[b]===0&&b>=f?M.pop():u=!1),E>=10?1:0},0);m&&(i.unshift(m),n.integerLen++)}function nw(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Pm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var iw=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Yn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,a)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new iw(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),WA(l,r)}});for(let r=0,o=i.length;r<o;r++){let l=i.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);WA(o,r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(oe(ys),oe(xa),oe(Y0))}}static{this.\u0275dir=Tn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function WA(n,e){n.context.$implicit=e.item}var Xt=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new rw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){KA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){KA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(oe(ys),oe(xa))}}static{this.\u0275dir=Tn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),rw=class{constructor(){this.$implicit=null,this.ngIf=null}};function KA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Bn(e)}'.`)}function rM(n,e){return new ee(2100,!1)}var y5="mediumDate",w5=new de(""),b5=new de(""),oM=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let a=i??this.defaultOptions?.dateFormat??y5,l=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return XU(t,a,o||this.locale,l)}catch(a){throw rM(n,a.message)}}static{this.\u0275fac=function(i){return new(i||n)(oe(gd,16),oe(w5,24),oe(b5,24))}}static{this.\u0275pipe=m0({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var sM=(()=>{class n{constructor(t){this._locale=t}transform(t,i,r){if(!E5(t))return null;r||=this._locale;try{let o=I5(t);return p5(o,r,i)}catch(o){throw rM(n,o.message)}}static{this.\u0275fac=function(i){return new(i||n)(oe(gd,16))}}static{this.\u0275pipe=m0({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function E5(n){return!(n==null||n===""||n!==n)}function I5(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Tt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Pr({type:n})}static{this.\u0275inj=xr({})}}return n})(),uw="browser",C5="server";function T5(n){return n===uw}function Rm(n){return n===C5}var aM=(()=>{class n{static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>T5(Q(Li))?new ow(Q(vn),window):new sw})}}return n})(),ow=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=S5(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function S5(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}var sw=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},wl=class{};var yd=class{},km=class{},Ao=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=r.toLowerCase(),a=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(l=>o.indexOf(l)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var hw=class{encodeKey(e){return cM(e)}encodeValue(e){return cM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function D5(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[a,l]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],u=t.get(a)||[];u.push(l),t.set(a,u)}),t}var A5=/%(\d[a-f0-9])/gi,M5={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function cM(n){return encodeURIComponent(n).replace(A5,(e,t)=>M5[t]??e)}function Om(n){return`${n}`}var Cs=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new hw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=D5(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Om):[Om(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Om(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Om(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var fw=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function x5(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function lM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function uM(n){return typeof Blob<"u"&&n instanceof Blob}function dM(n){return typeof FormData<"u"&&n instanceof FormData}function P5(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var vd=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(x5(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ao,this.context??=new fw,!this.params)this.params=new Cs,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let l=t.indexOf("?"),u=l===-1?"?":l<t.length-1?"&":"";this.urlWithParams=t+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||lM(this.body)||uM(this.body)||dM(this.body)||P5(this.body)?this.body:this.body instanceof Cs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||dM(this.body)?null:uM(this.body)?this.body.type||null:lM(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Cs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,l=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,f=e.headers||this.headers,m=e.params||this.params,v=e.context??this.context;return e.setHeaders!==void 0&&(f=Object.keys(e.setHeaders).reduce((E,b)=>E.set(b,e.setHeaders[b]),f)),e.setParams&&(m=Object.keys(e.setParams).reduce((E,b)=>E.set(b,e.setParams[b]),m)),new n(t,i,a,{params:m,headers:f,context:v,reportProgress:u,responseType:r,withCredentials:l,transferCache:o})}},lr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(lr||{}),wd=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new Ao,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Nm=class n extends wd{constructor(e={}){super(e),this.type=lr.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},bd=class n extends wd{constructor(e={}){super(e),this.type=lr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Is=class extends wd{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},mM=200,R5=204;function dw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var gw=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof vd)o=t;else{let u;r.headers instanceof Ao?u=r.headers:u=new Ao(r.headers);let f;r.params&&(r.params instanceof Cs?f=r.params:f=new Cs({fromObject:r.params})),o=new vd(t,i,r.body!==void 0?r.body:null,{headers:u,context:r.context,params:f,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let a=Se(o).pipe(uo(u=>this.handler.handle(u)));if(t instanceof vd||r.observe==="events")return a;let l=a.pipe(Kn(u=>u instanceof bd));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(Me(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(Me(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(Me(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return l.pipe(Me(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Cs().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,dw(r,i))}post(t,i,r={}){return this.request("POST",t,dw(r,i))}put(t,i,r={}){return this.request("PUT",t,dw(r,i))}static{this.\u0275fac=function(i){return new(i||n)(ge(yd))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),O5=/^\)\]\}',?\n/,k5="X-Request-URL";function hM(n){if(n.url)return n.url;let e=k5.toLocaleLowerCase();return n.headers.get(e)}var N5=(()=>{class n{constructor(){this.fetchImpl=Q(pw,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=Q(ct)}handle(t){return new ze(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(mw,o=>i.error(new Is({error:o}))),()=>r.abort()})}doRequest(t,i,r){return T(this,null,function*(){let o=this.createRequestInit(t),a;try{let b=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,Y({signal:i},o)));L5(b),r.next({type:lr.Sent}),a=yield b}catch(b){r.error(new Is({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}));return}let l=new Ao(a.headers),u=a.statusText,f=hM(a)??t.urlWithParams,m=a.status,v=null;if(t.reportProgress&&r.next(new Nm({headers:l,status:m,statusText:u,url:f})),a.body){let b=a.headers.get("content-length"),M=[],k=a.body.getReader(),N=0,G,te,J=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>T(this,null,function*(){for(;;){let{done:Ne,value:he}=yield k.read();if(Ne)break;if(M.push(he),N+=he.length,t.reportProgress){te=t.responseType==="text"?(te??"")+(G??=new TextDecoder).decode(he,{stream:!0}):void 0;let R=()=>r.next({type:lr.DownloadProgress,total:b?+b:void 0,loaded:N,partialText:te});J?J.run(R):R()}}}));let ue=this.concatChunks(M,N);try{let Ne=a.headers.get("Content-Type")??"";v=this.parseBody(t,ue,Ne)}catch(Ne){r.error(new Is({error:Ne,headers:new Ao(a.headers),status:a.status,statusText:a.statusText,url:hM(a)??t.urlWithParams}));return}}m===0&&(m=v?mM:0),m>=200&&m<300?(r.next(new bd({body:v,headers:l,status:m,statusText:u,url:f})),r.complete()):r.error(new Is({error:v,headers:l,status:m,statusText:u,url:f}))})}parseBody(t,i,r){switch(t.responseType){case"json":let o=new TextDecoder().decode(i).replace(O5,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((o,a)=>i[o]=a.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),o=0;for(let a of t)r.set(a,o),o+=a.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),pw=class{};function mw(){}function L5(n){n.then(mw,mw)}function F5(n,e){return e(n)}function V5(n,e,t){return(i,r)=>Oi(t,()=>e(i,o=>n(o,r)))}var gM=new de(""),B5=new de(""),U5=new de("",{providedIn:"root",factory:()=>!0});var fM=(()=>{class n extends yd{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Q(vs),this.contributeToStability=Q(U5)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(gM),...this.injector.get(B5,[])]));this.chain=i.reduceRight((r,o)=>V5(r,o,this.injector),F5)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(_a(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(ge(km),ge(Un))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();var j5=/^\)\]\}',?\n/;function z5(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var pM=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ee(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?xt(i.\u0275loadImpl()):Se(null)).pipe(Zn(()=>new ze(o=>{let a=i.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((k,N)=>a.setRequestHeader(k,N.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let k=t.detectContentTypeHeader();k!==null&&a.setRequestHeader("Content-Type",k)}if(t.responseType){let k=t.responseType.toLowerCase();a.responseType=k!=="json"?k:"text"}let l=t.serializeBody(),u=null,f=()=>{if(u!==null)return u;let k=a.statusText||"OK",N=new Ao(a.getAllResponseHeaders()),G=z5(a)||t.url;return u=new Nm({headers:N,status:a.status,statusText:k,url:G}),u},m=()=>{let{headers:k,status:N,statusText:G,url:te}=f(),J=null;N!==R5&&(J=typeof a.response>"u"?a.responseText:a.response),N===0&&(N=J?mM:0);let ue=N>=200&&N<300;if(t.responseType==="json"&&typeof J=="string"){let Ne=J;J=J.replace(j5,"");try{J=J!==""?JSON.parse(J):null}catch(he){J=Ne,ue&&(ue=!1,J={error:he,text:J})}}ue?(o.next(new bd({body:J,headers:k,status:N,statusText:G,url:te||void 0})),o.complete()):o.error(new Is({error:J,headers:k,status:N,statusText:G,url:te||void 0}))},v=k=>{let{url:N}=f(),G=new Is({error:k,status:a.status||0,statusText:a.statusText||"Unknown Error",url:N||void 0});o.error(G)},E=!1,b=k=>{E||(o.next(f()),E=!0);let N={type:lr.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(N.total=k.total),t.responseType==="text"&&a.responseText&&(N.partialText=a.responseText),o.next(N)},M=k=>{let N={type:lr.UploadProgress,loaded:k.loaded};k.lengthComputable&&(N.total=k.total),o.next(N)};return a.addEventListener("load",m),a.addEventListener("error",v),a.addEventListener("timeout",v),a.addEventListener("abort",v),t.reportProgress&&(a.addEventListener("progress",b),l!==null&&a.upload&&a.upload.addEventListener("progress",M)),a.send(l),o.next({type:lr.Sent}),()=>{a.removeEventListener("error",v),a.removeEventListener("abort",v),a.removeEventListener("load",m),a.removeEventListener("timeout",v),t.reportProgress&&(a.removeEventListener("progress",b),l!==null&&a.upload&&a.upload.removeEventListener("progress",M)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(ge(wl))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),_M=new de(""),$5="XSRF-TOKEN",H5=new de("",{providedIn:"root",factory:()=>$5}),q5="X-XSRF-TOKEN",G5=new de("",{providedIn:"root",factory:()=>q5}),Lm=class{},W5=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pm(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(ge(vn),ge(Li),ge(H5))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function K5(n,e){let t=n.url.toLowerCase();if(!Q(_M)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=Q(Lm).getToken(),r=Q(G5);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}function vM(...n){let e=[gw,pM,fM,{provide:yd,useExisting:fM},{provide:km,useFactory:()=>Q(N5,{optional:!0})??Q(pM)},{provide:gM,useValue:K5,multi:!0},{provide:_M,useValue:!0},{provide:Lm,useClass:W5}];for(let t of n)e.push(...t.\u0275providers);return rr(e)}var yw=class extends Am{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ww=class n extends yw{static makeCurrent(){QA(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Q5();return t==null?null:Y5(t)}resetBaseElement(){Ed=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pm(document.cookie,e)}},Ed=null;function Q5(){return Ed=Ed||document.querySelector("base"),Ed?Ed.getAttribute("href"):null}function Y5(n){return new URL(n,document.baseURI).pathname}var J5=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),bw=new de(""),bM=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(ge(bw),ge(ct))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),Fm=class{constructor(e){this._doc=e}},_w="ng-app-id",EM=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rm(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${_w}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(_w),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(_w,this.appId),t.appendChild(a),a}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(ge(vn),ge(R0),ge(N0,8),ge(Li))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),vw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Iw=/%COMP%/g,IM="%COMP%",X5=`_nghost-${IM}`,ej=`_ngcontent-${IM}`,tj=!0,nj=new de("",{providedIn:"root",factory:()=>tj});function ij(n){return ej.replace(Iw,n)}function rj(n){return X5.replace(Iw,n)}function CM(n,e){return e.map(t=>t.replace(Iw,n))}var Vm=(()=>{class n{constructor(t,i,r,o,a,l,u,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Rm(l),this.defaultRenderer=new Id(t,a,u,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Sr.ShadowDom&&(i=Oe(Y({},i),{encapsulation:Sr.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Bm?r.applyToHost(t):r instanceof Cd&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,l=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(i.encapsulation){case Sr.Emulated:o=new Bm(u,f,i,this.appId,m,a,l,v);break;case Sr.ShadowDom:return new Ew(u,f,t,i,a,l,this.nonce,v);default:o=new Cd(u,f,i,m,a,l,v);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(ge(bM),ge(EM),ge(R0),ge(nj),ge(vn),ge(Li),ge(ct),ge(N0))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),Id=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(vw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yM(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(yM(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ee(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=vw[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=vw[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(mo.DashCase|mo.Important)?e.style.setProperty(t,i,r&mo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&mo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=So().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function yM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ew=class extends Id{constructor(e,t,i,r,o,a,l,u){super(e,o,a,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=CM(r.id,r.styles);for(let m of f){let v=document.createElement("style");l&&v.setAttribute("nonce",l),v.textContent=m,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cd=class extends Id{constructor(e,t,i,r,o,a,l,u){super(e,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=u?CM(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Bm=class extends Cd{constructor(e,t,i,r,o,a,l,u){let f=r+"-"+i.id;super(e,t,i,o,a,l,u,f),this.contentAttr=ij(f),this.hostAttr=rj(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},oj=(()=>{class n extends Fm{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(ge(vn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),wM=["alt","control","meta","shift"],sj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},aj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},cj=(()=>{class n extends Fm{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>So().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),wM.forEach(f=>{let m=i.indexOf(f);m>-1&&(i.splice(m,1),a+=f+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(t,i){let r=sj[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),wM.forEach(a=>{if(a!==r){let l=aj[a];l(t)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(ge(vn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function TM(n,e,t){return jA(Y({rootComponent:n,platformRef:t?.platformRef},lj(e)))}function lj(n){return{appProviders:[...pj,...n?.providers??[]],platformProviders:fj}}function uj(){ww.makeCurrent()}function dj(){return new po}function hj(){return L1(document),document}var fj=[{provide:Li,useValue:uw},{provide:O0,useValue:uj,multi:!0},{provide:vn,useFactory:hj,deps:[]}];var pj=[{provide:tm,useValue:"root"},{provide:po,useFactory:dj,deps:[]},{provide:bw,useClass:oj,multi:!0,deps:[vn,ct,Li]},{provide:bw,useClass:cj,multi:!0,deps:[vn]},Vm,EM,bM,{provide:ms,useExisting:Vm},{provide:wl,useClass:J5,deps:[]},[]];var SM=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(ge(vn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var He="primary",Bd=Symbol("RouteTitle"),Aw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Dl(n){return new Aw(n)}function gj(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],l=n[o];if(a[0]===":")r[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function _j(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Nr(n[t],e[t]))return!1;return!0}function Nr(n,e){let t=n?Mw(n):void 0,i=e?Mw(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!FM(n[r],e[r]))return!1;return!0}function Mw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function FM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function VM(n){return n.length>0?n[n.length-1]:null}function Ds(n){return Gv(n)?n:Fa(n)?xt(Promise.resolve(n)):Se(n)}var vj={exact:UM,subset:jM},BM={exact:yj,subset:wj,ignored:()=>!0};function DM(n,e,t){return vj[t.paths](n.root,e.root,t.matrixParams)&&BM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function yj(n,e){return Nr(n,e)}function UM(n,e,t){if(!Ua(n.segments,e.segments)||!zm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!UM(n.children[i],e.children[i],t))return!1;return!0}function wj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>FM(n[t],e[t]))}function jM(n,e,t){return zM(n,e,e.segments,t)}function zM(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Ua(r,t)||e.hasChildren()||!zm(r,t,i))}else if(n.segments.length===t.length){if(!Ua(n.segments,t)||!zm(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!jM(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ua(n.segments,r)||!zm(n.segments,r,i)||!n.children[He]?!1:zM(n.children[He],e,o,i)}}function zm(n,e,t){return e.every((i,r)=>BM[t](n[r].parameters,i.parameters))}var xo=class{constructor(e=new yt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Dl(this.queryParams),this._queryParamMap}toString(){return Ij.serialize(this)}},yt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $m(this)}},Ba=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Dl(this.parameters),this._parameterMap}toString(){return HM(this)}};function bj(n,e){return Ua(n,e)&&n.every((t,i)=>Nr(t.parameters,e[i].parameters))}function Ua(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function Ej(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===He&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==He&&(t=t.concat(e(r,i)))}),t}var Ud=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>new Al,providedIn:"root"})}}return n})(),Al=class{parse(e){let t=new Pw(e);return new xo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Td(e.root,!0)}`,i=Sj(e.queryParams),r=typeof e.fragment=="string"?`#${Cj(e.fragment)}`:"";return`${t}${i}${r}`}},Ij=new Al;function $m(n){return n.segments.map(e=>HM(e)).join("/")}function Td(n,e){if(!n.hasChildren())return $m(n);if(e){let t=n.children[He]?Td(n.children[He],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==He&&i.push(`${r}:${Td(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Ej(n,(i,r)=>r===He?[Td(n.children[He],!1)]:[`${r}:${Td(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[He]!=null?`${$m(n)}/${t[0]}`:`${$m(n)}/(${t.join("//")})`}}function $M(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Um(n){return $M(n).replace(/%3B/gi,";")}function Cj(n){return encodeURI(n)}function xw(n){return $M(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hm(n){return decodeURIComponent(n)}function AM(n){return Hm(n.replace(/\+/g,"%20"))}function HM(n){return`${xw(n.path)}${Tj(n.parameters)}`}function Tj(n){return Object.entries(n).map(([e,t])=>`;${xw(e)}=${xw(t)}`).join("")}function Sj(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Um(t)}=${Um(r)}`).join("&"):`${Um(t)}=${Um(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Dj=/^[^\/()?;#]+/;function Cw(n){let e=n.match(Dj);return e?e[0]:""}var Aj=/^[^\/()?;=#]+/;function Mj(n){let e=n.match(Aj);return e?e[0]:""}var xj=/^[^=?&#]+/;function Pj(n){let e=n.match(xj);return e?e[0]:""}var Rj=/^[^&#]+/;function Oj(n){let e=n.match(Rj);return e?e[0]:""}var Pw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new yt([],{}):new yt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[He]=new yt(e,t)),i}parseSegment(){let e=Cw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new Ba(Hm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Mj(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Cw(this.remaining);r&&(i=r,this.capture(i))}e[Hm(t)]=Hm(i)}parseQueryParam(e){let t=Pj(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=Oj(this.remaining);a&&(i=a,this.capture(i))}let r=AM(t),o=AM(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Cw(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ee(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=He);let a=this.parseChildren();t[o]=Object.keys(a).length===1?a[He]:new yt([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function qM(n){return n.segments.length>0?new yt([],{[He]:n}):n}function GM(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=GM(r);if(i===He&&o.segments.length===0&&o.hasChildren())for(let[a,l]of Object.entries(o.children))e[a]=l;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new yt(n.segments,e);return kj(t)}function kj(n){if(n.numberOfChildren===1&&n.children[He]){let e=n.children[He];return new yt(n.segments.concat(e.segments),e.children)}return n}function ja(n){return n instanceof xo}function Nj(n,e,t=null,i=null){let r=WM(n);return KM(r,e,t,i)}function WM(n){let e;function t(o){let a={};for(let u of o.children){let f=t(u);a[u.outlet]=f}let l=new yt(o.url,a);return o===n&&(e=l),l}let i=t(n.root),r=qM(i);return e??r}function KM(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Tw(r,r,r,t,i);let o=Lj(e);if(o.toRoot())return Tw(r,r,new yt([],{}),t,i);let a=Fj(o,r,n),l=a.processChildren?Ad(a.segmentGroup,a.index,o.commands):QM(a.segmentGroup,a.index,o.commands);return Tw(r,a.segmentGroup,l,t,i)}function qm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Pd(n){return typeof n=="object"&&n!=null&&n.outlets}function Tw(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let a;n===e?a=t:a=ZM(n,e,t);let l=qM(GM(a));return new xo(l,o,r)}function ZM(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=ZM(o,e,t)}),new yt(n.segments,i)}var Gm=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&qm(i[0]))throw new ee(4003,!1);let r=i.find(Pd);if(r&&r!==VM(i))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Lj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Gm(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([u,f])=>{l[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?t=!0:l===".."?e++:l!=""&&r.push(l))}),r):[...r,o]},[]);return new Gm(t,e,i)}var Cl=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function Fj(n,e,t){if(n.isAbsolute)return new Cl(e,!0,0);if(!t)return new Cl(e,!1,NaN);if(t.parent===null)return new Cl(t,!0,0);let i=qm(n.commands[0])?0:1,r=t.segments.length-1+i;return Vj(t,r,n.numberOfDoubleDots)}function Vj(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ee(4005,!1);r=i.segments.length}return new Cl(i,!1,r-o)}function Bj(n){return Pd(n[0])?n[0].outlets:{[He]:n}}function QM(n,e,t){if(n??=new yt([],{}),n.segments.length===0&&n.hasChildren())return Ad(n,e,t);let i=Uj(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new yt(n.segments.slice(0,i.pathIndex),{});return o.children[He]=new yt(n.segments.slice(i.pathIndex),n.children),Ad(o,0,r)}else return i.match&&r.length===0?new yt(n.segments,{}):i.match&&!n.hasChildren()?Rw(n,e,t):i.match?Ad(n,0,r):Rw(n,e,t)}function Ad(n,e,t){if(t.length===0)return new yt(n.segments,{});{let i=Bj(t),r={};if(Object.keys(i).some(o=>o!==He)&&n.children[He]&&n.numberOfChildren===1&&n.children[He].segments.length===0){let o=Ad(n.children[He],e,t);return new yt(n.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=QM(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new yt(n.segments,r)}}function Uj(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let a=n.segments[r],l=t[i];if(Pd(l))break;let u=`${l}`,f=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!xM(u,f,a))return o;i+=2}else{if(!xM(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Rw(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Pd(o)){let u=jj(o.outlets);return new yt(i,u)}if(r===0&&qm(t[0])){let u=n.segments[e];i.push(new Ba(u.path,MM(t[0]))),r++;continue}let a=Pd(o)?o.outlets[He]:`${o}`,l=r<t.length-1?t[r+1]:null;a&&l&&qm(l)?(i.push(new Ba(a,MM(l))),r+=2):(i.push(new Ba(a,{})),r++)}return new yt(i,{})}function jj(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Rw(new yt([],{}),0,i))}),e}function MM(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function xM(n,e,t){return n==t.path&&Nr(e,t.parameters)}var Md="imperative",yn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(yn||{}),Ui=class{constructor(e,t){this.id=e,this.url=t}},Ml=class extends Ui{constructor(e,t,i="imperative",r=null){super(e,t),this.type=yn.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Lr=class extends Ui{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=yn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_i=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(_i||{}),Wm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Wm||{}),Mo=class extends Ui{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=yn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ts=class extends Ui{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=yn.NavigationSkipped}},Rd=class extends Ui{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=yn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Km=class extends Ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=yn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ow=class extends Ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=yn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kw=class extends Ui{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=yn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Nw=class extends Ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=yn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lw=class extends Ui{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=yn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fw=class{constructor(e){this.route=e,this.type=yn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Vw=class{constructor(e){this.route=e,this.type=yn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bw=class{constructor(e){this.snapshot=e,this.type=yn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uw=class{constructor(e){this.snapshot=e,this.type=yn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jw=class{constructor(e){this.snapshot=e,this.type=yn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zw=class{constructor(e){this.snapshot=e,this.type=yn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zm=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=yn.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Od=class{},xl=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function zj(n,e){return n.providers&&!n._injector&&(n._injector=pm(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ur(n){return n.outlet||He}function $j(n,e){let t=n.filter(i=>ur(i)===e);return t.push(...n.filter(i=>ur(i)!==e)),t}function jd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var $w=class{get injector(){return jd(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new zd(this.rootInjector),this.attachRef=null}},zd=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new $w(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(ge(Un))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Hw(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Hw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=qw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return qw(e,this._root).map(t=>t.value)}};function Hw(n,e){if(n===e.value)return e;for(let t of e.children){let i=Hw(n,t);if(i)return i}return null}function qw(n,e){if(n===e.value)return[e];for(let t of e.children){let i=qw(n,t);if(i.length)return i.unshift(e),i}return[]}var gi=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Il(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ym=class extends Qm{constructor(e,t){super(e),this.snapshot=t,eb(this,e)}toString(){return this.snapshot.toString()}};function YM(n){let e=Hj(n),t=new Gt([new Ba("",{})]),i=new Gt({}),r=new Gt({}),o=new Gt({}),a=new Gt(""),l=new Ss(t,i,o,a,r,He,n,e.root);return l.snapshot=e.root,new Ym(new gi(l,[]),e)}function Hj(n){let e={},t={},i={},r="",o=new Tl([],e,i,r,t,He,n,null,{});return new Xm("",new gi(o,[]))}var Ss=class{constructor(e,t,i,r,o,a,l,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Me(f=>f[Bd]))??Se(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Me(e=>Dl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Me(e=>Dl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jm(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:Y(Y({},e.params),n.params),data:Y(Y({},e.data),n.data),resolve:Y(Y(Y(Y({},n.data),e.data),r?.data),n._resolvedData)}:i={params:Y({},n.params),data:Y({},n.data),resolve:Y(Y({},n.data),n._resolvedData??{})},r&&XM(r)&&(i.resolve[Bd]=r.title),i}var Tl=class{get title(){return this.data?.[Bd]}constructor(e,t,i,r,o,a,l,u,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Dl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Dl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Xm=class extends Qm{constructor(e,t){super(t),this.url=e,eb(this,t)}toString(){return JM(this._root)}};function eb(n,e){e.value._routerState=n,e.children.forEach(t=>eb(n,t))}function JM(n){let e=n.children.length>0?` { ${n.children.map(JM).join(", ")} } `:"";return`${n.value}${e}`}function Sw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Nr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Nr(e.params,t.params)||n.paramsSubject.next(t.params),_j(e.url,t.url)||n.urlSubject.next(t.url),Nr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Gw(n,e){let t=Nr(n.params,e.params)&&bj(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Gw(n.parent,e.parent))}function XM(n){return typeof n.title=="string"||n.title===null}var tb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=He,this.activateEvents=new Qe,this.deactivateEvents=new Qe,this.attachEvents=new Qe,this.detachEvents=new Qe,this.parentContexts=Q(zd),this.location=Q(ys),this.changeDetector=Q(fi),this.inputBinder=Q(ig,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let r=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new Ww(t,l,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Tn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ki]})}}return n})(),Ww=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ss?this.route:e===zd?this.childContexts:this.parent.get(e,t)}},ig=new de(""),PM=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=ed([i.queryParams,i.params,i.data]).pipe(Zn(([o,a,l],u)=>(l=Y(Y(Y({},o),a),l),u===0?Se(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let a=zA(i.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function qj(n,e,t){let i=kd(n,e._root,t?t._root:void 0);return new Ym(i,e)}function kd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=Gj(n,e,t);return new gi(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(l=>kd(n,l)),a}}let i=Wj(e.value),r=e.children.map(o=>kd(n,o));return new gi(i,r)}}function Gj(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return kd(n,i,r);return kd(n,i)})}function Wj(n){return new Ss(new Gt(n.url),new Gt(n.params),new Gt(n.queryParams),new Gt(n.fragment),new Gt(n.data),n.outlet,n.component,n)}var Nd=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ex="ngNavigationCancelingError";function eg(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=ja(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=tx(!1,_i.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function tx(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ex]=!0,t.cancellationCode=e,t}function Kj(n){return nx(n)&&ja(n.url)}function nx(n){return!!n&&n[ex]}var Zj=(n,e,t,i)=>Me(r=>(new Kw(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Kw=class{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Sw(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Il(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Il(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Il(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Il(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new zw(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Uw(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Sw(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),Sw(l.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},tg=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Sl=class{constructor(e,t){this.component=e,this.route=t}};function Qj(n,e,t){let i=n._root,r=e?e._root:null;return Sd(i,r,t,[i.value])}function Yj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Rl(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!yD(n)?n:e.get(n):i}function Sd(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Il(e);return n.children.forEach(a=>{Jj(a,o[a.value.outlet],t,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,l])=>xd(l,t.getContext(a),r)),r}function Jj(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=Xj(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new tg(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Sd(n,e,l?l.children:null,i,r):Sd(n,e,t,i,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new Sl(l.outlet.component,a))}else a&&xd(e,l,r),r.canActivateChecks.push(new tg(i)),o.component?Sd(n,null,l?l.children:null,i,r):Sd(n,null,t,i,r);return r}function Xj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ua(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ua(n.url,e.url)||!Nr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gw(n,e)||!Nr(n.queryParams,e.queryParams);case"paramsChange":default:return!Gw(n,e)}}function xd(n,e,t){let i=Il(n),r=n.value;Object.entries(i).forEach(([o,a])=>{r.component?e?xd(a,e.children.getContext(o),t):xd(a,null,t):xd(a,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Sl(e.outlet.component,r)):t.canDeactivateChecks.push(new Sl(null,r)):t.canDeactivateChecks.push(new Sl(null,r))}function $d(n){return typeof n=="function"}function e3(n){return typeof n=="boolean"}function t3(n){return n&&$d(n.canLoad)}function n3(n){return n&&$d(n.canActivate)}function i3(n){return n&&$d(n.canActivateChild)}function r3(n){return n&&$d(n.canDeactivate)}function o3(n){return n&&$d(n.canMatch)}function ix(n){return n instanceof Xi||n?.name==="EmptyError"}var jm=Symbol("INITIAL_VALUE");function Pl(){return Zn(n=>ed(n.map(e=>e.pipe(ho(1),Jv(jm)))).pipe(Me(e=>{for(let t of e)if(t!==!0){if(t===jm)return jm;if(t===!1||s3(t))return t}return!0}),Kn(e=>e!==jm),ho(1)))}function s3(n){return ja(n)||n instanceof Nd}function a3(n,e){return Qt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?Se(Oe(Y({},t),{guardsResult:!0})):c3(a,i,r,n).pipe(Qt(l=>l&&e3(l)?l3(i,o,n,e):Se(l)),Me(l=>Oe(Y({},t),{guardsResult:l})))})}function c3(n,e,t,i){return xt(n).pipe(Qt(r=>p3(r.component,r.route,t,e,i)),Ir(r=>r!==!0,!0))}function l3(n,e,t,i){return xt(e).pipe(uo(r=>el(d3(r.route.parent,i),u3(r.route,i),f3(n,r.path,t),h3(n,r.route,t))),Ir(r=>r!==!0,!0))}function u3(n,e){return n!==null&&e&&e(new jw(n)),Se(!0)}function d3(n,e){return n!==null&&e&&e(new Bw(n)),Se(!0)}function h3(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Se(!0);let r=i.map(o=>mp(()=>{let a=jd(e)??t,l=Rl(o,a),u=n3(l)?l.canActivate(e,n):Oi(a,()=>l(e,n));return Ds(u).pipe(Ir())}));return Se(r).pipe(Pl())}function f3(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>Yj(a)).filter(a=>a!==null).map(a=>mp(()=>{let l=a.guards.map(u=>{let f=jd(a.node)??t,m=Rl(u,f),v=i3(m)?m.canActivateChild(i,n):Oi(f,()=>m(i,n));return Ds(v).pipe(Ir())});return Se(l).pipe(Pl())}));return Se(o).pipe(Pl())}function p3(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Se(!0);let a=o.map(l=>{let u=jd(e)??r,f=Rl(l,u),m=r3(f)?f.canDeactivate(n,e,t,i):Oi(u,()=>f(n,e,t,i));return Ds(m).pipe(Ir())});return Se(a).pipe(Pl())}function m3(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Se(!0);let o=r.map(a=>{let l=Rl(a,n),u=t3(l)?l.canLoad(e,t):Oi(n,()=>l(e,t));return Ds(u)});return Se(o).pipe(Pl(),rx(i))}function rx(n){return Vv(Yt(e=>{if(typeof e!="boolean")throw eg(n,e)}),Me(e=>e===!0))}function g3(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Se(!0);let o=r.map(a=>{let l=Rl(a,n),u=o3(l)?l.canMatch(e,t):Oi(n,()=>l(e,t));return Ds(u)});return Se(o).pipe(Pl(),rx(i))}var Ld=class{constructor(e){this.segmentGroup=e||null}},Fd=class extends Error{constructor(e){super(),this.urlTree=e}};function El(n){return Jc(new Ld(n))}function _3(n){return Jc(new ee(4e3,!1))}function v3(n){return Jc(tx(!1,_i.GuardRejected))}var Zw=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Se(i);if(r.numberOfChildren>1||!r.children[He])return _3(`${e.redirectTo}`);r=r.children[He]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let l=t,{queryParams:u,fragment:f,routeConfig:m,url:v,outlet:E,params:b,data:M,title:k}=r,N=Oi(o,()=>l({params:b,data:M,queryParams:u,fragment:f,routeConfig:m,url:v,outlet:E,title:k}));if(N instanceof xo)throw new Fd(N);t=N}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Fd(a);return a}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new xo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);i[r]=t[l]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),a={};return Object.entries(t.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(e,u,i,r)}),new yt(o,a)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new ee(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Qw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function y3(n,e,t,i,r){let o=ox(n,e,t);return o.matched?(i=zj(e,i),g3(i,e,t,r).pipe(Me(a=>a===!0?o:Y({},Qw)))):Se(o)}function ox(n,e,t){if(e.path==="**")return w3(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Y({},Qw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||gj)(t,n,e);if(!r)return Y({},Qw);let o={};Object.entries(r.posParams??{}).forEach(([l,u])=>{o[l]=u.path});let a=r.consumed.length>0?Y(Y({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function w3(n){return{matched:!0,parameters:n.length>0?VM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function RM(n,e,t,i){return t.length>0&&I3(n,t,i)?{segmentGroup:new yt(e,E3(i,new yt(t,n.children))),slicedSegments:[]}:t.length===0&&C3(n,t,i)?{segmentGroup:new yt(n.segments,b3(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new yt(n.segments,n.children),slicedSegments:t}}function b3(n,e,t,i){let r={};for(let o of t)if(rg(n,e,o)&&!i[ur(o)]){let a=new yt([],{});r[ur(o)]=a}return Y(Y({},i),r)}function E3(n,e){let t={};t[He]=e;for(let i of n)if(i.path===""&&ur(i)!==He){let r=new yt([],{});t[ur(i)]=r}return t}function I3(n,e,t){return t.some(i=>rg(n,e,i)&&ur(i)!==He)}function C3(n,e,t){return t.some(i=>rg(n,e,i))}function rg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function T3(n,e,t){return e.length===0&&!n.children[t]}var Yw=class{};function S3(n,e,t,i,r,o,a="emptyOnly"){return new Jw(n,e,t,i,r,a,o).recognize()}var D3=31,Jw=class{constructor(e,t,i,r,o,a,l){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new Zw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=RM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Me(({children:t,rootSnapshot:i})=>{let r=new gi(i,t),o=new Xm("",r),a=Nj(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new Tl([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),He,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,He,t).pipe(Me(i=>({children:i,rootSnapshot:t})),as(i=>{if(i instanceof Fd)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ld?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(Me(a=>a instanceof gi?[a]:[]))}processChildren(e,t,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return xt(o).pipe(uo(a=>{let l=i.children[a],u=$j(t,a);return this.processSegmentGroup(e,u,l,a,r)}),Yv((a,l)=>(a.push(...l),a)),cs(null),Qv(),Qt(a=>{if(a===null)return El(i);let l=sx(a);return A3(l),Se(l)}))}processSegment(e,t,i,r,o,a,l){return xt(t).pipe(uo(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,o,a,l).pipe(as(f=>{if(f instanceof Ld)return Se(null);throw f}))),Ir(u=>!!u),as(u=>{if(ix(u))return T3(i,r,o)?Se(new Yw):El(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,o,a,l,u){return ur(i)!==a&&(a===He||!rg(r,o,i))?El(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,a,u):El(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,a,l){let{matched:u,parameters:f,consumedSegments:m,positionalParamSegments:v,remainingSegments:E}=ox(t,r,o);if(!u)return El(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>D3&&(this.allowRedirects=!1));let b=new Tl(o,f,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,OM(r),ur(r),r.component??r._loadedComponent??null,r,kM(r)),M=Jm(b,l,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let k=this.applyRedirects.applyRedirectCommands(m,r.redirectTo,v,b,e);return this.applyRedirects.lineralizeSegments(r,k).pipe(Qt(N=>this.processSegment(e,i,t,N.concat(E),a,!1,l)))}matchSegmentAgainstRoute(e,t,i,r,o,a){let l=y3(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),l.pipe(Zn(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Zn(({routes:f})=>{let m=i._loadedInjector??e,{parameters:v,consumedSegments:E,remainingSegments:b}=u,M=new Tl(E,v,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,OM(i),ur(i),i.component??i._loadedComponent??null,i,kM(i)),k=Jm(M,a,this.paramsInheritanceStrategy);M.params=Object.freeze(k.params),M.data=Object.freeze(k.data);let{segmentGroup:N,slicedSegments:G}=RM(t,E,b,f);if(G.length===0&&N.hasChildren())return this.processChildren(m,f,N,M).pipe(Me(J=>new gi(M,J)));if(f.length===0&&G.length===0)return Se(new gi(M,[]));let te=ur(i)===o;return this.processSegment(m,f,N,G,te?He:o,!0,M).pipe(Me(J=>new gi(M,J instanceof gi?[J]:[])))}))):El(t)))}getChildConfig(e,t,i){return t.children?Se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Se({routes:t._loadedRoutes,injector:t._loadedInjector}):m3(e,t,i,this.urlSerializer).pipe(Qt(r=>r?this.configLoader.loadChildren(e,t).pipe(Yt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):v3(t))):Se({routes:[],injector:e})}};function A3(n){n.sort((e,t)=>e.value.outlet===He?-1:t.value.outlet===He?1:e.value.outlet.localeCompare(t.value.outlet))}function M3(n){let e=n.value.routeConfig;return e&&e.path===""}function sx(n){let e=[],t=new Set;for(let i of n){if(!M3(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=sx(i.children);e.push(new gi(i.value,r))}return e.filter(i=>!t.has(i))}function OM(n){return n.data||{}}function kM(n){return n.resolve||{}}function x3(n,e,t,i,r,o){return Qt(a=>S3(n,e,t,i,a.extractedUrl,r,o).pipe(Me(({state:l,tree:u})=>Oe(Y({},a),{targetSnapshot:l,urlAfterRedirects:u}))))}function P3(n,e){return Qt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Se(t);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of ax(u))a.add(f);let l=0;return xt(a).pipe(uo(u=>o.has(u)?R3(u,i,n,e):(u.data=Jm(u,u.parent,n).resolve,Se(void 0))),Yt(()=>l++),tl(1),Qt(u=>l===a.size?Se(t):ci))})}function ax(n){let e=n.children.map(t=>ax(t)).flat();return[n,...e]}function R3(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!XM(r)&&(o[Bd]=r.title),O3(o,n,e,i).pipe(Me(a=>(n._resolvedData=a,n.data=Jm(n,n.parent,t).resolve,null)))}function O3(n,e,t,i){let r=Mw(n);if(r.length===0)return Se({});let o={};return xt(r).pipe(Qt(a=>k3(n[a],e,t,i).pipe(Ir(),Yt(l=>{if(l instanceof Nd)throw eg(new Al,l);o[a]=l}))),tl(1),Zv(o),as(a=>ix(a)?ci:Jc(a)))}function k3(n,e,t,i){let r=jd(e)??i,o=Rl(n,r),a=o.resolve?o.resolve(e,t):Oi(r,()=>o(e,t));return Ds(a)}function Dw(n){return Zn(e=>{let t=n(e);return t?xt(t).pipe(Me(()=>e)):Se(e)})}var cx=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===He);return i}getResolvedTitleForRoute(t){return t.data[Bd]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(N3),providedIn:"root"})}}return n})(),N3=(()=>{class n extends cx{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(ge(SM))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hd=new de("",{providedIn:"root",factory:()=>({})}),L3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["ng-component"]],standalone:!0,features:[vt],decls:1,vars:0,template:function(i,r){i&1&&ne(0,"router-outlet")},dependencies:[tb],encapsulation:2})}}return n})();function nb(n){let e=n.children&&n.children.map(nb),t=e?Oe(Y({},n),{children:e}):Y({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==He&&(t.component=L3),t}var Vd=new de(""),ib=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Q(vm)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Ds(t.loadComponent()).pipe(Me(lx),Yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),_a(()=>{this.componentLoaders.delete(t)})),r=new Kc(i,()=>new mn).pipe(Wc());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=F3(i,this.compiler,t,this.onLoadEndListener).pipe(_a(()=>{this.childrenLoaders.delete(i)})),a=new Kc(o,()=>new mn).pipe(Wc());return this.childrenLoaders.set(i,a),a}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function F3(n,e,t,i){return Ds(n.loadChildren()).pipe(Me(lx),Qt(r=>r instanceof ad||Array.isArray(r)?Se(r):xt(e.compileModuleAsync(r))),Me(r=>{i&&i(n);let o,a,l=!1;return Array.isArray(r)?(a=r,l=!0):(o=r.create(t).injector,a=o.get(Vd,[],{optional:!0,self:!0}).flat()),{routes:a.map(nb),injector:o}}))}function V3(n){return n&&typeof n=="object"&&"default"in n}function lx(n){return V3(n)?n.default:n}var rb=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(B3),providedIn:"root"})}}return n})(),B3=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ux=new de(""),dx=new de("");function U3(n,e,t){let i=n.get(dx),r=n.get(vn);return n.get(ct).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),l=r.startViewTransition(()=>(o(),j3(n))),{onViewTransitionCreated:u}=i;return u&&Oi(n,()=>u({transition:l,from:e,to:t})),a})}function j3(n){return new Promise(e=>{Z0({read:()=>setTimeout(e)},{injector:n})})}var z3=new de(""),ob=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new mn,this.transitionAbortSubject=new mn,this.configLoader=Q(ib),this.environmentInjector=Q(Un),this.urlSerializer=Q(Ud),this.rootContexts=Q(zd),this.location=Q(bl),this.inputBindingEnabled=Q(ig,{optional:!0})!==null,this.titleStrategy=Q(cx),this.options=Q(Hd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Q(rb),this.createViewTransition=Q(ux,{optional:!0}),this.navigationErrorHandler=Q(z3,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Se(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Fw(r)),i=r=>this.events.next(new Vw(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(Oe(Y(Y({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new Gt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Md,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Kn(o=>o.id!==0),Me(o=>Oe(Y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Zn(o=>{let a=!1,l=!1;return Se(o).pipe(Zn(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",_i.SupersededByNewNavigation),ci;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Oe(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!f&&m!=="reload"){let v="";return this.events.next(new Ts(u.id,this.urlSerializer.serialize(u.rawUrl),v,Wm.IgnoredSameUrlNavigation)),u.resolve(!1),ci}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Se(u).pipe(Zn(v=>{let E=this.transitions?.getValue();return this.events.next(new Ml(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),E!==this.transitions?.getValue()?ci:Promise.resolve(v)}),x3(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Yt(v=>{o.targetSnapshot=v.targetSnapshot,o.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation=Oe(Y({},this.currentNavigation),{finalUrl:v.urlAfterRedirects});let E=new Km(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(E)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:v,extractedUrl:E,source:b,restoredState:M,extras:k}=u,N=new Ml(v,this.urlSerializer.serialize(E),b,M);this.events.next(N);let G=YM(this.rootComponentType).snapshot;return this.currentTransition=o=Oe(Y({},u),{targetSnapshot:G,urlAfterRedirects:E,extras:Oe(Y({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,Se(o)}else{let v="";return this.events.next(new Ts(u.id,this.urlSerializer.serialize(u.extractedUrl),v,Wm.IgnoredByUrlHandlingStrategy)),u.resolve(!1),ci}}),Yt(u=>{let f=new Ow(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),Me(u=>(this.currentTransition=o=Oe(Y({},u),{guards:Qj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),a3(this.environmentInjector,u=>this.events.next(u)),Yt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw eg(this.urlSerializer,u.guardsResult);let f=new kw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(f)}),Kn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",_i.GuardRejected),!1)),Dw(u=>{if(u.guards.canActivateChecks.length)return Se(u).pipe(Yt(f=>{let m=new Nw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),Zn(f=>{let m=!1;return Se(f).pipe(P3(this.paramsInheritanceStrategy,this.environmentInjector),Yt({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(f,"",_i.NoDataFromResolver)}}))}),Yt(f=>{let m=new Lw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),Dw(u=>{let f=m=>{let v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe(Yt(E=>{m.component=E}),Me(()=>{})));for(let E of m.children)v.push(...f(E));return v};return ed(f(u.targetSnapshot.root)).pipe(cs(null),ho(1))}),Dw(()=>this.afterPreactivation()),Zn(()=>{let{currentSnapshot:u,targetSnapshot:f}=o,m=this.createViewTransition?.(this.environmentInjector,u.root,f.root);return m?xt(m).pipe(Me(()=>o)):Se(o)}),Me(u=>{let f=qj(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=Oe(Y({},u),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Yt(()=>{this.events.next(new Od)}),Zj(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ho(1),Yt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Xv(this.transitionAbortSubject.pipe(Yt(u=>{throw u}))),_a(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",_i.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),as(u=>{if(l=!0,nx(u))this.events.next(new Mo(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),Kj(u)?this.events.next(new xl(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let f=new Rd(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let m=Oi(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(m instanceof Nd){let{message:v,cancellationCode:E}=eg(this.urlSerializer,m);this.events.next(new Mo(o.id,this.urlSerializer.serialize(o.extractedUrl),v,E)),this.events.next(new xl(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(f);let v=t.errorHandler(u);o.resolve(!!v)}}catch(m){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(m)}}return ci}))}))}cancelNavigationTransition(t,i,r){let o=new Mo(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $3(n){return n!==Md}var H3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(q3),providedIn:"root"})}}return n})(),Xw=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},q3=(()=>{class n extends Xw{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hx=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(G3),providedIn:"root"})}}return n})(),G3=(()=>{class n extends hx{constructor(){super(...arguments),this.location=Q(bl),this.urlSerializer=Q(Ud),this.options=Q(Hd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Q(rb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new xo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=YM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Ml)this.stateMemento=this.createStateMemento();else if(t instanceof Ts)this.rawUrlTree=i.initialUrl;else if(t instanceof Km){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Od?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Mo&&(t.code===_i.GuardRejected||t.code===_i.NoDataFromResolver)?this.restoreHistory(i):t instanceof Rd?this.restoreHistory(i,!0):t instanceof Lr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof xo?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,a=Y(Y({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",a)}else{let o=Y(Y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dd=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Dd||{});function fx(n,e){n.events.pipe(Kn(t=>t instanceof Lr||t instanceof Mo||t instanceof Rd||t instanceof Ts),Me(t=>t instanceof Lr||t instanceof Ts?Dd.COMPLETE:(t instanceof Mo?t.code===_i.Redirect||t.code===_i.SupersededByNewNavigation:!1)?Dd.REDIRECTING:Dd.FAILED),Kn(t=>t!==Dd.REDIRECTING),ho(1)).subscribe(()=>{e()})}function W3(n){throw n}var K3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Q(gm),this.stateManager=Q(hx),this.options=Q(Hd,{optional:!0})||{},this.pendingTasks=Q(vs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Q(ob),this.urlSerializer=Q(Ud),this.location=Q(bl),this.urlHandlingStrategy=Q(rb),this._events=new mn,this.errorHandler=this.options.errorHandler||W3,this.navigated=!1,this.routeReuseStrategy=Q(H3),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Q(Vd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Q(ig,{optional:!0}),this.eventsSubscription=new zt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Mo&&i.code!==_i.Redirect&&i.code!==_i.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Lr)this.navigated=!0;else if(i instanceof xl){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=Y({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||$3(r.source)},a);this.scheduleNavigation(l,Md,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Y3(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Md,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let u=Y({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(t);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(nb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,f=u?this.currentUrlTree.fragment:a,m=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":m=Y(Y({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let v;try{let E=r?r.snapshot:this.routerState.snapshot.root;v=WM(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),v=this.currentUrlTree.root}return KM(v,t,m,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=ja(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Md,null,i)}navigate(t,i={skipLocationChange:!1}){return Q3(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=Y({},K3):i===!1?r=Y({},Z3):r=i,ja(t))return DM(this.currentUrlTree,t,r);let o=this.parseUrl(t);return DM(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let l,u,f;a?(l=a.resolve,u=a.reject,f=a.promise):f=new Promise((v,E)=>{l=v,u=E});let m=this.pendingTasks.add();return fx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(v=>Promise.reject(v))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Q3(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function Y3(n){return!(n instanceof Od)&&!(n instanceof xl)}var px=(()=>{class n{constructor(t,i,r,o,a,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.onChanges=new mn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(f=>{f instanceof Lr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ja(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||i||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:B1(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ja(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(oe(lt),oe(Ss),A0("tabindex"),oe(ka),oe(sr),oe(Do))}}static{this.\u0275dir=Tn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&se("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&kr("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Va],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Va],replaceUrl:[2,"replaceUrl","replaceUrl",Va],routerLink:"routerLink"},standalone:!0,features:[K0,ki]})}}return n})();var ng=class{};var J3=(()=>{class n{constructor(t,i,r,o,a){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Kn(t=>t instanceof Lr),uo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=pm(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(l,o.children??o._loadedRoutes))}return xt(r).pipe(Xc())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=Se(null);let o=r.pipe(Qt(a=>a===null?Se(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return xt([o,a]).pipe(Xc())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(ge(lt),ge(vm),ge(Un),ge(ng),ge(ib))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mx=new de(""),X3=(()=>{class n{constructor(t,i,r,o,a={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ml?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Lr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ts&&t.code===Wm.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zm&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zm(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){J1()}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function gx(n,...e){return rr([{provide:Vd,multi:!0,useValue:n},[],{provide:Ss,useFactory:_x,deps:[lt]},{provide:md,multi:!0,useFactory:vx},e.map(t=>t.\u0275providers)])}function _x(n){return n.routerState.root}function qd(n,e){return{\u0275kind:n,\u0275providers:e}}function vx(){let n=Q(Cn);return e=>{let t=n.get(bs);if(e!==t.components[0])return;let i=n.get(lt),r=n.get(yx);n.get(sb)===1&&i.initialNavigation(),n.get(wx,null,We.Optional)?.setUpPreloading(),n.get(mx,null,We.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var yx=new de("",{factory:()=>new mn}),sb=new de("",{providedIn:"root",factory:()=>1});function e4(){return qd(2,[{provide:sb,useValue:0},{provide:_m,multi:!0,deps:[Cn],useFactory:e=>{let t=e.get(YA,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(lt),o=e.get(yx);fx(r,()=>{i(!0)}),e.get(ob).afterPreactivation=()=>(i(!0),o.closed?Se(void 0):o),r.initialNavigation()}))}}])}function t4(){return qd(3,[{provide:_m,multi:!0,useFactory:()=>{let e=Q(lt);return()=>{e.setUpLocationChangeListener()}}},{provide:sb,useValue:2}])}var wx=new de("");function n4(n){return qd(0,[{provide:wx,useExisting:J3},{provide:ng,useExisting:n}])}function i4(){return qd(8,[PM,{provide:ig,useExisting:PM}])}function r4(n){let e=[{provide:ux,useValue:U3},{provide:dx,useValue:Y({skipNextTransition:!!n?.skipInitialTransition},n)}];return qd(9,e)}var NM=new de("ROUTER_FORROOT_GUARD"),o4=[bl,{provide:Ud,useClass:Al},lt,zd,{provide:Ss,useFactory:_x,deps:[lt]},ib,[]],bx=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[o4,[],{provide:Vd,multi:!0,useValue:t},{provide:NM,useFactory:l4,deps:[[lt,new Mn,new h0]]},{provide:Hd,useValue:i||{}},i?.useHash?a4():c4(),s4(),i?.preloadingStrategy?n4(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?u4(i):[],i?.bindToComponentInputs?i4().\u0275providers:[],i?.enableViewTransitions?r4().\u0275providers:[],d4()]}}static forChild(t){return{ngModule:n,providers:[{provide:Vd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(ge(NM,8))}}static{this.\u0275mod=Pr({type:n})}static{this.\u0275inj=xr({})}}return n})();function s4(){return{provide:mx,useFactory:()=>{let n=Q(aM),e=Q(ct),t=Q(Hd),i=Q(ob),r=Q(Ud);return t.scrollOffset&&n.setOffset(t.scrollOffset),new X3(r,i,n,e,t)}}}function a4(){return{provide:Do,useClass:XA}}function c4(){return{provide:Do,useClass:lw}}function l4(n){return"guarded"}function u4(n){return[n.initialNavigation==="disabled"?t4().\u0275providers:[],n.initialNavigation==="enabledBlocking"?e4().\u0275providers:[]]}var LM=new de("");function d4(){return[{provide:LM,useFactory:vx},{provide:md,multi:!0,useExisting:LM}]}var qe=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(qe||{}),Vr="*";function ab(n,e){return{type:qe.Trigger,name:n,definitions:e,options:{}}}function Wd(n,e=null){return{type:qe.Animate,styles:e,timings:n}}function Ex(n,e=null){return{type:qe.Sequence,steps:n,options:e}}function Br(n){return{type:qe.Style,styles:n,offset:null}}function Kd(n,e,t=null){return{type:qe.Transition,expr:n,animation:e,options:t}}var As=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Gd=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==o&&this._onFinish()}),a.onDestroy(()=>{++i==o&&this._onDestroy()}),a.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((a,l)=>Math.max(a,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},og="!";function Ix(n){return new ee(3e3,!1)}function h4(){return new ee(3100,!1)}function f4(){return new ee(3101,!1)}function p4(n){return new ee(3001,!1)}function m4(n){return new ee(3003,!1)}function g4(n){return new ee(3004,!1)}function _4(n,e){return new ee(3005,!1)}function v4(){return new ee(3006,!1)}function y4(){return new ee(3007,!1)}function w4(n,e){return new ee(3008,!1)}function b4(n){return new ee(3002,!1)}function E4(n,e,t,i,r){return new ee(3010,!1)}function I4(){return new ee(3011,!1)}function C4(){return new ee(3012,!1)}function T4(){return new ee(3200,!1)}function S4(){return new ee(3202,!1)}function D4(){return new ee(3013,!1)}function A4(n){return new ee(3014,!1)}function M4(n){return new ee(3015,!1)}function x4(n){return new ee(3016,!1)}function P4(n,e){return new ee(3404,!1)}function R4(n){return new ee(3502,!1)}function O4(n){return new ee(3503,!1)}function k4(){return new ee(3300,!1)}function N4(n){return new ee(3504,!1)}function L4(n){return new ee(3301,!1)}function F4(n,e){return new ee(3302,!1)}function V4(n){return new ee(3303,!1)}function B4(n,e){return new ee(3400,!1)}function U4(n){return new ee(3401,!1)}function j4(n){return new ee(3402,!1)}function z4(n,e){return new ee(3505,!1)}function Ms(n){switch(n.length){case 0:return new As;case 1:return n[0];default:return new Gd(n)}}function Fx(n,e,t=new Map,i=new Map){let r=[],o=[],a=-1,l=null;if(e.forEach(u=>{let f=u.get("offset"),m=f==a,v=m&&l||new Map;u.forEach((E,b)=>{let M=b,k=E;if(b!=="offset")switch(M=n.normalizePropertyName(M,r),k){case og:k=t.get(b);break;case Vr:k=i.get(b);break;default:k=n.normalizeStyleValue(b,M,k,r);break}v.set(M,k)}),m||o.push(v),l=v,a=f}),r.length)throw R4(r);return o}function xb(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&cb(t,"start",n)));break;case"done":n.onDone(()=>i(t&&cb(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&cb(t,"destroy",n)));break}}function cb(n,e,t){let i=t.totalTime,r=!!t.disabled,o=Pb(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),a=n._data;return a!=null&&(o._data=a),o}function Pb(n,e,t,i,r="",o=0,a){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!a}}function yi(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function Cx(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var $4=typeof document>"u"?null:document.documentElement;function Rb(n){let e=n.parentNode||n.host||null;return e===$4?null:e}function H4(n){return n.substring(1,6)=="ebkit"}var za=null,Tx=!1;function q4(n){za||(za=G4()||{},Tx=za.style?"WebkitAppearance"in za.style:!1);let e=!0;return za.style&&!H4(n)&&(e=n in za.style,!e&&Tx&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in za.style)),e}function G4(){return typeof document<"u"?document.body:null}function Vx(n,e){for(;e;){if(e===n)return!0;e=Rb(e)}return!1}function Bx(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var Ob=(()=>{class n{validateStyleProperty(t){return q4(t)}containsElement(t,i){return Vx(t,i)}getParentElement(t){return Rb(t)}query(t,i,r){return Bx(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,a,l=[],u){return new As(r,o)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),qa=class{static{this.NOOP=new Ob}},Ga=class{};var W4=1e3,Ux="{{",K4="}}",jx="ng-enter",pb="ng-leave",sg="ng-trigger",dg=".ng-trigger",Sx="ng-animating",mb=".ng-animating";function Po(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:gb(parseFloat(e[1]),e[2])}function gb(n,e){switch(e){case"s":return n*W4;default:return n}}function hg(n,e,t){return n.hasOwnProperty("duration")?n:Z4(n,e,t)}function Z4(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,a="";if(typeof n=="string"){let l=n.match(i);if(l===null)return e.push(Ix(n)),{duration:0,delay:0,easing:""};r=gb(parseFloat(l[1]),l[2]);let u=l[3];u!=null&&(o=gb(parseFloat(u),l[4]));let f=l[5];f&&(a=f)}else r=n;if(!t){let l=!1,u=e.length;r<0&&(e.push(h4()),l=!0),o<0&&(e.push(f4()),l=!0),l&&e.splice(u,0,Ix(n))}return{duration:r,delay:o,easing:a}}function Q4(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Ur(n,e,t){e.forEach((i,r)=>{let o=kb(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Ha(n,e){e.forEach((t,i)=>{let r=kb(i);n.style[r]=""})}function Zd(n){return Array.isArray(n)?n.length==1?n[0]:Ex(n):n}function Y4(n,e,t){let i=e.params||{},r=zx(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(p4(o))})}var _b=new RegExp(`${Ux}\\s*(.+?)\\s*${K4}`,"g");function zx(n){let e=[];if(typeof n=="string"){let t;for(;t=_b.exec(n);)e.push(t[1]);_b.lastIndex=0}return e}function Yd(n,e,t){let i=`${n}`,r=i.replace(_b,(o,a)=>{let l=e[a];return l==null&&(t.push(m4(a)),l=""),l.toString()});return r==i?n:r}var J4=/-+([a-z0-9])/g;function kb(n){return n.replace(J4,(...e)=>e[1].toUpperCase())}function X4(n,e){return n===0||e===0}function e6(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,a)=>{i.has(a)||r.push(a),i.set(a,o)}),r.length)for(let o=1;o<e.length;o++){let a=e[o];r.forEach(l=>a.set(l,Nb(n,l)))}}return e}function vi(n,e,t){switch(e.type){case qe.Trigger:return n.visitTrigger(e,t);case qe.State:return n.visitState(e,t);case qe.Transition:return n.visitTransition(e,t);case qe.Sequence:return n.visitSequence(e,t);case qe.Group:return n.visitGroup(e,t);case qe.Animate:return n.visitAnimate(e,t);case qe.Keyframes:return n.visitKeyframes(e,t);case qe.Style:return n.visitStyle(e,t);case qe.Reference:return n.visitReference(e,t);case qe.AnimateChild:return n.visitAnimateChild(e,t);case qe.AnimateRef:return n.visitAnimateRef(e,t);case qe.Query:return n.visitQuery(e,t);case qe.Stagger:return n.visitStagger(e,t);default:throw g4(e.type)}}function Nb(n,e){return window.getComputedStyle(n)[e]}var t6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),fg=class extends Ga{normalizePropertyName(e,t){return kb(e)}normalizeStyleValue(e,t,i,r){let o="",a=i.toString().trim();if(t6.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let l=i.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&l[1].length==0&&r.push(_4(e,i))}return a+o}};var pg="*";function n6(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>i6(i,t,e)):t.push(n),t}function i6(n,e,t){if(n[0]==":"){let u=r6(n,t);if(typeof u=="function"){e.push(u);return}n=u}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(M4(n)),e;let r=i[1],o=i[2],a=i[3];e.push(Dx(r,a));let l=r==pg&&a==pg;o[0]=="<"&&!l&&e.push(Dx(a,r))}function r6(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(x4(n)),"* => *"}}var ag=new Set(["true","1"]),cg=new Set(["false","0"]);function Dx(n,e){let t=ag.has(n)||cg.has(n),i=ag.has(e)||cg.has(e);return(r,o)=>{let a=n==pg||n==r,l=e==pg||e==o;return!a&&t&&typeof r=="boolean"&&(a=r?ag.has(n):cg.has(n)),!l&&i&&typeof o=="boolean"&&(l=o?ag.has(e):cg.has(e)),a&&l}}var $x=":self",o6=new RegExp(`s*${$x}s*,?`,"g");function Hx(n,e,t,i){return new vb(n).build(e,t,i)}var Ax="",vb=class{constructor(e){this._driver=e}build(e,t,i){let r=new yb(t);return this._resetContextStyleTimingState(r),vi(this,Zd(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=Ax,e.collectedStyles=new Map,e.collectedStyles.set(Ax,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],a=[];return e.name.charAt(0)=="@"&&t.errors.push(v4()),e.definitions.forEach(l=>{if(this._resetContextStyleTimingState(t),l.type==qe.State){let u=l,f=u.name;f.toString().split(/\s*,\s*/).forEach(m=>{u.name=m,o.push(this.visitState(u,t))}),u.name=f}else if(l.type==qe.Transition){let u=this.visitTransition(l,t);i+=u.queryCount,r+=u.depCount,a.push(u)}else t.errors.push(y4())}),{type:qe.Trigger,name:e.name,states:o,transitions:a,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,a=r||{};i.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{zx(u).forEach(f=>{a.hasOwnProperty(f)||o.add(f)})})}),o.size&&t.errors.push(w4(e.name,[...o.values()]))}return{type:qe.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=vi(this,Zd(e.animation),t),r=n6(e.expr,t.errors);return{type:qe.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:$a(e.options)}}visitSequence(e,t){return{type:qe.Sequence,steps:e.steps.map(i=>vi(this,i,t)),options:$a(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(a=>{t.currentTime=i;let l=vi(this,a,t);return r=Math.max(r,t.currentTime),l});return t.currentTime=r,{type:qe.Group,steps:o,options:$a(e.options)}}visitAnimate(e,t){let i=l6(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Br({});if(o.type==qe.Keyframes)r=this.visitKeyframes(o,t);else{let a=e.styles,l=!1;if(!a){l=!0;let f={};i.easing&&(f.easing=i.easing),a=Br(f)}t.currentTime+=i.duration+i.delay;let u=this.visitStyle(a,t);u.isEmptyStep=l,r=u}return t.currentAnimateTimings=null,{type:qe.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let l of r)typeof l=="string"?l===Vr?i.push(l):t.errors.push(b4(l)):i.push(new Map(Object.entries(l)));let o=!1,a=null;return i.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(a=l.get("easing"),l.delete("easing")),!o)){for(let u of l.values())if(u.toString().indexOf(Ux)>=0){o=!0;break}}}),{type:qe.Style,styles:i,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(a=>{typeof a!="string"&&a.forEach((l,u)=>{let f=t.collectedStyles.get(t.currentQuerySelector),m=f.get(u),v=!0;m&&(o!=r&&o>=m.startTime&&r<=m.endTime&&(t.errors.push(E4(u,m.startTime,m.endTime,o,r)),v=!1),o=m.startTime),v&&f.set(u,{startTime:o,endTime:r}),t.options&&Y4(l,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:qe.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(I4()),i;let r=1,o=0,a=[],l=!1,u=!1,f=0,m=e.steps.map(G=>{let te=this._makeStyleAst(G,t),J=te.offset!=null?te.offset:c6(te.styles),ue=0;return J!=null&&(o++,ue=te.offset=J),u=u||ue<0||ue>1,l=l||ue<f,f=ue,a.push(ue),te});u&&t.errors.push(C4()),l&&t.errors.push(T4());let v=e.steps.length,E=0;o>0&&o<v?t.errors.push(S4()):o==0&&(E=r/(v-1));let b=v-1,M=t.currentTime,k=t.currentAnimateTimings,N=k.duration;return m.forEach((G,te)=>{let J=E>0?te==b?1:E*te:a[te],ue=J*N;t.currentTime=M+k.delay+ue,k.duration=ue,this._validateStyleAst(G,t),G.offset=J,i.styles.push(G)}),i}visitReference(e,t){return{type:qe.Reference,animation:vi(this,Zd(e.animation),t),options:$a(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:qe.AnimateChild,options:$a(e.options)}}visitAnimateRef(e,t){return{type:qe.AnimateRef,animation:this.visitReference(e.animation,t),options:$a(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,a]=s6(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,yi(t.collectedStyles,t.currentQuerySelector,new Map);let l=vi(this,Zd(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:qe.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:l,originalSelector:e.selector,options:$a(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(D4());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:hg(e.timings,t.errors,!0);return{type:qe.Stagger,animation:vi(this,Zd(e.animation),t),timings:i,options:null}}};function s6(n){let e=!!n.split(/\s*,\s*/).find(t=>t==$x);return e&&(n=n.replace(o6,"")),n=n.replace(/@\*/g,dg).replace(/@\w+/g,t=>dg+"-"+t.slice(1)).replace(/:animating/g,mb),[n,e]}function a6(n){return n?Y({},n):null}var yb=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function c6(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function l6(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=hg(n,e).duration;return lb(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=lb(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=hg(t,e);return lb(r.duration,r.delay,r.easing)}function $a(n){return n?(n=Y({},n),n.params&&(n.params=a6(n.params))):n={},n}function lb(n,e,t){return{duration:n,delay:e,easing:t}}function Lb(n,e,t,i,r,o,a=null,l=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:l}}var Jd=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},u6=1,d6=":enter",h6=new RegExp(d6,"g"),f6=":leave",p6=new RegExp(f6,"g");function qx(n,e,t,i,r,o=new Map,a=new Map,l,u,f=[]){return new wb().buildKeyframes(n,e,t,i,r,o,a,l,u,f)}var wb=class{buildKeyframes(e,t,i,r,o,a,l,u,f,m=[]){f=f||new Jd;let v=new bb(e,t,f,r,o,m,[]);v.options=u;let E=u.delay?Po(u.delay):0;v.currentTimeline.delayNextStep(E),v.currentTimeline.setStyles([a],null,v.errors,u),vi(this,i,v);let b=v.timelines.filter(M=>M.containsAnimation());if(b.length&&l.size){let M;for(let k=b.length-1;k>=0;k--){let N=b[k];if(N.element===t){M=N;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([l],null,v.errors,u)}return b.length?b.map(M=>M.buildKeyframes()):[Lb(t,[],[],[],0,E,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,a=this._visitSubInstructions(i,r,r.options);o!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let a=typeof o=="number"?o:Po(Yd(o,r?.params??{},t.errors));i.delayNextStep(a)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,a=i.duration!=null?Po(i.duration):null,l=i.delay!=null?Po(i.delay):null;return a!==0&&e.forEach(u=>{let f=t.appendInstructionToTimeline(u,a,l);o=Math.max(o,f.duration+f.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),vi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==qe.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=mg);let a=Po(o.delay);r.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>vi(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Po(e.options.delay):0;e.steps.forEach(a=>{let l=t.createSubContext(e.options);o&&l.delayNextStep(o),vi(this,a,l),r=Math.max(r,l.currentTimeline.currentTime),i.push(l.currentTimeline)}),i.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Yd(i,t.params,t.errors):i;return hg(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==qe.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,l=t.createSubContext().currentTimeline;l.easing=i.easing,e.styles.forEach(u=>{let f=u.offset||0;l.forwardTime(f*o),l.setStyles(u.styles,u.easing,t.errors,t.options),l.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(l),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Po(r.delay):0;o&&(t.previousNode.type===qe.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=mg);let a=i,l=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=l.length;let u=null;l.forEach((f,m)=>{t.currentQueryIndex=m;let v=t.createSubContext(e.options,f);o&&v.delayNextStep(o),f===t.element&&(u=v.currentTimeline),vi(this,e.animation,v),v.currentTimeline.applyStylesToKeyframe();let E=v.currentTimeline.currentTime;a=Math.max(a,E)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,a=Math.abs(o.duration),l=a*(t.currentQueryTotal-1),u=a*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":u=l-u;break;case"full":u=i.currentStaggerTime;break}let m=t.currentTimeline;u&&m.delayNextStep(u);let v=m.currentTime;vi(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-v+(r.startTime-i.currentTimeline.startTime)}},mg={},bb=class n{constructor(e,t,i,r,o,a,l,u){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=a,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new gg(this._driver,t,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=Po(i.duration)),i.delay!=null&&(r.delay=Po(i.delay));let o=i.params;if(o){let a=r.params;a||(a=this.options.params={}),Object.keys(o).forEach(l=>{(!t||!a.hasOwnProperty(l))&&(a[l]=Yd(o[l],a,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=mg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new Eb(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,a){let l=[];if(r&&l.push(this.element),e.length>0){e=e.replace(h6,"."+this._enterClassName),e=e.replace(p6,"."+this._leaveClassName);let u=i!=1,f=this._driver.query(this.element,e,u);i!==0&&(f=i<0?f.slice(f.length+i,f.length):f.slice(0,i)),l.push(...f)}return!o&&l.length==0&&a.push(A4(t)),l}},gg=class n{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=u6,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Vr),this._currentKeyframe.set(t,Vr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},a=m6(e,this._globalTimelineStyles);for(let[l,u]of a){let f=Yd(u,o,i);this._pendingStyles.set(l,f),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??Vr),this._updateStyle(l,f)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((l,u)=>{let f=new Map([...this._backFill,...l]);f.forEach((m,v)=>{m===og?e.add(v):m===Vr&&t.add(v)}),i||f.set("offset",u/this.duration),r.push(f)});let o=[...e.values()],a=[...t.values()];if(i){let l=r[0],u=new Map(l);l.set("offset",0),u.set("offset",1),r=[l,u]}return Lb(this.element,r,o,a,this.duration,this.startTime,this.easing,!1)}},Eb=class extends gg{constructor(e,t,i,r,o,a,l=!1){super(e,t,a.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=l,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],a=i+t,l=t/a,u=new Map(e[0]);u.set("offset",0),o.push(u);let f=new Map(e[0]);f.set("offset",Mx(l)),o.push(f);let m=e.length-1;for(let v=1;v<=m;v++){let E=new Map(e[v]),b=E.get("offset"),M=t+b*i;E.set("offset",Mx(M/a)),o.push(E)}i=a,t=0,r="",e=o}return Lb(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function Mx(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function m6(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,Vr)}else for(let[o,a]of r)t.set(o,a)}),t}function xx(n,e,t,i,r,o,a,l,u,f,m,v,E){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:a,timelines:l,queriedElements:u,preStyleProps:f,postStyleProps:m,totalTime:v,errors:E}}var ub={},_g=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return g6(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,a,l,u,f,m){let v=[],E=this.ast.options&&this.ast.options.params||ub,b=l&&l.params||ub,M=this.buildStyles(i,b,v),k=u&&u.params||ub,N=this.buildStyles(r,k,v),G=new Set,te=new Map,J=new Map,ue=r==="void",Ne={params:Gx(k,E),delay:this.ast.options?.delay},he=m?[]:qx(e,t,this.ast.animation,o,a,M,N,Ne,f,v),R=0;return he.forEach(S=>{R=Math.max(S.duration+S.delay,R)}),v.length?xx(t,this._triggerName,i,r,ue,M,N,[],[],te,J,R,v):(he.forEach(S=>{let A=S.element,O=yi(te,A,new Set);S.preStyleProps.forEach(V=>O.add(V));let F=yi(J,A,new Set);S.postStyleProps.forEach(V=>F.add(V)),A!==t&&G.add(A)}),xx(t,this._triggerName,i,r,ue,M,N,he,[...G.values()],te,J,R))}};function g6(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function Gx(n,e){let t=Y({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var Ib=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=Gx(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{a&&(a=Yd(a,r,t));let u=this.normalizer.normalizePropertyName(l,t);a=this.normalizer.normalizeStyleValue(l,u,a,t),i.set(l,a)})}),i}};function _6(n,e,t){return new Cb(n,e,t)}var Cb=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new Ib(r.style,o,i))}),Px(this.states,"true","1"),Px(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new _g(e,r,this.states))}),this.fallbackTransition=v6(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(a=>a.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function v6(n,e,t){let i=[(a,l)=>!0],r={type:qe.Sequence,steps:[],options:null},o={type:qe.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new _g(n,o,e)}function Px(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var y6=new Jd,Tb=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],r=[],o=Hx(this._driver,t,i,r);if(i.length)throw O4(i);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=Fx(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),a,l=new Map;if(o?(a=qx(this._driver,t,o,jx,pb,new Map,new Map,i,y6,r),a.forEach(m=>{let v=yi(l,m.element,new Map);m.postStyleProps.forEach(E=>v.set(E,null))})):(r.push(k4()),a=[]),r.length)throw N4(r);l.forEach((m,v)=>{m.forEach((E,b)=>{m.set(b,this._driver.computeStyle(v,b,Vr))})});let u=a.map(m=>{let v=l.get(m.element);return this._buildPlayer(m,new Map,v)}),f=Ms(u);return this._playersById.set(e,f),f.onDestroy(()=>this.destroy(e)),this.players.push(f),f}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw L4(e);return t}listen(e,t,i,r){let o=Pb(t,"","","");return xb(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let a=r[0]||{};this.create(e,t,a);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},Rx="ng-animate-queued",w6=".ng-animate-queued",db="ng-animate-disabled",b6=".ng-animate-disabled",E6="ng-star-inserted",I6=".ng-star-inserted",C6=[],Wx={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},T6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},dr="__ng_removed",Xd=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=D6(r),i){let o=e,{value:a}=o,l=Tv(o,["value"]);this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},Qd="void",hb=new Xd(Qd),Sb=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ji(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw F4(i,t);if(i==null||i.length==0)throw V4(t);if(!A6(i))throw B4(i,t);let o=yi(this._elementListeners,e,[]),a={name:t,phase:i,callback:r};o.push(a);let l=yi(this._engine.statesByElement,e,new Map);return l.has(t)||(ji(e,sg),ji(e,sg+"-"+t),l.set(t,hb)),()=>{this._engine.afterFlush(()=>{let u=o.indexOf(a);u>=0&&o.splice(u,1),this._triggers.has(t)||l.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw U4(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),a=new eh(this.id,t,e),l=this._engine.statesByElement.get(e);l||(ji(e,sg),ji(e,sg+"-"+t),this._engine.statesByElement.set(e,l=new Map));let u=l.get(t),f=new Xd(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&u&&f.absorbOptions(u.options),l.set(t,f),u||(u=hb),!(f.value===Qd)&&u.value===f.value){if(!P6(u.params,f.params)){let k=[],N=o.matchStyles(u.value,u.params,k),G=o.matchStyles(f.value,f.params,k);k.length?this._engine.reportError(k):this._engine.afterFlush(()=>{Ha(e,N),Ur(e,G)})}return}let E=yi(this._engine.playersByElement,e,[]);E.forEach(k=>{k.namespaceId==this.id&&k.triggerName==t&&k.queued&&k.destroy()});let b=o.matchTransition(u.value,f.value,e,f.params),M=!1;if(!b){if(!r)return;b=o.fallbackTransition,M=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:b,fromState:u,toState:f,player:a,isFallbackTransition:M}),M||(ji(e,Rx),a.onStart(()=>{Ol(e,Rx)})),a.onDone(()=>{let k=this.players.indexOf(a);k>=0&&this.players.splice(k,1);let N=this._engine.playersByElement.get(e);if(N){let G=N.indexOf(a);G>=0&&N.splice(G,1)}}),this.players.push(a),E.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,dg,!0);i.forEach(r=>{if(r[dr])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(a=>a.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),a=new Map;if(o){let l=[];if(o.forEach((u,f)=>{if(a.set(f,u.value),this._triggers.has(f)){let m=this.trigger(e,f,Qd,r);m&&l.push(m)}}),l.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),i&&Ms(l).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let a=o.name;if(r.has(a))return;r.add(a);let u=this._triggers.get(a).fallbackTransition,f=i.get(a)||hb,m=new Xd(Qd),v=new eh(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:u,fromState:f,toState:m,player:v,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let a=e;for(;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[dr];(!o||o===Wx)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){ji(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,a=this._elementListeners.get(o);a&&a.forEach(l=>{if(l.name==i.triggerName){let u=Pb(o,i.triggerName,i.fromState.value,i.toState.value);u._data=e,xb(i.player,l.phase,u,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,a=r.transition.ast.depCount;return o==0||a==0?o-a:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Db=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new Sb(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let a=!1,l=this.driver.getParentElement(t);for(;l;){let u=r.get(l);if(u){let f=i.indexOf(u);i.splice(f+1,0,e),a=!0;break}l=this.driver.getParentElement(l)}a||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(lg(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!lg(t))return;let o=t[dr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){let a=this._fetchNamespace(e);a&&a.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ji(e,db)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ol(e,db))}removeNode(e,t,i){if(lg(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[dr]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return lg(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,dg,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,mb,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ms(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[dr];if(t&&t.setForRemoval){if(e[dr]=Wx,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(db)&&this.markElementAsDisabled(e,!1),this.driver.query(e,b6,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];ji(r,E6)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Ms(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw j4(e)}_flushAnimations(e,t){let i=new Jd,r=[],o=new Map,a=[],l=new Map,u=new Map,f=new Map,m=new Set;this.disabledNodes.forEach(W=>{m.add(W);let pe=this.driver.query(W,w6,!0);for(let Z=0;Z<pe.length;Z++)m.add(pe[Z])});let v=this.bodyNode,E=Array.from(this.statesByElement.keys()),b=Nx(E,this.collectedEnterElements),M=new Map,k=0;b.forEach((W,pe)=>{let Z=jx+k++;M.set(pe,Z),W.forEach(ve=>ji(ve,Z))});let N=[],G=new Set,te=new Set;for(let W=0;W<this.collectedLeaveElements.length;W++){let pe=this.collectedLeaveElements[W],Z=pe[dr];Z&&Z.setForRemoval&&(N.push(pe),G.add(pe),Z.hasAnimation?this.driver.query(pe,I6,!0).forEach(ve=>G.add(ve)):te.add(pe))}let J=new Map,ue=Nx(E,Array.from(G));ue.forEach((W,pe)=>{let Z=pb+k++;J.set(pe,Z),W.forEach(ve=>ji(ve,Z))}),e.push(()=>{b.forEach((W,pe)=>{let Z=M.get(pe);W.forEach(ve=>Ol(ve,Z))}),ue.forEach((W,pe)=>{let Z=J.get(pe);W.forEach(ve=>Ol(ve,Z))}),N.forEach(W=>{this.processLeaveNode(W)})});let Ne=[],he=[];for(let W=this._namespaceList.length-1;W>=0;W--)this._namespaceList[W].drainQueuedTransitions(t).forEach(Z=>{let ve=Z.player,Ye=Z.element;if(Ne.push(ve),this.collectedEnterElements.length){let Ot=Ye[dr];if(Ot&&Ot.setForMove){if(Ot.previousTriggersValues&&Ot.previousTriggersValues.has(Z.triggerName)){let ei=Ot.previousTriggersValues.get(Z.triggerName),un=this.statesByElement.get(Z.element);if(un&&un.has(Z.triggerName)){let kn=un.get(Z.triggerName);kn.value=ei,un.set(Z.triggerName,kn)}}ve.destroy();return}}let Et=!v||!this.driver.containsElement(v,Ye),Le=J.get(Ye),Ie=M.get(Ye),Ee=this._buildInstruction(Z,i,Ie,Le,Et);if(Ee.errors&&Ee.errors.length){he.push(Ee);return}if(Et){ve.onStart(()=>Ha(Ye,Ee.fromStyles)),ve.onDestroy(()=>Ur(Ye,Ee.toStyles)),r.push(ve);return}if(Z.isFallbackTransition){ve.onStart(()=>Ha(Ye,Ee.fromStyles)),ve.onDestroy(()=>Ur(Ye,Ee.toStyles)),r.push(ve);return}let ln=[];Ee.timelines.forEach(Ot=>{Ot.stretchStartingKeyframe=!0,this.disabledNodes.has(Ot.element)||ln.push(Ot)}),Ee.timelines=ln,i.append(Ye,Ee.timelines);let Ti={instruction:Ee,player:ve,element:Ye};a.push(Ti),Ee.queriedElements.forEach(Ot=>yi(l,Ot,[]).push(ve)),Ee.preStyleProps.forEach((Ot,ei)=>{if(Ot.size){let un=u.get(ei);un||u.set(ei,un=new Set),Ot.forEach((kn,Si)=>un.add(Si))}}),Ee.postStyleProps.forEach((Ot,ei)=>{let un=f.get(ei);un||f.set(ei,un=new Set),Ot.forEach((kn,Si)=>un.add(Si))})});if(he.length){let W=[];he.forEach(pe=>{W.push(z4(pe.triggerName,pe.errors))}),Ne.forEach(pe=>pe.destroy()),this.reportError(W)}let R=new Map,S=new Map;a.forEach(W=>{let pe=W.element;i.has(pe)&&(S.set(pe,pe),this._beforeAnimationBuild(W.player.namespaceId,W.instruction,R))}),r.forEach(W=>{let pe=W.element;this._getPreviousPlayers(pe,!1,W.namespaceId,W.triggerName,null).forEach(ve=>{yi(R,pe,[]).push(ve),ve.destroy()})});let A=N.filter(W=>Lx(W,u,f)),O=new Map;kx(O,this.driver,te,f,Vr).forEach(W=>{Lx(W,u,f)&&A.push(W)});let V=new Map;b.forEach((W,pe)=>{kx(V,this.driver,new Set(W),u,og)}),A.forEach(W=>{let pe=O.get(W),Z=V.get(W);O.set(W,new Map([...pe?.entries()??[],...Z?.entries()??[]]))});let P=[],Dt=[],Hn={};a.forEach(W=>{let{element:pe,player:Z,instruction:ve}=W;if(i.has(pe)){if(m.has(pe)){Z.onDestroy(()=>Ur(pe,ve.toStyles)),Z.disabled=!0,Z.overrideTotalTime(ve.totalTime),r.push(Z);return}let Ye=Hn;if(S.size>1){let Le=pe,Ie=[];for(;Le=Le.parentNode;){let Ee=S.get(Le);if(Ee){Ye=Ee;break}Ie.push(Le)}Ie.forEach(Ee=>S.set(Ee,Ye))}let Et=this._buildAnimation(Z.namespaceId,ve,R,o,V,O);if(Z.setRealPlayer(Et),Ye===Hn)P.push(Z);else{let Le=this.playersByElement.get(Ye);Le&&Le.length&&(Z.parentPlayer=Ms(Le)),r.push(Z)}}else Ha(pe,ve.fromStyles),Z.onDestroy(()=>Ur(pe,ve.toStyles)),Dt.push(Z),m.has(pe)&&r.push(Z)}),Dt.forEach(W=>{let pe=o.get(W.element);if(pe&&pe.length){let Z=Ms(pe);W.setRealPlayer(Z)}}),r.forEach(W=>{W.parentPlayer?W.syncPlayerEvents(W.parentPlayer):W.destroy()});for(let W=0;W<N.length;W++){let pe=N[W],Z=pe[dr];if(Ol(pe,pb),Z&&Z.hasAnimation)continue;let ve=[];if(l.size){let Et=l.get(pe);Et&&Et.length&&ve.push(...Et);let Le=this.driver.query(pe,mb,!0);for(let Ie=0;Ie<Le.length;Ie++){let Ee=l.get(Le[Ie]);Ee&&Ee.length&&ve.push(...Ee)}}let Ye=ve.filter(Et=>!Et.destroyed);Ye.length?M6(this,pe,Ye):this.processLeaveNode(pe)}return N.length=0,P.forEach(W=>{this.players.push(W),W.onDone(()=>{W.destroy();let pe=this.players.indexOf(W);this.players.splice(pe,1)}),W.play()}),P}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let a=[];if(t){let l=this.playersByQueriedElement.get(e);l&&(a=l)}else{let l=this.playersByElement.get(e);if(l){let u=!o||o==Qd;l.forEach(f=>{f.queued||!u&&f.triggerName!=r||a.push(f)})}}return(i||r)&&(a=a.filter(l=>!(i&&i!=l.namespaceId||r&&r!=l.triggerName))),a}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,a=t.isRemovalTransition?void 0:e,l=t.isRemovalTransition?void 0:r;for(let u of t.timelines){let f=u.element,m=f!==o,v=yi(i,f,[]);this._getPreviousPlayers(f,m,a,l,t.toState).forEach(b=>{let M=b.getRealPlayer();M.beforeDestroy&&M.beforeDestroy(),b.destroy(),v.push(b)})}Ha(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,a){let l=t.triggerName,u=t.element,f=[],m=new Set,v=new Set,E=t.timelines.map(M=>{let k=M.element;m.add(k);let N=k[dr];if(N&&N.removedBeforeQueried)return new As(M.duration,M.delay);let G=k!==u,te=x6((i.get(k)||C6).map(R=>R.getRealPlayer())).filter(R=>{let S=R;return S.element?S.element===k:!1}),J=o.get(k),ue=a.get(k),Ne=Fx(this._normalizer,M.keyframes,J,ue),he=this._buildPlayer(M,Ne,te);if(M.subTimeline&&r&&v.add(k),G){let R=new eh(e,l,k);R.setRealPlayer(he),f.push(R)}return he});f.forEach(M=>{yi(this.playersByQueriedElement,M.element,[]).push(M),M.onDone(()=>S6(this.playersByQueriedElement,M.element,M))}),m.forEach(M=>ji(M,Sx));let b=Ms(E);return b.onDestroy(()=>{m.forEach(M=>Ol(M,Sx)),Ur(u,t.toStyles)}),v.forEach(M=>{yi(r,M,[]).push(b)}),b}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new As(e.duration,e.delay)}},eh=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new As,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>xb(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){yi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function S6(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function D6(n){return n??null}function lg(n){return n&&n.nodeType===1}function A6(n){return n=="start"||n=="done"}function Ox(n,e){let t=n.style.display;return n.style.display=e??"none",t}function kx(n,e,t,i,r){let o=[];t.forEach(u=>o.push(Ox(u)));let a=[];i.forEach((u,f)=>{let m=new Map;u.forEach(v=>{let E=e.computeStyle(f,v,r);m.set(v,E),(!E||E.length==0)&&(f[dr]=T6,a.push(f))}),n.set(f,m)});let l=0;return t.forEach(u=>Ox(u,o[l++])),a}function Nx(n,e){let t=new Map;if(n.forEach(l=>t.set(l,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function a(l){if(!l)return i;let u=o.get(l);if(u)return u;let f=l.parentNode;return t.has(f)?u=f:r.has(f)?u=i:u=a(f),o.set(l,u),u}return e.forEach(l=>{let u=a(l);u!==i&&t.get(u).push(l)}),t}function ji(n,e){n.classList?.add(e)}function Ol(n,e){n.classList?.remove(e)}function M6(n,e,t){Ms(t).onDone(()=>n.processLeaveNode(e))}function x6(n){let e=[];return Kx(n,e),e}function Kx(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Gd?Kx(i.players,e):e.push(i)}}function P6(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function Lx(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var kl=class{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Db(e.body,t,i),this._timelineEngine=new Tb(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let a=e+"-"+r,l=this._triggerCache[a];if(!l){let u=[],f=[],m=Hx(this._driver,o,u,f);if(u.length)throw P4(r,u);f.length&&void 0,l=_6(r,m,this._normalizer),this._triggerCache[a]=l}this._transitionEngine.registerTrigger(t,r,l)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,a]=Cx(i),l=r;this._timelineEngine.command(o,t,a,l)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[a,l]=Cx(i);return this._timelineEngine.listen(a,t,l,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function R6(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=fb(e[0]),e.length>1&&(i=fb(e[e.length-1]))):e instanceof Map&&(t=fb(e)),t||i?new Ab(n,t,i):null}var Ab=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=n.initialStylesByElement.get(e);r||n.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Ur(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ur(this._element,this._initialStyles),this._endStyles&&(Ur(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ha(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ha(this._element,this._endStyles),this._endStyles=null),Ur(this._element,this._initialStyles),this._state=3)}};function fb(n){let e=null;return n.forEach((t,i)=>{O6(i)&&(e=e||new Map,e.set(i,t))}),e}function O6(n){return n==="display"||n==="position"}var vg=class{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:Nb(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},yg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Vx(e,t)}getParentElement(e){return Rb(e)}query(e,t,i){return Bx(e,t,i)}computeStyle(e,t,i){return Nb(e,t)}animate(e,t,i,r,o,a=[]){let l=r==0?"both":"forwards",u={duration:i,delay:r,fill:l};o&&(u.easing=o);let f=new Map,m=a.filter(b=>b instanceof vg);X4(i,r)&&m.forEach(b=>{b.currentSnapshot.forEach((M,k)=>f.set(k,M))});let v=Q4(t).map(b=>new Map(b));v=e6(e,v,f);let E=R6(e,v);return new vg(e,v,u,E)}};var ug="@",Zx="@.disabled",wg=class{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==ug&&t==Zx?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Mb=class extends wg{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==ug?t.charAt(1)=="."&&t==Zx?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==ug){let r=k6(e),o=t.slice(1),a="";return o.charAt(0)!=ug&&([o,a]=N6(o)),this.engine.listen(this.namespaceId,r,o,a,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,i,l)})}return this.delegate.listen(e,t,i)}};function k6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function N6(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var bg=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let f=this._rendererCache,m=f.get(r);if(!m){let v=()=>f.delete(r);m=new wg(i,r,this.engine,v),f.set(r,m)}return m}let o=t.id,a=t.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);let l=f=>{Array.isArray(f)?f.forEach(l):this.engine.registerTrigger(o,a,e,f.name,f)};return t.data.animation.forEach(l),new Mb(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[a,l]=o;a(l)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var F6=(()=>{class n extends kl{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(ge(vn),ge(qa),ge(Ga))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function V6(){return new fg}function B6(n,e,t){return new bg(n,e,t)}var Qx=[{provide:Ga,useFactory:V6},{provide:kl,useClass:F6},{provide:ms,useFactory:B6,deps:[Vm,kl,ct]}],U6=[{provide:qa,useFactory:()=>new yg},{provide:k0,useValue:"BrowserAnimations"},...Qx],jee=[{provide:qa,useClass:Ob},{provide:k0,useValue:"NoopAnimations"},...Qx];function Yx(){return ws("NgEagerAnimations"),[...U6]}var Xx=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},j6=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[t++],a=n[t++],l=n[t++],u=((r&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},eP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],a=r+1<n.length,l=a?n[r+1]:0,u=r+2<n.length,f=u?n[r+2]:0,m=o>>2,v=(o&3)<<4|l>>4,E=(l&15)<<2|f>>6,b=f&63;u||(b=64,a||(E=64)),i.push(t[m],t[v],t[E],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Xx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):j6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;let f=r<n.length?t[n.charAt(r)]:64;++r;let v=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||l==null||f==null||v==null)throw new Vb;let E=o<<2|l>>4;if(i.push(E),f!==64){let b=l<<4&240|f>>2;if(i.push(b),v!==64){let M=f<<6&192|v;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Vb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},z6=function(n){let e=Xx(n);return eP.encodeByteArray(e,!0)},th=function(n){return z6(n).replace(/\./g,"")},Ub=function(n){try{return eP.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var H6=()=>$6().__FIREBASE_DEFAULTS__,q6=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},G6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ub(n[1]);return e&&JSON.parse(e)},Ig=()=>{try{return H6()||q6()||G6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jb=n=>{var e,t;return(t=(e=Ig())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},tP=n=>{let e=jb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},zb=()=>{var n;return(n=Ig())===null||n===void 0?void 0:n.config},$b=n=>{var e;return(e=Ig())===null||e===void 0?void 0:e[`_${n}`]};var Eg=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function nP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[th(JSON.stringify(t)),th(JSON.stringify(a)),""].join(".")}function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function W6(){var n;let e=(n=Ig())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aP(){let n=wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cP(){return!W6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hb(){try{return typeof indexedDB=="object"}catch{return!1}}function lP(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var K6="FirebaseError",wi=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=K6,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ro.prototype.create)}},Ro=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?Z6(o,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new wi(r,l,i)}};function Z6(n,e){return n.replace(Q6,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Q6=/\{\$([^}]+)}/g;function uP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Oo(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let o=n[r],a=e[r];if(Jx(o)&&Jx(a)){if(!Oo(o,a))return!1}else if(o!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function Jx(n){return n!==null&&typeof n=="object"}function Nl(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function dP(n,e){let t=new Bb(n,e);return t.subscribe.bind(t)}var Bb=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Y6(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Fb),r.error===void 0&&(r.error=Fb),r.complete===void 0&&(r.complete=Fb);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Y6(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Fb(){}var $ee=4*60*60*1e3;function Wt(n){return n&&n._delegate?n._delegate:n}var zi=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Wa="[DEFAULT]";var qb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Eg;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X6(e))try{this.getOrInitializeService({instanceIdentifier:Wa})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Wa){return this.instances.has(e)}getOptions(e=Wa){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[o,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);let a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:J6(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Wa){return this.component?this.component.multipleInstances?e:Wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function J6(n){return n===Wa?void 0:n}function X6(n){return n.instantiationMode==="EAGER"}var Cg=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new qb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var ez=[],et=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(et||{}),tz={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},nz=et.INFO,iz={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},rz=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=iz[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xs=class{constructor(e){this.name=e,this._logLevel=nz,this._logHandler=rz,this._userLogHandler=null,ez.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}};var oz=(n,e)=>e.some(t=>n instanceof t),hP,fP;function sz(){return hP||(hP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function az(){return fP||(fP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var pP=new WeakMap,Wb=new WeakMap,mP=new WeakMap,Gb=new WeakMap,Zb=new WeakMap;function cz(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(jr(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&pP.set(t,n)}).catch(()=>{}),Zb.set(e,n),e}function lz(n){if(Wb.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Wb.set(n,e)}var Kb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gP(n){Kb=n(Kb)}function uz(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Tg(this),e,...t);return mP.set(i,e.sort?e.sort():[e]),jr(i)}:az().includes(n)?function(...e){return n.apply(Tg(this),e),jr(pP.get(this))}:function(...e){return jr(n.apply(Tg(this),e))}}function dz(n){return typeof n=="function"?uz(n):(n instanceof IDBTransaction&&lz(n),oz(n,sz())?new Proxy(n,Kb):n)}function jr(n){if(n instanceof IDBRequest)return cz(n);if(Gb.has(n))return Gb.get(n);let e=dz(n);return e!==n&&(Gb.set(n,e),Zb.set(e,n)),e}var Tg=n=>Zb.get(n);function vP(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){let a=indexedDB.open(n,e),l=jr(a);return i&&a.addEventListener("upgradeneeded",u=>{i(jr(a.result),u.oldVersion,u.newVersion,jr(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var hz=["get","getKey","getAll","getAllKeys","count"],fz=["put","add","delete","clear"],Qb=new Map;function _P(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qb.get(e))return Qb.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=fz.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||hz.includes(t)))return;let o=function(a,...l){return T(this,null,function*(){let u=this.transaction(a,r?"readwrite":"readonly"),f=u.store;return i&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),r&&u.done]))[0]})};return Qb.set(e,o),o}gP(n=>Oe(Y({},n),{get:(e,t,i)=>_P(e,t)||n.get(e,t,i),has:(e,t)=>!!_P(e,t)||n.has(e,t)}));var Jb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pz(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function pz(n){let e=n.getComponent();return e?.type==="VERSION"}var Xb="@firebase/app",yP="0.10.13";var ko=new xs("@firebase/app"),mz="@firebase/app-compat",gz="@firebase/analytics-compat",_z="@firebase/analytics",vz="@firebase/app-check-compat",yz="@firebase/app-check",wz="@firebase/auth",bz="@firebase/auth-compat",Ez="@firebase/database",Iz="@firebase/data-connect",Cz="@firebase/database-compat",Tz="@firebase/functions",Sz="@firebase/functions-compat",Dz="@firebase/installations",Az="@firebase/installations-compat",Mz="@firebase/messaging",xz="@firebase/messaging-compat",Pz="@firebase/performance",Rz="@firebase/performance-compat",Oz="@firebase/remote-config",kz="@firebase/remote-config-compat",Nz="@firebase/storage",Lz="@firebase/storage-compat",Fz="@firebase/firestore",Vz="@firebase/vertexai-preview",Bz="@firebase/firestore-compat",Uz="firebase",jz="10.14.1";var eE="[DEFAULT]",zz={[Xb]:"fire-core",[mz]:"fire-core-compat",[_z]:"fire-analytics",[gz]:"fire-analytics-compat",[yz]:"fire-app-check",[vz]:"fire-app-check-compat",[wz]:"fire-auth",[bz]:"fire-auth-compat",[Ez]:"fire-rtdb",[Iz]:"fire-data-connect",[Cz]:"fire-rtdb-compat",[Tz]:"fire-fn",[Sz]:"fire-fn-compat",[Dz]:"fire-iid",[Az]:"fire-iid-compat",[Mz]:"fire-fcm",[xz]:"fire-fcm-compat",[Pz]:"fire-perf",[Rz]:"fire-perf-compat",[Oz]:"fire-rc",[kz]:"fire-rc-compat",[Nz]:"fire-gcs",[Lz]:"fire-gcs-compat",[Fz]:"fire-fst",[Bz]:"fire-fst-compat",[Vz]:"fire-vertex","fire-js":"fire-js",[Uz]:"fire-js-all"};var nh=new Map,$z=new Map,tE=new Map;function wP(n,e){try{n.container.addComponent(e)}catch(t){ko.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rs(n){let e=n.name;if(tE.has(e))return ko.debug(`There were multiple attempts to register component ${e}.`),!1;tE.set(e,n);for(let t of nh.values())wP(t,n);for(let t of $z.values())wP(t,n);return!0}function rh(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function zr(n){return n.settings!==void 0}var Hz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new Ro("app","Firebase",Hz);var nE=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}};var Os=jz;function oE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:eE,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ps.create("bad-app-name",{appName:String(r)});if(t||(t=zb()),!t)throw Ps.create("no-options");let o=nh.get(r);if(o){if(Oo(t,o.options)&&Oo(i,o.config))return o;throw Ps.create("duplicate-app",{appName:r})}let a=new Cg(r);for(let u of tE.values())a.addComponent(u);let l=new nE(t,i,a);return nh.set(r,l),l}function Ll(n=eE){let e=nh.get(n);if(!e&&n===eE&&zb())return oE();if(!e)throw Ps.create("no-app",{appName:n});return e}function Sg(){return Array.from(nh.values())}function cn(n,e,t){var i;let r=(i=zz[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ko.warn(l.join(" "));return}Rs(new zi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var qz="firebase-heartbeat-database",Gz=1,ih="firebase-heartbeat-store",Yb=null;function CP(){return Yb||(Yb=vP(qz,Gz,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ih)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ps.create("idb-open",{originalErrorMessage:n.message})})),Yb}function Wz(n){return T(this,null,function*(){try{let t=(yield CP()).transaction(ih),i=yield t.objectStore(ih).get(TP(n));return yield t.done,i}catch(e){if(e instanceof wi)ko.warn(e.message);else{let t=Ps.create("idb-get",{originalErrorMessage:e?.message});ko.warn(t.message)}}})}function bP(n,e){return T(this,null,function*(){try{let i=(yield CP()).transaction(ih,"readwrite");yield i.objectStore(ih).put(e,TP(n)),yield i.done}catch(t){if(t instanceof wi)ko.warn(t.message);else{let i=Ps.create("idb-set",{originalErrorMessage:t?.message});ko.warn(i.message)}}})}function TP(n){return`${n.name}!${n.options.appId}`}var Kz=1024,Zz=30*24*60*60*1e3,iE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new rE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return T(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=EP();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let l=new Date(a.date).valueOf();return Date.now()-l<=Zz}),this._storage.overwrite(this._heartbeatsCache))}catch(i){ko.warn(i)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=EP(),{heartbeatsToSend:i,unsentEntries:r}=Qz(this._heartbeatsCache.heartbeats),o=th(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ko.warn(t),""}})}};function EP(){return new Date().toISOString().substring(0,10)}function Qz(n,e=Kz){let t=[],i=n.slice();for(let r of n){let o=t.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),IP(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),IP(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var rE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return Hb()?lP().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Wz(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return bP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return bP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function IP(n){return th(JSON.stringify({version:2,heartbeats:n})).length}function Yz(n){Rs(new zi("platform-logger",e=>new Jb(e),"PRIVATE")),Rs(new zi("heartbeat",e=>new iE(e),"PRIVATE")),cn(Xb,yP,n),cn(Xb,yP,"esm2017"),cn("fire-js","")}Yz("");var Jz="firebase",Xz="10.14.1";cn(Jz,Xz,"app");var Za=new go("ANGULARFIRE2_VERSION");function Ag(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var oh=(n,e)=>{let t=e?[e]:Sg(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},Vl=class{constructor(){return oh(e$)}},e$="app-check";function Fl(){}var Dg=class{zone;delegate;constructor(e,t=Hv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,o=function(a){r.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,t,i)}},sE=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fl,{},Fl,Fl)),t.pipe(Yt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Bl=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Dg(Zone.current)),this.insideAngular=t.run(()=>new Dg(Zone.current,$v)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(ge(ct))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mg(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function t$(n){return Mg().ngZone.runOutsideAngular(()=>n())}function Ka(n){return Mg().ngZone.run(()=>n())}function n$(n){return i$(Mg())(n)}function i$(n){return function(t){return t=t.lift(new sE(n.ngZone)),t.pipe(ss(n.outsideAngular),os(n.insideAngular))}}var r$=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ka(()=>n.apply(void 0,i))},Nt=(n,e)=>function(){let t,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(e&&(t||=Ka(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fl,{},Fl,Fl))),i[o]=r$(i[o],t));let r=t$(()=>n.apply(this,i));if(!e)if(r instanceof ze){let o=Mg();return r.pipe(ss(o.outsideAngular),os(o.insideAngular))}else return Ka(()=>r);return r instanceof ze?r.pipe(n$):r instanceof Promise?Ka(()=>new Promise((o,a)=>r.then(l=>Ka(()=>o(l)),l=>Ka(()=>a(l))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:Ka(()=>r)};var No=class{constructor(e){return e}},Qa=class{constructor(){return Sg()}};function o$(n){return n&&n.length===1?n[0]:new No(Ll())}var aE=new de("angularfire2._apps"),s$={provide:No,useFactory:o$,deps:[[new Mn,aE]]},a$={provide:Qa,deps:[[new Mn,aE]]};function c$(n){return(e,t)=>{let i=t.get(Li);cn("angularfire",Za.full,"core"),cn("angularfire",Za.full,"app"),cn("angular",LA.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new No(r)}}function SP(n,...e){return rr([s$,a$,{provide:aE,useFactory:c$(n),multi:!0,deps:[ct,Cn,Bl,...e]}])}var DP=Nt(oE,!0);function $P(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HP=$P,qP=new Ro("auth","Firebase",$P());var Ng=new xs("@firebase/auth");function l$(n,...e){Ng.logLevel<=et.WARN&&Ng.warn(`Auth (${Os}): ${n}`,...e)}function Pg(n,...e){Ng.logLevel<=et.ERROR&&Ng.error(`Auth (${Os}): ${n}`,...e)}function Ls(n,...e){throw OE(n,...e)}function $r(n,...e){return OE(n,...e)}function GP(n,e,t){let i=Object.assign(Object.assign({},HP()),{[e]:t});return new Ro("auth","Firebase",i).create(e,{appName:n.name})}function Ns(n){return GP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OE(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return qP.create(n,...e)}function be(n,e,...t){if(!n)throw OE(e,...t)}function Lo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Pg(e),new Error(e)}function Fs(n,e){n||Lo(e)}function hE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function WP(){return AP()==="http:"||AP()==="https:"}function AP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function u$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WP()||oP()||"connection"in navigator)?navigator.onLine:!0}function d$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ya=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fs(t>e,"Short delay should be less than long delay!"),this.isMobile=iP()||sP()}get(){return u$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function kE(n,e){Fs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Lg=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var h$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var f$=new Ya(3e4,6e4);function Vo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Hr(o,a,l,u){return T(this,arguments,function*(n,e,t,i,r={}){return KP(n,r,()=>T(this,null,function*(){let f={},m={};i&&(e==="GET"?m=i:f={body:JSON.stringify(i)});let v=Nl(Object.assign({key:n.config.apiKey},m)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let b=Object.assign({method:e,headers:E},f);return rP()||(b.referrerPolicy="no-referrer"),Lg.fetch()(ZP(n,n.config.apiHost,t,v),b)}))})}function KP(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},h$),e);try{let r=new fE(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw sh(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let l=o.ok?a.errorMessage:a.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw sh(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw sh(n,"user-disabled",a);let m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw GP(n,m,f);Ls(n,m)}}catch(r){if(r instanceof wi)throw r;Ls(n,"network-request-failed",{message:String(r)})}})}function Gg(o,a,l,u){return T(this,arguments,function*(n,e,t,i,r={}){let f=yield Hr(n,e,t,i,r);return"mfaPendingCredential"in f&&Ls(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function ZP(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?kE(n.config,r):`${n.config.apiScheme}://${r}`}var fE=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i($r(this.auth,"network-request-failed")),f$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function sh(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=$r(n,e,i);return r.customData._tokenResponse=t,r}function MP(n){return n!==void 0&&n.getResponse!==void 0}function p$(n){return T(this,null,function*(){return(yield Hr(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})}function m$(n,e){return T(this,null,function*(){return Hr(n,"POST","/v1/accounts:delete",e)})}function QP(n,e){return T(this,null,function*(){return Hr(n,"POST","/v1/accounts:lookup",e)})}function ah(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function NE(n,e=!1){return T(this,null,function*(){let t=Wt(n),i=yield t.getIdToken(e),r=LE(i);be(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,a=o?.sign_in_provider;return{claims:r,token:i,authTime:ah(cE(r.auth_time)),issuedAtTime:ah(cE(r.iat)),expirationTime:ah(cE(r.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function cE(n){return Number(n)*1e3}function LE(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Pg("JWT malformed, contained fewer than 3 sections"),null;try{let r=Ub(t);return r?JSON.parse(r):(Pg("Failed to decode base64 JWT payload"),null)}catch(r){return Pg("Caught error parsing JWT payload as JSON",r?.toString()),null}}function xP(n){let e=LE(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function lh(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof wi&&g$(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function g$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var pE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var uh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ah(this.lastLoginAt),this.creationTime=ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Fg(n){return T(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield lh(n,QP(t,{idToken:i}));be(r?.users.length,t,"internal-error");let o=r.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?YP(o.providerUserInfo):[],l=_$(n.providerData,a),u=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,m=u?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new uh(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)})}function FE(n){return T(this,null,function*(){let e=Wt(n);yield Fg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function _$(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function YP(n){return n.map(e=>{var{providerId:t}=e,i=qv(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function v$(n,e){return T(this,null,function*(){let t=yield KP(n,{},()=>T(this,null,function*(){let i=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,a=ZP(n,r,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Lg.fetch()(a,{method:"POST",headers:l,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function y$(n,e){return T(this,null,function*(){return Hr(n,"POST","/v2/accounts:revokeToken",Vo(n,e))})}var ch=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");let t=xP(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield v$(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,a=new n;return i&&(be(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(be(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(be(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Lo("not implemented")}};function ks(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ul=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=qv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new uh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield lh(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return NE(this,e)}reload(){return FE(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Fg(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(zr(this.auth.app))return Promise.reject(Ns(this.auth));let e=yield this.getIdToken();return yield lh(this,m$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,a,l,u,f,m;let v=(i=t.displayName)!==null&&i!==void 0?i:void 0,E=(r=t.email)!==null&&r!==void 0?r:void 0,b=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,M=(a=t.photoURL)!==null&&a!==void 0?a:void 0,k=(l=t.tenantId)!==null&&l!==void 0?l:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,G=(f=t.createdAt)!==null&&f!==void 0?f:void 0,te=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:J,emailVerified:ue,isAnonymous:Ne,providerData:he,stsTokenManager:R}=t;be(J&&R,e,"internal-error");let S=ch.fromJSON(this.name,R);be(typeof J=="string",e,"internal-error"),ks(v,e.name),ks(E,e.name),be(typeof ue=="boolean",e,"internal-error"),be(typeof Ne=="boolean",e,"internal-error"),ks(b,e.name),ks(M,e.name),ks(k,e.name),ks(N,e.name),ks(G,e.name),ks(te,e.name);let A=new n({uid:J,auth:e,email:E,emailVerified:ue,displayName:v,isAnonymous:Ne,photoURL:M,phoneNumber:b,tenantId:k,stsTokenManager:S,createdAt:G,lastLoginAt:te});return he&&Array.isArray(he)&&(A.providerData=he.map(O=>Object.assign({},O))),N&&(A._redirectEventId=N),A}static _fromIdTokenResponse(e,t,i=!1){return T(this,null,function*(){let r=new ch;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Fg(o),o})}static _fromGetAccountInfoResponse(e,t,i){return T(this,null,function*(){let r=t.users[0];be(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?YP(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!o?.length,l=new ch;l.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new uh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(u,f),u})}};var PP=new Map;function Fo(n){Fs(n instanceof Function,"Expected a class definition");let e=PP.get(n);return e?(Fs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,PP.set(n,e),e)}var w$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,i){return T(this,null,function*(){this.storage[t]=i})}_get(t){return T(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),mE=w$;function Rg(n,e,t){return`firebase:${n}:${e}:${t}`}var Vg=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=Rg(this.userKey,r.apiKey,o),this.fullPersistenceKey=Rg("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ul._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return T(this,null,function*(){if(!t.length)return new n(Fo(mE),e,i);let r=(yield Promise.all(t.map(f=>T(this,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=r[0]||Fo(mE),a=Rg(i,e.config.apiKey,e.name),l=null;for(let f of t)try{let m=yield f._get(a);if(m){let v=Ul._fromJSON(e,m);f!==o&&(l=v),o=f;break}}catch{}let u=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,i):(o=u[0],l&&(yield o._set(a,l.toJSON())),yield Promise.all(t.map(f=>T(this,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,i))})}};function RP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iR(e))return"Blackberry";if(rR(e))return"Webos";if(XP(e))return"Safari";if((e.includes("chrome/")||eR(e))&&!e.includes("edge/"))return"Chrome";if(nR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function JP(n=wn()){return/firefox\//i.test(n)}function XP(n=wn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eR(n=wn()){return/crios\//i.test(n)}function tR(n=wn()){return/iemobile/i.test(n)}function nR(n=wn()){return/android/i.test(n)}function iR(n=wn()){return/blackberry/i.test(n)}function rR(n=wn()){return/webos/i.test(n)}function VE(n=wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function b$(n=wn()){var e;return VE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function E$(){return aP()&&document.documentMode===10}function oR(n=wn()){return VE(n)||nR(n)||rR(n)||iR(n)||/windows phone/i.test(n)||tR(n)}function sR(n,e=[]){let t;switch(n){case"Browser":t=RP(wn());break;case"Worker":t=`${RP(wn())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Os}/${i}`}var gE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((a,l)=>{try{let u=e(o);a(u)}catch(u){l(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function I$(t){return T(this,arguments,function*(n,e={}){return Hr(n,"GET","/v2/passwordPolicy",Vo(n,e))})}var C$=6,_E=class{constructor(e){var t,i,r,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:C$,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,a,l;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var vE=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bg(this),this.idTokenSubscription=new Bg(this),this.beforeStateQueue=new gE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fo(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Vg.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield QP(this,{idToken:e}),i=yield Ul._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var t;if(zr(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield Fg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=d$()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(zr(this.app))return Promise.reject(Ns(this));let t=e?Wt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return zr(this.app)?Promise.reject(Ns(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zr(this.app)?Promise.reject(Ns(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(Fo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield I$(this),t=new _E(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ro("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield y$(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Fo(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=yield Vg.create(this,[Fo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{a=!0,u()}}else{let u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return T(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&l$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function jl(n){return Wt(n)}var Bg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=dP(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Wg={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T$(n){Wg=n}function aR(n){return Wg.loadJS(n)}function S$(){return Wg.recaptchaV2Script}function D$(){return Wg.gapiScript}function cR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function BE(n,e){let t=rh(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),o=t.getOptions();if(Oo(o,e??{}))return r;Ls(r,"already-initialized")}return t.initialize({options:e})}function A$(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Fo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function UE(n,e,t){let i=jl(n);be(i._canInitEmulator,i,"emulator-config-failed"),be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,o=lR(e),{host:a,port:l}=M$(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${o}//${a}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||x$()}function lR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function M$(n){let e=lR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:OP(i.substr(o.length+1))}}else{let[o,a]=i.split(":");return{host:o,port:OP(a)}}}function OP(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function x$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var dh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lo("not implemented")}_getIdTokenResponse(e){return Lo("not implemented")}_linkToIdToken(e,t){return Lo("not implemented")}_getReauthenticationResolver(e){return Lo("not implemented")}};function lE(n,e){return T(this,null,function*(){return Gg(n,"POST","/v1/accounts:signInWithIdp",Vo(n,e))})}function P$(n,e){return T(this,null,function*(){return Hr(n,"POST","/v1/accounts:sendVerificationCode",Vo(n,e))})}function R$(n,e){return T(this,null,function*(){return Gg(n,"POST","/v1/accounts:signInWithPhoneNumber",Vo(n,e))})}function O$(n,e){return T(this,null,function*(){let t=yield Gg(n,"POST","/v1/accounts:signInWithPhoneNumber",Vo(n,e));if(t.temporaryProof)throw sh(n,"account-exists-with-different-credential",t);return t})}var k$={USER_NOT_FOUND:"user-not-found"};function N$(n,e){return T(this,null,function*(){let t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Gg(n,"POST","/v1/accounts:signInWithPhoneNumber",Vo(n,t),k$)})}var Ug=class n extends dh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new n({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new n({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return R$(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return O$(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return N$(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:o}=e;return!i&&!t&&!r&&!o?null:new n({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:o})}};var jg=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var yE=class extends jg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var hh=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return T(this,null,function*(){let o=yield Ul._fromIdTokenResponse(e,i,r),a=kP(i);return new n({user:o,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return T(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=kP(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function kP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var wE=class n extends wi{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function uR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?wE._fromErrorAndOperation(n,o,e,i):o})}function L$(n,e,t=!1){return T(this,null,function*(){let i=yield lh(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return hh._forOperation(n,"link",i)})}function F$(n,e,t=!1){return T(this,null,function*(){let{auth:i}=n;if(zr(i.app))return Promise.reject(Ns(i));let r="reauthenticate";try{let o=yield lh(n,uR(i,r,e,n),t);be(o.idToken,i,"internal-error");let a=LE(o.idToken);be(a,i,"internal-error");let{sub:l}=a;return be(n.uid===l,i,"user-mismatch"),hh._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ls(i,"user-mismatch"),o}})}function dR(n,e,t=!1){return T(this,null,function*(){if(zr(n.app))return Promise.reject(Ns(n));let i="signIn",r=yield uR(n,i,e),o=yield hh._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})}function jE(n,e){return T(this,null,function*(){return dR(jl(n),e)})}function Kg(n,e,t,i){return Wt(n).onIdTokenChanged(e,t,i)}function zE(n,e,t){return Wt(n).beforeAuthStateChanged(e,t)}function ph(n,e,t,i){return Wt(n).onAuthStateChanged(e,t,i)}function V$(n,e){return Hr(n,"POST","/v2/accounts/mfaEnrollment:start",Vo(n,e))}var zg="__sak";var $g=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zg,"1"),this.storage.removeItem(zg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var B$=1e3,U$=10,j$=(()=>{class n extends $g{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}let r=t.key;i?this.detachListener():this.stopPolling();let o=()=>{let l=this.storage.getItem(r);!i&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);E$()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,U$):o()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},B$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return T(this,null,function*(){yield is(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return T(this,null,function*(){let i=yield is(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return T(this,null,function*(){yield is(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),hR=j$;var z$=(()=>{class n extends $g{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),$E=z$;function $$(n){return Promise.all(n.map(e=>T(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var H$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return T(this,null,function*(){let i=t,{eventId:r,eventType:o,data:a}=i.data,l=this.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let u=Array.from(l).map(m=>T(this,null,function*(){return m(i.origin,a)})),f=yield $$(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function fR(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var bE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return T(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{let f=fR("",20);r.port1.start();let m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(v){let E=v;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(E.data.response);break;default:clearTimeout(m),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function en(){return window}function q$(n){en().location.href=n}function HE(){return typeof en().WorkerGlobalScope<"u"&&typeof en().importScripts=="function"}function G$(){return T(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function W$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function K$(){return HE()?self:null}var pR="firebaseLocalStorageDb",Z$=1,Hg="firebaseLocalStorage",mR="fbase_key",Ja=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Zg(n,e){return n.transaction([Hg],e?"readwrite":"readonly").objectStore(Hg)}function Q$(){let n=indexedDB.deleteDatabase(pR);return new Ja(n).toPromise()}function EE(){let n=indexedDB.open(pR,Z$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Hg,{keyPath:mR})}catch(r){t(r)}}),n.addEventListener("success",()=>T(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Hg)?e(i):(i.close(),yield Q$(),e(yield EE()))}))})}function NP(n,e,t){return T(this,null,function*(){let i=Zg(n,!0).put({[mR]:e,value:t});return new Ja(i).toPromise()})}function Y$(n,e){return T(this,null,function*(){let t=Zg(n,!1).get(e),i=yield new Ja(t).toPromise();return i===void 0?null:i.value})}function LP(n,e){let t=Zg(n,!0).delete(e);return new Ja(t).toPromise()}var J$=800,X$=3,e8=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return T(this,null,function*(){return this.db?this.db:(this.db=yield EE(),this.db)})}_withRetries(t){return T(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>X$)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return T(this,null,function*(){return HE()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return T(this,null,function*(){this.receiver=H$._getInstance(K$()),this.receiver._subscribe("keyChanged",(t,i)=>T(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>T(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return T(this,null,function*(){var t,i;if(this.activeServiceWorker=yield G$(),!this.activeServiceWorker)return;this.sender=new bE(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return T(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||W$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return T(this,null,function*(){try{if(!indexedDB)return!1;let t=yield EE();return yield NP(t,zg,"1"),yield LP(t,zg),!0}catch{}return!1})}_withPendingWrite(t){return T(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(r=>NP(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return T(this,null,function*(){let i=yield this._withRetries(r=>Y$(r,t));return this.localCache[t]=i,i})}_remove(t){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(i=>LP(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return T(this,null,function*(){let t=yield this._withRetries(o=>{let a=Zg(o,!1).getAll();return new Ja(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>T(this,null,function*(){return this._poll()}),J$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),gR=e8;function t8(n,e){return Hr(n,"POST","/v2/accounts/mfaSignIn:start",Vo(n,e))}var n8=500,i8=6e4,xg=1e12,IE=class{constructor(e){this.auth=e,this.counter=xg,this._widgets=new Map}render(e,t){let i=this.counter;return this._widgets.set(i,new CE(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;let i=e||xg;(t=this._widgets.get(i))===null||t===void 0||t.delete(),this._widgets.delete(i)}getResponse(e){var t;let i=e||xg;return((t=this._widgets.get(i))===null||t===void 0?void 0:t.getResponse())||""}execute(e){return T(this,null,function*(){var t;let i=e||xg;return(t=this._widgets.get(i))===null||t===void 0||t.execute(),""})}},CE=class{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let r=typeof e=="string"?document.getElementById(e):e;be(r,"argument-error",{appName:t}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=r8(50);let{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},i8)},n8))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}};function r8(n){let e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}var uE=cR("rcb"),o8=new Ya(3e4,6e4),TE=class{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=en().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return be(s8(t),e,"argument-error"),this.shouldResolveImmediately(t)&&MP(en().grecaptcha)?Promise.resolve(en().grecaptcha):new Promise((i,r)=>{let o=en().setTimeout(()=>{r($r(e,"network-request-failed"))},o8.get());en()[uE]=()=>{en().clearTimeout(o),delete en()[uE];let l=en().grecaptcha;if(!l||!MP(l)){r($r(e,"internal-error"));return}let u=l.render;l.render=(f,m)=>{let v=u(f,m);return this.counter++,v},this.hostLanguage=t,i(l)};let a=`${S$()}?${Nl({onload:uE,render:"explicit",hl:t})}`;aR(a).catch(()=>{clearTimeout(o),r($r(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=en().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}};function s8(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}var SE=class{load(e){return T(this,null,function*(){return new IE(e)})}clearedOneInstance(){}};var _R="recaptcha",a8={theme:"light",type:"image"},Xa=class{constructor(e,t,i=Object.assign({},a8)){this.parameters=i,this.type=_R,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jl(e),this.isInvisible=this.parameters.size==="invisible",be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");let r=typeof t=="string"?document.getElementById(t):t;be(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new SE:new TE,this.validateStartingState()}verify(){return T(this,null,function*(){this.assertNotDestroyed();let e=yield this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(r=>{let o=a=>{a&&(this.tokenChangeListeners.delete(o),r(a))};this.tokenChangeListeners.add(o),this.isInvisible&&t.execute(e)})})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){be(!this.parameters.sitekey,this.auth,"argument-error"),be(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){let i=en()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){be(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){return T(this,null,function*(){if(yield this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId})}init(){return T(this,null,function*(){be(WP()&&!HE(),this.auth,"internal-error"),yield c8(),this.recaptcha=yield this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let e=yield p$(this.auth);be(e,this.auth,"internal-error"),this.parameters.sitekey=e})}getAssertedRecaptcha(){return be(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function c8(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}var DE=class{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){let t=Ug._fromVerification(this.verificationId,e);return this.onConfirmation(t)}};function qE(n,e,t){return T(this,null,function*(){if(zr(n.app))return Promise.reject(Ns(n));let i=jl(n),r=yield l8(i,e,Wt(t));return new DE(r,o=>jE(i,o))})}function l8(n,e,t){return T(this,null,function*(){var i;let r=yield t.verify();try{be(typeof r=="string",n,"argument-error"),be(t.type===_R,n,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){let a=o.session;if("phoneNumber"in o)return be(a.type==="enroll",n,"internal-error"),(yield V$(n,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{be(a.type==="signin",n,"internal-error");let l=((i=o.multiFactorHint)===null||i===void 0?void 0:i.uid)||o.multiFactorUid;return be(l,n,"missing-multi-factor-info"),(yield t8(n,{mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{let{sessionInfo:a}=yield P$(n,{phoneNumber:o.phoneNumber,recaptchaToken:r});return a}}finally{t._reset()}})}function u8(n,e){return e?Fo(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var fh=class extends dh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function d8(n){return dR(n.auth,new fh(n),n.bypassAuthState)}function h8(n){let{auth:e,user:t}=n;return be(t,e,"internal-error"),F$(t,new fh(n),n.bypassAuthState)}function f8(n){return T(this,null,function*(){let{auth:e,user:t}=n;return be(t,e,"internal-error"),L$(t,new fh(n),n.bypassAuthState)})}var AE=class{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>T(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return T(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(u))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d8;case"linkViaPopup":case"linkViaRedirect":return f8;case"reauthViaPopup":case"reauthViaRedirect":return h8;default:Ls(this.auth,"internal-error")}}resolve(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Vte=new Ya(2e3,1e4);var p8="pendingRedirect",Og=new Map,ME=class n extends AE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return T(this,null,function*(){let e=Og.get(this.auth._key());if(!e){try{let i=(yield m8(this.resolver,this.auth))?yield is(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Og.set(this.auth._key(),e)}return this.bypassAuthState||Og.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return T(this,null,function*(){if(e.type==="signInViaRedirect")return is(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,is(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return T(this,null,function*(){})}cleanUp(){}};function m8(n,e){return T(this,null,function*(){let t=v8(e),i=_8(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function g8(n,e){Og.set(n._key(),e)}function _8(n){return Fo(n._redirectPersistence)}function v8(n){return Rg(p8,n.config.apiKey,n.name)}function y8(n,e,t=!1){return T(this,null,function*(){if(zr(n.app))return Promise.reject(Ns(n));let i=jl(n),r=u8(i,e),a=yield new ME(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var w8=10*60*1e3,xE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!vR(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError($r(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w8&&this.cachedEventUids.clear(),this.cachedEventUids.has(FP(e))}saveEventToCache(e){this.cachedEventUids.add(FP(e)),this.lastProcessedEventTime=Date.now()}};function FP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function b8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vR(n);default:return!1}}function E8(t){return T(this,arguments,function*(n,e={}){return Hr(n,"GET","/v1/projects",e)})}var I8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C8=/^https?/;function T8(n){return T(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield E8(n);for(let t of e)try{if(S8(t))return}catch{}Ls(n,"unauthorized-domain")})}function S8(n){let e=hE(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!C8.test(t))return!1;if(I8.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var D8=new Ya(3e4,6e4);function VP(){let n=en().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function A8(n){return new Promise((e,t)=>{var i,r,o;function a(){VP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VP(),t($r(n,"network-request-failed"))},timeout:D8.get()})}if(!((r=(i=en().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=en().gapi)===null||o===void 0)&&o.load)a();else{let l=cR("iframefcb");return en()[l]=()=>{gapi.load?a():t($r(n,"network-request-failed"))},aR(`${D$()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw kg=null,e})}var kg=null;function M8(n){return kg=kg||A8(n),kg}var x8=new Ya(5e3,15e3),P8="__/auth/iframe",R8="emulator/auth/iframe",O8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N8(n){let e=n.config;be(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?kE(e,R8):`https://${n.config.authDomain}/${P8}`,i={apiKey:e.apiKey,appName:n.name,v:Os},r=k8.get(n.config.apiHost);r&&(i.eid=r);let o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Nl(i).slice(1)}`}function L8(n){return T(this,null,function*(){let e=yield M8(n),t=en().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:N8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O8,dontclear:!0},i=>new Promise((r,o)=>T(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=$r(n,"network-request-failed"),l=en().setTimeout(()=>{o(a)},x8.get());function u(){en().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{o(a)})})))})}var F8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V8=500,B8=600,U8="_blank",j8="http://localhost",qg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function z8(n,e,t,i=V8,r=B8){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),l="",u=Object.assign(Object.assign({},F8),{width:i.toString(),height:r.toString(),top:o,left:a}),f=wn().toLowerCase();t&&(l=eR(f)?U8:t),JP(f)&&(e=e||j8,u.scrollbars="yes");let m=Object.entries(u).reduce((E,[b,M])=>`${E}${b}=${M},`,"");if(b$(f)&&l!=="_self")return $8(e||"",l),new qg(null);let v=window.open(e||"",l,m);be(v,n,"popup-blocked");try{v.focus()}catch{}return new qg(v)}function $8(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var H8="__/auth/handler",q8="emulator/auth/handler",G8=encodeURIComponent("fac");function BP(n,e,t,i,r,o){return T(this,null,function*(){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Os,eventId:r};if(e instanceof jg){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",uP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[m,v]of Object.entries(o||{}))a[m]=v}if(e instanceof yE){let m=e.getScopes().filter(v=>v!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);let l=a;for(let m of Object.keys(l))l[m]===void 0&&delete l[m];let u=yield n._getAppCheckToken(),f=u?`#${G8}=${encodeURIComponent(u)}`:"";return`${W8(n)}?${Nl(l).slice(1)}${f}`})}function W8({config:n}){return n.emulator?kE(n,q8):`https://${n.authDomain}/${H8}`}var dE="webStorageSupport",PE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$E,this._completeRedirectFn=y8,this._overrideRedirectResult=g8}_openPopup(e,t,i,r){return T(this,null,function*(){var o;Fs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield BP(e,t,i,hE(),r);return z8(e,a,fR())})}_openRedirect(e,t,i,r){return T(this,null,function*(){yield this._originValidation(e);let o=yield BP(e,t,i,hE(),r);return q$(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(Fs(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return T(this,null,function*(){let t=yield L8(e),i=new xE(e);return t.register("authEvent",r=>(be(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dE,{type:dE},r=>{var o;let a=(o=r?.[0])===null||o===void 0?void 0:o[dE];a!==void 0&&t(!!a),Ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=T8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oR()||XP()||VE()}},yR=PE;var UP="@firebase/auth",jP="1.7.9";var RE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function K8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z8(n){Rs(new zi("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;be(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sR(n)},f=new vE(i,r,o,u);return A$(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Rs(new zi("auth-internal",e=>{let t=jl(e.getProvider("auth").getImmediate());return(i=>new RE(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cn(UP,jP,K8(n)),cn(UP,jP,"esm2017")}var Q8=5*60,Y8=$b("authIdTokenMaxAge")||Q8,zP=null,J8=n=>e=>T(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Y8)return;let r=t?.token;zP!==r&&(zP=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function GE(n=Ll()){let e=rh(n,"auth");if(e.isInitialized())return e.getImmediate();let t=BE(n,{popupRedirectResolver:yR,persistence:[gR,hR,$E]}),i=$b("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let a=J8(o.toString());zE(t,a,()=>a(t.currentUser)),Kg(t,l=>a(l))}}let r=jb("auth");return r&&UE(t,`http://${r}`),t}function X8(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}T$({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=$r("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",X8().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z8("Browser");function bR(n){return new ze(function(e){var t=ph(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var ER="auth",St=class{constructor(e){return e}},mh=class{constructor(){return oh(ER)}};var WE=new de("angularfire2.auth-instances");function $9(n,e){let t=Ag(ER,n,e);return t&&new St(t)}function H9(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new St(i)}}var q9={provide:mh,deps:[[new Mn,WE]]},G9={provide:St,useFactory:$9,deps:[[new Mn,WE],No]};function IR(n,...e){return cn("angularfire",Za.full,"auth"),rr([G9,q9,{provide:WE,useFactory:H9(n),multi:!0,deps:[ct,Cn,Bl,Qa,[new Mn,Vl],...e]}])}var Qg=Nt(bR,!0);var CR=Nt(GE,!0);var TR=Nt(ph,!0);var SR=Nt(qE,!0);var DR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},AR={};var Vs,KE;(function(){var n;function e(R,S){function A(){}A.prototype=S.prototype,R.D=S.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(O,F,V){for(var P=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)P[Dt-2]=arguments[Dt];return S.prototype[F].apply(O,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,S,A){A||(A=0);var O=Array(16);if(typeof S=="string")for(var F=0;16>F;++F)O[F]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(F=0;16>F;++F)O[F]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=R.g[0],A=R.g[1],F=R.g[2];var V=R.g[3],P=S+(V^A&(F^V))+O[0]+3614090360&4294967295;S=A+(P<<7&4294967295|P>>>25),P=V+(F^S&(A^F))+O[1]+3905402710&4294967295,V=S+(P<<12&4294967295|P>>>20),P=F+(A^V&(S^A))+O[2]+606105819&4294967295,F=V+(P<<17&4294967295|P>>>15),P=A+(S^F&(V^S))+O[3]+3250441966&4294967295,A=F+(P<<22&4294967295|P>>>10),P=S+(V^A&(F^V))+O[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=V+(F^S&(A^F))+O[5]+1200080426&4294967295,V=S+(P<<12&4294967295|P>>>20),P=F+(A^V&(S^A))+O[6]+2821735955&4294967295,F=V+(P<<17&4294967295|P>>>15),P=A+(S^F&(V^S))+O[7]+4249261313&4294967295,A=F+(P<<22&4294967295|P>>>10),P=S+(V^A&(F^V))+O[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=V+(F^S&(A^F))+O[9]+2336552879&4294967295,V=S+(P<<12&4294967295|P>>>20),P=F+(A^V&(S^A))+O[10]+4294925233&4294967295,F=V+(P<<17&4294967295|P>>>15),P=A+(S^F&(V^S))+O[11]+2304563134&4294967295,A=F+(P<<22&4294967295|P>>>10),P=S+(V^A&(F^V))+O[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=V+(F^S&(A^F))+O[13]+4254626195&4294967295,V=S+(P<<12&4294967295|P>>>20),P=F+(A^V&(S^A))+O[14]+2792965006&4294967295,F=V+(P<<17&4294967295|P>>>15),P=A+(S^F&(V^S))+O[15]+1236535329&4294967295,A=F+(P<<22&4294967295|P>>>10),P=S+(F^V&(A^F))+O[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=V+(A^F&(S^A))+O[6]+3225465664&4294967295,V=S+(P<<9&4294967295|P>>>23),P=F+(S^A&(V^S))+O[11]+643717713&4294967295,F=V+(P<<14&4294967295|P>>>18),P=A+(V^S&(F^V))+O[0]+3921069994&4294967295,A=F+(P<<20&4294967295|P>>>12),P=S+(F^V&(A^F))+O[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=V+(A^F&(S^A))+O[10]+38016083&4294967295,V=S+(P<<9&4294967295|P>>>23),P=F+(S^A&(V^S))+O[15]+3634488961&4294967295,F=V+(P<<14&4294967295|P>>>18),P=A+(V^S&(F^V))+O[4]+3889429448&4294967295,A=F+(P<<20&4294967295|P>>>12),P=S+(F^V&(A^F))+O[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=V+(A^F&(S^A))+O[14]+3275163606&4294967295,V=S+(P<<9&4294967295|P>>>23),P=F+(S^A&(V^S))+O[3]+4107603335&4294967295,F=V+(P<<14&4294967295|P>>>18),P=A+(V^S&(F^V))+O[8]+1163531501&4294967295,A=F+(P<<20&4294967295|P>>>12),P=S+(F^V&(A^F))+O[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=V+(A^F&(S^A))+O[2]+4243563512&4294967295,V=S+(P<<9&4294967295|P>>>23),P=F+(S^A&(V^S))+O[7]+1735328473&4294967295,F=V+(P<<14&4294967295|P>>>18),P=A+(V^S&(F^V))+O[12]+2368359562&4294967295,A=F+(P<<20&4294967295|P>>>12),P=S+(A^F^V)+O[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=V+(S^A^F)+O[8]+2272392833&4294967295,V=S+(P<<11&4294967295|P>>>21),P=F+(V^S^A)+O[11]+1839030562&4294967295,F=V+(P<<16&4294967295|P>>>16),P=A+(F^V^S)+O[14]+4259657740&4294967295,A=F+(P<<23&4294967295|P>>>9),P=S+(A^F^V)+O[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=V+(S^A^F)+O[4]+1272893353&4294967295,V=S+(P<<11&4294967295|P>>>21),P=F+(V^S^A)+O[7]+4139469664&4294967295,F=V+(P<<16&4294967295|P>>>16),P=A+(F^V^S)+O[10]+3200236656&4294967295,A=F+(P<<23&4294967295|P>>>9),P=S+(A^F^V)+O[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=V+(S^A^F)+O[0]+3936430074&4294967295,V=S+(P<<11&4294967295|P>>>21),P=F+(V^S^A)+O[3]+3572445317&4294967295,F=V+(P<<16&4294967295|P>>>16),P=A+(F^V^S)+O[6]+76029189&4294967295,A=F+(P<<23&4294967295|P>>>9),P=S+(A^F^V)+O[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=V+(S^A^F)+O[12]+3873151461&4294967295,V=S+(P<<11&4294967295|P>>>21),P=F+(V^S^A)+O[15]+530742520&4294967295,F=V+(P<<16&4294967295|P>>>16),P=A+(F^V^S)+O[2]+3299628645&4294967295,A=F+(P<<23&4294967295|P>>>9),P=S+(F^(A|~V))+O[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=V+(A^(S|~F))+O[7]+1126891415&4294967295,V=S+(P<<10&4294967295|P>>>22),P=F+(S^(V|~A))+O[14]+2878612391&4294967295,F=V+(P<<15&4294967295|P>>>17),P=A+(V^(F|~S))+O[5]+4237533241&4294967295,A=F+(P<<21&4294967295|P>>>11),P=S+(F^(A|~V))+O[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=V+(A^(S|~F))+O[3]+2399980690&4294967295,V=S+(P<<10&4294967295|P>>>22),P=F+(S^(V|~A))+O[10]+4293915773&4294967295,F=V+(P<<15&4294967295|P>>>17),P=A+(V^(F|~S))+O[1]+2240044497&4294967295,A=F+(P<<21&4294967295|P>>>11),P=S+(F^(A|~V))+O[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=V+(A^(S|~F))+O[15]+4264355552&4294967295,V=S+(P<<10&4294967295|P>>>22),P=F+(S^(V|~A))+O[6]+2734768916&4294967295,F=V+(P<<15&4294967295|P>>>17),P=A+(V^(F|~S))+O[13]+1309151649&4294967295,A=F+(P<<21&4294967295|P>>>11),P=S+(F^(A|~V))+O[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=V+(A^(S|~F))+O[11]+3174756917&4294967295,V=S+(P<<10&4294967295|P>>>22),P=F+(S^(V|~A))+O[2]+718787259&4294967295,F=V+(P<<15&4294967295|P>>>17),P=A+(V^(F|~S))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(F+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var A=S-this.blockSize,O=this.B,F=this.h,V=0;V<S;){if(F==0)for(;V<=A;)r(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<S;)if(O[F++]=R.charCodeAt(V++),F==this.blockSize){r(this,O),F=0;break}}else for(;V<S;)if(O[F++]=R[V++],F==this.blockSize){r(this,O),F=0;break}}this.h=F,this.o+=S},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var A=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=A&255,A/=256;for(this.u(R),R=Array(16),S=A=0;4>S;++S)for(var O=0;32>O;O+=8)R[A++]=this.g[S]>>>O&255;return R};function o(R,S){var A=l;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=S(R)}function a(R,S){this.h=S;for(var A=[],O=!0,F=R.length-1;0<=F;F--){var V=R[F]|0;O&&V==S||(A[F]=V,O=!1)}this.g=A}var l={};function u(R){return-128<=R&&128>R?o(R,function(S){return new a([S|0],0>S?-1:0)}):new a([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return v;if(0>R)return N(f(-R));for(var S=[],A=1,O=0;R>=A;O++)S[O]=R/A|0,A*=4294967296;return new a(S,0)}function m(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return N(m(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=f(Math.pow(S,8)),O=v,F=0;F<R.length;F+=8){var V=Math.min(8,R.length-F),P=parseInt(R.substring(F,F+V),S);8>V?(V=f(Math.pow(S,V)),O=O.j(V).add(f(P))):(O=O.j(A),O=O.add(f(P)))}return O}var v=u(0),E=u(1),b=u(16777216);n=a.prototype,n.m=function(){if(k(this))return-N(this).m();for(var R=0,S=1,A=0;A<this.g.length;A++){var O=this.i(A);R+=(0<=O?O:4294967296+O)*S,S*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M(this))return"0";if(k(this))return"-"+N(this).toString(R);for(var S=f(Math.pow(R,6)),A=this,O="";;){var F=ue(A,S).g;A=G(A,F.j(S));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=F,M(A))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function M(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function k(R){return R.h==-1}n.l=function(R){return R=G(this,R),k(R)?-1:M(R)?0:1};function N(R){for(var S=R.g.length,A=[],O=0;O<S;O++)A[O]=~R.g[O];return new a(A,~R.h).add(E)}n.abs=function(){return k(this)?N(this):this},n.add=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],O=0,F=0;F<=S;F++){var V=O+(this.i(F)&65535)+(R.i(F)&65535),P=(V>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);O=P>>>16,V&=65535,P&=65535,A[F]=P<<16|V}return new a(A,A[A.length-1]&-2147483648?-1:0)};function G(R,S){return R.add(N(S))}n.j=function(R){if(M(this)||M(R))return v;if(k(this))return k(R)?N(this).j(N(R)):N(N(this).j(R));if(k(R))return N(this.j(N(R)));if(0>this.l(b)&&0>R.l(b))return f(this.m()*R.m());for(var S=this.g.length+R.g.length,A=[],O=0;O<2*S;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(var F=0;F<R.g.length;F++){var V=this.i(O)>>>16,P=this.i(O)&65535,Dt=R.i(F)>>>16,Hn=R.i(F)&65535;A[2*O+2*F]+=P*Hn,te(A,2*O+2*F),A[2*O+2*F+1]+=V*Hn,te(A,2*O+2*F+1),A[2*O+2*F+1]+=P*Dt,te(A,2*O+2*F+1),A[2*O+2*F+2]+=V*Dt,te(A,2*O+2*F+2)}for(O=0;O<S;O++)A[O]=A[2*O+1]<<16|A[2*O];for(O=S;O<2*S;O++)A[O]=0;return new a(A,0)};function te(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function J(R,S){this.g=R,this.h=S}function ue(R,S){if(M(S))throw Error("division by zero");if(M(R))return new J(v,v);if(k(R))return S=ue(N(R),S),new J(N(S.g),N(S.h));if(k(S))return S=ue(R,N(S)),new J(N(S.g),S.h);if(30<R.g.length){if(k(R)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var A=E,O=S;0>=O.l(R);)A=Ne(A),O=Ne(O);var F=he(A,1),V=he(O,1);for(O=he(O,2),A=he(A,2);!M(O);){var P=V.add(O);0>=P.l(R)&&(F=F.add(A),V=P),O=he(O,1),A=he(A,1)}return S=G(R,F.j(S)),new J(F,S)}for(F=v;0<=R.l(S);){for(A=Math.max(1,Math.floor(R.m()/S.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=f(A),P=V.j(S);k(P)||0<P.l(R);)A-=O,V=f(A),P=V.j(S);M(V)&&(V=E),F=F.add(V),R=G(R,P)}return new J(F,R)}n.A=function(R){return ue(this,R).h},n.and=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],O=0;O<S;O++)A[O]=this.i(O)&R.i(O);return new a(A,this.h&R.h)},n.or=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],O=0;O<S;O++)A[O]=this.i(O)|R.i(O);return new a(A,this.h|R.h)},n.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],O=0;O<S;O++)A[O]=this.i(O)^R.i(O);return new a(A,this.h^R.h)};function Ne(R){for(var S=R.g.length+1,A=[],O=0;O<S;O++)A[O]=R.i(O)<<1|R.i(O-1)>>>31;return new a(A,R.h)}function he(R,S){var A=S>>5;S%=32;for(var O=R.g.length-A,F=[],V=0;V<O;V++)F[V]=0<S?R.i(V+A)>>>S|R.i(V+A+1)<<32-S:R.i(V+A);return new a(F,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,KE=AR.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Vs=AR.Integer=a}).apply(typeof DR<"u"?DR:typeof self<"u"?self:typeof window<"u"?window:{});var Yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Uo={};var ZE,W9,zl,QE,gh,Jg,YE,JE,XE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yg=="object"&&Yg];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function r(d,g){if(g)e:{var y=i;d=d.split(".");for(var I=0;I<d.length-1;I++){var B=d[I];if(!(B in y))break e;y=y[B]}d=d[d.length-1],I=y[d],g=g(I),g!=I&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,I=!1,B={next:function(){if(!I&&y<d.length){var $=y++;return{value:g($,d[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var a=a||{},l=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function m(d,g,y){return d.call.apply(d.bind,arguments)}function v(d,g,y){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),d.apply(g,B)}}return function(){return d.apply(g,arguments)}}function E(d,g,y){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,E.apply(null,arguments)}function b(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function M(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(I,B,$){for(var re=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)re[Ge-2]=arguments[Ge];return g.prototype[B].apply(I,re)}}function k(d){let g=d.length;if(0<g){let y=Array(g);for(let I=0;I<g;I++)y[I]=d[I];return y}return[]}function N(d,g){for(let y=1;y<arguments.length;y++){let I=arguments[y];if(u(I)){let B=d.length||0,$=I.length||0;d.length=B+$;for(let re=0;re<$;re++)d[B+re]=I[re]}else d.push(I)}}class G{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function te(d){return/^[\s\xa0]*$/.test(d)}function J(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function ue(d){return ue[" "](d),d}ue[" "]=function(){};var Ne=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function he(d,g,y){for(let I in d)g.call(y,d[I],I,d)}function R(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function S(d){let g={};for(let y in d)g[y]=d[y];return g}let A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(d,g){let y,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(y in I)d[y]=I[y];for(let $=0;$<A.length;$++)y=A[$],Object.prototype.hasOwnProperty.call(I,y)&&(d[y]=I[y])}}function F(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function V(d){l.setTimeout(()=>{throw d},0)}function P(){var d=ve;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Dt{constructor(){this.h=this.g=null}add(g,y){let I=Hn.get();I.set(g,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Hn=new G(()=>new W,d=>d.reset());class W{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,Z=!1,ve=new Dt,Ye=()=>{let d=l.Promise.resolve(void 0);pe=()=>{d.then(Et)}};var Et=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(y){V(y)}var g=Hn;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}Z=!1};function Le(){this.s=this.s,this.C=this.C}Le.prototype.s=!1,Le.prototype.ma=function(){this.s||(this.s=!0,this.N())},Le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};l.addEventListener("test",y,g),l.removeEventListener("test",y,g)}catch{}return d}();function ln(d,g){if(Ie.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(Ne){e:{try{ue(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ti[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ln.aa.h.call(this)}}M(ln,Ie);var Ti={2:"touch",3:"pen",4:"mouse"};ln.prototype.h=function(){ln.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),ei=0;function un(d,g,y,I,B){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!I,this.ha=B,this.key=++ei,this.da=this.fa=!1}function kn(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Si(d){this.src=d,this.g={},this.h=0}Si.prototype.add=function(d,g,y,I,B){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var re=vc(d,g,I,B);return-1<re?(g=d[re],y||(g.fa=!1)):(g=new un(g,this.src,$,!!I,B),g.fa=y,d.push(g)),g};function vu(d,g){var y=g.type;if(y in d.g){var I=d.g[y],B=Array.prototype.indexOf.call(I,g,void 0),$;($=0<=B)&&Array.prototype.splice.call(I,B,1),$&&(kn(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function vc(d,g,y,I){for(var B=0;B<d.length;++B){var $=d[B];if(!$.da&&$.listener==g&&$.capture==!!y&&$.ha==I)return B}return-1}var yc="closure_lm_"+(1e6*Math.random()|0),Zs={};function Qs(d,g,y,I,B){if(I&&I.once)return wc(d,g,y,I,B);if(Array.isArray(g)){for(var $=0;$<g.length;$++)Qs(d,g[$],y,I,B);return null}return y=Ic(y),d&&d[Ot]?d.K(g,y,f(I)?!!I.capture:!!I,B):nf(d,g,y,!1,I,B)}function nf(d,g,y,I,B,$){if(!g)throw Error("Invalid event type");var re=f(B)?!!B.capture:!!B,Ge=Ys(d);if(Ge||(d[yc]=Ge=new Si(d)),y=Ge.add(g,y,I,re,$),y.proxy)return y;if(I=rf(),y.proxy=I,I.src=d,I.listener=y,d.addEventListener)Ee||(B=re),B===void 0&&(B=!1),d.addEventListener(g.toString(),I,B);else if(d.attachEvent)d.attachEvent(of(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function rf(){function d(y){return g.call(d.src,d.listener,y)}let g=pv;return d}function wc(d,g,y,I,B){if(Array.isArray(g)){for(var $=0;$<g.length;$++)wc(d,g[$],y,I,B);return null}return y=Ic(y),d&&d[Ot]?d.L(g,y,f(I)?!!I.capture:!!I,B):nf(d,g,y,!0,I,B)}function yu(d,g,y,I,B){if(Array.isArray(g))for(var $=0;$<g.length;$++)yu(d,g[$],y,I,B);else I=f(I)?!!I.capture:!!I,y=Ic(y),d&&d[Ot]?(d=d.i,g=String(g).toString(),g in d.g&&($=d.g[g],y=vc($,y,I,B),-1<y&&(kn($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete d.g[g],d.h--)))):d&&(d=Ys(d))&&(g=d.g[g.toString()],d=-1,g&&(d=vc(g,y,I,B)),(y=-1<d?g[d]:null)&&bc(y))}function bc(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Ot])vu(g.i,d);else{var y=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(y,I,d.capture):g.detachEvent?g.detachEvent(of(y),I):g.addListener&&g.removeListener&&g.removeListener(I),(y=Ys(g))?(vu(y,d),y.h==0&&(y.src=null,g[yc]=null)):kn(d)}}}function of(d){return d in Zs?Zs[d]:Zs[d]="on"+d}function pv(d,g){if(d.da)d=!0;else{g=new ln(g,this);var y=d.listener,I=d.ha||d.src;d.fa&&bc(d),d=y.call(I,g)}return d}function Ys(d){return d=d[yc],d instanceof Si?d:null}var Ec="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ic(d){return typeof d=="function"?d:(d[Ec]||(d[Ec]=function(g){return d.handleEvent(g)}),d[Ec])}function dn(){Le.call(this),this.i=new Si(this),this.M=this,this.F=null}M(dn,Le),dn.prototype[Ot]=!0,dn.prototype.removeEventListener=function(d,g,y,I){yu(this,d,g,y,I)};function hn(d,g){var y,I=d.F;if(I)for(y=[];I;I=I.F)y.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new Ie(g,d);else if(g instanceof Ie)g.target=g.target||d;else{var B=g;g=new Ie(I,d),O(g,B)}if(B=!0,y)for(var $=y.length-1;0<=$;$--){var re=g.g=y[$];B=Js(re,I,!0,g)&&B}if(re=g.g=d,B=Js(re,I,!0,g)&&B,B=Js(re,I,!1,g)&&B,y)for($=0;$<y.length;$++)re=g.g=y[$],B=Js(re,I,!1,g)&&B}dn.prototype.N=function(){if(dn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],I=0;I<y.length;I++)kn(y[I]);delete d.g[g],d.h--}}this.F=null},dn.prototype.K=function(d,g,y,I){return this.i.add(String(d),g,!1,y,I)},dn.prototype.L=function(d,g,y,I){return this.i.add(String(d),g,!0,y,I)};function Js(d,g,y,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,$=0;$<g.length;++$){var re=g[$];if(re&&!re.da&&re.capture==y){var Ge=re.listener,Ft=re.ha||re.src;re.fa&&vu(d.i,re),B=Ge.call(Ft,I)!==!1&&B}}return B&&!I.defaultPrevented}function sf(d,g,y){if(typeof d=="function")y&&(d=E(d,y));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(d,g||0)}function wu(d){d.g=sf(()=>{d.g=null,d.i&&(d.i=!1,wu(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class bu extends Le{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:wu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Go(d){Le.call(this),this.h=d,this.g={}}M(Go,Le);var af=[];function Wo(d){he(d.g,function(g,y){this.g.hasOwnProperty(y)&&bc(g)},d),d.g={}}Go.prototype.N=function(){Go.aa.N.call(this),Wo(this)},Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eu=l.JSON.stringify,mv=l.JSON.parse,cf=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Cc(){}Cc.prototype.h=null;function Iu(d){return d.h||(d.h=d.i())}function lf(){}var Xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cu(){Ie.call(this,"d")}M(Cu,Ie);function Tu(){Ie.call(this,"c")}M(Tu,Ie);var Xr={},uf=null;function Ko(){return uf=uf||new dn}Xr.La="serverreachability";function df(d){Ie.call(this,Xr.La,d)}M(df,Ie);function ea(d){let g=Ko();hn(g,new df(g))}Xr.STAT_EVENT="statevent";function hf(d,g){Ie.call(this,Xr.STAT_EVENT,d),this.stat=g}M(hf,Ie);function En(d){let g=Ko();hn(g,new hf(g,d))}Xr.Ma="timingevent";function ti(d,g){Ie.call(this,Xr.Ma,d),this.size=g}M(ti,Ie);function me(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},g)}function Zo(){this.g=!0}Zo.prototype.xa=function(){this.g=!1};function ff(d,g,y,I,B,$){d.info(function(){if(d.g)if($)for(var re="",Ge=$.split("&"),Ft=0;Ft<Ge.length;Ft++){var rt=Ge[Ft].split("=");if(1<rt.length){var Mt=rt[0];rt=rt[1];var fn=Mt.split("_");re=2<=fn.length&&fn[1]=="type"?re+(Mt+"="+rt+"&"):re+(Mt+"=redacted&")}}else re=null;else re=$;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+g+`
`+y+`
`+re})}function pf(d,g,y,I,B,$,re){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+g+`
`+y+`
`+$+" "+re})}function eo(d,g,y,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+mf(d,y)+(I?" "+I:"")})}function Su(d,g){d.info(function(){return"TIMEOUT: "+g})}Zo.prototype.info=function(){};function mf(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var I=y[d];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var re=1;re<B.length;re++)B[re]=""}}}}return Eu(y)}catch{return g}}var Ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Du={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Au;function Tc(){}M(Tc,Cc),Tc.prototype.g=function(){return new XMLHttpRequest},Tc.prototype.i=function(){return{}},Au=new Tc;function mr(d,g,y,I){this.j=d,this.i=g,this.l=y,this.R=I||1,this.U=new Go(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gf}function gf(){this.i=null,this.g="",this.h=!1}var Mu={},xu={};function Qo(d,g,y){d.L=1,d.v=Jo(In(g)),d.m=y,d.P=!0,_f(d,null)}function _f(d,g){d.F=Date.now(),Sc(d),d.A=In(d.v);var y=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),wt(y.i,"t",I),d.C=0,y=d.j.J,d.h=new gf,d.g=ha(d.j,y?g:null,!d.m),0<d.O&&(d.M=new bu(E(d.Y,d,d.g),d.O)),g=d.U,y=d.g,I=d.ca;var B="readystatechange";Array.isArray(B)||(B&&(af[0]=B.toString()),B=af);for(var $=0;$<B.length;$++){var re=Qs(y,B[$],I||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),ea(),ff(d.i,d.u,d.A,d.l,d.R,d.m)}mr.prototype.ca=function(d){d=d.target;let g=this.M;g&&ii(d)==3?g.j():this.Y(d)},mr.prototype.Y=function(d){try{if(d==this.g)e:{let fn=ii(this.g);var g=this.g.Ba();let oi=this.g.Z();if(!(3>fn)&&(fn!=3||this.g&&(this.h.h||this.g.oa()||Cf(this.g)))){this.J||fn!=4||g==7||(g==8||0>=oi?ea(3):ea(2)),ta(this);var y=this.g.Z();this.X=y;t:if(vf(this)){var I=Cf(this.g);d="";var B=I.length,$=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gr(this),Zi(this);var re="";break t}this.h.i=new l.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,d+=this.h.i.decode(I[g],{stream:!($&&g==B-1)});I.length=0,this.h.g+=d,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=y==200,pf(this.i,this.u,this.A,this.l,this.R,fn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Ft=this.g;if((Ge=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Ge)){var rt=Ge;break t}}rt=null}if(y=rt)eo(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dc(this,y);else{this.o=!1,this.s=3,En(12),gr(this),Zi(this);break e}}if(this.P){y=!0;let si;for(;!this.J&&this.C<re.length;)if(si=gv(this,re),si==xu){fn==4&&(this.s=4,En(14),y=!1),eo(this.i,this.l,null,"[Incomplete Response]");break}else if(si==Mu){this.s=4,En(15),eo(this.i,this.l,re,"[Invalid Chunk]"),y=!1;break}else eo(this.i,this.l,si,null),Dc(this,si);if(vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fn!=4||re.length!=0||this.h.h||(this.s=1,En(16),y=!1),this.o=this.o&&y,!y)eo(this.i,this.l,re,"[Invalid Chunked Response]"),gr(this),Zi(this);else if(0<re.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Oc(Mt),Mt.M=!0,En(11))}}else eo(this.i,this.l,re,null),Dc(this,re);fn==4&&gr(this),this.o&&!this.J&&(fn==4?Af(this.j,this):(this.o=!1,Sc(this)))}else Tf(this.g),y==400&&0<re.indexOf("Unknown SID")?(this.s=3,En(12)):(this.s=0,En(13)),gr(this),Zi(this)}}}catch{}finally{}};function vf(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function gv(d,g){var y=d.C,I=g.indexOf(`
`,y);return I==-1?xu:(y=Number(g.substring(y,I)),isNaN(y)?Mu:(I+=1,I+y>g.length?xu:(g=g.slice(I,I+y),d.C=I+y,g)))}mr.prototype.cancel=function(){this.J=!0,gr(this)};function Sc(d){d.S=Date.now()+d.I,yf(d,d.I)}function yf(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=me(E(d.ba,d),g)}function ta(d){d.B&&(l.clearTimeout(d.B),d.B=null)}mr.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Su(this.i,this.A),this.L!=2&&(ea(),En(17)),gr(this),this.s=2,Zi(this)):yf(this,this.S-d)};function Zi(d){d.j.G==0||d.J||Af(d.j,d)}function gr(d){ta(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Wo(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Dc(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||_r(y.h,d))){if(!d.K&&_r(y.h,d)&&y.G==3){try{var I=y.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)kc(y),xc(y);else break e;zu(y),En(18)}}else y.za=B[1],0<y.za-y.T&&37500>B[2]&&y.F&&y.v==0&&!y.C&&(y.C=me(E(y.Za,y),6e3));if(1>=ia(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ro(y,11)}else if((d.K||y.g==d)&&kc(y),!te(g))for(B=y.Da.g.parse(g),g=0;g<B.length;g++){let rt=B[g];if(y.T=rt[0],rt=rt[1],y.G==2)if(rt[0]=="c"){y.K=rt[1],y.ia=rt[2];let Mt=rt[3];Mt!=null&&(y.la=Mt,y.j.info("VER="+y.la));let fn=rt[4];fn!=null&&(y.Aa=fn,y.j.info("SVER="+y.Aa));let oi=rt[5];oi!=null&&typeof oi=="number"&&0<oi&&(I=1.5*oi,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;let si=d.g;if(si){let br=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(br){var $=I.h;$.g||br.indexOf("spdy")==-1&&br.indexOf("quic")==-1&&br.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(vr($,$.h),$.h=null))}if(I.D){let Fc=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;Fc&&(I.ya=Fc,ft(I.I,I.D,Fc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var re=d;if(I.qa=qu(I,I.J?I.ia:null,I.W),re.K){Ac(I.h,re);var Ge=re,Ft=I.L;Ft&&(Ge.I=Ft),Ge.B&&(ta(Ge),Sc(Ge)),I.g=re}else Rc(I);0<y.i.length&&Pc(y)}else rt[0]!="stop"&&rt[0]!="close"||ro(y,7);else y.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?ro(y,7):da(y):rt[0]!="noop"&&y.l&&y.l.ta(rt),y.v=0)}}ea(4)}catch{}}var na=class{constructor(d,g){this.g=d,this.map=g}};function nt(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function At(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ia(d){return d.h?1:d.g?d.g.size:0}function _r(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function vr(d,g){d.g?d.g.add(g):d.h=g}function Ac(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}nt.prototype.cancel=function(){if(this.i=Fe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Fe(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return k(d.i)}function Ut(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,I=0;I<y;I++)g.push(d[I]);return g}g=[],y=0;for(I in d)g[y++]=d[I];return g}function Pu(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let I in d)g[y++]=I;return g}}}function ra(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=Pu(d),I=Ut(d),B=I.length,$=0;$<B;$++)g.call(void 0,I[$],y&&y[$],d)}var Nn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _v(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var I=d[y].indexOf("="),B=null;if(0<=I){var $=d[y].substring(0,I);B=d[y].substring(I+1)}else $=d[y];g($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Di(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Di){this.h=d.h,kt(this,d.j),this.o=d.o,this.g=d.g,Ai(this,d.s),this.l=d.l;var g=d.i,y=new no;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Yo(this,y),this.m=d.m}else d&&(g=String(d).match(Nn))?(this.h=!1,kt(this,g[1]||"",!0),this.o=Qi(g[2]||""),this.g=Qi(g[3]||"",!0),Ai(this,g[4]),this.l=Qi(g[5]||"",!0),Yo(this,g[6]||"",!0),this.m=Qi(g[7]||"")):(this.h=!1,this.i=new no(null,this.h))}Di.prototype.toString=function(){var d=[],g=this.j;g&&d.push(to(g,oa,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(to(g,oa,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(to(y,y.charAt(0)=="/"?ku:Ou,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",to(y,wf)),d.join("")};function In(d){return new Di(d)}function kt(d,g,y){d.j=y?Qi(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Ai(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Yo(d,g,y){g instanceof no?(d.i=g,Nu(d.i,d.h)):(y||(g=to(g,Mc)),d.i=new no(g,d.h))}function ft(d,g,y){d.i.set(g,y)}function Jo(d){return ft(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Qi(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function to(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,Ru),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Ru(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var oa=/[#\/\?@]/g,Ou=/[#\?:]/g,ku=/[#\?]/g,Mc=/[#\?@]/g,wf=/#/g;function no(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function yr(d){d.g||(d.g=new Map,d.h=0,d.i&&_v(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=no.prototype,n.add=function(d,g){yr(this),this.i=null,d=io(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function Re(d,g){yr(d),g=io(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function ni(d,g){return yr(d),g=io(d,g),d.g.has(g)}n.forEach=function(d,g){yr(this),this.g.forEach(function(y,I){y.forEach(function(B){d.call(g,B,I,this)},this)},this)},n.na=function(){yr(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let I=0;I<g.length;I++){let B=d[I];for(let $=0;$<B.length;$++)y.push(g[I])}return y},n.V=function(d){yr(this);let g=[];if(typeof d=="string")ni(this,d)&&(g=g.concat(this.g.get(io(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},n.set=function(d,g){return yr(this),this.i=null,d=io(this,d),ni(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function wt(d,g,y){Re(d,g),0<y.length&&(d.i=null,d.g.set(io(d,g),k(y)),d.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var I=g[y];let $=encodeURIComponent(String(I)),re=this.V(I);for(I=0;I<re.length;I++){var B=$;re[I]!==""&&(B+="="+encodeURIComponent(String(re[I]))),d.push(B)}}return this.i=d.join("&")};function io(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Nu(d,g){g&&!d.j&&(yr(d),d.i=null,d.g.forEach(function(y,I){var B=I.toLowerCase();I!=B&&(Re(this,I),wt(this,B,y))},d)),d.j=g}function Lu(d,g){let y=new Zo;if(l.Image){let I=new Image;I.onload=b(Dn,y,"TestLoadImage: loaded",!0,g,I),I.onerror=b(Dn,y,"TestLoadImage: error",!1,g,I),I.onabort=b(Dn,y,"TestLoadImage: abort",!1,g,I),I.ontimeout=b(Dn,y,"TestLoadImage: timeout",!1,g,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function Fu(d,g){let y=new Zo,I=new AbortController,B=setTimeout(()=>{I.abort(),Dn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then($=>{clearTimeout(B),$.ok?Dn(y,"TestPingServer: ok",!0,g):Dn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Dn(y,"TestPingServer: error",!1,g)})}function Dn(d,g,y,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(y)}catch{}}function Vu(){this.g=new cf}function sa(d,g,y){let I=y||"";try{ra(d,function(B,$){let re=B;f(B)&&(re=Eu(B)),g.push(I+$+"="+encodeURIComponent(re))})}catch(B){throw g.push(I+"type="+encodeURIComponent("_badmap")),B}}function jt(d){this.l=d.Ub||null,this.j=d.eb||!1}M(jt,Cc),jt.prototype.g=function(){return new Mi(this.l,this.j)},jt.prototype.i=function(d){return function(){return d}}({});function Mi(d,g){dn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Mi,dn),n=Mi.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,aa(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xo(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Xo(this):aa(this),this.readyState==3&&Bu(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Xo(this))},n.Qa=function(d){this.g&&(this.response=d,Xo(this))},n.ga=function(){this.g&&Xo(this)};function Xo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,aa(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function aa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Uu(d){let g="";return he(d,function(y,I){g+=I,g+=":",g+=y,g+=`\r
`}),g}function ca(d,g,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Uu(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):ft(d,g,y))}function Lt(d){dn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Lt,dn);var bf=/^https?$/i,Je=["POST","PUT"];n=Lt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Au.g(),this.v=this.o?Iu(this.o):Iu(Au),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch($){Ef(this,$);return}if(d=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)y.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let $ of I.keys())y.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),B=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Je,g,void 0))||I||B||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[$,re]of y)this.g.setRequestHeader($,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{If(this),this.u=!0,this.g.send(d),this.u=!1}catch($){Ef(this,$)}};function Ef(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,qn(d),la(d)}function qn(d){d.A||(d.A=!0,hn(d,"complete"),hn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,hn(this,"complete"),hn(this,"abort"),la(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),Lt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?es(this):this.bb())},n.bb=function(){es(this)};function es(d){if(d.h&&typeof a<"u"&&(!d.v[1]||ii(d)!=4||d.Z()!=2)){if(d.u&&ii(d)==4)sf(d.Ea,0,d);else if(hn(d,"readystatechange"),ii(d)==4){d.h=!1;try{let re=d.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var I;if(I=re===0){var B=String(d.D).match(Nn)[1]||null;!B&&l.self&&l.self.location&&(B=l.self.location.protocol.slice(0,-1)),I=!bf.test(B?B.toLowerCase():"")}y=I}if(y)hn(d,"complete"),hn(d,"success");else{d.m=6;try{var $=2<ii(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",qn(d)}}finally{la(d)}}}}function la(d,g){if(d.g){If(d);let y=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||hn(d,"ready");try{y.onreadystatechange=I}catch{}}}function If(d){d.I&&(l.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function ii(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),mv(g)}};function Cf(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Tf(d){let g={};d=(d.g&&2<=ii(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(te(d[I]))continue;var y=F(d[I]);let B=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let $=g[B]||[];g[B]=$,$.push(y)}R(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function Sf(d){this.Aa=0,this.i=[],this.j=new Zo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,d),this.cb=ua("retryDelaySeedMs",1e4,d),this.Wa=ua("forwardChannelMaxRetries",2,d),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new nt(d&&d.concurrentRequestLimit),this.Da=new Vu,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sf.prototype,n.la=8,n.G=1,n.connect=function(d,g,y,I){En(0),this.W=d,this.H=g||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=qu(this,null,this.W),Pc(this)};function da(d){if(ri(d),d.G==3){var g=d.U++,y=In(d.I);if(ft(y,"SID",d.K),ft(y,"RID",g),ft(y,"TYPE","terminate"),ts(d,y),g=new mr(d,d.j,g),g.L=2,g.v=Jo(In(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=g.v,y=!0),y||(g.g=ha(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Sc(g)}Hu(d)}function xc(d){d.g&&(Oc(d),d.g.cancel(),d.g=null)}function ri(d){xc(d),d.u&&(l.clearTimeout(d.u),d.u=null),kc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Pc(d){if(!At(d.h)&&!d.s){d.s=!0;var g=d.Ga;pe||Ye(),Z||(pe(),Z=!0),ve.add(g,d),d.B=0}}function Df(d,g){return ia(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=me(E(d.Ga,d,g),Nc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let B=new mr(this,this.j,d),$=this.o;if(this.S&&($?($=S($),O($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=ju(this,B,g),y=In(this.I),ft(y,"RID",d),ft(y,"CVER",22),this.D&&ft(y,"X-HTTP-Session-Id",this.D),ts(this,y),$&&(this.O?g="headers="+encodeURIComponent(String(Uu($)))+"&"+g:this.m&&ca(y,this.m,$)),vr(this.h,B),this.Ua&&ft(y,"TYPE","init"),this.P?(ft(y,"$req",g),ft(y,"SID","null"),B.T=!0,Qo(B,y,null)):Qo(B,y,g),this.G=2}}else this.G==3&&(d?Yi(this,d):this.i.length==0||At(this.h)||Yi(this))};function Yi(d,g){var y;g?y=g.l:y=d.U++;let I=In(d.I);ft(I,"SID",d.K),ft(I,"RID",y),ft(I,"AID",d.T),ts(d,I),d.m&&d.o&&ca(I,d.m,d.o),y=new mr(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=ju(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),vr(d.h,y),Qo(y,I,g)}function ts(d,g){d.H&&he(d.H,function(y,I){ft(g,I,y)}),d.l&&ra({},function(y,I){ft(g,I,y)})}function ju(d,g,y){y=Math.min(d.i.length,y);var I=d.l?E(d.l.Na,d.l,d):null;e:{var B=d.i;let $=-1;for(;;){let re=["count="+y];$==-1?0<y?($=B[0].g,re.push("ofs="+$)):$=0:re.push("ofs="+$);let Ge=!0;for(let Ft=0;Ft<y;Ft++){let rt=B[Ft].g,Mt=B[Ft].map;if(rt-=$,0>rt)$=Math.max(0,B[Ft].g-100),Ge=!1;else try{sa(Mt,re,"req"+rt+"_")}catch{I&&I(Mt)}}if(Ge){I=re.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,I}function Rc(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;pe||Ye(),Z||(pe(),Z=!0),ve.add(g,d),d.v=0}}function zu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=me(E(d.Fa,d),Nc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,$u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=me(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,En(10),xc(this),$u(this))};function Oc(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function $u(d){d.g=new mr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=In(d.qa);ft(g,"RID","rpc"),ft(g,"SID",d.K),ft(g,"AID",d.T),ft(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&ft(g,"TO",d.ja),ft(g,"TYPE","xmlhttp"),ts(d,g),d.m&&d.o&&ca(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=Jo(In(g)),y.m=null,y.P=!0,_f(y,d)}n.Za=function(){this.C!=null&&(this.C=null,xc(this),zu(this),En(19))};function kc(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Af(d,g){var y=null;if(d.g==g){kc(d),Oc(d),d.g=null;var I=2}else if(_r(d.h,g))y=g.D,Ac(d.h,g),I=1;else return;if(d.G!=0){if(g.o)if(I==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var B=d.B;I=Ko(),hn(I,new ti(I,y)),Pc(d)}else Rc(d);else if(B=g.s,B==3||B==0&&0<g.X||!(I==1&&Df(d,g)||I==2&&zu(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),B){case 1:ro(d,5);break;case 4:ro(d,10);break;case 3:ro(d,6);break;default:ro(d,2)}}}function Nc(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function ro(d,g){if(d.j.info("Error code "+g),g==2){var y=E(d.fb,d),I=d.Xa;let B=!I;I=new Di(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||kt(I,"https"),Jo(I),B?Lu(I.toString(),y):Fu(I.toString(),y)}else En(2);d.G=0,d.l&&d.l.sa(g),Hu(d),ri(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function Hu(d){if(d.G=0,d.ka=[],d.l){let g=Fe(d.h);(g.length!=0||d.i.length!=0)&&(N(d.ka,g),N(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function qu(d,g,y){var I=y instanceof Di?In(y):new Di(y);if(I.g!="")g&&(I.g=g+"."+I.g),Ai(I,I.s);else{var B=l.location;I=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var $=new Di(null);I&&kt($,I),g&&($.g=g),B&&Ai($,B),y&&($.l=y),I=$}return y=d.D,g=d.ya,y&&g&&ft(I,y,g),ft(I,"VER",d.la),ts(d,I),I}function ha(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Lt(new jt({eb:y})):new Lt(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wr(){}n=wr.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Lc(){}Lc.prototype.g=function(d,g){return new on(d,g)};function on(d,g){dn.call(this),this.g=new Sf(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!te(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!te(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new oo(this)}M(on,dn),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){da(this.g)},on.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=Eu(d),d=y);g.i.push(new na(g.Ya++,d)),g.G==3&&Pc(g)},on.prototype.N=function(){this.g.l=null,delete this.j,da(this.g),delete this.g,on.aa.N.call(this)};function Ln(d){Cu.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}M(Ln,Cu);function Gu(){Tu.call(this),this.status=1}M(Gu,Tu);function oo(d){this.g=d}M(oo,wr),oo.prototype.ua=function(){hn(this.g,"a")},oo.prototype.ta=function(d){hn(this.g,new Ln(d))},oo.prototype.sa=function(d){hn(this.g,new Gu)},oo.prototype.ra=function(){hn(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,XE=Uo.createWebChannelTransport=function(){return new Lc},JE=Uo.getStatEventTarget=function(){return Ko()},YE=Uo.Event=Xr,Jg=Uo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,gh=Uo.ErrorCode=Ki,Du.COMPLETE="complete",QE=Uo.EventType=Du,lf.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",dn.prototype.listen=dn.prototype.K,zl=Uo.WebChannel=lf,W9=Uo.FetchXmlHttpFactory=jt,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,ZE=Uo.XhrIo=Lt}).apply(typeof Yg<"u"?Yg:typeof self<"u"?self:typeof window<"u"?window:{});var MR="@firebase/firestore";var bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");var au="10.14.0";var ic=new xs("@firebase/firestore");function _h(){return ic.logLevel}function _e(n,...e){if(ic.logLevel<=et.DEBUG){let t=e.map(VC);ic.debug(`Firestore (${au}): ${n}`,...t)}}function zo(n,...e){if(ic.logLevel<=et.ERROR){let t=e.map(VC);ic.error(`Firestore (${au}): ${n}`,...t)}}function Ql(n,...e){if(ic.logLevel<=et.WARN){let t=e.map(VC);ic.warn(`Firestore (${au}): ${n}`,...t)}}function VC(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Ae(n="Unexpected state"){let e=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: `+n;throw zo(e),new Error(e)}function bt(n,e){n||Ae()}function ke(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ae=class extends wi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var hr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var i_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},rI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bn.UNAUTHENTICATED))}shutdown(){}},oI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},sI=class{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0);let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),o=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hr,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>T(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},l=u=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?l(u):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hr)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt(typeof i.accessToken=="string"),new i_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string"),new bn(e)}},aI=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},cI=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new aI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},lI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},uI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){bt(this.o===void 0);let i=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt(typeof t.token=="string"),this.R=t.token,new lI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function K9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var r_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=K9(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%e.length))}return i}};function ht(n,e){return n<e?-1:n>e?1:0}function Yl(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var Ht=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ae(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var je=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ht(0,0))}static max(){return new n(new Ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var o_=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(),i===void 0?i=e.length-t:i>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=e.get(r),a=t.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Bt=class n extends o_{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new ae(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},Z9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ei=class n extends o_{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return Z9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new ae(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},a=!1;for(;r<e.length;){let l=e[r];if(l==="\\"){if(r+1===e.length)throw new ae(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ae(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(o(),r++)}if(o(),a)throw new ae(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ce=class n{constructor(e){this.path=e}static fromPath(e){return new n(Bt.fromString(e))}static fromName(e){return new n(Bt.fromString(e).popFirst(5))}static empty(){return new n(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Bt(e.slice()))}};var dI=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};dI.UNKNOWN_ID=-1;function Q9(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=je.fromTimestamp(i===1e9?new Ht(t+1,0):new Ht(t,i));return new rc(r,Ce.empty(),e)}function Y9(n){return new rc(n.readTime,n.key,-1)}var rc=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(je.min(),Ce.empty(),-1)}static max(){return new n(je.max(),Ce.empty(),-1)}};function J9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:ht(n.largestBatchId,e.largestBatchId))}var X9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Bh(n){return T(this,null,function*(){if(n.code!==q.FAILED_PRECONDITION||n.message!==X9)throw n;_e("LocalStore","Unexpectedly lost primary lease")})}var ie=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++o,a&&o===r&&t()},u=>i(u))}),a=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,a=new Array(o),l=0;for(let u=0;u<o;u++){let f=u;t(e[f]).next(m=>{a[f]=m,++l,l===o&&i(a)},m=>r(m))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};function e7(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Uh(n){return n.name==="IndexedDbTransactionError"}var lO=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function F_(n){return n==null}function Eh(n){return n===0&&1/n==-1/0}function t7(n){return typeof n=="number"&&Number.isInteger(n)&&!Eh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var n7=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Une=[...n7,"documentOverlays"],i7=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],r7=i7,o7=[...r7,"indexConfiguration","indexState","indexEntries"];var jne=[...o7,"globals"];function xR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var qt=class n{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gl(this.root,e,this.comparator,!0)}},Gl=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gr=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();let e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}};Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1;Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,i,r,o){return this}insert(e,t,i){return new Gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Rn=class n{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new s_(this.data.getIterator())}getIteratorFrom(e){return new s_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},s_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $i=class n{constructor(e){this.fields=e,e.sort(Ei.comparator)}static empty(){return new n([])}unionWith(e){let t=new Rn(Ei.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var a_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var On=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new a_("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};On.EMPTY_BYTE_STRING=new On("");var s7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $o(n){if(bt(!!n),typeof n=="string"){let e=0,t=s7.exec(n);if(bt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Us(n){return typeof n=="string"?On.fromBase64String(n):On.fromUint8Array(n)}function V_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function BC(n){let e=n.mapValue.fields.__previous_value__;return V_(e)?BC(e):e}function Ih(n){let e=$o(n.mapValue.fields.__local_write_time__.timestampValue);return new Ht(e.seconds,e.nanos)}var fI=class{constructor(e,t,i,r,o,a,l,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f}},c_=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Xg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function oc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?V_(n)?4:hO(n)?9007199254740991:dO(n)?10:11:Ae()}function Zr(n,e){if(n===e)return!0;let t=oc(n);if(t!==oc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ih(n).isEqual(Ih(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=$o(r.timestampValue),l=$o(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,o){return Us(r.bytesValue).isEqual(Us(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Vt(r.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(r.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Vt(r.integerValue)===Vt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=Vt(r.doubleValue),l=Vt(o.doubleValue);return a===l?Eh(a)===Eh(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Yl(n.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(r,o){let a=r.mapValue.fields||{},l=o.mapValue.fields||{};if(xR(a)!==xR(l))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Zr(a[u],l[u])))return!1;return!0}(n,e);default:return Ae()}}function Ch(n,e){return(n.values||[]).find(t=>Zr(t,e))!==void 0}function Jl(n,e){if(n===e)return 0;let t=oc(n),i=oc(e);if(t!==i)return ht(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ht(n.booleanValue,e.booleanValue);case 2:return function(o,a){let l=Vt(o.integerValue||o.doubleValue),u=Vt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return PR(n.timestampValue,e.timestampValue);case 4:return PR(Ih(n),Ih(e));case 5:return ht(n.stringValue,e.stringValue);case 6:return function(o,a){let l=Us(o),u=Us(a);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let l=o.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){let m=ht(l[f],u[f]);if(m!==0)return m}return ht(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let l=ht(Vt(o.latitude),Vt(a.latitude));return l!==0?l:ht(Vt(o.longitude),Vt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return RR(n.arrayValue,e.arrayValue);case 10:return function(o,a){var l,u,f,m;let v=o.fields||{},E=a.fields||{},b=(l=v.value)===null||l===void 0?void 0:l.arrayValue,M=(u=E.value)===null||u===void 0?void 0:u.arrayValue,k=ht(((f=b?.values)===null||f===void 0?void 0:f.length)||0,((m=M?.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:RR(b,M)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===Xg.mapValue&&a===Xg.mapValue)return 0;if(o===Xg.mapValue)return 1;if(a===Xg.mapValue)return-1;let l=o.fields||{},u=Object.keys(l),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let v=0;v<u.length&&v<m.length;++v){let E=ht(u[v],m[v]);if(E!==0)return E;let b=Jl(l[u[v]],f[m[v]]);if(b!==0)return b}return ht(u.length,m.length)}(n.mapValue,e.mapValue);default:throw Ae()}}function PR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ht(n,e);let t=$o(n),i=$o(e),r=ht(t.seconds,i.seconds);return r!==0?r:ht(t.nanos,i.nanos)}function RR(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let o=Jl(t[r],i[r]);if(o)return o}return ht(t.length,i.length)}function Xl(n){return pI(n)}function pI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=$o(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Us(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=pI(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${pI(t.fields[a])}`;return r+"}"}(n.mapValue):Ae()}function l_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mI(n){return!!n&&"integerValue"in n}function UC(n){return!!n&&"arrayValue"in n}function OR(n){return!!n&&"nullValue"in n}function kR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function t_(n){return!!n&&"mapValue"in n}function dO(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function yh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return lc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=yh(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var bi=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!t_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yh(t)}setAll(e){let t=Ei.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){let u=this.getFieldsMap(t);this.applyChanges(u,i,r),i={},r=[],t=l.popLast()}a?i[l.lastSegment()]=yh(a):r.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());t_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];t_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){lc(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(yh(this.value))}};function fO(n){let e=[];return lc(n.fields,(t,i)=>{let r=new Ei([t]);if(t_(i)){let o=fO(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new $i(e)}var fr=class n{constructor(e,t,i,r,o,a,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new n(e,0,je.min(),je.min(),je.min(),bi.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,je.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,je.min(),je.min(),bi.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,je.min(),je.min(),bi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var js=class{constructor(e,t){this.position=e,this.inclusive=t}};function NR(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],a=n.position[r];if(o.field.isKeyField()?i=Ce.comparator(Ce.fromName(a.referenceValue),t.key):i=Jl(a,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function LR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zr(n.position[t],e.position[t]))return!1;return!0}var sc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function a7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var u_=class{},rn=class n extends u_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new _I(e,t,i):t==="array-contains"?new wI(e,i):t==="in"?new bI(e,i):t==="not-in"?new EI(e,i):t==="array-contains-any"?new II(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new vI(e,i):new yI(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Jl(t,this.value)):t!==null&&oc(this.value)===oc(t)&&this.matchesComparison(Jl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},pr=class n extends u_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return pO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function pO(n){return n.op==="and"}function mO(n){return c7(n)&&pO(n)}function c7(n){for(let e of n.filters)if(e instanceof pr)return!1;return!0}function gI(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+Xl(n.value);if(mO(n))return n.filters.map(e=>gI(e)).join(",");{let e=n.filters.map(t=>gI(t)).join(",");return`${n.op}(${e})`}}function gO(n,e){return n instanceof rn?function(i,r){return r instanceof rn&&i.op===r.op&&i.field.isEqual(r.field)&&Zr(i.value,r.value)}(n,e):n instanceof pr?function(i,r){return r instanceof pr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,l)=>o&&gO(a,r.filters[l]),!0):!1}(n,e):void Ae()}function _O(n){return n instanceof rn?function(t){return`${t.field.canonicalString()} ${t.op} ${Xl(t.value)}`}(n):n instanceof pr?function(t){return t.op.toString()+" {"+t.getFilters().map(_O).join(" ,")+"}"}(n):"Filter"}var _I=class extends rn{constructor(e,t,i){super(e,t,i),this.key=Ce.fromName(i.referenceValue)}matches(e){let t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}},vI=class extends rn{constructor(e,t){super(e,"in",t),this.keys=vO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},yI=class extends rn{constructor(e,t){super(e,"not-in",t),this.keys=vO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function vO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Ce.fromName(i.referenceValue))}var wI=class extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return UC(t)&&Ch(t.arrayValue,this.value)}},bI=class extends rn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ch(this.value.arrayValue,t)}},EI=class extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Ch(this.value.arrayValue,t)}},II=class extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!UC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ch(this.value.arrayValue,i))}};var CI=class{constructor(e,t=null,i=[],r=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=l,this.ue=null}};function FR(n,e=null,t=[],i=[],r=null,o=null,a=null){return new CI(n,e,t,i,r,o,a)}function jC(n){let e=ke(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>gI(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),F_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Xl(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Xl(i)).join(",")),e.ue=t}return e.ue}function zC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!a7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LR(n.startAt,e.startAt)&&LR(n.endAt,e.endAt)}function TI(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ho=class{constructor(e,t=null,i=[],r=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function l7(n,e,t,i,r,o,a,l){return new Ho(n,e,t,i,r,o,a,l)}function B_(n){return new Ho(n)}function VR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $C(n){return n.collectionGroup!==null}function Wl(n){let e=ke(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Rn(Ei.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new sc(o,i))}),t.has(Ei.keyField().canonicalString())||e.ce.push(new sc(Ei.keyField(),i))}return e.ce}function Wr(n){let e=ke(n);return e.le||(e.le=u7(e,Wl(n))),e.le}function u7(n,e){if(n.limitType==="F")return FR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new sc(r.field,o)});let t=n.endAt?new js(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new js(n.startAt.position,n.startAt.inclusive):null;return FR(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function SI(n,e){let t=n.filters.concat([e]);return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function d_(n,e,t){return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function U_(n,e){return zC(Wr(n),Wr(e))&&n.limitType===e.limitType}function yO(n){return`${jC(Wr(n))}|lt:${n.limitType}`}function $l(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>_O(r)).join(", ")}]`),F_(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Xl(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Xl(r)).join(",")),`Target(${i})`}(Wr(n))}; limitType=${n.limitType})`}function j_(n,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,r){for(let o of Wl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(a,l,u){let f=NR(a,l,u);return a.inclusive?f<=0:f<0}(i.startAt,Wl(i),r)||i.endAt&&!function(a,l,u){let f=NR(a,l,u);return a.inclusive?f>=0:f>0}(i.endAt,Wl(i),r))}(n,e)}function d7(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wO(n){return(e,t)=>{let i=!1;for(let r of Wl(n)){let o=h7(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function h7(n,e,t){let i=n.field.isKeyField()?Ce.comparator(e.key,t.key):function(o,a,l){let u=a.data.field(o),f=l.data.field(o);return u!==null&&f!==null?Jl(u,f):Ae()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ae()}}var zs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lc(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return uO(this.inner)}size(){return this.innerSize}};var f7=new qt(Ce.comparator);function qo(){return f7}var bO=new qt(Ce.comparator);function vh(...n){let e=bO;for(let t of n)e=e.insert(t.key,t);return e}function EO(n){let e=bO;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ec(){return wh()}function IO(){return wh()}function wh(){return new zs(n=>n.toString(),(n,e)=>n.isEqual(e))}var p7=new qt(Ce.comparator),m7=new Rn(Ce.comparator);function tt(...n){let e=m7;for(let t of n)e=e.add(t);return e}var g7=new Rn(ht);function _7(){return g7}function HC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function CO(n){return{integerValue:""+n}}function TO(n,e){return t7(e)?CO(e):HC(n,e)}var eu=class{constructor(){this._=void 0}};function v7(n,e,t){return n instanceof tu?function(r,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&V_(o)&&(o=BC(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof $s?DO(n,e):n instanceof Hs?AO(n,e):function(r,o){let a=SO(r,o),l=BR(a)+BR(r.Pe);return mI(a)&&mI(r.Pe)?CO(l):HC(r.serializer,l)}(n,e)}function y7(n,e,t){return n instanceof $s?DO(n,e):n instanceof Hs?AO(n,e):t}function SO(n,e){return n instanceof ac?function(i){return mI(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var tu=class extends eu{},$s=class extends eu{constructor(e){super(),this.elements=e}};function DO(n,e){let t=MO(e);for(let i of n.elements)t.some(r=>Zr(r,i))||t.push(i);return{arrayValue:{values:t}}}var Hs=class extends eu{constructor(e){super(),this.elements=e}};function AO(n,e){let t=MO(e);for(let i of n.elements)t=t.filter(r=>!Zr(r,i));return{arrayValue:{values:t}}}var ac=class extends eu{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function BR(n){return Vt(n.integerValue||n.doubleValue)}function MO(n){return UC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Th=class{constructor(e,t){this.field=e,this.transform=t}};function w7(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof $s&&r instanceof $s||i instanceof Hs&&r instanceof Hs?Yl(i.elements,r.elements,Zr):i instanceof ac&&r instanceof ac?Zr(i.Pe,r.Pe):i instanceof tu&&r instanceof tu}(n.transform,e.transform)}var DI=class{constructor(e,t){this.version=e,this.transformResults=t}},jo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function n_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var nu=class{};function xO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sh(n.key,jo.none()):new cc(n.key,n.data,jo.none());{let t=n.data,i=bi.empty(),r=new Rn(Ei.comparator);for(let o of e.fields)if(!r.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Qr(n.key,i,new $i(r.toArray()),jo.none())}}function b7(n,e,t){n instanceof cc?function(r,o,a){let l=r.value.clone(),u=jR(r.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Qr?function(r,o,a){if(!n_(r.precondition,o))return void o.convertToUnknownDocument(a.version);let l=jR(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(PO(r)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function bh(n,e,t,i){return n instanceof cc?function(o,a,l,u){if(!n_(o.precondition,a))return l;let f=o.value.clone(),m=zR(o.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof Qr?function(o,a,l,u){if(!n_(o.precondition,a))return l;let f=zR(o.fieldTransforms,u,a),m=a.data;return m.setAll(PO(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(o,a,l){return n_(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,t)}function E7(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),o=SO(i.transform,r||null);o!=null&&(t===null&&(t=bi.empty()),t.set(i.field,o))}return t||null}function UR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Yl(i,r,(o,a)=>w7(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var cc=class extends nu{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Qr=class extends nu{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function PO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function jR(n,e,t){let i=new Map;bt(n.length===t.length);for(let r=0;r<t.length;r++){let o=n[r],a=o.transform,l=e.data.field(o.field);i.set(o.field,y7(a,l,t[r]))}return i}function zR(n,e,t){let i=new Map;for(let r of n){let o=r.transform,a=t.data.field(r.field);i.set(r.field,v7(o,a,e))}return i}var Sh=class extends nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},AI=class extends nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var MI=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&b7(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=bh(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=bh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=IO();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,l=this.applyToLocalView(a,o.mutatedFields);l=t.has(r.key)?null:l;let u=xO(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(je.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tt())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,(t,i)=>UR(t,i))&&Yl(this.baseMutations,e.baseMutations,(t,i)=>UR(t,i))}},xI=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){bt(e.mutations.length===i.length);let r=function(){return p7}(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new n(e,t,i,r)}};var PI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var RI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tn,st;function I7(n){switch(n){default:return Ae();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function RO(n){if(n===void 0)return zo("GRPC error has no .code"),q.UNKNOWN;switch(n){case tn.OK:return q.OK;case tn.CANCELLED:return q.CANCELLED;case tn.UNKNOWN:return q.UNKNOWN;case tn.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case tn.INTERNAL:return q.INTERNAL;case tn.UNAVAILABLE:return q.UNAVAILABLE;case tn.UNAUTHENTICATED:return q.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case tn.NOT_FOUND:return q.NOT_FOUND;case tn.ALREADY_EXISTS:return q.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return q.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case tn.ABORTED:return q.ABORTED;case tn.OUT_OF_RANGE:return q.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return q.UNIMPLEMENTED;case tn.DATA_LOSS:return q.DATA_LOSS;default:return Ae()}}(st=tn||(tn={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";var $R=null;function C7(){return new TextEncoder}var T7=new Vs([4294967295,4294967295],0);function HR(n){let e=C7().encode(n),t=new KE;return t.update(e),new Uint8Array(t.digest())}function qR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vs([t,i],0),new Vs([r,o],0)]}var OI=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new tc(`Invalid padding: ${t}`);if(i<0)throw new tc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new tc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Vs.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Vs.fromNumber(i)));return r.compare(T7)===1&&(r=new Vs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=HR(e),[i,r]=qR(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,r,t);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;let t=HR(e),[i,r]=qR(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},tc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var h_=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Dh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(je.min(),r,new qt(ht),qo(),tt())}},Dh=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,tt(),tt(),tt())}};var Kl=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},f_=class{constructor(e,t){this.targetId=e,this.me=t}},p_=class{constructor(e,t,i=On.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},m_=class{constructor(){this.fe=0,this.ge=WR(),this.pe=On.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=tt(),t=tt(),i=tt();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ae()}}),new Dh(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=WR()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},kI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=qo(),this.qe=GR(),this.Qe=new qt(ht)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let o=r.target;if(TI(o))if(i===0){let a=new Ce(o.path);this.Ue(t,a,fr.newNoDocument(a,je.min()))}else bt(i===1);else{let a=this.Ye(t);if(a!==i){let l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(t);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}$R?.et(function(m,v,E,b,M){var k,N,G,te,J,ue;let Ne={localCacheCount:m,existenceFilterCount:v.count,databaseId:E.database,projectId:E.projectId},he=v.unchangedNames;return he&&(Ne.bloomFilter={applied:M===0,hashCount:(k=he?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(te=(G=(N=he?.bits)===null||N===void 0?void 0:N.bitmap)===null||G===void 0?void 0:G.length)!==null&&te!==void 0?te:0,padding:(ue=(J=he?.bits)===null||J===void 0?void 0:J.padding)!==null&&ue!==void 0?ue:0,mightContain:R=>{var S;return(S=b?.mightContain(R))!==null&&S!==void 0&&S}}),Ne}(a,e.me,this.Le.tt(),l,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,a,l;try{a=Us(i).toUint8Array()}catch(u){if(u instanceof a_)return Ql("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new OI(a,r,o)}catch(u){return Ql(u instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(t,o,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((o,a)=>{let l=this.Je(a);if(l){if(o.current&&TI(l.target)){let u=new Ce(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,fr.newNoDocument(u,e))}o.be&&(t.set(a,o.ve()),o.Ce())}});let i=tt();this.qe.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{let f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let r=new h_(e,t,this.Qe,this.ke,i);return this.ke=qo(),this.qe=GR(),this.Qe=new qt(ht),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new m_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Rn(ht),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new m_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function GR(){return new qt(Ce.comparator)}function WR(){return new qt(Ce.comparator)}var S7={asc:"ASCENDING",desc:"DESCENDING"},D7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A7={and:"AND",or:"OR"},NI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function LI(n,e){return n.useProto3Json||F_(e)?e:{value:e}}function g_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function M7(n,e){return g_(n,e.toTimestamp())}function Kr(n){return bt(!!n),je.fromTimestamp(function(t){let i=$o(t);return new Ht(i.seconds,i.nanos)}(n))}function qC(n,e){return FI(n,e).canonicalString()}function FI(n,e){let t=function(r){return new Bt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kO(n){let e=Bt.fromString(n);return bt(BO(e)),e}function VI(n,e){return qC(n.databaseId,e.path)}function eI(n,e){let t=kO(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(LO(t))}function NO(n,e){return qC(n.databaseId,e)}function x7(n){let e=kO(n);return e.length===4?Bt.emptyPath():LO(e)}function BI(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LO(n){return bt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function KR(n,e,t){return{name:VI(n,e),fields:t.value.mapValue.fields}}function P7(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(bt(m===void 0||typeof m=="string"),On.fromBase64String(m||"")):(bt(m===void 0||m instanceof Buffer||m instanceof Uint8Array),On.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(f){let m=f.code===void 0?q.UNKNOWN:RO(f.code);return new ae(m,f.message||"")}(a);t=new p_(i,r,o,l||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=eI(n,i.document.name),o=Kr(i.document.updateTime),a=i.document.createTime?Kr(i.document.createTime):je.min(),l=new bi({mapValue:{fields:i.document.fields}}),u=fr.newFoundDocument(r,o,a,l),f=i.targetIds||[],m=i.removedTargetIds||[];t=new Kl(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=eI(n,i.document),o=i.readTime?Kr(i.readTime):je.min(),a=fr.newNoDocument(r,o),l=i.removedTargetIds||[];t=new Kl([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=eI(n,i.document),o=i.removedTargetIds||[];t=new Kl([],o,r,null)}else{if(!("filter"in e))return Ae();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new RI(r,o),l=i.targetId;t=new f_(l,a)}}return t}function R7(n,e){let t;if(e instanceof cc)t={update:KR(n,e.key,e.value)};else if(e instanceof Sh)t={delete:VI(n,e.key)};else if(e instanceof Qr)t={update:KR(n,e.key,e.data),updateMask:j7(e.fieldMask)};else{if(!(e instanceof AI))return Ae();t={verify:VI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,a){let l=a.transform;if(l instanceof tu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $s)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ac)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Ae()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:M7(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae()}(n,e.precondition)),t}function O7(n,e){return n&&n.length>0?(bt(e!==void 0),n.map(t=>function(r,o){let a=r.updateTime?Kr(r.updateTime):Kr(o);return a.isEqual(je.min())&&(a=Kr(o)),new DI(a,r.transformResults||[])}(t,e))):[]}function k7(n,e){return{documents:[NO(n,e.path)]}}function N7(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=NO(n,r);let o=function(f){if(f.length!==0)return VO(pr.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(m=>function(E){return{field:Hl(E.field),direction:V7(E.dir)}}(m))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let l=LI(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:t,parent:r}}function L7(n){let e=x7(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){bt(i===1);let m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(v){let E=FO(v);return E instanceof pr&&mO(E)?E.getFilters():[E]}(t.where));let a=[];t.orderBy&&(a=function(v){return v.map(E=>function(M){return new sc(ql(M.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(E))}(t.orderBy));let l=null;t.limit&&(l=function(v){let E;return E=typeof v=="object"?v.value:v,F_(E)?null:E}(t.limit));let u=null;t.startAt&&(u=function(v){let E=!!v.before,b=v.values||[];return new js(b,E)}(t.startAt));let f=null;return t.endAt&&(f=function(v){let E=!v.before,b=v.values||[];return new js(b,E)}(t.endAt)),l7(e,r,a,o,l,"F",u,f)}function F7(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FO(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=ql(t.unaryFilter.field);return rn.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ql(t.unaryFilter.field);return rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ql(t.unaryFilter.field);return rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=ql(t.unaryFilter.field);return rn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(n):n.fieldFilter!==void 0?function(t){return rn.create(ql(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return pr.create(t.compositeFilter.filters.map(i=>FO(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(n):Ae()}function V7(n){return S7[n]}function B7(n){return D7[n]}function U7(n){return A7[n]}function Hl(n){return{fieldPath:n.canonicalString()}}function ql(n){return Ei.fromServerFormat(n.fieldPath)}function VO(n){return n instanceof rn?function(t){if(t.op==="=="){if(kR(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NAN"}};if(OR(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kR(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NAN"}};if(OR(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(t.field),op:B7(t.op),value:t.value}}}(n):n instanceof pr?function(t){let i=t.getFilters().map(r=>VO(r));return i.length===1?i[0]:{compositeFilter:{op:U7(t.op),filters:i}}}(n):Ae()}function j7(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ah=class n{constructor(e,t,i,r,o=je.min(),a=je.min(),l=On.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var UI=class{constructor(e){this.ct=e}};function z7(n){let e=L7({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?d_(e,e.limit,"L"):e}var __=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Vt(e.integerValue));else if("doubleValue"in e){let i=Vt(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),Eh(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=$o(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Us(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?hO(e)?this.dt(t,Number.MAX_SAFE_INTEGER):dO(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ae()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let o=e.fields||{};this.dt(t,53);let a="value",l=((r=(i=o[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Vt(l)),this.Vt(a,t),this.Tt(o[a],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),Ce.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};__.vt=new __;var jI=class{constructor(){this.un=new zI}addToCollectionParentIndex(e,t){return this.un.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(rc.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(rc.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}},zI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Rn(Bt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Rn(Bt.comparator)).toArray()}};var $ne=new Uint8Array(0);var qr=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};qr.DEFAULT_COLLECTION_PERCENTILE=10,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qr.DEFAULT=new qr(41943040,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qr.DISABLED=new qr(-1,0,0);var Mh=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var $I=class{constructor(){this.changes=new zs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var HI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var qI=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&bh(i.mutation,r,$i.empty(),Ht.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,tt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=tt()){let r=ec();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let a=vh();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let i=ec();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,tt()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,i,r){let o=qo(),a=wh(),l=function(){return wh()}();return t.forEach((u,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Qr)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),bh(m.mutation,f,m.mutation.getFieldMask(),Ht.now())):a.set(f.key,$i.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,m)=>a.set(f,m)),t.forEach((f,m)=>{var v;return l.set(f,new HI(m,(v=a.get(f))!==null&&v!==void 0?v:null))}),l))}recalculateAndSaveOverlays(e,t){let i=wh(),r=new qt((a,l)=>a-l),o=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let l of a)l.keys().forEach(u=>{let f=t.get(u);if(f===null)return;let m=i.get(u)||$i.empty();m=l.applyToLocalView(f,m),i.set(u,m);let v=(r.get(l.batchId)||tt()).add(u);r=r.insert(l.batchId,v)})}).next(()=>{let a=[],l=r.getReverseIterator();for(;l.hasNext();){let u=l.getNext(),f=u.key,m=u.value,v=IO();m.forEach(E=>{if(!o.has(E)){let b=xO(t.get(E),i.get(E));b!==null&&v.set(E,b),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,v))}return ie.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(a){return Ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$C(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):ie.resolve(ec()),l=-1,u=o;return a.next(f=>ie.forEach(f,(m,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),o.get(m)?ie.resolve():this.remoteDocumentCache.getEntry(e,m).next(E=>{u=u.insert(m,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,tt())).next(m=>({batchId:l,changes:EO(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(i=>{let r=vh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,a=vh();return this.indexManager.getCollectionParents(e,o).next(l=>ie.forEach(l,u=>{let f=function(v,E){return new Ho(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((v,E)=>{a=a.insert(v,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(a=>{o.forEach((u,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,fr.newInvalidDocument(m)))});let l=vh();return a.forEach((u,f)=>{let m=o.get(u);m!==void 0&&bh(m.mutation,f,$i.empty(),Ht.now()),j_(t,f)&&(l=l.insert(u,f))}),l})}};var GI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ie.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Kr(r.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:z7(r.bundledQuery),readTime:Kr(r.readTime)}}(t)),ie.resolve()}};var WI=class{constructor(){this.overlays=new qt(Ce.comparator),this.Ir=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){let i=ec();return ie.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.ht(e,t,o)}),ie.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){let r=ec(),o=t.length+1,a=new Ce(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){let u=l.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return ie.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new qt((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=ec(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let l=ec(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=r)););return ie.resolve(l)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new PI(t,i));let o=this.Ir.get(t);o===void 0&&(o=tt(),this.Ir.set(t,o)),this.Ir.set(t,o.add(i.key))}};var KI=class{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}};var xh=class{constructor(){this.Tr=new Rn(nn.Er),this.dr=new Rn(nn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new nn(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new nn(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new Ce(new Bt([])),i=new nn(t,e),r=new nn(t,e+1),o=[];return this.dr.forEachInRange([i,r],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Ce(new Bt([])),i=new nn(t,e),r=new nn(t,e+1),o=tt();return this.dr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new nn(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},nn=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ce.comparator(e.key,t.key)||ht(e.wr,t.wr)}static Ar(e,t){return ht(e.wr,t.wr)||Ce.comparator(e.key,t.key)}};var ZI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Rn(nn.Er)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new MI(o,t,i,r);this.mutationQueue.push(a);for(let l of r)this.br=this.br.add(new nn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ie.resolve(a)}lookupMutationBatch(e,t){return ie.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),o=r<0?0:r;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new nn(t,0),r=new nn(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],a=>{let l=this.Dr(a.wr);o.push(l)}),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Rn(ht);return t.forEach(r=>{let o=new nn(r,0),a=new nn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],l=>{i=i.add(l.wr)})}),ie.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;Ce.isDocumentKey(o)||(o=o.child(""));let a=new nn(new Ce(o),0),l=new Rn(ht);return this.br.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(u.wr)),!0)},a),ie.resolve(this.Cr(l))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){bt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ie.forEach(t.mutations,r=>{let o=new nn(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new nn(t,0),r=this.br.firstAfterOrEqual(i);return ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var QI=class{constructor(e){this.Mr=e,this.docs=function(){return new qt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,a=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let i=qo();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():fr.newInvalidDocument(r))}),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=qo(),a=t.path,l=new Ce(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){let{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||J9(Y9(m),i)<=0||(r.has(m.key)||j_(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Ae()}Or(e,t){return ie.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new YI(this)}getSize(e){return ie.resolve(this.size)}},YI=class extends $I{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),ie.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var JI=class{constructor(e){this.persistence=e,this.Nr=new zs(t=>jC(t),zC),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xh,this.targetCount=0,this.kr=Mh.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),ie.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Mh(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Kn(t),ie.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),ie.waitFor(o).next(()=>r)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this.Br.containsKey(t))}};var XI=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new lO(0),this.Kr=!1,this.Kr=!0,this.$r=new KI,this.referenceDelegate=e(this),this.Ur=new JI(this),this.indexManager=new jI,this.remoteDocumentCache=function(r){return new QI(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new UI(t),this.Gr=new GI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new ZI(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){_e("MemoryPersistence","Starting transaction:",e);let r=new eC(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,t){return ie.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},eC=class extends hI{constructor(e){super(),this.currentSequenceNumber=e}},tC=class n{constructor(e){this.persistence=e,this.Jr=new xh,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Ae()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Xr,i=>{let r=Ce.fromPath(i);return this.ei(e,r).next(o=>{o||t.removeEntry(r,je.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ie.or([()=>ie.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var nC=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=tt(),r=tt();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var iC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var rC=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cP()?8:e7(wn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.Yi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,t,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new iC;return this.Xi(e,t,a).next(l=>{if(o.result=l,this.zi)return this.es(e,t,a,l.size)})}).next(()=>o.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(_h()<=et.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",$l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ie.resolve()):(_h()<=et.DEBUG&&_e("QueryEngine","Query:",$l(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(_h()<=et.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",$l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(t))):ie.resolve())}Yi(e,t){if(VR(t))return ie.resolve(null);let i=Wr(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=d_(t,null,"F"),i=Wr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=tt(...o);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.ts(t,l);return this.ns(t,f,a,u.readTime)?this.Yi(e,d_(t,null,"F")):this.rs(e,f,t,u)}))})))}Zi(e,t,i,r){return VR(t)||r.isEqual(je.min())?ie.resolve(null):this.Ji.getDocuments(e,i).next(o=>{let a=this.ts(t,o);return this.ns(t,a,i,r)?ie.resolve(null):(_h()<=et.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$l(t)),this.rs(e,a,t,Q9(r,-1)).next(l=>l))})}ts(e,t){let i=new Rn(wO(e));return t.forEach((r,o)=>{j_(e,o)&&(i=i.add(o))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,t,i){return _h()<=et.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",$l(t)),this.Ji.getDocumentsMatchingQuery(e,t,rc.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var oC=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new qt(ht),this._s=new zs(o=>jC(o),zC),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function $7(n,e,t,i){return new oC(n,e,t,i)}function UO(n,e){return T(this,null,function*(){let t=ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],l=[],u=tt();for(let f of r){a.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}for(let f of o){l.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}return t.localDocuments.getDocuments(i,u).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:l}))})})})}function H7(n,e){let t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,f,m){let v=f.batch,E=v.keys(),b=ie.resolve();return E.forEach(M=>{b=b.next(()=>m.getEntry(u,M)).next(k=>{let N=f.docVersions.get(M);bt(N!==null),k.version.compareTo(N)<0&&(v.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(u,v))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=tt();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function jO(n){let e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function q7(n,e){let t=ke(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let l=[];e.targetChanges.forEach((m,v)=>{let E=r.get(v);if(!E)return;l.push(t.Ur.removeMatchingKeys(o,m.removedDocuments,v).next(()=>t.Ur.addMatchingKeys(o,m.addedDocuments,v)));let b=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(On.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,i)),r=r.insert(v,b),function(k,N,G){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(E,b,m)&&l.push(t.Ur.updateTargetData(o,b))});let u=qo(),f=tt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),l.push(G7(o,a,e.documentUpdates).next(m=>{u=m.Ps,f=m.Is})),!i.isEqual(je.min())){let m=t.Ur.getLastRemoteSnapshotVersion(o).next(v=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(m)}return ie.waitFor(l).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(t.os=r,o))}function G7(n,e,t){let i=tt(),r=tt();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=qo();return t.forEach((l,u)=>{let f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(je.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):_e("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{Ps:a,Is:r}})}function W7(n,e){let t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function K7(n,e){let t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(o=>o?(r=o,ie.resolve(r)):t.Ur.allocateTargetId(i).next(a=>(r=new Ah(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function sC(n,e,t){return T(this,null,function*(){let i=ke(n),r=i.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Uh(a))throw a;_e("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function ZR(n,e,t){let i=ke(n),r=je.min(),o=tt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){let v=ke(u),E=v._s.get(m);return E!==void 0?ie.resolve(v.os.get(E)):v.Ur.getTargetData(f,m)}(i,a,Wr(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,t?r:je.min(),t?o:tt())).next(l=>(Z7(i,d7(e),l),{documents:l,Ts:o})))}function Z7(n,e,t){let i=n.us.get(e)||je.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.us.set(e,i)}var v_=class{constructor(){this.activeTargetIds=_7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var aC=class{constructor(){this.so=new v_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new v_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cC=class{_o(e){}shutdown(){}};var y_=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){_e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){_e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var e_=null;function tI(){return e_===null?e_=function(){return 268435456+Math.round(2147483648*Math.random())}():e_++,"0x"+e_.toString(16)}var Q7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var lC=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Pn="WebChannelConnection",uC=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(t,i,r,o,a){let l=tI(),u=this.xo(t,i.toUriEncodedString());_e("RestConnection",`Sending RPC '${t}' ${l}:`,u,r);let f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(t,u,f,r).then(m=>(_e("RestConnection",`Received RPC '${t}' ${l}: `,m),m),m=>{throw Ql("RestConnection",`RPC '${t}' ${l} failed with error: `,m,"url: ",u,"request:",r),m})}Lo(t,i,r,o,a,l){return this.Mo(t,i,r,o,a)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+au}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>t[a]=o),r&&r.headers.forEach((o,a)=>t[a]=o)}xo(t,i){let r=Q7[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let o=tI();return new Promise((a,l)=>{let u=new ZE;u.setWithCredentials(!0),u.listenOnce(QE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case gh.NO_ERROR:let m=u.getResponseJson();_e(Pn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case gh.TIMEOUT:_e(Pn,`RPC '${e}' ${o} timed out`),l(new ae(q.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:let v=u.getStatus();if(_e(Pn,`RPC '${e}' ${o} failed with status:`,v,"response text:",u.getResponseText()),v>0){let E=u.getResponseJson();Array.isArray(E)&&(E=E[0]);let b=E?.error;if(b&&b.status&&b.message){let M=function(N){let G=N.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(G)>=0?G:q.UNKNOWN}(b.status);l(new ae(M,b.message))}else l(new ae(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ae(q.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{_e(Pn,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(r);_e(Pn,`RPC '${e}' ${o} sending request:`,r),u.send(t,"POST",f,i,15)})}Bo(e,t,i){let r=tI(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=XE(),l=JE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;let m=o.join("");_e(Pn,`Creating RPC '${e}' stream ${r}: ${m}`,u);let v=a.createWebChannel(m,u),E=!1,b=!1,M=new lC({Io:N=>{b?_e(Pn,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(E||(_e(Pn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),E=!0),_e(Pn,`RPC '${e}' stream ${r} sending:`,N),v.send(N))},To:()=>v.close()}),k=(N,G,te)=>{N.listen(G,J=>{try{te(J)}catch(ue){setTimeout(()=>{throw ue},0)}})};return k(v,zl.EventType.OPEN,()=>{b||(_e(Pn,`RPC '${e}' stream ${r} transport opened.`),M.yo())}),k(v,zl.EventType.CLOSE,()=>{b||(b=!0,_e(Pn,`RPC '${e}' stream ${r} transport closed`),M.So())}),k(v,zl.EventType.ERROR,N=>{b||(b=!0,Ql(Pn,`RPC '${e}' stream ${r} transport errored:`,N),M.So(new ae(q.UNAVAILABLE,"The operation could not be completed")))}),k(v,zl.EventType.MESSAGE,N=>{var G;if(!b){let te=N.data[0];bt(!!te);let J=te,ue=J.error||((G=J[0])===null||G===void 0?void 0:G.error);if(ue){_e(Pn,`RPC '${e}' stream ${r} received error:`,ue);let Ne=ue.status,he=function(A){let O=tn[A];if(O!==void 0)return RO(O)}(Ne),R=ue.message;he===void 0&&(he=q.INTERNAL,R="Unknown error status: "+Ne+" with message "+ue.message),b=!0,M.So(new ae(he,R)),v.close()}else _e(Pn,`RPC '${e}' stream ${r} received:`,te),M.bo(te)}}),k(l,YE.STAT_EVENT,N=>{N.stat===Jg.PROXY?_e(Pn,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===Jg.NOPROXY&&_e(Pn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{M.wo()},0),M}};function nI(){return typeof document<"u"?document:null}function z_(n){return new NI(n,!0)}var w_=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&_e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var b_=class{constructor(e,t,i,r,o,a,l,u){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new w_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return T(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return T(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return T(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(zo(t.toString()),zo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new ae(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>T(this,null,function*(){this.state=0,this.start()}))}I_(e){return _e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(_e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dC=class extends b_{constructor(e,t,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=P7(this.serializer,e),i=function(o){if(!("targetChange"in o))return je.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?je.min():a.readTime?Kr(a.readTime):je.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=BI(this.serializer),t.addTarget=function(o,a){let l,u=a.target;if(l=TI(u)?{documents:k7(o,u)}:{query:N7(o,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=OO(o,a.resumeToken);let f=LI(o,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(je.min())>0){l.readTime=g_(o,a.snapshotVersion.toTimestamp());let f=LI(o,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);let i=F7(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=BI(this.serializer),t.removeTarget=e,this.a_(t)}},hC=class extends b_{constructor(e,t,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return bt(!!e.streamToken),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=O7(e.writeResults,e.commitTime),i=Kr(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=BI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>R7(this.serializer,i))};this.a_(t)}};var fC=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ae(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,FI(t,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(q.UNKNOWN,o.toString())})}Lo(e,t,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,FI(t,i),r,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},pC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zo(t),this.D_=!1):_e("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var mC=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{i.enqueueAndForget(()=>T(this,null,function*(){uc(this)&&(_e("RemoteStore","Restarting streams for network reachability change."),yield function(u){return T(this,null,function*(){let f=ke(u);f.L_.add(4),yield jh(f),f.q_.set("Unknown"),f.L_.delete(4),yield $_(f)})}(this))}))}),this.q_=new pC(i,r)}};function $_(n){return T(this,null,function*(){if(uc(n))for(let e of n.B_)yield e(!0)})}function jh(n){return T(this,null,function*(){for(let e of n.B_)yield e(!1)})}function zO(n,e){let t=ke(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ZC(t)?KC(t):cu(t).r_()&&WC(t,e))}function GC(n,e){let t=ke(n),i=cu(t);t.N_.delete(e),i.r_()&&$O(t,e),t.N_.size===0&&(i.r_()?i.o_():uc(t)&&t.q_.set("Unknown"))}function WC(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cu(n).A_(e)}function $O(n,e){n.Q_.xe(e),cu(n).R_(e)}function KC(n){n.Q_=new kI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),cu(n).start(),n.q_.v_()}function ZC(n){return uc(n)&&!cu(n).n_()&&n.N_.size>0}function uc(n){return ke(n).L_.size===0}function HO(n){n.Q_=void 0}function Y7(n){return T(this,null,function*(){n.q_.set("Online")})}function J7(n){return T(this,null,function*(){n.N_.forEach((e,t)=>{WC(n,e)})})}function X7(n,e){return T(this,null,function*(){HO(n),ZC(n)?(n.q_.M_(e),KC(n)):n.q_.set("Unknown")})}function eH(n,e,t){return T(this,null,function*(){if(n.q_.set("Online"),e instanceof p_&&e.state===2&&e.cause)try{yield function(r,o){return T(this,null,function*(){let a=o.cause;for(let l of o.targetIds)r.N_.has(l)&&(yield r.remoteSyncer.rejectListen(l,a),r.N_.delete(l),r.Q_.removeTarget(l))})}(n,e)}catch(i){_e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield E_(n,i)}else if(e instanceof Kl?n.Q_.Ke(e):e instanceof f_?n.Q_.He(e):n.Q_.We(e),!t.isEqual(je.min()))try{let i=yield jO(n.localStore);t.compareTo(i)>=0&&(yield function(o,a){let l=o.Q_.rt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let m=o.N_.get(f);m&&o.N_.set(f,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{let m=o.N_.get(u);if(!m)return;o.N_.set(u,m.withResumeToken(On.EMPTY_BYTE_STRING,m.snapshotVersion)),$O(o,u);let v=new Ah(m.target,u,f,m.sequenceNumber);WC(o,v)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){_e("RemoteStore","Failed to raise snapshot:",i),yield E_(n,i)}})}function E_(n,e,t){return T(this,null,function*(){if(!Uh(e))throw e;n.L_.add(1),yield jh(n),n.q_.set("Offline"),t||(t=()=>jO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(this,null,function*(){_e("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield $_(n)}))})}function qO(n,e){return e().catch(t=>E_(n,t,e))}function H_(n){return T(this,null,function*(){let e=ke(n),t=qs(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tH(e);)try{let r=yield W7(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,nH(e,r)}catch(r){yield E_(e,r)}GO(e)&&WO(e)})}function tH(n){return uc(n)&&n.O_.length<10}function nH(n,e){n.O_.push(e);let t=qs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function GO(n){return uc(n)&&!qs(n).n_()&&n.O_.length>0}function WO(n){qs(n).start()}function iH(n){return T(this,null,function*(){qs(n).p_()})}function rH(n){return T(this,null,function*(){let e=qs(n);for(let t of n.O_)e.m_(t.mutations)})}function oH(n,e,t){return T(this,null,function*(){let i=n.O_.shift(),r=xI.from(i,e,t);yield qO(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield H_(n)})}function sH(n,e){return T(this,null,function*(){e&&qs(n).V_&&(yield function(i,r){return T(this,null,function*(){if(function(a){return I7(a)&&a!==q.ABORTED}(r.code)){let o=i.O_.shift();qs(i).s_(),yield qO(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield H_(i)}})}(n,e)),GO(n)&&WO(n)})}function QR(n,e){return T(this,null,function*(){let t=ke(n);t.asyncQueue.verifyOperationInProgress(),_e("RemoteStore","RemoteStore received new credentials");let i=uc(t);t.L_.add(3),yield jh(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield $_(t)})}function aH(n,e){return T(this,null,function*(){let t=ke(n);e?(t.L_.delete(2),yield $_(t)):e||(t.L_.add(2),yield jh(t),t.q_.set("Unknown"))})}function cu(n){return n.K_||(n.K_=function(t,i,r){let o=ke(t);return o.w_(),new dC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:Y7.bind(null,n),Ro:J7.bind(null,n),mo:X7.bind(null,n),d_:eH.bind(null,n)}),n.B_.push(e=>T(this,null,function*(){e?(n.K_.s_(),ZC(n)?KC(n):n.q_.set("Unknown")):(yield n.K_.stop(),HO(n))}))),n.K_}function qs(n){return n.U_||(n.U_=function(t,i,r){let o=ke(t);return o.w_(),new hC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iH.bind(null,n),mo:sH.bind(null,n),f_:rH.bind(null,n),g_:oH.bind(null,n)}),n.B_.push(e=>T(this,null,function*(){e?(n.U_.s_(),yield H_(n)):(yield n.U_.stop(),n.O_.length>0&&(_e("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var gC=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let a=Date.now()+i,l=new n(e,t,a,r,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function QC(n,e){if(zo("AsyncQueue",`${e}: ${n}`),Uh(n))return new ae(q.UNAVAILABLE,`${e}: ${n}`);throw n}var I_=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ce.comparator(t.key,i.key):(t,i)=>Ce.comparator(t.key,i.key),this.keyedMap=vh(),this.sortedSet=new qt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var C_=class{constructor(){this.W_=new qt(Ce.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ae():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},iu=class n{constructor(e,t,i,r,o,a,l,u,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){let a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new n(e,t,I_.emptySet(t),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&U_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var _C=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},vC=class{constructor(){this.queries=YR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=ke(t),o=r.queries;r.queries=YR(),o.forEach((a,l)=>{for(let u of l.j_)u.onError(i)})})(this,new ae(q.ABORTED,"Firestore shutting down"))}};function YR(){return new zs(n=>yO(n),U_)}function YC(n,e){return T(this,null,function*(){let t=ke(n),i=3,r=e.query,o=t.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new _C,i=e.J_()?0:1);try{switch(i){case 0:o.z_=yield t.onListen(r,!0);break;case 1:o.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(a){let l=QC(a,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&XC(t)})}function JC(n,e){return T(this,null,function*(){let t=ke(n),i=e.query,r=3,o=t.queries.get(i);if(o){let a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function cH(n,e){let t=ke(n),i=!1;for(let r of e){let o=r.query,a=t.queries.get(o);if(a){for(let l of a.j_)l.X_(r)&&(i=!0);a.z_=r}}i&&XC(t)}function lH(n,e,t){let i=ke(n),r=i.queries.get(e);if(r)for(let o of r.j_)o.onError(t);i.queries.delete(e)}function XC(n){n.Y_.forEach(e=>{e.next()})}var yC,JR;(JR=yC||(yC={})).ea="default",JR.Cache="cache";var Ph=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new iu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yC.Cache}};var T_=class{constructor(e){this.key=e}},S_=class{constructor(e){this.key=e}},wC=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=tt(),this.mutatedKeys=tt(),this.Aa=wO(e),this.Ra=new I_(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new C_,r=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,a=r,l=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,v)=>{let E=r.get(m),b=j_(this.query,v)?v:null,M=!!E&&this.mutatedKeys.has(E.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),N=!1;E&&b?E.data.isEqual(b.data)?M!==k&&(i.track({type:3,doc:b}),N=!0):this.ga(E,b)||(i.track({type:2,doc:b}),N=!0,(u&&this.Aa(b,u)>0||f&&this.Aa(b,f)<0)&&(l=!0)):!E&&b?(i.track({type:0,doc:b}),N=!0):E&&!b&&(i.track({type:1,doc:E}),N=!0,(u||f)&&(l=!0)),N&&(b?(a=a.add(b),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ra:a,fa:i,ns:l,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((m,v)=>function(b,M){let k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return k(b)-k(M)}(m.type,v.type)||this.Aa(m.doc,v.doc)),this.pa(i),r=r!=null&&r;let l=t&&!r?this.ya():[],u=this.da.size===0&&this.current&&!r?1:0,f=u!==this.Ea;return this.Ea=u,a.length!==0||f?{snapshot:new iu(this.query,e.Ra,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new C_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=tt(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new S_(i))}),this.da.forEach(i=>{e.has(i)||t.push(new T_(i))}),t}ba(e){this.Ta=e.Ts,this.da=tt();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return iu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},bC=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},EC=class{constructor(e){this.key=e,this.va=!1}},IC=class{constructor(e,t,i,r,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new zs(l=>yO(l),U_),this.Ma=new Map,this.xa=new Set,this.Oa=new qt(Ce.comparator),this.Na=new Map,this.La=new xh,this.Ba={},this.ka=new Map,this.qa=Mh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function uH(n,e,t=!0){return T(this,null,function*(){let i=XO(n),r,o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield KO(i,e,t,!0),r})}function dH(n,e){return T(this,null,function*(){let t=XO(n);yield KO(t,e,!0,!1)})}function KO(n,e,t,i){return T(this,null,function*(){let r=yield K7(n.localStore,Wr(e)),o=r.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),l;return i&&(l=yield hH(n,e,o,a==="current",r.resumeToken)),n.isPrimaryClient&&t&&zO(n.remoteStore,r),l})}function hH(n,e,t,i,r){return T(this,null,function*(){n.Ka=(v,E,b)=>function(k,N,G,te){return T(this,null,function*(){let J=N.view.ma(G);J.ns&&(J=yield ZR(k.localStore,N.query,!1).then(({documents:R})=>N.view.ma(R,J)));let ue=te&&te.targetChanges.get(N.targetId),Ne=te&&te.targetMismatches.get(N.targetId)!=null,he=N.view.applyChanges(J,k.isPrimaryClient,ue,Ne);return eO(k,N.targetId,he.wa),he.snapshot})}(n,v,E,b);let o=yield ZR(n.localStore,e,!0),a=new wC(e,o.Ts),l=a.ma(o.documents),u=Dh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=a.applyChanges(l,n.isPrimaryClient,u);eO(n,t,f.wa);let m=new bC(e,t,a);return n.Fa.set(e,m),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot})}function fH(n,e,t){return T(this,null,function*(){let i=ke(n),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(a=>!U_(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sC(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&GC(i.remoteStore,r.targetId),CC(i,r.targetId)}).catch(Bh))):(CC(i,r.targetId),yield sC(i.localStore,r.targetId,!0))})}function pH(n,e){return T(this,null,function*(){let t=ke(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),GC(t.remoteStore,i.targetId))})}function mH(n,e,t){return T(this,null,function*(){let i=EH(n);try{let r=yield function(a,l){let u=ke(a),f=Ht.now(),m=l.reduce((b,M)=>b.add(M.key),tt()),v,E;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let M=qo(),k=tt();return u.cs.getEntries(b,m).next(N=>{M=N,M.forEach((G,te)=>{te.isValidDocument()||(k=k.add(G))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,M)).next(N=>{v=N;let G=[];for(let te of l){let J=E7(te,v.get(te.key).overlayedDocument);J!=null&&G.push(new Qr(te.key,J,fO(J.value.mapValue),jo.exists(!0)))}return u.mutationQueue.addMutationBatch(b,f,G,l)}).next(N=>{E=N;let G=N.applyToLocalDocumentSet(v,k);return u.documentOverlayCache.saveOverlays(b,N.batchId,G)})}).then(()=>({batchId:E.batchId,changes:EO(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let f=a.Ba[a.currentUser.toKey()];f||(f=new qt(ht)),f=f.insert(l,u),a.Ba[a.currentUser.toKey()]=f}(i,r.batchId,t),yield zh(i,r.changes),yield H_(i.remoteStore)}catch(r){let o=QC(r,"Failed to persist write");t.reject(o)}})}function ZO(n,e){return T(this,null,function*(){let t=ke(n);try{let i=yield q7(t.localStore,e);e.targetChanges.forEach((r,o)=>{let a=t.Na.get(o);a&&(bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?bt(a.va):r.removedDocuments.size>0&&(bt(a.va),a.va=!1))}),yield zh(t,i,e)}catch(i){yield Bh(i)}})}function XR(n,e,t){let i=ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((o,a)=>{let l=a.view.Z_(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){let u=ke(a);u.onlineState=l;let f=!1;u.queries.forEach((m,v)=>{for(let E of v.j_)E.Z_(l)&&(f=!0)}),f&&XC(u)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function gH(n,e,t){return T(this,null,function*(){let i=ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),o=r&&r.key;if(o){let a=new qt(Ce.comparator);a=a.insert(o,fr.newNoDocument(o,je.min()));let l=tt().add(o),u=new h_(je.min(),new Map,new qt(ht),a,l);yield ZO(i,u),i.Oa=i.Oa.remove(o),i.Na.delete(e),eT(i)}else yield sC(i.localStore,e,!1).then(()=>CC(i,e,t)).catch(Bh)})}function _H(n,e){return T(this,null,function*(){let t=ke(n),i=e.batch.batchId;try{let r=yield H7(t.localStore,e);YO(t,i,null),QO(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield zh(t,r)}catch(r){yield Bh(r)}})}function vH(n,e,t){return T(this,null,function*(){let i=ke(n);try{let r=yield function(a,l){let u=ke(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,l).next(v=>(bt(v!==null),m=v.keys(),u.mutationQueue.removeMutationBatch(f,v))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,e);YO(i,e,t),QO(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield zh(i,r)}catch(r){yield Bh(r)}})}function QO(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function YO(n,e,t){let i=ke(n),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function CC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||JO(n,i)})}function JO(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(GC(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),eT(n))}function eO(n,e,t){for(let i of t)i instanceof T_?(n.La.addReference(i.key,e),yH(n,i)):i instanceof S_?(_e("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||JO(n,i.key)):Ae()}function yH(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(_e("SyncEngine","New document in limbo: "+t),n.xa.add(i),eT(n))}function eT(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Ce(Bt.fromString(e)),i=n.qa.next();n.Na.set(i,new EC(t)),n.Oa=n.Oa.insert(t,i),zO(n.remoteStore,new Ah(Wr(B_(t.path)),i,"TargetPurposeLimboResolution",lO.oe))}}function zh(n,e,t){return T(this,null,function*(){let i=ke(n),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((l,u)=>{a.push(i.Ka(u,e,t).then(f=>{var m;if((f||t)&&i.isPrimaryClient){let v=f?!f.fromCache:(m=t?.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,v?"current":"not-current")}if(f){r.push(f);let v=nC.Wi(u.targetId,f);o.push(v)}}))}),yield Promise.all(a),i.Ca.d_(r),yield function(u,f){return T(this,null,function*(){let m=ke(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ie.forEach(f,E=>ie.forEach(E.$i,b=>m.persistence.referenceDelegate.addReference(v,E.targetId,b)).next(()=>ie.forEach(E.Ui,b=>m.persistence.referenceDelegate.removeReference(v,E.targetId,b)))))}catch(v){if(!Uh(v))throw v;_e("LocalStore","Failed to update sequence numbers: "+v)}for(let v of f){let E=v.targetId;if(!v.fromCache){let b=m.os.get(E),M=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(M);m.os=m.os.insert(E,k)}}})}(i.localStore,o))})}function wH(n,e){return T(this,null,function*(){let t=ke(n);if(!t.currentUser.isEqual(e)){_e("SyncEngine","User change. New user:",e.toKey());let i=yield UO(t.localStore,e);t.currentUser=e,function(o,a){o.ka.forEach(l=>{l.forEach(u=>{u.reject(new ae(q.CANCELLED,a))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield zh(t,i.hs)}})}function bH(n,e){let t=ke(n),i=t.Na.get(e);if(i&&i.va)return tt().add(i.key);{let r=tt(),o=t.Ma.get(e);if(!o)return r;for(let a of o){let l=t.Fa.get(a);r=r.unionWith(l.view.Va)}return r}}function XO(n){let e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gH.bind(null,e),e.Ca.d_=cH.bind(null,e.eventManager),e.Ca.$a=lH.bind(null,e.eventManager),e}function EH(n){let e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_H.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vH.bind(null,e),e}var tO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=z_(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return $7(this.persistence,new rC,t.initialUser,this.serializer)}Ga(t){return new XI(tC.Zr,this.serializer)}Wa(t){return new aC}terminate(){return T(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var IH=(()=>{class n{initialize(t,i){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wH.bind(null,this.syncEngine),yield aH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new vC}()}createDatastore(t){let i=z_(t.databaseInfo.databaseId),r=function(a){return new uC(a)}(t.databaseInfo);return function(a,l,u,f){return new fC(a,l,u,f)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,o,a,l,u){return new mC(r,o,a,l,u)}(this.localStore,this.datastore,t.asyncQueue,i=>XR(this.syncEngine,i,0),function(){return y_.D()?new y_:new cC}())}createSyncEngine(t,i){return function(o,a,l,u,f,m,v){let E=new IC(o,a,l,u,f,m);return v&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return T(this,null,function*(){var t,i;yield function(o){return T(this,null,function*(){let a=ke(o);_e("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield jh(a),a.k_.shutdown(),a.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Rh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var TC=class{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=bn.UNAUTHENTICATED,this.clientId=r_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,a=>T(this,null,function*(){_e("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(_e("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=QC(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function iI(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),_e("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>T(this,null,function*(){i.isEqual(r)||(yield UO(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function nO(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield CH(n);_e("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>QR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>QR(e.remoteStore,r)),n._onlineComponents=e})}function CH(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield iI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Ql("Error using user provided cache. Falling back to memory cache: "+t),yield iI(n,new tO)}}else _e("FirestoreClient","Using default OfflineComponentProvider"),yield iI(n,new tO);return n._offlineComponents})}function ek(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e("FirestoreClient","Using user provided OnlineComponentProvider"),yield nO(n,n._uninitializedComponentsProvider._online)):(_e("FirestoreClient","Using default OnlineComponentProvider"),yield nO(n,new IH))),n._onlineComponents})}function TH(n){return ek(n).then(e=>e.syncEngine)}function D_(n){return T(this,null,function*(){let e=yield ek(n),t=e.eventManager;return t.onListen=uH.bind(null,e.syncEngine),t.onUnlisten=fH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pH.bind(null,e.syncEngine),t})}function SH(n,e,t={}){let i=new hr;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(o,a,l,u,f){let m=new Rh({next:E=>{m.Za(),a.enqueueAndForget(()=>JC(o,v));let b=E.docs.has(l);!b&&E.fromCache?f.reject(new ae(q.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&E.fromCache&&u&&u.source==="server"?f.reject(new ae(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),v=new Ph(B_(l.path),m,{includeMetadataChanges:!0,_a:!0});return YC(o,v)}(yield D_(n),n.asyncQueue,e,t,i)})),i.promise}function DH(n,e,t={}){let i=new hr;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(o,a,l,u,f){let m=new Rh({next:E=>{m.Za(),a.enqueueAndForget(()=>JC(o,v)),E.fromCache&&u.source==="server"?f.reject(new ae(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),v=new Ph(l,m,{includeMetadataChanges:!0,_a:!0});return YC(o,v)}(yield D_(n),n.asyncQueue,e,t,i)})),i.promise}function tk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var iO=new Map;function nk(n,e,t){if(!t)throw new ae(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AH(n,e,t,i){if(e===!0&&i===!0)throw new ae(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rO(n){if(!Ce.isDocumentKey(n))throw new ae(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oO(n){if(Ce.isDocumentKey(n))throw new ae(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function q_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function Hi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=q_(n);throw new ae(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function MH(n,e){if(e<=0)throw new ae(q.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var A_=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ru=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new rI;switch(i.type){case"firstParty":return new cI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=iO.get(t);i&&(_e("ComponentProvider","Removing Datastore"),iO.delete(t),i.terminate())}(this),Promise.resolve()}};function ik(n,e,t,i={}){var r;let o=(n=Hi(n,ru))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=bn.MOCK_USER;else{l=nP(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new ae(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new bn(f)}n._authCredentials=new oI(new i_(l,u))}}var Yr=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$n=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Bs=class n extends Yr{constructor(e,t,i){super(e,t,B_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Ce(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function rk(n,e,...t){if(n=Wt(n),nk("collection","path",e),n instanceof ru){let i=Bt.fromString(e,...t);return oO(i),new Bs(n,null,i)}{if(!(n instanceof $n||n instanceof Bs))throw new ae(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Bt.fromString(e,...t));return oO(i),new Bs(n.firestore,null,i)}}function tT(n,e,...t){if(n=Wt(n),arguments.length===1&&(e=r_.newId()),nk("doc","path",e),n instanceof ru){let i=Bt.fromString(e,...t);return rO(i),new $n(n,null,new Ce(i))}{if(!(n instanceof $n||n instanceof Bs))throw new ae(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Bt.fromString(e,...t));return rO(i),new $n(n.firestore,n instanceof Bs?n.converter:null,new Ce(i))}}var M_=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new w_(this,"async_queue_retry"),this.Vu=()=>{let i=nI();i&&_e("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=nI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=nI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new hr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return T(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Uh(e))throw e;_e("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw zo("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=gC.createAndSchedule(this,e,t,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&Ae()}verifyOperationInProgress(){}wu(){return T(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function sO(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Jr=class extends ru{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new M_,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new M_(e),this._firestoreClient=void 0,yield e}})}};function ok(n,e){let t=typeof n=="object"?n:Ll(),i=typeof n=="string"?n:e||"(default)",r=rh(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=tP("firestore");o&&ik(r,...o)}return r}function G_(n){if(n._terminated)throw new ae(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xH(n),n._firestoreClient}function xH(n){var e,t,i;let r=n._freezeSettings(),o=function(l,u,f,m){return new fI(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,tk(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new TC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(l){let u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}}(n._componentsProvider))}var Oh=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(On.fromBase64String(e))}catch(t){throw new ae(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ou=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ei(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gs=class{constructor(e){this._methodName=e}};var kh=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}};var Nh=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}};var PH=/^__.*__$/,SC=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms):new cc(e,this.data,t,this.fieldTransforms)}},x_=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function sk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}var P_=class n{constructor(e,t,i,r,o,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return O_(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sk(this.Cu)&&PH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},DC=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||z_(e)}Qu(e,t,i,r=!1){return new P_({Cu:e,methodName:t,qu:i,path:Ei.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function W_(n){let e=n._freezeSettings(),t=z_(n._databaseId);return new DC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RH(n,e,t,i,r,o={}){let a=n.Qu(o.merge||o.mergeFields?2:0,e,t,r);nT("Data must be an object, but it was:",a,i);let l=lk(i,a),u,f;if(o.merge)u=new $i(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let v of o.mergeFields){let E=PC(e,v,t);if(!a.contains(E))throw new ae(q.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);dk(m,E)||m.push(E)}u=new $i(m),f=a.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,f=a.fieldTransforms;return new SC(new bi(l),u,f)}var R_=class n extends Gs{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function ak(n,e,t){return new P_({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var AC=class n extends Gs{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=ak(this,e,!0),i=this.Ku.map(o=>dc(o,t)),r=new $s(i);return new Th(e.path,r)}isEqual(e){return e instanceof n&&Oo(this.Ku,e.Ku)}},MC=class n extends Gs{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=ak(this,e,!0),i=this.Ku.map(o=>dc(o,t)),r=new Hs(i);return new Th(e.path,r)}isEqual(e){return e instanceof n&&Oo(this.Ku,e.Ku)}},xC=class n extends Gs{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new ac(e.serializer,TO(e.serializer,this.$u));return new Th(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function OH(n,e,t,i){let r=n.Qu(1,e,t);nT("Data must be an object, but it was:",r,i);let o=[],a=bi.empty();lc(i,(u,f)=>{let m=iT(e,u,t);f=Wt(f);let v=r.Nu(m);if(f instanceof R_)o.push(m);else{let E=dc(f,v);E!=null&&(o.push(m),a.set(m,E))}});let l=new $i(o);return new x_(a,l,r.fieldTransforms)}function kH(n,e,t,i,r,o){let a=n.Qu(1,e,t),l=[PC(e,i,t)],u=[r];if(o.length%2!=0)throw new ae(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)l.push(PC(e,o[E])),u.push(o[E+1]);let f=[],m=bi.empty();for(let E=l.length-1;E>=0;--E)if(!dk(f,l[E])){let b=l[E],M=u[E];M=Wt(M);let k=a.Nu(b);if(M instanceof R_)f.push(b);else{let N=dc(M,k);N!=null&&(f.push(b),m.set(b,N))}}let v=new $i(f);return new x_(m,v,a.fieldTransforms)}function ck(n,e,t,i=!1){return dc(t,n.Qu(i?4:3,e))}function dc(n,e){if(uk(n=Wt(n)))return nT("Unsupported field value:",e,n),lk(n,e);if(n instanceof Gs)return function(i,r){if(!sk(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){let o=[],a=0;for(let l of i){let u=dc(l,r.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(n,e)}return function(i,r){if((i=Wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Ht.fromDate(i);return{timestampValue:g_(r.serializer,o)}}if(i instanceof Ht){let o=new Ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:g_(r.serializer,o)}}if(i instanceof kh)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Oh)return{bytesValue:OO(r.serializer,i._byteString)};if(i instanceof $n){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qC(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Nh)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return HC(l.serializer,u)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${q_(i)}`)}(n,e)}function lk(n,e){let t={};return uO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lc(n,(i,r)=>{let o=dc(r,e.Mu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function uk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof kh||n instanceof Oh||n instanceof $n||n instanceof Gs||n instanceof Nh)}function nT(n,e,t){if(!uk(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=q_(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function PC(n,e,t){if((e=Wt(e))instanceof ou)return e._internalPath;if(typeof e=="string")return iT(n,e);throw O_("Field path arguments must be of type string or ",n,!1,void 0,t)}var NH=new RegExp("[~\\*/\\[\\]]");function iT(n,e,t){if(e.search(NH)>=0)throw O_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ou(...e.split("."))._internalPath}catch{throw O_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function O_(n,e,t,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new ae(q.INVALID_ARGUMENT,l+n+u)}function dk(n,e){return n.some(t=>t.isEqual(e))}var Lh=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new RC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(K_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},RC=class extends Lh{data(){return super.data()}};function K_(n,e){return typeof e=="string"?iT(n,e):e instanceof ou?e._internalPath:e._delegate._internalPath}function hk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fh=class{},su=class extends Fh{};function fk(n,e,...t){let i=[];e instanceof Fh&&i.push(e),i=i.concat(t),function(o){let a=o.filter(u=>u instanceof OC).length,l=o.filter(u=>u instanceof k_).length;if(a>1||a>0&&l>0)throw new ae(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var k_=class n extends su{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return vk(e._query,t),new Yr(e.firestore,e.converter,SI(e._query,t))}_parse(e){let t=W_(e.firestore);return function(o,a,l,u,f,m,v){let E;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ae(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){cO(v,m);let b=[];for(let M of v)b.push(aO(u,o,M));E={arrayValue:{values:b}}}else E=aO(u,o,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||cO(v,m),E=ck(l,a,v,m==="in"||m==="not-in");return rn.create(f,m,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function pk(n,e,t){let i=e,r=K_("where",n);return k_._create(r,i,t)}var OC=class n extends Fh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:pr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,o){let a=r,l=o.getFlattenedFilters();for(let u of l)vk(a,u),a=SI(a,u)}(e._query,t),new Yr(e.firestore,e.converter,SI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var kC=class n extends su{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,o,a){if(r.startAt!==null)throw new ae(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ae(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sc(o,a)}(e._query,this._field,this._direction);return new Yr(e.firestore,e.converter,function(r,o){let a=r.explicitOrderBy.concat([o]);return new Ho(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function mk(n,e="asc"){let t=e,i=K_("orderBy",n);return kC._create(i,t)}var NC=class n extends su{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new Yr(e.firestore,e.converter,d_(e._query,this._limit,this._limitType))}};function gk(n){return MH("limit",n),NC._create("limit",n,"F")}var LC=class n extends su{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=LH(e,this.type,this._docOrFields,this._inclusive);return new Yr(e.firestore,e.converter,function(r,o){return new Ho(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,t))}};function _k(...n){return LC._create("startAfter",n,!1)}function LH(n,e,t,i){if(t[0]=Wt(t[0]),t[0]instanceof Lh)return function(o,a,l,u,f){if(!u)throw new ae(q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);let m=[];for(let v of Wl(o))if(v.field.isKeyField())m.push(l_(a,u.key));else{let E=u.data.field(v.field);if(V_(E))throw new ae(q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){let b=v.field.canonicalString();throw new ae(q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}m.push(E)}return new js(m,f)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=W_(n.firestore);return function(a,l,u,f,m,v){let E=a.explicitOrderBy;if(m.length>E.length)throw new ae(q.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let b=[];for(let M=0;M<m.length;M++){let k=m[M];if(E[M].field.isKeyField()){if(typeof k!="string")throw new ae(q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof k}`);if(!$C(a)&&k.indexOf("/")!==-1)throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${k}' contains a slash.`);let N=a.path.child(Bt.fromString(k));if(!Ce.isDocumentKey(N))throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let G=new Ce(N);b.push(l_(l,G))}else{let N=ck(u,f,k);b.push(N)}}return new js(b,v)}(n._query,n.firestore._databaseId,r,e,t,i)}}function aO(n,e,t){if(typeof(t=Wt(t))=="string"){if(t==="")throw new ae(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$C(e)&&t.indexOf("/")!==-1)throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Bt.fromString(t));if(!Ce.isDocumentKey(i))throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return l_(n,new Ce(i))}if(t instanceof $n)return l_(n,t._key);throw new ae(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${q_(t)}.`)}function cO(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vk(n,e){let t=function(r,o){for(let a of r)for(let l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var FC=class{convertValue(e,t="none"){switch(oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return lc(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,r;let o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>Vt(a.doubleValue));return new Nh(o)}convertGeoPoint(e){return new kh(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=BC(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ih(e));default:return null}}convertTimestamp(e){let t=$o(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Bt.fromString(e);bt(BO(i));let r=new c_(i.get(1),i.get(3)),o=new Ce(i.popFirst(5));return r.isEqual(t)||zo(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function FH(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var nc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},N_=class extends Lh{constructor(e,t,i,r,o,a){super(e,t,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(K_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Zl=class extends N_{data(e={}){return super.data(e)}},L_=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Zl(this._firestore,this._userDataWriter,i.key,i,new nc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{let u=new Zl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new nc(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{let u=new Zl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new nc(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:VH(l.type),doc:u,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function VH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}function yk(n){n=Hi(n,$n);let e=Hi(n.firestore,Jr);return SH(G_(e),n._key).then(t=>Tk(e,n,t))}var Vh=class extends FC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oh(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}};function wk(n){n=Hi(n,Yr);let e=Hi(n.firestore,Jr),t=G_(e),i=new Vh(e);return hk(n._query),DH(t,n._query).then(r=>new L_(e,i,n,r))}function bk(n,e,t,...i){n=Hi(n,$n);let r=Hi(n.firestore,Jr),o=W_(r),a;return a=typeof(e=Wt(e))=="string"||e instanceof ou?kH(o,"updateDoc",n._key,e,t,i):OH(o,"updateDoc",n._key,e),rT(r,[a.toMutation(n._key,jo.exists(!0))])}function Ek(n){return rT(Hi(n.firestore,Jr),[new Sh(n._key,jo.none())])}function Ik(n,e){let t=Hi(n.firestore,Jr),i=tT(n),r=FH(n.converter,e);return rT(t,[RH(W_(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,jo.exists(!1))]).then(()=>i)}function Ck(n,...e){var t,i,r;n=Wt(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||sO(e[a])||(o=e[a],a++);let l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sO(e[a])){let v=e[a];e[a]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[a+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[a+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let u,f,m;if(n instanceof $n)f=Hi(n.firestore,Jr),m=B_(n._key.path),u={next:v=>{e[a]&&e[a](Tk(f,n,v))},error:e[a+1],complete:e[a+2]};else{let v=Hi(n,Yr);f=Hi(v.firestore,Jr),m=v._query;let E=new Vh(f);u={next:b=>{e[a]&&e[a](new L_(f,E,v,b))},error:e[a+1],complete:e[a+2]},hk(n._query)}return function(E,b,M,k){let N=new Rh(k),G=new Ph(b,N,M);return E.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return YC(yield D_(E),G)})),()=>{N.Za(),E.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return JC(yield D_(E),G)}))}}(G_(f),m,l,u)}function rT(n,e){return function(i,r){let o=new hr;return i.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return mH(yield TH(i),r,o)})),o.promise}(G_(n),e)}function Tk(n,e,t){let i=t.docs.get(e._key),r=new Vh(n);return new N_(n,r,e._key,i,new nc(t.hasPendingWrites,t.fromCache),e.converter)}function Sk(...n){return new AC("arrayUnion",n)}function Dk(...n){return new MC("arrayRemove",n)}function Ak(n){return new xC("increment",n)}(function(e,t=!0){(function(r){au=r})(Os),Rs(new zi("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),l=new Jr(new sI(i.getProvider("auth-internal")),new uI(i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ae(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new c_(f.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),cn(MR,"4.7.3",e),cn(MR,"4.7.3","esm2017")})();var hc=class{constructor(e){return e}},Mk="firestore",oT=class{constructor(){return oh(Mk)}};var sT=new de("angularfire2.firestore-instances");function BH(n,e){let t=Ag(Mk,n,e);return t&&new hc(t)}function UH(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new hc(i)}}var jH={provide:oT,deps:[[new Mn,sT]]},zH={provide:hc,useFactory:BH,deps:[[new Mn,sT],No]};function xk(n,...e){return cn("angularfire",Za.full,"fst"),rr([zH,jH,{provide:sT,useFactory:UH(n),multi:!0,deps:[ct,Cn,Bl,Qa,[new Mn,mh],[new Mn,Vl],...e]}])}var Pk=Nt(Ik,!0);var aT=Nt(Dk,!0),cT=Nt(Sk,!0);var lu=Nt(rk,!0);var Rk=Nt(Ek,!0);var fc=Nt(tT,!0);var Ok=Nt(yk,!0);var Z_=Nt(wk,!0);var kk=Nt(ok,!0);var Q_=Nt(Ak,!0);var Y_=Nt(gk,!0);var Nk=Nt(Ck,!0);var $h=Nt(mk,!0);var uu=Nt(fk,!0);var Lk=Nt(_k,!0);var pc=Nt(bk,!0);var Fk=Nt(pk,!0);var Hh={production:!1,firebase:{apiKey:"AIzaSyA9H-CYGk2kEsfzKyFMA6cdPQRRQMf750M",authDomain:"bengaluru-swada-1ecca.firebaseapp.com",projectId:"bengaluru-swada-1ecca",storageBucket:"bengaluru-swada-1ecca.firebasestorage.app",messagingSenderId:"831575973864",appId:"1:831575973864:web:8ba5a2fa1e28b9e16bce5d",measurementId:"G-DEZTYKDN53"},cloudflare:{workerUrl:"https://r2-video-uploader.bengaluru-swada.workers.dev",cdnUrl:"https://r2-video-uploader.bengaluru-swada.workers.dev",bucketName:"bengaluru-swada-videos"}};var mc=class{hasShownSplash=!1;markSplashShown(){this.hasShownSplash=!0}shouldShowSplash(){return!this.hasShownSplash}reset(){this.hasShownSplash=!1}},gc=()=>{let n=Q(lt);return Q(mc).shouldShowSplash()?(console.log("[SplashGuard] Redirecting to splash screen"),n.createUrlTree(["/"])):!0};var J_=class n{constructor(e,t,i){this.router=e;this.auth=t;this.appInit=i}minSplashDuration=3e3;splashStartTime=0;authUnsubscribe;ngOnInit(){this.splashStartTime=Date.now(),console.log("[Splash] Splash screen started at:",new Date().toISOString()),this.authUnsubscribe=TR(this.auth,e=>{let t=Date.now()-this.splashStartTime,i=Math.max(0,this.minSplashDuration-t);console.log(`[Splash] Auth checked. Elapsed: ${t}ms, Waiting additional: ${i}ms`),setTimeout(()=>{this.appInit.markSplashShown(),e?(console.log("[Splash] User is logged in:",e.uid),this.router.navigate(["/main-app"],{replaceUrl:!0})):(console.log("[Splash] User is not logged in, navigating to phone-input"),this.router.navigate(["/phone-input"],{replaceUrl:!0}))},i)})}ngOnDestroy(){this.authUnsubscribe&&this.authUnsubscribe()}static \u0275fac=function(t){return new(t||n)(oe(lt),oe(St),oe(mc))};static \u0275cmp=_t({type:n,selectors:[["app-splash"]],standalone:!0,features:[vt],decls:2,vars:0,consts:[[1,"splash-container"],["src","logo.jpg","alt","Bengaluru Swada Logo",1,"splash-logo"]],template:function(t,i){t&1&&(C(0,"div",0),ne(1,"img",1),D())},dependencies:[Tt],styles:[".splash-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#fff}.splash-logo[_ngcontent-%COMP%]{max-width:80%;max-height:50vh;object-fit:contain;animation:_ngcontent-%COMP%_fadeIn 1.5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}"]})};var qk=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(oe(ka),oe(sr))}}static{this.\u0275dir=Tn({type:n})}}return n})(),Gk=(()=>{class n extends qk{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275dir=Tn({type:n,features:[Or]})}}return n})(),mT=new de("");var qH={provide:mT,useExisting:_o(()=>Jn),multi:!0};function GH(){let n=So()?So().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var WH=new de(""),Jn=(()=>{class n extends qk{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!GH())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(oe(ka),oe(sr),oe(WH,8))}}static{this.\u0275dir=Tn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&se("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[La([qH]),Or]})}}return n})();function lT(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function KH(n){return n!=null&&typeof n.length=="number"}var iv=new de(""),ZH=new de("");function QH(n){return e=>{if(lT(e.value)||lT(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function YH(n){return e=>KH(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function JH(n){if(!n)return uT;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(lT(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function uT(n){return null}function Wk(n){return n!=null}function Kk(n){return Fa(n)?xt(n):n}function Zk(n){let e={};return n.forEach(t=>{e=t!=null?Y(Y({},e),t):e}),Object.keys(e).length===0?null:e}function Qk(n,e){return e.map(t=>t(n))}function XH(n){return!n.validate}function Yk(n){return n.map(e=>XH(e)?e:t=>e.validate(t))}function eq(n){if(!n)return null;let e=n.filter(Wk);return e.length==0?null:function(t){return Zk(Qk(t,e))}}function Jk(n){return n!=null?eq(Yk(n)):null}function tq(n){if(!n)return null;let e=n.filter(Wk);return e.length==0?null:function(t){let i=Qk(t,e).map(Kk);return Kv(i).pipe(Me(Zk))}}function Xk(n){return n!=null?tq(Yk(n)):null}function Vk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nq(n){return n._rawValidators}function iq(n){return n._rawAsyncValidators}function dT(n){return n?Array.isArray(n)?n:[n]:[]}function ev(n,e){return Array.isArray(n)?n.includes(e):n===e}function Bk(n,e){let t=dT(e);return dT(n).forEach(r=>{ev(t,r)||t.push(r)}),t}function Uk(n,e){return dT(e).filter(t=>!ev(n,t))}var tv=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Jk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Xk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},hT=class extends tv{get formDirective(){return null}get path(){return null}},Zh=class extends tv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},fT=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},rq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ere=Oe(Y({},rq),{"[class.ng-submitted]":"isSubmitted"}),qi=(()=>{class n extends fT{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(oe(Zh,2))}}static{this.\u0275dir=Tn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ze("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Or]})}}return n})();var qh="VALID",X_="INVALID",du="PENDING",Gh="DISABLED",fu=class{},nv=class extends fu{constructor(e,t){super(),this.value=e,this.source=t}},Wh=class extends fu{constructor(e,t){super(),this.pristine=e,this.source=t}},Kh=class extends fu{constructor(e,t){super(),this.touched=e,this.source=t}},hu=class extends fu{constructor(e,t){super(),this.status=e,this.source=t}};function oq(n){return(rv(n)?n.validators:n)||null}function sq(n){return Array.isArray(n)?Jk(n):n||null}function aq(n,e){return(rv(e)?e.asyncValidators:n)||null}function cq(n){return Array.isArray(n)?Xk(n):n||null}function rv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var pT=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ym(()=>this.statusReactive()),this.statusReactive=fm(void 0),this._pristine=ym(()=>this.pristineReactive()),this.pristineReactive=fm(!0),this._touched=ym(()=>this.touchedReactive()),this.touchedReactive=fm(!1),this._events=new mn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Es(this.statusReactive)}set status(e){Es(()=>this.statusReactive.set(e))}get valid(){return this.status===qh}get invalid(){return this.status===X_}get pending(){return this.status==du}get disabled(){return this.status===Gh}get enabled(){return this.status!==Gh}get pristine(){return Es(this.pristineReactive)}set pristine(e){Es(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Es(this.touchedReactive)}set touched(e){Es(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Bk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Uk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Uk(e,this._rawAsyncValidators))}hasValidator(e){return ev(this._rawValidators,e)}hasAsyncValidator(e){return ev(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Oe(Y({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Kh(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Kh(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Oe(Y({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Wh(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Wh(!0,i))}markAsPending(e={}){this.status=du;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hu(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Oe(Y({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Gh,this.errors=null,this._forEachChild(r=>{r.disable(Oe(Y({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nv(this.value,i)),this._events.next(new hu(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Oe(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qh,this._forEachChild(i=>{i.enable(Oe(Y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Oe(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qh||this.status===du)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nv(this.value,t)),this._events.next(new hu(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Oe(Y({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gh:qh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=du,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=Kk(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new hu(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?Gh:this.errors?X_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(du)?du:this._anyControlsHaveStatus(X_)?X_:qh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Wh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Kh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=sq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=cq(this._rawAsyncValidators)}};var eN=new de("CallSetDisabledState",{providedIn:"root",factory:()=>gT}),gT="always";function lq(n,e){return[...e.path,n]}function uq(n,e,t=gT){hq(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),fq(n,e),mq(n,e),pq(n,e),dq(n,e)}function jk(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dq(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function hq(n,e){let t=nq(n);e.validator!==null?n.setValidators(Vk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=iq(n);e.asyncValidator!==null?n.setAsyncValidators(Vk(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();jk(e._rawValidators,r),jk(e._rawAsyncValidators,r)}function fq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&tN(n,e)})}function pq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&tN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function tN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mq(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function gq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function _q(n){return Object.getPrototypeOf(n.constructor)===Gk}function vq(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Jn?t=o:_q(o)?i=o:r=o}),r||i||t||null}function zk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $k(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var yq=class extends pT{constructor(e=null,t,i){super(oq(t),aq(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rv(t)&&(t.nonNullable||t.initialValueIsDefault)&&($k(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){$k(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var wq={provide:Zh,useExisting:_o(()=>Ci)},Hk=Promise.resolve(),Ci=(()=>{class n extends Zh{constructor(t,i,r,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new yq,this._registered=!1,this.name="",this.update=new Qe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=vq(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),gq(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Hk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Va(i);Hk.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?lq(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(oe(hT,9),oe(iv,10),oe(ZH,10),oe(mT,10),oe(fi,8),oe(eN,8))}}static{this.\u0275dir=Tn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[La([wq]),Or,ki]})}}return n})();var bq={provide:mT,useExisting:_o(()=>_T),multi:!0},_T=(()=>{class n extends Gk{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275dir=Tn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&se("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[La([bq]),Or]})}}return n})();function Eq(n){return typeof n=="number"?n:parseInt(n,10)}function Iq(n){return typeof n=="number"?n:parseFloat(n)}var vT=(()=>{class n{constructor(){this._validator=uT}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):uT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Tn({type:n,features:[ki]})}}return n})();var Cq={provide:iv,useExisting:_o(()=>yT),multi:!0},yT=(()=>{class n extends vT{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>Iq(t),this.createValidator=t=>QH(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275dir=Tn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&kr("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[La([Cq]),Or]})}}return n})();var Tq={provide:iv,useExisting:_o(()=>Qh),multi:!0},Qh=(()=>{class n extends vT{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>Eq(t),this.createValidator=t=>YH(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275dir=Tn({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&kr("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[La([Tq]),Or]})}}return n})(),Sq={provide:iv,useExisting:_o(()=>wT),multi:!0},wT=(()=>{class n extends vT{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>JH(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=wo(n)))(r||n)}})()}static{this.\u0275dir=Tn({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&kr("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[La([Sq]),Or]})}}return n})();var Dq=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Pr({type:n})}static{this.\u0275inj=xr({})}}return n})();var Xn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:eN,useValue:t.callSetDisabledState??gT}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Pr({type:n})}static{this.\u0275inj=xr({imports:[Dq]})}}return n})();var mu=class n{constructor(e){this.auth=e}confirmationResult=null;phoneNumber="";sendOtp(e,t){return T(this,null,function*(){try{let i=yield SR(this.auth,e,t);return this.setConfirmationResult(i),this.setPhoneNumber(e),i}catch(i){throw i}})}setConfirmationResult(e){this.confirmationResult=e}getConfirmationResult(){return this.confirmationResult}setPhoneNumber(e){this.phoneNumber=e}getPhoneNumber(){return this.phoneNumber}static \u0275fac=function(t){return new(t||n)(ge(St))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};function Aq(n,e){if(n&1&&(C(0,"div",14)(1,"span"),H(2),D()()),n&2){let t=fe();U(2),it("\u26A0\uFE0F ",t.error,"")}}function Mq(n,e){n&1&&(C(0,"span"),H(1,"Continue"),D())}function xq(n,e){n&1&&(C(0,"span",15),H(1,"Sending OTP..."),D())}var ov=class n{constructor(e,t,i){this.router=e;this.auth=t;this.phoneAuthService=i}mobile="";valid=!1;loading=!1;error="";recaptchaVerifier;confirmationResult;ngOnInit(){setTimeout(()=>{this.recaptchaVerifier=new Xa(this.auth,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA success"),"expired-callback":()=>this.error="ReCAPTCHA expired. Try again."}),this.recaptchaVerifier.render()})}onInput(){this.valid=/^\d{10}$/.test(this.mobile),this.error=""}continue(){return T(this,null,function*(){if(!(!this.valid||this.loading)){this.loading=!0,this.error="";try{let e="+91"+this.mobile;this.confirmationResult=yield this.phoneAuthService.sendOtp(e,this.recaptchaVerifier),this.router.navigate(["/otp"])}catch(e){console.error(e),e.code==="auth/invalid-phone-number"?this.error="Invalid phone number.":e.code==="auth/too-many-requests"?this.error="Too many attempts. Try again later.":e.code==="auth/quota-exceeded"?this.error="SMS quota exceeded.":e.code==="auth/billing-not-enabled"?this.error="Firebase billing is not enabled. Please enable it in the Firebase Console.":this.error=`Failed to send OTP: ${e.message} (${e.code})`,this.loading=!1}}})}static \u0275fac=function(t){return new(t||n)(oe(lt),oe(St),oe(mu))};static \u0275cmp=_t({type:n,selectors:[["app-phone-input"]],standalone:!0,features:[vt],decls:18,vars:8,consts:[[1,"phone-input-page"],[1,"mobile-input-section"],[1,"mobile-form"],[1,"welcome-text"],[1,"subtitle","light-grey"],[1,"input-container"],[1,"country-code"],["type","tel","id","mobileNumber","placeholder","Enter your mobile number","maxlength","10","pattern","[0-9]{10}",3,"ngModelChange","input","ngModel","disabled"],["class","error-message",4,"ngIf"],[1,"continue-btn",3,"click","disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"privacy-text","light-grey"],["id","recaptcha-container"],[1,"error-message"],[1,"loading-spinner"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),H(4,"Welcome to Bengaluru Swada!"),D(),C(5,"p",4),H(6," Enter your mobile number to discover amazing street food near you "),D(),C(7,"div",5)(8,"div",6),H(9,"+91"),D(),C(10,"input",7),_n("ngModelChange",function(o){return Sn(i.mobile,o)||(i.mobile=o),o}),se("input",function(){return i.onInput()}),D()(),Pe(11,Aq,3,1,"div",8),C(12,"button",9),se("click",function(){return i.continue()}),Pe(13,Mq,2,0,"span",10)(14,xq,2,0,"span",11),D(),C(15,"p",12),H(16," We'll send you an OTP to verify your number. Your privacy is important to us. "),D(),ne(17,"div",13),D()()()),t&2&&(U(10),gn("ngModel",i.mobile),X("disabled",i.loading),U(),X("ngIf",i.error),U(),Ze("active",i.valid&&!i.loading),X("disabled",!i.valid||i.loading),U(),X("ngIf",!i.loading),U(),X("ngIf",i.loading))},dependencies:[Tt,Xt,Xn,Jn,qi,Qh,wT,Ci],styles:[".mobile-input-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1rem}.welcome-text[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-bottom:1rem}.mobile-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:2rem;line-height:1.5}.input-container[_ngcontent-%COMP%]{display:flex;background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;overflow:hidden;margin:2rem 0}.country-code[_ngcontent-%COMP%]{padding:1rem;border-right:1px solid #e9ecef;font-weight:600}#mobileNumber[_ngcontent-%COMP%]{flex:1;padding:1rem;border:none;outline:none;font-size:1.1rem;background:transparent}#mobileNumber[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#fee;border:1px solid #fcc;border-radius:8px;padding:.75rem 1rem;margin-bottom:1rem;color:#c33;font-size:.9rem;text-align:left}#recaptcha-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1.5rem 0;min-height:78px}.continue-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;font-weight:600;border-radius:12px;border:none;background:#dee2e6;color:#6c757d;margin-bottom:20px;cursor:pointer;transition:all .2s;font-size:1rem}.continue-btn.active[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;box-shadow:0 4px 15px #ff6b354d;transform:translateY(-1px)}.continue-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.privacy-text[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.4}.light-grey[_ngcontent-%COMP%]{color:#6c757d}"]})};var Pq=()=>[0,1,2,3,4,5];function Rq(n,e){if(n&1){let t=pt();C(0,"input",15),_n("ngModelChange",function(r){let o=ye(t).index,a=fe();return Sn(a.otp[o],r)||(a.otp[o]=r),we(r)}),se("input",function(){let r=ye(t).index,o=fe();return we(o.onOtpInput(r))}),D()}if(n&2){let t=e.index,i=fe();Ze("error-border",i.hasError),gn("ngModel",i.otp[t])}}function Oq(n,e){if(n&1&&(C(0,"p",16),H(1,"Resend in "),C(2,"span",17),H(3),D()()),n&2){let t=fe();U(3),it("",t.countdown,"s")}}function kq(n,e){if(n&1){let t=pt();C(0,"p",18),se("click",function(){ye(t);let r=fe();return we(r.resend())}),H(1,"Resend OTP"),D()}}function Nq(n,e){n&1&&(C(0,"div",19)(1,"div",20)(2,"div",21),ne(3,"div",22),D(),C(4,"h2"),H(5,"Verified!"),D()()())}var sv=class n{constructor(e,t,i,r){this.router=e;this.cdr=t;this.phoneAuthService=i;this.auth=r;this.phone=this.phoneAuthService.getPhoneNumber(),this.confirmationResult=this.phoneAuthService.getConfirmationResult(),this.confirmationResult||this.router.navigate(["/phone-input"])}phone="";back=new Qe;verified=new Qe;otp=["","","","","",""];countdown=30;timerHandle;complete=!1;loading=!1;error="";confirmationResult=null;hasError=!1;isVerified=!1;recaptchaVerifier;ngOnInit(){this.startTimer(),setTimeout(()=>{this.recaptchaVerifier||(this.recaptchaVerifier=new Xa(this.auth,"recaptcha-container-otp",{size:"invisible",callback:()=>{}}))})}startTimer(){clearInterval(this.timerHandle),this.countdown=30,this.timerHandle=setInterval(()=>{this.countdown>0?this.countdown--:clearInterval(this.timerHandle),this.cdr.detectChanges()},1e3)}onOtpInput(e){if(this.complete=this.otp.join("").length===6&&/^\d{6}$/.test(this.otp.join("")),this.error="",this.hasError=!1,this.otp[e]&&e<5){let t=document.querySelectorAll(".otp-input")[e+1];t&&t.focus()}}verify(){return T(this,null,function*(){if(!(!this.complete||this.loading||!this.confirmationResult)){this.loading=!0,this.error="",this.hasError=!1;try{let e=this.otp.join(""),t=yield this.confirmationResult.confirm(e);console.log("User signed in successfully:",t.user),this.isVerified=!0,this.loading=!1,setTimeout(()=>{this.router.navigate(["/location-permission"],{replaceUrl:!0})},2e3)}catch(e){console.error("Error verifying OTP:",e),e.code==="auth/invalid-verification-code"?this.error="Invalid OTP. Please check and try again.":e.code==="auth/code-expired"?this.error="OTP has expired. Please request a new one.":this.error="Verification failed. Please try again.",this.loading=!1,this.hasError=!0,this.otp=["","","","","",""],this.complete=!1}}})}resend(){return T(this,null,function*(){if(!this.loading){this.loading=!0,this.error="";try{console.log("Current stored phone:",this.phone);let e=this.phone;e.startsWith("+")||(e="+91"+e),console.log("Sending OTP to:",e);let t=yield this.phoneAuthService.sendOtp(e,this.recaptchaVerifier);this.confirmationResult=t,this.phoneAuthService.setConfirmationResult(t),this.startTimer(),this.otp=["","","","","",""],this.complete=!1,this.loading=!1}catch(e){console.error("Resend error:",e),this.error="Failed to resend OTP. Try again later.",this.loading=!1}}})}change(){this.router.navigate(["/phone-input"])}static \u0275fac=function(t){return new(t||n)(oe(lt),oe(fi),oe(mu),oe(St))};static \u0275cmp=_t({type:n,selectors:[["app-otp"]],outputs:{back:"back",verified:"verified"},standalone:!0,features:[vt],decls:22,vars:8,consts:[[1,"otp-container"],[1,"otp-section"],[1,"otp-form"],[1,"otp-title"],[1,"otp-subtitle"],[1,"phone-number"],["class","otp-input","type","text","inputmode","numeric","maxlength","1",3,"error-border","ngModel","ngModelChange","input",4,"ngFor","ngForOf"],[1,"verify-btn",3,"click","disabled"],[1,"resend-container"],[1,"resend-text"],["class","timer",4,"ngIf"],["class","resend-link",3,"click",4,"ngIf"],[3,"click"],["id","recaptcha-container-otp"],["class","success-overlay",4,"ngIf"],["type","text","inputmode","numeric","maxlength","1",1,"otp-input",3,"ngModelChange","input","ngModel"],[1,"timer"],[1,"countdown"],[1,"resend-link",3,"click"],[1,"success-overlay"],[1,"success-content"],[1,"checkmark-circle"],[1,"checkmark","draw"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),H(4,"Verify Your Number"),D(),C(5,"p",4),H(6,"We've sent a 6-digit OTP to "),C(7,"span",5),H(8),D()(),C(9,"div",0),Pe(10,Rq,1,3,"input",6),D(),C(11,"button",7),se("click",function(){return i.verify()}),H(12),D(),C(13,"div",8)(14,"p",9),H(15,"Didn't receive OTP?"),D(),Pe(16,Oq,4,1,"p",10)(17,kq,2,0,"p",11),D(),C(18,"div",12),se("click",function(){return i.change()}),H(19,"\u2190 Change Number"),D(),ne(20,"div",13),D()(),Pe(21,Nq,6,0,"div",14),D()),t&2&&(U(8),dt(i.phone),U(2),X("ngForOf",NA(7,Pq)),U(),X("disabled",!i.complete||i.loading),U(),it(" ",i.loading?"Verifying OTP...":"Verify OTP"," "),U(4),X("ngIf",i.countdown>0),U(),X("ngIf",i.countdown===0),U(4),X("ngIf",i.isVerified))},dependencies:[Xn,Jn,qi,Qh,Ci,Tt,Yn,Xt],styles:['.otp-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1rem;background:#fff;font-family:Poppins,sans-serif}.otp-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.otp-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.otp-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin-bottom:2.5rem}.phone-number[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600}.otp-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-bottom:2rem;width:100%}@media (min-width: 400px){.otp-container[_ngcontent-%COMP%]{gap:1rem}}.otp-input[_ngcontent-%COMP%]{width:100%;max-width:45px;aspect-ratio:1;height:auto;border:1px solid #dee2e6;border-radius:12px;text-align:center;font-size:1.2rem;background:#fff;color:#495057;transition:all .2s;box-shadow:0 2px 5px #00000005;padding:0}@media (min-width: 400px){.otp-input[_ngcontent-%COMP%]{max-width:60px;font-size:1.5rem}}.otp-input[_ngcontent-%COMP%]:focus{border-color:#ff6b35;outline:none;box-shadow:0 0 0 3px #ff6b351a}.error-border[_ngcontent-%COMP%]{border-color:red!important;box-shadow:0 0 0 3px #ff00001a!important}.verify-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;border-radius:12px;border:none;background:#dfe4ea;color:#495057;font-size:1rem;font-weight:600;cursor:not-allowed;margin-bottom:2rem;transition:all .2s}.verify-btn[_ngcontent-%COMP%]:not([disabled]){background:#ff6b35;color:#fff;cursor:pointer;box-shadow:0 4px 10px #ff6b354d}.resend-container[_ngcontent-%COMP%]{margin-bottom:2rem;color:#7f8c8d;font-size:.9rem}.resend-text[_ngcontent-%COMP%]{margin-bottom:.3rem;cursor:pointer;font-size:.9rem;transition:color .2s}.resend-text[_ngcontent-%COMP%]:hover{color:#495057}.timer[_ngcontent-%COMP%]{color:#7f8c8d}.timer[_ngcontent-%COMP%]   .countdown[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600}.resend-link[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600;cursor:pointer;text-decoration:underline}.success-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffffff2;display:flex;justify-content:center;align-items:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.success-content[_ngcontent-%COMP%]{text-align:center}.success-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin:1rem 0 .5rem;font-size:2rem}.success-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d}.checkmark-circle[_ngcontent-%COMP%]{width:80px;height:80px;position:relative;display:inline-block;vertical-align:top;border-radius:50%;background-color:#2ecc71;animation:_ngcontent-%COMP%_scaleIn .3s cubic-bezier(.175,.885,.32,1.275) forwards}.checkmark[_ngcontent-%COMP%]:after{content:"";display:block;width:20px;height:40px;border:solid #fff;border-width:0 4px 4px 0;position:absolute;top:16px;left:28px;transform:rotate(45deg);opacity:0;animation:_ngcontent-%COMP%_checkmark .3s ease-out .3s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_checkmark{0%{opacity:0;height:0}to{opacity:1;height:40px}}']})};var Gi=class n{userLocation=null;locationPromise=null;LOCATION_TIMEOUT_MS=5e3;DEFAULT_LOCATION={latitude:12.9352,longitude:77.6245};AREAS=[{name:"Adugodi",pincode:"560030",lat:12.9716,lng:77.5946},{name:"Agaram",pincode:"560007",lat:12.8431,lng:77.4863},{name:"Air Force Stn. Yelahanka",pincode:"560063",lat:13.1048,lng:77.5763},{name:"Banashankari",pincode:"560050",lat:12.925453,lng:77.546761},{name:"Banashankari 2nd Stage",pincode:"560070",lat:12.9249,lng:77.5662},{name:"Banashankari 3rd Stage",pincode:"560085",lat:12.9216,lng:77.5543},{name:"Banashankari 6th Stage",pincode:"560062",lat:12.8963,lng:77.5353},{name:"Banaswadi",pincode:"560043",lat:13.0159,lng:77.6516},{name:"Basavanapura",pincode:"560036",lat:12.9835,lng:77.6773},{name:"Basaveshwaranagar",pincode:"560079",lat:12.9975,lng:77.5334},{name:"Bellandur",pincode:"560103",lat:12.9304,lng:77.6784},{name:"Bidadi",pincode:"562109",lat:12.8274,lng:77.3971},{name:"Bilekahalli",pincode:"560076",lat:12.8989,lng:77.6103},{name:"Binnamangala",pincode:"560038",lat:12.9837,lng:77.6388},{name:"Bommanahalli",pincode:"560068",lat:12.9082,lng:77.6245},{name:"Bommasandra",pincode:"560099",lat:12.8009,lng:77.699},{name:"Brookefield",pincode:"560037",lat:12.9698,lng:77.7184},{name:"BTM 2nd Stage",pincode:"560076",lat:12.9167,lng:77.6108},{name:"Budigere",pincode:"562129",lat:13.035,lng:77.7478},{name:"Byatarayanapura",pincode:"560026",lat:13.056,lng:77.5926},{name:"C V Raman Nagar",pincode:"560093",lat:12.9767,lng:77.6597},{name:"Chamarajpet",pincode:"560018",lat:12.9582,lng:77.5709},{name:"Channasandra",pincode:"560067",lat:12.9629,lng:77.758},{name:"Chikbasavanapura",pincode:"560067",lat:12.9948,lng:77.7327},{name:"Chickpet",pincode:"560053",lat:12.9662,lng:77.5767},{name:"Chikkalasandra",pincode:"560061",lat:12.9132,lng:77.5454},{name:"Choodasandra",pincode:"560099",lat:12.8848,lng:77.6785},{name:"Cox Town",pincode:"560005",lat:12.9996,lng:77.6229},{name:"D J Halli",pincode:"560005",lat:13.0083,lng:77.6228},{name:"Doddabidarakallu",pincode:"560073",lat:13.0426,lng:77.5019},{name:"Doorvaninagar",pincode:"560016",lat:13.0252,lng:77.6688},{name:"Ejipura",pincode:"560047",lat:12.9437,lng:77.6274},{name:"Electronic City",pincode:"560100",lat:12.8394,lng:77.677},{name:"Frazer Town",pincode:"560005",lat:12.999,lng:77.6226},{name:"Gandhi Nagar",pincode:"560009",lat:12.9772,lng:77.573},{name:"Gavipuram Extn",pincode:"560019",lat:12.9552,lng:77.5668},{name:"Geddalahalli",pincode:"560077",lat:13.0309,lng:77.6389},{name:"Gottigere",pincode:"560083",lat:12.8725,lng:77.5944},{name:"Halasur",pincode:"560042",lat:12.9833,lng:77.6194},{name:"Hebbal",pincode:"560024",lat:13.0355,lng:77.606},{name:"Heggere",pincode:"560073",lat:13.0172,lng:77.5004},{name:"HMT Layout",pincode:"560031",lat:13.039,lng:77.547},{name:"Horamavu",pincode:"560043",lat:13.0267,lng:77.6571},{name:"Hosakerehalli",pincode:"560085",lat:12.9251,lng:77.536},{name:"HSR Layout",pincode:"560102",lat:12.9121,lng:77.6446},{name:"Hulimavu",pincode:"560076",lat:12.8829,lng:77.6083},{name:"Indiranagar",pincode:"560038",lat:12.9719,lng:77.6412},{name:"ISRO Layout",pincode:"560078",lat:12.9056,lng:77.5665},{name:"J P Nagar",pincode:"560078",lat:12.9041,lng:77.5852},{name:"Jakkur",pincode:"560064",lat:13.0811,lng:77.5924},{name:"Jalahalli",pincode:"560013",lat:13.0491,lng:77.5422},{name:"Jayanagar 4th T Block",pincode:"560041",lat:12.9352,lng:77.5837},{name:"Jigani",pincode:"560105",lat:12.7849,lng:77.642},{name:"Kadubeesanahalli",pincode:"560103",lat:12.956,lng:77.7026},{name:"Kadugodi",pincode:"560067",lat:12.9968,lng:77.7583},{name:"Kaggadasapura",pincode:"560093",lat:12.9782,lng:77.6801},{name:"Kalasipalyam",pincode:"560002",lat:12.9636,lng:77.5777},{name:"Kalyananagar",pincode:"560043",lat:13.0288,lng:77.6402},{name:"Kamakshipalya",pincode:"560079",lat:12.9829,lng:77.5208},{name:"Kengeri",pincode:"560060",lat:12.9177,lng:77.4822},{name:"Kodichikkanahalli",pincode:"560068",lat:12.8903,lng:77.6239},{name:"Koramangala",pincode:"560095",lat:12.9344,lng:77.6173},{name:"KR Puram",pincode:"560036",lat:13.0022,lng:77.6951},{name:"Kyalasanahalli",pincode:"560077",lat:13.0269,lng:77.6589},{name:"Laggere",pincode:"560058",lat:13.0102,lng:77.5157},{name:"Mahadevapura",pincode:"560048",lat:12.9923,lng:77.6957},{name:"Majestic",pincode:"560009",lat:12.9779,lng:77.572},{name:"Malleshpalya",pincode:"560075",lat:12.9839,lng:77.6702},{name:"Malleshwaram",pincode:"560003",lat:12.9999,lng:77.5715},{name:"Manorayanapalya",pincode:"560032",lat:13.0365,lng:77.5726},{name:"Marathahalli",pincode:"560037",lat:12.9563,lng:77.7019},{name:"Mathikere",pincode:"560054",lat:13.0307,lng:77.5639},{name:"Munnekollal",pincode:"560037",lat:12.9568,lng:77.7045},{name:"Nagarbhavi",pincode:"560072",lat:12.9674,lng:77.5049},{name:"Nayandahalli",pincode:"560039",lat:12.9413,lng:77.5159},{name:"Neelasandra",pincode:"560047",lat:12.9479,lng:77.6236},{name:"Peenya",pincode:"560058",lat:13.0194,lng:77.5153},{name:"Raghuvanahalli",pincode:"560062",lat:12.8821,lng:77.5466},{name:"Rajajinagar",pincode:"560010",lat:12.9989,lng:77.5536},{name:"Ramamurthy Nagar",pincode:"560016",lat:13.0045,lng:77.6797},{name:"RT Nagar",pincode:"560032",lat:13.0266,lng:77.5979},{name:"Sadashivanagar",pincode:"560080",lat:13.0093,lng:77.5772},{name:"Shanti Nagar",pincode:"560027",lat:12.9537,lng:77.5926},{name:"Tavarekere",pincode:"560029",lat:12.931,lng:77.6106},{name:"Varthur",pincode:"560087",lat:12.9352,lng:77.7501},{name:"Vidyaranyapura",pincode:"560097",lat:13.067,lng:77.56}];locationSource=new Gt(null);currentLocation$=this.locationSource.asObservable();updateLocation(e,t,i){this.setUserLocation(t,i),this.locationSource.next({name:e,lat:t,lng:i})}DEFAULT_LOCATION_DATA={name:"Koramangala",lat:12.9352,lng:77.6245};getUserLocation(){return this.userLocation?Promise.resolve(this.userLocation):this.locationPromise?this.locationPromise:(this.locationPromise=new Promise(e=>{let t=!1,i=setTimeout(()=>{t||(t=!0,console.warn("[LocationService] Timeout expired. Using default location."),this.userLocation=this.DEFAULT_LOCATION,e(this.DEFAULT_LOCATION),this.locationPromise=null)},this.LOCATION_TIMEOUT_MS);if(!("geolocation"in navigator)){t||(t=!0,clearTimeout(i),this.userLocation=this.DEFAULT_LOCATION,e(this.DEFAULT_LOCATION));return}navigator.geolocation.getCurrentPosition(r=>{t||(t=!0,clearTimeout(i),this.userLocation={latitude:r.coords.latitude,longitude:r.coords.longitude},e(this.userLocation))},r=>{t||(t=!0,clearTimeout(i),console.warn("[LocationService] Geolocation error, using default. Code:",r.code),this.userLocation=this.DEFAULT_LOCATION,e(this.DEFAULT_LOCATION))},{enableHighAccuracy:!1,timeout:4e3,maximumAge:6e5})}),this.locationPromise)}setUserLocation(e,t){this.userLocation={latitude:e,longitude:t}}calculateDistance(e,t,i,r){let a=this.toRadians(i-e),l=this.toRadians(r-t),u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(i))*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}formatDistance(e){return e<1?`${Math.round(e*1e3)} m`:`${e.toFixed(1)} km`}getDistanceFromUser(e,t){return T(this,null,function*(){let i=yield this.getUserLocation(),r=this.calculateDistance(i.latitude,i.longitude,e,t);return this.formatDistance(r)})}toRadians(e){return e*(Math.PI/180)}clearLocation(){this.userLocation=null}getAreaName(e,t){return this.findNearestArea(e,t)}findNearestArea(e,t){let i="Bangalore",r=1/0;for(let o of this.AREAS){let a=this.calculateDistance(e,t,o.lat,o.lng);a<r&&(r=a,i=o.name)}return i}static \u0275fac=function(t){return new(t||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};var Lq=["searchInput"];function Fq(n,e){if(n&1){let t=pt();C(0,"div",33),se("click",function(){let r=ye(t).$implicit,o=fe(2);return we(o.selectLocation(r))}),C(1,"div",3),Te(),C(2,"svg",34),ne(3,"path",35),D()(),Ue(),C(4,"div",36)(5,"div",37),H(6),D(),C(7,"div",38),H(8),D()(),Te(),C(9,"svg",39),ne(10,"path",40),D()()}if(n&2){let t=e.$implicit;U(6),dt(t.name),U(2),it("Pincode: ",t.pincode,"")}}function Vq(n,e){n&1&&(C(0,"div",41),Te(),C(1,"svg",42),ne(2,"circle",27)(3,"path",28),D(),Ue(),C(4,"p"),H(5,"No locations found"),D(),C(6,"span"),H(7,"Try searching for a different area"),D()())}function Bq(n,e){if(n&1){let t=pt();C(0,"div",19),se("click",function(){ye(t);let r=fe();return we(r.closeLocationModal())}),C(1,"div",20),se("click",function(r){return ye(t),we(r.stopPropagation())}),C(2,"div",21)(3,"h2"),H(4,"Select Location"),D(),C(5,"button",22),se("click",function(){ye(t);let r=fe();return we(r.closeLocationModal())}),Te(),C(6,"svg",23),ne(7,"path",24),D()()(),Ue(),C(8,"div",25),Te(),C(9,"svg",26),ne(10,"circle",27)(11,"path",28),D(),Ue(),C(12,"input",29,0),_n("ngModelChange",function(r){ye(t);let o=fe();return Sn(o.searchQuery,r)||(o.searchQuery=r),we(r)}),D()(),C(14,"div",30),Pe(15,Fq,11,2,"div",31)(16,Vq,8,0,"div",32),D()()()}if(n&2){let t=fe();U(12),gn("ngModel",t.searchQuery),U(3),X("ngForOf",t.filteredLocations),U(),X("ngIf",t.filteredLocations.length===0)}}var av=class n{constructor(e,t){this.router=e;this.locationService=t}searchInput;showLocationModal=!1;searchQuery="";locations=[{name:"Adugodi",pincode:"560030",lat:12.9716,lng:77.5946},{name:"Agaram",pincode:"560007",lat:12.8431,lng:77.4863},{name:"Air Force Stn. Yelahanka",pincode:"560063",lat:13.1048,lng:77.5763},{name:"Banashankari",pincode:"560050",lat:12.925453,lng:77.546761},{name:"Banashankari 2nd Stage",pincode:"560070",lat:12.9249,lng:77.5662},{name:"Banashankari 3rd Stage",pincode:"560085",lat:12.9216,lng:77.5543},{name:"Banashankari 6th Stage",pincode:"560062",lat:12.8963,lng:77.5353},{name:"Banaswadi",pincode:"560043",lat:13.0159,lng:77.6516},{name:"Basavanapura",pincode:"560036",lat:12.9835,lng:77.6773},{name:"Basaveshwaranagar",pincode:"560079",lat:12.9975,lng:77.5334},{name:"Bellandur",pincode:"560103",lat:12.9304,lng:77.6784},{name:"Bidadi",pincode:"562109",lat:12.8274,lng:77.3971},{name:"Bilekahalli",pincode:"560076",lat:12.8989,lng:77.6103},{name:"Binnamangala",pincode:"560038",lat:12.9837,lng:77.6388},{name:"Bommanahalli",pincode:"560068",lat:12.9082,lng:77.6245},{name:"Bommasandra",pincode:"560099",lat:12.8009,lng:77.699},{name:"Brookefield",pincode:"560037",lat:12.9698,lng:77.7184},{name:"BTM 2nd Stage",pincode:"560076",lat:12.9167,lng:77.6108},{name:"Budigere",pincode:"562129",lat:13.035,lng:77.7478},{name:"Byatarayanapura",pincode:"560026",lat:13.056,lng:77.5926},{name:"C V Raman Nagar",pincode:"560093",lat:12.9767,lng:77.6597},{name:"Chamarajpet",pincode:"560018",lat:12.9582,lng:77.5709},{name:"Channasandra",pincode:"560067",lat:12.9629,lng:77.758},{name:"Chikbasavanapura",pincode:"560067",lat:12.9948,lng:77.7327},{name:"Chickpet",pincode:"560053",lat:12.9662,lng:77.5767},{name:"Chikkalasandra",pincode:"560061",lat:12.9132,lng:77.5454},{name:"Choodasandra",pincode:"560099",lat:12.8848,lng:77.6785},{name:"Cox Town",pincode:"560005",lat:12.9996,lng:77.6229},{name:"D J Halli",pincode:"560005",lat:13.0083,lng:77.6228},{name:"Doddabidarakallu",pincode:"560073",lat:13.0426,lng:77.5019},{name:"Doorvaninagar",pincode:"560016",lat:13.0252,lng:77.6688},{name:"Ejipura",pincode:"560047",lat:12.9437,lng:77.6274},{name:"Electronic City",pincode:"560100",lat:12.8394,lng:77.677},{name:"Frazer Town",pincode:"560005",lat:12.999,lng:77.6226},{name:"Gandhi Nagar",pincode:"560009",lat:12.9772,lng:77.573},{name:"Gavipuram Extn",pincode:"560019",lat:12.9552,lng:77.5668},{name:"Geddalahalli",pincode:"560077",lat:13.0309,lng:77.6389},{name:"Gottigere",pincode:"560083",lat:12.8725,lng:77.5944},{name:"Halasur",pincode:"560042",lat:12.9833,lng:77.6194},{name:"Hebbal",pincode:"560024",lat:13.0355,lng:77.606},{name:"Heggere",pincode:"560073",lat:13.0172,lng:77.5004},{name:"HMT Layout",pincode:"560031",lat:13.039,lng:77.547},{name:"Horamavu",pincode:"560043",lat:13.0267,lng:77.6571},{name:"Hosakerehalli",pincode:"560085",lat:12.9251,lng:77.536},{name:"HSR Layout",pincode:"560102",lat:12.9121,lng:77.6446},{name:"Hulimavu",pincode:"560076",lat:12.8829,lng:77.6083},{name:"Indiranagar",pincode:"560038",lat:12.9719,lng:77.6412},{name:"ISRO Layout",pincode:"560078",lat:12.9056,lng:77.5665},{name:"J P Nagar",pincode:"560078",lat:12.9041,lng:77.5852},{name:"Jakkur",pincode:"560064",lat:13.0811,lng:77.5924},{name:"Jalahalli",pincode:"560013",lat:13.0491,lng:77.5422},{name:"Jayanagar 4th T Block",pincode:"560041",lat:12.9352,lng:77.5837},{name:"Jigani",pincode:"560105",lat:12.7849,lng:77.642},{name:"Kadubeesanahalli",pincode:"560103",lat:12.956,lng:77.7026},{name:"Kadugodi",pincode:"560067",lat:12.9968,lng:77.7583},{name:"Kaggadasapura",pincode:"560093",lat:12.9782,lng:77.6801},{name:"Kalasipalyam",pincode:"560002",lat:12.9636,lng:77.5777},{name:"Kalyananagar",pincode:"560043",lat:13.0288,lng:77.6402},{name:"Kamakshipalya",pincode:"560079",lat:12.9829,lng:77.5208},{name:"Kengeri",pincode:"560060",lat:12.9177,lng:77.4822},{name:"Kodichikkanahalli",pincode:"560068",lat:12.8903,lng:77.6239},{name:"Koramangala",pincode:"560095",lat:12.9344,lng:77.6173},{name:"KR Puram",pincode:"560036",lat:13.0022,lng:77.6951},{name:"Kyalasanahalli",pincode:"560077",lat:13.0269,lng:77.6589},{name:"Laggere",pincode:"560058",lat:13.0102,lng:77.5157},{name:"Mahadevapura",pincode:"560048",lat:12.9923,lng:77.6957},{name:"Majestic",pincode:"560009",lat:12.9779,lng:77.572},{name:"Malleshpalya",pincode:"560075",lat:12.9839,lng:77.6702},{name:"Malleshwaram",pincode:"560003",lat:12.9999,lng:77.5715},{name:"Manorayanapalya",pincode:"560032",lat:13.0365,lng:77.5726},{name:"Marathahalli",pincode:"560037",lat:12.9563,lng:77.7019},{name:"Mathikere",pincode:"560054",lat:13.0307,lng:77.5639},{name:"Munnekollal",pincode:"560037",lat:12.9568,lng:77.7045},{name:"Nagarbhavi",pincode:"560072",lat:12.9674,lng:77.5049},{name:"Nayandahalli",pincode:"560039",lat:12.9413,lng:77.5159},{name:"Neelasandra",pincode:"560047",lat:12.9479,lng:77.6236},{name:"Peenya",pincode:"560058",lat:13.0194,lng:77.5153},{name:"Raghuvanahalli",pincode:"560062",lat:12.8821,lng:77.5466},{name:"Rajajinagar",pincode:"560010",lat:12.9989,lng:77.5536},{name:"Ramamurthy Nagar",pincode:"560016",lat:13.0045,lng:77.6797},{name:"RT Nagar",pincode:"560032",lat:13.0266,lng:77.5979},{name:"Sadashivanagar",pincode:"560080",lat:13.0093,lng:77.5772},{name:"Shanti Nagar",pincode:"560027",lat:12.9537,lng:77.5926},{name:"Tavarekere",pincode:"560029",lat:12.931,lng:77.6106},{name:"Varthur",pincode:"560087",lat:12.9352,lng:77.7501},{name:"Vidyaranyapura",pincode:"560097",lat:13.067,lng:77.56}];ngAfterViewInit(){this.showLocationModal&&this.searchInput&&setTimeout(()=>this.searchInput?.nativeElement.focus(),300)}allow(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,i=e.coords.longitude,r=this.locationService.findNearestArea(t,i);this.locationService.setUserLocation(t,i),this.router.navigate(["/main-app"],{replaceUrl:!0,state:{location:r,latitude:t,longitude:i}})},e=>{console.error("Location error:",e),alert("Location denied or unavailable")},{enableHighAccuracy:!0,timeout:1e4}):alert("Geolocation not supported")}manual(){this.showLocationModal=!0,this.searchQuery="",setTimeout(()=>this.searchInput?.nativeElement.focus(),300)}closeLocationModal(){this.showLocationModal=!1,this.searchQuery=""}selectLocation(e){this.locationService.setUserLocation(e.lat,e.lng),this.router.navigate(["/main-app"],{replaceUrl:!0,state:{location:e.name,latitude:e.lat,longitude:e.lng}})}get filteredLocations(){if(!this.searchQuery.trim())return this.locations;let e=this.searchQuery.toLowerCase();return this.locations.filter(t=>t.name.toLowerCase().includes(e)||t.pincode.includes(e))}static \u0275fac=function(t){return new(t||n)(oe(lt),oe(Gi))};static \u0275cmp=_t({type:n,selectors:[["app-location-permission"]],viewQuery:function(t,i){if(t&1&&Fi(Lq,5),t&2){let r;di(r=hi())&&(i.searchInput=r.first)}},standalone:!0,features:[vt],decls:31,vars:1,consts:[["searchInput",""],[1,"location-section"],[1,"location-form"],[1,"location-icon"],["width","80","height","80","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","locationGradient","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","#ff6b35","stop-opacity","1"],["offset","100%",2,"stop-color","#ff8c5a","stop-opacity","1"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","url(#locationGradient)"],[1,"location-title"],[1,"location-subtitle"],[1,"location-benefits"],[1,"benefit-item"],[1,"benefit-icon"],[1,"benefit-text"],[1,"allow-location-btn",3,"click"],[1,"manual-location-btn",3,"click"],[1,"location-privacy"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"location-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-box"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"search-icon"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21l-4.35-4.35","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["type","text","placeholder","Search for a location...",1,"search-input",3,"ngModelChange","ngModel"],[1,"locations-list"],["class","location-item",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"location-item",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","currentColor"],[1,"location-info"],[1,"location-name"],[1,"location-area"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"chevron-right"],["d","M9 18l6-6-6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"no-results"],["width","48","height","48","viewBox","0 0 24 24","fill","none"]],template:function(t,i){t&1&&(C(0,"div",1)(1,"div",2)(2,"div",3),Te(),C(3,"svg",4)(4,"defs")(5,"linearGradient",5),ne(6,"stop",6)(7,"stop",7),D()(),ne(8,"path",8),D()(),Ue(),C(9,"h2",9),H(10,"Find Street Food Near You"),D(),C(11,"p",10),H(12,"We need your location to show you the best street food options around you"),D(),C(13,"div",11)(14,"div",12)(15,"span",13),H(16,"\u{1F3AF}"),D(),C(17,"span",14),H(18,"Discover food stalls nearby"),D()(),C(19,"div",12)(20,"span",13),H(21,"\u{1F4B0}"),D(),C(22,"span",14),H(23,"See accurate prices & distance"),D()()(),C(24,"button",15),se("click",function(){return i.allow()}),H(25,"Allow Location Access"),D(),C(26,"button",16),se("click",function(){return i.manual()}),H(27,"Select Location Manually"),D(),C(28,"p",17),H(29,"Your location data is secure and only used to show nearby food options."),D()(),Pe(30,Bq,17,3,"div",18),D()),t&2&&(U(30),X("ngIf",i.showLocationModal))},dependencies:[Tt,Yn,Xt,Xn,Jn,qi,Ci],styles:[".location-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1.5rem;background:#fff;font-family:Poppins,sans-serif}.location-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.location-icon[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:inline-block;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.location-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 12px rgba(255,107,53,.3))}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.location-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.location-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin-bottom:2.5rem;line-height:1.5}.location-benefits[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:2.5rem}.benefit-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border-radius:12px;text-align:left}.benefit-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:1rem;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:50%;box-shadow:0 2px 5px #0000000d}.benefit-text[_ngcontent-%COMP%]{font-weight:500;color:#34495e}.allow-location-btn[_ngcontent-%COMP%]{width:100%;padding:1.2rem;background:#ff6b35;color:#fff;border-radius:12px;border:none;font-size:1.1rem;font-weight:600;cursor:pointer;box-shadow:0 4px 15px #ff6b354d;transition:transform .2s;display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem}.allow-location-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.manual-location-btn[_ngcontent-%COMP%]{width:100%;padding:1.1rem;border-radius:12px;border:2px solid #e9ecef;background:#fff;color:#7f8c8d;font-weight:600;cursor:pointer;transition:all .2s}.manual-location-btn[_ngcontent-%COMP%]:hover{border-color:#ced4da;color:#495057}.location-privacy[_ngcontent-%COMP%]{font-size:.8rem;color:#adb5bd;margin-top:2rem;padding:1rem;background:#f8f9fa;border-radius:8px;border-left:3px solid #ff6b35;text-align:left;line-height:1.4}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;backdrop-filter:blur(1px);z-index:100;display:flex;align-items:flex-end;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.location-modal[_ngcontent-%COMP%]{background:#1a1a1a;width:100%;max-height:80vh;border-radius:24px 24px 0 0;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 20px 16px;border-bottom:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff;margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#888;cursor:pointer;border-radius:50%;transition:all .2s ease}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.search-box[_ngcontent-%COMP%]{padding:16px 20px;position:relative;border-bottom:1px solid rgba(255,255,255,.1)}.search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:36px;top:50%;transform:translateY(-50%);color:#666;pointer-events:none}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 48px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:12px;color:#fff;font-size:15px;transition:all .2s ease;box-sizing:border-box}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#666}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;background:#ffffff14;border-color:#ff6b35;box-shadow:0 0 0 3px #ff6b351a}.locations-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px 0}.location-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid rgba(255,255,255,.05)}.location-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.location-item[_ngcontent-%COMP%]:active{background:#ffffff1a;transform:scale(.98)}.location-item[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#ff6b351a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35;flex-shrink:0}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]{flex:1;min-width:0}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;margin-bottom:4px}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-area[_ngcontent-%COMP%]{font-size:13px;color:#888}.location-item[_ngcontent-%COMP%]   .chevron-right[_ngcontent-%COMP%]{color:#666;flex-shrink:0}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:#666}.no-results[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 8px;color:#888}.no-results[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}@media (min-width: 768px){.location-modal[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;border-radius:24px;max-height:70vh}.modal-overlay[_ngcontent-%COMP%]{align-items:center}}"],data:{animation:[ab("fadeIn",[Kd(":enter",[Br({opacity:0}),Wd("200ms ease-out",Br({opacity:1}))]),Kd(":leave",[Wd("200ms ease-in",Br({opacity:0}))])]),ab("slideUp",[Kd(":enter",[Br({transform:"translateY(100%)",opacity:0}),Wd("300ms cubic-bezier(0.4, 0, 0.2, 1)",Br({transform:"translateY(0)",opacity:1}))]),Kd(":leave",[Wd("200ms ease-in",Br({transform:"translateY(100%)",opacity:0}))])])]}})};var Uq=["videoEl"];function jq(n,e){n&1&&ne(0,"div",31)}function zq(n,e){if(n&1){let t=pt();C(0,"button",32),se("click",function(r){ye(t);let o=fe(2);return we(o.retryLoad(r))}),Te(),C(1,"svg",33),ne(2,"path",34)(3,"path",35),D(),Ue(),C(4,"span"),H(5,"Retry"),D()()}}function $q(n,e){if(n&1&&(C(0,"div",28),Pe(1,jq,1,0,"div",29)(2,zq,6,0,"button",30),D()),n&2){let t=fe();U(),X("ngIf",!t.showRetry),U(),X("ngIf",t.showRetry)}}function Hq(n,e){n&1&&(C(0,"div",36),Te(),C(1,"svg",37),ne(2,"path",38),D()())}function qq(n,e){n&1&&(Te(),C(0,"svg",42),ne(1,"path",43),D())}function Gq(n,e){n&1&&(Te(),C(0,"svg",42),ne(1,"path",44),D())}function Wq(n,e){if(n&1&&(C(0,"div",39)(1,"div",40),Pe(2,qq,2,0,"svg",41)(3,Gq,2,0,"svg",41),D()()),n&2){let t=fe();U(2),X("ngIf",t.isMuted),U(),X("ngIf",!t.isMuted)}}function Kq(n,e){if(n&1&&(C(0,"div",45),Te(),C(1,"svg",46),ne(2,"path",47)(3,"circle",48),D(),Ue(),C(4,"span",49),H(5),D()()),n&2){let t=fe();U(5),dt(t.formatViewCount(t.displayViewCount))}}function Zq(n,e){if(n&1&&(C(0,"span",50),H(1),D()),n&2){let t=fe();U(),dt(t.displayLikes)}}function Qq(n,e){if(n&1){let t=pt();C(0,"button",51),se("click",function(r){ye(t);let o=fe();return we(o.onDelete(r))}),Te(),C(1,"svg",52),ne(2,"path",53)(3,"line",54)(4,"line",55),D()()}}var Jh=class n{reel;src="";poster="";title="";vendor="";price="";distance="";active=!1;relativeIndex=0;priority="low";likes=0;viewCount=0;isLiked=!1;isBookmarked=!1;liked=new Qe;bookmarked=new Qe;shared=new Qe;deleted=new Qe;canDelete=!1;videoEl;lastTapTime=0;showLikeAnimation=!1;isProgressBarVisible=!1;progressBarHideTimeout;singleTapTimeout;get displaySrc(){let e=this.reel?.videoUrl||this.src;return e&&e.includes("videos.bengaluru-swada.com")&&(e=e.replace("https://videos.bengaluru-swada.com","https://r2-video-uploader.bengaluru-swada.workers.dev")),e}get displayPoster(){return this.reel?.thumbnailUrl||this.poster}get displayTitle(){return this.reel?.title||this.title}get displayVendor(){return this.reel?.vendor||this.vendor}get displayPrice(){return this.reel?.price||this.price}get displayDistance(){return this.reel?.distance||this.distance}get displayLikes(){return this.reel?.likes||this.likes}get displayViewCount(){return this.reel?.viewCount||this.viewCount}get displayIsLiked(){return this.reel?this.reel.isLiked||!1:this.isLiked}get displayIsBookmarked(){return this.reel?this.reel.isBookmarked||!1:this.isBookmarked}isLoading=!0;progress=0;isSeeking=!1;isMuted=!0;muteChanged=new Qe;showMuteIcon=!1;progressInterval;ngOnChanges(e){if(e.reel||e.src){let t=this.displaySrc,i=e.reel?.previousValue?.videoUrl||e.src?.previousValue;t!==i&&(this.isLoading=!0,this.videoEl&&this.videoEl.nativeElement&&this.videoEl.nativeElement.load())}e.active&&(this.active?this.play():(this.pause(),this.resetVideo())),e.priority&&!this.active&&this.priority==="high"&&this.videoEl?.nativeElement&&this.videoEl.nativeElement.readyState===0&&this.videoEl.nativeElement.load(),this.videoEl?.nativeElement&&(this.videoEl.nativeElement.muted=!this.active||this.isMuted)}ngOnDestroy(){this.pause(),this.progressInterval&&clearInterval(this.progressInterval),this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout),this.playWatchdogTimeout&&clearTimeout(this.playWatchdogTimeout)}ngAfterViewInit(){let e=this.videoEl.nativeElement;["loadstart","loadedmetadata","loadeddata","canplay","playing","waiting","error","stalled","suspend","emptied"].forEach(i=>{e.addEventListener(i,()=>{(i==="playing"||i==="canplay"||i==="loadeddata")&&(this.isLoading=!1,this.startProgressTracking()),i==="waiting"&&(this.isLoading=!0),i==="error"&&(console.error("[VideoCard] Video error:",e.error),this.isLoading=!1),i==="ended"&&(this.progress=0,this.play())})}),this.checkVideoReady(),this.active?this.play():this.priority==="high"&&e.load(),setTimeout(()=>{this.isLoading&&!this.active&&(this.isLoading=!1)},2e3)}resetVideo(){let e=this.videoEl?.nativeElement;e&&(e.pause(),e.currentTime=0,this.progress=0)}showRetry=!1;playWatchdogTimeout;checkVideoReady(){this.videoEl&&this.videoEl.nativeElement&&this.videoEl.nativeElement.readyState>=3&&(this.isLoading=!1)}startProgressTracking(){this.progressInterval&&clearInterval(this.progressInterval);let e=this.videoEl?.nativeElement;e&&(this.progressInterval=setInterval(()=>{!this.isSeeking&&e.duration&&(this.progress=e.currentTime/e.duration*100)},50))}play(){let e=this.videoEl?.nativeElement;if(e){e.muted=!this.active||this.isMuted,e.currentTime=0,e.readyState<3&&(this.isLoading=!0,this.showRetry=!1);let t=e.play();t!==void 0&&t.catch(i=>{console.error("[VideoCard] Error playing video:",i),this.isLoading=!1}),this.playWatchdogTimeout&&clearTimeout(this.playWatchdogTimeout),this.playWatchdogTimeout=setTimeout(()=>{(e.paused||e.readyState<3)&&(console.warn("[VideoCard] Playback stalled, showing retry"),this.isLoading=!0,this.showRetry=!0)},3e3)}}retryLoad(e){e.stopPropagation(),this.showRetry=!1,this.isLoading=!0;let t=this.videoEl?.nativeElement;t&&(t.load(),t.play().catch(console.error))}preload(){let e=this.videoEl?.nativeElement;e&&(e.preload="auto",e.load())}pause(){this.playWatchdogTimeout&&clearTimeout(this.playWatchdogTimeout),this.videoEl?.nativeElement.pause()}bookmark(){this.reel||(this.isBookmarked=!this.isBookmarked),this.bookmarked.emit()}onDelete(e){e.stopPropagation(),this.deleted.emit()}openGoogleMaps(){if(this.reel?.latitude&&this.reel?.longitude){let{latitude:e,longitude:t}=this.reel,i=`https://www.google.com/maps?q=${e},${t}`;window.open(i,"_blank")}else console.warn("No location data available for this reel")}share(){this.shared.emit()}toggleLike(){this.reel||(this.isLiked=!this.isLiked),this.liked.emit(),this.isLiked&&this.showLikeAnimationEffect()}toggleMute(){let e=this.videoEl?.nativeElement;if(e){e.paused&&e.play().catch(i=>console.error("[VideoCard] Error playing on tap:",i));let t=!this.isMuted;e.muted=!this.active||t,this.isMuted=t,this.muteChanged.emit(t),this.showMuteAnimation(),this.isProgressBarVisible=!0,this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout),this.progressBarHideTimeout=setTimeout(()=>{this.isProgressBarVisible=!1},2e3)}}showMuteAnimation(){this.showMuteIcon=!0,setTimeout(()=>{this.showMuteIcon=!1},1e3)}doubleTapLike(){this.isLiked?this.showLikeAnimationEffect():this.toggleLike()}onVideoTap(e){e.preventDefault();let t=new Date().getTime(),i=t-this.lastTapTime;i<300&&i>0?(this.singleTapTimeout&&(clearTimeout(this.singleTapTimeout),this.singleTapTimeout=void 0),this.doubleTapLike(),this.lastTapTime=0):(this.lastTapTime=t,this.singleTapTimeout=window.setTimeout(()=>{this.toggleMute(),this.singleTapTimeout=void 0},300))}toggleProgressBar(){this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout),this.isProgressBarVisible=!this.isProgressBarVisible,this.isProgressBarVisible&&(this.progressBarHideTimeout=setTimeout(()=>{this.isProgressBarVisible=!1},3e3))}showLikeAnimationEffect(){this.showLikeAnimation=!0,setTimeout(()=>{this.showLikeAnimation=!1},1e3)}formatViewCount(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}onProgressBarClick(e){e.stopPropagation(),this.seekToPosition(e)}onProgressBarTouchStart(e){this.isSeeking=!0,this.seekToPosition(e)}onProgressBarTouchMove(e){this.isSeeking&&this.seekToPosition(e)}onProgressBarTouchEnd(){this.isSeeking=!1}seekToPosition(e){let i=e.currentTarget.getBoundingClientRect(),r;if(e instanceof MouseEvent)r=e.clientX;else{let u=e.touches[0]||e.changedTouches[0];if(!u)return;r=u.clientX}let a=Math.max(0,Math.min(r-i.left,i.width))/i.width,l=this.videoEl?.nativeElement;l&&l.readyState>0&&(l.currentTime=a*l.duration,this.progress=a*100)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-video-card"]],viewQuery:function(t,i){if(t&1&&Fi(Uq,5),t&2){let r;di(r=hi())&&(i.videoEl=r.first)}},inputs:{reel:"reel",src:"src",poster:"poster",title:"title",vendor:"vendor",price:"price",distance:"distance",active:"active",relativeIndex:"relativeIndex",priority:"priority",likes:"likes",viewCount:"viewCount",isLiked:"isLiked",isBookmarked:"isBookmarked",canDelete:"canDelete",isMuted:"isMuted"},outputs:{liked:"liked",bookmarked:"bookmarked",shared:"shared",deleted:"deleted",muteChanged:"muteChanged"},standalone:!0,features:[ki,vt],decls:33,vars:30,consts:[["videoEl",""],[1,"video-card"],["loop","","playsinline","","webkit-playsinline","","x-webkit-airplay","allow","disablePictureInPicture","",1,"video-player",3,"click","touchend","muted","preload","poster","src"],["class","loading-spinner",4,"ngIf"],["class","like-animation",4,"ngIf"],["class","mute-animation",4,"ngIf"],[1,"video-overlay"],[1,"video-info"],[1,"food-details"],[1,"dish-name"],[1,"vendor-name"],[1,"price-distance"],[1,"price"],[1,"distance"],[1,"action-buttons"],["class","view-count-action",4,"ngIf"],[1,"action-btn","like-btn",3,"click"],["width","28","height","28","viewBox","0 0 24 24",1,"action-icon"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","like-count",4,"ngIf"],[1,"action-btn","bookmark-btn",3,"click"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"action-btn","map-btn",3,"click"],["width","28","height","28","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"action-icon","navigate-icon"],["points","3 11 22 2 13 21 11 13 3 11"],["class","action-btn delete-btn",3,"click",4,"ngIf"],[1,"progress-container",3,"click","touchstart","touchmove","touchend","mouseenter","mouseleave"],[1,"progress-bar"],[1,"loading-spinner"],["class","spinner",4,"ngIf"],["class","retry-btn",3,"click",4,"ngIf"],[1,"spinner"],[1,"retry-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M23 4v6h-6M1 20v-6h6"],["d","M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 1 20.49 15"],[1,"like-animation"],["width","100","height","100","viewBox","0 0 24 24","fill","white"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"mute-animation"],[1,"mute-icon-bg"],["width","40","height","40","viewBox","0 0 24 24","fill","white",4,"ngIf"],["width","40","height","40","viewBox","0 0 24 24","fill","white"],["d","M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z"],["d","M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"],[1,"view-count-action"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","3","stroke","currentColor","stroke-width","2"],[1,"count-text"],[1,"like-count"],[1,"action-btn","delete-btn",3,"click"],["width","26","height","26","viewBox","0 0 24 24","fill","none","stroke","#ff4444","stroke-width","2",1,"action-icon"],["d","M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"]],template:function(t,i){if(t&1){let r=pt();C(0,"div",1)(1,"video",2,0),se("click",function(a){return ye(r),we(i.onVideoTap(a))})("touchend",function(a){return ye(r),we(i.onVideoTap(a))}),D(),Pe(3,$q,3,2,"div",3)(4,Hq,3,0,"div",4)(5,Wq,4,2,"div",5),C(6,"div",6)(7,"div",7)(8,"div",8)(9,"h3",9),H(10),D(),C(11,"p",10),H(12),D(),C(13,"div",11)(14,"span",12),H(15),D(),C(16,"span",13),H(17),D()()()(),C(18,"div",14),Pe(19,Kq,6,1,"div",15),C(20,"button",16),se("click",function(){return ye(r),we(i.toggleLike())}),Te(),C(21,"svg",17),ne(22,"path",18),D(),Pe(23,Zq,2,1,"span",19),D(),Ue(),C(24,"button",20),se("click",function(){return ye(r),we(i.bookmark())}),Te(),C(25,"svg",17),ne(26,"path",21),D()(),Ue(),C(27,"button",22),se("click",function(){return ye(r),we(i.openGoogleMaps())}),Te(),C(28,"svg",23),ne(29,"polygon",24),D()(),Pe(30,Qq,5,0,"button",25),D()(),Ue(),C(31,"div",26),se("click",function(a){return ye(r),we(i.onProgressBarClick(a))})("touchstart",function(a){return ye(r),we(i.onProgressBarTouchStart(a))})("touchmove",function(a){return ye(r),we(i.onProgressBarTouchMove(a))})("touchend",function(){return ye(r),we(i.onProgressBarTouchEnd())})("mouseenter",function(){return ye(r),we(i.isProgressBarVisible=!0)})("mouseleave",function(){return ye(r),we(i.isProgressBarVisible=!1)}),ne(32,"div",27),D()()}t&2&&(Ze("active",i.active)("prev",i.relativeIndex<0)("next",i.relativeIndex>0),U(),X("muted",!i.active||i.isMuted)("preload",i.priority==="high"?"auto":"none")("poster",i.displayPoster,ar)("src",i.displaySrc,ar),U(2),X("ngIf",i.isLoading),U(),X("ngIf",i.showLikeAnimation),U(),X("ngIf",i.showMuteIcon),U(5),dt(i.displayTitle),U(2),dt(i.displayVendor),U(3),it("\u20B9",i.displayPrice,""),U(2),it("",i.displayDistance," away"),U(2),X("ngIf",i.displayViewCount>0),U(),Ze("liked",i.displayIsLiked),U(),kr("fill",i.displayIsLiked?"currentColor":"none"),U(2),X("ngIf",i.displayLikes>0),U(),Ze("bookmarked",i.displayIsBookmarked),U(),kr("fill",i.displayIsBookmarked?"currentColor":"none"),U(5),X("ngIf",i.canDelete),U(),Ze("visible",i.isProgressBarVisible),U(),bo("width",i.progress,"%"))},dependencies:[Tt,Xt],styles:[".video-card[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;transform:translateY(100%);transition:transform .4s cubic-bezier(.25,1,.5,1);background:#000;overflow:hidden;z-index:1}.video-card.prev[_ngcontent-%COMP%]{transform:translateY(-100%)}.video-card.next[_ngcontent-%COMP%]{transform:translateY(100%)}.video-card.active[_ngcontent-%COMP%]{transform:translateY(0);z-index:2}.video-player[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.progress-container[_ngcontent-%COMP%]{position:absolute;bottom:53px;left:0;width:100%;height:3px;background-color:#fff3;z-index:95;cursor:pointer;transition:opacity .3s ease;opacity:1;pointer-events:auto;margin:0;padding:0}.progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#fff;width:0%;transition:width .1s linear;box-shadow:0 0 10px #ffffff80}.progress-container[_ngcontent-%COMP%]:hover, .progress-container[_ngcontent-%COMP%]:active{height:4px;background-color:#ffffff4d}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#0000004d;z-index:10;gap:1rem}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}.loading-spinner[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#000000b3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:.8rem 1.5rem;border-radius:25px;cursor:pointer;font-size:1rem;transition:all .2s}.loading-spinner[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:active{transform:scale(.95);background:#000000e6}.loading-spinner[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.video-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:20px;background:linear-gradient(to top,rgba(0,0,0,.8),transparent);display:flex;justify-content:space-between;align-items:flex-end;pointer-events:none}.video-info[_ngcontent-%COMP%]{flex:1;color:#fff;padding-right:20px;pointer-events:auto;margin-bottom:50px}.dish-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0 0 5px;text-shadow:0 1px 2px rgba(0,0,0,.5)}.vendor-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin:0 0 10px;opacity:.9}.price-distance[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;font-size:.9rem;padding-bottom:20px}.price[_ngcontent-%COMP%]{font-weight:600;color:#ffffffe6;background:#ff6b35;padding:2px 8px;border-radius:4px}.distance[_ngcontent-%COMP%]{opacity:.8}.view-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;margin-top:8px;font-size:.85rem;opacity:.8}.view-count[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.9}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;pointer-events:auto;padding-bottom:60px}.action-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;display:flex;flex-direction:column;align-items:center;gap:5px;cursor:pointer;padding:0;transition:transform .2s}.action-btn[_ngcontent-%COMP%]:active{transform:scale(.9)}.action-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.like-count[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600}.like-btn.liked[_ngcontent-%COMP%]{color:#ff4757}.like-btn.liked[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse .3s cubic-bezier(.175,.885,.32,1.275)}.bookmark-btn.bookmarked[_ngcontent-%COMP%]{color:#ff6b35}.like-animation[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;pointer-events:none;animation:_ngcontent-%COMP%_pop-in-out .8s cubic-bezier(.175,.885,.32,1.275) forwards}@keyframes _ngcontent-%COMP%_pop-in-out{0%{transform:translate(-50%,-50%) scale(0);opacity:0}20%{transform:translate(-50%,-50%) scale(1.2);opacity:1}40%{transform:translate(-50%,-50%) scale(.9);opacity:1}80%{transform:translate(-50%,-50%) scale(1);opacity:1}to{transform:translate(-50%,-50%) scale(1.5);opacity:0}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}.mute-animation[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;pointer-events:none;animation:_ngcontent-%COMP%_fade-in-out 1s ease-in-out forwards}.mute-icon-bg[_ngcontent-%COMP%]{background:#0009;border-radius:50%;padding:15px;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_fade-in-out{0%{opacity:0;transform:translate(-50%,-50%) scale(.8)}20%{opacity:1;transform:translate(-50%,-50%) scale(1)}80%{opacity:1;transform:translate(-50%,-50%) scale(1)}to{opacity:0;transform:translate(-50%,-50%) scale(.8)}}.view-count-action[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;color:#fff;margin-bottom:5px}.view-count-action[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.view-count-action[_ngcontent-%COMP%]   .count-text[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.5)}"]})};var Wi=class n{constructor(e,t){this.firestore=e;this.http=t}collectionName="reels";getTrendingReels(e=20){return T(this,null,function*(){try{let t=lu(this.firestore,this.collectionName),i=uu(t,$h("createdAt","desc"),Y_(e*3)),o=(yield Z_(i)).docs.map(f=>{let m=f.data();return m.videoUrl&&m.videoUrl.includes("videos.bengaluru-swada.com")&&(m.videoUrl=m.videoUrl.replace("https://videos.bengaluru-swada.com","https://r2-video-uploader.bengaluru-swada.workers.dev")),Y({id:f.id},m)}),a=Date.now(),l=o.map(f=>{let m=f.viewCount||0,v=f.likes||0,E=f.bookmarkedBy?.length||0,b=m*1+v*3+E*5,M=f.createdAt.toDate().getTime(),k=Math.max(0,(a-M)/(1e3*60*60)),N=b/Math.pow(k+2,1.5);return Oe(Y({},f),{_score:N})});l.sort((f,m)=>m._score-f._score);let u=l.slice(0,e);return this.shuffleArray(u)}catch(t){return console.error("Error fetching trending:",t),[]}})}getNewArrivals(e=20){return T(this,null,function*(){return yield this.getReels(e)})}shuffleArray(e){for(let t=e.length-1;t>0;t--){let i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}getReels(e=10,t){return T(this,null,function*(){try{let i=lu(this.firestore,this.collectionName),r=uu(i,$h("createdAt","desc"),Y_(e));return t&&(r=uu(r,Lk(t))),(yield Z_(r)).docs.map(a=>Y({id:a.id},a.data()))}catch(i){return console.error("Error fetching reels:",i),[]}})}getReelsByUser(e){return T(this,null,function*(){try{let t=lu(this.firestore,this.collectionName),i=uu(t,Fk("uploadedBy","==",e),$h("createdAt","desc"));return(yield Z_(i)).docs.map(o=>Y({id:o.id},o.data()))}catch(t){return console.error("Error fetching user reels:",t),[]}})}getReelById(e){return T(this,null,function*(){try{let t=fc(this.firestore,this.collectionName,e),i=yield Ok(t);return i.exists()?Y({id:i.id},i.data()):null}catch(t){return console.error("Error fetching reel:",t),null}})}createReel(e){return T(this,null,function*(){try{let t=lu(this.firestore,this.collectionName);return(yield Pk(t,Oe(Y({},e),{createdAt:Ht.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}))).id}catch(t){throw console.error("Error creating reel:",t),t}})}updateReel(e,t){return T(this,null,function*(){try{let i=fc(this.firestore,this.collectionName,e);yield pc(i,t)}catch(i){throw console.error("Error updating reel:",i),i}})}deleteReel(e){return T(this,null,function*(){try{let t=yield this.getReelById(e);if(!t){console.warn("Reel not found, cannot delete");return}let i="";if(t.videoUrl)if(t.videoUrl.includes("bengaluru-swada.workers.dev")){let o="bengaluru-swada.workers.dev/",a=t.videoUrl.indexOf(o);a!==-1&&(i=t.videoUrl.substring(a+o.length))}else{let o=t.videoUrl.split("/");i=o[o.length-1]}if(i)try{yield Wv(this.deleteFromR2(i)),console.log(`Deleted ${i} from R2`)}catch(o){console.error("Failed to delete from R2, proceeding with DB delete:",o)}let r=fc(this.firestore,this.collectionName,e);yield Rk(r),console.log("Deleted reel metadata from Firestore")}catch(t){throw console.error("Error deleting reel:",t),t}})}toggleLike(e,t,i){return T(this,null,function*(){try{let r=fc(this.firestore,this.collectionName,e);i?yield pc(r,{likedBy:aT(t),likes:Q_(-1)}):yield pc(r,{likedBy:cT(t),likes:Q_(1)})}catch(r){throw console.error("Error toggling like:",r),r}})}toggleBookmark(e,t,i){return T(this,null,function*(){try{let r=fc(this.firestore,this.collectionName,e);i?yield pc(r,{bookmarkedBy:aT(t)}):yield pc(r,{bookmarkedBy:cT(t)})}catch(r){throw console.error("Error toggling bookmark:",r),r}})}incrementViewCount(e){return T(this,null,function*(){try{let t=fc(this.firestore,this.collectionName,e);yield pc(t,{viewCount:Q_(1)})}catch(t){console.error("Error incrementing view count:",t)}})}getReelsRealtime(e=10){return new ze(t=>{let i=lu(this.firestore,this.collectionName),r=uu(i,$h("createdAt","desc"),Y_(e)),o=Nk(r,a=>{let l=a.docs.map(u=>Y({id:u.id},u.data()));t.next(l)},a=>{console.error("Error in realtime reels:",a),t.error(a)});return()=>o()})}getUploadUrl(e,t){return this.http.post(Hh.cloudflare.workerUrl,{fileName:e,contentType:t})}uploadToR2(e,t){return this.http.put(e,t,{headers:{"Content-Type":t.type},reportProgress:!0,observe:"events"})}deleteFromR2(e){return this.http.delete(`${Hh.cloudflare.workerUrl}/${e}`)}isLikedByUser(e,t){return e.likedBy?.includes(t)||!1}isBookmarkedByUser(e,t){return e.bookmarkedBy?.includes(t)||!1}static \u0275fac=function(t){return new(t||n)(ge(hc),ge(gw))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};function Yq(n,e){n&1&&(C(0,"div",11),ne(1,"app-video-feed-skeleton"),D())}function Jq(n,e){if(n&1){let t=pt();C(0,"div",12)(1,"div",13)(2,"h2"),H(3,"No Reels Found"),D(),C(4,"p"),H(5,"Be the first to share a tasty bite!"),D(),C(6,"div",14)(7,"button",15),se("click",function(){ye(t);let r=fe();return we(r.seedData())}),H(8,"Seed Sample Data"),D(),C(9,"a",16),H(10,"Upload Reel"),D()()()()}}function Xq(n,e){if(n&1){let t=pt();C(0,"app-video-card",19),se("muteChanged",function(r){ye(t);let o=fe(2);return we(o.onMuteChanged(r))})("deleted",function(){let r=ye(t).$implicit,o=fe(2);return we(o.onReelDeleted(r))})("liked",function(){let r=ye(t).index,o=fe(2);return we(o.onLike(r))})("bookmarked",function(){let r=ye(t).index,o=fe(2);return we(o.onBookmark(r))})("shared",function(){let r=ye(t).index,o=fe(2);return we(o.onShare(r))}),D()}if(n&2){let t=e.$implicit,i=e.index,r=fe(2);X("reel",t)("active",i===r.currentIndex&&r.isActive)("relativeIndex",i-r.currentIndex)("priority",r.getPriority(i))("isMuted",r.isGlobalMuted)("canDelete",r.isOwner(t))}}function eG(n,e){if(n&1&&(C(0,"div",17),Pe(1,Xq,1,6,"app-video-card",18),D()),n&2){let t=fe();U(),X("ngForOf",t.reels)}}var _c=class n{constructor(e,t,i,r){this.reelsService=e;this.auth=t;this.cdr=i;this.locationService=r}isActive=!0;activeTab="all";isGlobalMuted=!0;reels=[];currentIndex=0;touchStartY=0;touchStartX=0;pullStartY=0;pullMoveY=0;isRefreshing=!1;pullThreshold=150;swipeThresholdX=50;isLoading=!0;viewedReels=new Set;viewTrackingTimeout;cards;ngOnInit(){return T(this,null,function*(){yield this.loadReels()})}ngAfterViewInit(){setTimeout(()=>{this.reels.length>0&&this.trackView()},50)}ngOnChanges(e){e.isActive}onMuteChanged(e){this.isGlobalMuted=e}ngOnDestroy(){this.viewTrackingTimeout&&clearTimeout(this.viewTrackingTimeout)}reloadReelsForNewLocation(){return T(this,null,function*(){console.log("[VideoFeed] Reloading reels for new location...");let e=[...this.reels],t=yield Promise.all(e.map(i=>T(this,null,function*(){let r="-- km";if(i.latitude&&i.longitude)try{r=yield this.locationService.getDistanceFromUser(i.latitude,i.longitude)}catch(o){console.error("[VideoFeed] Error calculating distance:",o)}return Oe(Y({},i),{distance:r})})));this.activeTab==="all"&&t.sort((i,r)=>{let o=i.distance==="-- km"?1/0:parseFloat(i.distance.split(" ")[0]),a=r.distance==="-- km"?1/0:parseFloat(r.distance.split(" ")[0]);return o-a}),this.reels=t,this.currentIndex=0,this.cdr.detectChanges()})}isOwner(e){return this.auth.currentUser?.uid===e.uploadedBy}onReelDeleted(e){return T(this,null,function*(){if(confirm("Are you sure you want to delete this reel permanently?"))try{yield this.reelsService.deleteReel(e.id),this.reels=this.reels.filter(t=>t.id!==e.id),this.currentIndex>=this.reels.length&&(this.currentIndex=Math.max(0,this.reels.length-1))}catch(t){console.error("Failed to delete reel:",t),alert("Failed to delete reel. Please try again.")}})}switchTab(e){return T(this,null,function*(){this.activeTab!==e&&(this.activeTab=e,this.reels=[],this.currentIndex=0,this.isLoading=!0,yield this.loadReels())})}loadReels(){return T(this,null,function*(){console.log(`[VideoFeed] Loading ${this.activeTab} reels...`),this.isLoading=!0;try{let e=[];this.activeTab==="trending"?e=yield this.reelsService.getTrendingReels(20):this.activeTab==="new"?e=yield this.reelsService.getNewArrivals(20):e=yield this.reelsService.getReels(50),console.log("[VideoFeed] Fetched reels:",e.length);let t=this.auth.currentUser;console.log("[VideoFeed] Current user:",t?.uid||"Not logged in");let i=yield Promise.all(e.map(r=>T(this,null,function*(){let o="-- km";if(r.latitude&&r.longitude)try{o=yield this.locationService.getDistanceFromUser(r.latitude,r.longitude)}catch(a){console.error("[VideoFeed] Error calculating distance:",a)}return Oe(Y({},r),{distance:o,isLiked:t?this.reelsService.isLikedByUser(r,t.uid):!1,isBookmarked:t?this.reelsService.isBookmarkedByUser(r,t.uid):!1})})));this.activeTab==="all"&&i.sort((r,o)=>{let a=r.distance==="-- km"?1/0:parseFloat(r.distance.split(" ")[0]),l=o.distance==="-- km"?1/0:parseFloat(o.distance.split(" ")[0]);return a-l}),this.reels=i,console.log("[VideoFeed] Final reels count:",this.reels.length)}catch(e){console.error("[VideoFeed] Error loading reels:",e)}finally{setTimeout(()=>{this.isLoading=!1,this.cdr.detectChanges(),this.reels.length>0&&this.trackView()},500)}})}trackView(){this.viewTrackingTimeout&&clearTimeout(this.viewTrackingTimeout);let e=this.reels[this.currentIndex];!e||!e.id||this.viewedReels.has(e.id)||(this.viewTrackingTimeout=window.setTimeout(()=>{e.id&&(this.reelsService.incrementViewCount(e.id),this.viewedReels.add(e.id),e.viewCount=(e.viewCount||0)+1)},3e3))}onTouchStart(e){this.touchStartY=e.touches[0].clientY,this.touchStartX=e.touches[0].clientX,this.currentIndex===0&&!this.isRefreshing&&(this.pullStartY=e.touches[0].clientY)}onTouchMove(e){if(this.currentIndex===0&&!this.isRefreshing&&this.pullStartY>0){let i=e.touches[0].clientY-this.pullStartY;i>0&&(this.pullMoveY=i*.5,i>10&&e.preventDefault())}}onTouchEnd(e){return T(this,null,function*(){let t=e.changedTouches[0].clientY,i=e.changedTouches[0].clientX,r=this.touchStartY-t,o=this.touchStartX-i;if(Math.abs(o)>this.swipeThresholdX&&Math.abs(o)>Math.abs(r)){o>0?this.activeTab==="all"?this.switchTab("trending"):this.activeTab==="trending"&&this.switchTab("new"):this.activeTab==="new"?this.switchTab("trending"):this.activeTab==="trending"&&this.switchTab("all");return}let a=80;r>a?this.next():r<-a&&this.pullMoveY<this.pullThreshold&&this.prev(),this.pullMoveY>=this.pullThreshold&&!this.isRefreshing&&(yield this.refresh()),this.pullStartY=0,this.pullMoveY=0})}refresh(){return T(this,null,function*(){this.isRefreshing=!0,navigator.vibrate&&navigator.vibrate(50);try{yield this.loadReels()}finally{setTimeout(()=>{this.isRefreshing=!1},500)}})}next(){this.currentIndex<this.reels.length-1&&(this.isGlobalMuted=!0,this.currentIndex++,this.trackView())}prev(){this.currentIndex>0&&(this.isGlobalMuted=!0,this.currentIndex--,this.trackView())}onLike(e){return T(this,null,function*(){let t=this.reels[e];if(!t||!t.id)return;let i=this.auth.currentUser;if(!i){console.warn("User must be logged in to like");return}let r=t.isLiked||!1;t.isLiked=!r,t.likes=(t.likes||0)+(r?-1:1);try{yield this.reelsService.toggleLike(t.id,i.uid,r)}catch(o){t.isLiked=r,t.likes=(t.likes||0)+(r?1:-1),console.error("Error toggling like:",o)}})}onBookmark(e){return T(this,null,function*(){let t=this.reels[e];if(!t||!t.id)return;let i=this.auth.currentUser;if(!i){console.warn("User must be logged in to bookmark");return}let r=t.isBookmarked||!1;t.isBookmarked=!r;try{yield this.reelsService.toggleBookmark(t.id,i.uid,r)}catch(o){t.isBookmarked=r,console.error("Error toggling bookmark:",o)}})}onShare(e){let t=this.reels[e];if(t)if(navigator.share)navigator.share({title:t.title,text:`Check out ${t.title} from ${t.vendor}!`,url:window.location.href}).catch(i=>console.log("Error sharing:",i));else{let i=`Check out ${t.title} from ${t.vendor}! \u20B9${t.price}`;navigator.clipboard.writeText(i).then(()=>alert("Link copied to clipboard!")).catch(r=>console.error("Error copying:",r))}}seedData(){return T(this,null,function*(){this.isLoading=!0;let e=[{title:"Masala Dosa",vendor:"CTR",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",thumbnailUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Masala_Dosa_with_Chutney_and_Sambar.jpg/1200px-Masala_Dosa_with_Chutney_and_Sambar.jpg",price:120,latitude:12.9352,longitude:77.6245,uploadedBy:this.auth.currentUser?.uid||"system",cloudflareVideoId:"sample-id-1",duration:60,createdAt:Ht.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]},{title:"Idli Vada",vendor:"Brahmins Coffee Bar",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",thumbnailUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Idli_Sambar.JPG/1200px-Idli_Sambar.JPG",price:80,latitude:12.9716,longitude:77.6412,uploadedBy:this.auth.currentUser?.uid||"system",cloudflareVideoId:"sample-id-2",duration:60,createdAt:Ht.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}];try{for(let t of e)yield this.reelsService.createReel(t);yield this.loadReels()}catch(t){console.error("Error seeding data:",t)}finally{this.isLoading=!1}})}navigateToReel(e){if(console.log(`[VideoFeed] Attempting to navigate to reel: ${e}`),console.log(`[VideoFeed] Total reels loaded: ${this.reels.length}`),this.reels.length===0){console.warn(`[VideoFeed] No reels loaded yet, cannot navigate to ${e}`);return}let t=this.reels.findIndex(i=>i.id===e);t!==-1?(console.log(`[VideoFeed] Found reel at index ${t}, navigating...`),this.currentIndex=t,this.isGlobalMuted=!0,setTimeout(()=>{this.trackView()},100),console.log(`[VideoFeed] Successfully navigated to reel: ${e}`)):(console.warn(`[VideoFeed] Reel not found in loaded reels: ${e}`),console.log("[VideoFeed] Available reel IDs:",this.reels.map(i=>i.id)))}getPriority(e){let t=Math.abs(e-this.currentIndex);return t===0?"high":t===1?"auto":"low"}static \u0275fac=function(t){return new(t||n)(oe(Wi),oe(St),oe(fi),oe(Gi))};static \u0275cmp=_t({type:n,selectors:[["app-video-feed"]],viewQuery:function(t,i){if(t&1&&Fi(Jh,5),t&2){let r;di(r=hi())&&(i.cards=r)}},inputs:{isActive:"isActive"},standalone:!0,features:[ki,vt],decls:22,vars:19,consts:[[1,"video-feed",3,"touchstart","touchmove","touchend"],[1,"feed-tabs"],[1,"tab-item",3,"click"],[1,"tab-separator"],[1,"tab-indicator"],[1,"refresh-indicator"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M12 4V2M12 20v2M4 12H2m20 0h-2m-2.05-5.95l-1.414-1.414M4.929 19.071L6.343 17.657m12.728 0l-1.414 1.414M4.929 4.929L6.343 6.343","stroke","currentColor","stroke-width","2.5","stroke-linecap","round"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","reels-container",4,"ngIf"],[1,"loading-container"],[1,"empty-state"],[1,"empty-content"],[1,"button-group"],[1,"seed-btn",3,"click"],["routerLink","/upload-reel",1,"upload-btn"],[1,"reels-container"],[3,"reel","active","relativeIndex","priority","isMuted","canDelete","muteChanged","deleted","liked","bookmarked","shared",4,"ngFor","ngForOf"],[3,"muteChanged","deleted","liked","bookmarked","shared","reel","active","relativeIndex","priority","isMuted","canDelete"]],template:function(t,i){t&1&&(C(0,"div",0),se("touchstart",function(o){return i.onTouchStart(o)})("touchmove",function(o){return i.onTouchMove(o)})("touchend",function(o){return i.onTouchEnd(o)}),C(1,"div",1)(2,"div",2),se("click",function(){return i.switchTab("all")}),C(3,"span"),H(4,"All"),D()(),C(5,"div",3),H(6,"|"),D(),C(7,"div",2),se("click",function(){return i.switchTab("trending")}),C(8,"span"),H(9,"Trending"),D()(),C(10,"div",3),H(11,"|"),D(),C(12,"div",2),se("click",function(){return i.switchTab("new")}),C(13,"span"),H(14,"New Arrivals"),D()(),ne(15,"div",4),D(),C(16,"div",5),Te(),C(17,"svg",6),ne(18,"path",7),D()(),Pe(19,Yq,2,0,"div",8)(20,Jq,11,0,"div",9)(21,eG,2,1,"div",10),D()),t&2&&(U(2),Ze("active",i.activeTab==="all"),U(5),Ze("active",i.activeTab==="trending"),U(5),Ze("active",i.activeTab==="new"),U(3),Ze("trending-active",i.activeTab==="trending")("new-active",i.activeTab==="new"),U(),bo("transform","translateY("+(i.isRefreshing?60:i.pullMoveY)+"px)"),Ze("refreshing",i.isRefreshing),U(),bo("transform","rotate("+i.pullMoveY*2+"deg)"),U(2),X("ngIf",i.isLoading),U(),X("ngIf",!i.isLoading&&i.reels.length===0),U(),X("ngIf",!i.isLoading&&i.reels.length>0))},dependencies:[Tt,Yn,Xt,Jh,bx,px],styles:[".video-feed[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden;scroll-snap-type:y mandatory;-webkit-overflow-scrolling:touch;height:100vh;background:#000}.feed-tabs[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:60px;z-index:50;display:flex;align-items:center;justify-content:center;gap:15px;background:linear-gradient(to bottom,#000c,#0000);backdrop-filter:blur(2px);padding-top:10px}.tab-item[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#fff9;cursor:pointer;transition:color .3s ease,transform .2s ease;text-shadow:0 1px 4px rgba(0,0,0,.5)}.tab-item.active[_ngcontent-%COMP%]{color:#fff;transform:scale(1.05)}.tab-separator[_ngcontent-%COMP%]{color:#fff3;font-size:.9rem}.tab-indicator[_ngcontent-%COMP%]{position:absolute;bottom:12px;height:3px;width:20px;background:#fff;border-radius:2px;transition:transform .3s cubic-bezier(.4,0,.2,1);transform:translate(-125px);box-shadow:0 0 8px #fff6}.tab-indicator.trending-active[_ngcontent-%COMP%]{transform:translate(-42px)}.tab-indicator.new-active[_ngcontent-%COMP%]{transform:translate(85px)}.loading-state[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;z-index:10;background:#121212}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.1);border-left-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-content[_ngcontent-%COMP%]{text-align:center;padding:2rem}.empty-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#ff6b35}.empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa;margin-bottom:2rem}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:100%;max-width:250px}.seed-btn[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border-radius:25px;font-weight:600;text-align:center;text-decoration:none;cursor:pointer;transition:all .2s;border:none;font-size:1rem}.seed-btn[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2)}.seed-btn[_ngcontent-%COMP%]:hover{background:#fff3}.upload-btn[_ngcontent-%COMP%]{background:#ff6b35;color:#fff}.upload-btn[_ngcontent-%COMP%]:hover{background:#e55a2b;transform:translateY(-2px)}.refresh-indicator[_ngcontent-%COMP%]{position:absolute;top:-50px;left:0;width:100%;height:50px;display:flex;align-items:center;justify-content:center;z-index:20;pointer-events:none;transition:transform .1s linear}.refresh-indicator.refreshing[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(.175,.885,.32,1.275)}.refresh-indicator.refreshing[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.refresh-indicator[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b35;background:#fff;border-radius:50%;padding:5px;box-shadow:0 2px 5px #0003}"]})};var gu=class n{selectedReelId=new Gt(null);selectedReelId$=this.selectedReelId.asObservable();selectReel(e){console.log("[NavigationService] Setting selected reel:",e),this.selectedReelId.next(e)}clearSelection(){this.selectedReelId.next(null)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};function tG(n,e){n&1&&(C(0,"div",6)(1,"h1"),H(2,"Favorites"),D(),C(3,"p",7),H(4,"Your bookmarked reels"),D()())}function nG(n,e){n&1&&(C(0,"div",8),ne(1,"div",9),C(2,"p"),H(3,"Loading favorites..."),D()())}function iG(n,e){n&1&&(C(0,"div",10),Te(),C(1,"svg",11),ne(2,"path",12),D(),Ue(),C(3,"h2"),H(4,"No Favorites Yet"),D(),C(5,"p"),H(6,"Bookmark your favorite reels to see them here"),D()())}function rG(n,e){if(n&1){let t=pt();C(0,"video",33,0),se("loadedmetadata",function(){ye(t);let r=Na(1);return we(r.currentTime=.1)}),D()}if(n&2){let t=fe().$implicit;X("src",t.videoUrl,ar)}}function oG(n,e){if(n&1){let t=pt();C(0,"div",15),se("click",function(){let r=ye(t).$implicit,o=fe(2);return we(o.playReel(r))}),C(1,"div",16),Pe(2,rG,2,1,"video",17),C(3,"div",18),Te(),C(4,"svg",19),ne(5,"path",20),D()(),Ue(),C(6,"div",21)(7,"span",22),Te(),C(8,"svg",23),ne(9,"path",24)(10,"circle",25),D(),H(11),D(),Ue(),C(12,"span",22),Te(),C(13,"svg",23),ne(14,"path",26),D(),H(15),D()()(),Ue(),C(16,"div",27)(17,"h3",28),H(18),D(),C(19,"p",29),H(20),D(),C(21,"div",30)(22,"span",31),H(23),D(),C(24,"span",32),H(25),D()()()()}if(n&2){let t=e.$implicit;U(2),X("ngIf",t.videoUrl),U(9),it(" ",t.viewCount||0," "),U(4),it(" ",t.likes||0," "),U(3),dt(t.title),U(2),dt(t.vendor),U(3),it("\u20B9",t.price,""),U(2),dt(t.distance)}}function sG(n,e){if(n&1&&(C(0,"div",13),Pe(1,oG,26,7,"div",14),D()),n&2){let t=fe();U(),X("ngForOf",t.bookmarkedReels)}}var Ws=class n{constructor(e,t,i,r,o){this.reelsService=e;this.auth=t;this.router=i;this.cdr=r;this.navigationService=o}showHeader=!0;bookmarkedReels=[];isLoading=!0;ngOnInit(){return T(this,null,function*(){yield this.loadBookmarkedReels()})}loadBookmarkedReels(){return T(this,null,function*(){console.log("[Favorites] Starting to load bookmarked reels..."),this.isLoading=!0,this.cdr.detectChanges();try{let e=this.auth.currentUser;if(console.log("[Favorites] Current user:",e?.uid||"Not logged in"),!e){this.bookmarkedReels=[],console.log("[Favorites] No user logged in, clearing bookmarks");return}console.log("[Favorites] Fetching all reels...");let t=yield this.reelsService.getReels(100);console.log("[Favorites] Fetched reels count:",t.length),this.bookmarkedReels=t.filter(i=>this.reelsService.isBookmarkedByUser(i,e.uid)),console.log("[Favorites] Bookmarked reels count:",this.bookmarkedReels.length)}catch(e){console.error("[Favorites] Error loading bookmarked reels:",e)}finally{this.isLoading=!1,this.cdr.detectChanges(),console.log("[Favorites] Loading complete. isLoading:",this.isLoading)}})}playReel(e){console.log("[Favorites] Playing reel:",e.id,e.title),this.navigationService.selectReel(e.id),this.router.navigate(["/main-app"])}static \u0275fac=function(t){return new(t||n)(oe(Wi),oe(St),oe(lt),oe(fi),oe(gu))};static \u0275cmp=_t({type:n,selectors:[["app-favorites"]],inputs:{showHeader:"showHeader"},standalone:!0,features:[vt],decls:5,vars:4,consts:[["videoThumb",""],[1,"favorites-container"],["class","favorites-header",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","reels-grid",4,"ngIf"],[1,"favorites-header"],[1,"subtitle"],[1,"loading-state"],[1,"spinner"],[1,"empty-state"],["width","80","height","80","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z","stroke","currentColor","stroke-width","2","fill","none"],[1,"reels-grid"],["class","reel-card",3,"click",4,"ngFor","ngForOf"],[1,"reel-card",3,"click"],[1,"reel-thumbnail"],["muted","","playsinline","","preload","metadata",3,"src","loadedmetadata",4,"ngIf"],[1,"play-overlay"],["width","48","height","48","viewBox","0 0 24 24","fill","white"],["d","M8 5v14l11-7z"],[1,"reel-stats"],[1,"stat"],["width","16","height","16","viewBox","0 0 24 24","fill","white"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","white","stroke-width","2","fill","none"],["cx","12","cy","12","r","3","stroke","white","stroke-width","2","fill","none"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"reel-info"],[1,"reel-title"],[1,"reel-vendor"],[1,"reel-meta"],[1,"price"],[1,"distance"],["muted","","playsinline","","preload","metadata",3,"loadedmetadata","src"]],template:function(t,i){t&1&&(C(0,"div",1),Pe(1,tG,5,0,"div",2)(2,nG,4,0,"div",3)(3,iG,7,0,"div",4)(4,sG,2,1,"div",5),D()),t&2&&(U(),X("ngIf",i.showHeader),U(),X("ngIf",i.isLoading),U(),X("ngIf",!i.isLoading&&i.bookmarkedReels.length===0),U(),X("ngIf",!i.isLoading&&i.bookmarkedReels.length>0))},dependencies:[Tt,Yn,Xt],styles:['@charset "UTF-8";.favorites-container[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000;overflow-y:auto;padding:4rem 1rem 5rem}.favorites-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;padding:1rem 0}.favorites-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin-bottom:.5rem;background:linear-gradient(135deg,#ff6b35,#f7931e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.favorites-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#888;font-size:.9rem}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;color:#fff;text-align:center;padding:2rem}.loading-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b35;margin-bottom:1.5rem;opacity:.5}.loading-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#fff}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;font-size:.95rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.1);border-left-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.reels-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:1rem;padding:0 .5rem}@media (min-width: 640px){.reels-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.5rem}}.reel-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}.reel-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.reel-card[_ngcontent-%COMP%]:active{transform:scale(.98)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.reel-thumbnail[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:9/16;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,#1a1a1a,#2d2d2d);margin-bottom:.5rem;display:flex;align-items:center;justify-content:center}.reel-thumbnail[_ngcontent-%COMP%]:before{content:"\\1f3ac";font-size:3rem;opacity:.3;position:absolute}.reel-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .reel-thumbnail[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:relative;z-index:1}.reel-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:#0000004d;opacity:0;transition:opacity .2s;z-index:2}.reel-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 8px rgba(0,0,0,.5))}.reel-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;left:.5rem;right:.5rem;display:flex;gap:.75rem;font-size:.75rem;color:#fff;z-index:2}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;background:#0009;backdrop-filter:blur(1px);padding:.25rem .5rem;border-radius:12px;font-weight:600}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.reel-info[_ngcontent-%COMP%]   .reel-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#fff;margin-bottom:.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reel-info[_ngcontent-%COMP%]   .reel-vendor[_ngcontent-%COMP%]{font-size:.8rem;color:#888;margin-bottom:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b35,#f7931e);color:#fff;padding:.25rem .5rem;border-radius:8px;font-weight:600}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]   .distance[_ngcontent-%COMP%]{color:#666}']})};var Ks=zN(oN());function aG(n,e){n&1&&(C(0,"span"),H(1,"Search"),D())}function cG(n,e){n&1&&(C(0,"span"),H(1,"..."),D())}function lG(n,e){if(n&1){let t=pt();C(0,"div",20),se("click",function(){let r=ye(t).$implicit,o=fe(2);return we(o.selectSearchResult(r))}),H(1),D()}if(n&2){let t=e.$implicit;U(),it(" ",t.display_name," ")}}function uG(n,e){if(n&1&&(C(0,"div",18),Pe(1,lG,2,1,"div",19),D()),n&2){let t=fe();U(),X("ngForOf",t.searchResults)}}var lv=class n{locationSelected=new Qe;cancel=new Qe;map;marker;searchQuery="";searchResults=[];isSearching=!1;selectedLat=12.9716;selectedLng=77.5946;constructor(){}ngOnInit(){}ngAfterViewInit(){this.initMap()}ngOnDestroy(){this.map&&this.map.remove()}initMap(){this.map=Ks.map("map").setView([this.selectedLat,this.selectedLng],13),Ks.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map),this.addMarker(this.selectedLat,this.selectedLng),this.map.on("click",e=>{this.updateLocation(e.latlng.lat,e.latlng.lng)}),setTimeout(()=>{this.map?.invalidateSize()},100)}addMarker(e,t){if(this.marker)this.marker.setLatLng([e,t]);else{let i=Ks.divIcon({className:"custom-pin",html:`<svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="#ff4757" stroke="white" stroke-width="2"/>
               </svg>`,iconSize:[30,30],iconAnchor:[15,30]});this.marker=Ks.marker([e,t],{icon:i,draggable:!0}).addTo(this.map),this.marker.on("dragend",()=>{let r=this.marker.getLatLng();this.updateLocation(r.lat,r.lng,!1)})}}updateLocation(e,t,i=!1){this.selectedLat=e,this.selectedLng=t,this.marker?this.marker.setLatLng([e,t]):this.addMarker(e,t),i&&this.map&&this.map.panTo([e,t])}searchLocation(){return T(this,null,function*(){if(this.searchQuery.trim()){this.isSearching=!0,this.searchResults=[];try{let t=yield(yield fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(this.searchQuery)}`)).json();this.searchResults=t}catch(e){console.error("Error searching location:",e)}finally{this.isSearching=!1}}})}selectSearchResult(e){let t=parseFloat(e.lat),i=parseFloat(e.lon);this.updateLocation(t,i,!0),this.searchResults=[],this.searchQuery=e.display_name.split(",")[0]}confirmSelection(){this.locationSelected.emit({lat:this.selectedLat,lng:this.selectedLng})}onCancel(){this.cancel.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-location-picker"]],outputs:{locationSelected:"locationSelected",cancel:"cancel"},standalone:!0,features:[vt],decls:27,vars:13,consts:[[1,"picker-overlay"],[1,"picker-container"],[1,"picker-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-bar"],["type","text","placeholder","Search for a place...",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-btn",3,"click","disabled"],[4,"ngIf"],["class","search-results",4,"ngIf"],[1,"map-container"],["id","map"],[1,"picker-footer"],[1,"coords"],[1,"actions"],[1,"cancel-btn",3,"click"],[1,"confirm-btn",3,"click"],[1,"search-results"],["class","result-item",3,"click",4,"ngFor","ngForOf"],[1,"result-item",3,"click"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),H(4,"Pick Location"),D(),C(5,"button",3),se("click",function(){return i.onCancel()}),Te(),C(6,"svg",4),ne(7,"path",5),D()()(),Ue(),C(8,"div",6)(9,"input",7),_n("ngModelChange",function(o){return Sn(i.searchQuery,o)||(i.searchQuery=o),o}),se("keyup.enter",function(){return i.searchLocation()}),D(),C(10,"button",8),se("click",function(){return i.searchLocation()}),Pe(11,aG,2,0,"span",9)(12,cG,2,0,"span",9),D()(),Pe(13,uG,2,1,"div",10),C(14,"div",11),ne(15,"div",12),D(),C(16,"div",13)(17,"div",14)(18,"small"),H(19),fd(20,"number"),fd(21,"number"),D()(),C(22,"div",15)(23,"button",16),se("click",function(){return i.onCancel()}),H(24,"Cancel"),D(),C(25,"button",17),se("click",function(){return i.confirmSelection()}),H(26,"Confirm Location"),D()()()()()),t&2&&(U(9),gn("ngModel",i.searchQuery),U(),X("disabled",i.isSearching),U(),X("ngIf",!i.isSearching),U(),X("ngIf",i.isSearching),U(),X("ngIf",i.searchResults.length>0),U(6),Q0("",pd(20,7,i.selectedLat,"1.4-4"),", ",pd(21,10,i.selectedLng,"1.4-4"),""))},dependencies:[Tt,Yn,Xt,sM,Xn,Jn,qi,Ci],styles:[".picker-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;z-index:2000;display:flex;align-items:center;justify-content:center;padding:20px}.picker-container[_ngcontent-%COMP%]{background:#1a1a1a;width:100%;max-width:500px;height:80vh;border-radius:12px;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 4px 20px #00000080}.picker-header[_ngcontent-%COMP%]{padding:15px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.1)}.picker-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.1rem}.picker-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;padding:5px;cursor:pointer}.search-bar[_ngcontent-%COMP%]{padding:15px;display:flex;gap:10px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;background:#333;border:1px solid #444;border-radius:8px;padding:10px 15px;color:#fff;font-size:.95rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff4757}.search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{background:#ff4757;color:#fff;border:none;border-radius:8px;padding:0 20px;font-weight:600;cursor:pointer}.search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:disabled{opacity:.7}.search-results[_ngcontent-%COMP%]{background:#2a2a2a;max-height:150px;overflow-y:auto;border-bottom:1px solid #444}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{padding:12px 15px;color:#ddd;border-bottom:1px solid #333;cursor:pointer;font-size:.9rem}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]:hover{background:#333}.map-container[_ngcontent-%COMP%]{flex:1;position:relative;background:#eee}.map-container[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:100%}.picker-footer[_ngcontent-%COMP%]{padding:15px 20px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;border-top:1px solid rgba(255,255,255,.1)}.picker-footer[_ngcontent-%COMP%]   .coords[_ngcontent-%COMP%]{color:#888;font-family:monospace}.picker-footer[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:10px}.picker-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:600;cursor:pointer;border:none}.picker-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#333;color:#fff}.picker-footer[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{background:#ff4757;color:#fff}"]})};function dG(n,e){if(n&1){let t=pt();C(0,"div",29)(1,"div",30)(2,"div",31),Te(),C(3,"svg",32),ne(4,"path",33)(5,"path",34),D()(),Ue(),C(6,"div",35)(7,"p",36),H(8),D(),C(9,"p",37),H(10),D()(),C(11,"button",38),se("click",function(){ye(t);let r=fe();return we(r.removeFile())}),Te(),C(12,"svg",39),ne(13,"path",40),D()()(),Ue(),C(14,"div",41)(15,"div",42),ne(16,"div",43),D(),C(17,"p",44),H(18,"Ready to Upload"),D()()()}if(n&2){let t=fe();U(8),dt(t.selectedFile.name),U(2),it("",(t.selectedFile.size/(1024*1024)).toFixed(2)," MB")}}function hG(n,e){if(n&1){let t=pt();C(0,"label",45)(1,"input",46),se("change",function(r){ye(t);let o=fe();return we(o.onFileSelected(r))}),D(),C(2,"div",47),Te(),C(3,"svg",48),ne(4,"path",34)(5,"circle",49),D(),Ue(),C(6,"p",50),H(7,"Select Video"),D(),C(8,"p",51),H(9,"MP4, MOV, or WebM (max 100MB)"),D()()()}}function fG(n,e){if(n&1&&(C(0,"div",52),Te(),C(1,"svg",39),ne(2,"circle",53)(3,"path",54),D(),H(4),D()),n&2){let t=fe();U(4),it(" ",t.uploadError," ")}}function pG(n,e){if(n&1){let t=pt();C(0,"div",55)(1,"div",56),Te(),C(2,"svg",39),ne(3,"path",57)(4,"path",58),D(),Ue(),C(5,"span"),H(6,"Upload successful! Redirecting..."),D()(),C(7,"button",59),se("click",function(){ye(t);let r=fe();return we(r.cancel())}),H(8,"Done"),D()()}}function mG(n,e){if(n&1&&(C(0,"div",60)(1,"div",61),ne(2,"div",62),D(),C(3,"p",63),H(4),D()()),n&2){let t=fe();U(2),bo("width",t.uploadProgress,"%"),U(2),it("Uploading... ",t.uploadProgress,"%")}}function gG(n,e){n&1&&(C(0,"span"),H(1,"Upload Reel"),D())}function _G(n,e){n&1&&(C(0,"span"),H(1,"Uploading..."),D())}function vG(n,e){if(n&1){let t=pt();C(0,"app-location-picker",64),se("locationSelected",function(r){ye(t);let o=fe();return we(o.onLocationSelected(r))})("cancel",function(){ye(t);let r=fe();return we(r.closeLocationPicker())}),D()}}var _u=class n{constructor(e,t,i,r){this.reelsService=e;this.auth=t;this.router=i;this.locationService=r}title="";vendor="";price=null;latitude=null;longitude=null;uploadComplete=new Qe;canceled=new Qe;selectedFile=null;videoPreviewUrl=null;isUploading=!1;uploadProgress=0;uploadError=null;uploadSuccess=!1;maxFileSize=200*1024*1024;acceptedFormats=["video/mp4","video/quicktime","video/webm"];ngOnInit(){}onFileSelected(e){let t=e.target;if(t.files&&t.files.length>0){let i=t.files[0];this.validateAndSetFile(i)}}validateAndSetFile(e){if(this.uploadError=null,!this.acceptedFormats.includes(e.type)){this.uploadError="Please select a valid video file (MP4, MOV, or WebM)";return}if(e.size>this.maxFileSize){this.uploadError=`File size must be less than ${this.maxFileSize/(1024*1024)}MB`;return}this.selectedFile=e,this.createVideoPreview(e)}createVideoPreview(e){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl),this.videoPreviewUrl=URL.createObjectURL(e)}removeFile(){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl),this.selectedFile=null,this.videoPreviewUrl=null,this.uploadError=null}resetForm(){this.removeFile(),this.title="",this.vendor="",this.price=null,this.uploadProgress=0,this.uploadSuccess=!1,this.isUploading=!1}isFormValid(){return!!(this.selectedFile&&this.title.trim()&&this.vendor.trim()&&this.price!==null&&this.price>0&&this.latitude!==null&&this.longitude!==null)}showLocationPicker=!1;getCurrentLocation(){return T(this,null,function*(){try{let e=yield this.locationService.getUserLocation();this.latitude=e.latitude,this.longitude=e.longitude}catch(e){console.error("Error getting location:",e),this.uploadError="Failed to get current location. Please enter coordinates manually."}})}openLocationPicker(){this.showLocationPicker=!0}onLocationSelected(e){this.latitude=e.lat,this.longitude=e.lng,this.showLocationPicker=!1}closeLocationPicker(){this.showLocationPicker=!1}uploadReel(){return T(this,null,function*(){if(!this.isFormValid()||!this.selectedFile){this.uploadError="Please fill in all fields and select a video";return}let e=this.auth.currentUser;if(!e){this.uploadError="You must be logged in to upload a reel";return}this.isUploading=!0,this.uploadError=null,this.uploadProgress=0,this.uploadSuccess=!1;try{let t=Date.now(),i=this.selectedFile.name.replace(/[^a-zA-Z0-9.]/g,"_"),r=`videos/${e.uid}/${t}_${i}`;this.reelsService.getUploadUrl(r,this.selectedFile.type).subscribe({next:o=>{let{uploadUrl:a,key:l}=o;this.selectedFile&&this.reelsService.uploadToR2(a,this.selectedFile).subscribe({next:u=>T(this,null,function*(){if(u.type===lr.UploadProgress)u.total&&(this.uploadProgress=Math.round(100*u.loaded/u.total));else if(u.type===lr.Response)try{let f=`https://r2-video-uploader.bengaluru-swada.workers.dev/${l}`;yield this.reelsService.createReel({cloudflareVideoId:"",videoUrl:f,thumbnailUrl:"",duration:0,title:this.title.trim(),vendor:this.vendor.trim(),price:this.price,latitude:this.latitude,longitude:this.longitude,uploadedBy:e.uid,createdAt:null,viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}),this.uploadSuccess=!0,this.isUploading=!1,this.uploadComplete.emit(),setTimeout(()=>{this.router.navigate(["/main-app"]).catch(m=>{console.error("Navigation failed:",m),this.uploadError='Auto-redirect failed. Please click "Done".'})},1500)}catch(f){console.error("Error creating reel record:",f),this.uploadError="Video uploaded but failed to save metadata.",this.isUploading=!1}}),error:u=>{console.error("R2 Upload error:",u),this.uploadError="Failed to upload video to server.",this.isUploading=!1}})},error:o=>{console.error("Signed URL error:",o),this.uploadError="Failed to initialize upload.",this.isUploading=!1}})}catch(t){console.error("Upload flow error:",t),this.uploadError=t instanceof Error?t.message:"Unknown error occurred",this.isUploading=!1}})}cancel(){this.canceled.emit(),this.resetForm(),this.router.navigate(["/main-app"])}ngOnDestroy(){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl)}static \u0275fac=function(t){return new(t||n)(oe(Wi),oe(St),oe(lt),oe(Gi))};static \u0275cmp=_t({type:n,selectors:[["app-upload-reel"]],outputs:{uploadComplete:"uploadComplete",canceled:"canceled"},standalone:!0,features:[vt],decls:47,vars:21,consts:[["fileSelector",""],[1,"upload-container"],[1,"upload-header"],[1,"spacer"],[1,"upload-content"],[1,"video-preview-section"],["class","video-preview selected",4,"ngIf","ngIfElse"],[1,"form-section"],[1,"form-group"],["for","title"],["type","text","id","title","placeholder","e.g., Masala Dosa",3,"ngModelChange","ngModel","disabled"],["for","vendor"],["type","text","id","vendor","placeholder","e.g., Vidyarthi Bhavan",3,"ngModelChange","ngModel","disabled"],["for","price"],["type","number","id","price","placeholder","50","min","0",3,"ngModelChange","ngModel","disabled"],["type","button",1,"location-btn",3,"click","disabled"],["type","button",1,"location-btn","map-btn",2,"margin-top","10px",3,"click","disabled"],[1,"form-row"],["for","latitude"],["type","number","id","latitude","placeholder","12.9352","step","0.0001",3,"ngModelChange","ngModel","disabled"],["for","longitude"],["type","number","id","longitude","placeholder","77.6245","step","0.0001",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],["class","upload-progress",4,"ngIf"],[1,"action-buttons"],[1,"upload-btn",3,"click","disabled"],[4,"ngIf"],[3,"locationSelected","cancel",4,"ngIf"],[1,"video-preview","selected"],[1,"file-info-header"],[1,"file-icon"],["width","32","height","32","viewBox","0 0 24 24","fill","none"],["d","M15 10L19 14L15 18","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2"],[1,"file-details"],[1,"file-name"],[1,"file-size"],[1,"remove-video-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"ready-progress"],[1,"progress-bar-container"],[1,"progress-bar-fill",2,"width","100%"],[1,"progress-status"],[1,"file-selector"],["type","file","accept","video/mp4,video/quicktime,video/webm","hidden","",3,"change"],[1,"file-selector-content"],["width","48","height","48","viewBox","0 0 24 24","fill","none"],["cx","12","cy","13","r","4","stroke","currentColor","stroke-width","2"],[1,"selector-title"],[1,"selector-subtitle"],[1,"error-message"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M12 8v4M12 16h.01","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"success-message"],[1,"success-info"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M22 4L12 14.01l-3-3","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"done-btn-fallback",3,"click"],[1,"upload-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[3,"locationSelected","cancel"]],template:function(t,i){if(t&1){let r=pt();C(0,"div",1)(1,"div",2)(2,"h1"),H(3,"Upload Reel"),D(),ne(4,"div",3),D(),C(5,"div",4)(6,"div",5),Pe(7,dG,19,2,"div",6)(8,hG,10,0,"ng-template",null,0,mm),D(),C(10,"div",7)(11,"div",8)(12,"label",9),H(13,"Dish Name *"),D(),C(14,"input",10),_n("ngModelChange",function(a){return ye(r),Sn(i.title,a)||(i.title=a),we(a)}),D()(),C(15,"div",8)(16,"label",11),H(17,"Vendor Name *"),D(),C(18,"input",12),_n("ngModelChange",function(a){return ye(r),Sn(i.vendor,a)||(i.vendor=a),we(a)}),D()(),C(19,"div",8)(20,"label",13),H(21,"Price (\u20B9) *"),D(),C(22,"input",14),_n("ngModelChange",function(a){return ye(r),Sn(i.price,a)||(i.price=a),we(a)}),D()(),C(23,"div",8)(24,"label"),H(25,"Location *"),D(),C(26,"button",15),se("click",function(){return ye(r),we(i.getCurrentLocation())}),H(27," \u{1F4CD} Use Current Location "),D(),C(28,"button",16),se("click",function(){return ye(r),we(i.openLocationPicker())}),H(29," \u{1F5FA}\uFE0F Pick on Map "),D()(),C(30,"div",17)(31,"div",8)(32,"label",18),H(33,"Latitude *"),D(),C(34,"input",19),_n("ngModelChange",function(a){return ye(r),Sn(i.latitude,a)||(i.latitude=a),we(a)}),D()(),C(35,"div",8)(36,"label",20),H(37,"Longitude *"),D(),C(38,"input",21),_n("ngModelChange",function(a){return ye(r),Sn(i.longitude,a)||(i.longitude=a),we(a)}),D()()(),Pe(39,fG,5,1,"div",22)(40,pG,9,0,"div",23)(41,mG,5,3,"div",24),C(42,"div",25)(43,"button",26),se("click",function(){return ye(r),we(i.uploadReel())}),Pe(44,gG,2,0,"span",27)(45,_G,2,0,"span",27),D()()()(),Pe(46,vG,1,0,"app-location-picker",28),D()}if(t&2){let r=Na(9);U(7),X("ngIf",i.selectedFile)("ngIfElse",r),U(7),gn("ngModel",i.title),X("disabled",i.isUploading),U(4),gn("ngModel",i.vendor),X("disabled",i.isUploading),U(4),gn("ngModel",i.price),X("disabled",i.isUploading),U(4),X("disabled",i.isUploading),U(2),X("disabled",i.isUploading),U(6),gn("ngModel",i.latitude),X("disabled",i.isUploading),U(4),gn("ngModel",i.longitude),X("disabled",i.isUploading),U(),X("ngIf",i.uploadError),U(),X("ngIf",i.uploadSuccess),U(),X("ngIf",i.isUploading),U(2),X("disabled",!i.isFormValid()||i.isUploading),U(),X("ngIf",!i.isUploading),U(),X("ngIf",i.isUploading),U(),X("ngIf",i.showLocationPicker)}},dependencies:[Tt,Xt,Xn,Jn,_T,qi,yT,Ci,lv],styles:[".upload-container[_ngcontent-%COMP%]{height:100vh;background:#0a0a0a;padding:0 0 100px;overflow-y:auto;position:relative}.upload-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:20px;background:#00000080;backdrop-filter:blur(1px);border-bottom:1px solid rgba(255,255,255,.1);position:sticky;top:0;z-index:10}.upload-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0;color:#fff}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;transition:all .2s ease;border-radius:50%}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.upload-header[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{width:40px}.upload-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}.video-preview-section[_ngcontent-%COMP%]{margin-bottom:24px}.video-preview[_ngcontent-%COMP%]{position:relative;background:#1a1a1a;border-radius:16px;overflow:hidden;aspect-ratio:9/16;max-height:500px;border:1px solid rgba(255,255,255,.1)}.video-preview[_ngcontent-%COMP%]   .preview-video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.video-preview.selected[_ngcontent-%COMP%]{aspect-ratio:auto;padding:24px;display:flex;flex-direction:column;gap:24px;background:#1a1a1a;min-height:auto}.video-preview[_ngcontent-%COMP%]   .file-info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;position:relative}.video-preview[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:#ff6b351a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35}.video-preview[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]{flex:1}.video-preview[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;margin:0 0 4px;word-break:break-all}.video-preview[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:14px;color:#888;margin:0}.video-preview[_ngcontent-%COMP%]   .ready-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{height:8px;background:#ffffff0d;border-radius:4px;overflow:hidden;margin-bottom:8px}.video-preview[_ngcontent-%COMP%]   .ready-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]   .progress-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ff6b35,#ff8c42);border-radius:4px}.video-preview[_ngcontent-%COMP%]   .ready-progress[_ngcontent-%COMP%]   .progress-status[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#34c759;margin:0}.video-preview[_ngcontent-%COMP%]   .remove-video-btn[_ngcontent-%COMP%]{position:static;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;color:#888;cursor:pointer;transition:all .2s ease}.video-preview[_ngcontent-%COMP%]   .remove-video-btn[_ngcontent-%COMP%]:hover{background:#ff3b301a;color:#ff3b30;border-color:#ff3b3033}.file-selector[_ngcontent-%COMP%]{display:block;cursor:pointer}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;padding:60px 40px;text-align:center;border:2px dashed rgba(255,107,53,.3);transition:all .3s ease}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b35;margin-bottom:20px}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   .selector-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#fff;margin:0 0 8px}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   .selector-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#888;margin:0}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]:hover{border-color:#ff6b35;background:#222;transform:translateY(-2px);box-shadow:0 8px 24px #ff6b3533}.form-section[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;padding:24px;border:1px solid rgba(255,255,255,.1)}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;color:#aaa;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;background:#0a0a0a;border:1px solid rgba(255,255,255,.1);border-radius:12px;font-size:16px;color:#fff;transition:all .2s ease;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff6b35;background:#111;box-shadow:0 0 0 3px #ff6b351a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#0a0a0a;opacity:.5;cursor:not-allowed}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#555}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:-1fr 1fr;gap:16px}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:12px;font-size:14px;margin-bottom:20px;font-weight:500}.error-message[_ngcontent-%COMP%]{background:#ff3b301a;color:#ff3b30;border:1px solid rgba(255,59,48,.3)}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.success-message[_ngcontent-%COMP%]{background:#34c7591a;color:#34c759;border:1px solid rgba(52,199,89,.3);flex-direction:column;align-items:stretch;gap:16px}.success-message[_ngcontent-%COMP%]   .success-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.success-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.success-message[_ngcontent-%COMP%]   .done-btn-fallback[_ngcontent-%COMP%]{background:#34c759;color:#fff;border:none;padding:10px 16px;border-radius:8px;font-weight:600;cursor:pointer;font-size:14px;transition:all .2s ease}.success-message[_ngcontent-%COMP%]   .done-btn-fallback[_ngcontent-%COMP%]:hover{background:#2fb34f;transform:translateY(-1px)}.success-message[_ngcontent-%COMP%]   .done-btn-fallback[_ngcontent-%COMP%]:active{transform:scale(.98)}.upload-progress[_ngcontent-%COMP%]{margin-bottom:24px}.upload-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:6px;background:#ffffff1a;border-radius:3px;overflow:hidden;margin-bottom:8px}.upload-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ff6b35,#ff8c42);transition:width .3s ease;border-radius:3px}.upload-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:13px;color:#888;text-align:center;margin:0;font-weight:500}.action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:-1fr 2fr;gap:12px;margin-top:24px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:16px 24px;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;border:none}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.action-buttons[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.1)}.action-buttons[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff26}.action-buttons[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b35,#ff8c42);color:#fff;box-shadow:0 4px 12px #ff6b354d}.action-buttons[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #ff6b3566;transform:translateY(-2px)}@media (max-width: 768px){.upload-container[_ngcontent-%COMP%]{padding-bottom:100px}.upload-content[_ngcontent-%COMP%]{padding:16px}.form-section[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]{padding:40px 24px}}"]})};function yG(n,e){if(n&1){let t=pt();C(0,"div",38),se("click",function(){let r=ye(t).$implicit,o=fe(2);return we(o.selectLocation(r))}),C(1,"div",39),Te(),C(2,"svg",40),ne(3,"path",6),D()(),Ue(),C(4,"div",41)(5,"div",42),H(6),D(),C(7,"div",43),H(8),D()(),Te(),C(9,"svg",44),ne(10,"path",45),D()()}if(n&2){let t=e.$implicit;U(6),dt(t.name),U(2),it("Pincode: ",t.pincode,"")}}function wG(n,e){n&1&&(C(0,"div",46),Te(),C(1,"svg",47),ne(2,"circle",32)(3,"path",33),D(),Ue(),C(4,"p"),H(5,"No locations found"),D(),C(6,"span"),H(7,"Try searching for a different area"),D()())}function bG(n,e){if(n&1){let t=pt();C(0,"div",24),se("click",function(){ye(t);let r=fe();return we(r.closeLocationModal())}),C(1,"div",25),se("click",function(r){return ye(t),we(r.stopPropagation())}),C(2,"div",26)(3,"h2"),H(4,"Select Location"),D(),C(5,"button",27),se("click",function(){ye(t);let r=fe();return we(r.closeLocationModal())}),Te(),C(6,"svg",28),ne(7,"path",29),D()()(),Ue(),C(8,"div",30),Te(),C(9,"svg",31),ne(10,"circle",32)(11,"path",33),D(),Ue(),C(12,"input",34),_n("ngModelChange",function(r){ye(t);let o=fe();return Sn(o.locationSearchQuery,r)||(o.locationSearchQuery=r),we(r)}),D()(),C(13,"div",35),Pe(14,yG,11,2,"div",36)(15,wG,8,0,"div",37),D()()()}if(n&2){let t=fe();U(12),gn("ngModel",t.locationSearchQuery),U(2),X("ngForOf",t.filteredLocations),U(),X("ngIf",t.filteredLocations.length===0)}}function EG(n,e){if(n&1){let t=pt();C(0,"button",48),se("click",function(){let r=ye(t).$implicit,o=fe();return we(o.selectPrice(r))}),H(1),D()}if(n&2){let t=e.$implicit,i=fe();Ze("active",i.selectedPriceRange===t),U(),it(" ",t.label," ")}}function IG(n,e){if(n&1){let t=pt();C(0,"button",48),se("click",function(){let r=ye(t).$implicit,o=fe();return we(o.selectDistance(r))}),H(1),D()}if(n&2){let t=e.$implicit,i=fe();Ze("active",i.selectedDistance===t),U(),it(" ",t.label," ")}}function CG(n,e){if(n&1){let t=pt();C(0,"button",48),se("click",function(){let r=ye(t).$implicit,o=fe();return we(o.selectSort(r))}),H(1),D()}if(n&2){let t=e.$implicit,i=fe();Ze("active",i.selectedSort===t),U(),it(" ",t," ")}}function TG(n,e){n&1&&(C(0,"div",49),ne(1,"div",50),D())}function SG(n,e){n&1&&(C(0,"div")(1,"p"),H(2,"Search for your favorite food or browse categories!"),D()())}function DG(n,e){n&1&&(C(0,"p"),H(1,"No tasty bites found matching your search."),D())}function AG(n,e){if(n&1&&(C(0,"div",51),Pe(1,SG,3,0,"div",52)(2,DG,2,0,"ng-template",null,0,mm),D()),n&2){let t=Na(3),i=fe();U(),X("ngIf",i.reels.length===0)("ngIfElse",t)}}function MG(n,e){if(n&1){let t=pt();C(0,"div",53),se("click",function(){let r=ye(t).$implicit,o=fe();return we(o.openReel(r))}),C(1,"div",54)(2,"video",55,1),se("loadedmetadata",function(){ye(t);let r=Na(3);return we(r.currentTime=.1)}),D(),C(4,"div",56),H(5),D()(),C(6,"div",57)(7,"div",58)(8,"h3",59),H(9),D()(),C(10,"p",60),H(11),D(),C(12,"div",61)(13,"span",62),H(14),D()()()()}if(n&2){let t=e.$implicit;U(2),X("src",t.videoUrl,ar),U(3),dt(t.distanceStr),U(4),dt(t.title),U(2),dt(t.vendor),U(3),it("\u20B9",t.price,"")}}var uv=class n{constructor(e,t,i){this.reelsService=e;this.locationService=t;this.router=i}searchQuery="";reels=[];filteredReels=[];isLoading=!1;locationName="Koramangala, Bangalore";showLocationModal=!1;locationSearchQuery="";categories=["All","South Indian","North Indian","Street Food","Desserts","Beverages"];selectedCategory="All";priceRanges=[{label:"All",min:0,max:1/0},{label:"\u20B90-30",min:0,max:30},{label:"\u20B931-60",min:31,max:60},{label:"\u20B961-100",min:61,max:100},{label:"\u20B9100+",min:101,max:1/0}];selectedPriceRange=this.priceRanges[0];distances=[{label:"All",max:1/0},{label:"< 1 km",max:1},{label:"1-3 km",max:3},{label:"3-5 km",max:5},{label:"5+ km",max:1/0}];selectedDistance=this.distances[0];sortOptions=["Nearest First","Price: Low to High","Price: High to Low"];selectedSort="Nearest First";ngOnInit(){return T(this,null,function*(){this.locationService.currentLocation$.subscribe(e=>{e&&(this.locationName=`${e.name}, Bangalore`,this.reels.length>0&&this.loadReels())});try{let e=yield this.locationService.getUserLocation();this.locationName=this.locationService.getAreaName(e.latitude,e.longitude)+", Bangalore"}catch(e){console.warn("Could not get initial location name",e)}})}loadReels(){return T(this,null,function*(){this.isLoading=!0;try{let e=yield this.reelsService.getReels(50);this.reels=yield Promise.all(e.map(t=>T(this,null,function*(){let i=1/0,r="-- km";if(t.latitude&&t.longitude)try{let o=yield this.locationService.getUserLocation();i=this.locationService.calculateDistance(o.latitude,o.longitude,t.latitude,t.longitude),r=i.toFixed(1)+" km"}catch(o){console.error("Error calculating distance",o)}return Oe(Y({},t),{distanceVal:i,distanceStr:r,rating:(4+Math.random()).toFixed(1)})})))}catch(e){console.error("Error loading reels for search:",e)}finally{this.isLoading=!1}})}applyFilters(){return T(this,null,function*(){if(this.reels.length===0&&!this.isLoading){let t=this.searchQuery.trim().length>0,i=this.selectedCategory!=="All"||this.selectedPriceRange.label!=="All"||this.selectedDistance.label!=="All";if(t||i)yield this.loadReels();else{this.filteredReels=[];return}}let e=this.reels;if(this.searchQuery.trim()){let t=this.searchQuery.toLowerCase();e=e.filter(i=>i.title?.toLowerCase().includes(t)||i.vendor?.toLowerCase().includes(t))}if(this.selectedCategory,e=e.filter(t=>{let i=Number(t.price);return i>=this.selectedPriceRange.min&&i<=this.selectedPriceRange.max}),this.selectedDistance.label!=="All")if(this.selectedDistance.label==="5+ km")e=e.filter(t=>t.distanceVal>5&&t.distanceVal!==1/0);else if(this.selectedDistance.label==="< 1 km")e=e.filter(t=>t.distanceVal<1);else{let t=this.selectedDistance.max,i=this.distances[this.distances.indexOf(this.selectedDistance)-1]?.max||0;this.selectedDistance.label==="1-3 km"?e=e.filter(r=>r.distanceVal>=1&&r.distanceVal<=3):this.selectedDistance.label==="3-5 km"&&(e=e.filter(r=>r.distanceVal>=3&&r.distanceVal<=5))}this.selectedSort==="Nearest First"?e.sort((t,i)=>t.distanceVal-i.distanceVal):this.selectedSort==="Price: Low to High"?e.sort((t,i)=>Number(t.price)-Number(i.price)):this.selectedSort==="Price: High to Low"&&e.sort((t,i)=>Number(i.price)-Number(t.price)),this.filteredReels=e})}selectCategory(e){this.selectedCategory=e,this.applyFilters()}selectPrice(e){this.selectedPriceRange=e,this.applyFilters()}selectDistance(e){this.selectedDistance=e,this.applyFilters()}selectSort(e){this.selectedSort=e,this.applyFilters()}openReel(e){this.router.navigate(["/main-app"],{state:{openFeed:!0,reelId:e.id}})}openLocationModal(){this.showLocationModal=!0,this.locationSearchQuery=""}closeLocationModal(){this.showLocationModal=!1,this.locationSearchQuery=""}selectLocation(e){this.locationService.updateLocation(e.name,e.lat,e.lng),this.closeLocationModal()}get filteredLocations(){let e=this.locationSearchQuery.toLowerCase().trim();return e?this.locationService.AREAS.filter(t=>t.name.toLowerCase().includes(e)||t.pincode.includes(e)):this.locationService.AREAS}static \u0275fac=function(t){return new(t||n)(oe(Wi),oe(Gi),oe(lt))};static \u0275cmp=_t({type:n,selectors:[["app-search"]],standalone:!0,features:[vt],decls:32,vars:9,consts:[["noResults",""],["videoThumb",""],[1,"search-container"],[1,"search-header"],[1,"location-context",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none",1,"location-pin"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","currentColor"],[1,"location-text"],["width","12","height","12","viewBox","0 0 24 24","fill","none",1,"chevron-down"],["d","M6 9l6 6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-bar"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","placeholder","Search dosa, vada pav, biryani...",3,"ngModelChange","ngModel"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"filters-scroll"],[1,"filter-section-title"],[1,"filter-group"],["class","chip",3,"active","click",4,"ngFor","ngForOf"],[1,"results-grid"],["class","loading-spinner",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","food-card",3,"click",4,"ngFor","ngForOf"],[1,"modal-overlay",3,"click"],[1,"location-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"modal-search-box"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"search-icon"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21l-4.35-4.35","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["type","text","placeholder","Search for a location...",1,"search-input",3,"ngModelChange","ngModel"],[1,"locations-list"],["class","location-item",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"location-item",3,"click"],[1,"location-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],[1,"location-info"],[1,"location-name"],[1,"location-area"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"chevron-right"],["d","M9 18l6-6-6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"no-results"],["width","48","height","48","viewBox","0 0 24 24","fill","none"],[1,"chip",3,"click"],[1,"loading-spinner"],[1,"spinner"],[1,"empty-state"],[4,"ngIf","ngIfElse"],[1,"food-card",3,"click"],[1,"card-image"],["muted","","playsinline","","preload","metadata",3,"loadedmetadata","src"],[1,"distance-badge"],[1,"card-details"],[1,"header-row"],[1,"dish-name"],[1,"vendor-name"],[1,"price-row"],[1,"price"]],template:function(t,i){t&1&&(C(0,"div",2)(1,"div",3)(2,"div",4),se("click",function(){return i.openLocationModal()}),Te(),C(3,"svg",5),ne(4,"path",6),D(),Ue(),C(5,"span",7),H(6),D(),Te(),C(7,"svg",8),ne(8,"path",9),D()(),Ue(),C(9,"div",10),Te(),C(10,"svg",11),ne(11,"circle",12)(12,"line",13),D(),Ue(),C(13,"input",14),_n("ngModelChange",function(o){return Sn(i.searchQuery,o)||(i.searchQuery=o),o}),se("ngModelChange",function(){return i.applyFilters()}),D()()(),Pe(14,bG,16,3,"div",15),C(15,"div",16)(16,"div",17),H(17,"Price Range"),D(),C(18,"div",18),Pe(19,EG,2,3,"button",19),D(),C(20,"div",17),H(21,"Distance"),D(),C(22,"div",18),Pe(23,IG,2,3,"button",19),D(),C(24,"div",17),H(25,"Sort By"),D(),C(26,"div",18),Pe(27,CG,2,3,"button",19),D()(),C(28,"div",20),Pe(29,TG,2,0,"div",21)(30,AG,4,2,"div",22)(31,MG,15,5,"div",23),D()()),t&2&&(U(6),dt(i.locationName),U(7),gn("ngModel",i.searchQuery),U(),X("ngIf",i.showLocationModal),U(5),X("ngForOf",i.priceRanges),U(4),X("ngForOf",i.distances),U(4),X("ngForOf",i.sortOptions),U(2),X("ngIf",i.isLoading),U(),X("ngIf",!i.isLoading&&i.filteredReels.length===0),U(),X("ngForOf",i.filteredReels))},dependencies:[Tt,Yn,Xt,Xn,Jn,qi,Ci],styles:[".search-container[_ngcontent-%COMP%]{height:100%;overflow-y:auto;background:#f8f9fa;background:#000;padding-bottom:80px;color:#fff}.search-header[_ngcontent-%COMP%]{padding:16px;background:#000;position:sticky;top:0;z-index:10;display:flex;flex-direction:column;gap:12px}.location-context[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#ffffff0d;padding:8px 16px;border-radius:12px;color:#ff6b35;font-size:.9rem;font-weight:500;cursor:pointer;width:fit-content;border:1px solid rgba(255,107,53,.2)}.location-context[_ngcontent-%COMP%]   .location-text[_ngcontent-%COMP%]{color:#fff}.location-context[_ngcontent-%COMP%]   .chevron-down[_ngcontent-%COMP%]{color:#888}.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#1a1a1a;border-radius:12px;padding:12px 16px;border:1px solid rgba(255,255,255,.1)}.search-bar[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{color:#888;margin-right:12px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:15px;width:100%;outline:none}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#666}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;backdrop-filter:blur(4px);z-index:1000;display:flex;align-items:flex-end}.location-modal[_ngcontent-%COMP%]{background:#121212;width:100%;max-height:80vh;border-radius:24px 24px 0 0;display:flex;flex-direction:column;border:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 20px 16px;border-bottom:1px solid rgba(255,255,255,.05)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff;margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#888;cursor:pointer}.modal-search-box[_ngcontent-%COMP%]{padding:16px 20px;position:relative}.modal-search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:36px;top:50%;transform:translateY(-50%);color:#666}.modal-search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 48px;background:#1e1e1e;border:1px solid rgba(255,255,255,.1);border-radius:12px;color:#fff;box-sizing:border-box}.modal-search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff6b35}.locations-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:24px}.location-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;cursor:pointer;border-bottom:1px solid rgba(255,255,255,.05)}.location-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.location-item[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#ff6b351a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]{flex:1}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-area[_ngcontent-%COMP%]{font-size:13px;color:#888}.no-results[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#666}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:8px}.filters-scroll[_ngcontent-%COMP%]{padding:0 16px 16px}.filters-scroll[_ngcontent-%COMP%]   .filter-section-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#fff;margin:12px 0 8px}.filters-scroll[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;gap:8px;overflow-x:auto;padding-bottom:4px;scrollbar-width:none}.filters-scroll[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.filters-scroll[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{background:#1a1a1a;color:#aaa;border:1px solid rgba(255,255,255,.1);padding:6px 14px;border-radius:20px;font-size:13px;white-space:nowrap;cursor:pointer;transition:all .2s}.filters-scroll[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;border-color:#ff6b35}.results-grid[_ngcontent-%COMP%]{padding:0 16px;display:grid;grid-template-columns:1fr;grid-template-columns:repeat(2,1fr);gap:16px}.food-card[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;overflow:hidden;cursor:pointer;transition:transform .2s}.food-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.food-card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{position:relative;aspect-ratio:4/3;background:#222}.food-card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.food-card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   .distance-badge[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:#0009;backdrop-filter:blur(4px);padding:4px 8px;border-radius:6px;font-size:11px;font-weight:600}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{padding:12px}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .dish-name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin:0 8px 0 0;color:#fff;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{display:flex;align-items:center;background:#2ecc71;color:#fff;padding:2px 4px;border-radius:4px;font-size:11px;font-weight:700}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{font-size:10px;margin-left:2px}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .vendor-name[_ngcontent-%COMP%]{font-size:13px;color:#888;margin-bottom:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]{font-size:10px;color:#ff9f43;font-weight:700;text-transform:uppercase}.loading-spinner[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:center;padding:40px}.spinner[_ngcontent-%COMP%]{width:30px;height:30px;border:3px solid rgba(255,255,255,.1);border-top-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{grid-column:1/-1;text-align:center;padding:40px;color:#666;font-size:14px}"]})};function xG(n,e){n&1&&(C(0,"div",7),ne(1,"div",8),D())}function PG(n,e){if(n&1&&(C(0,"div",12)(1,"div",13),H(2),D(),C(3,"div",14)(4,"div",15),ne(5,"video",16),D(),C(6,"div",17)(7,"h3"),H(8),D(),C(9,"p",18),H(10),D(),C(11,"div",19)(12,"span"),H(13),D(),C(14,"span"),H(15),D()()()()()),n&2){let t=e.$implicit,i=e.index;U(2),it("#",i+1,""),U(3),X("src",t.videoUrl,ar),U(3),dt(t.title),U(2),dt(t.vendor),U(3),it("\u{1F441}\uFE0F ",t.viewCount||0,""),U(2),it("\u2764\uFE0F ",t.likes||0,"")}}function RG(n,e){n&1&&(C(0,"div",20)(1,"p"),H(2,"No trending reels yet!"),D()())}function OG(n,e){if(n&1&&(C(0,"div",9),Pe(1,PG,16,6,"div",10)(2,RG,3,0,"div",11),D()),n&2){let t=fe();U(),X("ngForOf",t.trendingReels),U(),X("ngIf",!t.isLoading&&t.trendingReels.length===0)}}function kG(n,e){if(n&1&&(C(0,"div",12)(1,"div",21),H(2,"\u{1F195}"),D(),C(3,"div",14)(4,"div",15),ne(5,"video",16),D(),C(6,"div",17)(7,"h3"),H(8),D(),C(9,"p",18),H(10),D(),C(11,"div",19)(12,"span"),H(13),fd(14,"date"),D()()()()()),n&2){let t=e.$implicit;U(5),X("src",t.videoUrl,ar),U(3),dt(t.title),U(2),dt(t.vendor),U(3),it("\u{1F4C5} ",pd(14,4,t.createdAt==null?null:t.createdAt.toDate(),"shortDate"),"")}}function NG(n,e){n&1&&(C(0,"div",20)(1,"p"),H(2,"No new arrivals yet!"),D()())}function LG(n,e){if(n&1&&(C(0,"div",9),Pe(1,kG,15,7,"div",10)(2,NG,3,0,"div",11),D()),n&2){let t=fe();U(),X("ngForOf",t.newArrivalsReels),U(),X("ngIf",!t.isLoading&&t.newArrivalsReels.length===0)}}var dv=class n{constructor(e){this.reelsService=e}trendingReels=[];newArrivalsReels=[];activeTab="trending";isLoading=!0;touchStartX=0;touchEndX=0;ngOnInit(){return T(this,null,function*(){yield this.loadTrending()})}loadTrending(){return T(this,null,function*(){this.isLoading=!0;try{let e=yield this.reelsService.getReels(50);this.trendingReels=[...e].sort((t,i)=>(i.viewCount||0)-(t.viewCount||0)).slice(0,10),this.newArrivalsReels=[...e].sort((t,i)=>{let r=t.createdAt?.toDate?t.createdAt.toDate().getTime():0;return(i.createdAt?.toDate?i.createdAt.toDate().getTime():0)-r}).slice(0,10)}catch(e){console.error("Error loading trending:",e)}finally{this.isLoading=!1}})}switchTab(e){this.activeTab=e,window.scrollTo({top:0,behavior:"smooth"})}onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX}onTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.handleSwipe()}handleSwipe(){this.touchStartX-this.touchEndX>50&&this.activeTab==="trending"&&this.switchTab("new"),this.touchEndX-this.touchStartX>50&&this.activeTab==="new"&&this.switchTab("trending")}static \u0275fac=function(t){return new(t||n)(oe(Wi))};static \u0275cmp=_t({type:n,selectors:[["app-trending"]],standalone:!0,features:[vt],decls:13,vars:9,consts:[[1,"trending-page"],[1,"tabs-header"],[1,"tab",3,"click"],[1,"slider"],[1,"content-container",3,"touchstart","touchend"],["class","loading-spinner",4,"ngIf"],["class","reels-list",4,"ngIf"],[1,"loading-spinner"],[1,"spinner"],[1,"reels-list"],["class","ranking-item",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"ranking-item"],[1,"rank"],[1,"reel-card"],[1,"thumbnail"],["muted","","loop","","playsinline","",3,"src"],[1,"info"],[1,"vendor"],[1,"stats"],[1,"empty-state"],[1,"rank","new"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2),se("click",function(){return i.switchTab("trending")}),C(3,"span"),H(4,"Trending \u{1F525}"),D()(),C(5,"div",2),se("click",function(){return i.switchTab("new")}),C(6,"span"),H(7,"New Arrivals \u2728"),D()(),ne(8,"div",3),D(),C(9,"div",4),se("touchstart",function(o){return i.onTouchStart(o)})("touchend",function(o){return i.onTouchEnd(o)}),Pe(10,xG,2,0,"div",5)(11,OG,3,2,"div",6)(12,LG,3,2,"div",6),D()()),t&2&&(U(2),Ze("active",i.activeTab==="trending"),U(3),Ze("active",i.activeTab==="new"),U(3),Ze("right",i.activeTab==="new"),U(2),X("ngIf",i.isLoading),U(),X("ngIf",!i.isLoading&&i.activeTab==="trending"),U(),X("ngIf",!i.isLoading&&i.activeTab==="new"))},dependencies:[Tt,Yn,Xt,oM],styles:[".trending-page[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:#000;color:#fff}.tabs-header[_ngcontent-%COMP%]{display:flex;position:relative;background:#000000e6;padding-top:max(12px,env(safe-area-inset-top));border-bottom:1px solid rgba(255,255,255,.1);z-index:10}.tabs-header[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1;text-align:center;padding:16px 0;font-weight:600;font-size:15px;color:#888;cursor:pointer;transition:color .3s}.tabs-header[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#ff6b35}.tabs-header[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:50%;height:2px;background:#ff6b35;transition:transform .3s ease}.tabs-header[_ngcontent-%COMP%]   .slider.right[_ngcontent-%COMP%]{transform:translate(100%)}.content-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:80px;min-height:0}.reels-list[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:16px}.ranking-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;background:#111;border-radius:12px;padding:12px}.ranking-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{font-size:24px;font-weight:900;color:#ff6b35;min-width:40px;text-align:center;font-style:italic}.ranking-item[_ngcontent-%COMP%]   .rank.new[_ngcontent-%COMP%]{font-size:20px}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]{flex:1;display:flex;gap:12px}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:80px;height:120px;border-radius:8px;overflow:hidden;background:#222}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;color:#fff}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .vendor[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#ccc}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:12px;color:#888}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:30px;height:30px;border:3px solid rgba(255,255,255,.1);border-top-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#888}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};var ef=class n{constructor(e,t){this.auth=e;this.router=t;let i=this.auth.currentUser;i&&(this.userEmail=i.email,i.displayName&&(this.fullName=i.displayName,this.userName=i.displayName.toLowerCase().replace(/\s+/g,"_")))}favoritesComponent;userEmail=null;userName="foodie_explorer";fullName="Bengaluru Foodie";stats={posts:12,followers:"1.2k",following:248};logout(){return T(this,null,function*(){try{yield this.auth.signOut(),this.router.navigate(["/"])}catch(e){console.error("Error signing out:",e)}})}reloadFavorites(){this.favoritesComponent&&this.favoritesComponent.loadBookmarkedReels()}static \u0275fac=function(t){return new(t||n)(oe(St),oe(lt))};static \u0275cmp=_t({type:n,selectors:[["app-profile"]],viewQuery:function(t,i){if(t&1&&Fi(Ws,5),t&2){let r;di(r=hi())&&(i.favoritesComponent=r.first)}},standalone:!0,features:[vt],decls:64,vars:6,consts:[[1,"profile-page"],[1,"top-bar"],[1,"username"],[1,"verified-badge"],[1,"top-actions"],[1,"icon-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],[1,"scroll-content"],[1,"profile-header-row"],[1,"avatar-container"],[1,"story-ring"],["src","assets/avatar-placeholder.svg","alt","Avatar","onerror","this.src='https://ui-avatars.com/api/?name=Foodie+Explorer&background=ff6b35&color=fff'"],[1,"stats-container"],[1,"stat-item"],[1,"count"],[1,"label"],[1,"bio-section"],[1,"fullname"],[1,"bio-text"],[1,"action-buttons"],[1,"edit-profile-btn"],[1,"share-profile-btn"],[1,"content-tabs"],[1,"tab","active"],["x","3","y","3","width","7","height","7"],["x","14","y","3","width","7","height","7"],["x","14","y","14","width","7","height","7"],["x","3","y","14","width","7","height","7"],[1,"tab"],[1,"reel-icon"],["x","2","y","2","width","20","height","20","rx","5","ry","5"],["d","M10 8L16 12L10 16V8Z","fill","currentColor","stroke","none"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"grid-content"],[3,"showHeader"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1)(2,"h1",2),H(3),ne(4,"span",3),D(),C(5,"div",4)(6,"button",5),se("click",function(){return i.logout()}),Te(),C(7,"svg",6),ne(8,"path",7)(9,"polyline",8)(10,"line",9),D()()()(),Ue(),C(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),ne(15,"img",14),D()(),C(16,"div",15)(17,"div",16)(18,"span",17),H(19),D(),C(20,"span",18),H(21,"Posts"),D()(),C(22,"div",16)(23,"span",17),H(24),D(),C(25,"span",18),H(26,"Followers"),D()(),C(27,"div",16)(28,"span",17),H(29),D(),C(30,"span",18),H(31,"Following"),D()()()(),C(32,"div",19)(33,"h2",20),H(34),D(),C(35,"p",21),H(36,"\u{1F4CD} Exploring Namma Bengaluru"),ne(37,"br"),H(38,"\u{1F35B} South Indian Food Lover"),ne(39,"br"),H(40,"\u2728 Digital Creator"),D()(),C(41,"div",22)(42,"button",23),H(43,"Edit Profile"),D(),C(44,"button",24),H(45,"Share Profile"),D()(),C(46,"div",25)(47,"div",26),Te(),C(48,"svg",6),ne(49,"rect",27)(50,"rect",28)(51,"rect",29)(52,"rect",30),D()(),Ue(),C(53,"div",31)(54,"div",32),Te(),C(55,"svg",6),ne(56,"rect",33)(57,"path",34),D()()(),Ue(),C(58,"div",31),Te(),C(59,"svg",6),ne(60,"path",35)(61,"circle",36),D()()(),Ue(),C(62,"div",37),ne(63,"app-favorites",38),D()()()),t&2&&(U(3),it("",i.userName," "),U(16),dt(i.stats.posts),U(5),dt(i.stats.followers),U(5),dt(i.stats.following),U(5),dt(i.fullName),U(29),X("showHeader",!1))},dependencies:[Tt,Ws],styles:[".profile-page[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:#000;color:#fff}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;padding-top:max(12px,env(safe-area-inset-top));background:#000;position:sticky;top:0;z-index:10;border-bottom:1px solid rgba(255,255,255,.05)}.top-bar[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:22px;font-weight:700;margin:0;display:flex;align-items:center;gap:4px}.top-bar[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;padding:4px;cursor:pointer}.scroll-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:80px}.profile-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;gap:20px}.avatar-container[_ngcontent-%COMP%]   .story-ring[_ngcontent-%COMP%]{width:86px;height:86px;border-radius:50%;padding:3px;background:linear-gradient(45deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888)}.avatar-container[_ngcontent-%COMP%]   .story-ring[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:3px solid #000;background:#222}.stats-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-around}.stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:13px;color:#fff}.bio-section[_ngcontent-%COMP%]{padding:0 16px;margin-bottom:16px}.bio-section[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:14px;font-weight:700;margin:0 0 4px}.bio-section[_ngcontent-%COMP%]   .bio-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.4;margin:0;color:#efefef}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;padding:0 16px;margin-bottom:20px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;background:#363636;border:none;color:#fff;padding:8px 16px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#444}.content-tabs[_ngcontent-%COMP%]{display:flex;border-top:1px solid rgba(255,255,255,.1)}.content-tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;padding:12px 0;cursor:pointer;color:#888}.content-tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.content-tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.8}.grid-content[_ngcontent-%COMP%]     app-favorites .favorites-container{position:relative;inset:auto;padding:0 4px 20px;overflow:visible;height:auto;background:transparent}.grid-content[_ngcontent-%COMP%]     app-favorites .reels-grid{padding:0}.grid-content[_ngcontent-%COMP%]     app-favorites .loading-state, .grid-content[_ngcontent-%COMP%]     app-favorites .empty-state{min-height:300px}"]})};var hv=class n{constructor(e,t,i,r){this.router=e;this.locationService=t;this.navigationService=i;this.auth=r;let o=this.router.getCurrentNavigation();if(o?.extras?.state){let a=o.extras.state;if(a.location&&(this.location=`${a.location}, Bangalore`),a.latitude&&a.longitude&&this.locationService.setUserLocation(a.latitude,a.longitude),a.openFeed&&a.reelId){this.activeTab="feed";let l=a.reelId,u=(f=0)=>{setTimeout(()=>{this.videoFeedComponent&&this.videoFeedComponent.reels&&this.videoFeedComponent.reels.length>0?(console.log("[MainApp] Video feed loaded, navigating to reel:",l),this.videoFeedComponent.navigateToReel(l)):f<10?(console.log("[MainApp] Waiting for video feed to load... attempt",f+1),u(f+1)):console.error("[MainApp] Failed to navigate to reel - video feed did not load")},500)};u()}}}location="Koramangala, Bangalore";navigate=new Qe;activeTab="feed";showProfileMenu=!1;favoritesComponent;profileComponent;videoFeedComponent;ngOnInit(){return T(this,null,function*(){if(this.location==="Koramangala, Bangalore")try{let e=yield this.locationService.getUserLocation(),t=this.locationService.findNearestArea(e.latitude,e.longitude);this.location=`${t}, Bangalore`}catch(e){console.error("Error getting location:",e)}this.locationService.currentLocation$.subscribe(e=>{e&&(this.location=`${e.name}, Bangalore`,this.videoFeedComponent&&this.activeTab==="feed"&&this.videoFeedComponent.reloadReelsForNewLocation())}),this.navigationService.selectedReelId$.subscribe(e=>{if(e){console.log("[MainApp] Received reel selection:",e),this.activeTab="feed";let t=(i=0)=>{setTimeout(()=>{this.videoFeedComponent&&this.videoFeedComponent.reels&&this.videoFeedComponent.reels.length>0?(console.log("[MainApp] Navigating to reel:",e),this.videoFeedComponent.navigateToReel(e),this.navigationService.clearSelection()):i<15?(console.log("[MainApp] Waiting for reels... attempt",i+1),t(i+1)):console.error("[MainApp] Failed to navigate - reels not loaded")},400)};t()}})})}select(e){this.activeTab=e,this.navigate.emit(e),e==="profile"&&this.profileComponent&&this.profileComponent.reloadFavorites(),e==="favorites"&&this.favoritesComponent&&this.favoritesComponent.loadBookmarkedReels()}goToUpload(){this.select("upload")}logout(){return T(this,null,function*(){try{yield this.auth.signOut(),this.router.navigate(["/"])}catch(e){console.error("Error signing out:",e)}})}toggleProfileMenu(){this.showProfileMenu=!this.showProfileMenu}static \u0275fac=function(t){return new(t||n)(oe(lt),oe(Gi),oe(gu),oe(St))};static \u0275cmp=_t({type:n,selectors:[["app-main-app"]],viewQuery:function(t,i){if(t&1&&(Fi(Ws,5),Fi(ef,5),Fi(_c,5)),t&2){let r;di(r=hi())&&(i.favoritesComponent=r.first),di(r=hi())&&(i.profileComponent=r.first),di(r=hi())&&(i.videoFeedComponent=r.first)}},outputs:{navigate:"navigate"},standalone:!0,features:[vt],decls:31,vars:23,consts:[[1,"main-app"],[1,"top-nav"],[1,"nav-left"],[1,"nav-right"],[3,"isActive"],[3,"uploadComplete","canceled"],[1,"bottom-nav"],[1,"bottom-nav-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"nav-icon"],["x","2","y","2","width","20","height","20","rx","5","ry","5","stroke","currentColor","stroke-width","2"],["d","M10 8L16 12L10 16V8Z","fill","currentColor","stroke","none"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21L16.65 16.65","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"bottom-nav-btn","upload-btn",3,"click"],["d","M12 7v10M7 12h10","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"profile-container-bottom"],["d","M20 21C20 18.2386 17.7614 16 15 16H9C6.23858 16 4 18.2386 4 21","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","7","r","4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1),ne(2,"div",2)(3,"div",3),D(),ne(4,"app-video-feed",4)(5,"app-search")(6,"app-trending")(7,"app-profile")(8,"app-favorites"),C(9,"app-upload-reel",5),se("uploadComplete",function(){return i.select("feed")})("canceled",function(){return i.select("feed")}),D(),C(10,"div",6)(11,"button",7),se("click",function(){return i.select("feed")}),Te(),C(12,"svg",8),ne(13,"rect",9)(14,"path",10),D()(),Ue(),C(15,"button",7),se("click",function(){return i.select("search")}),Te(),C(16,"svg",8),ne(17,"circle",11)(18,"path",12),D()(),Ue(),C(19,"button",13),se("click",function(){return i.goToUpload()}),Te(),C(20,"svg",8),ne(21,"rect",9)(22,"path",14),D()(),Ue(),C(23,"button",7),se("click",function(){return i.select("favorites")}),Te(),C(24,"svg",8),ne(25,"path",15),D()(),Ue(),C(26,"div",16)(27,"button",7),se("click",function(){return i.select("profile")}),Te(),C(28,"svg",8),ne(29,"path",17)(30,"circle",18),D()()()()()),t&2&&(U(4),Ze("hidden",i.activeTab!=="feed"),X("isActive",i.activeTab==="feed"),U(),Ze("hidden",i.activeTab!=="search"),U(),Ze("hidden",i.activeTab!=="trending"),U(),Ze("hidden",i.activeTab!=="profile"),U(),Ze("hidden",i.activeTab!=="favorites"),U(),Ze("hidden",i.activeTab!=="upload"),U(2),Ze("active",i.activeTab==="feed"),U(4),Ze("active",i.activeTab==="search"),U(4),Ze("active",i.activeTab==="upload"),U(4),Ze("active",i.activeTab==="favorites"),U(4),Ze("active",i.activeTab==="profile"))},dependencies:[Tt,_c,Ws,_u,uv,dv,ef,Xn],styles:['.main-app[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;flex-direction:column;background:#000;font-family:Poppins,sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.top-nav[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:10;display:flex;justify-content:space-between;padding:1rem;padding-top:max(1rem,env(safe-area-inset-top));background:linear-gradient(to bottom,rgba(0,0,0,.8) 0%,transparent 100%)}.profile-container-bottom[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.bottom-nav[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;display:flex;justify-content:space-around;padding:.75rem 0;padding-bottom:0;background:#0003;backdrop-filter:blur(1px);-webkit-backdrop-filter:blur(1px);border-top:1px solid rgba(255,255,255,.1);z-index:20}.bottom-nav-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#888;font-size:.7rem;display:flex;flex-direction:column;align-items:center;gap:.25rem;cursor:pointer;transition:color .2s;padding:.5rem 1rem;font-weight:400}.bottom-nav-btn.active[_ngcontent-%COMP%]{color:#ff6b35}.bottom-nav-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:2px}.nav-icon[_ngcontent-%COMP%]{width:24px;height:24px;color:inherit;transition:all .2s}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="M3 9.5"])   path[_ngcontent-%COMP%]{fill:currentColor;stroke:currentColor}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="19 21l-7-5"])   path[_ngcontent-%COMP%]{stroke:currentColor}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(polyline[points*="23 6"])   polyline[_ngcontent-%COMP%]{fill:none;stroke-width:3px}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="M20 21C20"])   path[_ngcontent-%COMP%], .bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="M20 21C20"])   circle[_ngcontent-%COMP%]{stroke:currentColor}@media (min-width: 768px){.location-modal[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;border-radius:24px;max-height:70vh}.modal-overlay[_ngcontent-%COMP%]{align-items:center}}']})};var tf=()=>{let n=Q(St),e=Q(lt);return Qg(n).pipe(Me(t=>t?!0:(e.navigate(["/phone-input"]),!1)))};var bT=()=>{let n=Q(St),e=Q(lt);return Qg(n).pipe(Me(t=>t?(console.log("[NoAuthGuard] User is authenticated, redirecting to main-app"),e.createUrlTree(["/main-app"])):!0))};var sN=[{path:"",component:J_},{path:"phone-input",component:ov,canActivate:[gc,bT]},{path:"otp",component:sv,canActivate:[gc,bT]},{path:"location-permission",component:av,canActivate:[tf,gc]},{path:"main-app",component:hv,canActivate:[tf,gc]},{path:"video-feed",component:_c,canActivate:[tf,gc]},{path:"upload-reel",component:_u,canActivate:[tf,gc]}];var aN={providers:[gx(sN),vM(),Yx(),SP(()=>DP(Hh.firebase)),IR(()=>CR()),xk(()=>kk()),mc]};var fv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_t({type:n,selectors:[["app-root"]],standalone:!0,features:[vt],decls:1,vars:0,template:function(t,i){t&1&&ne(0,"router-outlet")},dependencies:[tb]})};TM(fv,aN).catch(n=>console.error(n));

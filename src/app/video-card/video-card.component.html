<div class="video-card" [class.active]="active">
  <video #videoEl class="video-player" loop muted autoplay playsinline webkit-playsinline preload="auto"
    [poster]="displayPoster" [src]="displaySrc" (click)="onVideoTap($event)" (touchend)="onVideoTap($event)">
  </video>

  <!-- Loading Spinner -->
  <div class="" *ngIf="isLoading">
    <div class="spinner"></div>
  </div>

  <!-- Double-tap Like Animation -->
  <div class="like-animation" *ngIf="showLikeAnimation">
    <svg width="100" height="100" viewBox="0 0 24 24" fill="white">
      <path
        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
    </svg>
  </div>

  <div class="video-overlay">
    <div class="video-info">
      <div class="food-details">
        <h3 class="dish-name">{{displayTitle}}</h3>
        <p class="vendor-name">{{displayVendor}}</p>
        <div class="price-distance">
          <span class="price">â‚¹{{displayPrice}}</span>
          <span class="distance">{{displayDistance}}</span>
        </div>
        <!-- View Count -->
        <div class="view-count" *ngIf="displayViewCount > 0">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2" />
            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" />
          </svg>
          <span>{{ formatViewCount(displayViewCount) }}</span>
        </div>
      </div>
    </div>

    <div class="action-buttons">
      <button class="action-btn like-btn" [class.liked]="displayIsLiked" (click)="toggleLike()">
        <svg class="action-icon" width="28" height="28" viewBox="0 0 24 24"
          [attr.fill]="displayIsLiked ? 'currentColor' : 'none'">
          <path
            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        <span class="like-count" *ngIf="displayLikes > 0">{{ displayLikes }}</span>
      </button>

      <button class="action-btn bookmark-btn" [class.bookmarked]="displayIsBookmarked" (click)="bookmark()">
        <svg class="action-icon" width="28" height="28" viewBox="0 0 24 24"
          [attr.fill]="displayIsBookmarked ? 'currentColor' : 'none'">
          <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>

      <button class="action-btn share-btn" (click)="share()">
        <svg class="action-icon" width="28" height="28" viewBox="0 0 24 24" fill="none">
          <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round" />
          <polyline points="16 6 12 2 8 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" />
          <line x1="12" y1="2" x2="12" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
      </button>
    </div>
  </div>
</div>
<div class="video-feed" (touchstart)="onTouchStart($event)" (touchmove)="onTouchMove($event)"
  (touchend)="onTouchEnd($event)">

  <!-- Pull to Refresh Spinner -->
  <div class="refresh-indicator" [style.transform]="'translateY(' + (isRefreshing ? 60 : pullMoveY) + 'px)'"
    [class.refreshing]="isRefreshing">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
      [style.transform]="'rotate(' + (pullMoveY * 2) + 'deg)'">
      <path
        d="M12 4V2M12 20v2M4 12H2m20 0h-2m-2.05-5.95l-1.414-1.414M4.929 19.071L6.343 17.657m12.728 0l-1.414 1.414M4.929 4.929L6.343 6.343"
        stroke="currentColor" stroke-width="2.5" stroke-linecap="round" />
    </svg>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading && !isRefreshing">
    <div class="spinner"></div>
    <p>Loading tasty bites...</p>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading && reels.length === 0">
    <div class="empty-content">
      <h2>No Reels Found</h2>
      <p>Be the first to share a tasty bite!</p>
      <div class="button-group">
        <button class="seed-btn" (click)="seedData()">Seed Sample Data</button>
        <a routerLink="/upload-reel" class="upload-btn">Upload Reel</a>
      </div>
    </div>
  </div>

  <app-video-card *ngFor="let reel of reels; let i = index" [reel]="reel" [active]="i === currentIndex"
    [relativeIndex]="i - currentIndex" [isMuted]="isGlobalMuted" (muteChanged)="onMuteChanged($event)"
    [priority]="i === currentIndex || i === currentIndex + 1 ? 'high' : 'low'" (liked)="onLike(i)"
    (bookmarked)="onBookmark(i)" (shared)="onShare(i)">
  </app-video-card>
</div>
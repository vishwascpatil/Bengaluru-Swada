<div class="video-feed" (touchstart)="onTouchStart($event)" (touchmove)="onTouchMove($event)"
  (touchend)="onTouchEnd($event)">

  <!-- Tab Header -->
  <div class="feed-tabs">
    <div class="tab-item" [class.active]="activeTab === 'all'" (click)="switchTab('all')">
      <span>All</span>
    </div>
    <div class="tab-separator">|</div>
    <div class="tab-item" [class.active]="activeTab === 'trending'" (click)="switchTab('trending')">
      <span>Trending</span>
    </div>
    <div class="tab-separator">|</div>
    <div class="tab-item" [class.active]="activeTab === 'new'" (click)="switchTab('new')">
      <span>New Arrivals</span>
    </div>
    <!-- Moving Underline Indicator -->
    <div class="tab-indicator" [class.trending-active]="activeTab === 'trending'"
      [class.new-active]="activeTab === 'new'"></div>
  </div>

  <!-- Premium Pull to Refresh Indicator -->
  <div class="refresh-indicator" [style.transform]="'translateY(' + (isRefreshing ? 70 : pullMoveY) + 'px)'"
    [class.refreshing]="isRefreshing" [class.visible]="pullMoveY > 10">
    <div class="spinner-container" [style.transform]="'rotate(' + (pullMoveY * 1.5) + 'deg)'">
      <div class="spinner-outer-ring"></div>
      <div class="spinner-inner-ring"></div>
      <div class="spinner-core"></div>
    </div>
  </div>

  <!-- Loading / Skeleton State -->
  <div class="loading-container" *ngIf="isLoading">
    <app-video-feed-skeleton></app-video-feed-skeleton>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading && reels.length === 0">
    <div class="empty-content">
      <h2>No Reels Found</h2>
      <p>Be the first to share a tasty bite!</p>
      <div class="button-group">
        <button class="seed-btn" (click)="seedData()">Seed Sample Data</button>
        <a routerLink="/upload-reel" class="upload-btn">Upload Reel</a>
      </div>
    </div>
  </div>

  <!-- Video Reel Grid -->
  <div class="reels-container" *ngIf="!isLoading && reels.length > 0">
    <app-video-card *ngFor="let reel of reels; let i = index" [reel]="reel" [active]="i === currentIndex && isActive"
      [relativeIndex]="i - currentIndex" [priority]="getPriority(i)" [isMuted]="isGlobalMuted"
      [canDelete]="isOwner(reel)" (muteChanged)="onMuteChanged($event)" (deleted)="onReelDeleted(reel)"
      (liked)="onLike(i)" (bookmarked)="onBookmark(i)" (shared)="onShare(i)">
    </app-video-card>
  </div>
</div>
var kN=Object.create;var Ev=Object.defineProperty,NN=Object.defineProperties,LN=Object.getOwnPropertyDescriptor,FN=Object.getOwnPropertyDescriptors,VN=Object.getOwnPropertyNames,Uf=Object.getOwnPropertySymbols,$T=Object.getPrototypeOf,Iv=Object.prototype.hasOwnProperty,HT=Object.prototype.propertyIsEnumerable,BN=Reflect.get;var zT=(n,e,t)=>e in n?Ev(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Y=(n,e)=>{for(var t in e||={})Iv.call(e,t)&&zT(n,t,e[t]);if(Uf)for(var t of Uf(e))HT.call(e,t)&&zT(n,t,e[t]);return n},Oe=(n,e)=>NN(n,FN(e));var Cv=(n,e)=>{var t={};for(var i in n)Iv.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Uf)for(var i of Uf(n))e.indexOf(i)<0&&HT.call(n,i)&&(t[i]=n[i]);return t};var UN=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var jN=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of VN(e))!Iv.call(n,r)&&r!==t&&Ev(n,r,{get:()=>e[r],enumerable:!(i=LN(e,r))||i.enumerable});return n};var zN=(n,e,t)=>(t=n!=null?kN($T(n)):{},jN(e||!n||!n.__esModule?Ev(t,"default",{value:n,enumerable:!0}):t,n));var ns=(n,e,t)=>BN($T(n),t,e);var T=(n,e,t)=>new Promise((i,r)=>{var o=u=>{try{l(t.next(u))}catch(f){r(f)}},a=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(o,a);l((t=t.apply(n,e)).next())});var oN=UN((av,rN)=>{"use strict";(function(n,e){typeof av=="object"&&typeof rN<"u"?e(av):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(av,function(n){"use strict";var e="1.9.4";function t(s){var c,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(c in _)s[c]=_[c]}return s}var i=Object.create||function(){function s(){}return function(c){return s.prototype=c,new s}}();function r(s,c){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function l(s,c,h){var p,_,w,x;return x=function(){p=!1,_&&(w.apply(h,_),_=!1)},w=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(x,c),p=!0)},w}function u(s,c,h){var p=c[1],_=c[0],w=p-_;return s===p&&h?s:((s-_)%w+w)%w+_}function f(){return!1}function m(s,c){if(c===!1)return s;var h=Math.pow(10,c===void 0?6:c);return Math.round(s*h)/h}function v(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return v(s).split(/\s+/)}function b(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in c)s.options[h]=c[h];return s.options}function M(s,c,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function N(s,c){return s.replace(k,function(h,p){var _=c[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(c)),_})}var G=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function te(s,c){for(var h=0;h<s.length;h++)if(s[h]===c)return h;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ue(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var Ne=0;function he(s){var c=+new Date,h=Math.max(0,16-(c-Ne));return Ne=c+h,window.setTimeout(s,h)}var R=window.requestAnimationFrame||ue("RequestAnimationFrame")||he,S=window.cancelAnimationFrame||ue("CancelAnimationFrame")||ue("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function A(s,c,h){if(h&&R===he)s.call(c);else return R.call(window,r(s,c))}function O(s){s&&S.call(window,s)}var F={__proto__:null,extend:t,create:i,bind:r,get lastId(){return o},stamp:a,throttle:l,wrapNum:u,falseFn:f,formatNum:m,trim:v,splitWords:E,setOptions:b,getParamString:M,template:N,isArray:G,indexOf:te,emptyImageUrl:J,requestFn:R,cancelFn:S,requestAnimFrame:A,cancelAnimFrame:O};function V(){}V.extend=function(s){var c=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=i(h);p.constructor=c,c.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(c[_]=this[_]);return s.statics&&t(c,s.statics),s.includes&&(P(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?i(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,x=p._initHooks.length;w<x;w++)p._initHooks[w].call(this)}},c},V.include=function(s){var c=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},V.mergeOptions=function(s){return t(this.prototype.options,s),this},V.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function P(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=G(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Dt={on:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h)}return this},off:function(s,c,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],c);else{s=E(s);for(var _=arguments.length===1,w=0,x=s.length;w<x;w++)_?this._off(s[w]):this._off(s[w],c,h)}return this},_on:function(s,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,h)===!1){h===this&&(h=void 0);var _={fn:c,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,c,h){var p,_,w;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,w=p.length;_<w;_++)p[_].fn=f;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var x=this._listens(s,c,h);if(x!==!1){var U=p[x];this._firingCount&&(U.fn=f,this._events[s]=p=p.slice()),p.splice(x,1)}}},fire:function(s,c,h){if(!this.listens(s,h))return this;var p=t({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,x=_.length;w<x;w++){var U=_[w],z=U.fn;U.once&&this.off(s,z,U.ctx),z.call(U.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,c,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=c;typeof c!="function"&&(p=!!c,_=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var x in this._eventParents)if(this._eventParents[x].listens(s,c,h,p))return!0}return!1},_listens:function(s,c,h){if(!this._events)return!1;var p=this._events[s]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var _=0,w=p.length;_<w;_++)if(p[_].fn===c&&p[_].ctx===h)return _;return!1},once:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c,!0);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};Dt.addEventListener=Dt.on,Dt.removeEventListener=Dt.clearAllEventListeners=Dt.off,Dt.addOneTimeEventListener=Dt.once,Dt.fireEvent=Dt.fire,Dt.hasEventListeners=Dt.listens;var Hn=V.extend(Dt);function W(s,c,h){this.x=h?Math.round(s):s,this.y=h?Math.round(c):c}var fe=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(s){return this.clone()._add(Z(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Z(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new W(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new W(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=fe(this.x),this.y=fe(this.y),this},distanceTo:function(s){s=Z(s);var c=s.x-this.x,h=s.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(s){return s=Z(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Z(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function Z(s,c,h){return s instanceof W?s:G(s)?new W(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new W(s.x,s.y):new W(s,c,h)}function _e(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}_e.prototype={extend:function(s){var c,h;if(!s)return this;if(s instanceof W||typeof s[0]=="number"||"x"in s)c=h=Z(s);else if(s=Qe(s),c=s.min,h=s.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,h;return typeof s[0]=="number"||s instanceof W?s=Z(s):s=Qe(s),s instanceof _e?(c=s.min,h=s.max):c=h=s,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=Qe(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>=c.x&&p.x<=h.x,x=_.y>=c.y&&p.y<=h.y;return w&&x},overlaps:function(s){s=Qe(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>c.x&&p.x<h.x,x=_.y>c.y&&p.y<h.y;return w&&x},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*s,_=Math.abs(c.y-h.y)*s;return Qe(Z(c.x-p,c.y-_),Z(h.x+p,h.y+_))},equals:function(s){return s?(s=Qe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Qe(s,c){return!s||s instanceof _e?s:new _e(s,c)}function Et(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}Et.prototype={extend:function(s){var c=this._southWest,h=this._northEast,p,_;if(s instanceof Ie)p=s,_=s;else if(s instanceof Et){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(we(s)||Le(s)):this;return!c&&!h?(this._southWest=new Ie(p.lat,p.lng),this._northEast=new Ie(_.lat,_.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*s,_=Math.abs(c.lng-h.lng)*s;return new Et(new Ie(c.lat-p,c.lng-_),new Ie(h.lat+p,h.lng+_))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ie||"lat"in s?s=we(s):s=Le(s);var c=this._southWest,h=this._northEast,p,_;return s instanceof Et?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=c.lat&&_.lat<=h.lat&&p.lng>=c.lng&&_.lng<=h.lng},intersects:function(s){s=Le(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>=c.lat&&p.lat<=h.lat,x=_.lng>=c.lng&&p.lng<=h.lng;return w&&x},overlaps:function(s){s=Le(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>c.lat&&p.lat<h.lat,x=_.lng>c.lng&&p.lng<h.lng;return w&&x},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=Le(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(s,c){return s instanceof Et?s:new Et(s,c)}function Ie(s,c,h){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,h!==void 0&&(this.alt=+h)}Ie.prototype={equals:function(s,c){if(!s)return!1;s=we(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+m(this.lat,s)+", "+m(this.lng,s)+")"},distanceTo:function(s){return Si.distance(this,we(s))},wrap:function(){return Si.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return Le([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function we(s,c,h){return s instanceof Ie?s:G(s)&&typeof s[0]!="object"?s.length===3?new Ie(s[0],s[1],s[2]):s.length===2?new Ie(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ie(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new Ie(s,c,h)}var ln={latLngToPoint:function(s,c){var h=this.projection.project(s),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(s,c){var h=this.scale(c),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(c.min,h),_=this.transformation.transform(c.max,h);return new _e(p,_)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ie(h,c,p)},wrapLatLngBounds:function(s){var c=s.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,_=c.lng-h.lng;if(p===0&&_===0)return s;var w=s.getSouthWest(),x=s.getNorthEast(),U=new Ie(w.lat-p,w.lng-_),z=new Ie(x.lat-p,x.lng-_);return new Et(U,z)}},Si=t({},ln,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var h=Math.PI/180,p=s.lat*h,_=c.lat*h,w=Math.sin((c.lat-s.lat)*h/2),x=Math.sin((c.lng-s.lng)*h/2),U=w*w+Math.cos(p)*Math.cos(_)*x*x,z=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*z}}),Ot=6378137,ei={R:Ot,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*c);return new W(this.R*s.lng*c,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var c=180/Math.PI;return new Ie((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:function(){var s=Ot*Math.PI;return new _e([-s,-s],[s,s])}()};function un(s,c,h,p){if(G(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=h,this._d=p}un.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new W((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function kn(s,c,h,p){return new un(s,c,h,p)}var Di=t({},Si,{code:"EPSG:3857",projection:ei,transformation:function(){var s=.5/(Math.PI*ei.R);return kn(s,.5,-s,.5)}()}),vu=t({},Di,{code:"EPSG:900913"});function _c(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function vc(s,c){var h="",p,_,w,x,U,z;for(p=0,w=s.length;p<w;p++){for(U=s[p],_=0,x=U.length;_<x;_++)z=U[_],h+=(_?"L":"M")+z.x+" "+z.y;h+=c?pe.svg?"z":"x":""}return h||"M0 0"}var Zs=document.documentElement.style,Qs="ActiveXObject"in window,nf=Qs&&!document.addEventListener,rf="msLaunchUri"in navigator&&!("documentMode"in document),yc=ti("webkit"),yu=ti("android"),wc=ti("android 2")||ti("android 3"),of=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),fv=yu&&ti("Google")&&of<537&&!("AudioNode"in window),Ys=!!window.opera,bc=!rf&&ti("chrome"),Ec=ti("gecko")&&!yc&&!Ys&&!Qs,dn=!bc&&ti("safari"),hn=ti("phantom"),Js="OTransition"in Zs,sf=navigator.platform.indexOf("Win")===0,wu=Qs&&"transition"in Zs,bu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!wc,qo="MozPerspective"in Zs,af=!window.L_DISABLE_3D&&(wu||bu||qo)&&!Js&&!hn,Go=typeof orientation<"u"||ti("mobile"),Eu=Go&&yc,pv=Go&&bu,cf=!window.PointerEvent&&window.MSPointerEvent,Ic=!!(window.PointerEvent||cf),Iu="ontouchstart"in window||!!window.TouchEvent,lf=!window.L_NO_TOUCH&&(Iu||Ic),Xs=Go&&Ys,Cu=Go&&Ec,Tu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Jr=function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return s}(),uf=function(){return!!document.createElement("canvas").getContext}(),Wo=!!(document.createElementNS&&_c("svg").createSVGRect),df=!!Wo&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ea=!Wo&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),hf=navigator.platform.indexOf("Mac")===0,En=navigator.platform.indexOf("Linux")===0;function ti(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var pe={ie:Qs,ielt9:nf,edge:rf,webkit:yc,android:yu,android23:wc,androidStock:fv,opera:Ys,chrome:bc,gecko:Ec,safari:dn,phantom:hn,opera12:Js,win:sf,ie3d:wu,webkit3d:bu,gecko3d:qo,any3d:af,mobile:Go,mobileWebkit:Eu,mobileWebkit3d:pv,msPointer:cf,pointer:Ic,touch:lf,touchNative:Iu,mobileOpera:Xs,mobileGecko:Cu,retina:Tu,passiveEvents:Jr,canvas:uf,svg:Wo,vml:ea,inlineSvg:df,mac:hf,linux:En},Ko=pe.msPointer?"MSPointerDown":"pointerdown",ff=pe.msPointer?"MSPointerMove":"pointermove",pf=pe.msPointer?"MSPointerUp":"pointerup",Xr=pe.msPointer?"MSPointerCancel":"pointercancel",Su={touchstart:Ko,touchmove:ff,touchend:pf,touchcancel:Xr},mf={touchstart:_f,touchmove:Zo,touchend:Zo,touchcancel:Zo},Zi={},Du=!1;function Au(s,c,h){return c==="touchstart"&&xu(),mf[c]?(h=mf[c].bind(this,h),s.addEventListener(Su[c],h,!1),h):(console.warn("wrong event specified:",c),f)}function Cc(s,c,h){if(!Su[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Su[c],h,!1)}function pr(s){Zi[s.pointerId]=s}function gf(s){Zi[s.pointerId]&&(Zi[s.pointerId]=s)}function Mu(s){delete Zi[s.pointerId]}function xu(){Du||(document.addEventListener(Ko,pr,!0),document.addEventListener(ff,gf,!0),document.addEventListener(pf,Mu,!0),document.addEventListener(Xr,Mu,!0),Du=!0)}function Zo(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in Zi)c.touches.push(Zi[h]);c.changedTouches=[c],s(c)}}function _f(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&jt(c),Zo(s,c)}function vf(s){var c={},h,p;for(p in s)h=s[p],c[p]=h&&h.bind?h.bind(s):h;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var mv=200;function Tc(s,c){s.addEventListener("dblclick",c);var h=0,p;function _(w){if(w.detail!==1){p=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var x=Bu(w);if(!(x.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!x.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var U=Date.now();U-h<=mv?(p++,p===2&&c(vf(w))):p=1,h=U}}}return s.addEventListener("click",_),{dblclick:c,simDblclick:_}}function yf(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var ta=Ai(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qi=Ai(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),mr=Qi==="webkitTransition"||Qi==="OTransition"?Qi+"End":"transitionend";function Sc(s){return typeof s=="string"?document.getElementById(s):s}function na(s,c){var h=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[c]:null}return h==="auto"?null:h}function tt(s,c,h){var p=document.createElement(s);return p.className=c||"",h&&h.appendChild(p),p}function At(s){var c=s.parentNode;c&&c.removeChild(s)}function ia(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function gr(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function _r(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function Dc(s,c){if(s.classList!==void 0)return s.classList.contains(c);var h=ra(s);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function Fe(s,c){if(s.classList!==void 0)for(var h=E(c),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!Dc(s,c)){var w=ra(s);Pu(s,(w?w+" ":"")+c)}}function Ut(s,c){s.classList!==void 0?s.classList.remove(c):Pu(s,v((" "+ra(s)+" ").replace(" "+c+" "," ")))}function Pu(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function ra(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Nn(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&gv(s,c)}function gv(s,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):s.style.filter+=" progid:"+p+"(opacity="+c+")"}function Ai(s){for(var c=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in c)return s[h];return!1}function In(s,c,h){var p=c||new W(0,0);s.style[ta]=(pe.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function kt(s,c){s._leaflet_pos=c,pe.any3d?In(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Mi(s){return s._leaflet_pos||new W(0,0)}var Qo,ht,Yo;if("onselectstart"in document)Qo=function(){Pe(window,"selectstart",jt)},ht=function(){wt(window,"selectstart",jt)};else{var Yi=Ai(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qo=function(){if(Yi){var s=document.documentElement.style;Yo=s[Yi],s[Yi]="none"}},ht=function(){Yi&&(document.documentElement.style[Yi]=Yo,Yo=void 0)}}function eo(){Pe(window,"dragstart",jt)}function Ru(){wt(window,"dragstart",jt)}var oa,Ou;function ku(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ac(),oa=s,Ou=s.style.outlineStyle,s.style.outlineStyle="none",Pe(window,"keydown",Ac))}function Ac(){oa&&(oa.style.outlineStyle=Ou,oa=void 0,Ou=void 0,wt(window,"keydown",Ac))}function wf(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function to(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var vr={__proto__:null,TRANSFORM:ta,TRANSITION:Qi,TRANSITION_END:mr,get:Sc,getStyle:na,create:tt,remove:At,empty:ia,toFront:gr,toBack:_r,hasClass:Dc,addClass:Fe,removeClass:Ut,setClass:Pu,getClass:ra,setOpacity:Nn,testProp:Ai,setTransform:In,setPosition:kt,getPosition:Mi,get disableTextSelection(){return Qo},get enableTextSelection(){return ht},disableImageDrag:eo,enableImageDrag:Ru,preventOutline:ku,restoreOutline:Ac,getSizedParentNode:wf,getScale:to};function Pe(s,c,h,p){if(c&&typeof c=="object")for(var _ in c)Lu(s,_,c[_],h);else{c=E(c);for(var w=0,x=c.length;w<x;w++)Lu(s,c[w],h,p)}return this}var ni="_leaflet_events";function wt(s,c,h,p){if(arguments.length===1)no(s),delete s[ni];else if(c&&typeof c=="object")for(var _ in c)Fu(s,_,c[_],h);else if(c=E(c),arguments.length===2)no(s,function(U){return te(c,U)!==-1});else for(var w=0,x=c.length;w<x;w++)Fu(s,c[w],h,p);return this}function no(s,c){for(var h in s[ni]){var p=h.split(/\d/)[0];(!c||c(p))&&Fu(s,p,null,null,h)}}var Nu={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Lu(s,c,h,p){var _=c+a(h)+(p?"_"+a(p):"");if(s[ni]&&s[ni][_])return this;var w=function(U){return h.call(p||s,U||window.event)},x=w;!pe.touchNative&&pe.pointer&&c.indexOf("touch")===0?w=Au(s,c,w):pe.touch&&c==="dblclick"?w=Tc(s,w):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(Nu[c]||c,w,pe.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(w=function(U){U=U||window.event,ca(s,U)&&x(U)},s.addEventListener(Nu[c],w,!1)):s.addEventListener(c,x,!1):s.attachEvent("on"+c,w),s[ni]=s[ni]||{},s[ni][_]=w}function Fu(s,c,h,p,_){_=_||c+a(h)+(p?"_"+a(p):"");var w=s[ni]&&s[ni][_];if(!w)return this;!pe.touchNative&&pe.pointer&&c.indexOf("touch")===0?Cc(s,c,w):pe.touch&&c==="dblclick"?yf(s,w):"removeEventListener"in s?s.removeEventListener(Nu[c]||c,w,!1):s.detachEvent("on"+c,w),s[ni][_]=null}function Dn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Vu(s){return Lu(s,"wheel",Dn),this}function sa(s){return Pe(s,"mousedown touchstart dblclick contextmenu",Dn),s._leaflet_disable_click=!0,this}function jt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function xi(s){return jt(s),Dn(s),this}function Bu(s){if(s.composedPath)return s.composedPath();for(var c=[],h=s.target;h;)c.push(h),h=h.parentNode;return c}function Jo(s,c){if(!c)return new W(s.clientX,s.clientY);var h=to(c),p=h.boundingClientRect;return new W((s.clientX-p.left)/h.x-c.clientLeft,(s.clientY-p.top)/h.y-c.clientTop)}var aa=pe.linux&&pe.chrome?window.devicePixelRatio:pe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Uu(s){return pe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/aa:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ca(s,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var Lt={__proto__:null,on:Pe,off:wt,stopPropagation:Dn,disableScrollPropagation:Vu,disableClickPropagation:sa,preventDefault:jt,stop:xi,getPropagationPath:Bu,getMousePosition:Jo,getWheelDelta:Uu,isExternalTarget:ca,addListener:Pe,removeListener:wt},bf=Hn.extend({run:function(s,c,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Mi(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=A(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var h=this._startPos.add(this._offset.multiplyBy(s));c&&h._round(),kt(this._el,h),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ye=Hn.extend({options:{crs:Di,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=b(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(we(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Qi&&pe.any3d&&!pe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,mr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(we(s),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,h){var p=this.getZoomScale(c),_=this.getSize().divideBy(2),w=s instanceof W?s:this.latLngToContainerPoint(s),x=w.subtract(_).multiplyBy(1-1/p),U=this.containerPointToLatLng(_.add(x));return this.setView(U,c,{zoom:h})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():Le(s);var h=Z(c.paddingTopLeft||c.padding||[0,0]),p=Z(c.paddingBottomRight||c.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof c.maxZoom=="number"?Math.min(c.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var w=p.subtract(h).divideBy(2),x=this.project(s.getSouthWest(),_),U=this.project(s.getNorthEast(),_),z=this.unproject(x.add(U).divideBy(2).add(w),_);return{center:z,zoom:_}},fitBounds:function(s,c){if(s=Le(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=Z(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Fe(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,h){if(h=h||{},h.animate===!1||!pe.any3d)return this.setView(s,c,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),w=this.getSize(),x=this._zoom;s=we(s),c=c===void 0?x:c;var U=Math.max(w.x,w.y),z=U*this.getZoomScale(x,c),K=_.distanceTo(p)||1,ce=1.42,De=ce*ce;function Ke(Kt){var Bf=Kt?-1:1,xN=Kt?z:U,PN=z*z-U*U+Bf*De*De*K*K,RN=2*xN*De*K,bv=PN/RN,jT=Math.sqrt(bv*bv+1)-bv,ON=jT<1e-9?-18:Math.log(jT);return ON}function Fn(Kt){return(Math.exp(Kt)-Math.exp(-Kt))/2}function pn(Kt){return(Math.exp(Kt)+Math.exp(-Kt))/2}function Pi(Kt){return Fn(Kt)/pn(Kt)}var Gn=Ke(0);function Uc(Kt){return U*(pn(Gn)/pn(Gn+ce*Kt))}function SN(Kt){return U*(pn(Gn)*Pi(Gn+ce*Kt)-Fn(Gn))/De}function DN(Kt){return 1-Math.pow(1-Kt,1.5)}var AN=Date.now(),BT=(Ke(1)-Gn)/ce,MN=h.duration?1e3*h.duration:1e3*BT*.8;function UT(){var Kt=(Date.now()-AN)/MN,Bf=DN(Kt)*BT;Kt<=1?(this._flyToFrame=A(UT,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(SN(Bf)/K)),x),this.getScaleZoom(U/Uc(Bf),x),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),UT.call(this),this},flyToBounds:function(s,c){var h=this._getBoundsCenterZoom(s,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(s){return s=Le(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,Le(s));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var h=Z(c.paddingTopLeft||c.padding||[0,0]),p=Z(c.paddingBottomRight||c.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(s),x=this.getPixelBounds(),U=Qe([x.min.add(h),x.max.subtract(p)]),z=U.getSize();if(!U.contains(w)){this._enforcingBounds=!0;var K=w.subtract(U.getCenter()),ce=U.extend(w).getSize().subtract(z);_.x+=K.x<0?-ce.x:ce.x,_.y+=K.y<0?-ce.y:ce.y,this.panTo(this.unproject(_),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),_=h.divideBy(2).round(),w=p.subtract(_);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,s):navigator.geolocation.getCurrentPosition(c,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,h=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,h=s.coords.longitude,p=new Ie(c,h),_=p.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var x=this.getBoundsZoom(_);this.setView(p,w.maxZoom?Math.min(x,w.maxZoom):x)}var U={latlng:p,bounds:_,timestamp:s.timestamp};for(var z in s.coords)typeof s.coords[z]=="number"&&(U[z]=s.coords[z]);this.fire("locationfound",U)}},addHandler:function(s,c){if(!c)return this;var h=this[s]=new c(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),At(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)At(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=tt("div",h,c||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new Et(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,h){s=Le(s),h=Z(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),x=s.getNorthWest(),U=s.getSouthEast(),z=this.getSize().subtract(h),K=Qe(this.project(U,p),this.project(x,p)).getSize(),ce=pe.any3d?this.options.zoomSnap:1,De=z.x/K.x,Ke=z.y/K.y,Fn=c?Math.max(De,Ke):Math.min(De,Ke);return p=this.getScaleZoom(Fn,p),ce&&(p=Math.round(p/(ce/100))*(ce/100),p=c?Math.ceil(p/ce)*ce:Math.floor(p/ce)*ce),Math.max(_,Math.min(w,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var h=this._getTopLeftPoint(s,c);return new _e(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(s)/h.scale(c)},getScaleZoom:function(s,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(s*h.scale(c));return isNaN(p)?1/0:p},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(we(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Z(s),c)},layerPointToLatLng:function(s){var c=Z(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(we(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(we(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Le(s))},distance:function(s,c){return this.options.crs.distance(we(s),we(c))},containerPointToLayerPoint:function(s){return Z(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Z(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(Z(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(s)))},mouseEventToContainerPoint:function(s){return Jo(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=Sc(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Pe(c,"scroll",this._onScroll,this),this._containerId=a(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&pe.any3d,Fe(s,"leaflet-container"+(pe.touch?" leaflet-touch":"")+(pe.retina?" leaflet-retina":"")+(pe.ielt9?" leaflet-oldie":"")+(pe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=na(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),kt(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Fe(s.markerPane,"leaflet-zoom-hide"),Fe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,h){kt(this._mapPane,new W(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var _=this._zoom!==c;this._moveStart(_,h)._move(s,c)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,h,p){c===void 0&&(c=this._zoom);var _=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){kt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var c=s?wt:Pe;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),pe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=A(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var h=[],p,_=c==="mouseout"||c==="mouseover",w=s.target||s.srcElement,x=!1;w;){if(p=this._targets[a(w)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){x=!0;break}if(p&&p.listens(c,!0)&&(_&&!ca(w,s)||(h.push(p),_))||w===this._container)break;w=w.parentNode}return!h.length&&!x&&!_&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var h=s.type;h==="mousedown"&&ku(c),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,c);if(h){for(var w=[],x=0;x<h.length;x++)h[x].listens(c,!0)&&w.push(h[x]);_=w.concat(_)}if(_.length){c==="contextmenu"&&jt(s);var U=_[0],z={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var K=U.getLatLng&&(!U._radius||U._radius<=10);z.containerPoint=K?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(s),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=K?U.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(x=0;x<_.length;x++)if(_[x].fire(c,z,!0),z.originalEvent._stopped||_[x].options.bubblingMouseEvents===!1&&te(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Mi(this._mapPane)||new W(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var h=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var h=this.getSize()._divideBy(2);return this.project(s,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(s,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return Qe([this.project(s.getSouthWest(),c)._subtract(p),this.project(s.getNorthWest(),c)._subtract(p),this.project(s.getSouthEast(),c)._subtract(p),this.project(s.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,h){if(!h)return s;var p=this.project(s,c),_=this.getSize().divideBy(2),w=new _e(p.subtract(_),p.add(_)),x=this._getBoundsOffset(w,h,c);return Math.abs(x.x)<=1&&Math.abs(x.y)<=1?s:this.unproject(p.add(x),c)},_limitOffset:function(s,c){if(!c)return s;var h=this.getPixelBounds(),p=new _e(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(s,c,h){var p=Qe(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),_=p.min.subtract(s.min),w=p.max.subtract(s.max),x=this._rebound(_.x,-w.x),U=this._rebound(_.y,-w.y);return new W(x,U)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),h=this.getMaxZoom(),p=pe.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(c,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ut(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var h=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var s=this._proxy=tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var h=ta,p=this._proxy.style[h];In(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){At(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();In(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(A(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ut(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ef(s,c){return new Ye(s,c)}var qn=V.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Fe(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(At(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Xo=function(s){return new qn(s)};Ye.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",h=this._controlContainer=tt("div",c+"control-container",this._container);function p(_,w){var x=c+_+" "+c+w;s[_+w]=tt("div",x,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)At(this._controlCorners[s]);At(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var la=qn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,c,h){b(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return qn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(a(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ut(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ut(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=tt("div",s),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),sa(c),Vu(c);var p=this._section=tt("section",s+"-list");h&&(this._map.on("click",this.collapse,this),Pe(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=tt("a",s+"-toggle",c);_.href="#",_.title="Layers",_.setAttribute("role","button"),Pe(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){jt(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=tt("div",s+"-base",p),this._separator=tt("div",s+"-separator",p),this._overlaysList=tt("div",s+"-overlays",p),c.appendChild(p)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&a(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ia(this._baseLayersList),ia(this._overlaysList),this._layerControlInputs=[];var s,c,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(a(s.target)),h=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(s,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var c=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),Pe(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var w=document.createElement("span");c.appendChild(w),w.appendChild(p),w.appendChild(_);var x=s.overlay?this._overlaysList:this._baseLayersList;return x.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,h,p=[],_=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)c=s[w],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||_.push(h);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])||this._map.addLayer(p[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)c=s[_],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Pe(s,"click",jt),this.expand();var c=this;setTimeout(function(){wt(s,"click",jt),c._preventClick=!1})}}),If=function(s,c,h){return new la(s,c,h)},ii=qn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",h=tt("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,h,p,_){var w=tt("a",h,p);return w.innerHTML=s,w.href="#",w.title=c,w.setAttribute("role","button"),w.setAttribute("aria-label",c),sa(w),Pe(w,"click",xi),Pe(w,"click",_,this),Pe(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";Ut(this._zoomInButton,c),Ut(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Fe(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Fe(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ye.mergeOptions({zoomControl:!0}),Ye.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ii,this.addControl(this.zoomControl))});var Cf=function(s){return new ii(s)},Tf=qn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",h=tt("div",c),p=this.options;return this._addScales(p,c+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,h){s.metric&&(this._mScale=tt("div",c,h)),s.imperial&&(this._iScale=tt("div",c,h))},_update:function(){var s=this._map,c=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/s)},_updateImperial:function(s){var c=s*3.2808399,h,p,_;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(c),this._updateScale(this._iScale,_+" ft",_/c))},_updateScale:function(s,c,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),h=s/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),ua=function(s){return new Tf(s)},Sf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',da=qn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(pe.inlineSvg?Sf+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=tt("div","leaflet-control-attribution"),sa(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ye.mergeOptions({attributionControl:!0}),Ye.addInitHook(function(){this.options.attributionControl&&new da().addTo(this)});var Mc=function(s){return new da(s)};qn.Layers=la,qn.Zoom=ii,qn.Scale=Tf,qn.Attribution=da,Xo.layers=If,Xo.zoom=Cf,Xo.scale=ua,Xo.attribution=Mc;var ri=V.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ri.addTo=function(s,c){return s.addHandler(c,this),this};var xc={Events:Dt},Df=pe.touch?"touchstart mousedown":"mousedown",Ji=Hn.extend({options:{clickTolerance:3},initialize:function(s,c,h,p){b(this,p),this._element=s,this._dragStartTarget=c||s,this._preventOutline=h},enable:function(){this._enabled||(Pe(this._dragStartTarget,Df,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ji._dragging===this&&this.finishDrag(!0),wt(this._dragStartTarget,Df,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Dc(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Ji._dragging===this&&this.finishDrag();return}if(!(Ji._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Ji._dragging=this,this._preventOutline&&ku(this._element),eo(),Qo(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,h=wf(this._element);this._startPoint=new W(c.clientX,c.clientY),this._startPos=Mi(this._element),this._parentScale=to(h);var p=s.type==="mousedown";Pe(document,p?"mousemove":"touchmove",this._onMove,this),Pe(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,h=new W(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,jt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Fe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),kt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ut(document.body,"leaflet-dragging"),this._lastTarget&&(Ut(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),wt(document,"mousemove touchmove",this._onMove,this),wt(document,"mouseup touchend touchcancel",this._onUp,this),Ru(),ht();var c=this._moved&&this._moving;this._moving=!1,Ji._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function es(s,c,h){var p,_=[1,4,2,8],w,x,U,z,K,ce,De,Ke;for(w=0,ce=s.length;w<ce;w++)s[w]._code=yr(s[w],c);for(U=0;U<4;U++){for(De=_[U],p=[],w=0,ce=s.length,x=ce-1;w<ce;x=w++)z=s[w],K=s[x],z._code&De?K._code&De||(Ke=ha(K,z,De,c,h),Ke._code=yr(Ke,c),p.push(Ke)):(K._code&De&&(Ke=ha(K,z,De,c,h),Ke._code=yr(Ke,c),p.push(Ke)),p.push(z));s=p}return s}function ju(s,c){var h,p,_,w,x,U,z,K,ce;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var De=we([0,0]),Ke=Le(s),Fn=Ke.getNorthWest().distanceTo(Ke.getSouthWest())*Ke.getNorthEast().distanceTo(Ke.getNorthWest());Fn<1700&&(De=Pc(s));var pn=s.length,Pi=[];for(h=0;h<pn;h++){var Gn=we(s[h]);Pi.push(c.project(we([Gn.lat-De.lat,Gn.lng-De.lng])))}for(U=z=K=0,h=0,p=pn-1;h<pn;p=h++)_=Pi[h],w=Pi[p],x=_.y*w.x-w.y*_.x,z+=(_.x+w.x)*x,K+=(_.y+w.y)*x,U+=x*3;U===0?ce=Pi[0]:ce=[z/U,K/U];var Uc=c.unproject(Z(ce));return we([Uc.lat+De.lat,Uc.lng+De.lng])}function Pc(s){for(var c=0,h=0,p=0,_=0;_<s.length;_++){var w=we(s[_]);c+=w.lat,h+=w.lng,p++}return we([c/p,h/p])}var zu={__proto__:null,clipPolygon:es,polygonCenter:ju,centroid:Pc};function Rc(s,c){if(!c||!s.length)return s.slice();var h=c*c;return s=io(s,h),s=Af(s,h),s}function $u(s,c,h){return Math.sqrt(on(s,c,h,!0))}function Oc(s,c,h){return on(s,c,h)}function Af(s,c){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,kc(s,_,c,0,h-1);var w,x=[];for(w=0;w<h;w++)_[w]&&x.push(s[w]);return x}function kc(s,c,h,p,_){var w=0,x,U,z;for(U=p+1;U<=_-1;U++)z=on(s[U],s[p],s[_],!0),z>w&&(x=U,w=z);w>h&&(c[x]=1,kc(s,c,h,p,x),kc(s,c,h,x,_))}function io(s,c){for(var h=[s[0]],p=1,_=0,w=s.length;p<w;p++)Nc(s[p],s[_])>c&&(h.push(s[p]),_=p);return _<w-1&&h.push(s[w-1]),h}var Hu;function qu(s,c,h,p,_){var w=p?Hu:yr(s,h),x=yr(c,h),U,z,K;for(Hu=x;;){if(!(w|x))return[s,c];if(w&x)return!1;U=w||x,z=ha(s,c,U,h,_),K=yr(z,h),U===w?(s=z,w=K):(c=z,x=K)}}function ha(s,c,h,p,_){var w=c.x-s.x,x=c.y-s.y,U=p.min,z=p.max,K,ce;return h&8?(K=s.x+w*(z.y-s.y)/x,ce=z.y):h&4?(K=s.x+w*(U.y-s.y)/x,ce=U.y):h&2?(K=z.x,ce=s.y+x*(z.x-s.x)/w):h&1&&(K=U.x,ce=s.y+x*(U.x-s.x)/w),new W(K,ce,_)}function yr(s,c){var h=0;return s.x<c.min.x?h|=1:s.x>c.max.x&&(h|=2),s.y<c.min.y?h|=4:s.y>c.max.y&&(h|=8),h}function Nc(s,c){var h=c.x-s.x,p=c.y-s.y;return h*h+p*p}function on(s,c,h,p){var _=c.x,w=c.y,x=h.x-_,U=h.y-w,z=x*x+U*U,K;return z>0&&(K=((s.x-_)*x+(s.y-w)*U)/z,K>1?(_=h.x,w=h.y):K>0&&(_+=x*K,w+=U*K)),x=s.x-_,U=s.y-w,p?x*x+U*U:new W(_,w)}function Ln(s){return!G(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Gu(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ln(s)}function ro(s,c){var h,p,_,w,x,U,z,K;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ce=we([0,0]),De=Le(s),Ke=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());Ke<1700&&(ce=Pc(s));var Fn=s.length,pn=[];for(h=0;h<Fn;h++){var Pi=we(s[h]);pn.push(c.project(we([Pi.lat-ce.lat,Pi.lng-ce.lng])))}for(h=0,p=0;h<Fn-1;h++)p+=pn[h].distanceTo(pn[h+1])/2;if(p===0)K=pn[0];else for(h=0,w=0;h<Fn-1;h++)if(x=pn[h],U=pn[h+1],_=x.distanceTo(U),w+=_,w>p){z=(w-p)/_,K=[U.x-z*(U.x-x.x),U.y-z*(U.y-x.y)];break}var Gn=c.unproject(Z(K));return we([Gn.lat+ce.lat,Gn.lng+ce.lng])}var d={__proto__:null,simplify:Rc,pointToSegmentDistance:$u,closestPointOnSegment:Oc,clipSegment:qu,_getEdgeIntersection:ha,_getBitCode:yr,_sqClosestPointOnSegment:on,isFlat:Ln,_flat:Gu,polylineCenter:ro},g={project:function(s){return new W(s.lng,s.lat)},unproject:function(s){return new Ie(s.y,s.x)},bounds:new _e([-180,-90],[180,90])},y={R:6378137,R_MINOR:6356752314245179e-9,bounds:new _e([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,h=this.R,p=s.lat*c,_=this.R_MINOR/h,w=Math.sqrt(1-_*_),x=w*Math.sin(p),U=Math.tan(Math.PI/4-p/2)/Math.pow((1-x)/(1+x),w/2);return p=-h*Math.log(Math.max(U,1e-10)),new W(s.lng*c*h,p)},unproject:function(s){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),w=Math.exp(-s.y/h),x=Math.PI/2-2*Math.atan(w),U=0,z=.1,K;U<15&&Math.abs(z)>1e-7;U++)K=_*Math.sin(x),K=Math.pow((1-K)/(1+K),_/2),z=Math.PI/2-2*Math.atan(w*K)-x,x+=z;return new Ie(x*c,s.x*c/h)}},I={__proto__:null,LonLat:g,Mercator:y,SphericalMercator:ei},B=t({},Si,{code:"EPSG:3395",projection:y,transformation:function(){var s=.5/(Math.PI*y.R);return kn(s,.5,-s,.5)}()}),$=t({},Si,{code:"EPSG:4326",projection:g,transformation:kn(1/180,1,-1/180,.5)}),re=t({},ln,{projection:g,transformation:kn(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var h=c.lng-s.lng,p=c.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});ln.Earth=Si,ln.EPSG3395=B,ln.EPSG3857=Di,ln.EPSG900913=vu,ln.EPSG4326=$,ln.Simple=re;var qe=Hn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Ye.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=a(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=a(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},_addLayers:function(s){s=s?G(s)?s:[s]:[];for(var c=0,h=s.length;c<h;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=a(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),c=_.maxZoom===void 0?c:Math.max(c,_.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ft=qe.extend({initialize:function(s,c){b(this,c),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),nt=function(s,c){return new Ft(s,c)},Mt=Ft.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ft.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ft.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Et;for(var c in this._layers){var h=this._layers[c];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),fn=function(s,c){return new Mt(s,c)},oi=V.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var _=Z(p),w=Z(c==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return pe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function si(s){return new oi(s)}var wr=oi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof wr.imagePath!="string"&&(wr.imagePath=this._detectIconPath()),(this.options.imagePath||wr.imagePath)+oi.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(h,p,_){var w=p.exec(h);return w&&w[_]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=tt("div","leaflet-default-icon-path",document.body),c=na(s,"background-image")||na(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Lc=ri.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Ji(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Fe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ut(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=Mi(c._icon),x=h.getPixelBounds(),U=h.getPixelOrigin(),z=Qe(x.min._subtract(U).add(_),x.max._subtract(U).subtract(_));if(!z.contains(w)){var K=Z((Math.max(z.max.x,w.x)-z.max.x)/(x.max.x-z.max.x)-(Math.min(z.min.x,w.x)-z.min.x)/(x.min.x-z.min.x),(Math.max(z.max.y,w.y)-z.max.y)/(x.max.y-z.max.y)-(Math.min(z.min.y,w.y)-z.min.y)/(x.min.y-z.min.y)).multiplyBy(p);h.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),kt(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=A(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=A(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,h=c._shadow,p=Mi(c._icon),_=c._map.layerPointToLatLng(p);h&&kt(h,p),c._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Mf=qe.extend({options:{icon:new wr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){b(this,c),this._latlng=we(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=we(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Fe(h,c),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(Fe(_,c),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&wt(this._icon,"focus",this._panOnFocus,this),At(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&At(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&kt(this._icon,s),this._shadow&&kt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Lc)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Lc(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Nn(this._icon,s),this._shadow&&Nn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,h=c.iconSize?Z(c.iconSize):Z(0,0),p=c.iconAnchor?Z(c.iconAnchor):Z(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function cN(s,c){return new Mf(s,c)}var ts=qe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),xf=ts.extend({options:{fill:!0,radius:10},initialize:function(s,c){b(this,c),this._latlng=we(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=we(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return ts.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,h=this._clickTolerance(),p=[s+h,c+h];this._pxBounds=new _e(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function lN(s,c){return new xf(s,c)}var _v=xf.extend({initialize:function(s,c,h){if(typeof c=="number"&&(c=t({},h,{radius:c})),b(this,c),this._latlng=we(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Et(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:ts.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Si.distance){var _=Math.PI/180,w=this._mRadius/Si.R/_,x=h.project([c+w,s]),U=h.project([c-w,s]),z=x.add(U).divideBy(2),K=h.unproject(z).lat,ce=Math.acos((Math.cos(w*_)-Math.sin(c*_)*Math.sin(K*_))/(Math.cos(c*_)*Math.cos(K*_)))/_;(isNaN(ce)||ce===0)&&(ce=w/Math.cos(Math.PI/180*c)),this._point=z.subtract(h.getPixelOrigin()),this._radius=isNaN(ce)?0:z.x-h.project([K,s-ce]).x,this._radiusY=z.y-x.y}else{var De=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(De).x}this._updateBounds()}});function uN(s,c,h){return new _v(s,c,h)}var oo=ts.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){b(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,h=null,p=on,_,w,x=0,U=this._parts.length;x<U;x++)for(var z=this._parts[x],K=1,ce=z.length;K<ce;K++){_=z[K-1],w=z[K];var De=p(s,_,w,!0);De<c&&(c=De,h=p(s,_,w))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ro(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=we(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Et,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ln(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],h=Ln(s),p=0,_=s.length;p<_;p++)h?(c[p]=we(s[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(s[p]);return c},_project:function(){var s=new _e;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new W(s,s);this._rawPxBounds&&(this._pxBounds=new _e([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,h){var p=s[0]instanceof Ie,_=s.length,w,x;if(p){for(x=[],w=0;w<_;w++)x[w]=this._map.latLngToLayerPoint(s[w]),h.extend(x[w]);c.push(x)}else for(w=0;w<_;w++)this._projectLatlngs(s[w],c,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,_,w,x,U,z;for(h=0,_=0,w=this._rings.length;h<w;h++)for(z=this._rings[h],p=0,x=z.length;p<x-1;p++)U=qu(z[p],z[p+1],s,p,!0),U&&(c[_]=c[_]||[],c[_].push(U[0]),(U[1]!==z[p+1]||p===x-2)&&(c[_].push(U[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=Rc(s[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var h,p,_,w,x,U,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(U=this._parts[h],p=0,x=U.length,_=x-1;p<x;_=p++)if(!(!c&&p===0)&&$u(s,U[_],U[p])<=z)return!0;return!1}});function dN(s,c){return new oo(s,c)}oo._flat=Gu;var Fc=oo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ju(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=oo.prototype._convertLatLngs.call(this,s),h=c.length;return h>=2&&c[0]instanceof Ie&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(s){oo.prototype._setLatLngs.call(this,s),Ln(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ln(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,h=new W(c,c);if(s=new _e(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,w;p<_;p++)w=es(this._rings[p],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,h,p,_,w,x,U,z,K;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,z=this._parts.length;w<z;w++)for(h=this._parts[w],x=0,K=h.length,U=K-1;x<K;U=x++)p=h[x],_=h[U],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(c=!c);return c||oo.prototype._containsPoint.call(this,s,!0)}});function hN(s,c){return new Fc(s,c)}var so=Mt.extend({initialize:function(s,c){b(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=G(s)?s:s.features,h,p,_;if(c){for(h=0,p=c.length;h<p;h++)_=c[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var x=Pf(s,w);return x?(x.feature=kf(s),x.defaultOptions=x.options,this.resetStyle(x),w.onEachFeature&&w.onEachFeature(s,x),this.addLayer(x)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function Pf(s,c){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],w=c&&c.pointToLayer,x=c&&c.coordsToLatLng||vv,U,z,K,ce;if(!p&&!h)return null;switch(h.type){case"Point":return U=x(p),bT(w,s,U,c);case"MultiPoint":for(K=0,ce=p.length;K<ce;K++)U=x(p[K]),_.push(bT(w,s,U,c));return new Mt(_);case"LineString":case"MultiLineString":return z=Rf(p,h.type==="LineString"?0:1,x),new oo(z,c);case"Polygon":case"MultiPolygon":return z=Rf(p,h.type==="Polygon"?1:2,x),new Fc(z,c);case"GeometryCollection":for(K=0,ce=h.geometries.length;K<ce;K++){var De=Pf({geometry:h.geometries[K],type:"Feature",properties:s.properties},c);De&&_.push(De)}return new Mt(_);case"FeatureCollection":for(K=0,ce=h.features.length;K<ce;K++){var Ke=Pf(h.features[K],c);Ke&&_.push(Ke)}return new Mt(_);default:throw new Error("Invalid GeoJSON object.")}}function bT(s,c,h,p){return s?s(c,h):new Mf(h,p&&p.markersInheritOptions&&p)}function vv(s){return new Ie(s[1],s[0],s[2])}function Rf(s,c,h){for(var p=[],_=0,w=s.length,x;_<w;_++)x=c?Rf(s[_],c-1,h):(h||vv)(s[_]),p.push(x);return p}function yv(s,c){return s=we(s),s.alt!==void 0?[m(s.lng,c),m(s.lat,c),m(s.alt,c)]:[m(s.lng,c),m(s.lat,c)]}function Of(s,c,h,p){for(var _=[],w=0,x=s.length;w<x;w++)_.push(c?Of(s[w],Ln(s[w])?0:c-1,h,p):yv(s[w],p));return!c&&h&&_.length>0&&_.push(_[0].slice()),_}function Vc(s,c){return s.feature?t({},s.feature,{geometry:c}):kf(c)}function kf(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var wv={toGeoJSON:function(s){return Vc(this,{type:"Point",coordinates:yv(this.getLatLng(),s)})}};Mf.include(wv),_v.include(wv),xf.include(wv),oo.include({toGeoJSON:function(s){var c=!Ln(this._latlngs),h=Of(this._latlngs,c?1:0,!1,s);return Vc(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),Fc.include({toGeoJSON:function(s){var c=!Ln(this._latlngs),h=c&&!Ln(this._latlngs[0]),p=Of(this._latlngs,h?2:c?1:0,!0,s);return c||(p=[p]),Vc(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),Ft.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(s).geometry.coordinates)}),Vc(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(s);if(h)p.push(w.geometry);else{var x=kf(w);x.type==="FeatureCollection"?p.push.apply(p,x.features):p.push(x)}}}),h?Vc(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function ET(s,c){return new so(s,c)}var fN=ET,Nf=qe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,h){this._url=s,this._bounds=Le(c),b(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){At(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&gr(this._image),this},bringToBack:function(){return this._map&&_r(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Le(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:tt("img");if(Fe(c,"leaflet-image-layer"),this._zoomAnimated&&Fe(c,"leaflet-zoom-animated"),this.options.className&&Fe(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=r(this.fire,this,"load"),c.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;In(this._image,h,c)},_reset:function(){var s=this._image,c=new _e(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();kt(s,c.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){Nn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),pN=function(s,c,h){return new Nf(s,c,h)},IT=Nf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:tt("video");if(Fe(c,"leaflet-image-layer"),this._zoomAnimated&&Fe(c,"leaflet-zoom-animated"),this.options.className&&Fe(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=r(this.fire,this,"load"),s){for(var h=c.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[c.src];return}G(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var x=tt("source");x.src=this._url[w],c.appendChild(x)}}});function mN(s,c,h){return new IT(s,c,h)}var CT=Nf.extend({_initImage:function(){var s=this._image=this._url;Fe(s,"leaflet-image-layer"),this._zoomAnimated&&Fe(s,"leaflet-zoom-animated"),this.options.className&&Fe(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function gN(s,c,h){return new CT(s,c,h)}var br=qe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof Ie||G(s))?(this._latlng=we(s),b(this,c)):(b(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Nn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Nn(this._container,1),this.bringToFront(),this.options.interactive&&(Fe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Nn(this._container,0),this._removeTimeout=setTimeout(r(At,void 0,this._container),200)):At(this._container),this.options.interactive&&(Ut(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=we(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gr(this._container),this},bringToBack:function(){return this._map&&_r(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof Mt){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=Z(this.options.offset),h=this._getAnchor();this._zoomAnimated?kt(this._container,s.add(h)):c=c.add(s).add(h);var p=this._containerBottom=-c.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ye.include({_initOverlay:function(s,c,h,p){var _=c;return _ instanceof s||(_=new s(p).setContent(c)),h&&_.setLatLng(h),_}}),qe.include({_initOverlay:function(s,c,h,p){var _=h;return _ instanceof s?(b(_,p),_._source=this):(_=c&&!p?c:new s(p,this),_.setContent(h)),_}});var Lf=br.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,br.prototype.openOn.call(this,s)},onAdd:function(s){br.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ts||this._source.on("preclick",Dn))},onRemove:function(s){br.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ts||this._source.off("preclick",Dn))},getEvents:function(){var s=br.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=tt("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=tt("div",s+"-content-wrapper",c);if(this._contentNode=tt("div",s+"-content",h),sa(c),Vu(this._contentNode),Pe(c,"contextmenu",Dn),this._tipContainer=tt("div",s+"-tip-container",c),this._tip=tt("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=tt("a",s+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Pe(p,"click",function(_){jt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=s.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&p>_?(c.height=_+"px",Fe(s,w)):Ut(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();kt(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(na(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,_=new W(this._containerLeft,-h-this._containerBottom);_._add(Mi(this._container));var w=s.layerPointToContainerPoint(_),x=Z(this.options.autoPanPadding),U=Z(this.options.autoPanPaddingTopLeft||x),z=Z(this.options.autoPanPaddingBottomRight||x),K=s.getSize(),ce=0,De=0;w.x+p+z.x>K.x&&(ce=w.x+p-K.x+z.x),w.x-ce-U.x<0&&(ce=w.x-U.x),w.y+h+z.y>K.y&&(De=w.y+h-K.y+z.y),w.y-De-U.y<0&&(De=w.y-U.y),(ce||De)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ce,De]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_N=function(s,c){return new Lf(s,c)};Ye.mergeOptions({closePopupOnClick:!0}),Ye.include({openPopup:function(s,c,h){return this._initOverlay(Lf,s,c,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),qe.include({bindPopup:function(s,c){return this._popup=this._initOverlay(Lf,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Mt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){xi(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof ts)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Ff=br.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){br.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){br.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=br.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=tt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,h,p=this._map,_=this._container,w=p.latLngToContainerPoint(p.getCenter()),x=p.layerPointToContainerPoint(s),U=this.options.direction,z=_.offsetWidth,K=_.offsetHeight,ce=Z(this.options.offset),De=this._getAnchor();U==="top"?(c=z/2,h=K):U==="bottom"?(c=z/2,h=0):U==="center"?(c=z/2,h=K/2):U==="right"?(c=0,h=K/2):U==="left"?(c=z,h=K/2):x.x<w.x?(U="right",c=0,h=K/2):(U="left",c=z+(ce.x+De.x)*2,h=K/2),s=s.subtract(Z(c,h,!0)).add(ce).add(De),Ut(_,"leaflet-tooltip-right"),Ut(_,"leaflet-tooltip-left"),Ut(_,"leaflet-tooltip-top"),Ut(_,"leaflet-tooltip-bottom"),Fe(_,"leaflet-tooltip-"+U),kt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Nn(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),vN=function(s,c){return new Ff(s,c)};Ye.include({openTooltip:function(s,c,h){return this._initOverlay(Ff,s,c,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),qe.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ff,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Mt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(Pe(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Pe(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var TT=oi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(ia(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=Z(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function yN(s){return new TT(s)}oi.Default=wr;var Wu=qe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:pe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),At(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_r(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof W?s:new W(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,h=-s(-1/0,1/0),p=0,_=c.length,w;p<_;p++)w=c[p].style.zIndex,c[p]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!pe.ielt9){Nn(this._container,this.options.opacity);var s=+new Date,c=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var w=Math.min(1,(s-_.loaded)/200);Nn(_.el,w),w<1?c=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(O(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=c-Math.abs(s-h),this._onUpdateLevel(h)):(At(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)At(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,h,p){var _=Math.floor(s/2),w=Math.floor(c/2),x=h-1,U=new W(+_,+w);U.z=+x;var z=this._tileCoordsToKey(U),K=this._tiles[z];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),x>p?this._retainParent(_,w,x,p):!1)},_retainChildren:function(s,c,h,p){for(var _=2*s;_<2*s+2;_++)for(var w=2*c;w<2*c+2;w++){var x=new W(_,w);x.z=h+1;var U=this._tileCoordsToKey(x),z=this._tiles[U];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);h+1<p&&this._retainChildren(_,w,h+1,p)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,h,p){var _=Math.round(c);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,c)},_setZoomTransform:function(s,c,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();pe.any3d?In(s.el,_,p):kt(s.el,_)},_resetGrid:function(){var s=this._map,c=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),_=c.project(s,this._tileZoom).floor(),w=c.getSize().divideBy(p*2);return new _e(_.subtract(w),_.add(w))},_update:function(s){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),w=_.getCenter(),x=[],U=this.options.keepBuffer,z=new _e(_.getBottomLeft().subtract([U,-U]),_.getTopRight().add([U,-U]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var ce=this._tiles[K].coords;(ce.z!==this._tileZoom||!z.contains(new W(ce.x,ce.y)))&&(this._tiles[K].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var De=_.min.y;De<=_.max.y;De++)for(var Ke=_.min.x;Ke<=_.max.x;Ke++){var Fn=new W(Ke,De);if(Fn.z=this._tileZoom,!!this._isValidTile(Fn)){var pn=this._tiles[this._tileCoordsToKey(Fn)];pn?pn.current=!0:x.push(Fn)}}if(x.sort(function(Gn,Uc){return Gn.distanceTo(w)-Uc.distanceTo(w)}),x.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Pi=document.createDocumentFragment();for(Ke=0;Ke<x.length;Ke++)this._addTile(x[Ke],Pi);this._level.el.appendChild(Pi)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!c.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Le(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),w=c.unproject(p,s.z),x=c.unproject(_,s.z);return[w,x]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),h=new Et(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),h=new W(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(s){var c=this._tiles[s];c&&(At(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Fe(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=f,s.onmousemove=f,pe.ielt9&&this.options.opacity<1&&Nn(s,this.options.opacity)},_addTile:function(s,c){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&A(r(this._tileReady,this,s,null,_)),kt(_,h),this._tiles[p]={el:_,coords:s,current:!0},c.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Nn(h.el,0),O(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(Fe(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),pe.ielt9||!this._map._fadeAnimated?A(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new W(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new _e(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function wN(s){return new Wu(s)}var Bc=Wu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=b(this,c),c.detectRetina&&pe.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var h=document.createElement("img");return Pe(h,"load",r(this._tileOnLoad,this,c,h)),Pe(h,"error",r(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var c={r:pe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=h),c["-y"]=h}return N(this._url,t(c,this.options))},_tileOnLoad:function(s,c){pe.ielt9?setTimeout(r(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),s(h,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=c-s),s+p},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=f,c.onerror=f,!c.complete)){c.src=J;var h=this._tiles[s].coords;At(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",J),Wu.prototype._removeTile.call(this,s)},_tileReady:function(s,c,h){if(!(!this._map||h&&h.getAttribute("src")===J))return Wu.prototype._tileReady.call(this,s,c,h)}});function ST(s,c){return new Bc(s,c)}var DT=Bc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var h=t({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=b(this,c);var _=c.detectRetina&&pe.retina?2:1,w=this.getTileSize();h.width=w.x*_,h.height=w.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Bc.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),h=this._crs,p=Qe(h.project(c[0]),h.project(c[1])),_=p.min,w=p.max,x=(this._wmsVersion>=1.3&&this._crs===$?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),U=Bc.prototype.getTileUrl.call(this,s);return U+M(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+x},setParams:function(s,c){return t(this.wmsParams,s),c||this.redraw(),this}});function bN(s,c){return new DT(s,c)}Bc.WMS=DT,ST.wms=bN;var ao=qe.extend({options:{padding:.1},initialize:function(s){b(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,c),w=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,c));pe.any3d?In(this._container,w,h):kt(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new _e(h,h.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),AT=ao.extend({options:{tolerance:0},getEvents:function(){var s=ao.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ao.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Pe(s,"mousemove",this._onMouseMove,this),Pe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,At(this._container),wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ao.prototype._update.call(this);var s=this._bounds,c=this._container,h=s.getSize(),p=pe.retina?2:1;kt(c,s.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",pe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){ao.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<c.length;_++){if(p=Number(c[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||A(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new _e,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var h,p,_,w,x=s._parts,U=x.length,z=this._ctx;if(U){for(z.beginPath(),h=0;h<U;h++){for(p=0,_=x[h].length;p<_;p++)w=x[h][p],z[p?"lineTo":"moveTo"](w.x,w.y);c&&z.closePath()}this._fillStroke(z,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(c.x,c.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,c){var h=c.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(Ut(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Fe(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,h){this._map._fireDOMEvent(c,h||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function MT(s){return pe.canvas?new AT(s):null}var Ku=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),EN={_initContainer:function(){this._container=tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ao.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=Ku("shape");Fe(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=Ku("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;At(c),s.removeInteractiveTarget(c),delete this._layers[a(s)]},_updateStyle:function(s){var c=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(c||(c=s._stroke=Ku("stroke")),_.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=G(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(_.removeChild(c),s._stroke=null),p.fill?(h||(h=s._fill=Ku("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){gr(s._container)},_bringToBack:function(s){_r(s._container)}},Vf=pe.vml?Ku:_c,Zu=ao.extend({_initContainer:function(){this._container=Vf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){At(this._container),wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ao.prototype._update.call(this);var s=this._bounds,c=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),kt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=Vf("path");s.options.className&&Fe(c,s.options.className),s.options.interactive&&Fe(c,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){At(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,h=s.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,vc(s._parts,c))},_updateCircle:function(s){var c=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(c.x-h)+","+c.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){gr(s._path)},_bringToBack:function(s){_r(s._path)}});pe.vml&&Zu.include(EN);function xT(s){return pe.svg||pe.vml?new Zu(s):null}Ye.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&MT(s)||xT(s)}});var PT=Fc.extend({initialize:function(s,c){Fc.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Le(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function IN(s,c){return new PT(s,c)}Zu.create=Vf,Zu.pointsToPath=vc,so.geometryToLayer=Pf,so.coordsToLatLng=vv,so.coordsToLatLngs=Rf,so.latLngToCoords=yv,so.latLngsToCoords=Of,so.getFeature=Vc,so.asFeature=kf,Ye.mergeOptions({boxZoom:!0});var RT=ri.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){At(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qo(),eo(),this._startPoint=this._map.mouseEventToContainerPoint(s),Pe(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=tt("div","leaflet-zoom-box",this._container),Fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new _e(this._point,this._startPoint),h=c.getSize();kt(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(At(this._box),Ut(this._container,"leaflet-crosshair")),ht(),Ru(),wt(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var c=new Et(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ye.addInitHook("addHandler","boxZoom",RT),Ye.mergeOptions({doubleClickZoom:!0});var OT=ri.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(_):c.setZoomAround(s.containerPoint,_)}});Ye.addInitHook("addHandler","doubleClickZoom",OT),Ye.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var kT=ri.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Ji(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ut(this._map._container,"leaflet-grab"),Ut(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Le(this._map.options.maxBounds);this._offsetLimit=Qe(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-c+h)%s+c-h,w=(p+c+h)%s-c-h,x=Math.abs(_+h)<Math.abs(w+h)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=x},_onDragEnd:function(s){var c=this._map,h=c.options,p=!h.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),p)c.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,x=h.easeLinearity,U=_.multiplyBy(x/w),z=U.distanceTo([0,0]),K=Math.min(h.inertiaMaxSpeed,z),ce=U.multiplyBy(K/z),De=K/(h.inertiaDeceleration*x),Ke=ce.multiplyBy(-De/2).round();!Ke.x&&!Ke.y?c.fire("moveend"):(Ke=c._limitOffset(Ke,c.options.maxBounds),A(function(){c.panBy(Ke,{duration:De,easeLinearity:x,noMoveStart:!0,animate:!0})}))}}});Ye.addInitHook("addHandler","dragging",kT),Ye.mergeOptions({keyboard:!0,keyboardPanDelta:80});var NT=ri.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Pe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,h=s.scrollTop||c.scrollTop,p=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)c[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)c[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)c[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)c[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)c[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)c[h.zoomOut[p]]=-s},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],s.shiftKey&&(p=Z(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(Z(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;xi(s)}}});Ye.addInitHook("addHandler","keyboard",NT),Ye.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var LT=ri.extend({addHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=Uu(s),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),p),xi(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,w=h?Math.ceil(_/h)*h:_,x=s._limitZoom(c+(this._delta>0?w:-w))-c;this._delta=0,this._startTime=null,x&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+x):s.setZoomAround(this._lastMousePos,c+x))}});Ye.addInitHook("addHandler","scrollWheelZoom",LT);var CN=600;Ye.mergeOptions({tapHold:pe.touchNative&&pe.safari&&pe.mobile,tapTolerance:15});var FT=ri.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new W(c.clientX,c.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Pe(document,"touchend",jt),Pe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),CN),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){wt(document,"touchend",jt),wt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),wt(document,"touchend touchcancel contextmenu",this._cancel,this),wt(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new W(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});Ye.addInitHook("addHandler","tapHold",FT),Ye.mergeOptions({touchZoom:pe.touch,bounceAtZoomLimits:!0});var VT=ri.extend({addHooks:function(){Fe(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ut(this._map._container,"leaflet-touch-zoom"),wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),jt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(_,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&_<1||this._zoom>c.getMaxZoom()&&_>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var x=r(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=A(x,this,!0),jt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),wt(document,"touchmove",this._onTouchMove,this),wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ye.addInitHook("addHandler","touchZoom",VT),Ye.BoxZoom=RT,Ye.DoubleClickZoom=OT,Ye.Drag=kT,Ye.Keyboard=NT,Ye.ScrollWheelZoom=LT,Ye.TapHold=FT,Ye.TouchZoom=VT,n.Bounds=_e,n.Browser=pe,n.CRS=ln,n.Canvas=AT,n.Circle=_v,n.CircleMarker=xf,n.Class=V,n.Control=qn,n.DivIcon=TT,n.DivOverlay=br,n.DomEvent=Lt,n.DomUtil=vr,n.Draggable=Ji,n.Evented=Hn,n.FeatureGroup=Mt,n.GeoJSON=so,n.GridLayer=Wu,n.Handler=ri,n.Icon=oi,n.ImageOverlay=Nf,n.LatLng=Ie,n.LatLngBounds=Et,n.Layer=qe,n.LayerGroup=Ft,n.LineUtil=d,n.Map=Ye,n.Marker=Mf,n.Mixin=xc,n.Path=ts,n.Point=W,n.PolyUtil=zu,n.Polygon=Fc,n.Polyline=oo,n.Popup=Lf,n.PosAnimation=bf,n.Projection=I,n.Rectangle=PT,n.Renderer=ao,n.SVG=Zu,n.SVGOverlay=CT,n.TileLayer=Bc,n.Tooltip=Ff,n.Transformation=un,n.Util=F,n.VideoOverlay=IT,n.bind=r,n.bounds=Qe,n.canvas=MT,n.circle=uN,n.circleMarker=lN,n.control=Xo,n.divIcon=yN,n.extend=t,n.featureGroup=fn,n.geoJSON=ET,n.geoJson=fN,n.gridLayer=wN,n.icon=si,n.imageOverlay=pN,n.latLng=we,n.latLngBounds=Le,n.layerGroup=nt,n.map=Ef,n.marker=cN,n.point=Z,n.polygon=hN,n.polyline=dN,n.popup=_N,n.rectangle=IN,n.setOptions=b,n.stamp=a,n.svg=xT,n.svgOverlay=gN,n.tileLayer=ST,n.tooltip=vN,n.transformation=kn,n.version=e,n.videoOverlay=mN;var TN=window.L;n.noConflict=function(){return window.L=TN,this},window.L=n})});function qT(n,e){return Object.is(n,e)}var sn=null,jf=!1,zf=1,co=Symbol("SIGNAL");function at(n){let e=sn;return sn=n,e}function GT(){return sn}var Yu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Dv(n){if(jf)throw new Error("");if(sn===null)return;sn.consumerOnSignalRead(n);let e=sn.nextProducerIndex++;if(Gf(sn),e<sn.producerNode.length&&sn.producerNode[e]!==n&&Qu(sn)){let t=sn.producerNode[e];qf(t,sn.producerIndexOfThis[e])}sn.producerNode[e]!==n&&(sn.producerNode[e]=n,sn.producerIndexOfThis[e]=Qu(sn)?QT(n,sn,e):0),sn.producerLastReadVersion[e]=n.version}function $N(){zf++}function WT(n){if(!(Qu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===zf)){if(!n.producerMustRecompute(n)&&!Mv(n)){n.dirty=!1,n.lastCleanEpoch=zf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=zf}}function KT(n){if(n.liveConsumerNode===void 0)return;let e=jf;jf=!0;try{for(let t of n.liveConsumerNode)t.dirty||HN(t)}finally{jf=e}}function ZT(){return sn?.consumerAllowSignalWrites!==!1}function HN(n){n.dirty=!0,KT(n),n.consumerMarkedDirty?.(n)}function Hf(n){return n&&(n.nextProducerIndex=0),at(n)}function Av(n,e){if(at(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Qu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)qf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Mv(n){Gf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(WT(t),i!==t.version))return!0}return!1}function xv(n){if(Gf(n),Qu(n))for(let e=0;e<n.producerNode.length;e++)qf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function QT(n,e,t){if(YT(n),n.liveConsumerNode.length===0&&JT(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=QT(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function qf(n,e){if(YT(n),n.liveConsumerNode.length===1&&JT(n))for(let i=0;i<n.producerNode.length;i++)qf(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Gf(r),r.producerIndexOfThis[i]=e}}function Qu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Gf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function YT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function JT(n){return n.producerNode!==void 0}function XT(n){let e=Object.create(qN);e.computation=n;let t=()=>{if(WT(e),Dv(e),e.value===$f)throw e.error;return e.value};return t[co]=e,t}var Tv=Symbol("UNSET"),Sv=Symbol("COMPUTING"),$f=Symbol("ERRORED"),qN=Oe(Y({},Yu),{value:Tv,dirty:!0,error:null,equal:qT,producerMustRecompute(n){return n.value===Tv||n.value===Sv},producerRecomputeValue(n){if(n.value===Sv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Sv;let t=Hf(n),i;try{i=n.computation()}catch(r){i=$f,n.error=r}finally{Av(n,t)}if(e!==Tv&&e!==$f&&i!==$f&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function GN(){throw new Error}var eS=GN;function tS(){eS()}function nS(n){eS=n}var WN=null;function iS(n){let e=Object.create(oS);e.value=n;let t=()=>(Dv(e),e.value);return t[co]=e,t}function Pv(n,e){ZT()||tS(),n.equal(n.value,e)||(n.value=e,KN(n))}function rS(n,e){ZT()||tS(),Pv(n,e(n.value))}var oS=Oe(Y({},Yu),{equal:qT,value:void 0});function KN(n){n.version++,$N(),KT(n),WN?.()}function Ve(n){return typeof n=="function"}function jc(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wf=jc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fa(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var zt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Ve(i))try{i()}catch(o){e=o instanceof Wf?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{sS(o)}catch(a){e=e??[],a instanceof Wf?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Wf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)sS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fa(t,e)}remove(e){let{_finalizers:t}=this;t&&fa(t,e),e instanceof n&&e._removeParent(this)}};zt.EMPTY=(()=>{let n=new zt;return n.closed=!0,n})();var Rv=zt.EMPTY;function Kf(n){return n instanceof zt||n&&"closed"in n&&Ve(n.remove)&&Ve(n.add)&&Ve(n.unsubscribe)}function sS(n){Ve(n)?n():n.unsubscribe()}var Xi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zc={setTimeout(n,e,...t){let{delegate:i}=zc;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=zc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zf(n){zc.setTimeout(()=>{let{onUnhandledError:e}=Xi;if(e)e(n);else throw n})}function Ju(){}var aS=Ov("C",void 0,void 0);function cS(n){return Ov("E",void 0,n)}function lS(n){return Ov("N",n,void 0)}function Ov(n,e,t){return{kind:n,value:e,error:t}}var pa=null;function $c(n){if(Xi.useDeprecatedSynchronousErrorHandling){let e=!pa;if(e&&(pa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=pa;if(pa=null,t)throw i}}else n()}function uS(n){Xi.useDeprecatedSynchronousErrorHandling&&pa&&(pa.errorThrown=!0,pa.error=n)}var ma=class extends zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Kf(e)&&e.add(this)):this.destination=YN}static create(e,t,i){return new Hc(e,t,i)}next(e){this.isStopped?Nv(lS(e),this):this._next(e)}error(e){this.isStopped?Nv(cS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nv(aS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ZN=Function.prototype.bind;function kv(n,e){return ZN.call(n,e)}var Lv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Qf(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Qf(i)}else Qf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Qf(t)}}},Hc=class extends ma{constructor(e,t,i){super();let r;if(Ve(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Xi.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&kv(e.next,o),error:e.error&&kv(e.error,o),complete:e.complete&&kv(e.complete,o)}):r=e}this.destination=new Lv(r)}};function Qf(n){Xi.useDeprecatedSynchronousErrorHandling?uS(n):Zf(n)}function QN(n){throw n}function Nv(n,e){let{onStoppedNotification:t}=Xi;t&&zc.setTimeout(()=>t(n,e))}var YN={closed:!0,next:Ju,error:QN,complete:Ju};var qc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ai(n){return n}function Fv(...n){return Vv(n)}function Vv(n){return n.length===0?ai:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var je=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=XN(t)?t:new Hc(t,i,r);return $c(()=>{let{operator:a,source:l}=this;o.add(a?a.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=dS(i),new i((r,o)=>{let a=new Hc({next:l=>{try{t(l)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[qc](){return this}pipe(...t){return Vv(t)(this)}toPromise(t){return t=dS(t),new t((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return n.create=e=>new n(e),n})();function dS(n){var e;return(e=n??Xi.Promise)!==null&&e!==void 0?e:Promise}function JN(n){return n&&Ve(n.next)&&Ve(n.error)&&Ve(n.complete)}function XN(n){return n&&n instanceof ma||JN(n)&&Kf(n)}function Bv(n){return Ve(n?.lift)}function it(n){return e=>{if(Bv(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Je(n,e,t,i,r){return new Uv(n,e,t,i,r)}var Uv=class extends ma{constructor(e,t,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(l){try{t(l)}catch(u){e.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Gc(){return it((n,e)=>{let t=null;n._refCount++;let i=Je(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Wc=class extends je{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Bv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zt;let t=this.getSubject();e.add(this.source.subscribe(Je(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zt.EMPTY)}return e}refCount(){return Gc()(this)}};var hS=jc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var mn=(()=>{class n extends je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Yf(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new hS}next(t){$c(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){$c(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){$c(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Rv:(this.currentObservers=null,o.push(t),new zt(()=>{this.currentObservers=null,fa(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new je;return t.source=this,t}}return n.create=(e,t)=>new Yf(e,t),n})(),Yf=class extends mn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:Rv}};var Gt=class extends mn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var jv={now(){return(jv.delegate||Date).now()},delegate:void 0};var Jf=class extends zt{constructor(e,t){super()}schedule(e,t=0){return this}};var Xu={setInterval(n,e,...t){let{delegate:i}=Xu;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Kc=class extends Jf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Xu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Xu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fa(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Zc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Zc.now=jv.now;var Qc=class extends Zc{constructor(e,t=Zc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var zv=new Qc(Kc);var Xf=class extends Kc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var ep=class extends Qc{};var $v=new ep(Xf);var ci=new je(n=>n.complete());function fS(n){return n&&Ve(n.schedule)}function pS(n){return n[n.length-1]}function tp(n){return Ve(pS(n))?n.pop():void 0}function is(n){return fS(pS(n))?n.pop():void 0}function Hv(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function gS(n,e,t,i){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(m){try{f(i.next(m))}catch(v){a(v)}}function u(m){try{f(i.throw(m))}catch(v){a(v)}}function f(m){m.done?o(m.value):r(m.value).then(l,u)}f((i=i.apply(n,e||[])).next())})}function mS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ga(n){return this instanceof ga?(this.v=n,this):new ga(n)}function _S(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(b){return function(M){return Promise.resolve(M).then(b,v)}}function l(b,M){i[b]&&(r[b]=function(k){return new Promise(function(N,G){o.push([b,k,N,G])>1||u(b,k)})},M&&(r[b]=M(r[b])))}function u(b,M){try{f(i[b](M))}catch(k){E(o[0][3],k)}}function f(b){b.value instanceof ga?Promise.resolve(b.value.v).then(m,v):E(o[0][2],b)}function m(b){u("next",b)}function v(b){u("throw",b)}function E(b,M){b(M),o.shift(),o.length&&u(o[0][0],o[0][1])}}function vS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof mS=="function"?mS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(a){return new Promise(function(l,u){a=n[o](a),r(l,u,a.done,a.value)})}}function r(o,a,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},a)}}var np=n=>n&&typeof n.length=="number"&&typeof n!="function";function ip(n){return Ve(n?.then)}function rp(n){return Ve(n[qc])}function op(n){return Symbol.asyncIterator&&Ve(n?.[Symbol.asyncIterator])}function sp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ap=eL();function cp(n){return Ve(n?.[ap])}function lp(n){return _S(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield ga(t.read());if(r)return yield ga(void 0);yield yield ga(i)}}finally{t.releaseLock()}})}function up(n){return Ve(n?.getReader)}function Zt(n){if(n instanceof je)return n;if(n!=null){if(rp(n))return tL(n);if(np(n))return nL(n);if(ip(n))return iL(n);if(op(n))return yS(n);if(cp(n))return rL(n);if(up(n))return oL(n)}throw sp(n)}function tL(n){return new je(e=>{let t=n[qc]();if(Ve(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nL(n){return new je(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function iL(n){return new je(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Zf)})}function rL(n){return new je(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function yS(n){return new je(e=>{sL(n,e).catch(t=>e.error(t))})}function oL(n){return yS(lp(n))}function sL(n,e){var t,i,r,o;return gS(this,void 0,void 0,function*(){try{for(t=vS(n);i=yield t.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Wn(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function rs(n,e=0){return it((t,i)=>{t.subscribe(Je(i,r=>Wn(i,n,()=>i.next(r),e),()=>Wn(i,n,()=>i.complete(),e),r=>Wn(i,n,()=>i.error(r),e)))})}function os(n,e=0){return it((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function wS(n,e){return Zt(n).pipe(os(e),rs(e))}function bS(n,e){return Zt(n).pipe(os(e),rs(e))}function ES(n,e){return new je(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function IS(n,e){return new je(t=>{let i;return Wn(t,e,()=>{i=n[ap](),Wn(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){t.error(a);return}o?t.complete():t.next(r)},0,!0)}),()=>Ve(i?.return)&&i.return()})}function dp(n,e){if(!n)throw new Error("Iterable cannot be null");return new je(t=>{Wn(t,e,()=>{let i=n[Symbol.asyncIterator]();Wn(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function CS(n,e){return dp(lp(n),e)}function TS(n,e){if(n!=null){if(rp(n))return wS(n,e);if(np(n))return ES(n,e);if(ip(n))return bS(n,e);if(op(n))return dp(n,e);if(cp(n))return IS(n,e);if(up(n))return CS(n,e)}throw sp(n)}function xt(n,e){return e?TS(n,e):Zt(n)}function Se(...n){let e=is(n);return xt(n,e)}function Yc(n,e){let t=Ve(n)?n:()=>n,i=r=>r.error(t());return new je(e?r=>e.schedule(i,0,r):i)}function qv(n){return!!n&&(n instanceof je||Ve(n.lift)&&Ve(n.subscribe))}var er=jc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Gv(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=!1,a;n.subscribe({next:l=>{a=l,o=!0},error:r,complete:()=>{o?i(a):t?i(e.defaultValue):r(new er)}})})}function Me(n,e){return it((t,i)=>{let r=0;t.subscribe(Je(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:aL}=Array;function cL(n,e){return aL(e)?n(...e):n(e)}function hp(n){return Me(e=>cL(n,e))}var{isArray:lL}=Array,{getPrototypeOf:uL,prototype:dL,keys:hL}=Object;function fp(n){if(n.length===1){let e=n[0];if(lL(e))return{args:e,keys:null};if(fL(e)){let t=hL(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function fL(n){return n&&typeof n=="object"&&uL(n)===dL}function pp(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function ed(...n){let e=is(n),t=tp(n),{args:i,keys:r}=fp(n);if(i.length===0)return xt([],e);let o=new je(pL(i,e,r?a=>pp(r,a):ai));return t?o.pipe(hp(t)):o}function pL(n,e,t=ai){return i=>{SS(e,()=>{let{length:r}=n,o=new Array(r),a=r,l=r;for(let u=0;u<r;u++)SS(e,()=>{let f=xt(n[u],e),m=!1;f.subscribe(Je(i,v=>{o[u]=v,m||(m=!0,l--),l||i.next(t(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function SS(n,e,t){n?Wn(t,n,e):e()}function DS(n,e,t,i,r,o,a,l){let u=[],f=0,m=0,v=!1,E=()=>{v&&!u.length&&!f&&e.complete()},b=k=>f<i?M(k):u.push(k),M=k=>{o&&e.next(k),f++;let N=!1;Zt(t(k,m++)).subscribe(Je(e,G=>{r?.(G),o?b(G):e.next(G)},()=>{N=!0},void 0,()=>{if(N)try{for(f--;u.length&&f<i;){let G=u.shift();a?Wn(e,a,()=>M(G)):M(G)}E()}catch(G){e.error(G)}}))};return n.subscribe(Je(e,b,()=>{v=!0,E()})),()=>{l?.()}}function Qt(n,e,t=1/0){return Ve(e)?Qt((i,r)=>Me((o,a)=>e(i,o,r,a))(Zt(n(i,r))),t):(typeof e=="number"&&(t=e),it((i,r)=>DS(i,r,n,t)))}function Jc(n=1/0){return Qt(ai,n)}function AS(){return Jc(1)}function Xc(...n){return AS()(xt(n,is(n)))}function mp(n){return new je(e=>{Zt(n()).subscribe(e)})}function Wv(...n){let e=tp(n),{args:t,keys:i}=fp(n),r=new je(o=>{let{length:a}=t;if(!a){o.complete();return}let l=new Array(a),u=a,f=a;for(let m=0;m<a;m++){let v=!1;Zt(t[m]).subscribe(Je(o,E=>{v||(v=!0,f--),l[m]=E},()=>u--,void 0,()=>{(!u||!v)&&(f||o.next(i?pp(i,l):l),o.complete())}))}});return e?r.pipe(hp(e)):r}function Kn(n,e){return it((t,i)=>{let r=0;t.subscribe(Je(i,o=>n.call(e,o,r++)&&i.next(o)))})}function ss(n){return it((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Je(t,void 0,void 0,a=>{o=Zt(n(a,ss(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function MS(n,e,t,i,r){return(o,a)=>{let l=t,u=e,f=0;o.subscribe(Je(a,m=>{let v=f++;u=l?n(u,m,v):(l=!0,m),i&&a.next(u)},r&&(()=>{l&&a.next(u),a.complete()})))}}function lo(n,e){return Ve(e)?Qt(n,e,1):Qt(n,1)}function as(n){return it((e,t)=>{let i=!1;e.subscribe(Je(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function uo(n){return n<=0?()=>ci:it((e,t)=>{let i=0;e.subscribe(Je(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Kv(n){return Me(()=>n)}function gp(n=mL){return it((e,t)=>{let i=!1;e.subscribe(Je(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function mL(){return new er}function _a(n){return it((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Er(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Kn((r,o)=>n(r,o,i)):ai,uo(1),t?as(e):gp(()=>new er))}function el(n){return n<=0?()=>ci:it((e,t)=>{let i=[];e.subscribe(Je(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Zv(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Kn((r,o)=>n(r,o,i)):ai,el(1),t?as(e):gp(()=>new er))}function Qv(n,e){return it(MS(n,e,arguments.length>=2,!0))}function Yv(...n){let e=is(n);return it((t,i)=>{(e?Xc(n,t,e):Xc(n,t)).subscribe(i)})}function Zn(n,e){return it((t,i)=>{let r=null,o=0,a=!1,l=()=>a&&!r&&i.complete();t.subscribe(Je(i,u=>{r?.unsubscribe();let f=0,m=o++;Zt(n(u,m)).subscribe(r=Je(i,v=>i.next(e?e(u,v,m,f++):v),()=>{r=null,l()}))},()=>{a=!0,l()}))})}function Jv(n){return it((e,t)=>{Zt(n).subscribe(Je(t,()=>t.complete(),Ju)),!t.closed&&e.subscribe(t)})}function Yt(n,e,t){let i=Ve(n)||e||t?{next:n,error:e,complete:t}:n;return i?it((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let l=!0;r.subscribe(Je(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;l=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;l=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;l&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):ai}var mD="https://g.co/ng/security#xss",ee=class extends Error{constructor(e,t){super(Jp(e,t)),this.code=e}};function Jp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ld(n){return{toString:n}.toString()}var _p="__parameters__";function gL(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function gD(n,e,t){return ld(()=>{let i=gL(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return l.annotation=a,l;function l(u,f,m){let v=u.hasOwnProperty(_p)?u[_p]:Object.defineProperty(u,_p,{value:[]})[_p];for(;v.length<=m;)v.push(null);return(v[m]=v[m]||[]).push(a),u}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var ya=globalThis;function It(n){for(let e in n)if(n[e]===It)return e;throw Error("Could not find renamed property on target object.")}function _L(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Bn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function xS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var vL=It({__forward_ref__:It});function go(n){return n.__forward_ref__=go,n.toString=function(){return Bn(this())},n}function Vn(n){return _D(n)?n():n}function _D(n){return typeof n=="function"&&n.hasOwnProperty(vL)&&n.__forward_ref__===go}function le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Mr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xp(n){return PS(n,yD)||PS(n,wD)}function vD(n){return Xp(n)!==null}function PS(n,e){return n.hasOwnProperty(e)?n[e]:null}function yL(n){let e=n&&(n[yD]||n[wD]);return e||null}function RS(n){return n&&(n.hasOwnProperty(OS)||n.hasOwnProperty(wL))?n[OS]:null}var yD=It({\u0275prov:It}),OS=It({\u0275inj:It}),wD=It({ngInjectableDef:It}),wL=It({ngInjectorDef:It}),de=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function bD(n){return n&&!!n.\u0275providers}var bL=It({\u0275cmp:It}),EL=It({\u0275dir:It}),IL=It({\u0275pipe:It}),CL=It({\u0275mod:It}),Ap=It({\u0275fac:It}),nd=It({__NG_ELEMENT_ID__:It}),kS=It({__NG_ENV_ID__:It});function al(n){return typeof n=="string"?n:n==null?"":String(n)}function TL(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():al(n)}function SL(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ee(-200,n)}function u0(n,e){throw new ee(-201,!1)}var Ge=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ge||{}),fy;function ED(){return fy}function Qn(n){let e=fy;return fy=n,e}function ID(n,e,t){let i=Xp(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&Ge.Optional)return null;if(e!==void 0)return e;u0(n,"Injector")}var DL={},id=DL,py="__NG_DI_FLAG__",Mp="ngTempTokenPath",AL="ngTokenPath",ML=/\n/gm,xL="\u0275",NS="__source",ol;function PL(){return ol}function cs(n){let e=ol;return ol=n,e}function RL(n,e=Ge.Default){if(ol===void 0)throw new ee(-203,!1);return ol===null?ID(n,void 0,e):ol.get(n,e&Ge.Optional?null:void 0,e)}function me(n,e=Ge.Default){return(ED()||RL)(Vn(n),e)}function Q(n,e=Ge.Default){return me(n,em(e))}function em(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function my(n){let e=[];for(let t=0;t<n.length;t++){let i=Vn(n[t]);if(Array.isArray(i)){if(i.length===0)throw new ee(900,!1);let r,o=Ge.Default;for(let a=0;a<i.length;a++){let l=i[a],u=OL(l);typeof u=="number"?u===-1?r=l.token:o|=u:r=l}e.push(me(r,o))}else e.push(me(i))}return e}function CD(n,e){return n[py]=e,n.prototype[py]=e,n}function OL(n){return n[py]}function kL(n,e,t,i){let r=n[Mp];throw e[NS]&&r.unshift(e[NS]),n.message=NL(`
`+n.message,r,t,i),n[AL]=r,n[Mp]=null,n}function NL(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==xL?n.slice(2):n;let r=Bn(e);if(Array.isArray(e))r=e.map(Bn).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let l=e[a];o.push(a+":"+(typeof l=="string"?JSON.stringify(l):Bn(l)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(ML,`
  `)}`}var Mn=CD(gD("Optional"),8);var d0=CD(gD("SkipSelf"),4);function ba(n,e){let t=n.hasOwnProperty(Ap);return t?n[Ap]:null}function LL(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function FL(n){return n.flat(Number.POSITIVE_INFINITY)}function h0(n,e){n.forEach(t=>Array.isArray(t)?h0(t,e):e(t))}function TD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function xp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function VL(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function BL(n,e,t){let i=ud(n,e);return i>=0?n[i|1]=t:(i=~i,VL(n,i,e,t)),i}function Xv(n,e){let t=ud(n,e);if(t>=0)return n[t|1]}function ud(n,e){return UL(n,e,1)}function UL(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),a=n[o<<t];if(e===a)return o<<t;a>e?r=o:i=o+1}return~(r<<t)}var cl={},Ri=[],ll=new de(""),SD=new de("",-1),DD=new de(""),Pp=class{get(e,t=id){if(t===id){let i=new Error(`NullInjectorError: No provider for ${Bn(e)}!`);throw i.name="NullInjectorError",i}return t}},AD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(AD||{}),Tr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Tr||{}),ds=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ds||{});function jL(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function gy(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],a=t[i++],l=t[i++];n.setAttribute(e,a,l,o)}else{let o=r,a=t[++i];zL(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),i++}}return i}function MD(n){return n===3||n===4||n===6}function zL(n){return n.charCodeAt(0)===64}function rd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?LS(n,t,r,null,e[++i]):LS(n,t,r,null,null))}}return n}function LS(n,e,t,i,r){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let l=n[o++];if(typeof l=="number"){if(l===e){a=-1;break}else if(l>e){a=o-1;break}}}for(;o<n.length;){let l=n[o];if(typeof l=="number")break;if(l===t){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var xD="ng-template";function $L(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&jL(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(f0(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function f0(n){return n.type===4&&n.value!==xD}function HL(n,e,t){let i=n.type===4&&!t?xD:n.value;return e===i}function qL(n,e,t){let i=4,r=n.attrs,o=r!==null?KL(r):0,a=!1;for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="number"){if(!a&&!tr(i)&&!tr(u))return!1;if(a&&tr(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!HL(n,u,t)||u===""&&e.length===1){if(tr(i))return!1;a=!0}}else if(i&8){if(r===null||!$L(n,r,u,t)){if(tr(i))return!1;a=!0}}else{let f=e[++l],m=GL(u,r,f0(n),t);if(m===-1){if(tr(i))return!1;a=!0;continue}if(f!==""){let v;if(m>o?v="":v=r[m+1].toLowerCase(),i&2&&f!==v){if(tr(i))return!1;a=!0}}}}return tr(i)||a}function tr(n){return(n&1)===0}function GL(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let a=e[r];if(a===n)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return ZL(e,n)}function WL(n,e,t=!1){for(let i=0;i<e.length;i++)if(qL(n,e[i],t))return!0;return!1}function KL(n){for(let e=0;e<n.length;e++){let t=n[e];if(MD(t))return e}return n.length}function ZL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function FS(n,e){return n?":not("+e.trim()+")":e}function QL(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(i&2){let l=n[++t];r+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!tr(a)&&(e+=FS(o,r),r=""),i=a,o=o||!tr(i);t++}return r!==""&&(e+=FS(o,r)),e}function YL(n){return n.map(QL).join(",")}function JL(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!tr(r))break;r=o}i++}return{attrs:e,classes:t}}function mt(n){return ld(()=>{let e=ND(n),t=Oe(Y({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===AD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Tr.Emulated,styles:n.styles||Ri,_:null,schemas:n.schemas||null,tView:null,id:""});LD(t);let i=n.dependencies;return t.directiveDefs=BS(i,!1),t.pipeDefs=BS(i,!0),t.id=t2(t),t})}function XL(n){return hs(n)||PD(n)}function e2(n){return n!==null}function xr(n){return ld(()=>({type:n.type,bootstrap:n.bootstrap||Ri,declarations:n.declarations||Ri,imports:n.imports||Ri,exports:n.exports||Ri,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function VS(n,e){if(n==null)return cl;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,a,l=ds.None;Array.isArray(r)?(l=r[0],o=r[1],a=r[2]??o):(o=r,a=r),e?(t[o]=l!==ds.None?[i,l]:i,e[o]=a):t[o]=i}return t}function Tn(n){return ld(()=>{let e=ND(n);return LD(e),e})}function p0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function hs(n){return n[bL]||null}function PD(n){return n[EL]||null}function RD(n){return n[IL]||null}function OD(n){let e=hs(n)||PD(n)||RD(n);return e!==null?e.standalone:!1}function kD(n,e){let t=n[CL]||null;if(!t&&e===!0)throw new Error(`Type ${Bn(n)} does not have '\u0275mod' property.`);return t}function ND(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||cl,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Ri,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:VS(n.inputs,e),outputs:VS(n.outputs),debugInfo:null}}function LD(n){n.features?.forEach(e=>e(n))}function BS(n,e){if(!n)return null;let t=e?RD:XL;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(e2)}function t2(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function or(n){return{\u0275providers:n}}function n2(...n){return{\u0275providers:FD(!0,n),\u0275fromNgModule:!0}}function FD(n,...e){let t=[],i=new Set,r,o=a=>{t.push(a)};return h0(e,a=>{let l=a;_y(l,o,[],i)&&(r||=[],r.push(l))}),r!==void 0&&VD(r,o),t}function VD(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];m0(r,o=>{e(o,i)})}}function _y(n,e,t,i){if(n=Vn(n),!n)return!1;let r=null,o=RS(n),a=!o&&hs(n);if(!o&&!a){let u=n.ngModule;if(o=RS(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=n}let l=i.has(r);if(a){if(l)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)_y(f,e,t,i)}}else if(o){if(o.imports!=null&&!l){i.add(r);let f;try{h0(o.imports,m=>{_y(m,e,t,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&VD(f,e)}if(!l){let f=ba(r)||(()=>new r);e({provide:r,useFactory:f,deps:Ri},r),e({provide:DD,useValue:r,multi:!0},r),e({provide:ll,useValue:()=>me(r),multi:!0},r)}let u=o.providers;if(u!=null&&!l){let f=n;m0(u,m=>{e(m,f)})}}else return!1;return r!==n&&n.providers!==void 0}function m0(n,e){for(let t of n)bD(t)&&(t=t.\u0275providers),Array.isArray(t)?m0(t,e):e(t)}var i2=It({provide:String,useValue:It});function BD(n){return n!==null&&typeof n=="object"&&i2 in n}function r2(n){return!!(n&&n.useExisting)}function o2(n){return!!(n&&n.useFactory)}function ul(n){return typeof n=="function"}function s2(n){return!!n.useClass}var tm=new de(""),Ep={},a2={},ey;function g0(){return ey===void 0&&(ey=new Pp),ey}var Un=class{},od=class extends Un{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yy(e,a=>this.processProvider(a)),this.records.set(SD,tl(void 0,this)),r.has("environment")&&this.records.set(Un,tl(void 0,this));let o=this.records.get(tm);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(DD,Ri,Ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=at(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),at(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=cs(this),i=Qn(void 0),r;try{return e()}finally{cs(t),Qn(i)}}get(e,t=id,i=Ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(kS))return e[kS](this);i=em(i);let r,o=cs(this),a=Qn(void 0);try{if(!(i&Ge.SkipSelf)){let u=this.records.get(e);if(u===void 0){let f=h2(e)&&Xp(e);f&&this.injectableDefInScope(f)?u=tl(vy(e),Ep):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let l=i&Ge.Self?g0():this.parent;return t=i&Ge.Optional&&t===id?null:t,l.get(e,t)}catch(l){if(l.name==="NullInjectorError"){if((l[Mp]=l[Mp]||[]).unshift(Bn(e)),o)throw l;return kL(l,e,"R3InjectorError",this.source)}else throw l}finally{Qn(a),cs(o)}}resolveInjectorInitializers(){let e=at(null),t=cs(this),i=Qn(void 0),r;try{let o=this.get(ll,Ri,Ge.Self);for(let a of o)a()}finally{cs(t),Qn(i),at(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Bn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=Vn(e);let t=ul(e)?e:Vn(e&&e.provide),i=l2(e);if(!ul(e)&&e.multi===!0){let r=this.records.get(t);r||(r=tl(void 0,Ep,!0),r.factory=()=>my(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=at(null);try{return t.value===Ep&&(t.value=a2,t.value=t.factory()),typeof t.value=="object"&&t.value&&d2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{at(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Vn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function vy(n){let e=Xp(n),t=e!==null?e.factory:ba(n);if(t!==null)return t;if(n instanceof de)throw new ee(204,!1);if(n instanceof Function)return c2(n);throw new ee(204,!1)}function c2(n){if(n.length>0)throw new ee(204,!1);let t=yL(n);return t!==null?()=>t.factory(n):()=>new n}function l2(n){if(BD(n))return tl(void 0,n.useValue);{let e=UD(n);return tl(e,Ep)}}function UD(n,e,t){let i;if(ul(n)){let r=Vn(n);return ba(r)||vy(r)}else if(BD(n))i=()=>Vn(n.useValue);else if(o2(n))i=()=>n.useFactory(...my(n.deps||[]));else if(r2(n))i=()=>me(Vn(n.useExisting));else{let r=Vn(n&&(n.useClass||n.provide));if(u2(n))i=()=>new r(...my(n.deps));else return ba(r)||vy(r)}return i}function tl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function u2(n){return!!n.deps}function d2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function h2(n){return typeof n=="function"||typeof n=="object"&&n instanceof de}function yy(n,e){for(let t of n)Array.isArray(t)?yy(t,e):t&&bD(t)?yy(t.\u0275providers,e):e(t)}function ki(n,e){n instanceof od&&n.assertNotDestroyed();let t,i=cs(n),r=Qn(void 0);try{return e()}finally{cs(i),Qn(r)}}function jD(){return ED()!==void 0||PL()!=null}function f2(n){if(!jD())throw new ee(-203,!1)}function p2(n){return typeof n=="function"}var _o=0,ze=1,xe=2,An=3,nr=4,sr=5,Rp=6,Op=7,ir=8,dl=9,Sr=10,an=11,sd=12,US=13,_l=14,Dr=15,Ea=16,nl=17,ho=18,nm=19,zD=20,ls=21,ty=22,Oi=23,rr=25,$D=1;var Ia=7,kp=8,hl=9,li=10,Np=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Np||{});function us(n){return Array.isArray(n)&&typeof n[$D]=="object"}function vo(n){return Array.isArray(n)&&n[$D]===!0}function HD(n){return(n.flags&4)!==0}function im(n){return n.componentOffset>-1}function _0(n){return(n.flags&1)===1}function fs(n){return!!n.template}function wy(n){return(n[xe]&512)!==0}var by=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function qD(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function Ni(){return GD}function GD(n){return n.type.prototype.ngOnChanges&&(n.setInput=g2),m2}Ni.ngInherit=!0;function m2(){let n=KD(this),e=n?.current;if(e){let t=n.previous;if(t===cl)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function g2(n,e,t,i,r){let o=this.declaredInputs[i],a=KD(n)||_2(n,{previous:cl,current:null}),l=a.current||(a.current={}),u=a.previous,f=u[o];l[o]=new by(f&&f.currentValue,t,u===cl),qD(n,e,r,t)}var WD="__ngSimpleChanges__";function KD(n){return n[WD]||null}function _2(n,e){return n[WD]=e}var jS=null;var Ir=function(n,e,t){jS?.(n,e,t)},ZD="svg",v2="math";function Ar(n){for(;Array.isArray(n);)n=n[_o];return n}function QD(n,e){return Ar(e[n])}function Li(n,e){return Ar(e[n.index])}function YD(n,e){return n.data[e]}function JD(n,e){return n[e]}function gs(n,e){let t=e[n];return us(t)?t:t[_o]}function y2(n){return(n[xe]&4)===4}function v0(n){return(n[xe]&128)===128}function w2(n){return vo(n[An])}function Lp(n,e){return e==null?null:n[e]}function XD(n){n[nl]=0}function eA(n){n[xe]&1024||(n[xe]|=1024,v0(n)&&om(n))}function b2(n,e){for(;n>0;)e=e[_l],n--;return e}function rm(n){return!!(n[xe]&9216||n[Oi]?.dirty)}function Ey(n){n[Sr].changeDetectionScheduler?.notify(8),n[xe]&64&&(n[xe]|=1024),rm(n)&&om(n)}function om(n){n[Sr].changeDetectionScheduler?.notify(0);let e=Ca(n);for(;e!==null&&!(e[xe]&8192||(e[xe]|=8192,!v0(e)));)e=Ca(e)}function tA(n,e){if((n[xe]&256)===256)throw new ee(911,!1);n[ls]===null&&(n[ls]=[]),n[ls].push(e)}function E2(n,e){if(n[ls]===null)return;let t=n[ls].indexOf(e);t!==-1&&n[ls].splice(t,1)}function Ca(n){let e=n[An];return vo(e)?e[An]:e}var Be={lFrame:hA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var nA=!1;function I2(){return Be.lFrame.elementDepthCount}function C2(){Be.lFrame.elementDepthCount++}function T2(){Be.lFrame.elementDepthCount--}function iA(){return Be.bindingsEnabled}function S2(){return Be.skipHydrationRootTNode!==null}function D2(n){return Be.skipHydrationRootTNode===n}function A2(){Be.skipHydrationRootTNode=null}function ut(){return Be.lFrame.lView}function xn(){return Be.lFrame.tView}function be(n){return Be.lFrame.contextLView=n,n[ir]}function Ee(n){return Be.lFrame.contextLView=null,n}function jn(){let n=rA();for(;n!==null&&n.type===64;)n=n.parent;return n}function rA(){return Be.lFrame.currentTNode}function M2(){let n=Be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function dd(n,e){let t=Be.lFrame;t.currentTNode=n,t.isParent=e}function oA(){return Be.lFrame.isParent}function x2(){Be.lFrame.isParent=!1}function P2(){return Be.lFrame.contextLView}function sA(){return nA}function zS(n){nA=n}function aA(){let n=Be.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function R2(){return Be.lFrame.bindingIndex}function O2(n){return Be.lFrame.bindingIndex=n}function sm(){return Be.lFrame.bindingIndex++}function cA(n){let e=Be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function k2(){return Be.lFrame.inI18n}function N2(n,e){let t=Be.lFrame;t.bindingIndex=t.bindingRootIndex=n,Iy(e)}function L2(){return Be.lFrame.currentDirectiveIndex}function Iy(n){Be.lFrame.currentDirectiveIndex=n}function F2(n){let e=Be.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function lA(){return Be.lFrame.currentQueryIndex}function y0(n){Be.lFrame.currentQueryIndex=n}function V2(n){let e=n[ze];return e.type===2?e.declTNode:e.type===1?n[sr]:null}function uA(n,e,t){if(t&Ge.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&Ge.Host);)if(r=V2(o),r===null||(o=o[_l],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Be.lFrame=dA();return i.currentTNode=e,i.lView=n,!0}function w0(n){let e=dA(),t=n[ze];Be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function dA(){let n=Be.lFrame,e=n===null?null:n.child;return e===null?hA(n):e}function hA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function fA(){let n=Be.lFrame;return Be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var pA=fA;function b0(){let n=fA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function B2(n){return(Be.lFrame.contextLView=b2(n,Be.lFrame.contextLView))[ir]}function Oa(){return Be.lFrame.selectedIndex}function Ta(n){Be.lFrame.selectedIndex=n}function E0(){let n=Be.lFrame;return YD(n.tView,n.selectedIndex)}function Te(){Be.lFrame.currentNamespace=ZD}function We(){U2()}function U2(){Be.lFrame.currentNamespace=null}function j2(){return Be.lFrame.currentNamespace}var mA=!0;function I0(){return mA}function C0(n){mA=n}function z2(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=GD(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function T0(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:m}=o;a&&(n.contentHooks??=[]).push(-t,a),l&&((n.contentHooks??=[]).push(t,l),(n.contentCheckHooks??=[]).push(t,l)),u&&(n.viewHooks??=[]).push(-t,u),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),m!=null&&(n.destroyHooks??=[]).push(t,m)}}function Ip(n,e,t){gA(n,e,3,t)}function Cp(n,e,t,i){(n[xe]&3)===t&&gA(n,e,t,i)}function ny(n,e){let t=n[xe];(t&3)===e&&(t&=16383,t+=1,n[xe]=t)}function gA(n,e,t,i){let r=i!==void 0?n[nl]&65535:0,o=i??-1,a=e.length-1,l=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(l=e[u],i!=null&&l>=i)break}else e[u]<0&&(n[nl]+=65536),(l<o||o==-1)&&($2(n,t,e,u),n[nl]=(n[nl]&4294901760)+u+2),u++}function $S(n,e){Ir(4,n,e);let t=at(null);try{e.call(n)}finally{at(t),Ir(5,n,e)}}function $2(n,e,t,i){let r=t[i]<0,o=t[i+1],a=r?-t[i]:t[i],l=n[a];r?n[xe]>>14<n[nl]>>16&&(n[xe]&3)===e&&(n[xe]+=16384,$S(l,o)):$S(l,o)}var sl=-1,Sa=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function H2(n){return n instanceof Sa}function q2(n){return(n.flags&8)!==0}function G2(n){return(n.flags&16)!==0}var iy={},Cy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=em(i);let r=this.injector.get(e,iy,i);return r!==iy||t===iy?r:this.parentInjector.get(e,t,i)}};function _A(n){return n!==sl}function Fp(n){return n&32767}function W2(n){return n>>16}function Vp(n,e){let t=W2(n),i=e;for(;t>0;)i=i[_l],t--;return i}var Ty=!0;function Bp(n){let e=Ty;return Ty=n,e}var K2=256,vA=K2-1,yA=5,Z2=0,Cr={};function Q2(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(nd)&&(i=t[nd]),i==null&&(i=t[nd]=Z2++);let r=i&vA,o=1<<r;e.data[n+(r>>yA)]|=o}function Up(n,e){let t=wA(n,e);if(t!==-1)return t;let i=e[ze];i.firstCreatePass&&(n.injectorIndex=e.length,ry(i.data,n),ry(e,null),ry(i.blueprint,null));let r=S0(n,e),o=n.injectorIndex;if(_A(r)){let a=Fp(r),l=Vp(r,e),u=l[ze].data;for(let f=0;f<8;f++)e[o+f]=l[a+f]|u[a+f]}return e[o+8]=r,o}function ry(n,e){n.push(0,0,0,0,0,0,0,0,e)}function wA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function S0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=TA(r),i===null)return sl;if(t++,r=r[_l],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return sl}function Sy(n,e,t){Q2(n,e,t)}function Y2(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(MD(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function bA(n,e,t){if(t&Ge.Optional||n!==void 0)return n;u0(e,"NodeInjector")}function EA(n,e,t,i){if(t&Ge.Optional&&i===void 0&&(i=null),!(t&(Ge.Self|Ge.Host))){let r=n[dl],o=Qn(void 0);try{return r?r.get(e,i,t&Ge.Optional):ID(e,i,t&Ge.Optional)}finally{Qn(o)}}return bA(i,e,t)}function IA(n,e,t,i=Ge.Default,r){if(n!==null){if(e[xe]&2048&&!(i&Ge.Self)){let a=tF(n,e,t,i,Cr);if(a!==Cr)return a}let o=CA(n,e,t,i,Cr);if(o!==Cr)return o}return EA(e,t,i,r)}function CA(n,e,t,i,r){let o=X2(t);if(typeof o=="function"){if(!uA(e,n,i))return i&Ge.Host?bA(r,t,i):EA(e,t,i,r);try{let a;if(a=o(i),a==null&&!(i&Ge.Optional))u0(t);else return a}finally{pA()}}else if(typeof o=="number"){let a=null,l=wA(n,e),u=sl,f=i&Ge.Host?e[Dr][sr]:null;for((l===-1||i&Ge.SkipSelf)&&(u=l===-1?S0(n,e):e[l+8],u===sl||!qS(i,!1)?l=-1:(a=e[ze],l=Fp(u),e=Vp(u,e)));l!==-1;){let m=e[ze];if(HS(o,l,m.data)){let v=J2(l,e,t,a,i,f);if(v!==Cr)return v}u=e[l+8],u!==sl&&qS(i,e[ze].data[l+8]===f)&&HS(o,l,e)?(a=m,l=Fp(u),e=Vp(u,e)):l=-1}}return r}function J2(n,e,t,i,r,o){let a=e[ze],l=a.data[n+8],u=i==null?im(l)&&Ty:i!=a&&(l.type&3)!==0,f=r&Ge.Host&&o===l,m=Tp(l,a,t,u,f);return m!==null?Da(e,a,m,l):Cr}function Tp(n,e,t,i,r){let o=n.providerIndexes,a=e.data,l=o&1048575,u=n.directiveStart,f=n.directiveEnd,m=o>>20,v=i?l:l+m,E=r?l+m:f;for(let b=v;b<E;b++){let M=a[b];if(b<u&&t===M||b>=u&&M.type===t)return b}if(r){let b=a[u];if(b&&fs(b)&&b.type===t)return u}return null}function Da(n,e,t,i){let r=n[t],o=e.data;if(H2(r)){let a=r;a.resolving&&SL(TL(o[t]));let l=Bp(a.canSeeViewProviders);a.resolving=!0;let u,f=a.injectImpl?Qn(a.injectImpl):null,m=uA(n,i,Ge.Default);try{r=n[t]=a.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&z2(t,o[t],e)}finally{f!==null&&Qn(f),Bp(l),a.resolving=!1,pA()}}return r}function X2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(nd)?n[nd]:void 0;return typeof e=="number"?e>=0?e&vA:eF:e}function HS(n,e,t){let i=1<<n;return!!(t[e+(n>>yA)]&i)}function qS(n,e){return!(n&Ge.Self)&&!(n&Ge.Host&&e)}var wa=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return IA(this._tNode,this._lView,e,em(i),t)}};function eF(){return new wa(jn(),ut())}function yo(n){return ld(()=>{let e=n.prototype.constructor,t=e[Ap]||Dy(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Ap]||Dy(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Dy(n){return _D(n)?()=>{let e=Dy(Vn(n));return e&&e()}:ba(n)}function tF(n,e,t,i,r){let o=n,a=e;for(;o!==null&&a!==null&&a[xe]&2048&&!(a[xe]&512);){let l=CA(o,a,t,i|Ge.Self,Cr);if(l!==Cr)return l;let u=o.parent;if(!u){let f=a[zD];if(f){let m=f.get(t,Cr,i);if(m!==Cr)return m}u=TA(a),a=a[_l]}o=u}return r}function TA(n){let e=n[ze],t=e.type;return t===2?e.declTNode:t===1?n[sr]:null}function D0(n){return Y2(jn(),n)}function GS(n,e=null,t=null,i){let r=SA(n,e,t,i);return r.resolveInjectorInitializers(),r}function SA(n,e=null,t=null,i,r=new Set){let o=[t||Ri,n2(n)];return i=i||(typeof n=="object"?void 0:Bn(n)),new od(o,e||g0(),i||null,r)}var Cn=class n{static{this.THROW_IF_NOT_FOUND=id}static{this.NULL=new Pp}static create(e,t){if(Array.isArray(e))return GS({name:""},t,e,"");{let i=e.name??"";return GS({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=le({token:n,providedIn:"any",factory:()=>me(SD)})}static{this.__NG_ELEMENT_ID__=-1}};var nF=new de("");nF.__NG_ELEMENT_ID__=n=>{let e=jn();if(e===null)throw new ee(204,!1);if(e.type&2)return e.value;if(n&Ge.Optional)return null;throw new ee(204,!1)};var iF="ngOriginalError";function oy(n){return n[iF]}var DA=!0,A0=(()=>{class n{static{this.__NG_ELEMENT_ID__=rF}static{this.__NG_ENV_ID__=t=>t}}return n})(),Ay=class extends A0{constructor(e){super(),this._lView=e}onDestroy(e){return tA(this._lView,e),()=>E2(this._lView,e)}};function rF(){return new Ay(ut())}var _s=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Gt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}}return n})();var My=class extends mn{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,jD()&&(this.destroyRef=Q(A0,{optional:!0})??void 0,this.pendingTasks=Q(_s,{optional:!0})??void 0)}emit(e){let t=at(null);try{super.next(e)}finally{at(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let l=super.subscribe({next:r,error:o,complete:a});return e instanceof zt&&e.add(l),l}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},rt=My;function jp(...n){}function AA(n){let e,t;function i(){n=jp;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function WS(n){return queueMicrotask(()=>n()),()=>{n=jp}}var M0="isAngularZone",zp=M0+"_ID",oF=0,ct=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rt(!1),this.onMicrotaskEmpty=new rt(!1),this.onStable=new rt(!1),this.onError=new rt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=DA}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=o,cF(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(M0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,sF,jp,jp);try{return o.runTask(a,t,i)}finally{o.cancelTask(a)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},sF={};function x0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function aF(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){AA(()=>{n.callbackScheduled=!1,xy(n),n.isCheckStableRunning=!0,x0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),xy(n)}function cF(n){let e=()=>{aF(n)},t=oF++;n._inner=n._inner.fork({name:"angular",properties:{[M0]:!0,[zp]:t,[zp+t]:!0},onInvokeTask:(i,r,o,a,l,u)=>{if(lF(u))return i.invokeTask(o,a,l,u);try{return KS(n),i.invokeTask(o,a,l,u)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ZS(n)}},onInvoke:(i,r,o,a,l,u,f)=>{try{return KS(n),i.invoke(o,a,l,u,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uF(u)&&e(),ZS(n)}},onHasTask:(i,r,o,a)=>{i.hasTask(o,a),r===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,xy(n),x0(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,o,a)=>(i.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function xy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function KS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ZS(n){n._nesting--,x0(n)}var Py=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rt,this.onMicrotaskEmpty=new rt,this.onStable=new rt,this.onError=new rt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function lF(n){return MA(n,"__ignore_ng_zone__")}function uF(n){return MA(n,"__scheduler_tick__")}function MA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var fo=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&oy(e);for(;t&&oy(t);)t=oy(t);return t||null}},dF=new de("",{providedIn:"root",factory:()=>{let n=Q(ct),e=Q(fo);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function hF(){return vl(jn(),ut())}function vl(n,e){return new ar(Li(n,e))}var ar=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=hF}}return n})();function fF(n){return n instanceof ar?n.nativeElement:n}function pF(){return this._results[Symbol.iterator]()}var Ry=class n{get changes(){return this._changes??=new rt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=pF)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=FL(e);(this._changesDetected=!LL(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function xA(n){return(n.flags&128)===128}var PA=new Map,mF=0;function gF(){return mF++}function _F(n){PA.set(n[nm],n)}function Oy(n){PA.delete(n[nm])}var QS="__ngContext__";function Aa(n,e){us(e)?(n[QS]=e[nm],_F(e)):n[QS]=e}function RA(n){return kA(n[sd])}function OA(n){return kA(n[nr])}function kA(n){for(;n!==null&&!vo(n);)n=n[nr];return n}var ky;function NA(n){ky=n}function vF(){if(ky!==void 0)return ky;if(typeof document<"u")return document;throw new ee(210,!1)}var P0=new de("",{providedIn:"root",factory:()=>yF}),yF="ng",R0=new de(""),Fi=new de("",{providedIn:"platform",factory:()=>"unknown"});var O0=new de(""),k0=new de("",{providedIn:"root",factory:()=>vF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var wF="h",bF="b";var EF=()=>null;function N0(n,e,t=!1){return EF(n,e,t)}var LA=!1,IF=new de("",{providedIn:"root",factory:()=>LA});var vp;function CF(){if(vp===void 0&&(vp=null,ya.trustedTypes))try{vp=ya.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return vp}function YS(n){return CF()?.createScriptURL(n)||n}var $p=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mD})`}};function hd(n){return n instanceof $p?n.changingThisBreaksApplicationSecurity:n}function L0(n,e){let t=TF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${mD})`)}return t===e}function TF(n){return n instanceof $p&&n.getTypeName()||null}var SF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function FA(n){return n=String(n),n.match(SF)?n:"unsafe:"+n}var am=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(am||{});function ui(n){let e=BA();return e?e.sanitize(am.URL,n)||"":L0(n,"URL")?hd(n):FA(al(n))}function DF(n){let e=BA();if(e)return YS(e.sanitize(am.RESOURCE_URL,n)||"");if(L0(n,"ResourceURL"))return YS(hd(n));throw new ee(904,!1)}function AF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?DF:ui}function VA(n,e,t){return AF(e,t)(n)}function BA(){let n=ut();return n&&n[Sr].sanitizer}function UA(n){return n instanceof Function?n():n}function MF(n){return(n??Q(Cn)).get(Fi)==="browser"}var po=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(po||{}),xF;function F0(n,e){return xF(n,e)}function il(n,e,t,i,r){if(i!=null){let o,a=!1;vo(i)?o=i:us(i)&&(a=!0,i=i[_o]);let l=Ar(i);n===0&&t!==null?r==null?qA(e,t,l):Hp(e,t,l,r||null,!0):n===1&&t!==null?Hp(e,t,l,r||null,!0):n===2?qF(e,l,a):n===3&&e.destroyNode(l),o!=null&&WF(e,n,o,t,r)}}function PF(n,e){return n.createText(e)}function RF(n,e,t){n.setValue(e,t)}function jA(n,e,t){return n.createElement(e,t)}function OF(n,e){zA(n,e),e[_o]=null,e[sr]=null}function kF(n,e,t,i,r,o){i[_o]=r,i[sr]=e,cm(n,i,t,1,r,o)}function zA(n,e){e[Sr].changeDetectionScheduler?.notify(9),cm(n,e,e[an],2,null,null)}function NF(n){let e=n[sd];if(!e)return sy(n[ze],n);for(;e;){let t=null;if(us(e))t=e[sd];else{let i=e[li];i&&(t=i)}if(!t){for(;e&&!e[nr]&&e!==n;)us(e)&&sy(e[ze],e),e=e[An];e===null&&(e=n),us(e)&&sy(e[ze],e),t=e&&e[nr]}e=t}}function LF(n,e,t,i){let r=li+i,o=t.length;i>0&&(t[r-1][nr]=e),i<o-li?(e[nr]=t[r],TD(t,li+i,e)):(t.push(e),e[nr]=null),e[An]=t;let a=e[Ea];a!==null&&t!==a&&$A(a,e);let l=e[ho];l!==null&&l.insertView(n),Ey(e),e[xe]|=128}function $A(n,e){let t=n[hl],i=e[An];if(us(i))n[xe]|=Np.HasTransplantedViews;else{let r=i[An][Dr];e[Dr]!==r&&(n[xe]|=Np.HasTransplantedViews)}t===null?n[hl]=[e]:t.push(e)}function V0(n,e){let t=n[hl],i=t.indexOf(e);t.splice(i,1)}function Ny(n,e){if(n.length<=li)return;let t=li+e,i=n[t];if(i){let r=i[Ea];r!==null&&r!==n&&V0(r,i),e>0&&(n[t-1][nr]=i[nr]);let o=xp(n,li+e);OF(i[ze],i);let a=o[ho];a!==null&&a.detachView(o[ze]),i[An]=null,i[nr]=null,i[xe]&=-129}return i}function HA(n,e){if(!(e[xe]&256)){let t=e[an];t.destroyNode&&cm(n,e,t,3,null,null),NF(e)}}function sy(n,e){if(e[xe]&256)return;let t=at(null);try{e[xe]&=-129,e[xe]|=256,e[Oi]&&xv(e[Oi]),VF(n,e),FF(n,e),e[ze].type===1&&e[an].destroy();let i=e[Ea];if(i!==null&&vo(e[An])){i!==e[An]&&V0(i,e);let r=e[ho];r!==null&&r.detachView(n)}Oy(e)}finally{at(t)}}function FF(n,e){let t=n.cleanup,i=e[Op];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[t[o+1]];t[o].call(a)}i!==null&&(e[Op]=null);let r=e[ls];if(r!==null){e[ls]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}}function VF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Sa)){let o=t[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let l=r[o[a]],u=o[a+1];Ir(4,l,u);try{u.call(l)}finally{Ir(5,l,u)}}else{Ir(4,r,o);try{o.call(r)}finally{Ir(5,r,o)}}}}}function BF(n,e,t){return UF(n,e.parent,t)}function UF(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[_o];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===Tr.None||o===Tr.Emulated)return null}return Li(i,t)}}function Hp(n,e,t,i,r){n.insertBefore(e,t,i,r)}function qA(n,e,t){n.appendChild(e,t)}function JS(n,e,t,i,r){i!==null?Hp(n,e,t,i,r):qA(n,e,t)}function GA(n,e){return n.parentNode(e)}function jF(n,e){return n.nextSibling(e)}function zF(n,e,t){return HF(n,e,t)}function $F(n,e,t){return n.type&40?Li(n,t):null}var HF=$F,XS;function B0(n,e,t,i){let r=BF(n,i,e),o=e[an],a=i.parent||e[sr],l=zF(a,i,e);if(r!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)JS(o,r,t[u],l,!1);else JS(o,r,t,l,!1);XS!==void 0&&XS(o,i,e,t,r)}function td(n,e){if(e!==null){let t=e.type;if(t&3)return Li(e,n);if(t&4)return Ly(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return td(n,i);{let r=n[e.index];return vo(r)?Ly(-1,r):Ar(r)}}else{if(t&128)return td(n,e.next);if(t&32)return F0(e,n)()||Ar(n[e.index]);{let i=WA(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Ca(n[Dr]);return td(r,i)}else return td(n,e.next)}}}return null}function WA(n,e){if(e!==null){let i=n[Dr][sr],r=e.projection;return i.projection[r]}return null}function Ly(n,e){let t=li+n+1;if(t<e.length){let i=e[t],r=i[ze].firstChild;if(r!==null)return td(i,r)}return e[Ia]}function qF(n,e,t){n.removeChild(null,e,t)}function U0(n,e,t,i,r,o,a){for(;t!=null;){if(t.type===128){t=t.next;continue}let l=i[t.index],u=t.type;if(a&&e===0&&(l&&Aa(Ar(l),i),t.flags|=2),(t.flags&32)!==32)if(u&8)U0(n,e,t.child,i,r,o,!1),il(e,n,r,l,o);else if(u&32){let f=F0(t,i),m;for(;m=f();)il(e,n,r,m,o);il(e,n,r,l,o)}else u&16?GF(n,e,i,t,r,o):il(e,n,r,l,o);t=a?t.projectionNext:t.next}}function cm(n,e,t,i,r,o){U0(t,i,n.firstChild,e,r,o,!1)}function GF(n,e,t,i,r,o){let a=t[Dr],u=a[sr].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let m=u[f];il(e,n,r,m,o)}else{let f=u,m=a[An];xA(i)&&(f.flags|=128),U0(n,e,f,m,r,o,!0)}}function WF(n,e,t,i,r){let o=t[Ia],a=Ar(t);o!==a&&il(e,n,i,o,r);for(let l=li;l<t.length;l++){let u=t[l];cm(u[ze],u,n,e,i,o)}}function KF(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:po.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=po.Important),n.setStyle(t,i,r,o))}}function ZF(n,e,t){n.setAttribute(e,"style",t)}function KA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ZA(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&gy(n,e,i),r!==null&&KA(n,e,r),o!==null&&ZF(n,e,o)}var Pr={};function j(n=1){QA(xn(),ut(),Oa()+n,!1)}function QA(n,e,t,i){if(!i)if((e[xe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ip(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Cp(e,o,0,t)}Ta(t)}function oe(n,e=Ge.Default){let t=ut();if(t===null)return me(n,e);let i=jn();return IA(i,t,Vn(n),e)}function YA(){let n="invalid";throw new Error(n)}function JA(n,e,t,i,r,o){let a=at(null);try{let l=null;r&ds.SignalBased&&(l=e[i][co]),l!==null&&l.transformFn!==void 0&&(o=l.transformFn(o)),r&ds.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(e,o)),n.setInput!==null?n.setInput(e,l,o,t,i):qD(e,l,i,o)}finally{at(a)}}function QF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Ta(~r);else{let o=r,a=t[++i],l=t[++i];N2(a,o);let u=e[o];l(2,u)}}}finally{Ta(-1)}}function lm(n,e,t,i,r,o,a,l,u,f,m){let v=e.blueprint.slice();return v[_o]=r,v[xe]=i|4|128|8|64,(f!==null||n&&n[xe]&2048)&&(v[xe]|=2048),XD(v),v[An]=v[_l]=n,v[ir]=t,v[Sr]=a||n&&n[Sr],v[an]=l||n&&n[an],v[dl]=u||n&&n[dl]||null,v[sr]=o,v[nm]=gF(),v[Rp]=m,v[zD]=f,v[Dr]=e.type==2?n[Dr]:v,v}function um(n,e,t,i,r){let o=n.data[e];if(o===null)o=YF(n,e,t,i,r),k2()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let a=M2();o.injectorIndex=a===null?-1:a.injectorIndex}return dd(o,!0),o}function YF(n,e,t,i,r){let o=rA(),a=oA(),l=a?o:o&&o.parent,u=n.data[e]=iV(n,l,t,e,i,r);return n.firstChild===null&&(n.firstChild=u),o!==null&&(a?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function XA(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function e1(n,e,t,i,r){let o=Oa(),a=i&2;try{Ta(-1),a&&e.length>rr&&QA(n,e,rr,!1),Ir(a?2:0,r),t(i,r)}finally{Ta(o),Ir(a?3:1,r)}}function t1(n,e,t){if(HD(e)){let i=at(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let l=n.data[a];if(l.contentQueries){let u=t[a];l.contentQueries(1,u,a)}}}finally{at(i)}}}function n1(n,e,t){iA()&&(lV(n,e,t,Li(t,e)),(t.flags&64)===64&&c1(n,e,t))}function i1(n,e,t=Li){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],l=a===-1?t(e,n):n[a];n[r++]=l}}}function r1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=j0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function j0(n,e,t,i,r,o,a,l,u,f,m){let v=rr+i,E=v+r,b=JF(v,E),M=typeof f=="function"?f():f;return b[ze]={type:n,blueprint:b,template:t,queries:null,viewQuery:l,declTNode:e,data:b.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:m}}function JF(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Pr);return t}function XF(n,e,t,i){let o=i.get(IF,LA)||t===Tr.ShadowDom,a=n.selectRootElement(e,o);return eV(a),a}function eV(n){tV(n)}var tV=()=>null;function nV(n,e,t,i){let r=d1(e);r.push(t),n.firstCreatePass&&h1(n).push(i,r.length-1)}function iV(n,e,t,i,r,o){let a=e?e.injectorIndex:-1,l=0;return S2()&&(l|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function eD(n,e,t,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;i??={};let l,u=ds.None;Array.isArray(a)?(l=a[0],u=a[1]):l=a;let f=o;if(r!==null){if(!r.hasOwnProperty(o))continue;f=r[o]}n===0?tD(i,t,f,l,u):tD(i,t,f,l)}return i}function tD(n,e,t,i,r){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,i):o=n[t]=[e,i],r!==void 0&&o.push(r)}function rV(n,e,t){let i=e.directiveStart,r=e.directiveEnd,o=n.data,a=e.attrs,l=[],u=null,f=null;for(let m=i;m<r;m++){let v=o[m],E=t?t.get(v):null,b=E?E.inputs:null,M=E?E.outputs:null;u=eD(0,v.inputs,m,u,b),f=eD(1,v.outputs,m,f,M);let k=u!==null&&a!==null&&!f0(e)?wV(u,m,a):null;l.push(k)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=l,e.inputs=u,e.outputs=f}function oV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function o1(n,e,t,i,r,o,a,l){let u=Li(e,t),f=e.inputs,m;!l&&f!=null&&(m=f[i])?(z0(n,t,m,i,r),im(e)&&sV(t,e.index)):e.type&3?(i=oV(i),r=a!=null?a(r,e.value||"",i):r,o.setProperty(u,i,r)):e.type&12}function sV(n,e){let t=gs(e,n);t[xe]&16||(t[xe]|=64)}function s1(n,e,t,i){if(iA()){let r=i===null?null:{"":-1},o=dV(n,t),a,l;o===null?a=l=null:[a,l]=o,a!==null&&a1(n,e,t,a,r,l),r&&hV(t,i,r)}t.mergedAttrs=rd(t.mergedAttrs,t.attrs)}function a1(n,e,t,i,r,o){for(let f=0;f<i.length;f++)Sy(Up(t,e),n,i[f].type);pV(t,n.data.length,i.length);for(let f=0;f<i.length;f++){let m=i[f];m.providersResolver&&m.providersResolver(m)}let a=!1,l=!1,u=XA(n,e,i.length,null);for(let f=0;f<i.length;f++){let m=i[f];t.mergedAttrs=rd(t.mergedAttrs,m.hostAttrs),mV(n,t,e,u,m),fV(u,m,r),m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let v=m.type.prototype;!a&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),a=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),l=!0),u++}rV(n,t,o)}function aV(n,e,t,i,r){let o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let l=~e.index;cV(a)!=l&&a.push(l),a.push(t,i,o)}}function cV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function lV(n,e,t,i){let r=t.directiveStart,o=t.directiveEnd;im(t)&&gV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Up(t,e),Aa(i,e);let a=t.initialInputs;for(let l=r;l<o;l++){let u=n.data[l],f=Da(e,n,l,t);if(Aa(f,e),a!==null&&yV(e,l-r,f,u,t,a),fs(u)){let m=gs(t.index,e);m[ir]=Da(e,n,l,t)}}}function c1(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,a=L2();try{Ta(o);for(let l=i;l<r;l++){let u=n.data[l],f=e[l];Iy(l),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&uV(u,f)}}finally{Ta(-1),Iy(a)}}function uV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function dV(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let o=0;o<t.length;o++){let a=t[o];if(WL(e,a.selectors,!1))if(i||(i=[]),fs(a))if(a.findHostDirectiveDefs!==null){let l=[];r=r||new Map,a.findHostDirectiveDefs(a,l,r),i.unshift(...l,a);let u=l.length;Fy(n,e,u)}else i.unshift(a),Fy(n,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return i===null?null:[i,r]}function Fy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function hV(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new ee(-301,!1);i.push(e[r],o)}}}function fV(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;fs(e)&&(t[""]=n)}}function pV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function mV(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=ba(r.type,!0)),a=new Sa(o,fs(r),oe);n.blueprint[i]=a,t[i]=a,aV(n,e,i,XA(n,t,r.hostVars,Pr),r)}function gV(n,e,t){let i=Li(e,n),r=r1(t),o=n[Sr].rendererFactory,a=16;t.signals?a=4096:t.onPush&&(a=64);let l=dm(n,lm(n,r,null,a,i,e,null,o.createRenderer(i,t),null,null,null));n[e.index]=l}function _V(n,e,t,i,r,o){let a=Li(n,e);vV(e[an],a,o,n.value,t,i,r)}function vV(n,e,t,i,r,o,a){if(o==null)n.removeAttribute(e,r,t);else{let l=a==null?al(o):a(o,i||"",r);n.setAttribute(e,r,l,t)}}function yV(n,e,t,i,r,o){let a=o[e];if(a!==null)for(let l=0;l<a.length;){let u=a[l++],f=a[l++],m=a[l++],v=a[l++];JA(i,t,u,f,m,v)}}function wV(n,e,t){let i=null,r=0;for(;r<t.length;){let o=t[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let a=n[o];for(let l=0;l<a.length;l+=3)if(a[l]===e){i.push(o,a[l+1],a[l+2],t[r+1]);break}}r+=2}return i}function l1(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function u1(n,e){let t=n.contentQueries;if(t!==null){let i=at(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],a=t[r+1];if(a!==-1){let l=n.data[a];y0(o),l.contentQueries(2,e[a],a)}}}finally{at(i)}}}function dm(n,e){return n[sd]?n[US][nr]=e:n[sd]=e,n[US]=e,e}function Vy(n,e,t){y0(0);let i=at(null);try{e(n,t)}finally{at(i)}}function d1(n){return n[Op]??=[]}function h1(n){return n.cleanup??=[]}function f1(n,e){let t=n[dl],i=t?t.get(fo,null):null;i&&i.handleError(e)}function z0(n,e,t,i,r){for(let o=0;o<t.length;){let a=t[o++],l=t[o++],u=t[o++],f=e[a],m=n.data[a];JA(m,f,i,l,u,r)}}function p1(n,e,t){let i=QD(e,n);RF(n[an],i,t)}function bV(n,e){let t=gs(e,n),i=t[ze];EV(i,t);let r=t[_o];r!==null&&t[Rp]===null&&(t[Rp]=N0(r,t[dl])),$0(i,t,t[ir])}function EV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $0(n,e,t){w0(e);try{let i=n.viewQuery;i!==null&&Vy(1,i,t);let r=n.template;r!==null&&e1(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ho]?.finishViewCreation(n),n.staticContentQueries&&u1(n,e),n.staticViewQueries&&Vy(2,n.viewQuery,t);let o=n.components;o!==null&&IV(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[xe]&=-5,b0()}}function IV(n,e){for(let t=0;t<e.length;t++)bV(n,e[t])}function CV(n,e,t,i){let r=at(null);try{let o=e.tView,l=n[xe]&4096?4096:16,u=lm(n,o,t,l,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[e.index];u[Ea]=f;let m=n[ho];return m!==null&&(u[ho]=m.createEmbeddedView(o)),$0(o,u,t),u}finally{at(r)}}function nD(n,e){return!e||e.firstChild===null||xA(n)}function TV(n,e,t,i=!0){let r=e[ze];if(LF(r,e,n,t),i){let a=Ly(t,n),l=e[an],u=GA(l,n[Ia]);u!==null&&kF(r,n[sr],l,e,u,a)}let o=e[Rp];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qp(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(Ar(o)),vo(o)&&SV(o,i);let a=t.type;if(a&8)qp(n,e,t.child,i);else if(a&32){let l=F0(t,e),u;for(;u=l();)i.push(u)}else if(a&16){let l=WA(e,t);if(Array.isArray(l))i.push(...l);else{let u=Ca(e[Dr]);qp(u[ze],u,l,i,!0)}}t=r?t.projectionNext:t.next}return i}function SV(n,e){for(let t=li;t<n.length;t++){let i=n[t],r=i[ze].firstChild;r!==null&&qp(i[ze],i,r,e)}n[Ia]!==n[_o]&&e.push(n[Ia])}var m1=[];function DV(n){return n[Oi]??AV(n)}function AV(n){let e=m1.pop()??Object.create(xV);return e.lView=n,e}function MV(n){n.lView[Oi]!==n&&(n.lView=null,m1.push(n))}var xV=Oe(Y({},Yu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{om(n.lView)},consumerOnSignalRead(){this.lView[Oi]=this}});function PV(n){let e=n[Oi]??Object.create(RV);return e.lView=n,e}var RV=Oe(Y({},Yu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ca(n.lView);for(;e&&!g1(e[ze]);)e=Ca(e);e&&eA(e)},consumerOnSignalRead(){this.lView[Oi]=this}});function g1(n){return n.type!==2}var OV=100;function _1(n,e=!0,t=0){let i=n[Sr],r=i.rendererFactory,o=!1;o||r.begin?.();try{kV(n,t)}catch(a){throw e&&f1(n,a),a}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function kV(n,e){let t=sA();try{zS(!0),By(n,e);let i=0;for(;rm(n);){if(i===OV)throw new ee(103,!1);i++,By(n,1)}}finally{zS(t)}}function NV(n,e,t,i){let r=e[xe];if((r&256)===256)return;let o=!1,a=!1;!o&&e[Sr].inlineEffectRunner?.flush(),w0(e);let l=!0,u=null,f=null;o||(g1(n)?(f=DV(e),u=Hf(f)):GT()===null?(l=!1,f=PV(e),u=Hf(f)):e[Oi]&&(xv(e[Oi]),e[Oi]=null));try{XD(e),O2(n.bindingStartIndex),t!==null&&e1(n,e,t,2,i);let m=(r&3)===3;if(!o)if(m){let b=n.preOrderCheckHooks;b!==null&&Ip(e,b,null)}else{let b=n.preOrderHooks;b!==null&&Cp(e,b,0,null),ny(e,0)}if(a||LV(e),v1(e,0),n.contentQueries!==null&&u1(n,e),!o)if(m){let b=n.contentCheckHooks;b!==null&&Ip(e,b)}else{let b=n.contentHooks;b!==null&&Cp(e,b,1),ny(e,1)}QF(n,e);let v=n.components;v!==null&&w1(e,v,0);let E=n.viewQuery;if(E!==null&&Vy(2,E,i),!o)if(m){let b=n.viewCheckHooks;b!==null&&Ip(e,b)}else{let b=n.viewHooks;b!==null&&Cp(e,b,2),ny(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ty]){for(let b of e[ty])b();e[ty]=null}o||(e[xe]&=-73)}catch(m){throw o||om(e),m}finally{f!==null&&(Av(f,u),l&&MV(f)),b0()}}function v1(n,e){for(let t=RA(n);t!==null;t=OA(t))for(let i=li;i<t.length;i++){let r=t[i];y1(r,e)}}function LV(n){for(let e=RA(n);e!==null;e=OA(e)){if(!(e[xe]&Np.HasTransplantedViews))continue;let t=e[hl];for(let i=0;i<t.length;i++){let r=t[i];eA(r)}}}function FV(n,e,t){let i=gs(e,n);y1(i,t)}function y1(n,e){v0(n)&&By(n,e)}function By(n,e){let i=n[ze],r=n[xe],o=n[Oi],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&Mv(o)),a||=!1,o&&(o.dirty=!1),n[xe]&=-9217,a)NV(i,n,i.template,n[ir]);else if(r&8192){v1(n,1);let l=i.components;l!==null&&w1(n,l,1)}}function w1(n,e,t){for(let i=0;i<e.length;i++)FV(n,e[i],t)}function H0(n,e){let t=sA()?64:1088;for(n[Sr].changeDetectionScheduler?.notify(e);n;){n[xe]|=t;let i=Ca(n);if(wy(n)&&!i)return n;n=i}return null}var Ma=class{get rootNodes(){let e=this._lView,t=e[ze];return qp(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ir]}set context(e){this._lView[ir]=e}get destroyed(){return(this._lView[xe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[An];if(vo(e)){let t=e[kp],i=t?t.indexOf(this):-1;i>-1&&(Ny(e,i),xp(t,i))}this._attachedToViewContainer=!1}HA(this._lView[ze],this._lView)}onDestroy(e){tA(this._lView,e)}markForCheck(){H0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[xe]&=-129}reattach(){Ey(this._lView),this._lView[xe]|=128}detectChanges(){this._lView[xe]|=1024,_1(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=wy(this._lView),t=this._lView[Ea];t!==null&&!e&&V0(t,this._lView),zA(this._lView[ze],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=wy(this._lView),i=this._lView[Ea];i!==null&&!t&&$A(i,this._lView),Ey(this._lView)}},xa=(()=>{class n{static{this.__NG_ELEMENT_ID__=UV}}return n})(),VV=xa,BV=class extends VV{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=CV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Ma(r)}};function UV(){return hm(jn(),ut())}function hm(n,e){return n.type&4?new BV(e,n,vl(n,e)):null}var nX=new RegExp(`^(\\d+)*(${bF}|${wF})*(.*)`);var jV=()=>null;function iD(n,e){return jV(n,e)}var fl=class{},q0=new de("",{providedIn:"root",factory:()=>!1});var b1=new de(""),E1=new de(""),Uy=class{},Gp=class{};function zV(n){let e=Error(`No component factory found for ${Bn(n)}.`);return e[$V]=n,e}var $V="ngComponent";var jy=class{resolveComponentFactory(e){throw zV(e)}},pl=class{static{this.NULL=new jy}},ps=class{},ka=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>HV()}}return n})();function HV(){let n=ut(),e=jn(),t=gs(e.index,n);return(us(t)?t:n)[an]}var qV=(()=>{class n{static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>null})}}return n})();function zy(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number")o=l;else if(o==1)r=xS(r,l);else if(o==2){let u=l,f=e[++a];i=xS(i,u+": "+f+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var Wp=class extends pl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=hs(e);return new ml(t,this.ngModule)}};function rD(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let o=Array.isArray(r),a=o?r[0]:r,l=o?r[1]:ds.None;e?t.push({propName:a,templateName:i,isSignal:(l&ds.SignalBased)!==0}):t.push({propName:a,templateName:i})}return t}function GV(n){let e=n.toLowerCase();return e==="svg"?ZD:e==="math"?v2:null}var ml=class extends Gp{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=rD(e.inputs,!0);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return rD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=at(null);try{r=r||this.ngModule;let a=r instanceof Un?r:r?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let l=a?new Cy(e,a):e,u=l.get(ps,null);if(u===null)throw new ee(407,!1);let f=l.get(qV,null),m=l.get(fl,null),v={rendererFactory:u,sanitizer:f,inlineEffectRunner:null,changeDetectionScheduler:m},E=u.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",M=i?XF(E,i,this.componentDef.encapsulation,l):jA(E,b,GV(b)),k=512;this.componentDef.signals?k|=4096:this.componentDef.onPush||(k|=16);let N=null;M!==null&&(N=N0(M,l,!0));let G=j0(0,null,null,1,0,null,null,null,null,null,null),te=lm(null,G,null,k,null,null,v,E,l,null,N);w0(te);let J,ue,Ne=null;try{let he=this.componentDef,R,S=null;he.findHostDirectiveDefs?(R=[],S=new Map,he.findHostDirectiveDefs(he,R,S),R.push(he)):R=[he];let A=WV(te,M);Ne=KV(A,M,he,R,te,v,E),ue=YD(G,rr),M&&YV(E,he,M,i),t!==void 0&&JV(ue,this.ngContentSelectors,t),J=QV(Ne,he,R,S,te,[XV]),$0(G,te,null)}catch(he){throw Ne!==null&&Oy(Ne),Oy(te),he}finally{b0()}return new $y(this.componentType,J,vl(ue,te),te,ue)}finally{at(o)}}},$y=class extends Uy{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ma(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;z0(o[ze],o,r,e,t),this.previousInputValues.set(e,t);let a=gs(this._tNode.index,o);H0(a,1)}}get injector(){return new wa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function WV(n,e){let t=n[ze],i=rr;return n[i]=e,um(t,i,2,"#host",null)}function KV(n,e,t,i,r,o,a){let l=r[ze];ZV(i,n,e,a);let u=null;e!==null&&(u=N0(e,r[dl]));let f=o.rendererFactory.createRenderer(e,t),m=16;t.signals?m=4096:t.onPush&&(m=64);let v=lm(r,r1(t),null,m,r[n.index],n,o,f,null,null,u);return l.firstCreatePass&&Fy(l,n,i.length-1),dm(r,v),r[n.index]=v}function ZV(n,e,t,i){for(let r of n)e.mergedAttrs=rd(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(zy(e,e.mergedAttrs,!0),t!==null&&ZA(i,t,e))}function QV(n,e,t,i,r,o){let a=jn(),l=r[ze],u=Li(a,r);a1(l,r,a,t,null,i);for(let m=0;m<t.length;m++){let v=a.directiveStart+m,E=Da(r,l,v,a);Aa(E,r)}c1(l,r,a),u&&Aa(u,r);let f=Da(r,l,a.directiveStart+a.componentOffset,a);if(n[ir]=r[ir]=f,o!==null)for(let m of o)m(f,e);return t1(l,a,r),f}function YV(n,e,t,i){if(i)gy(n,t,["ng-version","18.2.14"]);else{let{attrs:r,classes:o}=JL(e.selectors[0]);r&&gy(n,t,r),o&&o.length>0&&KA(n,t,o.join(" "))}}function JV(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null?Array.from(o):null)}}function XV(){let n=jn();T0(ut()[ze],n)}var vs=(()=>{class n{static{this.__NG_ELEMENT_ID__=eB}}return n})();function eB(){let n=jn();return C1(n,ut())}var tB=vs,I1=class extends tB{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return vl(this._hostTNode,this._hostLView)}get injector(){return new wa(this._hostTNode,this._hostLView)}get parentInjector(){let e=S0(this._hostTNode,this._hostLView);if(_A(e)){let t=Vp(e,this._hostLView),i=Fp(e),r=t[ze].data[i+8];return new wa(r,t)}else return new wa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=oD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-li}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=iD(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(l,r,nD(this._hostTNode,a)),l}createComponent(e,t,i,r,o){let a=e&&!p2(e),l;if(a)l=t;else{let M=t||{};l=M.index,i=M.injector,r=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let u=a?e:new ml(hs(e)),f=i||this.parentInjector;if(!o&&u.ngModule==null){let k=(a?f:this.parentInjector).get(Un,null);k&&(o=k)}let m=hs(u.componentType??{}),v=iD(this._lContainer,m?.id??null),E=v?.firstChild??null,b=u.create(f,r,E,o);return this.insertImpl(b.hostView,l,nD(this._hostTNode,v)),b}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(w2(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let u=r[An],f=new I1(u,u[sr],u[An]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return TV(a,r,o,i),e.attachToViewContainerRef(),TD(ay(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=oD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Ny(this._lContainer,t);i&&(xp(ay(this._lContainer),t),HA(i[ze],i))}detach(e){let t=this._adjustIndex(e,-1),i=Ny(this._lContainer,t);return i&&xp(ay(this._lContainer),t)!=null?new Ma(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function oD(n){return n[kp]}function ay(n){return n[kp]||(n[kp]=[])}function C1(n,e){let t,i=e[n.index];return vo(i)?t=i:(t=l1(i,e,null,n),e[n.index]=t,dm(e,t)),iB(t,e,n,i),new I1(t,n,e)}function nB(n,e){let t=n[an],i=t.createComment(""),r=Li(e,n),o=GA(t,r);return Hp(t,o,i,jF(t,r),!1),i}var iB=sB,rB=()=>!1;function oB(n,e,t){return rB(n,e,t)}function sB(n,e,t,i){if(n[Ia])return;let r;t.type&8?r=Ar(i):r=nB(e,t),n[Ia]=r}var Hy=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},qy=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let a=t.getByIndex(o),l=this.queries[a.indexInDeclarationView];r.push(l.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)G0(e,t).matches!==null&&this.queries[t].setDirty()}},Gy=class{constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=pB(e):this.predicate=e}},Wy=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ky=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,aB(t,o)),this.matchTNodeWithReadOption(e,t,Tp(t,e,o,!1,!1))}else i===xa?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Tp(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===ar||r===vs||r===xa&&t.type&4)this.addMatch(t.index,-2);else{let o=Tp(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function aB(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function cB(n,e){return n.type&11?vl(n,e):n.type&4?hm(n,e):null}function lB(n,e,t,i){return t===-1?cB(e,n):t===-2?uB(n,e,i):Da(n,n[ze],t,e)}function uB(n,e,t){if(t===ar)return vl(e,n);if(t===xa)return hm(e,n);if(t===vs)return C1(e,n)}function T1(n,e,t,i){let r=e[ho].queries[i];if(r.matches===null){let o=n.data,a=t.matches,l=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)l.push(null);else{let m=o[f];l.push(lB(e,m,a[u+1],t.metadata.read))}}r.matches=l}return r.matches}function Zy(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let a=T1(n,e,r,t);for(let l=0;l<o.length;l+=2){let u=o[l];if(u>0)i.push(a[l/2]);else{let f=o[l+1],m=e[-u];for(let v=li;v<m.length;v++){let E=m[v];E[Ea]===E[An]&&Zy(E[ze],E,f,i)}if(m[hl]!==null){let v=m[hl];for(let E=0;E<v.length;E++){let b=v[E];Zy(b[ze],b,f,i)}}}}}return i}function dB(n,e){return n[ho].queries[e].queryList}function hB(n,e,t){let i=new Ry((t&4)===4);return nV(n,e,i,i.destroy),(e[ho]??=new qy).queries.push(new Hy(i))-1}function fB(n,e,t){let i=xn();return i.firstCreatePass&&(mB(i,new Gy(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),hB(i,ut(),e)}function pB(n){return n.split(",").map(e=>e.trim())}function mB(n,e,t){n.queries===null&&(n.queries=new Wy),n.queries.track(new Ky(e,t))}function G0(n,e){return n.queries.getByIndex(e)}function gB(n,e){let t=n[ze],i=G0(t,e);return i.crossesNgTemplate?Zy(t,n,e,[]):T1(t,n,i,e)}var sD=new Set;function ys(n){sD.has(n)||(sD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function _B(n){return typeof n=="function"&&n[co]!==void 0}function fm(n,e){ys("NgSignals");let t=iS(n),i=t[co];return e?.equal&&(i.equal=e.equal),t.set=r=>Pv(i,r),t.update=r=>rS(i,r),t.asReadonly=vB.bind(t),t}function vB(){let n=this[co];if(n.readonlyFn===void 0){let e=()=>this();e[co]=n,n.readonlyFn=e}return n.readonlyFn}function S1(n){return _B(n)&&typeof n.set=="function"}function yB(n){return Object.getPrototypeOf(n.prototype).constructor}function Rr(n){let e=yB(n.type),t=!0,i=[n];for(;e;){let r;if(fs(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let a=n;a.inputs=yp(n.inputs),a.inputTransforms=yp(n.inputTransforms),a.declaredInputs=yp(n.declaredInputs),a.outputs=yp(n.outputs);let l=r.hostBindings;l&&CB(n,l);let u=r.viewQuery,f=r.contentQueries;if(u&&EB(n,u),f&&IB(n,f),wB(n,r),_L(n.outputs,r.outputs),fs(r)&&r.data.animation){let m=n.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let l=o[a];l&&l.ngInherit&&l(n),l===Rr&&(t=!1)}}e=Object.getPrototypeOf(e)}bB(i)}function wB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function bB(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=rd(r.hostAttrs,t=rd(t,r.hostAttrs))}}function yp(n){return n===cl?{}:n===Ri?[]:n}function EB(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function IB(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function CB(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function W0(n){let e=n.inputConfig,t={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(t[i]=r[3])}n.inputTransforms=t}var ms=class{},ad=class{};var Qy=class extends ms{constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wp(this);let o=kD(e);this._bootstrapComponents=UA(o.bootstrap),this._r3Injector=SA(e,t,[{provide:ms,useValue:this},{provide:pl,useValue:this.componentFactoryResolver},...i],Bn(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Yy=class extends ad{constructor(e){super(),this.moduleType=e}create(e){return new Qy(this.moduleType,e,[])}};var Kp=class extends ms{constructor(e){super(),this.componentFactoryResolver=new Wp(this),this.instance=null;let t=new od([...e.providers,{provide:ms,useValue:this},{provide:pl,useValue:this.componentFactoryResolver}],e.parent||g0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function pm(n,e,t=null){return new Kp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function D1(n){return SB(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function TB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function SB(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function A1(n,e,t){return n[e]=t}function DB(n,e){return n[e]}function Pa(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function M1(n,e,t,i){let r=Pa(n,e,t);return Pa(n,e+1,i)||r}function AB(n){return(n.flags&32)===32}function MB(n,e,t,i,r,o,a,l,u){let f=e.consts,m=um(e,n,4,a||null,l||null);s1(e,t,m,Lp(f,u)),T0(e,m);let v=m.tView=j0(2,m,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,m),v.queries=e.queries.embeddedTView(m)),m}function xB(n,e,t,i,r,o,a,l,u,f){let m=t+rr,v=e.firstCreatePass?MB(m,e,n,i,r,o,a,l,u):e.data[m];dd(v,!1);let E=PB(e,n,v,t);I0()&&B0(e,n,E,v),Aa(E,n);let b=l1(E,n,E,v);return n[m]=b,dm(n,b),oB(b,v,n),_0(v)&&n1(e,n,v),u!=null&&i1(n,v,f),v}function Re(n,e,t,i,r,o,a,l){let u=ut(),f=xn(),m=Lp(f.consts,o);return xB(u,f,n,e,t,i,r,m,a,l),Re}var PB=RB;function RB(n,e,t,i){return C0(!0),e[an].createComment("")}var rl=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(rl||{}),x1=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Jy=class n{constructor(){this.ngZone=Q(ct),this.scheduler=Q(fl),this.errorHandler=Q(fo,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[rl.EarlyRead,rl.Write,rl.MixedReadWrite,rl.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}},Xy=class{constructor(e,t,i,r){this.impl=e,this.hooks=t,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function K0(n,e){!e?.injector&&f2(K0);let t=e?.injector??Q(Cn);return MF(t)?(ys("NgAfterNextRender"),kB(n,t,e,!0)):NB}function OB(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function kB(n,e,t,i){let r=e.get(x1);r.impl??=e.get(Jy);let o=t?.phase??rl.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(A0):null,l=new Xy(r.impl,OB(n,o),i,a);return r.impl.register(l),l}var NB={destroy(){}};function Or(n,e,t,i){let r=ut(),o=sm();if(Pa(r,o,e)){let a=xn(),l=E0();_V(l,r,n,e,t,i)}return Or}function LB(n,e,t,i){return Pa(n,sm(),t)?e+al(t)+i:Pr}function FB(n,e,t,i,r,o){let a=R2(),l=M1(n,a,t,r);return cA(2),l?e+al(t)+i+al(r)+o:Pr}function wp(n,e){return n<<17|e<<2}function Ra(n){return n>>17&32767}function VB(n){return(n&2)==2}function BB(n,e){return n&131071|e<<17}function e0(n){return n|2}function gl(n){return(n&131068)>>2}function cy(n,e){return n&-131069|e<<2}function UB(n){return(n&1)===1}function t0(n){return n|1}function jB(n,e,t,i,r,o){let a=o?e.classBindings:e.styleBindings,l=Ra(a),u=gl(a);n[i]=t;let f=!1,m;if(Array.isArray(t)){let v=t;m=v[1],(m===null||ud(v,m)>0)&&(f=!0)}else m=t;if(r)if(u!==0){let E=Ra(n[l+1]);n[i+1]=wp(E,l),E!==0&&(n[E+1]=cy(n[E+1],i)),n[l+1]=BB(n[l+1],i)}else n[i+1]=wp(l,0),l!==0&&(n[l+1]=cy(n[l+1],i)),l=i;else n[i+1]=wp(u,0),l===0?l=i:n[u+1]=cy(n[u+1],i),u=i;f&&(n[i+1]=e0(n[i+1])),aD(n,m,i,!0),aD(n,m,i,!1),zB(e,m,n,i,o),a=wp(l,u),o?e.classBindings=a:e.styleBindings=a}function zB(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ud(o,e)>=0&&(t[i+1]=t0(t[i+1]))}function aD(n,e,t,i){let r=n[t+1],o=e===null,a=i?Ra(r):gl(r),l=!1;for(;a!==0&&(l===!1||o);){let u=n[a],f=n[a+1];$B(u,e)&&(l=!0,n[a+1]=i?t0(f):e0(f)),a=i?Ra(f):gl(f)}l&&(n[t+1]=i?e0(r):t0(r))}function $B(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ud(n,e)>=0:!1}function X(n,e,t){let i=ut(),r=sm();if(Pa(i,r,e)){let o=xn(),a=E0();o1(o,a,i,n,e,i[an],t,!1)}return X}function cD(n,e,t,i,r){let o=e.inputs,a=r?"class":"style";z0(n,t,o[a],a,i)}function wo(n,e,t){return P1(n,e,t,!1),wo}function Ze(n,e){return P1(n,e,null,!0),Ze}function P1(n,e,t,i){let r=ut(),o=xn(),a=cA(2);if(o.firstUpdatePass&&qB(o,n,a,i),e!==Pr&&Pa(r,a,e)){let l=o.data[Oa()];QB(o,l,r,r[an],n,r[a+1]=YB(e,t),i,a)}}function HB(n,e){return e>=n.expandoStartIndex}function qB(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[Oa()],a=HB(n,t);JB(o,i)&&e===null&&!a&&(e=!1),e=GB(r,o,e,i),jB(r,o,e,t,a,i)}}function GB(n,e,t,i){let r=F2(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=ly(null,n,e,t,i),t=cd(t,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==r)if(t=ly(r,n,e,t,i),o===null){let u=WB(n,e,i);u!==void 0&&Array.isArray(u)&&(u=ly(null,n,e,u[1],i),u=cd(u,e.attrs,i),KB(n,e,i,u))}else o=ZB(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function WB(n,e,t){let i=t?e.classBindings:e.styleBindings;if(gl(i)!==0)return n[Ra(i)]}function KB(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Ra(r)]=i}function ZB(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=n[o].hostAttrs;i=cd(i,a,t)}return cd(i,e.attrs,t)}function ly(n,e,t,i,r){let o=null,a=t.directiveEnd,l=t.directiveStylingLast;for(l===-1?l=t.directiveStart:l++;l<a&&(o=e[l],i=cd(i,o.hostAttrs,r),o!==n);)l++;return n!==null&&(t.directiveStylingLast=l),i}function cd(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),BL(n,a,t?!0:e[++o]))}return n===void 0?null:n}function QB(n,e,t,i,r,o,a,l){if(!(e.type&3))return;let u=n.data,f=u[l+1],m=UB(f)?lD(u,e,t,r,gl(f),a):void 0;if(!Zp(m)){Zp(o)||VB(f)&&(o=lD(u,null,t,r,l,a));let v=QD(Oa(),t);KF(i,a,v,r,o)}}function lD(n,e,t,i,r,o){let a=e===null,l;for(;r>0;){let u=n[r],f=Array.isArray(u),m=f?u[1]:u,v=m===null,E=t[r+1];E===Pr&&(E=v?Ri:void 0);let b=v?Xv(E,i):m===i?E:void 0;if(f&&!Zp(b)&&(b=Xv(u,i)),Zp(b)&&(l=b,a))return l;let M=n[r+1];r=a?Ra(M):gl(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(l=Xv(u,i))}return l}function Zp(n){return n!==void 0}function YB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Bn(hd(n)))),n}function JB(n,e){return(n.flags&(e?8:16))!==0}function XB(n,e,t,i,r,o){let a=e.consts,l=Lp(a,r),u=um(e,n,2,i,l);return s1(e,t,u,Lp(a,o)),u.attrs!==null&&zy(u,u.attrs,!1),u.mergedAttrs!==null&&zy(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function C(n,e,t,i){let r=ut(),o=xn(),a=rr+n,l=r[an],u=o.firstCreatePass?XB(a,o,r,e,t,i):o.data[a],f=eU(o,r,u,l,e,n);r[a]=f;let m=_0(u);return dd(u,!0),ZA(l,f,u),!AB(u)&&I0()&&B0(o,r,f,u),I2()===0&&Aa(f,r),C2(),m&&(n1(o,r,u),t1(o,u,r)),i!==null&&i1(r,u),C}function D(){let n=jn();oA()?x2():(n=n.parent,dd(n,!1));let e=n;D2(e)&&A2(),T2();let t=xn();return t.firstCreatePass&&(T0(t,n),HD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&q2(e)&&cD(t,e,ut(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&G2(e)&&cD(t,e,ut(),e.stylesWithoutHost,!1),D}function ie(n,e,t,i){return C(n,e,t,i),D(),ie}var eU=(n,e,t,i,r,o)=>(C0(!0),jA(i,r,j2()));function gt(){return ut()}var va=void 0;function tU(n){let e=n,t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&i===0?1:5}var nU=["en",[["a","p"],["AM","PM"],va],[["AM","PM"],va,va],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],va,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],va,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",va,"{1} 'at' {0}",va],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",tU],uy={};function di(n){let e=iU(n),t=uD(e);if(t)return t;let i=e.split("-")[0];if(t=uD(i),t)return t;if(i==="en")return nU;throw new ee(701,!1)}function uD(n){return n in uy||(uy[n]=ya.ng&&ya.ng.common&&ya.ng.common.locales&&ya.ng.common.locales[n]),uy[n]}var $t=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}($t||{});function iU(n){return n.toLowerCase().replace(/_/g,"-")}var Qp="en-US";var rU=Qp;function oU(n){typeof n=="string"&&(rU=n.toLowerCase().replace(/_/g,"-"))}var sU=(n,e,t)=>{};function ae(n,e,t,i){let r=ut(),o=xn(),a=jn();return R1(o,r,r[an],a,n,e,i),ae}function aU(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===t&&r[o+1]===i){let l=e[Op],u=r[o+2];return l.length>u?l[u]:null}typeof a=="string"&&(o+=2)}return null}function R1(n,e,t,i,r,o,a){let l=_0(i),f=n.firstCreatePass&&h1(n),m=e[ir],v=d1(e),E=!0;if(i.type&3||a){let k=Li(i,e),N=a?a(k):k,G=v.length,te=a?ue=>a(Ar(ue[i.index])):i.index,J=null;if(!a&&l&&(J=aU(n,e,r,i.index)),J!==null){let ue=J.__ngLastListenerFn__||J;ue.__ngNextListenerFn__=o,J.__ngLastListenerFn__=o,E=!1}else{o=hD(i,e,m,o),sU(k,r,o);let ue=t.listen(N,r,o);v.push(o,ue),f&&f.push(r,te,G,G+1)}}else o=hD(i,e,m,o);let b=i.outputs,M;if(E&&b!==null&&(M=b[r])){let k=M.length;if(k)for(let N=0;N<k;N+=2){let G=M[N],te=M[N+1],Ne=e[G][te].subscribe(o),he=v.length;v.push(o,Ne),f&&f.push(r,i.index,he,-(he+1))}}}function dD(n,e,t,i){let r=at(null);try{return Ir(6,e,t),t(i)!==!1}catch(o){return f1(n,o),!1}finally{Ir(7,e,t),at(r)}}function hD(n,e,t,i){return function r(o){if(o===Function)return i;let a=n.componentOffset>-1?gs(n.index,e):e;H0(a,5);let l=dD(e,t,i,o),u=r.__ngNextListenerFn__;for(;u;)l=dD(e,t,u,o)&&l,u=u.__ngNextListenerFn__;return l}}function ve(n=1){return B2(n)}function Vi(n,e,t){fB(n,e,t)}function hi(n){let e=ut(),t=xn(),i=lA();y0(i+1);let r=G0(t,i);if(n.dirty&&y2(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=gB(e,i);n.reset(o,fF),n.notifyOnChanges()}return!0}return!1}function fi(){return dB(ut(),lA())}function cU(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function yl(n){let e=P2();return JD(e,rr+n)}function H(n,e=""){let t=ut(),i=xn(),r=n+rr,o=i.firstCreatePass?um(i,r,1,e,null):i.data[r],a=lU(i,t,o,e,n);t[r]=a,I0()&&B0(i,t,a,o),dd(o,!1)}var lU=(n,e,t,i,r)=>(C0(!0),PF(e[an],i));function _t(n){return ot("",n,""),_t}function ot(n,e,t){let i=ut(),r=LB(i,n,e,t);return r!==Pr&&p1(i,Oa(),r),ot}function Z0(n,e,t,i,r){let o=ut(),a=FB(o,n,e,t,i,r);return a!==Pr&&p1(o,Oa(),a),Z0}function gn(n,e,t){S1(e)&&(e=e());let i=ut(),r=sm();if(Pa(i,r,e)){let o=xn(),a=E0();o1(o,a,i,n,e,i[an],t,!1)}return gn}function Sn(n,e){let t=S1(n);return t&&n.set(e),t}function _n(n,e){let t=ut(),i=xn(),r=jn();return R1(i,t,t[an],r,n,e),_n}function uU(n,e,t){let i=xn();if(i.firstCreatePass){let r=fs(n);n0(t,i.data,i.blueprint,r,!0),n0(e,i.data,i.blueprint,r,!1)}}function n0(n,e,t,i,r){if(n=Vn(n),Array.isArray(n))for(let o=0;o<n.length;o++)n0(n[o],e,t,i,r);else{let o=xn(),a=ut(),l=jn(),u=ul(n)?n:Vn(n.provide),f=UD(n),m=l.providerIndexes&1048575,v=l.directiveStart,E=l.providerIndexes>>20;if(ul(n)||!n.multi){let b=new Sa(f,r,oe),M=hy(u,e,r?m:m+E,v);M===-1?(Sy(Up(l,a),o,u),dy(o,n,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(b),a.push(b)):(t[M]=b,a[M]=b)}else{let b=hy(u,e,m+E,v),M=hy(u,e,m,m+E),k=b>=0&&t[b],N=M>=0&&t[M];if(r&&!N||!r&&!k){Sy(Up(l,a),o,u);let G=fU(r?hU:dU,t.length,r,i,f);!r&&N&&(t[M].providerFactory=G),dy(o,n,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(G),a.push(G)}else{let G=O1(t[r?M:b],f,!r&&i);dy(o,n,b>-1?b:M,G)}!r&&i&&N&&t[M].componentProviders++}}}function dy(n,e,t,i){let r=ul(e),o=s2(e);if(r||o){let u=(o?Vn(e.useClass):e).prototype.ngOnDestroy;if(u){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let m=f.indexOf(t);m===-1?f.push(t,[i,u]):f[m+1].push(i,u)}else f.push(t,u)}}}function O1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function hy(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function dU(n,e,t,i){return i0(this.multi,[])}function hU(n,e,t,i){let r=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Da(t,t[ze],this.providerFactory.index,i);o=l.slice(0,a),i0(r,o);for(let u=a;u<l.length;u++)o.push(l[u])}else o=[],i0(r,o);return o}function i0(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function fU(n,e,t,i,r){let o=new Sa(n,t,oe);return o.multi=[],o.index=e,o.componentProviders=0,O1(o,r,i&&!t),o}function Na(n,e=[]){return t=>{t.providersResolver=(i,r)=>uU(i,r?r(n):n,e)}}var pU=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=FD(!1,t.type),r=i.length>0?pm([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=le({token:n,providedIn:"environment",factory:()=>new n(me(Un))})}}return n})();function vt(n){ys("NgStandalone"),n.getStandaloneInjector=e=>e.get(pU).getOrCreateStandaloneInjector(n)}function k1(n,e,t){let i=aA()+n,r=ut();return r[i]===Pr?A1(r,i,t?e.call(t):e()):DB(r,i)}function mU(n,e){let t=n[e];return t===Pr?void 0:t}function gU(n,e,t,i,r,o,a){let l=e+t;return M1(n,l,r,o)?A1(n,l+2,a?i.call(a,r,o):i(r,o)):mU(n,l+2)}function fd(n,e){let t=xn(),i,r=n+rr;t.firstCreatePass?(i=_U(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=ba(i.type,!0)),a,l=Qn(oe);try{let u=Bp(!1),f=o();return Bp(u),cU(t,ut(),r,f),f}finally{Qn(l)}}function _U(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function pd(n,e,t,i){let r=n+rr,o=ut(),a=JD(o,r);return vU(o,r)?gU(o,aA(),e,a.transform,t,i,a):a.transform(t,i)}function vU(n,e){return n[ze].data[e].pure}function N1(n,e){return hm(n,e)}var mo=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},L1=new mo("18.2.14");var mm=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var F1=new de("");function La(n){return!!n&&typeof n.then=="function"}function V1(n){return!!n&&typeof n.subscribe=="function"}var gm=new de(""),B1=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Q(gm,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=r();if(La(o))t.push(o);else if(V1(o)){let a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});t.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),md=new de("");function yU(){nS(()=>{throw new ee(600,!1)})}function wU(n){return n.isBoundToModule}var bU=10;function EU(n,e,t){try{let i=t();return La(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var ws=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Q(dF),this.afterRenderManager=Q(x1),this.zonelessEnabled=Q(q0),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new mn,this.afterTick=new mn,this.componentTypes=[],this.components=[],this.isStable=Q(_s).hasPendingTasks.pipe(Me(t=>!t)),this._injector=Q(Un)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){let r=t instanceof Gp;if(!this._injector.get(B1).done){let E=!r&&OD(t),b=!1;throw new ee(405,b)}let a;r?a=t:a=this._injector.get(pl).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=wU(a)?void 0:this._injector.get(ms),u=i||a.selector,f=a.create(Cn.NULL,[],u,l),m=f.location.nativeElement,v=f.injector.get(F1,null);return v?.registerApplication(m),f.onDestroy(()=>{this.detachView(f.hostView),Sp(this.components,f),v?.unregisterApplication(m)}),this._loadComponent(f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ee(101,!1);let t=at(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,at(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ps,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<bU;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)IU(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>rm(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Sp(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(md,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Sp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Sp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function IU(n,e,t,i){if(!t&&!rm(n))return;_1(n,e,t&&!i?0:1)}var r0=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},_m=(()=>{class n{compileModuleSync(t){return new Yy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=kD(t),o=UA(r.declarations).reduce((a,l)=>{let u=hs(l);return u&&a.push(new ml(u)),a},[]);return new r0(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var CU=(()=>{class n{constructor(){this.zone=Q(ct),this.changeDetectionScheduler=Q(fl),this.applicationRef=Q(ws)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function TU({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ct(Oe(Y({},SU()),{scheduleInRootZone:t})),[{provide:ct,useFactory:n},{provide:ll,multi:!0,useFactory:()=>{let i=Q(CU,{optional:!0});return()=>i.initialize()}},{provide:ll,multi:!0,useFactory:()=>{let i=Q(DU);return()=>{i.initialize()}}},e===!0?{provide:b1,useValue:!0}:[],{provide:E1,useValue:t??DA}]}function SU(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var DU=(()=>{class n{constructor(){this.subscription=new zt,this.initialized=!1,this.zone=Q(ct),this.pendingTasks=Q(_s)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ct.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ct.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var AU=(()=>{class n{constructor(){this.appRef=Q(ws),this.taskService=Q(_s),this.ngZone=Q(ct),this.zonelessEnabled=Q(q0),this.disableScheduling=Q(b1,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new zt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zp):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Q(E1,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Py||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?WS:AA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,WS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function MU(){return typeof $localize<"u"&&$localize.locale||Qp}var gd=new de("",{providedIn:"root",factory:()=>Q(gd,Ge.Optional|Ge.SkipSelf)||MU()});var o0=new de("");function bp(n){return!n.moduleRef}function xU(n){let e=bp(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ct);return t.run(()=>{bp(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(fo,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),bp(n)){let o=()=>e.destroy(),a=n.platformInjector.get(o0);a.add(o),e.onDestroy(()=>{r.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(o0);a.add(o),n.moduleRef.onDestroy(()=>{Sp(n.allPlatformModules,n.moduleRef),r.unsubscribe(),a.delete(o)})}return EU(i,t,()=>{let o=e.get(B1);return o.runInitializers(),o.donePromise.then(()=>{let a=e.get(gd,Qp);if(oU(a||Qp),bp(n)){let l=e.get(ws);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return PU(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function PU(n,e){let t=n.injector.get(ws);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ee(-403,!1);e.push(n)}var Dp=null,U1=new de("");function RU(n=[],e){return Cn.create({name:e,providers:[{provide:tm,useValue:"platform"},{provide:o0,useValue:new Set([()=>Dp=null])},...n]})}function OU(n=[]){if(Dp)return Dp;let e=RU(n);return e.get(U1,!1)||(Dp=e),yU(),kU(e),e}function kU(n){n.get(R0,null)?.forEach(t=>t())}var pi=(()=>{class n{static{this.__NG_ELEMENT_ID__=NU}}return n})();function NU(n){return LU(jn(),ut(),(n&16)===16)}function LU(n,e,t){if(im(n)&&!t){let i=gs(n.index,e);return new Ma(i,i)}else if(n.type&175){let i=e[Dr];return new Ma(i,e)}return null}var s0=class{constructor(){}supports(e){return D1(e)}create(e){return new a0(e)}},FU=(n,e)=>e,a0=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||FU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let a=!i||t&&t.currentIndex<fD(i,r,o)?t:i,l=fD(a,r,o),u=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(t=t._next,a.previousIndex==null)r++;else{o||(o=[]);let f=l-r,m=u-r;if(f!=m){for(let E=0;E<f;E++){let b=E<o.length?o[E]:o[E]=0,M=b+E;m<=M&&M<f&&(o[E]=b+1)}let v=a.previousIndex;o[v]=m-f}}l!==u&&e(a,l,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!D1(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,a;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],a=this._trackByFn(l,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,l),i=!0):(i&&(t=this._verifyReinsertion(t,o,a,l)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,TB(e,l=>{a=this._trackByFn(r,l),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,l,a,r),i=!0):(i&&(t=this._verifyReinsertion(t,l,a,r)),Object.is(t.item,l)||this._addIdentityChange(t,l)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new c0(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yp),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},c0=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},l0=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Yp=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new l0,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fD(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function pD(){return new Q0([new s0])}var Q0=(()=>{class n{static{this.\u0275prov=le({token:n,providedIn:"root",factory:pD})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||pD()),deps:[[n,new d0,new Mn]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new ee(901,!1)}}return n})();function j1(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;try{let o=r?.injector??OU(i);if(o.get(U1,!1)===!0&&!n.platformRef)throw new ee(401,!1);let a=[TU({}),{provide:fl,useExisting:AU},...t||[]],l=new Kp({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return xU({r3Injector:l.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}}function Fa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function vm(n,e){ys("NgSignals");let t=XT(n);return e?.equal&&(t[co].equal=e.equal),t}function bs(n){let e=at(null);try{return n()}finally{at(e)}}function z1(n){let e=hs(n);if(!e)return null;let t=new ml(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Z1=null;function To(){return Z1}function Q1(n){Z1??=n}var Dm=class{};var vn=new de(""),sw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(BU),providedIn:"platform"})}}return n})(),Y1=new de(""),BU=(()=>{class n extends sw{constructor(){super(),this._doc=Q(vn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return To().getBaseHref(this._doc)}onPopState(t){let i=To().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=To().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function aw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function $1(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function Eo(n){return n&&n[0]!=="?"?"?"+n:n}var So=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(cw),providedIn:"root"})}}return n})(),J1=new de(""),cw=(()=>{class n extends So{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Q(vn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return aw(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Eo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Eo(o));this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Eo(o));this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(me(sw),me(J1,8))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),X1=(()=>{class n extends So{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=aw(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Eo(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Eo(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(me(sw),me(J1,8))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),bl=(()=>{class n{constructor(t){this._subject=new rt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=zU($1(H1(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Eo(i))}normalize(t){return n.stripTrailingSlash(jU(this._basePath,H1(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Eo(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Eo(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=Eo}static{this.joinWithSlash=aw}static{this.stripTrailingSlash=$1}static{this.\u0275fac=function(i){return new(i||n)(me(So))}}static{this.\u0275prov=le({token:n,factory:()=>UU(),providedIn:"root"})}}return n})();function UU(){return new bl(me(So))}function jU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function H1(n){return n.replace(/\/index.html$/,"")}function zU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var eM=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(eM||{});var zn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(zn||{}),Ct=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ct||{}),mi=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(mi||{}),gi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function $U(n){return di(n)[$t.LocaleId]}function HU(n,e,t){let i=di(n),r=[i[$t.DayPeriodsFormat],i[$t.DayPeriodsStandalone]],o=Bi(r,e);return Bi(o,t)}function qU(n,e,t){let i=di(n),r=[i[$t.DaysFormat],i[$t.DaysStandalone]],o=Bi(r,e);return Bi(o,t)}function GU(n,e,t){let i=di(n),r=[i[$t.MonthsFormat],i[$t.MonthsStandalone]],o=Bi(r,e);return Bi(o,t)}function WU(n,e){let i=di(n)[$t.Eras];return Bi(i,e)}function ym(n,e){let t=di(n);return Bi(t[$t.DateFormat],e)}function wm(n,e){let t=di(n);return Bi(t[$t.TimeFormat],e)}function bm(n,e){let i=di(n)[$t.DateTimeFormat];return Bi(i,e)}function Io(n,e){let t=di(n),i=t[$t.NumberSymbols][e];if(typeof i>"u"){if(e===gi.CurrencyDecimal)return t[$t.NumberSymbols][gi.Decimal];if(e===gi.CurrencyGroup)return t[$t.NumberSymbols][gi.Group]}return i}function KU(n,e){return di(n)[$t.NumberFormats][e]}function tM(n){if(!n[$t.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[$t.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ZU(n){let e=di(n);return tM(e),(e[$t.ExtraData][2]||[]).map(i=>typeof i=="string"?Y0(i):[Y0(i[0]),Y0(i[1])])}function QU(n,e,t){let i=di(n);tM(i);let r=[i[$t.ExtraData][0],i[$t.ExtraData][1]],o=Bi(r,e)||[];return Bi(o,t)||[]}function Bi(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Y0(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var YU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Em={},JU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Co=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Co||{}),pt=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(pt||{}),ft=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(ft||{});function XU(n,e,t,i){let r=c5(n);e=bo(t,e)||e;let a=[],l;for(;e;)if(l=JU.exec(e),l){a=a.concat(l.slice(1));let m=a.pop();if(!m)break;e=m}else{a.push(e);break}let u=r.getTimezoneOffset();i&&(u=iM(i,u),r=a5(r,i,!0));let f="";return a.forEach(m=>{let v=o5(m);f+=v?v(r,t,u):m==="''"?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function Am(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function bo(n,e){let t=$U(n);if(Em[t]??={},Em[t][e])return Em[t][e];let i="";switch(e){case"shortDate":i=ym(n,mi.Short);break;case"mediumDate":i=ym(n,mi.Medium);break;case"longDate":i=ym(n,mi.Long);break;case"fullDate":i=ym(n,mi.Full);break;case"shortTime":i=wm(n,mi.Short);break;case"mediumTime":i=wm(n,mi.Medium);break;case"longTime":i=wm(n,mi.Long);break;case"fullTime":i=wm(n,mi.Full);break;case"short":let r=bo(n,"shortTime"),o=bo(n,"shortDate");i=Im(bm(n,mi.Short),[r,o]);break;case"medium":let a=bo(n,"mediumTime"),l=bo(n,"mediumDate");i=Im(bm(n,mi.Medium),[a,l]);break;case"long":let u=bo(n,"longTime"),f=bo(n,"longDate");i=Im(bm(n,mi.Long),[u,f]);break;case"full":let m=bo(n,"fullTime"),v=bo(n,"fullDate");i=Im(bm(n,mi.Full),[m,v]);break}return i&&(Em[t][e]=i),i}function Im(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function cr(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let a=String(n);for(;a.length<e;)a="0"+a;return i&&(a=a.slice(a.length-e)),o+a}function e5(n,e){return cr(n,3).substring(0,e)}function Jt(n,e,t=0,i=!1,r=!1){return function(o,a){let l=t5(n,o);if((t>0||l>-t)&&(l+=t),n===pt.Hours)l===0&&t===-12&&(l=12);else if(n===pt.FractionalSeconds)return e5(l,e);let u=Io(a,gi.MinusSign);return cr(l,e,u,i,r)}}function t5(n,e){switch(n){case pt.FullYear:return e.getFullYear();case pt.Month:return e.getMonth();case pt.Date:return e.getDate();case pt.Hours:return e.getHours();case pt.Minutes:return e.getMinutes();case pt.Seconds:return e.getSeconds();case pt.FractionalSeconds:return e.getMilliseconds();case pt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Rt(n,e,t=zn.Format,i=!1){return function(r,o){return n5(r,o,n,e,t,i)}}function n5(n,e,t,i,r,o){switch(t){case ft.Months:return GU(e,r,i)[n.getMonth()];case ft.Days:return qU(e,r,i)[n.getDay()];case ft.DayPeriods:let a=n.getHours(),l=n.getMinutes();if(o){let f=ZU(e),m=QU(e,r,i),v=f.findIndex(E=>{if(Array.isArray(E)){let[b,M]=E,k=a>=b.hours&&l>=b.minutes,N=a<M.hours||a===M.hours&&l<M.minutes;if(b.hours<M.hours){if(k&&N)return!0}else if(k||N)return!0}else if(E.hours===a&&E.minutes===l)return!0;return!1});if(v!==-1)return m[v]}return HU(e,r,i)[a<12?0:1];case ft.Eras:return WU(e,i)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Cm(n){return function(e,t,i){let r=-1*i,o=Io(t,gi.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Co.Short:return(r>=0?"+":"")+cr(a,2,o)+cr(Math.abs(r%60),2,o);case Co.ShortGMT:return"GMT"+(r>=0?"+":"")+cr(a,1,o);case Co.Long:return"GMT"+(r>=0?"+":"")+cr(a,2,o)+":"+cr(Math.abs(r%60),2,o);case Co.Extended:return i===0?"Z":(r>=0?"+":"")+cr(a,2,o)+":"+cr(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var i5=0,Sm=4;function r5(n){let e=Am(n,i5,1).getDay();return Am(n,0,1+(e<=Sm?Sm:Sm+7)-e)}function nM(n){let e=n.getDay(),t=e===0?-3:Sm-e;return Am(n.getFullYear(),n.getMonth(),n.getDate()+t)}function J0(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,a=t.getDate();r=1+Math.floor((a+o)/7)}else{let o=nM(t),a=r5(o.getFullYear()),l=o.getTime()-a.getTime();r=1+Math.round(l/6048e5)}return cr(r,n,Io(i,gi.MinusSign))}}function Tm(n,e=!1){return function(t,i){let o=nM(t).getFullYear();return cr(o,n,Io(i,gi.MinusSign),e)}}var X0={};function o5(n){if(X0[n])return X0[n];let e;switch(n){case"G":case"GG":case"GGG":e=Rt(ft.Eras,Ct.Abbreviated);break;case"GGGG":e=Rt(ft.Eras,Ct.Wide);break;case"GGGGG":e=Rt(ft.Eras,Ct.Narrow);break;case"y":e=Jt(pt.FullYear,1,0,!1,!0);break;case"yy":e=Jt(pt.FullYear,2,0,!0,!0);break;case"yyy":e=Jt(pt.FullYear,3,0,!1,!0);break;case"yyyy":e=Jt(pt.FullYear,4,0,!1,!0);break;case"Y":e=Tm(1);break;case"YY":e=Tm(2,!0);break;case"YYY":e=Tm(3);break;case"YYYY":e=Tm(4);break;case"M":case"L":e=Jt(pt.Month,1,1);break;case"MM":case"LL":e=Jt(pt.Month,2,1);break;case"MMM":e=Rt(ft.Months,Ct.Abbreviated);break;case"MMMM":e=Rt(ft.Months,Ct.Wide);break;case"MMMMM":e=Rt(ft.Months,Ct.Narrow);break;case"LLL":e=Rt(ft.Months,Ct.Abbreviated,zn.Standalone);break;case"LLLL":e=Rt(ft.Months,Ct.Wide,zn.Standalone);break;case"LLLLL":e=Rt(ft.Months,Ct.Narrow,zn.Standalone);break;case"w":e=J0(1);break;case"ww":e=J0(2);break;case"W":e=J0(1,!0);break;case"d":e=Jt(pt.Date,1);break;case"dd":e=Jt(pt.Date,2);break;case"c":case"cc":e=Jt(pt.Day,1);break;case"ccc":e=Rt(ft.Days,Ct.Abbreviated,zn.Standalone);break;case"cccc":e=Rt(ft.Days,Ct.Wide,zn.Standalone);break;case"ccccc":e=Rt(ft.Days,Ct.Narrow,zn.Standalone);break;case"cccccc":e=Rt(ft.Days,Ct.Short,zn.Standalone);break;case"E":case"EE":case"EEE":e=Rt(ft.Days,Ct.Abbreviated);break;case"EEEE":e=Rt(ft.Days,Ct.Wide);break;case"EEEEE":e=Rt(ft.Days,Ct.Narrow);break;case"EEEEEE":e=Rt(ft.Days,Ct.Short);break;case"a":case"aa":case"aaa":e=Rt(ft.DayPeriods,Ct.Abbreviated);break;case"aaaa":e=Rt(ft.DayPeriods,Ct.Wide);break;case"aaaaa":e=Rt(ft.DayPeriods,Ct.Narrow);break;case"b":case"bb":case"bbb":e=Rt(ft.DayPeriods,Ct.Abbreviated,zn.Standalone,!0);break;case"bbbb":e=Rt(ft.DayPeriods,Ct.Wide,zn.Standalone,!0);break;case"bbbbb":e=Rt(ft.DayPeriods,Ct.Narrow,zn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Rt(ft.DayPeriods,Ct.Abbreviated,zn.Format,!0);break;case"BBBB":e=Rt(ft.DayPeriods,Ct.Wide,zn.Format,!0);break;case"BBBBB":e=Rt(ft.DayPeriods,Ct.Narrow,zn.Format,!0);break;case"h":e=Jt(pt.Hours,1,-12);break;case"hh":e=Jt(pt.Hours,2,-12);break;case"H":e=Jt(pt.Hours,1);break;case"HH":e=Jt(pt.Hours,2);break;case"m":e=Jt(pt.Minutes,1);break;case"mm":e=Jt(pt.Minutes,2);break;case"s":e=Jt(pt.Seconds,1);break;case"ss":e=Jt(pt.Seconds,2);break;case"S":e=Jt(pt.FractionalSeconds,1);break;case"SS":e=Jt(pt.FractionalSeconds,2);break;case"SSS":e=Jt(pt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Cm(Co.Short);break;case"ZZZZZ":e=Cm(Co.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Cm(Co.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Cm(Co.Long);break;default:return null}return X0[n]=e,e}function iM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function s5(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function a5(n,e,t){let i=t?-1:1,r=n.getTimezoneOffset(),o=iM(e,r);return s5(n,i*(o-r))}function c5(n){if(q1(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,a=1]=n.split("-").map(l=>+l);return Am(r,o-1,a)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(YU))return l5(i)}let e=new Date(n);if(!q1(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function l5(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let a=Number(n[4]||0)-t,l=Number(n[5]||0)-i,u=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,a,l,u,f),e}function q1(n){return n instanceof Date&&!isNaN(n.valueOf())}var u5=/^(\d+)?\.((\d+)(-(\d+))?)?$/,G1=22,Mm=".",_d="0",d5=";",h5=",",ew="#";function f5(n,e,t,i,r,o,a=!1){let l="",u=!1;if(!isFinite(n))l=Io(t,gi.Infinity);else{let f=_5(n);a&&(f=g5(f));let m=e.minInt,v=e.minFrac,E=e.maxFrac;if(o){let te=o.match(u5);if(te===null)throw new Error(`${o} is not a valid digit info`);let J=te[1],ue=te[3],Ne=te[5];J!=null&&(m=tw(J)),ue!=null&&(v=tw(ue)),Ne!=null?E=tw(Ne):ue!=null&&v>E&&(E=v)}v5(f,v,E);let b=f.digits,M=f.integerLen,k=f.exponent,N=[];for(u=b.every(te=>!te);M<m;M++)b.unshift(0);for(;M<0;M++)b.unshift(0);M>0?N=b.splice(M,b.length):(N=b,b=[0]);let G=[];for(b.length>=e.lgSize&&G.unshift(b.splice(-e.lgSize,b.length).join(""));b.length>e.gSize;)G.unshift(b.splice(-e.gSize,b.length).join(""));b.length&&G.unshift(b.join("")),l=G.join(Io(t,i)),N.length&&(l+=Io(t,r)+N.join("")),k&&(l+=Io(t,gi.Exponential)+"+"+k)}return n<0&&!u?l=e.negPre+l+e.negSuf:l=e.posPre+l+e.posSuf,l}function p5(n,e,t){let i=KU(e,eM.Decimal),r=m5(i,Io(e,gi.MinusSign));return f5(n,r,e,gi.Group,gi.Decimal,t)}function m5(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(d5),r=i[0],o=i[1],a=r.indexOf(Mm)!==-1?r.split(Mm):[r.substring(0,r.lastIndexOf(_d)+1),r.substring(r.lastIndexOf(_d)+1)],l=a[0],u=a[1]||"";t.posPre=l.substring(0,l.indexOf(ew));for(let m=0;m<u.length;m++){let v=u.charAt(m);v===_d?t.minFrac=t.maxFrac=m+1:v===ew?t.maxFrac=m+1:t.posSuf+=v}let f=l.split(h5);if(t.gSize=f[1]?f[1].length:0,t.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let m=r.length-t.posPre.length-t.posSuf.length,v=o.indexOf(ew);t.negPre=o.substring(0,v).replace(/'/g,""),t.negSuf=o.slice(v+m).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function g5(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function _5(n){let e=Math.abs(n)+"",t=0,i,r,o,a,l;for((r=e.indexOf(Mm))>-1&&(e=e.replace(Mm,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===_d;o++);if(o===(l=e.length))i=[0],r=1;else{for(l--;e.charAt(l)===_d;)l--;for(r-=o,i=[],a=0;o<=l;o++,a++)i[a]=Number(e.charAt(o))}return r>G1&&(i=i.splice(0,G1-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function v5(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),a=o+n.integerLen,l=i[a];if(a>0){i.splice(Math.max(n.integerLen,a));for(let v=a;v<i.length;v++)i[v]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let v=1;v<a;v++)i[v]=0}if(l>=5)if(a-1<0){for(let v=0;v>a;v--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[a-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+n.integerLen,m=i.reduceRight(function(v,E,b,M){return E=E+v,M[b]=E<10?E:E-10,u&&(M[b]===0&&b>=f?M.pop():u=!1),E>=10?1:0},0);m&&(i.unshift(m),n.integerLen++)}function tw(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function xm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var nw=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Yn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,a)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new nw(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),W1(l,r)}});for(let r=0,o=i.length;r<o;r++){let l=i.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);W1(o,r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(oe(vs),oe(xa),oe(Q0))}}static{this.\u0275dir=Tn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function W1(n,e){n.context.$implicit=e.item}var Xt=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new iw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){K1("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){K1("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(oe(vs),oe(xa))}}static{this.\u0275dir=Tn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),iw=class{constructor(){this.$implicit=null,this.ngIf=null}};function K1(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Bn(e)}'.`)}function rM(n,e){return new ee(2100,!1)}var y5="mediumDate",w5=new de(""),b5=new de(""),oM=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let a=i??this.defaultOptions?.dateFormat??y5,l=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return XU(t,a,o||this.locale,l)}catch(a){throw rM(n,a.message)}}static{this.\u0275fac=function(i){return new(i||n)(oe(gd,16),oe(w5,24),oe(b5,24))}}static{this.\u0275pipe=p0({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var sM=(()=>{class n{constructor(t){this._locale=t}transform(t,i,r){if(!E5(t))return null;r||=this._locale;try{let o=I5(t);return p5(o,r,i)}catch(o){throw rM(n,o.message)}}static{this.\u0275fac=function(i){return new(i||n)(oe(gd,16))}}static{this.\u0275pipe=p0({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function E5(n){return!(n==null||n===""||n!==n)}function I5(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Tt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xr({type:n})}static{this.\u0275inj=Mr({})}}return n})(),lw="browser",C5="server";function T5(n){return n===lw}function Pm(n){return n===C5}var aM=(()=>{class n{static{this.\u0275prov=le({token:n,providedIn:"root",factory:()=>T5(Q(Fi))?new rw(Q(vn),window):new ow})}}return n})(),rw=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=S5(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function S5(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}var ow=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},wl=class{};var yd=class{},Om=class{},Do=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=r.toLowerCase(),a=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(l=>o.indexOf(l)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var dw=class{encodeKey(e){return cM(e)}encodeValue(e){return cM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function D5(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[a,l]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],u=t.get(a)||[];u.push(l),t.set(a,u)}),t}var A5=/%(\d[a-f0-9])/gi,M5={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function cM(n){return encodeURIComponent(n).replace(A5,(e,t)=>M5[t]??e)}function Rm(n){return`${n}`}var Is=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new dw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=D5(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Rm):[Rm(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Rm(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Rm(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var hw=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function x5(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function lM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function uM(n){return typeof Blob<"u"&&n instanceof Blob}function dM(n){return typeof FormData<"u"&&n instanceof FormData}function P5(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var vd=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(x5(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Do,this.context??=new hw,!this.params)this.params=new Is,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let l=t.indexOf("?"),u=l===-1?"?":l<t.length-1?"&":"";this.urlWithParams=t+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||lM(this.body)||uM(this.body)||dM(this.body)||P5(this.body)?this.body:this.body instanceof Is?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||dM(this.body)?null:uM(this.body)?this.body.type||null:lM(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Is?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,l=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,f=e.headers||this.headers,m=e.params||this.params,v=e.context??this.context;return e.setHeaders!==void 0&&(f=Object.keys(e.setHeaders).reduce((E,b)=>E.set(b,e.setHeaders[b]),f)),e.setParams&&(m=Object.keys(e.setParams).reduce((E,b)=>E.set(b,e.setParams[b]),m)),new n(t,i,a,{params:m,headers:f,context:v,reportProgress:u,responseType:r,withCredentials:l,transferCache:o})}},Cs=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Cs||{}),wd=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new Do,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},km=class n extends wd{constructor(e={}){super(e),this.type=Cs.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},bd=class n extends wd{constructor(e={}){super(e),this.type=Cs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Es=class extends wd{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},mM=200,R5=204;function uw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var mw=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof vd)o=t;else{let u;r.headers instanceof Do?u=r.headers:u=new Do(r.headers);let f;r.params&&(r.params instanceof Is?f=r.params:f=new Is({fromObject:r.params})),o=new vd(t,i,r.body!==void 0?r.body:null,{headers:u,context:r.context,params:f,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let a=Se(o).pipe(lo(u=>this.handler.handle(u)));if(t instanceof vd||r.observe==="events")return a;let l=a.pipe(Kn(u=>u instanceof bd));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(Me(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(Me(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(Me(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return l.pipe(Me(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Is().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,uw(r,i))}post(t,i,r={}){return this.request("POST",t,uw(r,i))}put(t,i,r={}){return this.request("PUT",t,uw(r,i))}static{this.\u0275fac=function(i){return new(i||n)(me(yd))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),O5=/^\)\]\}',?\n/,k5="X-Request-URL";function hM(n){if(n.url)return n.url;let e=k5.toLocaleLowerCase();return n.headers.get(e)}var N5=(()=>{class n{constructor(){this.fetchImpl=Q(fw,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=Q(ct)}handle(t){return new je(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(pw,o=>i.error(new Es({error:o}))),()=>r.abort()})}doRequest(t,i,r){return T(this,null,function*(){let o=this.createRequestInit(t),a;try{let b=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,Y({signal:i},o)));L5(b),r.next({type:Cs.Sent}),a=yield b}catch(b){r.error(new Es({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}));return}let l=new Do(a.headers),u=a.statusText,f=hM(a)??t.urlWithParams,m=a.status,v=null;if(t.reportProgress&&r.next(new km({headers:l,status:m,statusText:u,url:f})),a.body){let b=a.headers.get("content-length"),M=[],k=a.body.getReader(),N=0,G,te,J=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>T(this,null,function*(){for(;;){let{done:Ne,value:he}=yield k.read();if(Ne)break;if(M.push(he),N+=he.length,t.reportProgress){te=t.responseType==="text"?(te??"")+(G??=new TextDecoder).decode(he,{stream:!0}):void 0;let R=()=>r.next({type:Cs.DownloadProgress,total:b?+b:void 0,loaded:N,partialText:te});J?J.run(R):R()}}}));let ue=this.concatChunks(M,N);try{let Ne=a.headers.get("Content-Type")??"";v=this.parseBody(t,ue,Ne)}catch(Ne){r.error(new Es({error:Ne,headers:new Do(a.headers),status:a.status,statusText:a.statusText,url:hM(a)??t.urlWithParams}));return}}m===0&&(m=v?mM:0),m>=200&&m<300?(r.next(new bd({body:v,headers:l,status:m,statusText:u,url:f})),r.complete()):r.error(new Es({error:v,headers:l,status:m,statusText:u,url:f}))})}parseBody(t,i,r){switch(t.responseType){case"json":let o=new TextDecoder().decode(i).replace(O5,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((o,a)=>i[o]=a.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),o=0;for(let a of t)r.set(a,o),o+=a.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),fw=class{};function pw(){}function L5(n){n.then(pw,pw)}function F5(n,e){return e(n)}function V5(n,e,t){return(i,r)=>ki(t,()=>e(i,o=>n(o,r)))}var gM=new de(""),B5=new de(""),U5=new de("",{providedIn:"root",factory:()=>!0});var fM=(()=>{class n extends yd{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Q(_s),this.contributeToStability=Q(U5)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(gM),...this.injector.get(B5,[])]));this.chain=i.reduceRight((r,o)=>V5(r,o,this.injector),F5)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(_a(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(me(Om),me(Un))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();var j5=/^\)\]\}',?\n/;function z5(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var pM=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ee(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?xt(i.\u0275loadImpl()):Se(null)).pipe(Zn(()=>new je(o=>{let a=i.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((k,N)=>a.setRequestHeader(k,N.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let k=t.detectContentTypeHeader();k!==null&&a.setRequestHeader("Content-Type",k)}if(t.responseType){let k=t.responseType.toLowerCase();a.responseType=k!=="json"?k:"text"}let l=t.serializeBody(),u=null,f=()=>{if(u!==null)return u;let k=a.statusText||"OK",N=new Do(a.getAllResponseHeaders()),G=z5(a)||t.url;return u=new km({headers:N,status:a.status,statusText:k,url:G}),u},m=()=>{let{headers:k,status:N,statusText:G,url:te}=f(),J=null;N!==R5&&(J=typeof a.response>"u"?a.responseText:a.response),N===0&&(N=J?mM:0);let ue=N>=200&&N<300;if(t.responseType==="json"&&typeof J=="string"){let Ne=J;J=J.replace(j5,"");try{J=J!==""?JSON.parse(J):null}catch(he){J=Ne,ue&&(ue=!1,J={error:he,text:J})}}ue?(o.next(new bd({body:J,headers:k,status:N,statusText:G,url:te||void 0})),o.complete()):o.error(new Es({error:J,headers:k,status:N,statusText:G,url:te||void 0}))},v=k=>{let{url:N}=f(),G=new Es({error:k,status:a.status||0,statusText:a.statusText||"Unknown Error",url:N||void 0});o.error(G)},E=!1,b=k=>{E||(o.next(f()),E=!0);let N={type:Cs.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(N.total=k.total),t.responseType==="text"&&a.responseText&&(N.partialText=a.responseText),o.next(N)},M=k=>{let N={type:Cs.UploadProgress,loaded:k.loaded};k.lengthComputable&&(N.total=k.total),o.next(N)};return a.addEventListener("load",m),a.addEventListener("error",v),a.addEventListener("timeout",v),a.addEventListener("abort",v),t.reportProgress&&(a.addEventListener("progress",b),l!==null&&a.upload&&a.upload.addEventListener("progress",M)),a.send(l),o.next({type:Cs.Sent}),()=>{a.removeEventListener("error",v),a.removeEventListener("abort",v),a.removeEventListener("load",m),a.removeEventListener("timeout",v),t.reportProgress&&(a.removeEventListener("progress",b),l!==null&&a.upload&&a.upload.removeEventListener("progress",M)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(me(wl))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),_M=new de(""),$5="XSRF-TOKEN",H5=new de("",{providedIn:"root",factory:()=>$5}),q5="X-XSRF-TOKEN",G5=new de("",{providedIn:"root",factory:()=>q5}),Nm=class{},W5=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=xm(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(me(vn),me(Fi),me(H5))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function K5(n,e){let t=n.url.toLowerCase();if(!Q(_M)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=Q(Nm).getToken(),r=Q(G5);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}function vM(...n){let e=[mw,pM,fM,{provide:yd,useExisting:fM},{provide:Om,useFactory:()=>Q(N5,{optional:!0})??Q(pM)},{provide:gM,useValue:K5,multi:!0},{provide:_M,useValue:!0},{provide:Nm,useClass:W5}];for(let t of n)e.push(...t.\u0275providers);return or(e)}var vw=class extends Dm{constructor(){super(...arguments),this.supportsDOMEvents=!0}},yw=class n extends vw{static makeCurrent(){Q1(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Q5();return t==null?null:Y5(t)}resetBaseElement(){Ed=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xm(document.cookie,e)}},Ed=null;function Q5(){return Ed=Ed||document.querySelector("base"),Ed?Ed.getAttribute("href"):null}function Y5(n){return new URL(n,document.baseURI).pathname}var J5=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),ww=new de(""),bM=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(me(ww),me(ct))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),Lm=class{constructor(e){this._doc=e}},gw="ng-app-id",EM=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Pm(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${gw}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(gw),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(gw,this.appId),t.appendChild(a),a}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(me(vn),me(P0),me(k0,8),me(Fi))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),_w={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ew=/%COMP%/g,IM="%COMP%",X5=`_nghost-${IM}`,ej=`_ngcontent-${IM}`,tj=!0,nj=new de("",{providedIn:"root",factory:()=>tj});function ij(n){return ej.replace(Ew,n)}function rj(n){return X5.replace(Ew,n)}function CM(n,e){return e.map(t=>t.replace(Ew,n))}var Fm=(()=>{class n{constructor(t,i,r,o,a,l,u,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Pm(l),this.defaultRenderer=new Id(t,a,u,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Tr.ShadowDom&&(i=Oe(Y({},i),{encapsulation:Tr.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Vm?r.applyToHost(t):r instanceof Cd&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,l=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(i.encapsulation){case Tr.Emulated:o=new Vm(u,f,i,this.appId,m,a,l,v);break;case Tr.ShadowDom:return new bw(u,f,t,i,a,l,this.nonce,v);default:o=new Cd(u,f,i,m,a,l,v);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(me(bM),me(EM),me(P0),me(nj),me(vn),me(Fi),me(ct),me(k0))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),Id=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(_w[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yM(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(yM(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ee(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=_w[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=_w[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(po.DashCase|po.Important)?e.style.setProperty(t,i,r&po.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&po.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=To().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function yM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var bw=class extends Id{constructor(e,t,i,r,o,a,l,u){super(e,o,a,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=CM(r.id,r.styles);for(let m of f){let v=document.createElement("style");l&&v.setAttribute("nonce",l),v.textContent=m,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cd=class extends Id{constructor(e,t,i,r,o,a,l,u){super(e,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=u?CM(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Vm=class extends Cd{constructor(e,t,i,r,o,a,l,u){let f=r+"-"+i.id;super(e,t,i,o,a,l,u,f),this.contentAttr=ij(f),this.hostAttr=rj(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},oj=(()=>{class n extends Lm{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(me(vn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),wM=["alt","control","meta","shift"],sj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},aj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},cj=(()=>{class n extends Lm{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>To().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),wM.forEach(f=>{let m=i.indexOf(f);m>-1&&(i.splice(m,1),a+=f+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(t,i){let r=sj[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),wM.forEach(a=>{if(a!==r){let l=aj[a];l(t)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(me(vn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function TM(n,e,t){return j1(Y({rootComponent:n,platformRef:t?.platformRef},lj(e)))}function lj(n){return{appProviders:[...pj,...n?.providers??[]],platformProviders:fj}}function uj(){yw.makeCurrent()}function dj(){return new fo}function hj(){return NA(document),document}var fj=[{provide:Fi,useValue:lw},{provide:R0,useValue:uj,multi:!0},{provide:vn,useFactory:hj,deps:[]}];var pj=[{provide:tm,useValue:"root"},{provide:fo,useFactory:dj,deps:[]},{provide:ww,useClass:oj,multi:!0,deps:[vn,ct,Fi]},{provide:ww,useClass:cj,multi:!0,deps:[vn]},Fm,EM,bM,{provide:ps,useExisting:Fm},{provide:wl,useClass:J5,deps:[]},[]];var SM=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(me(vn))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $e="primary",Bd=Symbol("RouteTitle"),Dw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Dl(n){return new Dw(n)}function gj(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],l=n[o];if(a[0]===":")r[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function _j(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kr(n[t],e[t]))return!1;return!0}function kr(n,e){let t=n?Aw(n):void 0,i=e?Aw(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!FM(n[r],e[r]))return!1;return!0}function Aw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function FM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function VM(n){return n.length>0?n[n.length-1]:null}function Ds(n){return qv(n)?n:La(n)?xt(Promise.resolve(n)):Se(n)}var vj={exact:UM,subset:jM},BM={exact:yj,subset:wj,ignored:()=>!0};function DM(n,e,t){return vj[t.paths](n.root,e.root,t.matrixParams)&&BM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function yj(n,e){return kr(n,e)}function UM(n,e,t){if(!Ba(n.segments,e.segments)||!jm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!UM(n.children[i],e.children[i],t))return!1;return!0}function wj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>FM(n[t],e[t]))}function jM(n,e,t){return zM(n,e,e.segments,t)}function zM(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Ba(r,t)||e.hasChildren()||!jm(r,t,i))}else if(n.segments.length===t.length){if(!Ba(n.segments,t)||!jm(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!jM(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ba(n.segments,r)||!jm(n.segments,r,i)||!n.children[$e]?!1:zM(n.children[$e],e,o,i)}}function jm(n,e,t){return e.every((i,r)=>BM[t](n[r].parameters,i.parameters))}var Mo=class{constructor(e=new yt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Dl(this.queryParams),this._queryParamMap}toString(){return Ij.serialize(this)}},yt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zm(this)}},Va=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Dl(this.parameters),this._parameterMap}toString(){return HM(this)}};function bj(n,e){return Ba(n,e)&&n.every((t,i)=>kr(t.parameters,e[i].parameters))}function Ba(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function Ej(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===$e&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==$e&&(t=t.concat(e(r,i)))}),t}var Ud=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>new Al,providedIn:"root"})}}return n})(),Al=class{parse(e){let t=new xw(e);return new Mo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Td(e.root,!0)}`,i=Sj(e.queryParams),r=typeof e.fragment=="string"?`#${Cj(e.fragment)}`:"";return`${t}${i}${r}`}},Ij=new Al;function zm(n){return n.segments.map(e=>HM(e)).join("/")}function Td(n,e){if(!n.hasChildren())return zm(n);if(e){let t=n.children[$e]?Td(n.children[$e],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==$e&&i.push(`${r}:${Td(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Ej(n,(i,r)=>r===$e?[Td(n.children[$e],!1)]:[`${r}:${Td(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[$e]!=null?`${zm(n)}/${t[0]}`:`${zm(n)}/(${t.join("//")})`}}function $M(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bm(n){return $M(n).replace(/%3B/gi,";")}function Cj(n){return encodeURI(n)}function Mw(n){return $M(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $m(n){return decodeURIComponent(n)}function AM(n){return $m(n.replace(/\+/g,"%20"))}function HM(n){return`${Mw(n.path)}${Tj(n.parameters)}`}function Tj(n){return Object.entries(n).map(([e,t])=>`;${Mw(e)}=${Mw(t)}`).join("")}function Sj(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Bm(t)}=${Bm(r)}`).join("&"):`${Bm(t)}=${Bm(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Dj=/^[^\/()?;#]+/;function Iw(n){let e=n.match(Dj);return e?e[0]:""}var Aj=/^[^\/()?;=#]+/;function Mj(n){let e=n.match(Aj);return e?e[0]:""}var xj=/^[^=?&#]+/;function Pj(n){let e=n.match(xj);return e?e[0]:""}var Rj=/^[^&#]+/;function Oj(n){let e=n.match(Rj);return e?e[0]:""}var xw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new yt([],{}):new yt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[$e]=new yt(e,t)),i}parseSegment(){let e=Iw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new Va($m(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Mj(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Iw(this.remaining);r&&(i=r,this.capture(i))}e[$m(t)]=$m(i)}parseQueryParam(e){let t=Pj(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=Oj(this.remaining);a&&(i=a,this.capture(i))}let r=AM(t),o=AM(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Iw(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ee(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=$e);let a=this.parseChildren();t[o]=Object.keys(a).length===1?a[$e]:new yt([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function qM(n){return n.segments.length>0?new yt([],{[$e]:n}):n}function GM(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=GM(r);if(i===$e&&o.segments.length===0&&o.hasChildren())for(let[a,l]of Object.entries(o.children))e[a]=l;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new yt(n.segments,e);return kj(t)}function kj(n){if(n.numberOfChildren===1&&n.children[$e]){let e=n.children[$e];return new yt(n.segments.concat(e.segments),e.children)}return n}function Ua(n){return n instanceof Mo}function Nj(n,e,t=null,i=null){let r=WM(n);return KM(r,e,t,i)}function WM(n){let e;function t(o){let a={};for(let u of o.children){let f=t(u);a[u.outlet]=f}let l=new yt(o.url,a);return o===n&&(e=l),l}let i=t(n.root),r=qM(i);return e??r}function KM(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Cw(r,r,r,t,i);let o=Lj(e);if(o.toRoot())return Cw(r,r,new yt([],{}),t,i);let a=Fj(o,r,n),l=a.processChildren?Ad(a.segmentGroup,a.index,o.commands):QM(a.segmentGroup,a.index,o.commands);return Cw(r,a.segmentGroup,l,t,i)}function Hm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Pd(n){return typeof n=="object"&&n!=null&&n.outlets}function Cw(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let a;n===e?a=t:a=ZM(n,e,t);let l=qM(GM(a));return new Mo(l,o,r)}function ZM(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=ZM(o,e,t)}),new yt(n.segments,i)}var qm=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Hm(i[0]))throw new ee(4003,!1);let r=i.find(Pd);if(r&&r!==VM(i))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Lj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new qm(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([u,f])=>{l[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?t=!0:l===".."?e++:l!=""&&r.push(l))}),r):[...r,o]},[]);return new qm(t,e,i)}var Cl=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function Fj(n,e,t){if(n.isAbsolute)return new Cl(e,!0,0);if(!t)return new Cl(e,!1,NaN);if(t.parent===null)return new Cl(t,!0,0);let i=Hm(n.commands[0])?0:1,r=t.segments.length-1+i;return Vj(t,r,n.numberOfDoubleDots)}function Vj(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ee(4005,!1);r=i.segments.length}return new Cl(i,!1,r-o)}function Bj(n){return Pd(n[0])?n[0].outlets:{[$e]:n}}function QM(n,e,t){if(n??=new yt([],{}),n.segments.length===0&&n.hasChildren())return Ad(n,e,t);let i=Uj(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new yt(n.segments.slice(0,i.pathIndex),{});return o.children[$e]=new yt(n.segments.slice(i.pathIndex),n.children),Ad(o,0,r)}else return i.match&&r.length===0?new yt(n.segments,{}):i.match&&!n.hasChildren()?Pw(n,e,t):i.match?Ad(n,0,r):Pw(n,e,t)}function Ad(n,e,t){if(t.length===0)return new yt(n.segments,{});{let i=Bj(t),r={};if(Object.keys(i).some(o=>o!==$e)&&n.children[$e]&&n.numberOfChildren===1&&n.children[$e].segments.length===0){let o=Ad(n.children[$e],e,t);return new yt(n.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=QM(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new yt(n.segments,r)}}function Uj(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let a=n.segments[r],l=t[i];if(Pd(l))break;let u=`${l}`,f=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!xM(u,f,a))return o;i+=2}else{if(!xM(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Pw(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Pd(o)){let u=jj(o.outlets);return new yt(i,u)}if(r===0&&Hm(t[0])){let u=n.segments[e];i.push(new Va(u.path,MM(t[0]))),r++;continue}let a=Pd(o)?o.outlets[$e]:`${o}`,l=r<t.length-1?t[r+1]:null;a&&l&&Hm(l)?(i.push(new Va(a,MM(l))),r+=2):(i.push(new Va(a,{})),r++)}return new yt(i,{})}function jj(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Pw(new yt([],{}),0,i))}),e}function MM(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function xM(n,e,t){return n==t.path&&kr(e,t.parameters)}var Md="imperative",yn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(yn||{}),ji=class{constructor(e,t){this.id=e,this.url=t}},Ml=class extends ji{constructor(e,t,i="imperative",r=null){super(e,t),this.type=yn.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Nr=class extends ji{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=yn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vi=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(vi||{}),Gm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Gm||{}),Ao=class extends ji{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=yn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ts=class extends ji{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=yn.NavigationSkipped}},Rd=class extends ji{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=yn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wm=class extends ji{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=yn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rw=class extends ji{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=yn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ow=class extends ji{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=yn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kw=class extends ji{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=yn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nw=class extends ji{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=yn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lw=class{constructor(e){this.route=e,this.type=yn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fw=class{constructor(e){this.route=e,this.type=yn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vw=class{constructor(e){this.snapshot=e,this.type=yn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bw=class{constructor(e){this.snapshot=e,this.type=yn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uw=class{constructor(e){this.snapshot=e,this.type=yn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jw=class{constructor(e){this.snapshot=e,this.type=yn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Km=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=yn.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Od=class{},xl=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function zj(n,e){return n.providers&&!n._injector&&(n._injector=pm(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lr(n){return n.outlet||$e}function $j(n,e){let t=n.filter(i=>lr(i)===e);return t.push(...n.filter(i=>lr(i)!==e)),t}function jd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var zw=class{get injector(){return jd(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new zd(this.rootInjector),this.attachRef=null}},zd=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new zw(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(me(Un))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$w(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=$w(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Hw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Hw(e,this._root).map(t=>t.value)}};function $w(n,e){if(n===e.value)return e;for(let t of e.children){let i=$w(n,t);if(i)return i}return null}function Hw(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Hw(n,t);if(i.length)return i.unshift(e),i}return[]}var _i=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Il(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Qm=class extends Zm{constructor(e,t){super(e),this.snapshot=t,Xw(this,e)}toString(){return this.snapshot.toString()}};function YM(n){let e=Hj(n),t=new Gt([new Va("",{})]),i=new Gt({}),r=new Gt({}),o=new Gt({}),a=new Gt(""),l=new Ss(t,i,o,a,r,$e,n,e.root);return l.snapshot=e.root,new Qm(new _i(l,[]),e)}function Hj(n){let e={},t={},i={},r="",o=new Tl([],e,i,r,t,$e,n,null,{});return new Jm("",new _i(o,[]))}var Ss=class{constructor(e,t,i,r,o,a,l,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Me(f=>f[Bd]))??Se(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Me(e=>Dl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Me(e=>Dl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ym(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:Y(Y({},e.params),n.params),data:Y(Y({},e.data),n.data),resolve:Y(Y(Y(Y({},n.data),e.data),r?.data),n._resolvedData)}:i={params:Y({},n.params),data:Y({},n.data),resolve:Y(Y({},n.data),n._resolvedData??{})},r&&XM(r)&&(i.resolve[Bd]=r.title),i}var Tl=class{get title(){return this.data?.[Bd]}constructor(e,t,i,r,o,a,l,u,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Dl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Dl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Jm=class extends Zm{constructor(e,t){super(t),this.url=e,Xw(this,t)}toString(){return JM(this._root)}};function Xw(n,e){e.value._routerState=n,e.children.forEach(t=>Xw(n,t))}function JM(n){let e=n.children.length>0?` { ${n.children.map(JM).join(", ")} } `:"";return`${n.value}${e}`}function Tw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),kr(e.params,t.params)||n.paramsSubject.next(t.params),_j(e.url,t.url)||n.urlSubject.next(t.url),kr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qw(n,e){let t=kr(n.params,e.params)&&bj(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||qw(n.parent,e.parent))}function XM(n){return typeof n.title=="string"||n.title===null}var eb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=$e,this.activateEvents=new rt,this.deactivateEvents=new rt,this.attachEvents=new rt,this.detachEvents=new rt,this.parentContexts=Q(zd),this.location=Q(vs),this.changeDetector=Q(pi),this.inputBinder=Q(ng,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let r=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new Gw(t,l,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Tn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ni]})}}return n})(),Gw=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ss?this.route:e===zd?this.childContexts:this.parent.get(e,t)}},ng=new de(""),PM=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=ed([i.queryParams,i.params,i.data]).pipe(Zn(([o,a,l],u)=>(l=Y(Y(Y({},o),a),l),u===0?Se(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let a=z1(i.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function qj(n,e,t){let i=kd(n,e._root,t?t._root:void 0);return new Qm(i,e)}function kd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=Gj(n,e,t);return new _i(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(l=>kd(n,l)),a}}let i=Wj(e.value),r=e.children.map(o=>kd(n,o));return new _i(i,r)}}function Gj(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return kd(n,i,r);return kd(n,i)})}function Wj(n){return new Ss(new Gt(n.url),new Gt(n.params),new Gt(n.queryParams),new Gt(n.fragment),new Gt(n.data),n.outlet,n.component,n)}var Nd=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ex="ngNavigationCancelingError";function Xm(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Ua(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=tx(!1,vi.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function tx(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ex]=!0,t.cancellationCode=e,t}function Kj(n){return nx(n)&&Ua(n.url)}function nx(n){return!!n&&n[ex]}var Zj=(n,e,t,i)=>Me(r=>(new Ww(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Ww=class{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Tw(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Il(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Il(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Il(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Il(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new jw(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Bw(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Tw(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),Tw(l.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},eg=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Sl=class{constructor(e,t){this.component=e,this.route=t}};function Qj(n,e,t){let i=n._root,r=e?e._root:null;return Sd(i,r,t,[i.value])}function Yj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Rl(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!vD(n)?n:e.get(n):i}function Sd(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Il(e);return n.children.forEach(a=>{Jj(a,o[a.value.outlet],t,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,l])=>xd(l,t.getContext(a),r)),r}function Jj(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=Xj(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new eg(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Sd(n,e,l?l.children:null,i,r):Sd(n,e,t,i,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new Sl(l.outlet.component,a))}else a&&xd(e,l,r),r.canActivateChecks.push(new eg(i)),o.component?Sd(n,null,l?l.children:null,i,r):Sd(n,null,t,i,r);return r}function Xj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ba(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ba(n.url,e.url)||!kr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qw(n,e)||!kr(n.queryParams,e.queryParams);case"paramsChange":default:return!qw(n,e)}}function xd(n,e,t){let i=Il(n),r=n.value;Object.entries(i).forEach(([o,a])=>{r.component?e?xd(a,e.children.getContext(o),t):xd(a,null,t):xd(a,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Sl(e.outlet.component,r)):t.canDeactivateChecks.push(new Sl(null,r)):t.canDeactivateChecks.push(new Sl(null,r))}function $d(n){return typeof n=="function"}function e3(n){return typeof n=="boolean"}function t3(n){return n&&$d(n.canLoad)}function n3(n){return n&&$d(n.canActivate)}function i3(n){return n&&$d(n.canActivateChild)}function r3(n){return n&&$d(n.canDeactivate)}function o3(n){return n&&$d(n.canMatch)}function ix(n){return n instanceof er||n?.name==="EmptyError"}var Um=Symbol("INITIAL_VALUE");function Pl(){return Zn(n=>ed(n.map(e=>e.pipe(uo(1),Yv(Um)))).pipe(Me(e=>{for(let t of e)if(t!==!0){if(t===Um)return Um;if(t===!1||s3(t))return t}return!0}),Kn(e=>e!==Um),uo(1)))}function s3(n){return Ua(n)||n instanceof Nd}function a3(n,e){return Qt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?Se(Oe(Y({},t),{guardsResult:!0})):c3(a,i,r,n).pipe(Qt(l=>l&&e3(l)?l3(i,o,n,e):Se(l)),Me(l=>Oe(Y({},t),{guardsResult:l})))})}function c3(n,e,t,i){return xt(n).pipe(Qt(r=>p3(r.component,r.route,t,e,i)),Er(r=>r!==!0,!0))}function l3(n,e,t,i){return xt(e).pipe(lo(r=>Xc(d3(r.route.parent,i),u3(r.route,i),f3(n,r.path,t),h3(n,r.route,t))),Er(r=>r!==!0,!0))}function u3(n,e){return n!==null&&e&&e(new Uw(n)),Se(!0)}function d3(n,e){return n!==null&&e&&e(new Vw(n)),Se(!0)}function h3(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Se(!0);let r=i.map(o=>mp(()=>{let a=jd(e)??t,l=Rl(o,a),u=n3(l)?l.canActivate(e,n):ki(a,()=>l(e,n));return Ds(u).pipe(Er())}));return Se(r).pipe(Pl())}function f3(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>Yj(a)).filter(a=>a!==null).map(a=>mp(()=>{let l=a.guards.map(u=>{let f=jd(a.node)??t,m=Rl(u,f),v=i3(m)?m.canActivateChild(i,n):ki(f,()=>m(i,n));return Ds(v).pipe(Er())});return Se(l).pipe(Pl())}));return Se(o).pipe(Pl())}function p3(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Se(!0);let a=o.map(l=>{let u=jd(e)??r,f=Rl(l,u),m=r3(f)?f.canDeactivate(n,e,t,i):ki(u,()=>f(n,e,t,i));return Ds(m).pipe(Er())});return Se(a).pipe(Pl())}function m3(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Se(!0);let o=r.map(a=>{let l=Rl(a,n),u=t3(l)?l.canLoad(e,t):ki(n,()=>l(e,t));return Ds(u)});return Se(o).pipe(Pl(),rx(i))}function rx(n){return Fv(Yt(e=>{if(typeof e!="boolean")throw Xm(n,e)}),Me(e=>e===!0))}function g3(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Se(!0);let o=r.map(a=>{let l=Rl(a,n),u=o3(l)?l.canMatch(e,t):ki(n,()=>l(e,t));return Ds(u)});return Se(o).pipe(Pl(),rx(i))}var Ld=class{constructor(e){this.segmentGroup=e||null}},Fd=class extends Error{constructor(e){super(),this.urlTree=e}};function El(n){return Yc(new Ld(n))}function _3(n){return Yc(new ee(4e3,!1))}function v3(n){return Yc(tx(!1,vi.GuardRejected))}var Kw=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Se(i);if(r.numberOfChildren>1||!r.children[$e])return _3(`${e.redirectTo}`);r=r.children[$e]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let l=t,{queryParams:u,fragment:f,routeConfig:m,url:v,outlet:E,params:b,data:M,title:k}=r,N=ki(o,()=>l({params:b,data:M,queryParams:u,fragment:f,routeConfig:m,url:v,outlet:E,title:k}));if(N instanceof Mo)throw new Fd(N);t=N}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Fd(a);return a}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new Mo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);i[r]=t[l]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),a={};return Object.entries(t.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(e,u,i,r)}),new yt(o,a)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new ee(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Zw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function y3(n,e,t,i,r){let o=ox(n,e,t);return o.matched?(i=zj(e,i),g3(i,e,t,r).pipe(Me(a=>a===!0?o:Y({},Zw)))):Se(o)}function ox(n,e,t){if(e.path==="**")return w3(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Y({},Zw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||gj)(t,n,e);if(!r)return Y({},Zw);let o={};Object.entries(r.posParams??{}).forEach(([l,u])=>{o[l]=u.path});let a=r.consumed.length>0?Y(Y({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function w3(n){return{matched:!0,parameters:n.length>0?VM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function RM(n,e,t,i){return t.length>0&&I3(n,t,i)?{segmentGroup:new yt(e,E3(i,new yt(t,n.children))),slicedSegments:[]}:t.length===0&&C3(n,t,i)?{segmentGroup:new yt(n.segments,b3(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new yt(n.segments,n.children),slicedSegments:t}}function b3(n,e,t,i){let r={};for(let o of t)if(ig(n,e,o)&&!i[lr(o)]){let a=new yt([],{});r[lr(o)]=a}return Y(Y({},i),r)}function E3(n,e){let t={};t[$e]=e;for(let i of n)if(i.path===""&&lr(i)!==$e){let r=new yt([],{});t[lr(i)]=r}return t}function I3(n,e,t){return t.some(i=>ig(n,e,i)&&lr(i)!==$e)}function C3(n,e,t){return t.some(i=>ig(n,e,i))}function ig(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function T3(n,e,t){return e.length===0&&!n.children[t]}var Qw=class{};function S3(n,e,t,i,r,o,a="emptyOnly"){return new Yw(n,e,t,i,r,a,o).recognize()}var D3=31,Yw=class{constructor(e,t,i,r,o,a,l){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new Kw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=RM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Me(({children:t,rootSnapshot:i})=>{let r=new _i(i,t),o=new Jm("",r),a=Nj(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new Tl([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),$e,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,$e,t).pipe(Me(i=>({children:i,rootSnapshot:t})),ss(i=>{if(i instanceof Fd)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ld?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(Me(a=>a instanceof _i?[a]:[]))}processChildren(e,t,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return xt(o).pipe(lo(a=>{let l=i.children[a],u=$j(t,a);return this.processSegmentGroup(e,u,l,a,r)}),Qv((a,l)=>(a.push(...l),a)),as(null),Zv(),Qt(a=>{if(a===null)return El(i);let l=sx(a);return A3(l),Se(l)}))}processSegment(e,t,i,r,o,a,l){return xt(t).pipe(lo(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,o,a,l).pipe(ss(f=>{if(f instanceof Ld)return Se(null);throw f}))),Er(u=>!!u),ss(u=>{if(ix(u))return T3(i,r,o)?Se(new Qw):El(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,o,a,l,u){return lr(i)!==a&&(a===$e||!ig(r,o,i))?El(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,a,u):El(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,a,l){let{matched:u,parameters:f,consumedSegments:m,positionalParamSegments:v,remainingSegments:E}=ox(t,r,o);if(!u)return El(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>D3&&(this.allowRedirects=!1));let b=new Tl(o,f,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,OM(r),lr(r),r.component??r._loadedComponent??null,r,kM(r)),M=Ym(b,l,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let k=this.applyRedirects.applyRedirectCommands(m,r.redirectTo,v,b,e);return this.applyRedirects.lineralizeSegments(r,k).pipe(Qt(N=>this.processSegment(e,i,t,N.concat(E),a,!1,l)))}matchSegmentAgainstRoute(e,t,i,r,o,a){let l=y3(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),l.pipe(Zn(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Zn(({routes:f})=>{let m=i._loadedInjector??e,{parameters:v,consumedSegments:E,remainingSegments:b}=u,M=new Tl(E,v,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,OM(i),lr(i),i.component??i._loadedComponent??null,i,kM(i)),k=Ym(M,a,this.paramsInheritanceStrategy);M.params=Object.freeze(k.params),M.data=Object.freeze(k.data);let{segmentGroup:N,slicedSegments:G}=RM(t,E,b,f);if(G.length===0&&N.hasChildren())return this.processChildren(m,f,N,M).pipe(Me(J=>new _i(M,J)));if(f.length===0&&G.length===0)return Se(new _i(M,[]));let te=lr(i)===o;return this.processSegment(m,f,N,G,te?$e:o,!0,M).pipe(Me(J=>new _i(M,J instanceof _i?[J]:[])))}))):El(t)))}getChildConfig(e,t,i){return t.children?Se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Se({routes:t._loadedRoutes,injector:t._loadedInjector}):m3(e,t,i,this.urlSerializer).pipe(Qt(r=>r?this.configLoader.loadChildren(e,t).pipe(Yt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):v3(t))):Se({routes:[],injector:e})}};function A3(n){n.sort((e,t)=>e.value.outlet===$e?-1:t.value.outlet===$e?1:e.value.outlet.localeCompare(t.value.outlet))}function M3(n){let e=n.value.routeConfig;return e&&e.path===""}function sx(n){let e=[],t=new Set;for(let i of n){if(!M3(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=sx(i.children);e.push(new _i(i.value,r))}return e.filter(i=>!t.has(i))}function OM(n){return n.data||{}}function kM(n){return n.resolve||{}}function x3(n,e,t,i,r,o){return Qt(a=>S3(n,e,t,i,a.extractedUrl,r,o).pipe(Me(({state:l,tree:u})=>Oe(Y({},a),{targetSnapshot:l,urlAfterRedirects:u}))))}function P3(n,e){return Qt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Se(t);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of ax(u))a.add(f);let l=0;return xt(a).pipe(lo(u=>o.has(u)?R3(u,i,n,e):(u.data=Ym(u,u.parent,n).resolve,Se(void 0))),Yt(()=>l++),el(1),Qt(u=>l===a.size?Se(t):ci))})}function ax(n){let e=n.children.map(t=>ax(t)).flat();return[n,...e]}function R3(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!XM(r)&&(o[Bd]=r.title),O3(o,n,e,i).pipe(Me(a=>(n._resolvedData=a,n.data=Ym(n,n.parent,t).resolve,null)))}function O3(n,e,t,i){let r=Aw(n);if(r.length===0)return Se({});let o={};return xt(r).pipe(Qt(a=>k3(n[a],e,t,i).pipe(Er(),Yt(l=>{if(l instanceof Nd)throw Xm(new Al,l);o[a]=l}))),el(1),Kv(o),ss(a=>ix(a)?ci:Yc(a)))}function k3(n,e,t,i){let r=jd(e)??i,o=Rl(n,r),a=o.resolve?o.resolve(e,t):ki(r,()=>o(e,t));return Ds(a)}function Sw(n){return Zn(e=>{let t=n(e);return t?xt(t).pipe(Me(()=>e)):Se(e)})}var cx=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===$e);return i}getResolvedTitleForRoute(t){return t.data[Bd]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(N3),providedIn:"root"})}}return n})(),N3=(()=>{class n extends cx{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(me(SM))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hd=new de("",{providedIn:"root",factory:()=>({})}),L3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=mt({type:n,selectors:[["ng-component"]],standalone:!0,features:[vt],decls:1,vars:0,template:function(i,r){i&1&&ie(0,"router-outlet")},dependencies:[eb],encapsulation:2})}}return n})();function tb(n){let e=n.children&&n.children.map(tb),t=e?Oe(Y({},n),{children:e}):Y({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$e&&(t.component=L3),t}var Vd=new de(""),nb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Q(_m)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Ds(t.loadComponent()).pipe(Me(lx),Yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),_a(()=>{this.componentLoaders.delete(t)})),r=new Wc(i,()=>new mn).pipe(Gc());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=F3(i,this.compiler,t,this.onLoadEndListener).pipe(_a(()=>{this.childrenLoaders.delete(i)})),a=new Wc(o,()=>new mn).pipe(Gc());return this.childrenLoaders.set(i,a),a}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function F3(n,e,t,i){return Ds(n.loadChildren()).pipe(Me(lx),Qt(r=>r instanceof ad||Array.isArray(r)?Se(r):xt(e.compileModuleAsync(r))),Me(r=>{i&&i(n);let o,a,l=!1;return Array.isArray(r)?(a=r,l=!0):(o=r.create(t).injector,a=o.get(Vd,[],{optional:!0,self:!0}).flat()),{routes:a.map(tb),injector:o}}))}function V3(n){return n&&typeof n=="object"&&"default"in n}function lx(n){return V3(n)?n.default:n}var ib=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(B3),providedIn:"root"})}}return n})(),B3=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ux=new de(""),dx=new de("");function U3(n,e,t){let i=n.get(dx),r=n.get(vn);return n.get(ct).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),l=r.startViewTransition(()=>(o(),j3(n))),{onViewTransitionCreated:u}=i;return u&&ki(n,()=>u({transition:l,from:e,to:t})),a})}function j3(n){return new Promise(e=>{K0({read:()=>setTimeout(e)},{injector:n})})}var z3=new de(""),rb=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new mn,this.transitionAbortSubject=new mn,this.configLoader=Q(nb),this.environmentInjector=Q(Un),this.urlSerializer=Q(Ud),this.rootContexts=Q(zd),this.location=Q(bl),this.inputBindingEnabled=Q(ng,{optional:!0})!==null,this.titleStrategy=Q(cx),this.options=Q(Hd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Q(ib),this.createViewTransition=Q(ux,{optional:!0}),this.navigationErrorHandler=Q(z3,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Se(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Lw(r)),i=r=>this.events.next(new Fw(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(Oe(Y(Y({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new Gt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Md,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Kn(o=>o.id!==0),Me(o=>Oe(Y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Zn(o=>{let a=!1,l=!1;return Se(o).pipe(Zn(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",vi.SupersededByNewNavigation),ci;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Oe(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!f&&m!=="reload"){let v="";return this.events.next(new Ts(u.id,this.urlSerializer.serialize(u.rawUrl),v,Gm.IgnoredSameUrlNavigation)),u.resolve(!1),ci}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Se(u).pipe(Zn(v=>{let E=this.transitions?.getValue();return this.events.next(new Ml(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),E!==this.transitions?.getValue()?ci:Promise.resolve(v)}),x3(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Yt(v=>{o.targetSnapshot=v.targetSnapshot,o.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation=Oe(Y({},this.currentNavigation),{finalUrl:v.urlAfterRedirects});let E=new Wm(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(E)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:v,extractedUrl:E,source:b,restoredState:M,extras:k}=u,N=new Ml(v,this.urlSerializer.serialize(E),b,M);this.events.next(N);let G=YM(this.rootComponentType).snapshot;return this.currentTransition=o=Oe(Y({},u),{targetSnapshot:G,urlAfterRedirects:E,extras:Oe(Y({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,Se(o)}else{let v="";return this.events.next(new Ts(u.id,this.urlSerializer.serialize(u.extractedUrl),v,Gm.IgnoredByUrlHandlingStrategy)),u.resolve(!1),ci}}),Yt(u=>{let f=new Rw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),Me(u=>(this.currentTransition=o=Oe(Y({},u),{guards:Qj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),a3(this.environmentInjector,u=>this.events.next(u)),Yt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Xm(this.urlSerializer,u.guardsResult);let f=new Ow(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(f)}),Kn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",vi.GuardRejected),!1)),Sw(u=>{if(u.guards.canActivateChecks.length)return Se(u).pipe(Yt(f=>{let m=new kw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),Zn(f=>{let m=!1;return Se(f).pipe(P3(this.paramsInheritanceStrategy,this.environmentInjector),Yt({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(f,"",vi.NoDataFromResolver)}}))}),Yt(f=>{let m=new Nw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),Sw(u=>{let f=m=>{let v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe(Yt(E=>{m.component=E}),Me(()=>{})));for(let E of m.children)v.push(...f(E));return v};return ed(f(u.targetSnapshot.root)).pipe(as(null),uo(1))}),Sw(()=>this.afterPreactivation()),Zn(()=>{let{currentSnapshot:u,targetSnapshot:f}=o,m=this.createViewTransition?.(this.environmentInjector,u.root,f.root);return m?xt(m).pipe(Me(()=>o)):Se(o)}),Me(u=>{let f=qj(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=Oe(Y({},u),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Yt(()=>{this.events.next(new Od)}),Zj(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),uo(1),Yt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Nr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Jv(this.transitionAbortSubject.pipe(Yt(u=>{throw u}))),_a(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",vi.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ss(u=>{if(l=!0,nx(u))this.events.next(new Ao(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),Kj(u)?this.events.next(new xl(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let f=new Rd(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let m=ki(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(m instanceof Nd){let{message:v,cancellationCode:E}=Xm(this.urlSerializer,m);this.events.next(new Ao(o.id,this.urlSerializer.serialize(o.extractedUrl),v,E)),this.events.next(new xl(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(f);let v=t.errorHandler(u);o.resolve(!!v)}}catch(m){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(m)}}return ci}))}))}cancelNavigationTransition(t,i,r){let o=new Ao(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $3(n){return n!==Md}var H3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(q3),providedIn:"root"})}}return n})(),Jw=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},q3=(()=>{class n extends Jw{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=yo(n)))(r||n)}})()}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hx=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:()=>Q(G3),providedIn:"root"})}}return n})(),G3=(()=>{class n extends hx{constructor(){super(...arguments),this.location=Q(bl),this.urlSerializer=Q(Ud),this.options=Q(Hd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Q(ib),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=YM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Ml)this.stateMemento=this.createStateMemento();else if(t instanceof Ts)this.rawUrlTree=i.initialUrl;else if(t instanceof Wm){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Od?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Ao&&(t.code===vi.GuardRejected||t.code===vi.NoDataFromResolver)?this.restoreHistory(i):t instanceof Rd?this.restoreHistory(i,!0):t instanceof Nr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof Mo?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,a=Y(Y({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",a)}else{let o=Y(Y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=yo(n)))(r||n)}})()}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dd=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Dd||{});function fx(n,e){n.events.pipe(Kn(t=>t instanceof Nr||t instanceof Ao||t instanceof Rd||t instanceof Ts),Me(t=>t instanceof Nr||t instanceof Ts?Dd.COMPLETE:(t instanceof Ao?t.code===vi.Redirect||t.code===vi.SupersededByNewNavigation:!1)?Dd.REDIRECTING:Dd.FAILED),Kn(t=>t!==Dd.REDIRECTING),uo(1)).subscribe(()=>{e()})}function W3(n){throw n}var K3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Q(mm),this.stateManager=Q(hx),this.options=Q(Hd,{optional:!0})||{},this.pendingTasks=Q(_s),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Q(rb),this.urlSerializer=Q(Ud),this.location=Q(bl),this.urlHandlingStrategy=Q(ib),this._events=new mn,this.errorHandler=this.options.errorHandler||W3,this.navigated=!1,this.routeReuseStrategy=Q(H3),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Q(Vd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Q(ng,{optional:!0}),this.eventsSubscription=new zt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ao&&i.code!==vi.Redirect&&i.code!==vi.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Nr)this.navigated=!0;else if(i instanceof xl){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=Y({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||$3(r.source)},a);this.scheduleNavigation(l,Md,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Y3(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Md,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let u=Y({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(t);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(tb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,f=u?this.currentUrlTree.fragment:a,m=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":m=Y(Y({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let v;try{let E=r?r.snapshot:this.routerState.snapshot.root;v=WM(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),v=this.currentUrlTree.root}return KM(v,t,m,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Ua(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Md,null,i)}navigate(t,i={skipLocationChange:!1}){return Q3(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=Y({},K3):i===!1?r=Y({},Z3):r=i,Ua(t))return DM(this.currentUrlTree,t,r);let o=this.parseUrl(t);return DM(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let l,u,f;a?(l=a.resolve,u=a.reject,f=a.promise):f=new Promise((v,E)=>{l=v,u=E});let m=this.pendingTasks.add();return fx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(v=>Promise.reject(v))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Q3(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function Y3(n){return!(n instanceof Od)&&!(n instanceof xl)}var px=(()=>{class n{constructor(t,i,r,o,a,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.onChanges=new mn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(f=>{f instanceof Nr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ua(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||i||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:VA(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ua(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(oe(lt),oe(Ss),D0("tabindex"),oe(ka),oe(ar),oe(So))}}static{this.\u0275dir=Tn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&ae("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Or("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Fa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Fa],replaceUrl:[2,"replaceUrl","replaceUrl",Fa],routerLink:"routerLink"},standalone:!0,features:[W0,Ni]})}}return n})();var tg=class{};var J3=(()=>{class n{constructor(t,i,r,o,a){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Kn(t=>t instanceof Nr),lo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=pm(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(l,o.children??o._loadedRoutes))}return xt(r).pipe(Jc())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=Se(null);let o=r.pipe(Qt(a=>a===null?Se(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return xt([o,a]).pipe(Jc())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(me(lt),me(_m),me(Un),me(tg),me(nb))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mx=new de(""),X3=(()=>{class n{constructor(t,i,r,o,a={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ml?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Nr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ts&&t.code===Gm.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Km&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Km(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){YA()}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function gx(n,...e){return or([{provide:Vd,multi:!0,useValue:n},[],{provide:Ss,useFactory:_x,deps:[lt]},{provide:md,multi:!0,useFactory:vx},e.map(t=>t.\u0275providers)])}function _x(n){return n.routerState.root}function qd(n,e){return{\u0275kind:n,\u0275providers:e}}function vx(){let n=Q(Cn);return e=>{let t=n.get(ws);if(e!==t.components[0])return;let i=n.get(lt),r=n.get(yx);n.get(ob)===1&&i.initialNavigation(),n.get(wx,null,Ge.Optional)?.setUpPreloading(),n.get(mx,null,Ge.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var yx=new de("",{factory:()=>new mn}),ob=new de("",{providedIn:"root",factory:()=>1});function e4(){return qd(2,[{provide:ob,useValue:0},{provide:gm,multi:!0,deps:[Cn],useFactory:e=>{let t=e.get(Y1,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(lt),o=e.get(yx);fx(r,()=>{i(!0)}),e.get(rb).afterPreactivation=()=>(i(!0),o.closed?Se(void 0):o),r.initialNavigation()}))}}])}function t4(){return qd(3,[{provide:gm,multi:!0,useFactory:()=>{let e=Q(lt);return()=>{e.setUpLocationChangeListener()}}},{provide:ob,useValue:2}])}var wx=new de("");function n4(n){return qd(0,[{provide:wx,useExisting:J3},{provide:tg,useExisting:n}])}function i4(){return qd(8,[PM,{provide:ng,useExisting:PM}])}function r4(n){let e=[{provide:ux,useValue:U3},{provide:dx,useValue:Y({skipNextTransition:!!n?.skipInitialTransition},n)}];return qd(9,e)}var NM=new de("ROUTER_FORROOT_GUARD"),o4=[bl,{provide:Ud,useClass:Al},lt,zd,{provide:Ss,useFactory:_x,deps:[lt]},nb,[]],bx=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[o4,[],{provide:Vd,multi:!0,useValue:t},{provide:NM,useFactory:l4,deps:[[lt,new Mn,new d0]]},{provide:Hd,useValue:i||{}},i?.useHash?a4():c4(),s4(),i?.preloadingStrategy?n4(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?u4(i):[],i?.bindToComponentInputs?i4().\u0275providers:[],i?.enableViewTransitions?r4().\u0275providers:[],d4()]}}static forChild(t){return{ngModule:n,providers:[{provide:Vd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(me(NM,8))}}static{this.\u0275mod=xr({type:n})}static{this.\u0275inj=Mr({})}}return n})();function s4(){return{provide:mx,useFactory:()=>{let n=Q(aM),e=Q(ct),t=Q(Hd),i=Q(rb),r=Q(Ud);return t.scrollOffset&&n.setOffset(t.scrollOffset),new X3(r,i,n,e,t)}}}function a4(){return{provide:So,useClass:X1}}function c4(){return{provide:So,useClass:cw}}function l4(n){return"guarded"}function u4(n){return[n.initialNavigation==="disabled"?t4().\u0275providers:[],n.initialNavigation==="enabledBlocking"?e4().\u0275providers:[]]}var LM=new de("");function d4(){return[{provide:LM,useFactory:vx},{provide:md,multi:!0,useExisting:LM}]}var He=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(He||{}),Fr="*";function sb(n,e){return{type:He.Trigger,name:n,definitions:e,options:{}}}function Wd(n,e=null){return{type:He.Animate,styles:e,timings:n}}function Ex(n,e=null){return{type:He.Sequence,steps:n,options:e}}function Vr(n){return{type:He.Style,styles:n,offset:null}}function Kd(n,e,t=null){return{type:He.Transition,expr:n,animation:e,options:t}}var As=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Gd=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==o&&this._onFinish()}),a.onDestroy(()=>{++i==o&&this._onDestroy()}),a.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((a,l)=>Math.max(a,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},rg="!";function Ix(n){return new ee(3e3,!1)}function h4(){return new ee(3100,!1)}function f4(){return new ee(3101,!1)}function p4(n){return new ee(3001,!1)}function m4(n){return new ee(3003,!1)}function g4(n){return new ee(3004,!1)}function _4(n,e){return new ee(3005,!1)}function v4(){return new ee(3006,!1)}function y4(){return new ee(3007,!1)}function w4(n,e){return new ee(3008,!1)}function b4(n){return new ee(3002,!1)}function E4(n,e,t,i,r){return new ee(3010,!1)}function I4(){return new ee(3011,!1)}function C4(){return new ee(3012,!1)}function T4(){return new ee(3200,!1)}function S4(){return new ee(3202,!1)}function D4(){return new ee(3013,!1)}function A4(n){return new ee(3014,!1)}function M4(n){return new ee(3015,!1)}function x4(n){return new ee(3016,!1)}function P4(n,e){return new ee(3404,!1)}function R4(n){return new ee(3502,!1)}function O4(n){return new ee(3503,!1)}function k4(){return new ee(3300,!1)}function N4(n){return new ee(3504,!1)}function L4(n){return new ee(3301,!1)}function F4(n,e){return new ee(3302,!1)}function V4(n){return new ee(3303,!1)}function B4(n,e){return new ee(3400,!1)}function U4(n){return new ee(3401,!1)}function j4(n){return new ee(3402,!1)}function z4(n,e){return new ee(3505,!1)}function Ms(n){switch(n.length){case 0:return new As;case 1:return n[0];default:return new Gd(n)}}function Fx(n,e,t=new Map,i=new Map){let r=[],o=[],a=-1,l=null;if(e.forEach(u=>{let f=u.get("offset"),m=f==a,v=m&&l||new Map;u.forEach((E,b)=>{let M=b,k=E;if(b!=="offset")switch(M=n.normalizePropertyName(M,r),k){case rg:k=t.get(b);break;case Fr:k=i.get(b);break;default:k=n.normalizeStyleValue(b,M,k,r);break}v.set(M,k)}),m||o.push(v),l=v,a=f}),r.length)throw R4(r);return o}function Mb(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&ab(t,"start",n)));break;case"done":n.onDone(()=>i(t&&ab(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&ab(t,"destroy",n)));break}}function ab(n,e,t){let i=t.totalTime,r=!!t.disabled,o=xb(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),a=n._data;return a!=null&&(o._data=a),o}function xb(n,e,t,i,r="",o=0,a){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!a}}function wi(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function Cx(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var $4=typeof document>"u"?null:document.documentElement;function Pb(n){let e=n.parentNode||n.host||null;return e===$4?null:e}function H4(n){return n.substring(1,6)=="ebkit"}var ja=null,Tx=!1;function q4(n){ja||(ja=G4()||{},Tx=ja.style?"WebkitAppearance"in ja.style:!1);let e=!0;return ja.style&&!H4(n)&&(e=n in ja.style,!e&&Tx&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ja.style)),e}function G4(){return typeof document<"u"?document.body:null}function Vx(n,e){for(;e;){if(e===n)return!0;e=Pb(e)}return!1}function Bx(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var Rb=(()=>{class n{validateStyleProperty(t){return q4(t)}containsElement(t,i){return Vx(t,i)}getParentElement(t){return Pb(t)}query(t,i,r){return Bx(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,a,l=[],u){return new As(r,o)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})(),Ha=class{static{this.NOOP=new Rb}},qa=class{};var W4=1e3,Ux="{{",K4="}}",jx="ng-enter",fb="ng-leave",og="ng-trigger",ug=".ng-trigger",Sx="ng-animating",pb=".ng-animating";function xo(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:mb(parseFloat(e[1]),e[2])}function mb(n,e){switch(e){case"s":return n*W4;default:return n}}function dg(n,e,t){return n.hasOwnProperty("duration")?n:Z4(n,e,t)}function Z4(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,a="";if(typeof n=="string"){let l=n.match(i);if(l===null)return e.push(Ix(n)),{duration:0,delay:0,easing:""};r=mb(parseFloat(l[1]),l[2]);let u=l[3];u!=null&&(o=mb(parseFloat(u),l[4]));let f=l[5];f&&(a=f)}else r=n;if(!t){let l=!1,u=e.length;r<0&&(e.push(h4()),l=!0),o<0&&(e.push(f4()),l=!0),l&&e.splice(u,0,Ix(n))}return{duration:r,delay:o,easing:a}}function Q4(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Br(n,e,t){e.forEach((i,r)=>{let o=Ob(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function $a(n,e){e.forEach((t,i)=>{let r=Ob(i);n.style[r]=""})}function Zd(n){return Array.isArray(n)?n.length==1?n[0]:Ex(n):n}function Y4(n,e,t){let i=e.params||{},r=zx(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(p4(o))})}var gb=new RegExp(`${Ux}\\s*(.+?)\\s*${K4}`,"g");function zx(n){let e=[];if(typeof n=="string"){let t;for(;t=gb.exec(n);)e.push(t[1]);gb.lastIndex=0}return e}function Yd(n,e,t){let i=`${n}`,r=i.replace(gb,(o,a)=>{let l=e[a];return l==null&&(t.push(m4(a)),l=""),l.toString()});return r==i?n:r}var J4=/-+([a-z0-9])/g;function Ob(n){return n.replace(J4,(...e)=>e[1].toUpperCase())}function X4(n,e){return n===0||e===0}function ez(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,a)=>{i.has(a)||r.push(a),i.set(a,o)}),r.length)for(let o=1;o<e.length;o++){let a=e[o];r.forEach(l=>a.set(l,kb(n,l)))}}return e}function yi(n,e,t){switch(e.type){case He.Trigger:return n.visitTrigger(e,t);case He.State:return n.visitState(e,t);case He.Transition:return n.visitTransition(e,t);case He.Sequence:return n.visitSequence(e,t);case He.Group:return n.visitGroup(e,t);case He.Animate:return n.visitAnimate(e,t);case He.Keyframes:return n.visitKeyframes(e,t);case He.Style:return n.visitStyle(e,t);case He.Reference:return n.visitReference(e,t);case He.AnimateChild:return n.visitAnimateChild(e,t);case He.AnimateRef:return n.visitAnimateRef(e,t);case He.Query:return n.visitQuery(e,t);case He.Stagger:return n.visitStagger(e,t);default:throw g4(e.type)}}function kb(n,e){return window.getComputedStyle(n)[e]}var tz=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),hg=class extends qa{normalizePropertyName(e,t){return Ob(e)}normalizeStyleValue(e,t,i,r){let o="",a=i.toString().trim();if(tz.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let l=i.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&l[1].length==0&&r.push(_4(e,i))}return a+o}};var fg="*";function nz(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>iz(i,t,e)):t.push(n),t}function iz(n,e,t){if(n[0]==":"){let u=rz(n,t);if(typeof u=="function"){e.push(u);return}n=u}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(M4(n)),e;let r=i[1],o=i[2],a=i[3];e.push(Dx(r,a));let l=r==fg&&a==fg;o[0]=="<"&&!l&&e.push(Dx(a,r))}function rz(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(x4(n)),"* => *"}}var sg=new Set(["true","1"]),ag=new Set(["false","0"]);function Dx(n,e){let t=sg.has(n)||ag.has(n),i=sg.has(e)||ag.has(e);return(r,o)=>{let a=n==fg||n==r,l=e==fg||e==o;return!a&&t&&typeof r=="boolean"&&(a=r?sg.has(n):ag.has(n)),!l&&i&&typeof o=="boolean"&&(l=o?sg.has(e):ag.has(e)),a&&l}}var $x=":self",oz=new RegExp(`s*${$x}s*,?`,"g");function Hx(n,e,t,i){return new _b(n).build(e,t,i)}var Ax="",_b=class{constructor(e){this._driver=e}build(e,t,i){let r=new vb(t);return this._resetContextStyleTimingState(r),yi(this,Zd(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=Ax,e.collectedStyles=new Map,e.collectedStyles.set(Ax,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],a=[];return e.name.charAt(0)=="@"&&t.errors.push(v4()),e.definitions.forEach(l=>{if(this._resetContextStyleTimingState(t),l.type==He.State){let u=l,f=u.name;f.toString().split(/\s*,\s*/).forEach(m=>{u.name=m,o.push(this.visitState(u,t))}),u.name=f}else if(l.type==He.Transition){let u=this.visitTransition(l,t);i+=u.queryCount,r+=u.depCount,a.push(u)}else t.errors.push(y4())}),{type:He.Trigger,name:e.name,states:o,transitions:a,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,a=r||{};i.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{zx(u).forEach(f=>{a.hasOwnProperty(f)||o.add(f)})})}),o.size&&t.errors.push(w4(e.name,[...o.values()]))}return{type:He.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=yi(this,Zd(e.animation),t),r=nz(e.expr,t.errors);return{type:He.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:za(e.options)}}visitSequence(e,t){return{type:He.Sequence,steps:e.steps.map(i=>yi(this,i,t)),options:za(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(a=>{t.currentTime=i;let l=yi(this,a,t);return r=Math.max(r,t.currentTime),l});return t.currentTime=r,{type:He.Group,steps:o,options:za(e.options)}}visitAnimate(e,t){let i=lz(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Vr({});if(o.type==He.Keyframes)r=this.visitKeyframes(o,t);else{let a=e.styles,l=!1;if(!a){l=!0;let f={};i.easing&&(f.easing=i.easing),a=Vr(f)}t.currentTime+=i.duration+i.delay;let u=this.visitStyle(a,t);u.isEmptyStep=l,r=u}return t.currentAnimateTimings=null,{type:He.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let l of r)typeof l=="string"?l===Fr?i.push(l):t.errors.push(b4(l)):i.push(new Map(Object.entries(l)));let o=!1,a=null;return i.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(a=l.get("easing"),l.delete("easing")),!o)){for(let u of l.values())if(u.toString().indexOf(Ux)>=0){o=!0;break}}}),{type:He.Style,styles:i,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(a=>{typeof a!="string"&&a.forEach((l,u)=>{let f=t.collectedStyles.get(t.currentQuerySelector),m=f.get(u),v=!0;m&&(o!=r&&o>=m.startTime&&r<=m.endTime&&(t.errors.push(E4(u,m.startTime,m.endTime,o,r)),v=!1),o=m.startTime),v&&f.set(u,{startTime:o,endTime:r}),t.options&&Y4(l,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:He.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(I4()),i;let r=1,o=0,a=[],l=!1,u=!1,f=0,m=e.steps.map(G=>{let te=this._makeStyleAst(G,t),J=te.offset!=null?te.offset:cz(te.styles),ue=0;return J!=null&&(o++,ue=te.offset=J),u=u||ue<0||ue>1,l=l||ue<f,f=ue,a.push(ue),te});u&&t.errors.push(C4()),l&&t.errors.push(T4());let v=e.steps.length,E=0;o>0&&o<v?t.errors.push(S4()):o==0&&(E=r/(v-1));let b=v-1,M=t.currentTime,k=t.currentAnimateTimings,N=k.duration;return m.forEach((G,te)=>{let J=E>0?te==b?1:E*te:a[te],ue=J*N;t.currentTime=M+k.delay+ue,k.duration=ue,this._validateStyleAst(G,t),G.offset=J,i.styles.push(G)}),i}visitReference(e,t){return{type:He.Reference,animation:yi(this,Zd(e.animation),t),options:za(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:He.AnimateChild,options:za(e.options)}}visitAnimateRef(e,t){return{type:He.AnimateRef,animation:this.visitReference(e.animation,t),options:za(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,a]=sz(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,wi(t.collectedStyles,t.currentQuerySelector,new Map);let l=yi(this,Zd(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:He.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:l,originalSelector:e.selector,options:za(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(D4());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:dg(e.timings,t.errors,!0);return{type:He.Stagger,animation:yi(this,Zd(e.animation),t),timings:i,options:null}}};function sz(n){let e=!!n.split(/\s*,\s*/).find(t=>t==$x);return e&&(n=n.replace(oz,"")),n=n.replace(/@\*/g,ug).replace(/@\w+/g,t=>ug+"-"+t.slice(1)).replace(/:animating/g,pb),[n,e]}function az(n){return n?Y({},n):null}var vb=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function cz(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function lz(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=dg(n,e).duration;return cb(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=cb(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=dg(t,e);return cb(r.duration,r.delay,r.easing)}function za(n){return n?(n=Y({},n),n.params&&(n.params=az(n.params))):n={},n}function cb(n,e,t){return{duration:n,delay:e,easing:t}}function Nb(n,e,t,i,r,o,a=null,l=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:l}}var Jd=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},uz=1,dz=":enter",hz=new RegExp(dz,"g"),fz=":leave",pz=new RegExp(fz,"g");function qx(n,e,t,i,r,o=new Map,a=new Map,l,u,f=[]){return new yb().buildKeyframes(n,e,t,i,r,o,a,l,u,f)}var yb=class{buildKeyframes(e,t,i,r,o,a,l,u,f,m=[]){f=f||new Jd;let v=new wb(e,t,f,r,o,m,[]);v.options=u;let E=u.delay?xo(u.delay):0;v.currentTimeline.delayNextStep(E),v.currentTimeline.setStyles([a],null,v.errors,u),yi(this,i,v);let b=v.timelines.filter(M=>M.containsAnimation());if(b.length&&l.size){let M;for(let k=b.length-1;k>=0;k--){let N=b[k];if(N.element===t){M=N;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([l],null,v.errors,u)}return b.length?b.map(M=>M.buildKeyframes()):[Nb(t,[],[],[],0,E,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,a=this._visitSubInstructions(i,r,r.options);o!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let a=typeof o=="number"?o:xo(Yd(o,r?.params??{},t.errors));i.delayNextStep(a)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,a=i.duration!=null?xo(i.duration):null,l=i.delay!=null?xo(i.delay):null;return a!==0&&e.forEach(u=>{let f=t.appendInstructionToTimeline(u,a,l);o=Math.max(o,f.duration+f.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),yi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==He.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=pg);let a=xo(o.delay);r.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>yi(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?xo(e.options.delay):0;e.steps.forEach(a=>{let l=t.createSubContext(e.options);o&&l.delayNextStep(o),yi(this,a,l),r=Math.max(r,l.currentTimeline.currentTime),i.push(l.currentTimeline)}),i.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Yd(i,t.params,t.errors):i;return dg(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==He.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,l=t.createSubContext().currentTimeline;l.easing=i.easing,e.styles.forEach(u=>{let f=u.offset||0;l.forwardTime(f*o),l.setStyles(u.styles,u.easing,t.errors,t.options),l.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(l),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?xo(r.delay):0;o&&(t.previousNode.type===He.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pg);let a=i,l=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=l.length;let u=null;l.forEach((f,m)=>{t.currentQueryIndex=m;let v=t.createSubContext(e.options,f);o&&v.delayNextStep(o),f===t.element&&(u=v.currentTimeline),yi(this,e.animation,v),v.currentTimeline.applyStylesToKeyframe();let E=v.currentTimeline.currentTime;a=Math.max(a,E)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,a=Math.abs(o.duration),l=a*(t.currentQueryTotal-1),u=a*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":u=l-u;break;case"full":u=i.currentStaggerTime;break}let m=t.currentTimeline;u&&m.delayNextStep(u);let v=m.currentTime;yi(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-v+(r.startTime-i.currentTimeline.startTime)}},pg={},wb=class n{constructor(e,t,i,r,o,a,l,u){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=a,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new mg(this._driver,t,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=xo(i.duration)),i.delay!=null&&(r.delay=xo(i.delay));let o=i.params;if(o){let a=r.params;a||(a=this.options.params={}),Object.keys(o).forEach(l=>{(!t||!a.hasOwnProperty(l))&&(a[l]=Yd(o[l],a,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=pg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new bb(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,a){let l=[];if(r&&l.push(this.element),e.length>0){e=e.replace(hz,"."+this._enterClassName),e=e.replace(pz,"."+this._leaveClassName);let u=i!=1,f=this._driver.query(this.element,e,u);i!==0&&(f=i<0?f.slice(f.length+i,f.length):f.slice(0,i)),l.push(...f)}return!o&&l.length==0&&a.push(A4(t)),l}},mg=class n{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=uz,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Fr),this._currentKeyframe.set(t,Fr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},a=mz(e,this._globalTimelineStyles);for(let[l,u]of a){let f=Yd(u,o,i);this._pendingStyles.set(l,f),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??Fr),this._updateStyle(l,f)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((l,u)=>{let f=new Map([...this._backFill,...l]);f.forEach((m,v)=>{m===rg?e.add(v):m===Fr&&t.add(v)}),i||f.set("offset",u/this.duration),r.push(f)});let o=[...e.values()],a=[...t.values()];if(i){let l=r[0],u=new Map(l);l.set("offset",0),u.set("offset",1),r=[l,u]}return Nb(this.element,r,o,a,this.duration,this.startTime,this.easing,!1)}},bb=class extends mg{constructor(e,t,i,r,o,a,l=!1){super(e,t,a.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=l,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],a=i+t,l=t/a,u=new Map(e[0]);u.set("offset",0),o.push(u);let f=new Map(e[0]);f.set("offset",Mx(l)),o.push(f);let m=e.length-1;for(let v=1;v<=m;v++){let E=new Map(e[v]),b=E.get("offset"),M=t+b*i;E.set("offset",Mx(M/a)),o.push(E)}i=a,t=0,r="",e=o}return Nb(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function Mx(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function mz(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,Fr)}else for(let[o,a]of r)t.set(o,a)}),t}function xx(n,e,t,i,r,o,a,l,u,f,m,v,E){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:a,timelines:l,queriedElements:u,preStyleProps:f,postStyleProps:m,totalTime:v,errors:E}}var lb={},gg=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return gz(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,a,l,u,f,m){let v=[],E=this.ast.options&&this.ast.options.params||lb,b=l&&l.params||lb,M=this.buildStyles(i,b,v),k=u&&u.params||lb,N=this.buildStyles(r,k,v),G=new Set,te=new Map,J=new Map,ue=r==="void",Ne={params:Gx(k,E),delay:this.ast.options?.delay},he=m?[]:qx(e,t,this.ast.animation,o,a,M,N,Ne,f,v),R=0;return he.forEach(S=>{R=Math.max(S.duration+S.delay,R)}),v.length?xx(t,this._triggerName,i,r,ue,M,N,[],[],te,J,R,v):(he.forEach(S=>{let A=S.element,O=wi(te,A,new Set);S.preStyleProps.forEach(V=>O.add(V));let F=wi(J,A,new Set);S.postStyleProps.forEach(V=>F.add(V)),A!==t&&G.add(A)}),xx(t,this._triggerName,i,r,ue,M,N,he,[...G.values()],te,J,R))}};function gz(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function Gx(n,e){let t=Y({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var Eb=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=Gx(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{a&&(a=Yd(a,r,t));let u=this.normalizer.normalizePropertyName(l,t);a=this.normalizer.normalizeStyleValue(l,u,a,t),i.set(l,a)})}),i}};function _z(n,e,t){return new Ib(n,e,t)}var Ib=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new Eb(r.style,o,i))}),Px(this.states,"true","1"),Px(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new gg(e,r,this.states))}),this.fallbackTransition=vz(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(a=>a.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function vz(n,e,t){let i=[(a,l)=>!0],r={type:He.Sequence,steps:[],options:null},o={type:He.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new gg(n,o,e)}function Px(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var yz=new Jd,Cb=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],r=[],o=Hx(this._driver,t,i,r);if(i.length)throw O4(i);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=Fx(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),a,l=new Map;if(o?(a=qx(this._driver,t,o,jx,fb,new Map,new Map,i,yz,r),a.forEach(m=>{let v=wi(l,m.element,new Map);m.postStyleProps.forEach(E=>v.set(E,null))})):(r.push(k4()),a=[]),r.length)throw N4(r);l.forEach((m,v)=>{m.forEach((E,b)=>{m.set(b,this._driver.computeStyle(v,b,Fr))})});let u=a.map(m=>{let v=l.get(m.element);return this._buildPlayer(m,new Map,v)}),f=Ms(u);return this._playersById.set(e,f),f.onDestroy(()=>this.destroy(e)),this.players.push(f),f}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw L4(e);return t}listen(e,t,i,r){let o=xb(t,"","","");return Mb(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let a=r[0]||{};this.create(e,t,a);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},Rx="ng-animate-queued",wz=".ng-animate-queued",ub="ng-animate-disabled",bz=".ng-animate-disabled",Ez="ng-star-inserted",Iz=".ng-star-inserted",Cz=[],Wx={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Tz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ur="__ng_removed",Xd=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=Dz(r),i){let o=e,{value:a}=o,l=Cv(o,["value"]);this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},Qd="void",db=new Xd(Qd),Tb=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,zi(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw F4(i,t);if(i==null||i.length==0)throw V4(t);if(!Az(i))throw B4(i,t);let o=wi(this._elementListeners,e,[]),a={name:t,phase:i,callback:r};o.push(a);let l=wi(this._engine.statesByElement,e,new Map);return l.has(t)||(zi(e,og),zi(e,og+"-"+t),l.set(t,db)),()=>{this._engine.afterFlush(()=>{let u=o.indexOf(a);u>=0&&o.splice(u,1),this._triggers.has(t)||l.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw U4(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),a=new eh(this.id,t,e),l=this._engine.statesByElement.get(e);l||(zi(e,og),zi(e,og+"-"+t),this._engine.statesByElement.set(e,l=new Map));let u=l.get(t),f=new Xd(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&u&&f.absorbOptions(u.options),l.set(t,f),u||(u=db),!(f.value===Qd)&&u.value===f.value){if(!Pz(u.params,f.params)){let k=[],N=o.matchStyles(u.value,u.params,k),G=o.matchStyles(f.value,f.params,k);k.length?this._engine.reportError(k):this._engine.afterFlush(()=>{$a(e,N),Br(e,G)})}return}let E=wi(this._engine.playersByElement,e,[]);E.forEach(k=>{k.namespaceId==this.id&&k.triggerName==t&&k.queued&&k.destroy()});let b=o.matchTransition(u.value,f.value,e,f.params),M=!1;if(!b){if(!r)return;b=o.fallbackTransition,M=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:b,fromState:u,toState:f,player:a,isFallbackTransition:M}),M||(zi(e,Rx),a.onStart(()=>{Ol(e,Rx)})),a.onDone(()=>{let k=this.players.indexOf(a);k>=0&&this.players.splice(k,1);let N=this._engine.playersByElement.get(e);if(N){let G=N.indexOf(a);G>=0&&N.splice(G,1)}}),this.players.push(a),E.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,ug,!0);i.forEach(r=>{if(r[ur])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(a=>a.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),a=new Map;if(o){let l=[];if(o.forEach((u,f)=>{if(a.set(f,u.value),this._triggers.has(f)){let m=this.trigger(e,f,Qd,r);m&&l.push(m)}}),l.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),i&&Ms(l).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let a=o.name;if(r.has(a))return;r.add(a);let u=this._triggers.get(a).fallbackTransition,f=i.get(a)||db,m=new Xd(Qd),v=new eh(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:u,fromState:f,toState:m,player:v,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let a=e;for(;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[ur];(!o||o===Wx)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){zi(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,a=this._elementListeners.get(o);a&&a.forEach(l=>{if(l.name==i.triggerName){let u=xb(o,i.triggerName,i.fromState.value,i.toState.value);u._data=e,Mb(i.player,l.phase,u,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,a=r.transition.ast.depCount;return o==0||a==0?o-a:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Sb=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new Tb(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let a=!1,l=this.driver.getParentElement(t);for(;l;){let u=r.get(l);if(u){let f=i.indexOf(u);i.splice(f+1,0,e),a=!0;break}l=this.driver.getParentElement(l)}a||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(cg(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!cg(t))return;let o=t[ur];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){let a=this._fetchNamespace(e);a&&a.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),zi(e,ub)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ol(e,ub))}removeNode(e,t,i){if(cg(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[ur]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return cg(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,ug,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,pb,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ms(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ur];if(t&&t.setForRemoval){if(e[ur]=Wx,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ub)&&this.markElementAsDisabled(e,!1),this.driver.query(e,bz,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];zi(r,Ez)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Ms(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw j4(e)}_flushAnimations(e,t){let i=new Jd,r=[],o=new Map,a=[],l=new Map,u=new Map,f=new Map,m=new Set;this.disabledNodes.forEach(W=>{m.add(W);let fe=this.driver.query(W,wz,!0);for(let Z=0;Z<fe.length;Z++)m.add(fe[Z])});let v=this.bodyNode,E=Array.from(this.statesByElement.keys()),b=Nx(E,this.collectedEnterElements),M=new Map,k=0;b.forEach((W,fe)=>{let Z=jx+k++;M.set(fe,Z),W.forEach(_e=>zi(_e,Z))});let N=[],G=new Set,te=new Set;for(let W=0;W<this.collectedLeaveElements.length;W++){let fe=this.collectedLeaveElements[W],Z=fe[ur];Z&&Z.setForRemoval&&(N.push(fe),G.add(fe),Z.hasAnimation?this.driver.query(fe,Iz,!0).forEach(_e=>G.add(_e)):te.add(fe))}let J=new Map,ue=Nx(E,Array.from(G));ue.forEach((W,fe)=>{let Z=fb+k++;J.set(fe,Z),W.forEach(_e=>zi(_e,Z))}),e.push(()=>{b.forEach((W,fe)=>{let Z=M.get(fe);W.forEach(_e=>Ol(_e,Z))}),ue.forEach((W,fe)=>{let Z=J.get(fe);W.forEach(_e=>Ol(_e,Z))}),N.forEach(W=>{this.processLeaveNode(W)})});let Ne=[],he=[];for(let W=this._namespaceList.length-1;W>=0;W--)this._namespaceList[W].drainQueuedTransitions(t).forEach(Z=>{let _e=Z.player,Qe=Z.element;if(Ne.push(_e),this.collectedEnterElements.length){let Ot=Qe[ur];if(Ot&&Ot.setForMove){if(Ot.previousTriggersValues&&Ot.previousTriggersValues.has(Z.triggerName)){let ei=Ot.previousTriggersValues.get(Z.triggerName),un=this.statesByElement.get(Z.element);if(un&&un.has(Z.triggerName)){let kn=un.get(Z.triggerName);kn.value=ei,un.set(Z.triggerName,kn)}}_e.destroy();return}}let Et=!v||!this.driver.containsElement(v,Qe),Le=J.get(Qe),Ie=M.get(Qe),we=this._buildInstruction(Z,i,Ie,Le,Et);if(we.errors&&we.errors.length){he.push(we);return}if(Et){_e.onStart(()=>$a(Qe,we.fromStyles)),_e.onDestroy(()=>Br(Qe,we.toStyles)),r.push(_e);return}if(Z.isFallbackTransition){_e.onStart(()=>$a(Qe,we.fromStyles)),_e.onDestroy(()=>Br(Qe,we.toStyles)),r.push(_e);return}let ln=[];we.timelines.forEach(Ot=>{Ot.stretchStartingKeyframe=!0,this.disabledNodes.has(Ot.element)||ln.push(Ot)}),we.timelines=ln,i.append(Qe,we.timelines);let Si={instruction:we,player:_e,element:Qe};a.push(Si),we.queriedElements.forEach(Ot=>wi(l,Ot,[]).push(_e)),we.preStyleProps.forEach((Ot,ei)=>{if(Ot.size){let un=u.get(ei);un||u.set(ei,un=new Set),Ot.forEach((kn,Di)=>un.add(Di))}}),we.postStyleProps.forEach((Ot,ei)=>{let un=f.get(ei);un||f.set(ei,un=new Set),Ot.forEach((kn,Di)=>un.add(Di))})});if(he.length){let W=[];he.forEach(fe=>{W.push(z4(fe.triggerName,fe.errors))}),Ne.forEach(fe=>fe.destroy()),this.reportError(W)}let R=new Map,S=new Map;a.forEach(W=>{let fe=W.element;i.has(fe)&&(S.set(fe,fe),this._beforeAnimationBuild(W.player.namespaceId,W.instruction,R))}),r.forEach(W=>{let fe=W.element;this._getPreviousPlayers(fe,!1,W.namespaceId,W.triggerName,null).forEach(_e=>{wi(R,fe,[]).push(_e),_e.destroy()})});let A=N.filter(W=>Lx(W,u,f)),O=new Map;kx(O,this.driver,te,f,Fr).forEach(W=>{Lx(W,u,f)&&A.push(W)});let V=new Map;b.forEach((W,fe)=>{kx(V,this.driver,new Set(W),u,rg)}),A.forEach(W=>{let fe=O.get(W),Z=V.get(W);O.set(W,new Map([...fe?.entries()??[],...Z?.entries()??[]]))});let P=[],Dt=[],Hn={};a.forEach(W=>{let{element:fe,player:Z,instruction:_e}=W;if(i.has(fe)){if(m.has(fe)){Z.onDestroy(()=>Br(fe,_e.toStyles)),Z.disabled=!0,Z.overrideTotalTime(_e.totalTime),r.push(Z);return}let Qe=Hn;if(S.size>1){let Le=fe,Ie=[];for(;Le=Le.parentNode;){let we=S.get(Le);if(we){Qe=we;break}Ie.push(Le)}Ie.forEach(we=>S.set(we,Qe))}let Et=this._buildAnimation(Z.namespaceId,_e,R,o,V,O);if(Z.setRealPlayer(Et),Qe===Hn)P.push(Z);else{let Le=this.playersByElement.get(Qe);Le&&Le.length&&(Z.parentPlayer=Ms(Le)),r.push(Z)}}else $a(fe,_e.fromStyles),Z.onDestroy(()=>Br(fe,_e.toStyles)),Dt.push(Z),m.has(fe)&&r.push(Z)}),Dt.forEach(W=>{let fe=o.get(W.element);if(fe&&fe.length){let Z=Ms(fe);W.setRealPlayer(Z)}}),r.forEach(W=>{W.parentPlayer?W.syncPlayerEvents(W.parentPlayer):W.destroy()});for(let W=0;W<N.length;W++){let fe=N[W],Z=fe[ur];if(Ol(fe,fb),Z&&Z.hasAnimation)continue;let _e=[];if(l.size){let Et=l.get(fe);Et&&Et.length&&_e.push(...Et);let Le=this.driver.query(fe,pb,!0);for(let Ie=0;Ie<Le.length;Ie++){let we=l.get(Le[Ie]);we&&we.length&&_e.push(...we)}}let Qe=_e.filter(Et=>!Et.destroyed);Qe.length?Mz(this,fe,Qe):this.processLeaveNode(fe)}return N.length=0,P.forEach(W=>{this.players.push(W),W.onDone(()=>{W.destroy();let fe=this.players.indexOf(W);this.players.splice(fe,1)}),W.play()}),P}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let a=[];if(t){let l=this.playersByQueriedElement.get(e);l&&(a=l)}else{let l=this.playersByElement.get(e);if(l){let u=!o||o==Qd;l.forEach(f=>{f.queued||!u&&f.triggerName!=r||a.push(f)})}}return(i||r)&&(a=a.filter(l=>!(i&&i!=l.namespaceId||r&&r!=l.triggerName))),a}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,a=t.isRemovalTransition?void 0:e,l=t.isRemovalTransition?void 0:r;for(let u of t.timelines){let f=u.element,m=f!==o,v=wi(i,f,[]);this._getPreviousPlayers(f,m,a,l,t.toState).forEach(b=>{let M=b.getRealPlayer();M.beforeDestroy&&M.beforeDestroy(),b.destroy(),v.push(b)})}$a(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,a){let l=t.triggerName,u=t.element,f=[],m=new Set,v=new Set,E=t.timelines.map(M=>{let k=M.element;m.add(k);let N=k[ur];if(N&&N.removedBeforeQueried)return new As(M.duration,M.delay);let G=k!==u,te=xz((i.get(k)||Cz).map(R=>R.getRealPlayer())).filter(R=>{let S=R;return S.element?S.element===k:!1}),J=o.get(k),ue=a.get(k),Ne=Fx(this._normalizer,M.keyframes,J,ue),he=this._buildPlayer(M,Ne,te);if(M.subTimeline&&r&&v.add(k),G){let R=new eh(e,l,k);R.setRealPlayer(he),f.push(R)}return he});f.forEach(M=>{wi(this.playersByQueriedElement,M.element,[]).push(M),M.onDone(()=>Sz(this.playersByQueriedElement,M.element,M))}),m.forEach(M=>zi(M,Sx));let b=Ms(E);return b.onDestroy(()=>{m.forEach(M=>Ol(M,Sx)),Br(u,t.toStyles)}),v.forEach(M=>{wi(r,M,[]).push(b)}),b}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new As(e.duration,e.delay)}},eh=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new As,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>Mb(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){wi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Sz(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function Dz(n){return n??null}function cg(n){return n&&n.nodeType===1}function Az(n){return n=="start"||n=="done"}function Ox(n,e){let t=n.style.display;return n.style.display=e??"none",t}function kx(n,e,t,i,r){let o=[];t.forEach(u=>o.push(Ox(u)));let a=[];i.forEach((u,f)=>{let m=new Map;u.forEach(v=>{let E=e.computeStyle(f,v,r);m.set(v,E),(!E||E.length==0)&&(f[ur]=Tz,a.push(f))}),n.set(f,m)});let l=0;return t.forEach(u=>Ox(u,o[l++])),a}function Nx(n,e){let t=new Map;if(n.forEach(l=>t.set(l,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function a(l){if(!l)return i;let u=o.get(l);if(u)return u;let f=l.parentNode;return t.has(f)?u=f:r.has(f)?u=i:u=a(f),o.set(l,u),u}return e.forEach(l=>{let u=a(l);u!==i&&t.get(u).push(l)}),t}function zi(n,e){n.classList?.add(e)}function Ol(n,e){n.classList?.remove(e)}function Mz(n,e,t){Ms(t).onDone(()=>n.processLeaveNode(e))}function xz(n){let e=[];return Kx(n,e),e}function Kx(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Gd?Kx(i.players,e):e.push(i)}}function Pz(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function Lx(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var kl=class{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Sb(e.body,t,i),this._timelineEngine=new Cb(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let a=e+"-"+r,l=this._triggerCache[a];if(!l){let u=[],f=[],m=Hx(this._driver,o,u,f);if(u.length)throw P4(r,u);f.length&&void 0,l=_z(r,m,this._normalizer),this._triggerCache[a]=l}this._transitionEngine.registerTrigger(t,r,l)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,a]=Cx(i),l=r;this._timelineEngine.command(o,t,a,l)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[a,l]=Cx(i);return this._timelineEngine.listen(a,t,l,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Rz(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=hb(e[0]),e.length>1&&(i=hb(e[e.length-1]))):e instanceof Map&&(t=hb(e)),t||i?new Db(n,t,i):null}var Db=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=n.initialStylesByElement.get(e);r||n.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Br(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Br(this._element,this._initialStyles),this._endStyles&&(Br(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&($a(this._element,this._startStyles),this._endStyles=null),this._endStyles&&($a(this._element,this._endStyles),this._endStyles=null),Br(this._element,this._initialStyles),this._state=3)}};function hb(n){let e=null;return n.forEach((t,i)=>{Oz(i)&&(e=e||new Map,e.set(i,t))}),e}function Oz(n){return n==="display"||n==="position"}var _g=class{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:kb(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},vg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Vx(e,t)}getParentElement(e){return Pb(e)}query(e,t,i){return Bx(e,t,i)}computeStyle(e,t,i){return kb(e,t)}animate(e,t,i,r,o,a=[]){let l=r==0?"both":"forwards",u={duration:i,delay:r,fill:l};o&&(u.easing=o);let f=new Map,m=a.filter(b=>b instanceof _g);X4(i,r)&&m.forEach(b=>{b.currentSnapshot.forEach((M,k)=>f.set(k,M))});let v=Q4(t).map(b=>new Map(b));v=ez(e,v,f);let E=Rz(e,v);return new _g(e,v,u,E)}};var lg="@",Zx="@.disabled",yg=class{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==lg&&t==Zx?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Ab=class extends yg{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==lg?t.charAt(1)=="."&&t==Zx?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==lg){let r=kz(e),o=t.slice(1),a="";return o.charAt(0)!=lg&&([o,a]=Nz(o)),this.engine.listen(this.namespaceId,r,o,a,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,i,l)})}return this.delegate.listen(e,t,i)}};function kz(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Nz(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var wg=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let f=this._rendererCache,m=f.get(r);if(!m){let v=()=>f.delete(r);m=new yg(i,r,this.engine,v),f.set(r,m)}return m}let o=t.id,a=t.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);let l=f=>{Array.isArray(f)?f.forEach(l):this.engine.registerTrigger(o,a,e,f.name,f)};return t.data.animation.forEach(l),new Ab(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[a,l]=o;a(l)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Fz=(()=>{class n extends kl{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(me(vn),me(Ha),me(qa))}}static{this.\u0275prov=le({token:n,factory:n.\u0275fac})}}return n})();function Vz(){return new hg}function Bz(n,e,t){return new wg(n,e,t)}var Qx=[{provide:qa,useFactory:Vz},{provide:kl,useClass:Fz},{provide:ps,useFactory:Bz,deps:[Fm,kl,ct]}],Uz=[{provide:Ha,useFactory:()=>new vg},{provide:O0,useValue:"BrowserAnimations"},...Qx],Bee=[{provide:Ha,useClass:Rb},{provide:O0,useValue:"NoopAnimations"},...Qx];function Yx(){return ys("NgEagerAnimations"),[...Uz]}var Xx=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},jz=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[t++],a=n[t++],l=n[t++],u=((r&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},eP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],a=r+1<n.length,l=a?n[r+1]:0,u=r+2<n.length,f=u?n[r+2]:0,m=o>>2,v=(o&3)<<4|l>>4,E=(l&15)<<2|f>>6,b=f&63;u||(b=64,a||(E=64)),i.push(t[m],t[v],t[E],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Xx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):jz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;let f=r<n.length?t[n.charAt(r)]:64;++r;let v=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||l==null||f==null||v==null)throw new Fb;let E=o<<2|l>>4;if(i.push(E),f!==64){let b=l<<4&240|f>>2;if(i.push(b),v!==64){let M=f<<6&192|v;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Fb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},zz=function(n){let e=Xx(n);return eP.encodeByteArray(e,!0)},th=function(n){return zz(n).replace(/\./g,"")},Bb=function(n){try{return eP.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $z(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Hz=()=>$z().__FIREBASE_DEFAULTS__,qz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Gz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Bb(n[1]);return e&&JSON.parse(e)},Eg=()=>{try{return Hz()||qz()||Gz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ub=n=>{var e,t;return(t=(e=Eg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},tP=n=>{let e=Ub(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},jb=()=>{var n;return(n=Eg())===null||n===void 0?void 0:n.config},zb=n=>{var e;return(e=Eg())===null||e===void 0?void 0:e[`_${n}`]};var bg=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function nP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[th(JSON.stringify(t)),th(JSON.stringify(a)),""].join(".")}function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function Wz(){var n;let e=(n=Eg())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aP(){let n=wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cP(){return!Wz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $b(){try{return typeof indexedDB=="object"}catch{return!1}}function lP(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Kz="FirebaseError",bi=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Kz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Po.prototype.create)}},Po=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?Zz(o,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new bi(r,l,i)}};function Zz(n,e){return n.replace(Qz,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Qz=/\{\$([^}]+)}/g;function uP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ro(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let o=n[r],a=e[r];if(Jx(o)&&Jx(a)){if(!Ro(o,a))return!1}else if(o!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function Jx(n){return n!==null&&typeof n=="object"}function Nl(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function dP(n,e){let t=new Vb(n,e);return t.subscribe.bind(t)}var Vb=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Yz(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Lb),r.error===void 0&&(r.error=Lb),r.complete===void 0&&(r.complete=Lb);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Yz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lb(){}var jee=4*60*60*1e3;function Wt(n){return n&&n._delegate?n._delegate:n}var $i=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ga="[DEFAULT]";var Hb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new bg;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xz(e))try{this.getOrInitializeService({instanceIdentifier:Ga})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ga){return this.instances.has(e)}getOptions(e=Ga){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[o,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);let a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Jz(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ga){return this.component?this.component.multipleInstances?e:Ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Jz(n){return n===Ga?void 0:n}function Xz(n){return n.instantiationMode==="EAGER"}var Ig=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Hb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var e6=[],Xe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Xe||{}),t6={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},n6=Xe.INFO,i6={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},r6=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=i6[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xs=class{constructor(e){this.name=e,this._logLevel=n6,this._logHandler=r6,this._userLogHandler=null,e6.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}};var o6=(n,e)=>e.some(t=>n instanceof t),hP,fP;function s6(){return hP||(hP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a6(){return fP||(fP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var pP=new WeakMap,Gb=new WeakMap,mP=new WeakMap,qb=new WeakMap,Kb=new WeakMap;function c6(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Ur(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&pP.set(t,n)}).catch(()=>{}),Kb.set(e,n),e}function l6(n){if(Gb.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Gb.set(n,e)}var Wb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Gb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ur(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gP(n){Wb=n(Wb)}function u6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Cg(this),e,...t);return mP.set(i,e.sort?e.sort():[e]),Ur(i)}:a6().includes(n)?function(...e){return n.apply(Cg(this),e),Ur(pP.get(this))}:function(...e){return Ur(n.apply(Cg(this),e))}}function d6(n){return typeof n=="function"?u6(n):(n instanceof IDBTransaction&&l6(n),o6(n,s6())?new Proxy(n,Wb):n)}function Ur(n){if(n instanceof IDBRequest)return c6(n);if(qb.has(n))return qb.get(n);let e=d6(n);return e!==n&&(qb.set(n,e),Kb.set(e,n)),e}var Cg=n=>Kb.get(n);function vP(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){let a=indexedDB.open(n,e),l=Ur(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Ur(a.result),u.oldVersion,u.newVersion,Ur(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var h6=["get","getKey","getAll","getAllKeys","count"],f6=["put","add","delete","clear"],Zb=new Map;function _P(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zb.get(e))return Zb.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=f6.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||h6.includes(t)))return;let o=function(a,...l){return T(this,null,function*(){let u=this.transaction(a,r?"readwrite":"readonly"),f=u.store;return i&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),r&&u.done]))[0]})};return Zb.set(e,o),o}gP(n=>Oe(Y({},n),{get:(e,t,i)=>_P(e,t)||n.get(e,t,i),has:(e,t)=>!!_P(e,t)||n.has(e,t)}));var Yb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(p6(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function p6(n){let e=n.getComponent();return e?.type==="VERSION"}var Jb="@firebase/app",yP="0.10.13";var Oo=new xs("@firebase/app"),m6="@firebase/app-compat",g6="@firebase/analytics-compat",_6="@firebase/analytics",v6="@firebase/app-check-compat",y6="@firebase/app-check",w6="@firebase/auth",b6="@firebase/auth-compat",E6="@firebase/database",I6="@firebase/data-connect",C6="@firebase/database-compat",T6="@firebase/functions",S6="@firebase/functions-compat",D6="@firebase/installations",A6="@firebase/installations-compat",M6="@firebase/messaging",x6="@firebase/messaging-compat",P6="@firebase/performance",R6="@firebase/performance-compat",O6="@firebase/remote-config",k6="@firebase/remote-config-compat",N6="@firebase/storage",L6="@firebase/storage-compat",F6="@firebase/firestore",V6="@firebase/vertexai-preview",B6="@firebase/firestore-compat",U6="firebase",j6="10.14.1";var Xb="[DEFAULT]",z6={[Jb]:"fire-core",[m6]:"fire-core-compat",[_6]:"fire-analytics",[g6]:"fire-analytics-compat",[y6]:"fire-app-check",[v6]:"fire-app-check-compat",[w6]:"fire-auth",[b6]:"fire-auth-compat",[E6]:"fire-rtdb",[I6]:"fire-data-connect",[C6]:"fire-rtdb-compat",[T6]:"fire-fn",[S6]:"fire-fn-compat",[D6]:"fire-iid",[A6]:"fire-iid-compat",[M6]:"fire-fcm",[x6]:"fire-fcm-compat",[P6]:"fire-perf",[R6]:"fire-perf-compat",[O6]:"fire-rc",[k6]:"fire-rc-compat",[N6]:"fire-gcs",[L6]:"fire-gcs-compat",[F6]:"fire-fst",[B6]:"fire-fst-compat",[V6]:"fire-vertex","fire-js":"fire-js",[U6]:"fire-js-all"};var nh=new Map,$6=new Map,eE=new Map;function wP(n,e){try{n.container.addComponent(e)}catch(t){Oo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rs(n){let e=n.name;if(eE.has(e))return Oo.debug(`There were multiple attempts to register component ${e}.`),!1;eE.set(e,n);for(let t of nh.values())wP(t,n);for(let t of $6.values())wP(t,n);return!0}function rh(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jr(n){return n.settings!==void 0}var H6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new Po("app","Firebase",H6);var tE=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}};var Os=j6;function rE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Xb,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ps.create("bad-app-name",{appName:String(r)});if(t||(t=jb()),!t)throw Ps.create("no-options");let o=nh.get(r);if(o){if(Ro(t,o.options)&&Ro(i,o.config))return o;throw Ps.create("duplicate-app",{appName:r})}let a=new Ig(r);for(let u of eE.values())a.addComponent(u);let l=new tE(t,i,a);return nh.set(r,l),l}function Ll(n=Xb){let e=nh.get(n);if(!e&&n===Xb&&jb())return rE();if(!e)throw Ps.create("no-app",{appName:n});return e}function Tg(){return Array.from(nh.values())}function cn(n,e,t){var i;let r=(i=z6[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oo.warn(l.join(" "));return}Rs(new $i(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var q6="firebase-heartbeat-database",G6=1,ih="firebase-heartbeat-store",Qb=null;function CP(){return Qb||(Qb=vP(q6,G6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ih)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ps.create("idb-open",{originalErrorMessage:n.message})})),Qb}function W6(n){return T(this,null,function*(){try{let t=(yield CP()).transaction(ih),i=yield t.objectStore(ih).get(TP(n));return yield t.done,i}catch(e){if(e instanceof bi)Oo.warn(e.message);else{let t=Ps.create("idb-get",{originalErrorMessage:e?.message});Oo.warn(t.message)}}})}function bP(n,e){return T(this,null,function*(){try{let i=(yield CP()).transaction(ih,"readwrite");yield i.objectStore(ih).put(e,TP(n)),yield i.done}catch(t){if(t instanceof bi)Oo.warn(t.message);else{let i=Ps.create("idb-set",{originalErrorMessage:t?.message});Oo.warn(i.message)}}})}function TP(n){return`${n.name}!${n.options.appId}`}var K6=1024,Z6=30*24*60*60*1e3,nE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new iE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return T(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=EP();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let l=new Date(a.date).valueOf();return Date.now()-l<=Z6}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Oo.warn(i)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=EP(),{heartbeatsToSend:i,unsentEntries:r}=Q6(this._heartbeatsCache.heartbeats),o=th(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Oo.warn(t),""}})}};function EP(){return new Date().toISOString().substring(0,10)}function Q6(n,e=K6){let t=[],i=n.slice();for(let r of n){let o=t.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),IP(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),IP(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var iE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return $b()?lP().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield W6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return bP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return bP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function IP(n){return th(JSON.stringify({version:2,heartbeats:n})).length}function Y6(n){Rs(new $i("platform-logger",e=>new Yb(e),"PRIVATE")),Rs(new $i("heartbeat",e=>new nE(e),"PRIVATE")),cn(Jb,yP,n),cn(Jb,yP,"esm2017"),cn("fire-js","")}Y6("");var J6="firebase",X6="10.14.1";cn(J6,X6,"app");var Ka=new mo("ANGULARFIRE2_VERSION");function Dg(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var oh=(n,e)=>{let t=e?[e]:Tg(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},Vl=class{constructor(){return oh(e$)}},e$="app-check";function Fl(){}var Sg=class{zone;delegate;constructor(e,t=$v){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,o=function(a){r.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,t,i)}},oE=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fl,{},Fl,Fl)),t.pipe(Yt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Bl=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Sg(Zone.current)),this.insideAngular=t.run(()=>new Sg(Zone.current,zv)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(me(ct))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ag(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function t$(n){return Ag().ngZone.runOutsideAngular(()=>n())}function Wa(n){return Ag().ngZone.run(()=>n())}function n$(n){return i$(Ag())(n)}function i$(n){return function(t){return t=t.lift(new oE(n.ngZone)),t.pipe(os(n.outsideAngular),rs(n.insideAngular))}}var r$=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Wa(()=>n.apply(void 0,i))},Nt=(n,e)=>function(){let t,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(e&&(t||=Wa(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fl,{},Fl,Fl))),i[o]=r$(i[o],t));let r=t$(()=>n.apply(this,i));if(!e)if(r instanceof je){let o=Ag();return r.pipe(os(o.outsideAngular),rs(o.insideAngular))}else return Wa(()=>r);return r instanceof je?r.pipe(n$):r instanceof Promise?Wa(()=>new Promise((o,a)=>r.then(l=>Wa(()=>o(l)),l=>Wa(()=>a(l))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:Wa(()=>r)};var ko=class{constructor(e){return e}},Za=class{constructor(){return Tg()}};function o$(n){return n&&n.length===1?n[0]:new ko(Ll())}var sE=new de("angularfire2._apps"),s$={provide:ko,useFactory:o$,deps:[[new Mn,sE]]},a$={provide:Za,deps:[[new Mn,sE]]};function c$(n){return(e,t)=>{let i=t.get(Fi);cn("angularfire",Ka.full,"core"),cn("angularfire",Ka.full,"app"),cn("angular",L1.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new ko(r)}}function SP(n,...e){return or([s$,a$,{provide:sE,useFactory:c$(n),multi:!0,deps:[ct,Cn,Bl,...e]}])}var DP=Nt(rE,!0);function $P(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HP=$P,qP=new Po("auth","Firebase",$P());var kg=new xs("@firebase/auth");function l$(n,...e){kg.logLevel<=Xe.WARN&&kg.warn(`Auth (${Os}): ${n}`,...e)}function xg(n,...e){kg.logLevel<=Xe.ERROR&&kg.error(`Auth (${Os}): ${n}`,...e)}function Ls(n,...e){throw RE(n,...e)}function zr(n,...e){return RE(n,...e)}function GP(n,e,t){let i=Object.assign(Object.assign({},HP()),{[e]:t});return new Po("auth","Firebase",i).create(e,{appName:n.name})}function Ns(n){return GP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RE(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return qP.create(n,...e)}function ye(n,e,...t){if(!n)throw RE(e,...t)}function No(n){let e="INTERNAL ASSERTION FAILED: "+n;throw xg(e),new Error(e)}function Fs(n,e){n||No(e)}function dE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function WP(){return AP()==="http:"||AP()==="https:"}function AP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function u$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WP()||oP()||"connection"in navigator)?navigator.onLine:!0}function d$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Qa=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fs(t>e,"Short delay should be less than long delay!"),this.isMobile=iP()||sP()}get(){return u$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function OE(n,e){Fs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ng=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;No("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;No("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;No("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var h$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var f$=new Qa(3e4,6e4);function Fo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function $r(o,a,l,u){return T(this,arguments,function*(n,e,t,i,r={}){return KP(n,r,()=>T(this,null,function*(){let f={},m={};i&&(e==="GET"?m=i:f={body:JSON.stringify(i)});let v=Nl(Object.assign({key:n.config.apiKey},m)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let b=Object.assign({method:e,headers:E},f);return rP()||(b.referrerPolicy="no-referrer"),Ng.fetch()(ZP(n,n.config.apiHost,t,v),b)}))})}function KP(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},h$),e);try{let r=new hE(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw sh(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let l=o.ok?a.errorMessage:a.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw sh(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw sh(n,"user-disabled",a);let m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw GP(n,m,f);Ls(n,m)}}catch(r){if(r instanceof bi)throw r;Ls(n,"network-request-failed",{message:String(r)})}})}function qg(o,a,l,u){return T(this,arguments,function*(n,e,t,i,r={}){let f=yield $r(n,e,t,i,r);return"mfaPendingCredential"in f&&Ls(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function ZP(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?OE(n.config,r):`${n.config.apiScheme}://${r}`}var hE=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(zr(this.auth,"network-request-failed")),f$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function sh(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=zr(n,e,i);return r.customData._tokenResponse=t,r}function MP(n){return n!==void 0&&n.getResponse!==void 0}function p$(n){return T(this,null,function*(){return(yield $r(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})}function m$(n,e){return T(this,null,function*(){return $r(n,"POST","/v1/accounts:delete",e)})}function QP(n,e){return T(this,null,function*(){return $r(n,"POST","/v1/accounts:lookup",e)})}function ah(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function kE(n,e=!1){return T(this,null,function*(){let t=Wt(n),i=yield t.getIdToken(e),r=NE(i);ye(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,a=o?.sign_in_provider;return{claims:r,token:i,authTime:ah(aE(r.auth_time)),issuedAtTime:ah(aE(r.iat)),expirationTime:ah(aE(r.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function aE(n){return Number(n)*1e3}function NE(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return xg("JWT malformed, contained fewer than 3 sections"),null;try{let r=Bb(t);return r?JSON.parse(r):(xg("Failed to decode base64 JWT payload"),null)}catch(r){return xg("Caught error parsing JWT payload as JSON",r?.toString()),null}}function xP(n){let e=NE(n);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function lh(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof bi&&g$(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function g$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var fE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var uh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ah(this.lastLoginAt),this.creationTime=ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Lg(n){return T(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield lh(n,QP(t,{idToken:i}));ye(r?.users.length,t,"internal-error");let o=r.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?YP(o.providerUserInfo):[],l=_$(n.providerData,a),u=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,m=u?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new uh(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)})}function LE(n){return T(this,null,function*(){let e=Wt(n);yield Lg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function _$(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function YP(n){return n.map(e=>{var{providerId:t}=e,i=Hv(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function v$(n,e){return T(this,null,function*(){let t=yield KP(n,{},()=>T(this,null,function*(){let i=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,a=ZP(n,r,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Ng.fetch()(a,{method:"POST",headers:l,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function y$(n,e){return T(this,null,function*(){return $r(n,"POST","/v2/accounts:revokeToken",Fo(n,e))})}var ch=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ye(e.length!==0,"internal-error");let t=xP(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield v$(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,a=new n;return i&&(ye(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ye(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ye(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return No("not implemented")}};function ks(n,e){ye(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ul=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=Hv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new uh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield lh(this,this.stsTokenManager.getToken(this.auth,e));return ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return kE(this,e)}reload(){return LE(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Lg(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(jr(this.auth.app))return Promise.reject(Ns(this.auth));let e=yield this.getIdToken();return yield lh(this,m$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,a,l,u,f,m;let v=(i=t.displayName)!==null&&i!==void 0?i:void 0,E=(r=t.email)!==null&&r!==void 0?r:void 0,b=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,M=(a=t.photoURL)!==null&&a!==void 0?a:void 0,k=(l=t.tenantId)!==null&&l!==void 0?l:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,G=(f=t.createdAt)!==null&&f!==void 0?f:void 0,te=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:J,emailVerified:ue,isAnonymous:Ne,providerData:he,stsTokenManager:R}=t;ye(J&&R,e,"internal-error");let S=ch.fromJSON(this.name,R);ye(typeof J=="string",e,"internal-error"),ks(v,e.name),ks(E,e.name),ye(typeof ue=="boolean",e,"internal-error"),ye(typeof Ne=="boolean",e,"internal-error"),ks(b,e.name),ks(M,e.name),ks(k,e.name),ks(N,e.name),ks(G,e.name),ks(te,e.name);let A=new n({uid:J,auth:e,email:E,emailVerified:ue,displayName:v,isAnonymous:Ne,photoURL:M,phoneNumber:b,tenantId:k,stsTokenManager:S,createdAt:G,lastLoginAt:te});return he&&Array.isArray(he)&&(A.providerData=he.map(O=>Object.assign({},O))),N&&(A._redirectEventId=N),A}static _fromIdTokenResponse(e,t,i=!1){return T(this,null,function*(){let r=new ch;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Lg(o),o})}static _fromGetAccountInfoResponse(e,t,i){return T(this,null,function*(){let r=t.users[0];ye(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?YP(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!o?.length,l=new ch;l.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new uh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(u,f),u})}};var PP=new Map;function Lo(n){Fs(n instanceof Function,"Expected a class definition");let e=PP.get(n);return e?(Fs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,PP.set(n,e),e)}var w$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,i){return T(this,null,function*(){this.storage[t]=i})}_get(t){return T(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),pE=w$;function Pg(n,e,t){return`firebase:${n}:${e}:${t}`}var Fg=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=Pg(this.userKey,r.apiKey,o),this.fullPersistenceKey=Pg("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ul._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return T(this,null,function*(){if(!t.length)return new n(Lo(pE),e,i);let r=(yield Promise.all(t.map(f=>T(this,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=r[0]||Lo(pE),a=Pg(i,e.config.apiKey,e.name),l=null;for(let f of t)try{let m=yield f._get(a);if(m){let v=Ul._fromJSON(e,m);f!==o&&(l=v),o=f;break}}catch{}let u=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,i):(o=u[0],l&&(yield o._set(a,l.toJSON())),yield Promise.all(t.map(f=>T(this,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,i))})}};function RP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iR(e))return"Blackberry";if(rR(e))return"Webos";if(XP(e))return"Safari";if((e.includes("chrome/")||eR(e))&&!e.includes("edge/"))return"Chrome";if(nR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function JP(n=wn()){return/firefox\//i.test(n)}function XP(n=wn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eR(n=wn()){return/crios\//i.test(n)}function tR(n=wn()){return/iemobile/i.test(n)}function nR(n=wn()){return/android/i.test(n)}function iR(n=wn()){return/blackberry/i.test(n)}function rR(n=wn()){return/webos/i.test(n)}function FE(n=wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function b$(n=wn()){var e;return FE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function E$(){return aP()&&document.documentMode===10}function oR(n=wn()){return FE(n)||nR(n)||rR(n)||iR(n)||/windows phone/i.test(n)||tR(n)}function sR(n,e=[]){let t;switch(n){case"Browser":t=RP(wn());break;case"Worker":t=`${RP(wn())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Os}/${i}`}var mE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((a,l)=>{try{let u=e(o);a(u)}catch(u){l(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function I$(t){return T(this,arguments,function*(n,e={}){return $r(n,"GET","/v2/passwordPolicy",Fo(n,e))})}var C$=6,gE=class{constructor(e){var t,i,r,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:C$,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,a,l;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var _E=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vg(this),this.idTokenSubscription=new Vg(this),this.beforeStateQueue=new mE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lo(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Fg.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield QP(this,{idToken:e}),i=yield Ul._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var t;if(jr(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield Lg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=d$()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(jr(this.app))return Promise.reject(Ns(this));let t=e?Wt(e):null;return t&&ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return jr(this.app)?Promise.reject(Ns(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return jr(this.app)?Promise.reject(Ns(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(Lo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield I$(this),t=new gE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Po("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield y$(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Lo(e)||this._popupRedirectResolver;ye(t,this,"argument-error"),this.redirectPersistenceManager=yield Fg.create(this,[Lo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{a=!0,u()}}else{let u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return T(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&l$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function jl(n){return Wt(n)}var Vg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=dP(t=>this.observer=t)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Gg={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T$(n){Gg=n}function aR(n){return Gg.loadJS(n)}function S$(){return Gg.recaptchaV2Script}function D$(){return Gg.gapiScript}function cR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function VE(n,e){let t=rh(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),o=t.getOptions();if(Ro(o,e??{}))return r;Ls(r,"already-initialized")}return t.initialize({options:e})}function A$(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Lo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function BE(n,e,t){let i=jl(n);ye(i._canInitEmulator,i,"emulator-config-failed"),ye(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,o=lR(e),{host:a,port:l}=M$(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${o}//${a}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||x$()}function lR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function M$(n){let e=lR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:OP(i.substr(o.length+1))}}else{let[o,a]=i.split(":");return{host:o,port:OP(a)}}}function OP(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function x$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var dh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return No("not implemented")}_getIdTokenResponse(e){return No("not implemented")}_linkToIdToken(e,t){return No("not implemented")}_getReauthenticationResolver(e){return No("not implemented")}};function cE(n,e){return T(this,null,function*(){return qg(n,"POST","/v1/accounts:signInWithIdp",Fo(n,e))})}function P$(n,e){return T(this,null,function*(){return $r(n,"POST","/v1/accounts:sendVerificationCode",Fo(n,e))})}function R$(n,e){return T(this,null,function*(){return qg(n,"POST","/v1/accounts:signInWithPhoneNumber",Fo(n,e))})}function O$(n,e){return T(this,null,function*(){let t=yield qg(n,"POST","/v1/accounts:signInWithPhoneNumber",Fo(n,e));if(t.temporaryProof)throw sh(n,"account-exists-with-different-credential",t);return t})}var k$={USER_NOT_FOUND:"user-not-found"};function N$(n,e){return T(this,null,function*(){let t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return qg(n,"POST","/v1/accounts:signInWithPhoneNumber",Fo(n,t),k$)})}var Bg=class n extends dh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new n({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new n({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return R$(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return O$(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return N$(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:o}=e;return!i&&!t&&!r&&!o?null:new n({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:o})}};var Ug=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var vE=class extends Ug{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var hh=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return T(this,null,function*(){let o=yield Ul._fromIdTokenResponse(e,i,r),a=kP(i);return new n({user:o,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return T(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=kP(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function kP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var yE=class n extends bi{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function uR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?yE._fromErrorAndOperation(n,o,e,i):o})}function L$(n,e,t=!1){return T(this,null,function*(){let i=yield lh(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return hh._forOperation(n,"link",i)})}function F$(n,e,t=!1){return T(this,null,function*(){let{auth:i}=n;if(jr(i.app))return Promise.reject(Ns(i));let r="reauthenticate";try{let o=yield lh(n,uR(i,r,e,n),t);ye(o.idToken,i,"internal-error");let a=NE(o.idToken);ye(a,i,"internal-error");let{sub:l}=a;return ye(n.uid===l,i,"user-mismatch"),hh._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ls(i,"user-mismatch"),o}})}function dR(n,e,t=!1){return T(this,null,function*(){if(jr(n.app))return Promise.reject(Ns(n));let i="signIn",r=yield uR(n,i,e),o=yield hh._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})}function UE(n,e){return T(this,null,function*(){return dR(jl(n),e)})}function Wg(n,e,t,i){return Wt(n).onIdTokenChanged(e,t,i)}function jE(n,e,t){return Wt(n).beforeAuthStateChanged(e,t)}function ph(n,e,t,i){return Wt(n).onAuthStateChanged(e,t,i)}function V$(n,e){return $r(n,"POST","/v2/accounts/mfaEnrollment:start",Fo(n,e))}var jg="__sak";var zg=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jg,"1"),this.storage.removeItem(jg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var B$=1e3,U$=10,j$=(()=>{class n extends zg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}let r=t.key;i?this.detachListener():this.stopPolling();let o=()=>{let l=this.storage.getItem(r);!i&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);E$()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,U$):o()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},B$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return T(this,null,function*(){yield ns(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return T(this,null,function*(){let i=yield ns(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return T(this,null,function*(){yield ns(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),hR=j$;var z$=(()=>{class n extends zg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),zE=z$;function $$(n){return Promise.all(n.map(e=>T(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var H$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return T(this,null,function*(){let i=t,{eventId:r,eventType:o,data:a}=i.data,l=this.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let u=Array.from(l).map(m=>T(this,null,function*(){return m(i.origin,a)})),f=yield $$(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function fR(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var wE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return T(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{let f=fR("",20);r.port1.start();let m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(v){let E=v;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(E.data.response);break;default:clearTimeout(m),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function en(){return window}function q$(n){en().location.href=n}function $E(){return typeof en().WorkerGlobalScope<"u"&&typeof en().importScripts=="function"}function G$(){return T(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function W$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function K$(){return $E()?self:null}var pR="firebaseLocalStorageDb",Z$=1,$g="firebaseLocalStorage",mR="fbase_key",Ya=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Kg(n,e){return n.transaction([$g],e?"readwrite":"readonly").objectStore($g)}function Q$(){let n=indexedDB.deleteDatabase(pR);return new Ya(n).toPromise()}function bE(){let n=indexedDB.open(pR,Z$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore($g,{keyPath:mR})}catch(r){t(r)}}),n.addEventListener("success",()=>T(this,null,function*(){let i=n.result;i.objectStoreNames.contains($g)?e(i):(i.close(),yield Q$(),e(yield bE()))}))})}function NP(n,e,t){return T(this,null,function*(){let i=Kg(n,!0).put({[mR]:e,value:t});return new Ya(i).toPromise()})}function Y$(n,e){return T(this,null,function*(){let t=Kg(n,!1).get(e),i=yield new Ya(t).toPromise();return i===void 0?null:i.value})}function LP(n,e){let t=Kg(n,!0).delete(e);return new Ya(t).toPromise()}var J$=800,X$=3,e8=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return T(this,null,function*(){return this.db?this.db:(this.db=yield bE(),this.db)})}_withRetries(t){return T(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>X$)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return T(this,null,function*(){return $E()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return T(this,null,function*(){this.receiver=H$._getInstance(K$()),this.receiver._subscribe("keyChanged",(t,i)=>T(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>T(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return T(this,null,function*(){var t,i;if(this.activeServiceWorker=yield G$(),!this.activeServiceWorker)return;this.sender=new wE(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return T(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||W$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return T(this,null,function*(){try{if(!indexedDB)return!1;let t=yield bE();return yield NP(t,jg,"1"),yield LP(t,jg),!0}catch{}return!1})}_withPendingWrite(t){return T(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(r=>NP(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return T(this,null,function*(){let i=yield this._withRetries(r=>Y$(r,t));return this.localCache[t]=i,i})}_remove(t){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(i=>LP(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return T(this,null,function*(){let t=yield this._withRetries(o=>{let a=Kg(o,!1).getAll();return new Ya(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>T(this,null,function*(){return this._poll()}),J$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),gR=e8;function t8(n,e){return $r(n,"POST","/v2/accounts/mfaSignIn:start",Fo(n,e))}var n8=500,i8=6e4,Mg=1e12,EE=class{constructor(e){this.auth=e,this.counter=Mg,this._widgets=new Map}render(e,t){let i=this.counter;return this._widgets.set(i,new IE(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;let i=e||Mg;(t=this._widgets.get(i))===null||t===void 0||t.delete(),this._widgets.delete(i)}getResponse(e){var t;let i=e||Mg;return((t=this._widgets.get(i))===null||t===void 0?void 0:t.getResponse())||""}execute(e){return T(this,null,function*(){var t;let i=e||Mg;return(t=this._widgets.get(i))===null||t===void 0||t.execute(),""})}},IE=class{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let r=typeof e=="string"?document.getElementById(e):e;ye(r,"argument-error",{appName:t}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=r8(50);let{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},i8)},n8))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}};function r8(n){let e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}var lE=cR("rcb"),o8=new Qa(3e4,6e4),CE=class{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=en().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return ye(s8(t),e,"argument-error"),this.shouldResolveImmediately(t)&&MP(en().grecaptcha)?Promise.resolve(en().grecaptcha):new Promise((i,r)=>{let o=en().setTimeout(()=>{r(zr(e,"network-request-failed"))},o8.get());en()[lE]=()=>{en().clearTimeout(o),delete en()[lE];let l=en().grecaptcha;if(!l||!MP(l)){r(zr(e,"internal-error"));return}let u=l.render;l.render=(f,m)=>{let v=u(f,m);return this.counter++,v},this.hostLanguage=t,i(l)};let a=`${S$()}?${Nl({onload:lE,render:"explicit",hl:t})}`;aR(a).catch(()=>{clearTimeout(o),r(zr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=en().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}};function s8(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}var TE=class{load(e){return T(this,null,function*(){return new EE(e)})}clearedOneInstance(){}};var _R="recaptcha",a8={theme:"light",type:"image"},Ja=class{constructor(e,t,i=Object.assign({},a8)){this.parameters=i,this.type=_R,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jl(e),this.isInvisible=this.parameters.size==="invisible",ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");let r=typeof t=="string"?document.getElementById(t):t;ye(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new TE:new CE,this.validateStartingState()}verify(){return T(this,null,function*(){this.assertNotDestroyed();let e=yield this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(r=>{let o=a=>{a&&(this.tokenChangeListeners.delete(o),r(a))};this.tokenChangeListeners.add(o),this.isInvisible&&t.execute(e)})})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){let i=en()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){return T(this,null,function*(){if(yield this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId})}init(){return T(this,null,function*(){ye(WP()&&!$E(),this.auth,"internal-error"),yield c8(),this.recaptcha=yield this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let e=yield p$(this.auth);ye(e,this.auth,"internal-error"),this.parameters.sitekey=e})}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function c8(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}var SE=class{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){let t=Bg._fromVerification(this.verificationId,e);return this.onConfirmation(t)}};function HE(n,e,t){return T(this,null,function*(){if(jr(n.app))return Promise.reject(Ns(n));let i=jl(n),r=yield l8(i,e,Wt(t));return new SE(r,o=>UE(i,o))})}function l8(n,e,t){return T(this,null,function*(){var i;let r=yield t.verify();try{ye(typeof r=="string",n,"argument-error"),ye(t.type===_R,n,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){let a=o.session;if("phoneNumber"in o)return ye(a.type==="enroll",n,"internal-error"),(yield V$(n,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{ye(a.type==="signin",n,"internal-error");let l=((i=o.multiFactorHint)===null||i===void 0?void 0:i.uid)||o.multiFactorUid;return ye(l,n,"missing-multi-factor-info"),(yield t8(n,{mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{let{sessionInfo:a}=yield P$(n,{phoneNumber:o.phoneNumber,recaptchaToken:r});return a}}finally{t._reset()}})}function u8(n,e){return e?Lo(e):(ye(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var fh=class extends dh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function d8(n){return dR(n.auth,new fh(n),n.bypassAuthState)}function h8(n){let{auth:e,user:t}=n;return ye(t,e,"internal-error"),F$(t,new fh(n),n.bypassAuthState)}function f8(n){return T(this,null,function*(){let{auth:e,user:t}=n;return ye(t,e,"internal-error"),L$(t,new fh(n),n.bypassAuthState)})}var DE=class{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>T(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return T(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(u))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d8;case"linkViaPopup":case"linkViaRedirect":return f8;case"reauthViaPopup":case"reauthViaRedirect":return h8;default:Ls(this.auth,"internal-error")}}resolve(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Lte=new Qa(2e3,1e4);var p8="pendingRedirect",Rg=new Map,AE=class n extends DE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return T(this,null,function*(){let e=Rg.get(this.auth._key());if(!e){try{let i=(yield m8(this.resolver,this.auth))?yield ns(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Rg.set(this.auth._key(),e)}return this.bypassAuthState||Rg.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return T(this,null,function*(){if(e.type==="signInViaRedirect")return ns(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ns(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return T(this,null,function*(){})}cleanUp(){}};function m8(n,e){return T(this,null,function*(){let t=v8(e),i=_8(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function g8(n,e){Rg.set(n._key(),e)}function _8(n){return Lo(n._redirectPersistence)}function v8(n){return Pg(p8,n.config.apiKey,n.name)}function y8(n,e,t=!1){return T(this,null,function*(){if(jr(n.app))return Promise.reject(Ns(n));let i=jl(n),r=u8(i,e),a=yield new AE(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var w8=10*60*1e3,ME=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!vR(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(zr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w8&&this.cachedEventUids.clear(),this.cachedEventUids.has(FP(e))}saveEventToCache(e){this.cachedEventUids.add(FP(e)),this.lastProcessedEventTime=Date.now()}};function FP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function b8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vR(n);default:return!1}}function E8(t){return T(this,arguments,function*(n,e={}){return $r(n,"GET","/v1/projects",e)})}var I8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C8=/^https?/;function T8(n){return T(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield E8(n);for(let t of e)try{if(S8(t))return}catch{}Ls(n,"unauthorized-domain")})}function S8(n){let e=dE(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!C8.test(t))return!1;if(I8.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var D8=new Qa(3e4,6e4);function VP(){let n=en().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function A8(n){return new Promise((e,t)=>{var i,r,o;function a(){VP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VP(),t(zr(n,"network-request-failed"))},timeout:D8.get()})}if(!((r=(i=en().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=en().gapi)===null||o===void 0)&&o.load)a();else{let l=cR("iframefcb");return en()[l]=()=>{gapi.load?a():t(zr(n,"network-request-failed"))},aR(`${D$()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw Og=null,e})}var Og=null;function M8(n){return Og=Og||A8(n),Og}var x8=new Qa(5e3,15e3),P8="__/auth/iframe",R8="emulator/auth/iframe",O8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N8(n){let e=n.config;ye(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?OE(e,R8):`https://${n.config.authDomain}/${P8}`,i={apiKey:e.apiKey,appName:n.name,v:Os},r=k8.get(n.config.apiHost);r&&(i.eid=r);let o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Nl(i).slice(1)}`}function L8(n){return T(this,null,function*(){let e=yield M8(n),t=en().gapi;return ye(t,n,"internal-error"),e.open({where:document.body,url:N8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O8,dontclear:!0},i=>new Promise((r,o)=>T(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=zr(n,"network-request-failed"),l=en().setTimeout(()=>{o(a)},x8.get());function u(){en().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{o(a)})})))})}var F8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V8=500,B8=600,U8="_blank",j8="http://localhost",Hg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function z8(n,e,t,i=V8,r=B8){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),l="",u=Object.assign(Object.assign({},F8),{width:i.toString(),height:r.toString(),top:o,left:a}),f=wn().toLowerCase();t&&(l=eR(f)?U8:t),JP(f)&&(e=e||j8,u.scrollbars="yes");let m=Object.entries(u).reduce((E,[b,M])=>`${E}${b}=${M},`,"");if(b$(f)&&l!=="_self")return $8(e||"",l),new Hg(null);let v=window.open(e||"",l,m);ye(v,n,"popup-blocked");try{v.focus()}catch{}return new Hg(v)}function $8(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var H8="__/auth/handler",q8="emulator/auth/handler",G8=encodeURIComponent("fac");function BP(n,e,t,i,r,o){return T(this,null,function*(){ye(n.config.authDomain,n,"auth-domain-config-required"),ye(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Os,eventId:r};if(e instanceof Ug){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",uP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[m,v]of Object.entries(o||{}))a[m]=v}if(e instanceof vE){let m=e.getScopes().filter(v=>v!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);let l=a;for(let m of Object.keys(l))l[m]===void 0&&delete l[m];let u=yield n._getAppCheckToken(),f=u?`#${G8}=${encodeURIComponent(u)}`:"";return`${W8(n)}?${Nl(l).slice(1)}${f}`})}function W8({config:n}){return n.emulator?OE(n,q8):`https://${n.authDomain}/${H8}`}var uE="webStorageSupport",xE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zE,this._completeRedirectFn=y8,this._overrideRedirectResult=g8}_openPopup(e,t,i,r){return T(this,null,function*(){var o;Fs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield BP(e,t,i,dE(),r);return z8(e,a,fR())})}_openRedirect(e,t,i,r){return T(this,null,function*(){yield this._originValidation(e);let o=yield BP(e,t,i,dE(),r);return q$(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(Fs(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return T(this,null,function*(){let t=yield L8(e),i=new ME(e);return t.register("authEvent",r=>(ye(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(uE,{type:uE},r=>{var o;let a=(o=r?.[0])===null||o===void 0?void 0:o[uE];a!==void 0&&t(!!a),Ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=T8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oR()||XP()||FE()}},yR=xE;var UP="@firebase/auth",jP="1.7.9";var PE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function K8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z8(n){Rs(new $i("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;ye(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sR(n)},f=new _E(i,r,o,u);return A$(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Rs(new $i("auth-internal",e=>{let t=jl(e.getProvider("auth").getImmediate());return(i=>new PE(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cn(UP,jP,K8(n)),cn(UP,jP,"esm2017")}var Q8=5*60,Y8=zb("authIdTokenMaxAge")||Q8,zP=null,J8=n=>e=>T(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Y8)return;let r=t?.token;zP!==r&&(zP=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function qE(n=Ll()){let e=rh(n,"auth");if(e.isInitialized())return e.getImmediate();let t=VE(n,{popupRedirectResolver:yR,persistence:[gR,hR,zE]}),i=zb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let a=J8(o.toString());jE(t,a,()=>a(t.currentUser)),Wg(t,l=>a(l))}}let r=Ub("auth");return r&&BE(t,`http://${r}`),t}function X8(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}T$({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=zr("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",X8().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z8("Browser");function bR(n){return new je(function(e){var t=ph(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var ER="auth",St=class{constructor(e){return e}},mh=class{constructor(){return oh(ER)}};var GE=new de("angularfire2.auth-instances");function $7(n,e){let t=Dg(ER,n,e);return t&&new St(t)}function H7(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new St(i)}}var q7={provide:mh,deps:[[new Mn,GE]]},G7={provide:St,useFactory:$7,deps:[[new Mn,GE],ko]};function IR(n,...e){return cn("angularfire",Ka.full,"auth"),or([G7,q7,{provide:GE,useFactory:H7(n),multi:!0,deps:[ct,Cn,Bl,Za,[new Mn,Vl],...e]}])}var Zg=Nt(bR,!0);var CR=Nt(qE,!0);var TR=Nt(ph,!0);var SR=Nt(HE,!0);var DR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},AR={};var Vs,WE;(function(){var n;function e(R,S){function A(){}A.prototype=S.prototype,R.D=S.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(O,F,V){for(var P=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)P[Dt-2]=arguments[Dt];return S.prototype[F].apply(O,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,S,A){A||(A=0);var O=Array(16);if(typeof S=="string")for(var F=0;16>F;++F)O[F]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(F=0;16>F;++F)O[F]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=R.g[0],A=R.g[1],F=R.g[2];var V=R.g[3],P=S+(V^A&(F^V))+O[0]+3614090360&4294967295;S=A+(P<<7&4294967295|P>>>25),P=V+(F^S&(A^F))+O[1]+3905402710&4294967295,V=S+(P<<12&4294967295|P>>>20),P=F+(A^V&(S^A))+O[2]+606105819&4294967295,F=V+(P<<17&4294967295|P>>>15),P=A+(S^F&(V^S))+O[3]+3250441966&4294967295,A=F+(P<<22&4294967295|P>>>10),P=S+(V^A&(F^V))+O[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=V+(F^S&(A^F))+O[5]+1200080426&4294967295,V=S+(P<<12&4294967295|P>>>20),P=F+(A^V&(S^A))+O[6]+2821735955&4294967295,F=V+(P<<17&4294967295|P>>>15),P=A+(S^F&(V^S))+O[7]+4249261313&4294967295,A=F+(P<<22&4294967295|P>>>10),P=S+(V^A&(F^V))+O[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=V+(F^S&(A^F))+O[9]+2336552879&4294967295,V=S+(P<<12&4294967295|P>>>20),P=F+(A^V&(S^A))+O[10]+4294925233&4294967295,F=V+(P<<17&4294967295|P>>>15),P=A+(S^F&(V^S))+O[11]+2304563134&4294967295,A=F+(P<<22&4294967295|P>>>10),P=S+(V^A&(F^V))+O[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=V+(F^S&(A^F))+O[13]+4254626195&4294967295,V=S+(P<<12&4294967295|P>>>20),P=F+(A^V&(S^A))+O[14]+2792965006&4294967295,F=V+(P<<17&4294967295|P>>>15),P=A+(S^F&(V^S))+O[15]+1236535329&4294967295,A=F+(P<<22&4294967295|P>>>10),P=S+(F^V&(A^F))+O[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=V+(A^F&(S^A))+O[6]+3225465664&4294967295,V=S+(P<<9&4294967295|P>>>23),P=F+(S^A&(V^S))+O[11]+643717713&4294967295,F=V+(P<<14&4294967295|P>>>18),P=A+(V^S&(F^V))+O[0]+3921069994&4294967295,A=F+(P<<20&4294967295|P>>>12),P=S+(F^V&(A^F))+O[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=V+(A^F&(S^A))+O[10]+38016083&4294967295,V=S+(P<<9&4294967295|P>>>23),P=F+(S^A&(V^S))+O[15]+3634488961&4294967295,F=V+(P<<14&4294967295|P>>>18),P=A+(V^S&(F^V))+O[4]+3889429448&4294967295,A=F+(P<<20&4294967295|P>>>12),P=S+(F^V&(A^F))+O[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=V+(A^F&(S^A))+O[14]+3275163606&4294967295,V=S+(P<<9&4294967295|P>>>23),P=F+(S^A&(V^S))+O[3]+4107603335&4294967295,F=V+(P<<14&4294967295|P>>>18),P=A+(V^S&(F^V))+O[8]+1163531501&4294967295,A=F+(P<<20&4294967295|P>>>12),P=S+(F^V&(A^F))+O[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=V+(A^F&(S^A))+O[2]+4243563512&4294967295,V=S+(P<<9&4294967295|P>>>23),P=F+(S^A&(V^S))+O[7]+1735328473&4294967295,F=V+(P<<14&4294967295|P>>>18),P=A+(V^S&(F^V))+O[12]+2368359562&4294967295,A=F+(P<<20&4294967295|P>>>12),P=S+(A^F^V)+O[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=V+(S^A^F)+O[8]+2272392833&4294967295,V=S+(P<<11&4294967295|P>>>21),P=F+(V^S^A)+O[11]+1839030562&4294967295,F=V+(P<<16&4294967295|P>>>16),P=A+(F^V^S)+O[14]+4259657740&4294967295,A=F+(P<<23&4294967295|P>>>9),P=S+(A^F^V)+O[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=V+(S^A^F)+O[4]+1272893353&4294967295,V=S+(P<<11&4294967295|P>>>21),P=F+(V^S^A)+O[7]+4139469664&4294967295,F=V+(P<<16&4294967295|P>>>16),P=A+(F^V^S)+O[10]+3200236656&4294967295,A=F+(P<<23&4294967295|P>>>9),P=S+(A^F^V)+O[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=V+(S^A^F)+O[0]+3936430074&4294967295,V=S+(P<<11&4294967295|P>>>21),P=F+(V^S^A)+O[3]+3572445317&4294967295,F=V+(P<<16&4294967295|P>>>16),P=A+(F^V^S)+O[6]+76029189&4294967295,A=F+(P<<23&4294967295|P>>>9),P=S+(A^F^V)+O[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=V+(S^A^F)+O[12]+3873151461&4294967295,V=S+(P<<11&4294967295|P>>>21),P=F+(V^S^A)+O[15]+530742520&4294967295,F=V+(P<<16&4294967295|P>>>16),P=A+(F^V^S)+O[2]+3299628645&4294967295,A=F+(P<<23&4294967295|P>>>9),P=S+(F^(A|~V))+O[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=V+(A^(S|~F))+O[7]+1126891415&4294967295,V=S+(P<<10&4294967295|P>>>22),P=F+(S^(V|~A))+O[14]+2878612391&4294967295,F=V+(P<<15&4294967295|P>>>17),P=A+(V^(F|~S))+O[5]+4237533241&4294967295,A=F+(P<<21&4294967295|P>>>11),P=S+(F^(A|~V))+O[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=V+(A^(S|~F))+O[3]+2399980690&4294967295,V=S+(P<<10&4294967295|P>>>22),P=F+(S^(V|~A))+O[10]+4293915773&4294967295,F=V+(P<<15&4294967295|P>>>17),P=A+(V^(F|~S))+O[1]+2240044497&4294967295,A=F+(P<<21&4294967295|P>>>11),P=S+(F^(A|~V))+O[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=V+(A^(S|~F))+O[15]+4264355552&4294967295,V=S+(P<<10&4294967295|P>>>22),P=F+(S^(V|~A))+O[6]+2734768916&4294967295,F=V+(P<<15&4294967295|P>>>17),P=A+(V^(F|~S))+O[13]+1309151649&4294967295,A=F+(P<<21&4294967295|P>>>11),P=S+(F^(A|~V))+O[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=V+(A^(S|~F))+O[11]+3174756917&4294967295,V=S+(P<<10&4294967295|P>>>22),P=F+(S^(V|~A))+O[2]+718787259&4294967295,F=V+(P<<15&4294967295|P>>>17),P=A+(V^(F|~S))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(F+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var A=S-this.blockSize,O=this.B,F=this.h,V=0;V<S;){if(F==0)for(;V<=A;)r(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<S;)if(O[F++]=R.charCodeAt(V++),F==this.blockSize){r(this,O),F=0;break}}else for(;V<S;)if(O[F++]=R[V++],F==this.blockSize){r(this,O),F=0;break}}this.h=F,this.o+=S},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var A=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=A&255,A/=256;for(this.u(R),R=Array(16),S=A=0;4>S;++S)for(var O=0;32>O;O+=8)R[A++]=this.g[S]>>>O&255;return R};function o(R,S){var A=l;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=S(R)}function a(R,S){this.h=S;for(var A=[],O=!0,F=R.length-1;0<=F;F--){var V=R[F]|0;O&&V==S||(A[F]=V,O=!1)}this.g=A}var l={};function u(R){return-128<=R&&128>R?o(R,function(S){return new a([S|0],0>S?-1:0)}):new a([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return v;if(0>R)return N(f(-R));for(var S=[],A=1,O=0;R>=A;O++)S[O]=R/A|0,A*=4294967296;return new a(S,0)}function m(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return N(m(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=f(Math.pow(S,8)),O=v,F=0;F<R.length;F+=8){var V=Math.min(8,R.length-F),P=parseInt(R.substring(F,F+V),S);8>V?(V=f(Math.pow(S,V)),O=O.j(V).add(f(P))):(O=O.j(A),O=O.add(f(P)))}return O}var v=u(0),E=u(1),b=u(16777216);n=a.prototype,n.m=function(){if(k(this))return-N(this).m();for(var R=0,S=1,A=0;A<this.g.length;A++){var O=this.i(A);R+=(0<=O?O:4294967296+O)*S,S*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M(this))return"0";if(k(this))return"-"+N(this).toString(R);for(var S=f(Math.pow(R,6)),A=this,O="";;){var F=ue(A,S).g;A=G(A,F.j(S));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=F,M(A))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function M(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function k(R){return R.h==-1}n.l=function(R){return R=G(this,R),k(R)?-1:M(R)?0:1};function N(R){for(var S=R.g.length,A=[],O=0;O<S;O++)A[O]=~R.g[O];return new a(A,~R.h).add(E)}n.abs=function(){return k(this)?N(this):this},n.add=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],O=0,F=0;F<=S;F++){var V=O+(this.i(F)&65535)+(R.i(F)&65535),P=(V>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);O=P>>>16,V&=65535,P&=65535,A[F]=P<<16|V}return new a(A,A[A.length-1]&-2147483648?-1:0)};function G(R,S){return R.add(N(S))}n.j=function(R){if(M(this)||M(R))return v;if(k(this))return k(R)?N(this).j(N(R)):N(N(this).j(R));if(k(R))return N(this.j(N(R)));if(0>this.l(b)&&0>R.l(b))return f(this.m()*R.m());for(var S=this.g.length+R.g.length,A=[],O=0;O<2*S;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(var F=0;F<R.g.length;F++){var V=this.i(O)>>>16,P=this.i(O)&65535,Dt=R.i(F)>>>16,Hn=R.i(F)&65535;A[2*O+2*F]+=P*Hn,te(A,2*O+2*F),A[2*O+2*F+1]+=V*Hn,te(A,2*O+2*F+1),A[2*O+2*F+1]+=P*Dt,te(A,2*O+2*F+1),A[2*O+2*F+2]+=V*Dt,te(A,2*O+2*F+2)}for(O=0;O<S;O++)A[O]=A[2*O+1]<<16|A[2*O];for(O=S;O<2*S;O++)A[O]=0;return new a(A,0)};function te(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function J(R,S){this.g=R,this.h=S}function ue(R,S){if(M(S))throw Error("division by zero");if(M(R))return new J(v,v);if(k(R))return S=ue(N(R),S),new J(N(S.g),N(S.h));if(k(S))return S=ue(R,N(S)),new J(N(S.g),S.h);if(30<R.g.length){if(k(R)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var A=E,O=S;0>=O.l(R);)A=Ne(A),O=Ne(O);var F=he(A,1),V=he(O,1);for(O=he(O,2),A=he(A,2);!M(O);){var P=V.add(O);0>=P.l(R)&&(F=F.add(A),V=P),O=he(O,1),A=he(A,1)}return S=G(R,F.j(S)),new J(F,S)}for(F=v;0<=R.l(S);){for(A=Math.max(1,Math.floor(R.m()/S.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=f(A),P=V.j(S);k(P)||0<P.l(R);)A-=O,V=f(A),P=V.j(S);M(V)&&(V=E),F=F.add(V),R=G(R,P)}return new J(F,R)}n.A=function(R){return ue(this,R).h},n.and=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],O=0;O<S;O++)A[O]=this.i(O)&R.i(O);return new a(A,this.h&R.h)},n.or=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],O=0;O<S;O++)A[O]=this.i(O)|R.i(O);return new a(A,this.h|R.h)},n.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],O=0;O<S;O++)A[O]=this.i(O)^R.i(O);return new a(A,this.h^R.h)};function Ne(R){for(var S=R.g.length+1,A=[],O=0;O<S;O++)A[O]=R.i(O)<<1|R.i(O-1)>>>31;return new a(A,R.h)}function he(R,S){var A=S>>5;S%=32;for(var O=R.g.length-A,F=[],V=0;V<O;V++)F[V]=0<S?R.i(V+A)>>>S|R.i(V+A+1)<<32-S:R.i(V+A);return new a(F,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,WE=AR.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Vs=AR.Integer=a}).apply(typeof DR<"u"?DR:typeof self<"u"?self:typeof window<"u"?window:{});var Qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bo={};var KE,W7,zl,ZE,gh,Yg,QE,YE,JE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qg=="object"&&Qg];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function r(d,g){if(g)e:{var y=i;d=d.split(".");for(var I=0;I<d.length-1;I++){var B=d[I];if(!(B in y))break e;y=y[B]}d=d[d.length-1],I=y[d],g=g(I),g!=I&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,I=!1,B={next:function(){if(!I&&y<d.length){var $=y++;return{value:g($,d[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var a=a||{},l=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function m(d,g,y){return d.call.apply(d.bind,arguments)}function v(d,g,y){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),d.apply(g,B)}}return function(){return d.apply(g,arguments)}}function E(d,g,y){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,E.apply(null,arguments)}function b(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function M(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(I,B,$){for(var re=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)re[qe-2]=arguments[qe];return g.prototype[B].apply(I,re)}}function k(d){let g=d.length;if(0<g){let y=Array(g);for(let I=0;I<g;I++)y[I]=d[I];return y}return[]}function N(d,g){for(let y=1;y<arguments.length;y++){let I=arguments[y];if(u(I)){let B=d.length||0,$=I.length||0;d.length=B+$;for(let re=0;re<$;re++)d[B+re]=I[re]}else d.push(I)}}class G{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function te(d){return/^[\s\xa0]*$/.test(d)}function J(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function ue(d){return ue[" "](d),d}ue[" "]=function(){};var Ne=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function he(d,g,y){for(let I in d)g.call(y,d[I],I,d)}function R(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function S(d){let g={};for(let y in d)g[y]=d[y];return g}let A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(d,g){let y,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(y in I)d[y]=I[y];for(let $=0;$<A.length;$++)y=A[$],Object.prototype.hasOwnProperty.call(I,y)&&(d[y]=I[y])}}function F(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function V(d){l.setTimeout(()=>{throw d},0)}function P(){var d=_e;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Dt{constructor(){this.h=this.g=null}add(g,y){let I=Hn.get();I.set(g,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Hn=new G(()=>new W,d=>d.reset());class W{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,Z=!1,_e=new Dt,Qe=()=>{let d=l.Promise.resolve(void 0);fe=()=>{d.then(Et)}};var Et=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(y){V(y)}var g=Hn;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}Z=!1};function Le(){this.s=this.s,this.C=this.C}Le.prototype.s=!1,Le.prototype.ma=function(){this.s||(this.s=!0,this.N())},Le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};l.addEventListener("test",y,g),l.removeEventListener("test",y,g)}catch{}return d}();function ln(d,g){if(Ie.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(Ne){e:{try{ue(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Si[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ln.aa.h.call(this)}}M(ln,Ie);var Si={2:"touch",3:"pen",4:"mouse"};ln.prototype.h=function(){ln.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),ei=0;function un(d,g,y,I,B){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!I,this.ha=B,this.key=++ei,this.da=this.fa=!1}function kn(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Di(d){this.src=d,this.g={},this.h=0}Di.prototype.add=function(d,g,y,I,B){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var re=_c(d,g,I,B);return-1<re?(g=d[re],y||(g.fa=!1)):(g=new un(g,this.src,$,!!I,B),g.fa=y,d.push(g)),g};function vu(d,g){var y=g.type;if(y in d.g){var I=d.g[y],B=Array.prototype.indexOf.call(I,g,void 0),$;($=0<=B)&&Array.prototype.splice.call(I,B,1),$&&(kn(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function _c(d,g,y,I){for(var B=0;B<d.length;++B){var $=d[B];if(!$.da&&$.listener==g&&$.capture==!!y&&$.ha==I)return B}return-1}var vc="closure_lm_"+(1e6*Math.random()|0),Zs={};function Qs(d,g,y,I,B){if(I&&I.once)return yc(d,g,y,I,B);if(Array.isArray(g)){for(var $=0;$<g.length;$++)Qs(d,g[$],y,I,B);return null}return y=Ec(y),d&&d[Ot]?d.K(g,y,f(I)?!!I.capture:!!I,B):nf(d,g,y,!1,I,B)}function nf(d,g,y,I,B,$){if(!g)throw Error("Invalid event type");var re=f(B)?!!B.capture:!!B,qe=Ys(d);if(qe||(d[vc]=qe=new Di(d)),y=qe.add(g,y,I,re,$),y.proxy)return y;if(I=rf(),y.proxy=I,I.src=d,I.listener=y,d.addEventListener)we||(B=re),B===void 0&&(B=!1),d.addEventListener(g.toString(),I,B);else if(d.attachEvent)d.attachEvent(of(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function rf(){function d(y){return g.call(d.src,d.listener,y)}let g=fv;return d}function yc(d,g,y,I,B){if(Array.isArray(g)){for(var $=0;$<g.length;$++)yc(d,g[$],y,I,B);return null}return y=Ec(y),d&&d[Ot]?d.L(g,y,f(I)?!!I.capture:!!I,B):nf(d,g,y,!0,I,B)}function yu(d,g,y,I,B){if(Array.isArray(g))for(var $=0;$<g.length;$++)yu(d,g[$],y,I,B);else I=f(I)?!!I.capture:!!I,y=Ec(y),d&&d[Ot]?(d=d.i,g=String(g).toString(),g in d.g&&($=d.g[g],y=_c($,y,I,B),-1<y&&(kn($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete d.g[g],d.h--)))):d&&(d=Ys(d))&&(g=d.g[g.toString()],d=-1,g&&(d=_c(g,y,I,B)),(y=-1<d?g[d]:null)&&wc(y))}function wc(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Ot])vu(g.i,d);else{var y=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(y,I,d.capture):g.detachEvent?g.detachEvent(of(y),I):g.addListener&&g.removeListener&&g.removeListener(I),(y=Ys(g))?(vu(y,d),y.h==0&&(y.src=null,g[vc]=null)):kn(d)}}}function of(d){return d in Zs?Zs[d]:Zs[d]="on"+d}function fv(d,g){if(d.da)d=!0;else{g=new ln(g,this);var y=d.listener,I=d.ha||d.src;d.fa&&wc(d),d=y.call(I,g)}return d}function Ys(d){return d=d[vc],d instanceof Di?d:null}var bc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ec(d){return typeof d=="function"?d:(d[bc]||(d[bc]=function(g){return d.handleEvent(g)}),d[bc])}function dn(){Le.call(this),this.i=new Di(this),this.M=this,this.F=null}M(dn,Le),dn.prototype[Ot]=!0,dn.prototype.removeEventListener=function(d,g,y,I){yu(this,d,g,y,I)};function hn(d,g){var y,I=d.F;if(I)for(y=[];I;I=I.F)y.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new Ie(g,d);else if(g instanceof Ie)g.target=g.target||d;else{var B=g;g=new Ie(I,d),O(g,B)}if(B=!0,y)for(var $=y.length-1;0<=$;$--){var re=g.g=y[$];B=Js(re,I,!0,g)&&B}if(re=g.g=d,B=Js(re,I,!0,g)&&B,B=Js(re,I,!1,g)&&B,y)for($=0;$<y.length;$++)re=g.g=y[$],B=Js(re,I,!1,g)&&B}dn.prototype.N=function(){if(dn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],I=0;I<y.length;I++)kn(y[I]);delete d.g[g],d.h--}}this.F=null},dn.prototype.K=function(d,g,y,I){return this.i.add(String(d),g,!1,y,I)},dn.prototype.L=function(d,g,y,I){return this.i.add(String(d),g,!0,y,I)};function Js(d,g,y,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,$=0;$<g.length;++$){var re=g[$];if(re&&!re.da&&re.capture==y){var qe=re.listener,Ft=re.ha||re.src;re.fa&&vu(d.i,re),B=qe.call(Ft,I)!==!1&&B}}return B&&!I.defaultPrevented}function sf(d,g,y){if(typeof d=="function")y&&(d=E(d,y));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(d,g||0)}function wu(d){d.g=sf(()=>{d.g=null,d.i&&(d.i=!1,wu(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class bu extends Le{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:wu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qo(d){Le.call(this),this.h=d,this.g={}}M(qo,Le);var af=[];function Go(d){he(d.g,function(g,y){this.g.hasOwnProperty(y)&&wc(g)},d),d.g={}}qo.prototype.N=function(){qo.aa.N.call(this),Go(this)},qo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eu=l.JSON.stringify,pv=l.JSON.parse,cf=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Ic(){}Ic.prototype.h=null;function Iu(d){return d.h||(d.h=d.i())}function lf(){}var Xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cu(){Ie.call(this,"d")}M(Cu,Ie);function Tu(){Ie.call(this,"c")}M(Tu,Ie);var Jr={},uf=null;function Wo(){return uf=uf||new dn}Jr.La="serverreachability";function df(d){Ie.call(this,Jr.La,d)}M(df,Ie);function ea(d){let g=Wo();hn(g,new df(g))}Jr.STAT_EVENT="statevent";function hf(d,g){Ie.call(this,Jr.STAT_EVENT,d),this.stat=g}M(hf,Ie);function En(d){let g=Wo();hn(g,new hf(g,d))}Jr.Ma="timingevent";function ti(d,g){Ie.call(this,Jr.Ma,d),this.size=g}M(ti,Ie);function pe(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},g)}function Ko(){this.g=!0}Ko.prototype.xa=function(){this.g=!1};function ff(d,g,y,I,B,$){d.info(function(){if(d.g)if($)for(var re="",qe=$.split("&"),Ft=0;Ft<qe.length;Ft++){var nt=qe[Ft].split("=");if(1<nt.length){var Mt=nt[0];nt=nt[1];var fn=Mt.split("_");re=2<=fn.length&&fn[1]=="type"?re+(Mt+"="+nt+"&"):re+(Mt+"=redacted&")}}else re=null;else re=$;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+g+`
`+y+`
`+re})}function pf(d,g,y,I,B,$,re){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+g+`
`+y+`
`+$+" "+re})}function Xr(d,g,y,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+mf(d,y)+(I?" "+I:"")})}function Su(d,g){d.info(function(){return"TIMEOUT: "+g})}Ko.prototype.info=function(){};function mf(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var I=y[d];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var re=1;re<B.length;re++)B[re]=""}}}}return Eu(y)}catch{return g}}var Zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Du={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Au;function Cc(){}M(Cc,Ic),Cc.prototype.g=function(){return new XMLHttpRequest},Cc.prototype.i=function(){return{}},Au=new Cc;function pr(d,g,y,I){this.j=d,this.i=g,this.l=y,this.R=I||1,this.U=new qo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gf}function gf(){this.i=null,this.g="",this.h=!1}var Mu={},xu={};function Zo(d,g,y){d.L=1,d.v=Yo(In(g)),d.m=y,d.P=!0,_f(d,null)}function _f(d,g){d.F=Date.now(),Tc(d),d.A=In(d.v);var y=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),wt(y.i,"t",I),d.C=0,y=d.j.J,d.h=new gf,d.g=ha(d.j,y?g:null,!d.m),0<d.O&&(d.M=new bu(E(d.Y,d,d.g),d.O)),g=d.U,y=d.g,I=d.ca;var B="readystatechange";Array.isArray(B)||(B&&(af[0]=B.toString()),B=af);for(var $=0;$<B.length;$++){var re=Qs(y,B[$],I||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),ea(),ff(d.i,d.u,d.A,d.l,d.R,d.m)}pr.prototype.ca=function(d){d=d.target;let g=this.M;g&&ii(d)==3?g.j():this.Y(d)},pr.prototype.Y=function(d){try{if(d==this.g)e:{let fn=ii(this.g);var g=this.g.Ba();let oi=this.g.Z();if(!(3>fn)&&(fn!=3||this.g&&(this.h.h||this.g.oa()||Cf(this.g)))){this.J||fn!=4||g==7||(g==8||0>=oi?ea(3):ea(2)),ta(this);var y=this.g.Z();this.X=y;t:if(vf(this)){var I=Cf(this.g);d="";var B=I.length,$=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mr(this),Qi(this);var re="";break t}this.h.i=new l.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,d+=this.h.i.decode(I[g],{stream:!($&&g==B-1)});I.length=0,this.h.g+=d,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=y==200,pf(this.i,this.u,this.A,this.l,this.R,fn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Ft=this.g;if((qe=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(qe)){var nt=qe;break t}}nt=null}if(y=nt)Xr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sc(this,y);else{this.o=!1,this.s=3,En(12),mr(this),Qi(this);break e}}if(this.P){y=!0;let si;for(;!this.J&&this.C<re.length;)if(si=mv(this,re),si==xu){fn==4&&(this.s=4,En(14),y=!1),Xr(this.i,this.l,null,"[Incomplete Response]");break}else if(si==Mu){this.s=4,En(15),Xr(this.i,this.l,re,"[Invalid Chunk]"),y=!1;break}else Xr(this.i,this.l,si,null),Sc(this,si);if(vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fn!=4||re.length!=0||this.h.h||(this.s=1,En(16),y=!1),this.o=this.o&&y,!y)Xr(this.i,this.l,re,"[Invalid Chunked Response]"),mr(this),Qi(this);else if(0<re.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Rc(Mt),Mt.M=!0,En(11))}}else Xr(this.i,this.l,re,null),Sc(this,re);fn==4&&mr(this),this.o&&!this.J&&(fn==4?Af(this.j,this):(this.o=!1,Tc(this)))}else Tf(this.g),y==400&&0<re.indexOf("Unknown SID")?(this.s=3,En(12)):(this.s=0,En(13)),mr(this),Qi(this)}}}catch{}finally{}};function vf(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function mv(d,g){var y=d.C,I=g.indexOf(`
`,y);return I==-1?xu:(y=Number(g.substring(y,I)),isNaN(y)?Mu:(I+=1,I+y>g.length?xu:(g=g.slice(I,I+y),d.C=I+y,g)))}pr.prototype.cancel=function(){this.J=!0,mr(this)};function Tc(d){d.S=Date.now()+d.I,yf(d,d.I)}function yf(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=pe(E(d.ba,d),g)}function ta(d){d.B&&(l.clearTimeout(d.B),d.B=null)}pr.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Su(this.i,this.A),this.L!=2&&(ea(),En(17)),mr(this),this.s=2,Qi(this)):yf(this,this.S-d)};function Qi(d){d.j.G==0||d.J||Af(d.j,d)}function mr(d){ta(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Go(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Sc(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||gr(y.h,d))){if(!d.K&&gr(y.h,d)&&y.G==3){try{var I=y.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)Oc(y),Mc(y);else break e;zu(y),En(18)}}else y.za=B[1],0<y.za-y.T&&37500>B[2]&&y.F&&y.v==0&&!y.C&&(y.C=pe(E(y.Za,y),6e3));if(1>=ia(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else io(y,11)}else if((d.K||y.g==d)&&Oc(y),!te(g))for(B=y.Da.g.parse(g),g=0;g<B.length;g++){let nt=B[g];if(y.T=nt[0],nt=nt[1],y.G==2)if(nt[0]=="c"){y.K=nt[1],y.ia=nt[2];let Mt=nt[3];Mt!=null&&(y.la=Mt,y.j.info("VER="+y.la));let fn=nt[4];fn!=null&&(y.Aa=fn,y.j.info("SVER="+y.Aa));let oi=nt[5];oi!=null&&typeof oi=="number"&&0<oi&&(I=1.5*oi,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;let si=d.g;if(si){let wr=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wr){var $=I.h;$.g||wr.indexOf("spdy")==-1&&wr.indexOf("quic")==-1&&wr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(_r($,$.h),$.h=null))}if(I.D){let Lc=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;Lc&&(I.ya=Lc,ht(I.I,I.D,Lc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var re=d;if(I.qa=qu(I,I.J?I.ia:null,I.W),re.K){Dc(I.h,re);var qe=re,Ft=I.L;Ft&&(qe.I=Ft),qe.B&&(ta(qe),Tc(qe)),I.g=re}else Pc(I);0<y.i.length&&xc(y)}else nt[0]!="stop"&&nt[0]!="close"||io(y,7);else y.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?io(y,7):da(y):nt[0]!="noop"&&y.l&&y.l.ta(nt),y.v=0)}}ea(4)}catch{}}var na=class{constructor(d,g){this.g=d,this.map=g}};function tt(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function At(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ia(d){return d.h?1:d.g?d.g.size:0}function gr(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function _r(d,g){d.g?d.g.add(g):d.h=g}function Dc(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}tt.prototype.cancel=function(){if(this.i=Fe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Fe(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return k(d.i)}function Ut(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,I=0;I<y;I++)g.push(d[I]);return g}g=[],y=0;for(I in d)g[y++]=d[I];return g}function Pu(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let I in d)g[y++]=I;return g}}}function ra(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=Pu(d),I=Ut(d),B=I.length,$=0;$<B;$++)g.call(void 0,I[$],y&&y[$],d)}var Nn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gv(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var I=d[y].indexOf("="),B=null;if(0<=I){var $=d[y].substring(0,I);B=d[y].substring(I+1)}else $=d[y];g($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ai(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ai){this.h=d.h,kt(this,d.j),this.o=d.o,this.g=d.g,Mi(this,d.s),this.l=d.l;var g=d.i,y=new to;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Qo(this,y),this.m=d.m}else d&&(g=String(d).match(Nn))?(this.h=!1,kt(this,g[1]||"",!0),this.o=Yi(g[2]||""),this.g=Yi(g[3]||"",!0),Mi(this,g[4]),this.l=Yi(g[5]||"",!0),Qo(this,g[6]||"",!0),this.m=Yi(g[7]||"")):(this.h=!1,this.i=new to(null,this.h))}Ai.prototype.toString=function(){var d=[],g=this.j;g&&d.push(eo(g,oa,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(eo(g,oa,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(eo(y,y.charAt(0)=="/"?ku:Ou,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",eo(y,wf)),d.join("")};function In(d){return new Ai(d)}function kt(d,g,y){d.j=y?Yi(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Mi(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Qo(d,g,y){g instanceof to?(d.i=g,Nu(d.i,d.h)):(y||(g=eo(g,Ac)),d.i=new to(g,d.h))}function ht(d,g,y){d.i.set(g,y)}function Yo(d){return ht(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Yi(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function eo(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,Ru),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Ru(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var oa=/[#\/\?@]/g,Ou=/[#\?:]/g,ku=/[#\?]/g,Ac=/[#\?@]/g,wf=/#/g;function to(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function vr(d){d.g||(d.g=new Map,d.h=0,d.i&&gv(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=to.prototype,n.add=function(d,g){vr(this),this.i=null,d=no(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function Pe(d,g){vr(d),g=no(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function ni(d,g){return vr(d),g=no(d,g),d.g.has(g)}n.forEach=function(d,g){vr(this),this.g.forEach(function(y,I){y.forEach(function(B){d.call(g,B,I,this)},this)},this)},n.na=function(){vr(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let I=0;I<g.length;I++){let B=d[I];for(let $=0;$<B.length;$++)y.push(g[I])}return y},n.V=function(d){vr(this);let g=[];if(typeof d=="string")ni(this,d)&&(g=g.concat(this.g.get(no(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},n.set=function(d,g){return vr(this),this.i=null,d=no(this,d),ni(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function wt(d,g,y){Pe(d,g),0<y.length&&(d.i=null,d.g.set(no(d,g),k(y)),d.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var I=g[y];let $=encodeURIComponent(String(I)),re=this.V(I);for(I=0;I<re.length;I++){var B=$;re[I]!==""&&(B+="="+encodeURIComponent(String(re[I]))),d.push(B)}}return this.i=d.join("&")};function no(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Nu(d,g){g&&!d.j&&(vr(d),d.i=null,d.g.forEach(function(y,I){var B=I.toLowerCase();I!=B&&(Pe(this,I),wt(this,B,y))},d)),d.j=g}function Lu(d,g){let y=new Ko;if(l.Image){let I=new Image;I.onload=b(Dn,y,"TestLoadImage: loaded",!0,g,I),I.onerror=b(Dn,y,"TestLoadImage: error",!1,g,I),I.onabort=b(Dn,y,"TestLoadImage: abort",!1,g,I),I.ontimeout=b(Dn,y,"TestLoadImage: timeout",!1,g,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function Fu(d,g){let y=new Ko,I=new AbortController,B=setTimeout(()=>{I.abort(),Dn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then($=>{clearTimeout(B),$.ok?Dn(y,"TestPingServer: ok",!0,g):Dn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Dn(y,"TestPingServer: error",!1,g)})}function Dn(d,g,y,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(y)}catch{}}function Vu(){this.g=new cf}function sa(d,g,y){let I=y||"";try{ra(d,function(B,$){let re=B;f(B)&&(re=Eu(B)),g.push(I+$+"="+encodeURIComponent(re))})}catch(B){throw g.push(I+"type="+encodeURIComponent("_badmap")),B}}function jt(d){this.l=d.Ub||null,this.j=d.eb||!1}M(jt,Ic),jt.prototype.g=function(){return new xi(this.l,this.j)},jt.prototype.i=function(d){return function(){return d}}({});function xi(d,g){dn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(xi,dn),n=xi.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,aa(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jo(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Jo(this):aa(this),this.readyState==3&&Bu(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Jo(this))},n.Qa=function(d){this.g&&(this.response=d,Jo(this))},n.ga=function(){this.g&&Jo(this)};function Jo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,aa(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function aa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Uu(d){let g="";return he(d,function(y,I){g+=I,g+=":",g+=y,g+=`\r
`}),g}function ca(d,g,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Uu(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):ht(d,g,y))}function Lt(d){dn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Lt,dn);var bf=/^https?$/i,Ye=["POST","PUT"];n=Lt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Au.g(),this.v=this.o?Iu(this.o):Iu(Au),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch($){Ef(this,$);return}if(d=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)y.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let $ of I.keys())y.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),B=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ye,g,void 0))||I||B||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[$,re]of y)this.g.setRequestHeader($,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{If(this),this.u=!0,this.g.send(d),this.u=!1}catch($){Ef(this,$)}};function Ef(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,qn(d),la(d)}function qn(d){d.A||(d.A=!0,hn(d,"complete"),hn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,hn(this,"complete"),hn(this,"abort"),la(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),Lt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Xo(this):this.bb())},n.bb=function(){Xo(this)};function Xo(d){if(d.h&&typeof a<"u"&&(!d.v[1]||ii(d)!=4||d.Z()!=2)){if(d.u&&ii(d)==4)sf(d.Ea,0,d);else if(hn(d,"readystatechange"),ii(d)==4){d.h=!1;try{let re=d.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var I;if(I=re===0){var B=String(d.D).match(Nn)[1]||null;!B&&l.self&&l.self.location&&(B=l.self.location.protocol.slice(0,-1)),I=!bf.test(B?B.toLowerCase():"")}y=I}if(y)hn(d,"complete"),hn(d,"success");else{d.m=6;try{var $=2<ii(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",qn(d)}}finally{la(d)}}}}function la(d,g){if(d.g){If(d);let y=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||hn(d,"ready");try{y.onreadystatechange=I}catch{}}}function If(d){d.I&&(l.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function ii(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),pv(g)}};function Cf(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Tf(d){let g={};d=(d.g&&2<=ii(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(te(d[I]))continue;var y=F(d[I]);let B=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let $=g[B]||[];g[B]=$,$.push(y)}R(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function Sf(d){this.Aa=0,this.i=[],this.j=new Ko,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,d),this.cb=ua("retryDelaySeedMs",1e4,d),this.Wa=ua("forwardChannelMaxRetries",2,d),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new tt(d&&d.concurrentRequestLimit),this.Da=new Vu,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sf.prototype,n.la=8,n.G=1,n.connect=function(d,g,y,I){En(0),this.W=d,this.H=g||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=qu(this,null,this.W),xc(this)};function da(d){if(ri(d),d.G==3){var g=d.U++,y=In(d.I);if(ht(y,"SID",d.K),ht(y,"RID",g),ht(y,"TYPE","terminate"),es(d,y),g=new pr(d,d.j,g),g.L=2,g.v=Yo(In(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=g.v,y=!0),y||(g.g=ha(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Tc(g)}Hu(d)}function Mc(d){d.g&&(Rc(d),d.g.cancel(),d.g=null)}function ri(d){Mc(d),d.u&&(l.clearTimeout(d.u),d.u=null),Oc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function xc(d){if(!At(d.h)&&!d.s){d.s=!0;var g=d.Ga;fe||Qe(),Z||(fe(),Z=!0),_e.add(g,d),d.B=0}}function Df(d,g){return ia(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=pe(E(d.Ga,d,g),kc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let B=new pr(this,this.j,d),$=this.o;if(this.S&&($?($=S($),O($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=ju(this,B,g),y=In(this.I),ht(y,"RID",d),ht(y,"CVER",22),this.D&&ht(y,"X-HTTP-Session-Id",this.D),es(this,y),$&&(this.O?g="headers="+encodeURIComponent(String(Uu($)))+"&"+g:this.m&&ca(y,this.m,$)),_r(this.h,B),this.Ua&&ht(y,"TYPE","init"),this.P?(ht(y,"$req",g),ht(y,"SID","null"),B.T=!0,Zo(B,y,null)):Zo(B,y,g),this.G=2}}else this.G==3&&(d?Ji(this,d):this.i.length==0||At(this.h)||Ji(this))};function Ji(d,g){var y;g?y=g.l:y=d.U++;let I=In(d.I);ht(I,"SID",d.K),ht(I,"RID",y),ht(I,"AID",d.T),es(d,I),d.m&&d.o&&ca(I,d.m,d.o),y=new pr(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=ju(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),_r(d.h,y),Zo(y,I,g)}function es(d,g){d.H&&he(d.H,function(y,I){ht(g,I,y)}),d.l&&ra({},function(y,I){ht(g,I,y)})}function ju(d,g,y){y=Math.min(d.i.length,y);var I=d.l?E(d.l.Na,d.l,d):null;e:{var B=d.i;let $=-1;for(;;){let re=["count="+y];$==-1?0<y?($=B[0].g,re.push("ofs="+$)):$=0:re.push("ofs="+$);let qe=!0;for(let Ft=0;Ft<y;Ft++){let nt=B[Ft].g,Mt=B[Ft].map;if(nt-=$,0>nt)$=Math.max(0,B[Ft].g-100),qe=!1;else try{sa(Mt,re,"req"+nt+"_")}catch{I&&I(Mt)}}if(qe){I=re.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,I}function Pc(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;fe||Qe(),Z||(fe(),Z=!0),_e.add(g,d),d.v=0}}function zu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=pe(E(d.Fa,d),kc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,$u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=pe(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,En(10),Mc(this),$u(this))};function Rc(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function $u(d){d.g=new pr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=In(d.qa);ht(g,"RID","rpc"),ht(g,"SID",d.K),ht(g,"AID",d.T),ht(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&ht(g,"TO",d.ja),ht(g,"TYPE","xmlhttp"),es(d,g),d.m&&d.o&&ca(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=Yo(In(g)),y.m=null,y.P=!0,_f(y,d)}n.Za=function(){this.C!=null&&(this.C=null,Mc(this),zu(this),En(19))};function Oc(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Af(d,g){var y=null;if(d.g==g){Oc(d),Rc(d),d.g=null;var I=2}else if(gr(d.h,g))y=g.D,Dc(d.h,g),I=1;else return;if(d.G!=0){if(g.o)if(I==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var B=d.B;I=Wo(),hn(I,new ti(I,y)),xc(d)}else Pc(d);else if(B=g.s,B==3||B==0&&0<g.X||!(I==1&&Df(d,g)||I==2&&zu(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),B){case 1:io(d,5);break;case 4:io(d,10);break;case 3:io(d,6);break;default:io(d,2)}}}function kc(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function io(d,g){if(d.j.info("Error code "+g),g==2){var y=E(d.fb,d),I=d.Xa;let B=!I;I=new Ai(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||kt(I,"https"),Yo(I),B?Lu(I.toString(),y):Fu(I.toString(),y)}else En(2);d.G=0,d.l&&d.l.sa(g),Hu(d),ri(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function Hu(d){if(d.G=0,d.ka=[],d.l){let g=Fe(d.h);(g.length!=0||d.i.length!=0)&&(N(d.ka,g),N(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function qu(d,g,y){var I=y instanceof Ai?In(y):new Ai(y);if(I.g!="")g&&(I.g=g+"."+I.g),Mi(I,I.s);else{var B=l.location;I=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var $=new Ai(null);I&&kt($,I),g&&($.g=g),B&&Mi($,B),y&&($.l=y),I=$}return y=d.D,g=d.ya,y&&g&&ht(I,y,g),ht(I,"VER",d.la),es(d,I),I}function ha(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Lt(new jt({eb:y})):new Lt(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yr(){}n=yr.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Nc(){}Nc.prototype.g=function(d,g){return new on(d,g)};function on(d,g){dn.call(this),this.g=new Sf(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!te(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!te(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new ro(this)}M(on,dn),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){da(this.g)},on.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=Eu(d),d=y);g.i.push(new na(g.Ya++,d)),g.G==3&&xc(g)},on.prototype.N=function(){this.g.l=null,delete this.j,da(this.g),delete this.g,on.aa.N.call(this)};function Ln(d){Cu.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}M(Ln,Cu);function Gu(){Tu.call(this),this.status=1}M(Gu,Tu);function ro(d){this.g=d}M(ro,yr),ro.prototype.ua=function(){hn(this.g,"a")},ro.prototype.ta=function(d){hn(this.g,new Ln(d))},ro.prototype.sa=function(d){hn(this.g,new Gu)},ro.prototype.ra=function(){hn(this.g,"b")},Nc.prototype.createWebChannel=Nc.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,JE=Bo.createWebChannelTransport=function(){return new Nc},YE=Bo.getStatEventTarget=function(){return Wo()},QE=Bo.Event=Jr,Yg=Bo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zi.NO_ERROR=0,Zi.TIMEOUT=8,Zi.HTTP_ERROR=6,gh=Bo.ErrorCode=Zi,Du.COMPLETE="complete",ZE=Bo.EventType=Du,lf.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",dn.prototype.listen=dn.prototype.K,zl=Bo.WebChannel=lf,W7=Bo.FetchXmlHttpFactory=jt,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,KE=Bo.XhrIo=Lt}).apply(typeof Qg<"u"?Qg:typeof self<"u"?self:typeof window<"u"?window:{});var MR="@firebase/firestore";var bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");var au="10.14.0";var nc=new xs("@firebase/firestore");function _h(){return nc.logLevel}function ge(n,...e){if(nc.logLevel<=Xe.DEBUG){let t=e.map(FC);nc.debug(`Firestore (${au}): ${n}`,...t)}}function jo(n,...e){if(nc.logLevel<=Xe.ERROR){let t=e.map(FC);nc.error(`Firestore (${au}): ${n}`,...t)}}function Ql(n,...e){if(nc.logLevel<=Xe.WARN){let t=e.map(FC);nc.warn(`Firestore (${au}): ${n}`,...t)}}function FC(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Ae(n="Unexpected state"){let e=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: `+n;throw jo(e),new Error(e)}function bt(n,e){n||Ae()}function ke(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},se=class extends bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var dr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var n_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},iI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bn.UNAUTHENTICATED))}shutdown(){}},rI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},oI=class{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0);let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),o=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new dr,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>T(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},l=u=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?l(u):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new dr)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt(typeof i.accessToken=="string"),new n_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string"),new bn(e)}},sI=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},aI=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new sI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},cI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){bt(this.o===void 0);let i=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt(typeof t.token=="string"),this.R=t.token,new cI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function K7(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var i_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=K7(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%e.length))}return i}};function dt(n,e){return n<e?-1:n>e?1:0}function Yl(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var Ht=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ue=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ht(0,0))}static max(){return new n(new Ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var r_=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(),i===void 0?i=e.length-t:i>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=e.get(r),a=t.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Bt=class n extends r_{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new se(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},Z7=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ii=class n extends r_{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return Z7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},a=!1;for(;r<e.length;){let l=e[r];if(l==="\\"){if(r+1===e.length)throw new se(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new se(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(o(),r++)}if(o(),a)throw new se(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ce=class n{constructor(e){this.path=e}static fromPath(e){return new n(Bt.fromString(e))}static fromName(e){return new n(Bt.fromString(e).popFirst(5))}static empty(){return new n(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Bt(e.slice()))}};var uI=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};uI.UNKNOWN_ID=-1;function Q7(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ue.fromTimestamp(i===1e9?new Ht(t+1,0):new Ht(t,i));return new ic(r,Ce.empty(),e)}function Y7(n){return new ic(n.readTime,n.key,-1)}var ic=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Ue.min(),Ce.empty(),-1)}static max(){return new n(Ue.max(),Ce.empty(),-1)}};function J7(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:dt(n.largestBatchId,e.largestBatchId))}var X7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",dI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Bh(n){return T(this,null,function*(){if(n.code!==q.FAILED_PRECONDITION||n.message!==X7)throw n;ge("LocalStore","Unexpectedly lost primary lease")})}var ne=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++o,a&&o===r&&t()},u=>i(u))}),a=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,a=new Array(o),l=0;for(let u=0;u<o;u++){let f=u;t(e[f]).next(m=>{a[f]=m,++l,l===o&&i(a)},m=>r(m))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};function e9(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Uh(n){return n.name==="IndexedDbTransactionError"}var lO=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function L_(n){return n==null}function Eh(n){return n===0&&1/n==-1/0}function t9(n){return typeof n=="number"&&Number.isInteger(n)&&!Eh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var n9=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vne=[...n9,"documentOverlays"],i9=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],r9=i9,o9=[...r9,"indexConfiguration","indexState","indexEntries"];var Bne=[...o9,"globals"];function xR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var qt=class n{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gl(this.root,e,this.comparator,!0)}},Gl=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qr=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();let e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}};qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1;qr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,i,r,o){return this}insert(e,t,i){return new qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Rn=class n{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new o_(this.data.getIterator())}getIteratorFrom(e){return new o_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},o_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Hi=class n{constructor(e){this.fields=e,e.sort(Ii.comparator)}static empty(){return new n([])}unionWith(e){let t=new Rn(Ii.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var s_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var On=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new s_("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};On.EMPTY_BYTE_STRING=new On("");var s9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(n){if(bt(!!n),typeof n=="string"){let e=0,t=s9.exec(n);if(bt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Us(n){return typeof n=="string"?On.fromBase64String(n):On.fromUint8Array(n)}function F_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function VC(n){let e=n.mapValue.fields.__previous_value__;return F_(e)?VC(e):e}function Ih(n){let e=zo(n.mapValue.fields.__local_write_time__.timestampValue);return new Ht(e.seconds,e.nanos)}var hI=class{constructor(e,t,i,r,o,a,l,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f}},a_=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Jg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function rc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?F_(n)?4:hO(n)?9007199254740991:dO(n)?10:11:Ae()}function Kr(n,e){if(n===e)return!0;let t=rc(n);if(t!==rc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ih(n).isEqual(Ih(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=zo(r.timestampValue),l=zo(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,o){return Us(r.bytesValue).isEqual(Us(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Vt(r.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(r.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Vt(r.integerValue)===Vt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=Vt(r.doubleValue),l=Vt(o.doubleValue);return a===l?Eh(a)===Eh(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Yl(n.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return function(r,o){let a=r.mapValue.fields||{},l=o.mapValue.fields||{};if(xR(a)!==xR(l))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Kr(a[u],l[u])))return!1;return!0}(n,e);default:return Ae()}}function Ch(n,e){return(n.values||[]).find(t=>Kr(t,e))!==void 0}function Jl(n,e){if(n===e)return 0;let t=rc(n),i=rc(e);if(t!==i)return dt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return dt(n.booleanValue,e.booleanValue);case 2:return function(o,a){let l=Vt(o.integerValue||o.doubleValue),u=Vt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return PR(n.timestampValue,e.timestampValue);case 4:return PR(Ih(n),Ih(e));case 5:return dt(n.stringValue,e.stringValue);case 6:return function(o,a){let l=Us(o),u=Us(a);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let l=o.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){let m=dt(l[f],u[f]);if(m!==0)return m}return dt(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let l=dt(Vt(o.latitude),Vt(a.latitude));return l!==0?l:dt(Vt(o.longitude),Vt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return RR(n.arrayValue,e.arrayValue);case 10:return function(o,a){var l,u,f,m;let v=o.fields||{},E=a.fields||{},b=(l=v.value)===null||l===void 0?void 0:l.arrayValue,M=(u=E.value)===null||u===void 0?void 0:u.arrayValue,k=dt(((f=b?.values)===null||f===void 0?void 0:f.length)||0,((m=M?.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:RR(b,M)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===Jg.mapValue&&a===Jg.mapValue)return 0;if(o===Jg.mapValue)return 1;if(a===Jg.mapValue)return-1;let l=o.fields||{},u=Object.keys(l),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let v=0;v<u.length&&v<m.length;++v){let E=dt(u[v],m[v]);if(E!==0)return E;let b=Jl(l[u[v]],f[m[v]]);if(b!==0)return b}return dt(u.length,m.length)}(n.mapValue,e.mapValue);default:throw Ae()}}function PR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return dt(n,e);let t=zo(n),i=zo(e),r=dt(t.seconds,i.seconds);return r!==0?r:dt(t.nanos,i.nanos)}function RR(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let o=Jl(t[r],i[r]);if(o)return o}return dt(t.length,i.length)}function Xl(n){return fI(n)}function fI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=zo(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Us(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=fI(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${fI(t.fields[a])}`;return r+"}"}(n.mapValue):Ae()}function c_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pI(n){return!!n&&"integerValue"in n}function BC(n){return!!n&&"arrayValue"in n}function OR(n){return!!n&&"nullValue"in n}function kR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function e_(n){return!!n&&"mapValue"in n}function dO(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function yh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return cc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=yh(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ei=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!e_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yh(t)}setAll(e){let t=Ii.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){let u=this.getFieldsMap(t);this.applyChanges(u,i,r),i={},r=[],t=l.popLast()}a?i[l.lastSegment()]=yh(a):r.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());e_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];e_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){cc(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(yh(this.value))}};function fO(n){let e=[];return cc(n.fields,(t,i)=>{let r=new Ii([t]);if(e_(i)){let o=fO(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new Hi(e)}var hr=class n{constructor(e,t,i,r,o,a,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new n(e,0,Ue.min(),Ue.min(),Ue.min(),Ei.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Ue.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Ue.min(),Ue.min(),Ei.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ue.min(),Ue.min(),Ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var js=class{constructor(e,t){this.position=e,this.inclusive=t}};function NR(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],a=n.position[r];if(o.field.isKeyField()?i=Ce.comparator(Ce.fromName(a.referenceValue),t.key):i=Jl(a,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function LR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Kr(n.position[t],e.position[t]))return!1;return!0}var oc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function a9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var l_=class{},rn=class n extends l_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new gI(e,t,i):t==="array-contains"?new yI(e,i):t==="in"?new wI(e,i):t==="not-in"?new bI(e,i):t==="array-contains-any"?new EI(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new _I(e,i):new vI(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Jl(t,this.value)):t!==null&&rc(this.value)===rc(t)&&this.matchesComparison(Jl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fr=class n extends l_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return pO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function pO(n){return n.op==="and"}function mO(n){return c9(n)&&pO(n)}function c9(n){for(let e of n.filters)if(e instanceof fr)return!1;return!0}function mI(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+Xl(n.value);if(mO(n))return n.filters.map(e=>mI(e)).join(",");{let e=n.filters.map(t=>mI(t)).join(",");return`${n.op}(${e})`}}function gO(n,e){return n instanceof rn?function(i,r){return r instanceof rn&&i.op===r.op&&i.field.isEqual(r.field)&&Kr(i.value,r.value)}(n,e):n instanceof fr?function(i,r){return r instanceof fr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,l)=>o&&gO(a,r.filters[l]),!0):!1}(n,e):void Ae()}function _O(n){return n instanceof rn?function(t){return`${t.field.canonicalString()} ${t.op} ${Xl(t.value)}`}(n):n instanceof fr?function(t){return t.op.toString()+" {"+t.getFilters().map(_O).join(" ,")+"}"}(n):"Filter"}var gI=class extends rn{constructor(e,t,i){super(e,t,i),this.key=Ce.fromName(i.referenceValue)}matches(e){let t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}},_I=class extends rn{constructor(e,t){super(e,"in",t),this.keys=vO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},vI=class extends rn{constructor(e,t){super(e,"not-in",t),this.keys=vO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function vO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Ce.fromName(i.referenceValue))}var yI=class extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return BC(t)&&Ch(t.arrayValue,this.value)}},wI=class extends rn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ch(this.value.arrayValue,t)}},bI=class extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Ch(this.value.arrayValue,t)}},EI=class extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!BC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ch(this.value.arrayValue,i))}};var II=class{constructor(e,t=null,i=[],r=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=l,this.ue=null}};function FR(n,e=null,t=[],i=[],r=null,o=null,a=null){return new II(n,e,t,i,r,o,a)}function UC(n){let e=ke(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>mI(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),L_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Xl(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Xl(i)).join(",")),e.ue=t}return e.ue}function jC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!a9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LR(n.startAt,e.startAt)&&LR(n.endAt,e.endAt)}function CI(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var $o=class{constructor(e,t=null,i=[],r=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function l9(n,e,t,i,r,o,a,l){return new $o(n,e,t,i,r,o,a,l)}function V_(n){return new $o(n)}function VR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zC(n){return n.collectionGroup!==null}function Wl(n){let e=ke(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Rn(Ii.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new oc(o,i))}),t.has(Ii.keyField().canonicalString())||e.ce.push(new oc(Ii.keyField(),i))}return e.ce}function Gr(n){let e=ke(n);return e.le||(e.le=u9(e,Wl(n))),e.le}function u9(n,e){if(n.limitType==="F")return FR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new oc(r.field,o)});let t=n.endAt?new js(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new js(n.startAt.position,n.startAt.inclusive):null;return FR(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function TI(n,e){let t=n.filters.concat([e]);return new $o(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function u_(n,e,t){return new $o(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function B_(n,e){return jC(Gr(n),Gr(e))&&n.limitType===e.limitType}function yO(n){return`${UC(Gr(n))}|lt:${n.limitType}`}function $l(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>_O(r)).join(", ")}]`),L_(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Xl(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Xl(r)).join(",")),`Target(${i})`}(Gr(n))}; limitType=${n.limitType})`}function U_(n,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,r){for(let o of Wl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(a,l,u){let f=NR(a,l,u);return a.inclusive?f<=0:f<0}(i.startAt,Wl(i),r)||i.endAt&&!function(a,l,u){let f=NR(a,l,u);return a.inclusive?f>=0:f>0}(i.endAt,Wl(i),r))}(n,e)}function d9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wO(n){return(e,t)=>{let i=!1;for(let r of Wl(n)){let o=h9(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function h9(n,e,t){let i=n.field.isKeyField()?Ce.comparator(e.key,t.key):function(o,a,l){let u=a.data.field(o),f=l.data.field(o);return u!==null&&f!==null?Jl(u,f):Ae()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ae()}}var zs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cc(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return uO(this.inner)}size(){return this.innerSize}};var f9=new qt(Ce.comparator);function Ho(){return f9}var bO=new qt(Ce.comparator);function vh(...n){let e=bO;for(let t of n)e=e.insert(t.key,t);return e}function EO(n){let e=bO;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Xa(){return wh()}function IO(){return wh()}function wh(){return new zs(n=>n.toString(),(n,e)=>n.isEqual(e))}var p9=new qt(Ce.comparator),m9=new Rn(Ce.comparator);function et(...n){let e=m9;for(let t of n)e=e.add(t);return e}var g9=new Rn(dt);function _9(){return g9}function $C(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function CO(n){return{integerValue:""+n}}function TO(n,e){return t9(e)?CO(e):$C(n,e)}var eu=class{constructor(){this._=void 0}};function v9(n,e,t){return n instanceof tu?function(r,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&F_(o)&&(o=VC(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof $s?DO(n,e):n instanceof Hs?AO(n,e):function(r,o){let a=SO(r,o),l=BR(a)+BR(r.Pe);return pI(a)&&pI(r.Pe)?CO(l):$C(r.serializer,l)}(n,e)}function y9(n,e,t){return n instanceof $s?DO(n,e):n instanceof Hs?AO(n,e):t}function SO(n,e){return n instanceof sc?function(i){return pI(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var tu=class extends eu{},$s=class extends eu{constructor(e){super(),this.elements=e}};function DO(n,e){let t=MO(e);for(let i of n.elements)t.some(r=>Kr(r,i))||t.push(i);return{arrayValue:{values:t}}}var Hs=class extends eu{constructor(e){super(),this.elements=e}};function AO(n,e){let t=MO(e);for(let i of n.elements)t=t.filter(r=>!Kr(r,i));return{arrayValue:{values:t}}}var sc=class extends eu{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function BR(n){return Vt(n.integerValue||n.doubleValue)}function MO(n){return BC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Th=class{constructor(e,t){this.field=e,this.transform=t}};function w9(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof $s&&r instanceof $s||i instanceof Hs&&r instanceof Hs?Yl(i.elements,r.elements,Kr):i instanceof sc&&r instanceof sc?Kr(i.Pe,r.Pe):i instanceof tu&&r instanceof tu}(n.transform,e.transform)}var SI=class{constructor(e,t){this.version=e,this.transformResults=t}},Uo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function t_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var nu=class{};function xO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sh(n.key,Uo.none()):new ac(n.key,n.data,Uo.none());{let t=n.data,i=Ei.empty(),r=new Rn(Ii.comparator);for(let o of e.fields)if(!r.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Zr(n.key,i,new Hi(r.toArray()),Uo.none())}}function b9(n,e,t){n instanceof ac?function(r,o,a){let l=r.value.clone(),u=jR(r.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Zr?function(r,o,a){if(!t_(r.precondition,o))return void o.convertToUnknownDocument(a.version);let l=jR(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(PO(r)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function bh(n,e,t,i){return n instanceof ac?function(o,a,l,u){if(!t_(o.precondition,a))return l;let f=o.value.clone(),m=zR(o.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof Zr?function(o,a,l,u){if(!t_(o.precondition,a))return l;let f=zR(o.fieldTransforms,u,a),m=a.data;return m.setAll(PO(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(o,a,l){return t_(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,t)}function E9(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),o=SO(i.transform,r||null);o!=null&&(t===null&&(t=Ei.empty()),t.set(i.field,o))}return t||null}function UR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Yl(i,r,(o,a)=>w9(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ac=class extends nu{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Zr=class extends nu{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function PO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function jR(n,e,t){let i=new Map;bt(n.length===t.length);for(let r=0;r<t.length;r++){let o=n[r],a=o.transform,l=e.data.field(o.field);i.set(o.field,y9(a,l,t[r]))}return i}function zR(n,e,t){let i=new Map;for(let r of n){let o=r.transform,a=t.data.field(r.field);i.set(r.field,v9(o,a,e))}return i}var Sh=class extends nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},DI=class extends nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var AI=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&b9(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=bh(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=bh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=IO();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,l=this.applyToLocalView(a,o.mutatedFields);l=t.has(r.key)?null:l;let u=xO(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Ue.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),et())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,(t,i)=>UR(t,i))&&Yl(this.baseMutations,e.baseMutations,(t,i)=>UR(t,i))}},MI=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){bt(e.mutations.length===i.length);let r=function(){return p9}(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new n(e,t,i,r)}};var xI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var PI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tn,st;function I9(n){switch(n){default:return Ae();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function RO(n){if(n===void 0)return jo("GRPC error has no .code"),q.UNKNOWN;switch(n){case tn.OK:return q.OK;case tn.CANCELLED:return q.CANCELLED;case tn.UNKNOWN:return q.UNKNOWN;case tn.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case tn.INTERNAL:return q.INTERNAL;case tn.UNAVAILABLE:return q.UNAVAILABLE;case tn.UNAUTHENTICATED:return q.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case tn.NOT_FOUND:return q.NOT_FOUND;case tn.ALREADY_EXISTS:return q.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return q.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case tn.ABORTED:return q.ABORTED;case tn.OUT_OF_RANGE:return q.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return q.UNIMPLEMENTED;case tn.DATA_LOSS:return q.DATA_LOSS;default:return Ae()}}(st=tn||(tn={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";var $R=null;function C9(){return new TextEncoder}var T9=new Vs([4294967295,4294967295],0);function HR(n){let e=C9().encode(n),t=new WE;return t.update(e),new Uint8Array(t.digest())}function qR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vs([t,i],0),new Vs([r,o],0)]}var RI=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ec(`Invalid padding: ${t}`);if(i<0)throw new ec(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ec(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ec(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Vs.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Vs.fromNumber(i)));return r.compare(T9)===1&&(r=new Vs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=HR(e),[i,r]=qR(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,r,t);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;let t=HR(e),[i,r]=qR(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},ec=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var d_=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Dh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Ue.min(),r,new qt(dt),Ho(),et())}},Dh=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,et(),et(),et())}};var Kl=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},h_=class{constructor(e,t){this.targetId=e,this.me=t}},f_=class{constructor(e,t,i=On.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},p_=class{constructor(){this.fe=0,this.ge=WR(),this.pe=On.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=et(),t=et(),i=et();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ae()}}),new Dh(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=WR()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},OI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ho(),this.qe=GR(),this.Qe=new qt(dt)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let o=r.target;if(CI(o))if(i===0){let a=new Ce(o.path);this.Ue(t,a,hr.newNoDocument(a,Ue.min()))}else bt(i===1);else{let a=this.Ye(t);if(a!==i){let l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(t);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}$R?.et(function(m,v,E,b,M){var k,N,G,te,J,ue;let Ne={localCacheCount:m,existenceFilterCount:v.count,databaseId:E.database,projectId:E.projectId},he=v.unchangedNames;return he&&(Ne.bloomFilter={applied:M===0,hashCount:(k=he?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(te=(G=(N=he?.bits)===null||N===void 0?void 0:N.bitmap)===null||G===void 0?void 0:G.length)!==null&&te!==void 0?te:0,padding:(ue=(J=he?.bits)===null||J===void 0?void 0:J.padding)!==null&&ue!==void 0?ue:0,mightContain:R=>{var S;return(S=b?.mightContain(R))!==null&&S!==void 0&&S}}),Ne}(a,e.me,this.Le.tt(),l,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,a,l;try{a=Us(i).toUint8Array()}catch(u){if(u instanceof s_)return Ql("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new RI(a,r,o)}catch(u){return Ql(u instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(t,o,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((o,a)=>{let l=this.Je(a);if(l){if(o.current&&CI(l.target)){let u=new Ce(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,hr.newNoDocument(u,e))}o.be&&(t.set(a,o.ve()),o.Ce())}});let i=et();this.qe.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{let f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let r=new d_(e,t,this.Qe,this.ke,i);return this.ke=Ho(),this.qe=GR(),this.Qe=new qt(dt),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new p_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Rn(dt),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new p_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function GR(){return new qt(Ce.comparator)}function WR(){return new qt(Ce.comparator)}var S9={asc:"ASCENDING",desc:"DESCENDING"},D9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A9={and:"AND",or:"OR"},kI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function NI(n,e){return n.useProto3Json||L_(e)?e:{value:e}}function m_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function M9(n,e){return m_(n,e.toTimestamp())}function Wr(n){return bt(!!n),Ue.fromTimestamp(function(t){let i=zo(t);return new Ht(i.seconds,i.nanos)}(n))}function HC(n,e){return LI(n,e).canonicalString()}function LI(n,e){let t=function(r){return new Bt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kO(n){let e=Bt.fromString(n);return bt(BO(e)),e}function FI(n,e){return HC(n.databaseId,e.path)}function XE(n,e){let t=kO(e);if(t.get(1)!==n.databaseId.projectId)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(LO(t))}function NO(n,e){return HC(n.databaseId,e)}function x9(n){let e=kO(n);return e.length===4?Bt.emptyPath():LO(e)}function VI(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LO(n){return bt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function KR(n,e,t){return{name:FI(n,e),fields:t.value.mapValue.fields}}function P9(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(bt(m===void 0||typeof m=="string"),On.fromBase64String(m||"")):(bt(m===void 0||m instanceof Buffer||m instanceof Uint8Array),On.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(f){let m=f.code===void 0?q.UNKNOWN:RO(f.code);return new se(m,f.message||"")}(a);t=new f_(i,r,o,l||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=XE(n,i.document.name),o=Wr(i.document.updateTime),a=i.document.createTime?Wr(i.document.createTime):Ue.min(),l=new Ei({mapValue:{fields:i.document.fields}}),u=hr.newFoundDocument(r,o,a,l),f=i.targetIds||[],m=i.removedTargetIds||[];t=new Kl(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=XE(n,i.document),o=i.readTime?Wr(i.readTime):Ue.min(),a=hr.newNoDocument(r,o),l=i.removedTargetIds||[];t=new Kl([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=XE(n,i.document),o=i.removedTargetIds||[];t=new Kl([],o,r,null)}else{if(!("filter"in e))return Ae();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new PI(r,o),l=i.targetId;t=new h_(l,a)}}return t}function R9(n,e){let t;if(e instanceof ac)t={update:KR(n,e.key,e.value)};else if(e instanceof Sh)t={delete:FI(n,e.key)};else if(e instanceof Zr)t={update:KR(n,e.key,e.data),updateMask:j9(e.fieldMask)};else{if(!(e instanceof DI))return Ae();t={verify:FI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,a){let l=a.transform;if(l instanceof tu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $s)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sc)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Ae()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:M9(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae()}(n,e.precondition)),t}function O9(n,e){return n&&n.length>0?(bt(e!==void 0),n.map(t=>function(r,o){let a=r.updateTime?Wr(r.updateTime):Wr(o);return a.isEqual(Ue.min())&&(a=Wr(o)),new SI(a,r.transformResults||[])}(t,e))):[]}function k9(n,e){return{documents:[NO(n,e.path)]}}function N9(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=NO(n,r);let o=function(f){if(f.length!==0)return VO(fr.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(m=>function(E){return{field:Hl(E.field),direction:V9(E.dir)}}(m))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let l=NI(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:t,parent:r}}function L9(n){let e=x9(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){bt(i===1);let m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(v){let E=FO(v);return E instanceof fr&&mO(E)?E.getFilters():[E]}(t.where));let a=[];t.orderBy&&(a=function(v){return v.map(E=>function(M){return new oc(ql(M.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(E))}(t.orderBy));let l=null;t.limit&&(l=function(v){let E;return E=typeof v=="object"?v.value:v,L_(E)?null:E}(t.limit));let u=null;t.startAt&&(u=function(v){let E=!!v.before,b=v.values||[];return new js(b,E)}(t.startAt));let f=null;return t.endAt&&(f=function(v){let E=!v.before,b=v.values||[];return new js(b,E)}(t.endAt)),l9(e,r,a,o,l,"F",u,f)}function F9(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FO(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=ql(t.unaryFilter.field);return rn.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ql(t.unaryFilter.field);return rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ql(t.unaryFilter.field);return rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=ql(t.unaryFilter.field);return rn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(n):n.fieldFilter!==void 0?function(t){return rn.create(ql(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fr.create(t.compositeFilter.filters.map(i=>FO(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(n):Ae()}function V9(n){return S9[n]}function B9(n){return D9[n]}function U9(n){return A9[n]}function Hl(n){return{fieldPath:n.canonicalString()}}function ql(n){return Ii.fromServerFormat(n.fieldPath)}function VO(n){return n instanceof rn?function(t){if(t.op==="=="){if(kR(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NAN"}};if(OR(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kR(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NAN"}};if(OR(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(t.field),op:B9(t.op),value:t.value}}}(n):n instanceof fr?function(t){let i=t.getFilters().map(r=>VO(r));return i.length===1?i[0]:{compositeFilter:{op:U9(t.op),filters:i}}}(n):Ae()}function j9(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ah=class n{constructor(e,t,i,r,o=Ue.min(),a=Ue.min(),l=On.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var BI=class{constructor(e){this.ct=e}};function z9(n){let e=L9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?u_(e,e.limit,"L"):e}var g_=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Vt(e.integerValue));else if("doubleValue"in e){let i=Vt(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),Eh(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=zo(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Us(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?hO(e)?this.dt(t,Number.MAX_SAFE_INTEGER):dO(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ae()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let o=e.fields||{};this.dt(t,53);let a="value",l=((r=(i=o[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Vt(l)),this.Vt(a,t),this.Tt(o[a],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),Ce.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};g_.vt=new g_;var UI=class{constructor(){this.un=new jI}addToCollectionParentIndex(e,t){return this.un.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ic.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ic.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}},jI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Rn(Bt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Rn(Bt.comparator)).toArray()}};var jne=new Uint8Array(0);var Hr=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Hr.DEFAULT_COLLECTION_PERCENTILE=10,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hr.DEFAULT=new Hr(41943040,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hr.DISABLED=new Hr(-1,0,0);var Mh=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var zI=class{constructor(){this.changes=new zs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $I=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var HI=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&bh(i.mutation,r,Hi.empty(),Ht.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,et()).next(()=>i))}getLocalViewOfDocuments(e,t,i=et()){let r=Xa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let a=vh();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let i=Xa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,et()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,i,r){let o=Ho(),a=wh(),l=function(){return wh()}();return t.forEach((u,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Zr)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),bh(m.mutation,f,m.mutation.getFieldMask(),Ht.now())):a.set(f.key,Hi.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,m)=>a.set(f,m)),t.forEach((f,m)=>{var v;return l.set(f,new $I(m,(v=a.get(f))!==null&&v!==void 0?v:null))}),l))}recalculateAndSaveOverlays(e,t){let i=wh(),r=new qt((a,l)=>a-l),o=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let l of a)l.keys().forEach(u=>{let f=t.get(u);if(f===null)return;let m=i.get(u)||Hi.empty();m=l.applyToLocalView(f,m),i.set(u,m);let v=(r.get(l.batchId)||et()).add(u);r=r.insert(l.batchId,v)})}).next(()=>{let a=[],l=r.getReverseIterator();for(;l.hasNext();){let u=l.getNext(),f=u.key,m=u.value,v=IO();m.forEach(E=>{if(!o.has(E)){let b=xO(t.get(E),i.get(E));b!==null&&v.set(E,b),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,v))}return ne.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(a){return Ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):ne.resolve(Xa()),l=-1,u=o;return a.next(f=>ne.forEach(f,(m,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),o.get(m)?ne.resolve():this.remoteDocumentCache.getEntry(e,m).next(E=>{u=u.insert(m,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,et())).next(m=>({batchId:l,changes:EO(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(i=>{let r=vh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,a=vh();return this.indexManager.getCollectionParents(e,o).next(l=>ne.forEach(l,u=>{let f=function(v,E){return new $o(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((v,E)=>{a=a.insert(v,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(a=>{o.forEach((u,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,hr.newInvalidDocument(m)))});let l=vh();return a.forEach((u,f)=>{let m=o.get(u);m!==void 0&&bh(m.mutation,f,Hi.empty(),Ht.now()),U_(t,f)&&(l=l.insert(u,f))}),l})}};var qI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ne.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Wr(r.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:z9(r.bundledQuery),readTime:Wr(r.readTime)}}(t)),ne.resolve()}};var GI=class{constructor(){this.overlays=new qt(Ce.comparator),this.Ir=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Xa();return ne.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.ht(e,t,o)}),ne.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){let r=Xa(),o=t.length+1,a=new Ce(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){let u=l.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return ne.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new qt((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Xa(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let l=Xa(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=r)););return ne.resolve(l)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new xI(t,i));let o=this.Ir.get(t);o===void 0&&(o=et(),this.Ir.set(t,o)),this.Ir.set(t,o.add(i.key))}};var WI=class{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}};var xh=class{constructor(){this.Tr=new Rn(nn.Er),this.dr=new Rn(nn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new nn(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new nn(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new Ce(new Bt([])),i=new nn(t,e),r=new nn(t,e+1),o=[];return this.dr.forEachInRange([i,r],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Ce(new Bt([])),i=new nn(t,e),r=new nn(t,e+1),o=et();return this.dr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new nn(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},nn=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ce.comparator(e.key,t.key)||dt(e.wr,t.wr)}static Ar(e,t){return dt(e.wr,t.wr)||Ce.comparator(e.key,t.key)}};var KI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Rn(nn.Er)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new AI(o,t,i,r);this.mutationQueue.push(a);for(let l of r)this.br=this.br.add(new nn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ne.resolve(a)}lookupMutationBatch(e,t){return ne.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),o=r<0?0:r;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new nn(t,0),r=new nn(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],a=>{let l=this.Dr(a.wr);o.push(l)}),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Rn(dt);return t.forEach(r=>{let o=new nn(r,0),a=new nn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],l=>{i=i.add(l.wr)})}),ne.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;Ce.isDocumentKey(o)||(o=o.child(""));let a=new nn(new Ce(o),0),l=new Rn(dt);return this.br.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(u.wr)),!0)},a),ne.resolve(this.Cr(l))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){bt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ne.forEach(t.mutations,r=>{let o=new nn(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new nn(t,0),r=this.br.firstAfterOrEqual(i);return ne.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ZI=class{constructor(e){this.Mr=e,this.docs=function(){return new qt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,a=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():hr.newInvalidDocument(t))}getEntries(e,t){let i=Ho();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():hr.newInvalidDocument(r))}),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Ho(),a=t.path,l=new Ce(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){let{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||J7(Y7(m),i)<=0||(r.has(m.key)||U_(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Ae()}Or(e,t){return ne.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new QI(this)}getSize(e){return ne.resolve(this.size)}},QI=class extends zI{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),ne.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var YI=class{constructor(e){this.persistence=e,this.Nr=new zs(t=>UC(t),jC),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xh,this.targetCount=0,this.kr=Mh.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),ne.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Mh(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Kn(t),ne.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),ne.waitFor(o).next(()=>r)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this.Br.containsKey(t))}};var JI=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new lO(0),this.Kr=!1,this.Kr=!0,this.$r=new WI,this.referenceDelegate=e(this),this.Ur=new YI(this),this.indexManager=new UI,this.remoteDocumentCache=function(r){return new ZI(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new BI(t),this.Gr=new qI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new KI(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);let r=new XI(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,t){return ne.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},XI=class extends dI{constructor(e){super(),this.currentSequenceNumber=e}},eC=class n{constructor(e){this.persistence=e,this.Jr=new xh,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Ae()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,i=>{let r=Ce.fromPath(i);return this.ei(e,r).next(o=>{o||t.removeEntry(r,Ue.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ne.or([()=>ne.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var tC=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=et(),r=et();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var nC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var iC=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cP()?8:e9(wn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.Yi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,t,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new nC;return this.Xi(e,t,a).next(l=>{if(o.result=l,this.zi)return this.es(e,t,a,l.size)})}).next(()=>o.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(_h()<=Xe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",$l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):(_h()<=Xe.DEBUG&&ge("QueryEngine","Query:",$l(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(_h()<=Xe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",$l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):ne.resolve())}Yi(e,t){if(VR(t))return ne.resolve(null);let i=Gr(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=u_(t,null,"F"),i=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=et(...o);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.ts(t,l);return this.ns(t,f,a,u.readTime)?this.Yi(e,u_(t,null,"F")):this.rs(e,f,t,u)}))})))}Zi(e,t,i,r){return VR(t)||r.isEqual(Ue.min())?ne.resolve(null):this.Ji.getDocuments(e,i).next(o=>{let a=this.ts(t,o);return this.ns(t,a,i,r)?ne.resolve(null):(_h()<=Xe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$l(t)),this.rs(e,a,t,Q7(r,-1)).next(l=>l))})}ts(e,t){let i=new Rn(wO(e));return t.forEach((r,o)=>{U_(e,o)&&(i=i.add(o))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,t,i){return _h()<=Xe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",$l(t)),this.Ji.getDocumentsMatchingQuery(e,t,ic.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var rC=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new qt(dt),this._s=new zs(o=>UC(o),jC),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function $9(n,e,t,i){return new rC(n,e,t,i)}function UO(n,e){return T(this,null,function*(){let t=ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],l=[],u=et();for(let f of r){a.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}for(let f of o){l.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}return t.localDocuments.getDocuments(i,u).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:l}))})})})}function H9(n,e){let t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,f,m){let v=f.batch,E=v.keys(),b=ne.resolve();return E.forEach(M=>{b=b.next(()=>m.getEntry(u,M)).next(k=>{let N=f.docVersions.get(M);bt(N!==null),k.version.compareTo(N)<0&&(v.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(u,v))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=et();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function jO(n){let e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function q9(n,e){let t=ke(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let l=[];e.targetChanges.forEach((m,v)=>{let E=r.get(v);if(!E)return;l.push(t.Ur.removeMatchingKeys(o,m.removedDocuments,v).next(()=>t.Ur.addMatchingKeys(o,m.addedDocuments,v)));let b=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(On.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,i)),r=r.insert(v,b),function(k,N,G){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(E,b,m)&&l.push(t.Ur.updateTargetData(o,b))});let u=Ho(),f=et();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),l.push(G9(o,a,e.documentUpdates).next(m=>{u=m.Ps,f=m.Is})),!i.isEqual(Ue.min())){let m=t.Ur.getLastRemoteSnapshotVersion(o).next(v=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(m)}return ne.waitFor(l).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(t.os=r,o))}function G9(n,e,t){let i=et(),r=et();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=Ho();return t.forEach((l,u)=>{let f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Ue.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):ge("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{Ps:a,Is:r}})}function W9(n,e){let t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function K9(n,e){let t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(o=>o?(r=o,ne.resolve(r)):t.Ur.allocateTargetId(i).next(a=>(r=new Ah(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function oC(n,e,t){return T(this,null,function*(){let i=ke(n),r=i.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Uh(a))throw a;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function ZR(n,e,t){let i=ke(n),r=Ue.min(),o=et();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){let v=ke(u),E=v._s.get(m);return E!==void 0?ne.resolve(v.os.get(E)):v.Ur.getTargetData(f,m)}(i,a,Gr(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,t?r:Ue.min(),t?o:et())).next(l=>(Z9(i,d9(e),l),{documents:l,Ts:o})))}function Z9(n,e,t){let i=n.us.get(e)||Ue.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.us.set(e,i)}var __=class{constructor(){this.activeTargetIds=_9()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var sC=class{constructor(){this.so=new __,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new __,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var aC=class{_o(e){}shutdown(){}};var v_=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Xg=null;function eI(){return Xg===null?Xg=function(){return 268435456+Math.round(2147483648*Math.random())}():Xg++,"0x"+Xg.toString(16)}var Q9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var cC=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Pn="WebChannelConnection",lC=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(t,i,r,o,a){let l=eI(),u=this.xo(t,i.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${l}:`,u,r);let f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(t,u,f,r).then(m=>(ge("RestConnection",`Received RPC '${t}' ${l}: `,m),m),m=>{throw Ql("RestConnection",`RPC '${t}' ${l} failed with error: `,m,"url: ",u,"request:",r),m})}Lo(t,i,r,o,a,l){return this.Mo(t,i,r,o,a)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+au}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>t[a]=o),r&&r.headers.forEach((o,a)=>t[a]=o)}xo(t,i){let r=Q9[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let o=eI();return new Promise((a,l)=>{let u=new KE;u.setWithCredentials(!0),u.listenOnce(ZE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case gh.NO_ERROR:let m=u.getResponseJson();ge(Pn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case gh.TIMEOUT:ge(Pn,`RPC '${e}' ${o} timed out`),l(new se(q.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:let v=u.getStatus();if(ge(Pn,`RPC '${e}' ${o} failed with status:`,v,"response text:",u.getResponseText()),v>0){let E=u.getResponseJson();Array.isArray(E)&&(E=E[0]);let b=E?.error;if(b&&b.status&&b.message){let M=function(N){let G=N.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(G)>=0?G:q.UNKNOWN}(b.status);l(new se(M,b.message))}else l(new se(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new se(q.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ge(Pn,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(r);ge(Pn,`RPC '${e}' ${o} sending request:`,r),u.send(t,"POST",f,i,15)})}Bo(e,t,i){let r=eI(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=JE(),l=YE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;let m=o.join("");ge(Pn,`Creating RPC '${e}' stream ${r}: ${m}`,u);let v=a.createWebChannel(m,u),E=!1,b=!1,M=new cC({Io:N=>{b?ge(Pn,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(E||(ge(Pn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),E=!0),ge(Pn,`RPC '${e}' stream ${r} sending:`,N),v.send(N))},To:()=>v.close()}),k=(N,G,te)=>{N.listen(G,J=>{try{te(J)}catch(ue){setTimeout(()=>{throw ue},0)}})};return k(v,zl.EventType.OPEN,()=>{b||(ge(Pn,`RPC '${e}' stream ${r} transport opened.`),M.yo())}),k(v,zl.EventType.CLOSE,()=>{b||(b=!0,ge(Pn,`RPC '${e}' stream ${r} transport closed`),M.So())}),k(v,zl.EventType.ERROR,N=>{b||(b=!0,Ql(Pn,`RPC '${e}' stream ${r} transport errored:`,N),M.So(new se(q.UNAVAILABLE,"The operation could not be completed")))}),k(v,zl.EventType.MESSAGE,N=>{var G;if(!b){let te=N.data[0];bt(!!te);let J=te,ue=J.error||((G=J[0])===null||G===void 0?void 0:G.error);if(ue){ge(Pn,`RPC '${e}' stream ${r} received error:`,ue);let Ne=ue.status,he=function(A){let O=tn[A];if(O!==void 0)return RO(O)}(Ne),R=ue.message;he===void 0&&(he=q.INTERNAL,R="Unknown error status: "+Ne+" with message "+ue.message),b=!0,M.So(new se(he,R)),v.close()}else ge(Pn,`RPC '${e}' stream ${r} received:`,te),M.bo(te)}}),k(l,QE.STAT_EVENT,N=>{N.stat===Yg.PROXY?ge(Pn,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===Yg.NOPROXY&&ge(Pn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{M.wo()},0),M}};function tI(){return typeof document<"u"?document:null}function j_(n){return new kI(n,!0)}var y_=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var w_=class{constructor(e,t,i,r,o,a,l,u){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new y_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return T(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return T(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return T(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(jo(t.toString()),jo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new se(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>T(this,null,function*(){this.state=0,this.start()}))}I_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uC=class extends w_{constructor(e,t,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=P9(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ue.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?Ue.min():a.readTime?Wr(a.readTime):Ue.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=VI(this.serializer),t.addTarget=function(o,a){let l,u=a.target;if(l=CI(u)?{documents:k9(o,u)}:{query:N9(o,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=OO(o,a.resumeToken);let f=NI(o,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(Ue.min())>0){l.readTime=m_(o,a.snapshotVersion.toTimestamp());let f=NI(o,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);let i=F9(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=VI(this.serializer),t.removeTarget=e,this.a_(t)}},dC=class extends w_{constructor(e,t,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return bt(!!e.streamToken),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=O9(e.writeResults,e.commitTime),i=Wr(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=VI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>R9(this.serializer,i))};this.a_(t)}};var hC=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,LI(t,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(q.UNKNOWN,o.toString())})}Lo(e,t,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,LI(t,i),r,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new se(q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},fC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jo(t),this.D_=!1):ge("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var pC=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{i.enqueueAndForget(()=>T(this,null,function*(){lc(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),yield function(u){return T(this,null,function*(){let f=ke(u);f.L_.add(4),yield jh(f),f.q_.set("Unknown"),f.L_.delete(4),yield z_(f)})}(this))}))}),this.q_=new fC(i,r)}};function z_(n){return T(this,null,function*(){if(lc(n))for(let e of n.B_)yield e(!0)})}function jh(n){return T(this,null,function*(){for(let e of n.B_)yield e(!1)})}function zO(n,e){let t=ke(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),KC(t)?WC(t):cu(t).r_()&&GC(t,e))}function qC(n,e){let t=ke(n),i=cu(t);t.N_.delete(e),i.r_()&&$O(t,e),t.N_.size===0&&(i.r_()?i.o_():lc(t)&&t.q_.set("Unknown"))}function GC(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cu(n).A_(e)}function $O(n,e){n.Q_.xe(e),cu(n).R_(e)}function WC(n){n.Q_=new OI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),cu(n).start(),n.q_.v_()}function KC(n){return lc(n)&&!cu(n).n_()&&n.N_.size>0}function lc(n){return ke(n).L_.size===0}function HO(n){n.Q_=void 0}function Y9(n){return T(this,null,function*(){n.q_.set("Online")})}function J9(n){return T(this,null,function*(){n.N_.forEach((e,t)=>{GC(n,e)})})}function X9(n,e){return T(this,null,function*(){HO(n),KC(n)?(n.q_.M_(e),WC(n)):n.q_.set("Unknown")})}function eH(n,e,t){return T(this,null,function*(){if(n.q_.set("Online"),e instanceof f_&&e.state===2&&e.cause)try{yield function(r,o){return T(this,null,function*(){let a=o.cause;for(let l of o.targetIds)r.N_.has(l)&&(yield r.remoteSyncer.rejectListen(l,a),r.N_.delete(l),r.Q_.removeTarget(l))})}(n,e)}catch(i){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield b_(n,i)}else if(e instanceof Kl?n.Q_.Ke(e):e instanceof h_?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ue.min()))try{let i=yield jO(n.localStore);t.compareTo(i)>=0&&(yield function(o,a){let l=o.Q_.rt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let m=o.N_.get(f);m&&o.N_.set(f,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{let m=o.N_.get(u);if(!m)return;o.N_.set(u,m.withResumeToken(On.EMPTY_BYTE_STRING,m.snapshotVersion)),$O(o,u);let v=new Ah(m.target,u,f,m.sequenceNumber);GC(o,v)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){ge("RemoteStore","Failed to raise snapshot:",i),yield b_(n,i)}})}function b_(n,e,t){return T(this,null,function*(){if(!Uh(e))throw e;n.L_.add(1),yield jh(n),n.q_.set("Offline"),t||(t=()=>jO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(this,null,function*(){ge("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield z_(n)}))})}function qO(n,e){return e().catch(t=>b_(n,t,e))}function $_(n){return T(this,null,function*(){let e=ke(n),t=qs(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tH(e);)try{let r=yield W9(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,nH(e,r)}catch(r){yield b_(e,r)}GO(e)&&WO(e)})}function tH(n){return lc(n)&&n.O_.length<10}function nH(n,e){n.O_.push(e);let t=qs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function GO(n){return lc(n)&&!qs(n).n_()&&n.O_.length>0}function WO(n){qs(n).start()}function iH(n){return T(this,null,function*(){qs(n).p_()})}function rH(n){return T(this,null,function*(){let e=qs(n);for(let t of n.O_)e.m_(t.mutations)})}function oH(n,e,t){return T(this,null,function*(){let i=n.O_.shift(),r=MI.from(i,e,t);yield qO(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield $_(n)})}function sH(n,e){return T(this,null,function*(){e&&qs(n).V_&&(yield function(i,r){return T(this,null,function*(){if(function(a){return I9(a)&&a!==q.ABORTED}(r.code)){let o=i.O_.shift();qs(i).s_(),yield qO(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield $_(i)}})}(n,e)),GO(n)&&WO(n)})}function QR(n,e){return T(this,null,function*(){let t=ke(n);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");let i=lc(t);t.L_.add(3),yield jh(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield z_(t)})}function aH(n,e){return T(this,null,function*(){let t=ke(n);e?(t.L_.delete(2),yield z_(t)):e||(t.L_.add(2),yield jh(t),t.q_.set("Unknown"))})}function cu(n){return n.K_||(n.K_=function(t,i,r){let o=ke(t);return o.w_(),new uC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:Y9.bind(null,n),Ro:J9.bind(null,n),mo:X9.bind(null,n),d_:eH.bind(null,n)}),n.B_.push(e=>T(this,null,function*(){e?(n.K_.s_(),KC(n)?WC(n):n.q_.set("Unknown")):(yield n.K_.stop(),HO(n))}))),n.K_}function qs(n){return n.U_||(n.U_=function(t,i,r){let o=ke(t);return o.w_(),new dC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iH.bind(null,n),mo:sH.bind(null,n),f_:rH.bind(null,n),g_:oH.bind(null,n)}),n.B_.push(e=>T(this,null,function*(){e?(n.U_.s_(),yield $_(n)):(yield n.U_.stop(),n.O_.length>0&&(ge("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var mC=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let a=Date.now()+i,l=new n(e,t,a,r,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ZC(n,e){if(jo("AsyncQueue",`${e}: ${n}`),Uh(n))return new se(q.UNAVAILABLE,`${e}: ${n}`);throw n}var E_=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ce.comparator(t.key,i.key):(t,i)=>Ce.comparator(t.key,i.key),this.keyedMap=vh(),this.sortedSet=new qt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var I_=class{constructor(){this.W_=new qt(Ce.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ae():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},iu=class n{constructor(e,t,i,r,o,a,l,u,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){let a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new n(e,t,E_.emptySet(t),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&B_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var gC=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},_C=class{constructor(){this.queries=YR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=ke(t),o=r.queries;r.queries=YR(),o.forEach((a,l)=>{for(let u of l.j_)u.onError(i)})})(this,new se(q.ABORTED,"Firestore shutting down"))}};function YR(){return new zs(n=>yO(n),B_)}function QC(n,e){return T(this,null,function*(){let t=ke(n),i=3,r=e.query,o=t.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new gC,i=e.J_()?0:1);try{switch(i){case 0:o.z_=yield t.onListen(r,!0);break;case 1:o.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(a){let l=ZC(a,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&JC(t)})}function YC(n,e){return T(this,null,function*(){let t=ke(n),i=e.query,r=3,o=t.queries.get(i);if(o){let a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function cH(n,e){let t=ke(n),i=!1;for(let r of e){let o=r.query,a=t.queries.get(o);if(a){for(let l of a.j_)l.X_(r)&&(i=!0);a.z_=r}}i&&JC(t)}function lH(n,e,t){let i=ke(n),r=i.queries.get(e);if(r)for(let o of r.j_)o.onError(t);i.queries.delete(e)}function JC(n){n.Y_.forEach(e=>{e.next()})}var vC,JR;(JR=vC||(vC={})).ea="default",JR.Cache="cache";var Ph=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new iu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vC.Cache}};var C_=class{constructor(e){this.key=e}},T_=class{constructor(e){this.key=e}},yC=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=et(),this.mutatedKeys=et(),this.Aa=wO(e),this.Ra=new E_(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new I_,r=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,a=r,l=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,v)=>{let E=r.get(m),b=U_(this.query,v)?v:null,M=!!E&&this.mutatedKeys.has(E.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),N=!1;E&&b?E.data.isEqual(b.data)?M!==k&&(i.track({type:3,doc:b}),N=!0):this.ga(E,b)||(i.track({type:2,doc:b}),N=!0,(u&&this.Aa(b,u)>0||f&&this.Aa(b,f)<0)&&(l=!0)):!E&&b?(i.track({type:0,doc:b}),N=!0):E&&!b&&(i.track({type:1,doc:E}),N=!0,(u||f)&&(l=!0)),N&&(b?(a=a.add(b),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ra:a,fa:i,ns:l,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((m,v)=>function(b,M){let k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return k(b)-k(M)}(m.type,v.type)||this.Aa(m.doc,v.doc)),this.pa(i),r=r!=null&&r;let l=t&&!r?this.ya():[],u=this.da.size===0&&this.current&&!r?1:0,f=u!==this.Ea;return this.Ea=u,a.length!==0||f?{snapshot:new iu(this.query,e.Ra,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new I_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=et(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new T_(i))}),this.da.forEach(i=>{e.has(i)||t.push(new C_(i))}),t}ba(e){this.Ta=e.Ts,this.da=et();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return iu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},wC=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},bC=class{constructor(e){this.key=e,this.va=!1}},EC=class{constructor(e,t,i,r,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new zs(l=>yO(l),B_),this.Ma=new Map,this.xa=new Set,this.Oa=new qt(Ce.comparator),this.Na=new Map,this.La=new xh,this.Ba={},this.ka=new Map,this.qa=Mh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function uH(n,e,t=!0){return T(this,null,function*(){let i=XO(n),r,o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield KO(i,e,t,!0),r})}function dH(n,e){return T(this,null,function*(){let t=XO(n);yield KO(t,e,!0,!1)})}function KO(n,e,t,i){return T(this,null,function*(){let r=yield K9(n.localStore,Gr(e)),o=r.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),l;return i&&(l=yield hH(n,e,o,a==="current",r.resumeToken)),n.isPrimaryClient&&t&&zO(n.remoteStore,r),l})}function hH(n,e,t,i,r){return T(this,null,function*(){n.Ka=(v,E,b)=>function(k,N,G,te){return T(this,null,function*(){let J=N.view.ma(G);J.ns&&(J=yield ZR(k.localStore,N.query,!1).then(({documents:R})=>N.view.ma(R,J)));let ue=te&&te.targetChanges.get(N.targetId),Ne=te&&te.targetMismatches.get(N.targetId)!=null,he=N.view.applyChanges(J,k.isPrimaryClient,ue,Ne);return eO(k,N.targetId,he.wa),he.snapshot})}(n,v,E,b);let o=yield ZR(n.localStore,e,!0),a=new yC(e,o.Ts),l=a.ma(o.documents),u=Dh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=a.applyChanges(l,n.isPrimaryClient,u);eO(n,t,f.wa);let m=new wC(e,t,a);return n.Fa.set(e,m),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot})}function fH(n,e,t){return T(this,null,function*(){let i=ke(n),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(a=>!B_(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield oC(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&qC(i.remoteStore,r.targetId),IC(i,r.targetId)}).catch(Bh))):(IC(i,r.targetId),yield oC(i.localStore,r.targetId,!0))})}function pH(n,e){return T(this,null,function*(){let t=ke(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),qC(t.remoteStore,i.targetId))})}function mH(n,e,t){return T(this,null,function*(){let i=EH(n);try{let r=yield function(a,l){let u=ke(a),f=Ht.now(),m=l.reduce((b,M)=>b.add(M.key),et()),v,E;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let M=Ho(),k=et();return u.cs.getEntries(b,m).next(N=>{M=N,M.forEach((G,te)=>{te.isValidDocument()||(k=k.add(G))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,M)).next(N=>{v=N;let G=[];for(let te of l){let J=E9(te,v.get(te.key).overlayedDocument);J!=null&&G.push(new Zr(te.key,J,fO(J.value.mapValue),Uo.exists(!0)))}return u.mutationQueue.addMutationBatch(b,f,G,l)}).next(N=>{E=N;let G=N.applyToLocalDocumentSet(v,k);return u.documentOverlayCache.saveOverlays(b,N.batchId,G)})}).then(()=>({batchId:E.batchId,changes:EO(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let f=a.Ba[a.currentUser.toKey()];f||(f=new qt(dt)),f=f.insert(l,u),a.Ba[a.currentUser.toKey()]=f}(i,r.batchId,t),yield zh(i,r.changes),yield $_(i.remoteStore)}catch(r){let o=ZC(r,"Failed to persist write");t.reject(o)}})}function ZO(n,e){return T(this,null,function*(){let t=ke(n);try{let i=yield q9(t.localStore,e);e.targetChanges.forEach((r,o)=>{let a=t.Na.get(o);a&&(bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?bt(a.va):r.removedDocuments.size>0&&(bt(a.va),a.va=!1))}),yield zh(t,i,e)}catch(i){yield Bh(i)}})}function XR(n,e,t){let i=ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((o,a)=>{let l=a.view.Z_(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){let u=ke(a);u.onlineState=l;let f=!1;u.queries.forEach((m,v)=>{for(let E of v.j_)E.Z_(l)&&(f=!0)}),f&&JC(u)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function gH(n,e,t){return T(this,null,function*(){let i=ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),o=r&&r.key;if(o){let a=new qt(Ce.comparator);a=a.insert(o,hr.newNoDocument(o,Ue.min()));let l=et().add(o),u=new d_(Ue.min(),new Map,new qt(dt),a,l);yield ZO(i,u),i.Oa=i.Oa.remove(o),i.Na.delete(e),XC(i)}else yield oC(i.localStore,e,!1).then(()=>IC(i,e,t)).catch(Bh)})}function _H(n,e){return T(this,null,function*(){let t=ke(n),i=e.batch.batchId;try{let r=yield H9(t.localStore,e);YO(t,i,null),QO(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield zh(t,r)}catch(r){yield Bh(r)}})}function vH(n,e,t){return T(this,null,function*(){let i=ke(n);try{let r=yield function(a,l){let u=ke(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,l).next(v=>(bt(v!==null),m=v.keys(),u.mutationQueue.removeMutationBatch(f,v))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,e);YO(i,e,t),QO(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield zh(i,r)}catch(r){yield Bh(r)}})}function QO(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function YO(n,e,t){let i=ke(n),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function IC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||JO(n,i)})}function JO(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(qC(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),XC(n))}function eO(n,e,t){for(let i of t)i instanceof C_?(n.La.addReference(i.key,e),yH(n,i)):i instanceof T_?(ge("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||JO(n,i.key)):Ae()}function yH(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(ge("SyncEngine","New document in limbo: "+t),n.xa.add(i),XC(n))}function XC(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Ce(Bt.fromString(e)),i=n.qa.next();n.Na.set(i,new bC(t)),n.Oa=n.Oa.insert(t,i),zO(n.remoteStore,new Ah(Gr(V_(t.path)),i,"TargetPurposeLimboResolution",lO.oe))}}function zh(n,e,t){return T(this,null,function*(){let i=ke(n),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((l,u)=>{a.push(i.Ka(u,e,t).then(f=>{var m;if((f||t)&&i.isPrimaryClient){let v=f?!f.fromCache:(m=t?.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,v?"current":"not-current")}if(f){r.push(f);let v=tC.Wi(u.targetId,f);o.push(v)}}))}),yield Promise.all(a),i.Ca.d_(r),yield function(u,f){return T(this,null,function*(){let m=ke(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ne.forEach(f,E=>ne.forEach(E.$i,b=>m.persistence.referenceDelegate.addReference(v,E.targetId,b)).next(()=>ne.forEach(E.Ui,b=>m.persistence.referenceDelegate.removeReference(v,E.targetId,b)))))}catch(v){if(!Uh(v))throw v;ge("LocalStore","Failed to update sequence numbers: "+v)}for(let v of f){let E=v.targetId;if(!v.fromCache){let b=m.os.get(E),M=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(M);m.os=m.os.insert(E,k)}}})}(i.localStore,o))})}function wH(n,e){return T(this,null,function*(){let t=ke(n);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());let i=yield UO(t.localStore,e);t.currentUser=e,function(o,a){o.ka.forEach(l=>{l.forEach(u=>{u.reject(new se(q.CANCELLED,a))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield zh(t,i.hs)}})}function bH(n,e){let t=ke(n),i=t.Na.get(e);if(i&&i.va)return et().add(i.key);{let r=et(),o=t.Ma.get(e);if(!o)return r;for(let a of o){let l=t.Fa.get(a);r=r.unionWith(l.view.Va)}return r}}function XO(n){let e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gH.bind(null,e),e.Ca.d_=cH.bind(null,e.eventManager),e.Ca.$a=lH.bind(null,e.eventManager),e}function EH(n){let e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_H.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vH.bind(null,e),e}var tO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=j_(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return $9(this.persistence,new iC,t.initialUser,this.serializer)}Ga(t){return new JI(eC.Zr,this.serializer)}Wa(t){return new sC}terminate(){return T(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var IH=(()=>{class n{initialize(t,i){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wH.bind(null,this.syncEngine),yield aH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new _C}()}createDatastore(t){let i=j_(t.databaseInfo.databaseId),r=function(a){return new lC(a)}(t.databaseInfo);return function(a,l,u,f){return new hC(a,l,u,f)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,o,a,l,u){return new pC(r,o,a,l,u)}(this.localStore,this.datastore,t.asyncQueue,i=>XR(this.syncEngine,i,0),function(){return v_.D()?new v_:new aC}())}createSyncEngine(t,i){return function(o,a,l,u,f,m,v){let E=new EC(o,a,l,u,f,m);return v&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return T(this,null,function*(){var t,i;yield function(o){return T(this,null,function*(){let a=ke(o);ge("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield jh(a),a.k_.shutdown(),a.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Rh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):jo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var CC=class{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=bn.UNAUTHENTICATED,this.clientId=i_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,a=>T(this,null,function*(){ge("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(ge("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=ZC(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function nI(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>T(this,null,function*(){i.isEqual(r)||(yield UO(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function nO(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield CH(n);ge("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>QR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>QR(e.remoteStore,r)),n._onlineComponents=e})}function CH(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Ql("Error using user provided cache. Falling back to memory cache: "+t),yield nI(n,new tO)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),yield nI(n,new tO);return n._offlineComponents})}function ek(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),yield nO(n,n._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),yield nO(n,new IH))),n._onlineComponents})}function TH(n){return ek(n).then(e=>e.syncEngine)}function S_(n){return T(this,null,function*(){let e=yield ek(n),t=e.eventManager;return t.onListen=uH.bind(null,e.syncEngine),t.onUnlisten=fH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pH.bind(null,e.syncEngine),t})}function SH(n,e,t={}){let i=new dr;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(o,a,l,u,f){let m=new Rh({next:E=>{m.Za(),a.enqueueAndForget(()=>YC(o,v));let b=E.docs.has(l);!b&&E.fromCache?f.reject(new se(q.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&E.fromCache&&u&&u.source==="server"?f.reject(new se(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),v=new Ph(V_(l.path),m,{includeMetadataChanges:!0,_a:!0});return QC(o,v)}(yield S_(n),n.asyncQueue,e,t,i)})),i.promise}function DH(n,e,t={}){let i=new dr;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(o,a,l,u,f){let m=new Rh({next:E=>{m.Za(),a.enqueueAndForget(()=>YC(o,v)),E.fromCache&&u.source==="server"?f.reject(new se(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),v=new Ph(l,m,{includeMetadataChanges:!0,_a:!0});return QC(o,v)}(yield S_(n),n.asyncQueue,e,t,i)})),i.promise}function tk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var iO=new Map;function nk(n,e,t){if(!t)throw new se(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AH(n,e,t,i){if(e===!0&&i===!0)throw new se(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rO(n){if(!Ce.isDocumentKey(n))throw new se(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oO(n){if(Ce.isDocumentKey(n))throw new se(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function H_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function qi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=H_(n);throw new se(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function MH(n,e){if(e<=0)throw new se(q.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var D_=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ru=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new iI;switch(i.type){case"firstParty":return new aI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=iO.get(t);i&&(ge("ComponentProvider","Removing Datastore"),iO.delete(t),i.terminate())}(this),Promise.resolve()}};function ik(n,e,t,i={}){var r;let o=(n=qi(n,ru))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=bn.MOCK_USER;else{l=nP(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new se(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new bn(f)}n._authCredentials=new rI(new n_(l,u))}}var Qr=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$n=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Bs=class n extends Qr{constructor(e,t,i){super(e,t,V_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Ce(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function rk(n,e,...t){if(n=Wt(n),nk("collection","path",e),n instanceof ru){let i=Bt.fromString(e,...t);return oO(i),new Bs(n,null,i)}{if(!(n instanceof $n||n instanceof Bs))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Bt.fromString(e,...t));return oO(i),new Bs(n.firestore,null,i)}}function eT(n,e,...t){if(n=Wt(n),arguments.length===1&&(e=i_.newId()),nk("doc","path",e),n instanceof ru){let i=Bt.fromString(e,...t);return rO(i),new $n(n,null,new Ce(i))}{if(!(n instanceof $n||n instanceof Bs))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Bt.fromString(e,...t));return rO(i),new $n(n.firestore,n instanceof Bs?n.converter:null,new Ce(i))}}var A_=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new y_(this,"async_queue_retry"),this.Vu=()=>{let i=tI();i&&ge("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=tI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=tI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return T(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Uh(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw jo("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=mC.createAndSchedule(this,e,t,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&Ae()}verifyOperationInProgress(){}wu(){return T(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function sO(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Yr=class extends ru{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new A_,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new A_(e),this._firestoreClient=void 0,yield e}})}};function ok(n,e){let t=typeof n=="object"?n:Ll(),i=typeof n=="string"?n:e||"(default)",r=rh(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=tP("firestore");o&&ik(r,...o)}return r}function q_(n){if(n._terminated)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xH(n),n._firestoreClient}function xH(n){var e,t,i;let r=n._freezeSettings(),o=function(l,u,f,m){return new hI(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,tk(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new CC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(l){let u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}}(n._componentsProvider))}var Oh=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(On.fromBase64String(e))}catch(t){throw new se(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ou=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gs=class{constructor(e){this._methodName=e}};var kh=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}};var Nh=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}};var PH=/^__.*__$/,TC=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ac(e,this.data,t,this.fieldTransforms)}},M_=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Zr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function sk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}var x_=class n{constructor(e,t,i,r,o,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return R_(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sk(this.Cu)&&PH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},SC=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||j_(e)}Qu(e,t,i,r=!1){return new x_({Cu:e,methodName:t,qu:i,path:Ii.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function G_(n){let e=n._freezeSettings(),t=j_(n._databaseId);return new SC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RH(n,e,t,i,r,o={}){let a=n.Qu(o.merge||o.mergeFields?2:0,e,t,r);tT("Data must be an object, but it was:",a,i);let l=lk(i,a),u,f;if(o.merge)u=new Hi(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let v of o.mergeFields){let E=xC(e,v,t);if(!a.contains(E))throw new se(q.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);dk(m,E)||m.push(E)}u=new Hi(m),f=a.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,f=a.fieldTransforms;return new TC(new Ei(l),u,f)}var P_=class n extends Gs{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function ak(n,e,t){return new x_({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var DC=class n extends Gs{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=ak(this,e,!0),i=this.Ku.map(o=>uc(o,t)),r=new $s(i);return new Th(e.path,r)}isEqual(e){return e instanceof n&&Ro(this.Ku,e.Ku)}},AC=class n extends Gs{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=ak(this,e,!0),i=this.Ku.map(o=>uc(o,t)),r=new Hs(i);return new Th(e.path,r)}isEqual(e){return e instanceof n&&Ro(this.Ku,e.Ku)}},MC=class n extends Gs{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new sc(e.serializer,TO(e.serializer,this.$u));return new Th(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function OH(n,e,t,i){let r=n.Qu(1,e,t);tT("Data must be an object, but it was:",r,i);let o=[],a=Ei.empty();cc(i,(u,f)=>{let m=nT(e,u,t);f=Wt(f);let v=r.Nu(m);if(f instanceof P_)o.push(m);else{let E=uc(f,v);E!=null&&(o.push(m),a.set(m,E))}});let l=new Hi(o);return new M_(a,l,r.fieldTransforms)}function kH(n,e,t,i,r,o){let a=n.Qu(1,e,t),l=[xC(e,i,t)],u=[r];if(o.length%2!=0)throw new se(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)l.push(xC(e,o[E])),u.push(o[E+1]);let f=[],m=Ei.empty();for(let E=l.length-1;E>=0;--E)if(!dk(f,l[E])){let b=l[E],M=u[E];M=Wt(M);let k=a.Nu(b);if(M instanceof P_)f.push(b);else{let N=uc(M,k);N!=null&&(f.push(b),m.set(b,N))}}let v=new Hi(f);return new M_(m,v,a.fieldTransforms)}function ck(n,e,t,i=!1){return uc(t,n.Qu(i?4:3,e))}function uc(n,e){if(uk(n=Wt(n)))return tT("Unsupported field value:",e,n),lk(n,e);if(n instanceof Gs)return function(i,r){if(!sk(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){let o=[],a=0;for(let l of i){let u=uc(l,r.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(n,e)}return function(i,r){if((i=Wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Ht.fromDate(i);return{timestampValue:m_(r.serializer,o)}}if(i instanceof Ht){let o=new Ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:m_(r.serializer,o)}}if(i instanceof kh)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Oh)return{bytesValue:OO(r.serializer,i._byteString)};if(i instanceof $n){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:HC(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Nh)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return $C(l.serializer,u)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${H_(i)}`)}(n,e)}function lk(n,e){let t={};return uO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cc(n,(i,r)=>{let o=uc(r,e.Mu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function uk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof kh||n instanceof Oh||n instanceof $n||n instanceof Gs||n instanceof Nh)}function tT(n,e,t){if(!uk(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=H_(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function xC(n,e,t){if((e=Wt(e))instanceof ou)return e._internalPath;if(typeof e=="string")return nT(n,e);throw R_("Field path arguments must be of type string or ",n,!1,void 0,t)}var NH=new RegExp("[~\\*/\\[\\]]");function nT(n,e,t){if(e.search(NH)>=0)throw R_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ou(...e.split("."))._internalPath}catch{throw R_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function R_(n,e,t,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new se(q.INVALID_ARGUMENT,l+n+u)}function dk(n,e){return n.some(t=>t.isEqual(e))}var Lh=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new PC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(W_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},PC=class extends Lh{data(){return super.data()}};function W_(n,e){return typeof e=="string"?nT(n,e):e instanceof ou?e._internalPath:e._delegate._internalPath}function hk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fh=class{},su=class extends Fh{};function fk(n,e,...t){let i=[];e instanceof Fh&&i.push(e),i=i.concat(t),function(o){let a=o.filter(u=>u instanceof RC).length,l=o.filter(u=>u instanceof O_).length;if(a>1||a>0&&l>0)throw new se(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var O_=class n extends su{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return vk(e._query,t),new Qr(e.firestore,e.converter,TI(e._query,t))}_parse(e){let t=G_(e.firestore);return function(o,a,l,u,f,m,v){let E;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new se(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){cO(v,m);let b=[];for(let M of v)b.push(aO(u,o,M));E={arrayValue:{values:b}}}else E=aO(u,o,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||cO(v,m),E=ck(l,a,v,m==="in"||m==="not-in");return rn.create(f,m,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function pk(n,e,t){let i=e,r=W_("where",n);return O_._create(r,i,t)}var RC=class n extends Fh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:fr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,o){let a=r,l=o.getFlattenedFilters();for(let u of l)vk(a,u),a=TI(a,u)}(e._query,t),new Qr(e.firestore,e.converter,TI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var OC=class n extends su{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,o,a){if(r.startAt!==null)throw new se(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new se(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oc(o,a)}(e._query,this._field,this._direction);return new Qr(e.firestore,e.converter,function(r,o){let a=r.explicitOrderBy.concat([o]);return new $o(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function mk(n,e="asc"){let t=e,i=W_("orderBy",n);return OC._create(i,t)}var kC=class n extends su{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new Qr(e.firestore,e.converter,u_(e._query,this._limit,this._limitType))}};function gk(n){return MH("limit",n),kC._create("limit",n,"F")}var NC=class n extends su{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=LH(e,this.type,this._docOrFields,this._inclusive);return new Qr(e.firestore,e.converter,function(r,o){return new $o(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,t))}};function _k(...n){return NC._create("startAfter",n,!1)}function LH(n,e,t,i){if(t[0]=Wt(t[0]),t[0]instanceof Lh)return function(o,a,l,u,f){if(!u)throw new se(q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);let m=[];for(let v of Wl(o))if(v.field.isKeyField())m.push(c_(a,u.key));else{let E=u.data.field(v.field);if(F_(E))throw new se(q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){let b=v.field.canonicalString();throw new se(q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}m.push(E)}return new js(m,f)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=G_(n.firestore);return function(a,l,u,f,m,v){let E=a.explicitOrderBy;if(m.length>E.length)throw new se(q.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let b=[];for(let M=0;M<m.length;M++){let k=m[M];if(E[M].field.isKeyField()){if(typeof k!="string")throw new se(q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof k}`);if(!zC(a)&&k.indexOf("/")!==-1)throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${k}' contains a slash.`);let N=a.path.child(Bt.fromString(k));if(!Ce.isDocumentKey(N))throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let G=new Ce(N);b.push(c_(l,G))}else{let N=ck(u,f,k);b.push(N)}}return new js(b,v)}(n._query,n.firestore._databaseId,r,e,t,i)}}function aO(n,e,t){if(typeof(t=Wt(t))=="string"){if(t==="")throw new se(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zC(e)&&t.indexOf("/")!==-1)throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Bt.fromString(t));if(!Ce.isDocumentKey(i))throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return c_(n,new Ce(i))}if(t instanceof $n)return c_(n,t._key);throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${H_(t)}.`)}function cO(n,e){if(!Array.isArray(n)||n.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vk(n,e){let t=function(r,o){for(let a of r)for(let l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var LC=class{convertValue(e,t="none"){switch(rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return cc(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,r;let o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>Vt(a.doubleValue));return new Nh(o)}convertGeoPoint(e){return new kh(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=VC(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ih(e));default:return null}}convertTimestamp(e){let t=zo(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Bt.fromString(e);bt(BO(i));let r=new a_(i.get(1),i.get(3)),o=new Ce(i.popFirst(5));return r.isEqual(t)||jo(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function FH(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var tc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},k_=class extends Lh{constructor(e,t,i,r,o,a){super(e,t,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(W_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Zl=class extends k_{data(e={}){return super.data(e)}},N_=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new tc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Zl(this._firestore,this._userDataWriter,i.key,i,new tc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{let u=new Zl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tc(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{let u=new Zl(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tc(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:VH(l.type),doc:u,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function VH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}function yk(n){n=qi(n,$n);let e=qi(n.firestore,Yr);return SH(q_(e),n._key).then(t=>Tk(e,n,t))}var Vh=class extends LC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oh(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}};function wk(n){n=qi(n,Qr);let e=qi(n.firestore,Yr),t=q_(e),i=new Vh(e);return hk(n._query),DH(t,n._query).then(r=>new N_(e,i,n,r))}function bk(n,e,t,...i){n=qi(n,$n);let r=qi(n.firestore,Yr),o=G_(r),a;return a=typeof(e=Wt(e))=="string"||e instanceof ou?kH(o,"updateDoc",n._key,e,t,i):OH(o,"updateDoc",n._key,e),iT(r,[a.toMutation(n._key,Uo.exists(!0))])}function Ek(n){return iT(qi(n.firestore,Yr),[new Sh(n._key,Uo.none())])}function Ik(n,e){let t=qi(n.firestore,Yr),i=eT(n),r=FH(n.converter,e);return iT(t,[RH(G_(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Uo.exists(!1))]).then(()=>i)}function Ck(n,...e){var t,i,r;n=Wt(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||sO(e[a])||(o=e[a],a++);let l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sO(e[a])){let v=e[a];e[a]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[a+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[a+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let u,f,m;if(n instanceof $n)f=qi(n.firestore,Yr),m=V_(n._key.path),u={next:v=>{e[a]&&e[a](Tk(f,n,v))},error:e[a+1],complete:e[a+2]};else{let v=qi(n,Qr);f=qi(v.firestore,Yr),m=v._query;let E=new Vh(f);u={next:b=>{e[a]&&e[a](new N_(f,E,v,b))},error:e[a+1],complete:e[a+2]},hk(n._query)}return function(E,b,M,k){let N=new Rh(k),G=new Ph(b,N,M);return E.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return QC(yield S_(E),G)})),()=>{N.Za(),E.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return YC(yield S_(E),G)}))}}(q_(f),m,l,u)}function iT(n,e){return function(i,r){let o=new dr;return i.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return mH(yield TH(i),r,o)})),o.promise}(q_(n),e)}function Tk(n,e,t){let i=t.docs.get(e._key),r=new Vh(n);return new k_(n,r,e._key,i,new tc(t.hasPendingWrites,t.fromCache),e.converter)}function Sk(...n){return new DC("arrayUnion",n)}function Dk(...n){return new AC("arrayRemove",n)}function Ak(n){return new MC("increment",n)}(function(e,t=!0){(function(r){au=r})(Os),Rs(new $i("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),l=new Yr(new oI(i.getProvider("auth-internal")),new lI(i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new se(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new a_(f.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),cn(MR,"4.7.3",e),cn(MR,"4.7.3","esm2017")})();var dc=class{constructor(e){return e}},Mk="firestore",rT=class{constructor(){return oh(Mk)}};var oT=new de("angularfire2.firestore-instances");function BH(n,e){let t=Dg(Mk,n,e);return t&&new dc(t)}function UH(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new dc(i)}}var jH={provide:rT,deps:[[new Mn,oT]]},zH={provide:dc,useFactory:BH,deps:[[new Mn,oT],ko]};function xk(n,...e){return cn("angularfire",Ka.full,"fst"),or([zH,jH,{provide:oT,useFactory:UH(n),multi:!0,deps:[ct,Cn,Bl,Za,[new Mn,mh],[new Mn,Vl],...e]}])}var Pk=Nt(Ik,!0);var sT=Nt(Dk,!0),aT=Nt(Sk,!0);var lu=Nt(rk,!0);var Rk=Nt(Ek,!0);var hc=Nt(eT,!0);var Ok=Nt(yk,!0);var K_=Nt(wk,!0);var kk=Nt(ok,!0);var Z_=Nt(Ak,!0);var Q_=Nt(gk,!0);var Nk=Nt(Ck,!0);var $h=Nt(mk,!0);var uu=Nt(fk,!0);var Lk=Nt(_k,!0);var fc=Nt(bk,!0);var Fk=Nt(pk,!0);var Hh={production:!1,firebase:{apiKey:"AIzaSyA9H-CYGk2kEsfzKyFMA6cdPQRRQMf750M",authDomain:"bengaluru-swada-1ecca.firebaseapp.com",projectId:"bengaluru-swada-1ecca",storageBucket:"bengaluru-swada-1ecca.firebasestorage.app",messagingSenderId:"831575973864",appId:"1:831575973864:web:8ba5a2fa1e28b9e16bce5d",measurementId:"G-DEZTYKDN53"},cloudflare:{workerUrl:"https://r2-video-uploader.bengaluru-swada.workers.dev",cdnUrl:"https://r2-video-uploader.bengaluru-swada.workers.dev",bucketName:"bengaluru-swada-videos"}};var pc=class{hasShownSplash=!1;markSplashShown(){this.hasShownSplash=!0}shouldShowSplash(){return!this.hasShownSplash}reset(){this.hasShownSplash=!1}},mc=()=>{let n=Q(lt);return Q(pc).shouldShowSplash()?(console.log("[SplashGuard] Redirecting to splash screen"),n.createUrlTree(["/"])):!0};var Y_=class n{constructor(e,t,i){this.router=e;this.auth=t;this.appInit=i}minSplashDuration=3e3;splashStartTime=0;authUnsubscribe;ngOnInit(){this.splashStartTime=Date.now(),console.log("[Splash] Splash screen started at:",new Date().toISOString()),this.authUnsubscribe=TR(this.auth,e=>{let t=Date.now()-this.splashStartTime,i=Math.max(0,this.minSplashDuration-t);console.log(`[Splash] Auth checked. Elapsed: ${t}ms, Waiting additional: ${i}ms`),setTimeout(()=>{this.appInit.markSplashShown(),e?(console.log("[Splash] User is logged in:",e.uid),this.router.navigate(["/main-app"],{replaceUrl:!0})):(console.log("[Splash] User is not logged in, navigating to phone-input"),this.router.navigate(["/phone-input"],{replaceUrl:!0}))},i)})}ngOnDestroy(){this.authUnsubscribe&&this.authUnsubscribe()}static \u0275fac=function(t){return new(t||n)(oe(lt),oe(St),oe(pc))};static \u0275cmp=mt({type:n,selectors:[["app-splash"]],standalone:!0,features:[vt],decls:2,vars:0,consts:[[1,"splash-container"],["src","logo.jpg","alt","Bengaluru Swada Logo",1,"splash-logo"]],template:function(t,i){t&1&&(C(0,"div",0),ie(1,"img",1),D())},dependencies:[Tt],styles:[".splash-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#fff}.splash-logo[_ngcontent-%COMP%]{max-width:80%;max-height:50vh;object-fit:contain;animation:_ngcontent-%COMP%_fadeIn 1.5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}"]})};var qk=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(oe(ka),oe(ar))}}static{this.\u0275dir=Tn({type:n})}}return n})(),Gk=(()=>{class n extends qk{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=yo(n)))(r||n)}})()}static{this.\u0275dir=Tn({type:n,features:[Rr]})}}return n})(),pT=new de("");var qH={provide:pT,useExisting:go(()=>Jn),multi:!0};function GH(){let n=To()?To().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var WH=new de(""),Jn=(()=>{class n extends qk{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!GH())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(oe(ka),oe(ar),oe(WH,8))}}static{this.\u0275dir=Tn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&ae("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[Na([qH]),Rr]})}}return n})();function cT(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function KH(n){return n!=null&&typeof n.length=="number"}var nv=new de(""),ZH=new de("");function QH(n){return e=>{if(cT(e.value)||cT(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function YH(n){return e=>KH(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function JH(n){if(!n)return lT;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(cT(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function lT(n){return null}function Wk(n){return n!=null}function Kk(n){return La(n)?xt(n):n}function Zk(n){let e={};return n.forEach(t=>{e=t!=null?Y(Y({},e),t):e}),Object.keys(e).length===0?null:e}function Qk(n,e){return e.map(t=>t(n))}function XH(n){return!n.validate}function Yk(n){return n.map(e=>XH(e)?e:t=>e.validate(t))}function eq(n){if(!n)return null;let e=n.filter(Wk);return e.length==0?null:function(t){return Zk(Qk(t,e))}}function Jk(n){return n!=null?eq(Yk(n)):null}function tq(n){if(!n)return null;let e=n.filter(Wk);return e.length==0?null:function(t){let i=Qk(t,e).map(Kk);return Wv(i).pipe(Me(Zk))}}function Xk(n){return n!=null?tq(Yk(n)):null}function Vk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nq(n){return n._rawValidators}function iq(n){return n._rawAsyncValidators}function uT(n){return n?Array.isArray(n)?n:[n]:[]}function X_(n,e){return Array.isArray(n)?n.includes(e):n===e}function Bk(n,e){let t=uT(e);return uT(n).forEach(r=>{X_(t,r)||t.push(r)}),t}function Uk(n,e){return uT(e).filter(t=>!X_(n,t))}var ev=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Jk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Xk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},dT=class extends ev{get formDirective(){return null}get path(){return null}},Zh=class extends ev{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},hT=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},rq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},wre=Oe(Y({},rq),{"[class.ng-submitted]":"isSubmitted"}),Gi=(()=>{class n extends hT{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(oe(Zh,2))}}static{this.\u0275dir=Tn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ze("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Rr]})}}return n})();var qh="VALID",J_="INVALID",du="PENDING",Gh="DISABLED",fu=class{},tv=class extends fu{constructor(e,t){super(),this.value=e,this.source=t}},Wh=class extends fu{constructor(e,t){super(),this.pristine=e,this.source=t}},Kh=class extends fu{constructor(e,t){super(),this.touched=e,this.source=t}},hu=class extends fu{constructor(e,t){super(),this.status=e,this.source=t}};function oq(n){return(iv(n)?n.validators:n)||null}function sq(n){return Array.isArray(n)?Jk(n):n||null}function aq(n,e){return(iv(e)?e.asyncValidators:n)||null}function cq(n){return Array.isArray(n)?Xk(n):n||null}function iv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var fT=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=vm(()=>this.statusReactive()),this.statusReactive=fm(void 0),this._pristine=vm(()=>this.pristineReactive()),this.pristineReactive=fm(!0),this._touched=vm(()=>this.touchedReactive()),this.touchedReactive=fm(!1),this._events=new mn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return bs(this.statusReactive)}set status(e){bs(()=>this.statusReactive.set(e))}get valid(){return this.status===qh}get invalid(){return this.status===J_}get pending(){return this.status==du}get disabled(){return this.status===Gh}get enabled(){return this.status!==Gh}get pristine(){return bs(this.pristineReactive)}set pristine(e){bs(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return bs(this.touchedReactive)}set touched(e){bs(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Bk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Uk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Uk(e,this._rawAsyncValidators))}hasValidator(e){return X_(this._rawValidators,e)}hasAsyncValidator(e){return X_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Oe(Y({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Kh(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Kh(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Oe(Y({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Wh(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Wh(!0,i))}markAsPending(e={}){this.status=du;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hu(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Oe(Y({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Gh,this.errors=null,this._forEachChild(r=>{r.disable(Oe(Y({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new tv(this.value,i)),this._events.next(new hu(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Oe(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qh,this._forEachChild(i=>{i.enable(Oe(Y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Oe(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qh||this.status===du)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new tv(this.value,t)),this._events.next(new hu(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Oe(Y({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gh:qh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=du,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=Kk(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new hu(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new rt,this.statusChanges=new rt}_calculateStatus(){return this._allControlsDisabled()?Gh:this.errors?J_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(du)?du:this._anyControlsHaveStatus(J_)?J_:qh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Wh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Kh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){iv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=sq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=cq(this._rawAsyncValidators)}};var eN=new de("CallSetDisabledState",{providedIn:"root",factory:()=>mT}),mT="always";function lq(n,e){return[...e.path,n]}function uq(n,e,t=mT){hq(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),fq(n,e),mq(n,e),pq(n,e),dq(n,e)}function jk(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dq(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function hq(n,e){let t=nq(n);e.validator!==null?n.setValidators(Vk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=iq(n);e.asyncValidator!==null?n.setAsyncValidators(Vk(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();jk(e._rawValidators,r),jk(e._rawAsyncValidators,r)}function fq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&tN(n,e)})}function pq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&tN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function tN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mq(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function gq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function _q(n){return Object.getPrototypeOf(n.constructor)===Gk}function vq(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Jn?t=o:_q(o)?i=o:r=o}),r||i||t||null}function zk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $k(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var yq=class extends fT{constructor(e=null,t,i){super(oq(t),aq(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iv(t)&&(t.nonNullable||t.initialValueIsDefault)&&($k(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){$k(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var wq={provide:Zh,useExisting:go(()=>Ti)},Hk=Promise.resolve(),Ti=(()=>{class n extends Zh{constructor(t,i,r,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new yq,this._registered=!1,this.name="",this.update=new rt,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=vq(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),gq(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Hk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Fa(i);Hk.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?lq(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(oe(dT,9),oe(nv,10),oe(ZH,10),oe(pT,10),oe(pi,8),oe(eN,8))}}static{this.\u0275dir=Tn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Na([wq]),Rr,Ni]})}}return n})();var bq={provide:pT,useExisting:go(()=>gT),multi:!0},gT=(()=>{class n extends Gk{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=yo(n)))(r||n)}})()}static{this.\u0275dir=Tn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&ae("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[Na([bq]),Rr]})}}return n})();function Eq(n){return typeof n=="number"?n:parseInt(n,10)}function Iq(n){return typeof n=="number"?n:parseFloat(n)}var _T=(()=>{class n{constructor(){this._validator=lT}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):lT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Tn({type:n,features:[Ni]})}}return n})();var Cq={provide:nv,useExisting:go(()=>vT),multi:!0},vT=(()=>{class n extends _T{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>Iq(t),this.createValidator=t=>QH(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=yo(n)))(r||n)}})()}static{this.\u0275dir=Tn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Or("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Na([Cq]),Rr]})}}return n})();var Tq={provide:nv,useExisting:go(()=>Qh),multi:!0},Qh=(()=>{class n extends _T{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>Eq(t),this.createValidator=t=>YH(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=yo(n)))(r||n)}})()}static{this.\u0275dir=Tn({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Or("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Na([Tq]),Rr]})}}return n})(),Sq={provide:nv,useExisting:go(()=>yT),multi:!0},yT=(()=>{class n extends _T{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>JH(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=yo(n)))(r||n)}})()}static{this.\u0275dir=Tn({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Or("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[Na([Sq]),Rr]})}}return n})();var Dq=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xr({type:n})}static{this.\u0275inj=Mr({})}}return n})();var Xn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:eN,useValue:t.callSetDisabledState??mT}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=xr({type:n})}static{this.\u0275inj=Mr({imports:[Dq]})}}return n})();var mu=class n{constructor(e){this.auth=e}confirmationResult=null;phoneNumber="";sendOtp(e,t){return T(this,null,function*(){try{let i=yield SR(this.auth,e,t);return this.setConfirmationResult(i),this.setPhoneNumber(e),i}catch(i){throw i}})}setConfirmationResult(e){this.confirmationResult=e}getConfirmationResult(){return this.confirmationResult}setPhoneNumber(e){this.phoneNumber=e}getPhoneNumber(){return this.phoneNumber}static \u0275fac=function(t){return new(t||n)(me(St))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};function Aq(n,e){if(n&1&&(C(0,"div",14)(1,"span"),H(2),D()()),n&2){let t=ve();j(2),ot("\u26A0\uFE0F ",t.error,"")}}function Mq(n,e){n&1&&(C(0,"span"),H(1,"Continue"),D())}function xq(n,e){n&1&&(C(0,"span",15),H(1,"Sending OTP..."),D())}var rv=class n{constructor(e,t,i){this.router=e;this.auth=t;this.phoneAuthService=i}mobile="";valid=!1;loading=!1;error="";recaptchaVerifier;confirmationResult;ngOnInit(){setTimeout(()=>{this.recaptchaVerifier=new Ja(this.auth,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA success"),"expired-callback":()=>this.error="ReCAPTCHA expired. Try again."}),this.recaptchaVerifier.render()})}onInput(){this.valid=/^\d{10}$/.test(this.mobile),this.error=""}continue(){return T(this,null,function*(){if(!(!this.valid||this.loading)){this.loading=!0,this.error="";try{let e="+91"+this.mobile;this.confirmationResult=yield this.phoneAuthService.sendOtp(e,this.recaptchaVerifier),this.router.navigate(["/otp"])}catch(e){console.error(e),e.code==="auth/invalid-phone-number"?this.error="Invalid phone number.":e.code==="auth/too-many-requests"?this.error="Too many attempts. Try again later.":e.code==="auth/quota-exceeded"?this.error="SMS quota exceeded.":e.code==="auth/billing-not-enabled"?this.error="Firebase billing is not enabled. Please enable it in the Firebase Console.":this.error=`Failed to send OTP: ${e.message} (${e.code})`,this.loading=!1}}})}static \u0275fac=function(t){return new(t||n)(oe(lt),oe(St),oe(mu))};static \u0275cmp=mt({type:n,selectors:[["app-phone-input"]],standalone:!0,features:[vt],decls:18,vars:8,consts:[[1,"phone-input-page"],[1,"mobile-input-section"],[1,"mobile-form"],[1,"welcome-text"],[1,"subtitle","light-grey"],[1,"input-container"],[1,"country-code"],["type","tel","id","mobileNumber","placeholder","Enter your mobile number","maxlength","10","pattern","[0-9]{10}",3,"ngModelChange","input","ngModel","disabled"],["class","error-message",4,"ngIf"],[1,"continue-btn",3,"click","disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"privacy-text","light-grey"],["id","recaptcha-container"],[1,"error-message"],[1,"loading-spinner"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),H(4,"Welcome to Bengaluru Swada!"),D(),C(5,"p",4),H(6," Enter your mobile number to discover amazing street food near you "),D(),C(7,"div",5)(8,"div",6),H(9,"+91"),D(),C(10,"input",7),_n("ngModelChange",function(o){return Sn(i.mobile,o)||(i.mobile=o),o}),ae("input",function(){return i.onInput()}),D()(),Re(11,Aq,3,1,"div",8),C(12,"button",9),ae("click",function(){return i.continue()}),Re(13,Mq,2,0,"span",10)(14,xq,2,0,"span",11),D(),C(15,"p",12),H(16," We'll send you an OTP to verify your number. Your privacy is important to us. "),D(),ie(17,"div",13),D()()()),t&2&&(j(10),gn("ngModel",i.mobile),X("disabled",i.loading),j(),X("ngIf",i.error),j(),Ze("active",i.valid&&!i.loading),X("disabled",!i.valid||i.loading),j(),X("ngIf",!i.loading),j(),X("ngIf",i.loading))},dependencies:[Tt,Xt,Xn,Jn,Gi,Qh,yT,Ti],styles:[".mobile-input-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1rem}.welcome-text[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-bottom:1rem}.mobile-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:2rem;line-height:1.5}.input-container[_ngcontent-%COMP%]{display:flex;background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;overflow:hidden;margin:2rem 0}.country-code[_ngcontent-%COMP%]{padding:1rem;border-right:1px solid #e9ecef;font-weight:600}#mobileNumber[_ngcontent-%COMP%]{flex:1;padding:1rem;border:none;outline:none;font-size:1.1rem;background:transparent}#mobileNumber[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#fee;border:1px solid #fcc;border-radius:8px;padding:.75rem 1rem;margin-bottom:1rem;color:#c33;font-size:.9rem;text-align:left}#recaptcha-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1.5rem 0;min-height:78px}.continue-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;font-weight:600;border-radius:12px;border:none;background:#dee2e6;color:#6c757d;margin-bottom:20px;cursor:pointer;transition:all .2s;font-size:1rem}.continue-btn.active[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;box-shadow:0 4px 15px #ff6b354d;transform:translateY(-1px)}.continue-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.privacy-text[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.4}.light-grey[_ngcontent-%COMP%]{color:#6c757d}"]})};var Pq=()=>[0,1,2,3,4,5];function Rq(n,e){if(n&1){let t=gt();C(0,"input",15),_n("ngModelChange",function(r){let o=be(t).index,a=ve();return Sn(a.otp[o],r)||(a.otp[o]=r),Ee(r)}),ae("input",function(){let r=be(t).index,o=ve();return Ee(o.onOtpInput(r))}),D()}if(n&2){let t=e.index,i=ve();Ze("error-border",i.hasError),gn("ngModel",i.otp[t])}}function Oq(n,e){if(n&1&&(C(0,"p",16),H(1,"Resend in "),C(2,"span",17),H(3),D()()),n&2){let t=ve();j(3),ot("",t.countdown,"s")}}function kq(n,e){if(n&1){let t=gt();C(0,"p",18),ae("click",function(){be(t);let r=ve();return Ee(r.resend())}),H(1,"Resend OTP"),D()}}function Nq(n,e){n&1&&(C(0,"div",19)(1,"div",20)(2,"div",21),ie(3,"div",22),D(),C(4,"h2"),H(5,"Verified!"),D()()())}var ov=class n{constructor(e,t,i,r){this.router=e;this.cdr=t;this.phoneAuthService=i;this.auth=r;this.phone=this.phoneAuthService.getPhoneNumber(),this.confirmationResult=this.phoneAuthService.getConfirmationResult(),this.confirmationResult||this.router.navigate(["/phone-input"])}phone="";back=new rt;verified=new rt;otp=["","","","","",""];countdown=30;timerHandle;complete=!1;loading=!1;error="";confirmationResult=null;hasError=!1;isVerified=!1;recaptchaVerifier;ngOnInit(){this.startTimer(),setTimeout(()=>{this.recaptchaVerifier||(this.recaptchaVerifier=new Ja(this.auth,"recaptcha-container-otp",{size:"invisible",callback:()=>{}}))})}startTimer(){clearInterval(this.timerHandle),this.countdown=30,this.timerHandle=setInterval(()=>{this.countdown>0?this.countdown--:clearInterval(this.timerHandle),this.cdr.detectChanges()},1e3)}onOtpInput(e){if(this.complete=this.otp.join("").length===6&&/^\d{6}$/.test(this.otp.join("")),this.error="",this.hasError=!1,this.otp[e]&&e<5){let t=document.querySelectorAll(".otp-input")[e+1];t&&t.focus()}}verify(){return T(this,null,function*(){if(!(!this.complete||this.loading||!this.confirmationResult)){this.loading=!0,this.error="",this.hasError=!1;try{let e=this.otp.join(""),t=yield this.confirmationResult.confirm(e);console.log("User signed in successfully:",t.user),this.isVerified=!0,this.loading=!1,setTimeout(()=>{this.router.navigate(["/location-permission"],{replaceUrl:!0})},2e3)}catch(e){console.error("Error verifying OTP:",e),e.code==="auth/invalid-verification-code"?this.error="Invalid OTP. Please check and try again.":e.code==="auth/code-expired"?this.error="OTP has expired. Please request a new one.":this.error="Verification failed. Please try again.",this.loading=!1,this.hasError=!0,this.otp=["","","","","",""],this.complete=!1}}})}resend(){return T(this,null,function*(){if(!this.loading){this.loading=!0,this.error="";try{console.log("Current stored phone:",this.phone);let e=this.phone;e.startsWith("+")||(e="+91"+e),console.log("Sending OTP to:",e);let t=yield this.phoneAuthService.sendOtp(e,this.recaptchaVerifier);this.confirmationResult=t,this.phoneAuthService.setConfirmationResult(t),this.startTimer(),this.otp=["","","","","",""],this.complete=!1,this.loading=!1}catch(e){console.error("Resend error:",e),this.error="Failed to resend OTP. Try again later.",this.loading=!1}}})}change(){this.router.navigate(["/phone-input"])}static \u0275fac=function(t){return new(t||n)(oe(lt),oe(pi),oe(mu),oe(St))};static \u0275cmp=mt({type:n,selectors:[["app-otp"]],outputs:{back:"back",verified:"verified"},standalone:!0,features:[vt],decls:22,vars:8,consts:[[1,"otp-container"],[1,"otp-section"],[1,"otp-form"],[1,"otp-title"],[1,"otp-subtitle"],[1,"phone-number"],["class","otp-input","type","text","inputmode","numeric","maxlength","1",3,"error-border","ngModel","ngModelChange","input",4,"ngFor","ngForOf"],[1,"verify-btn",3,"click","disabled"],[1,"resend-container"],[1,"resend-text"],["class","timer",4,"ngIf"],["class","resend-link",3,"click",4,"ngIf"],[3,"click"],["id","recaptcha-container-otp"],["class","success-overlay",4,"ngIf"],["type","text","inputmode","numeric","maxlength","1",1,"otp-input",3,"ngModelChange","input","ngModel"],[1,"timer"],[1,"countdown"],[1,"resend-link",3,"click"],[1,"success-overlay"],[1,"success-content"],[1,"checkmark-circle"],[1,"checkmark","draw"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),H(4,"Verify Your Number"),D(),C(5,"p",4),H(6,"We've sent a 6-digit OTP to "),C(7,"span",5),H(8),D()(),C(9,"div",0),Re(10,Rq,1,3,"input",6),D(),C(11,"button",7),ae("click",function(){return i.verify()}),H(12),D(),C(13,"div",8)(14,"p",9),H(15,"Didn't receive OTP?"),D(),Re(16,Oq,4,1,"p",10)(17,kq,2,0,"p",11),D(),C(18,"div",12),ae("click",function(){return i.change()}),H(19,"\u2190 Change Number"),D(),ie(20,"div",13),D()(),Re(21,Nq,6,0,"div",14),D()),t&2&&(j(8),_t(i.phone),j(2),X("ngForOf",k1(7,Pq)),j(),X("disabled",!i.complete||i.loading),j(),ot(" ",i.loading?"Verifying OTP...":"Verify OTP"," "),j(4),X("ngIf",i.countdown>0),j(),X("ngIf",i.countdown===0),j(4),X("ngIf",i.isVerified))},dependencies:[Xn,Jn,Gi,Qh,Ti,Tt,Yn,Xt],styles:['.otp-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1rem;background:#fff;font-family:Poppins,sans-serif}.otp-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.otp-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.otp-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin-bottom:2.5rem}.phone-number[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600}.otp-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-bottom:2rem;width:100%}@media (min-width: 400px){.otp-container[_ngcontent-%COMP%]{gap:1rem}}.otp-input[_ngcontent-%COMP%]{width:100%;max-width:45px;aspect-ratio:1;height:auto;border:1px solid #dee2e6;border-radius:12px;text-align:center;font-size:1.2rem;background:#fff;color:#495057;transition:all .2s;box-shadow:0 2px 5px #00000005;padding:0}@media (min-width: 400px){.otp-input[_ngcontent-%COMP%]{max-width:60px;font-size:1.5rem}}.otp-input[_ngcontent-%COMP%]:focus{border-color:#ff6b35;outline:none;box-shadow:0 0 0 3px #ff6b351a}.error-border[_ngcontent-%COMP%]{border-color:red!important;box-shadow:0 0 0 3px #ff00001a!important}.verify-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;border-radius:12px;border:none;background:#dfe4ea;color:#495057;font-size:1rem;font-weight:600;cursor:not-allowed;margin-bottom:2rem;transition:all .2s}.verify-btn[_ngcontent-%COMP%]:not([disabled]){background:#ff6b35;color:#fff;cursor:pointer;box-shadow:0 4px 10px #ff6b354d}.resend-container[_ngcontent-%COMP%]{margin-bottom:2rem;color:#7f8c8d;font-size:.9rem}.resend-text[_ngcontent-%COMP%]{margin-bottom:.3rem;cursor:pointer;font-size:.9rem;transition:color .2s}.resend-text[_ngcontent-%COMP%]:hover{color:#495057}.timer[_ngcontent-%COMP%]{color:#7f8c8d}.timer[_ngcontent-%COMP%]   .countdown[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600}.resend-link[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600;cursor:pointer;text-decoration:underline}.success-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffffff2;display:flex;justify-content:center;align-items:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.success-content[_ngcontent-%COMP%]{text-align:center}.success-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin:1rem 0 .5rem;font-size:2rem}.success-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d}.checkmark-circle[_ngcontent-%COMP%]{width:80px;height:80px;position:relative;display:inline-block;vertical-align:top;border-radius:50%;background-color:#2ecc71;animation:_ngcontent-%COMP%_scaleIn .3s cubic-bezier(.175,.885,.32,1.275) forwards}.checkmark[_ngcontent-%COMP%]:after{content:"";display:block;width:20px;height:40px;border:solid #fff;border-width:0 4px 4px 0;position:absolute;top:16px;left:28px;transform:rotate(45deg);opacity:0;animation:_ngcontent-%COMP%_checkmark .3s ease-out .3s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_checkmark{0%{opacity:0;height:0}to{opacity:1;height:40px}}']})};var Wi=class n{userLocation=null;locationPromise=null;LOCATION_TIMEOUT_MS=5e3;DEFAULT_LOCATION={latitude:12.9352,longitude:77.6245};AREAS=[{name:"Adugodi",pincode:"560030",lat:12.9716,lng:77.5946},{name:"Agaram",pincode:"560007",lat:12.8431,lng:77.4863},{name:"Air Force Stn. Yelahanka",pincode:"560063",lat:13.1048,lng:77.5763},{name:"Banashankari",pincode:"560050",lat:12.925453,lng:77.546761},{name:"Banashankari 2nd Stage",pincode:"560070",lat:12.9249,lng:77.5662},{name:"Banashankari 3rd Stage",pincode:"560085",lat:12.9216,lng:77.5543},{name:"Banashankari 6th Stage",pincode:"560062",lat:12.8963,lng:77.5353},{name:"Banaswadi",pincode:"560043",lat:13.0159,lng:77.6516},{name:"Basavanapura",pincode:"560036",lat:12.9835,lng:77.6773},{name:"Basaveshwaranagar",pincode:"560079",lat:12.9975,lng:77.5334},{name:"Bellandur",pincode:"560103",lat:12.9304,lng:77.6784},{name:"Bidadi",pincode:"562109",lat:12.8274,lng:77.3971},{name:"Bilekahalli",pincode:"560076",lat:12.8989,lng:77.6103},{name:"Binnamangala",pincode:"560038",lat:12.9837,lng:77.6388},{name:"Bommanahalli",pincode:"560068",lat:12.9082,lng:77.6245},{name:"Bommasandra",pincode:"560099",lat:12.8009,lng:77.699},{name:"Brookefield",pincode:"560037",lat:12.9698,lng:77.7184},{name:"BTM 2nd Stage",pincode:"560076",lat:12.9167,lng:77.6108},{name:"Budigere",pincode:"562129",lat:13.035,lng:77.7478},{name:"Byatarayanapura",pincode:"560026",lat:13.056,lng:77.5926},{name:"C V Raman Nagar",pincode:"560093",lat:12.9767,lng:77.6597},{name:"Chamarajpet",pincode:"560018",lat:12.9582,lng:77.5709},{name:"Channasandra",pincode:"560067",lat:12.9629,lng:77.758},{name:"Chikbasavanapura",pincode:"560067",lat:12.9948,lng:77.7327},{name:"Chickpet",pincode:"560053",lat:12.9662,lng:77.5767},{name:"Chikkalasandra",pincode:"560061",lat:12.9132,lng:77.5454},{name:"Choodasandra",pincode:"560099",lat:12.8848,lng:77.6785},{name:"Cox Town",pincode:"560005",lat:12.9996,lng:77.6229},{name:"D J Halli",pincode:"560005",lat:13.0083,lng:77.6228},{name:"Doddabidarakallu",pincode:"560073",lat:13.0426,lng:77.5019},{name:"Doorvaninagar",pincode:"560016",lat:13.0252,lng:77.6688},{name:"Ejipura",pincode:"560047",lat:12.9437,lng:77.6274},{name:"Electronic City",pincode:"560100",lat:12.8394,lng:77.677},{name:"Frazer Town",pincode:"560005",lat:12.999,lng:77.6226},{name:"Gandhi Nagar",pincode:"560009",lat:12.9772,lng:77.573},{name:"Gavipuram Extn",pincode:"560019",lat:12.9552,lng:77.5668},{name:"Geddalahalli",pincode:"560077",lat:13.0309,lng:77.6389},{name:"Gottigere",pincode:"560083",lat:12.8725,lng:77.5944},{name:"Halasur",pincode:"560042",lat:12.9833,lng:77.6194},{name:"Hebbal",pincode:"560024",lat:13.0355,lng:77.606},{name:"Heggere",pincode:"560073",lat:13.0172,lng:77.5004},{name:"HMT Layout",pincode:"560031",lat:13.039,lng:77.547},{name:"Horamavu",pincode:"560043",lat:13.0267,lng:77.6571},{name:"Hosakerehalli",pincode:"560085",lat:12.9251,lng:77.536},{name:"HSR Layout",pincode:"560102",lat:12.9121,lng:77.6446},{name:"Hulimavu",pincode:"560076",lat:12.8829,lng:77.6083},{name:"Indiranagar",pincode:"560038",lat:12.9719,lng:77.6412},{name:"ISRO Layout",pincode:"560078",lat:12.9056,lng:77.5665},{name:"J P Nagar",pincode:"560078",lat:12.9041,lng:77.5852},{name:"Jakkur",pincode:"560064",lat:13.0811,lng:77.5924},{name:"Jalahalli",pincode:"560013",lat:13.0491,lng:77.5422},{name:"Jayanagar 4th T Block",pincode:"560041",lat:12.9352,lng:77.5837},{name:"Jigani",pincode:"560105",lat:12.7849,lng:77.642},{name:"Kadubeesanahalli",pincode:"560103",lat:12.956,lng:77.7026},{name:"Kadugodi",pincode:"560067",lat:12.9968,lng:77.7583},{name:"Kaggadasapura",pincode:"560093",lat:12.9782,lng:77.6801},{name:"Kalasipalyam",pincode:"560002",lat:12.9636,lng:77.5777},{name:"Kalyananagar",pincode:"560043",lat:13.0288,lng:77.6402},{name:"Kamakshipalya",pincode:"560079",lat:12.9829,lng:77.5208},{name:"Kengeri",pincode:"560060",lat:12.9177,lng:77.4822},{name:"Kodichikkanahalli",pincode:"560068",lat:12.8903,lng:77.6239},{name:"Koramangala",pincode:"560095",lat:12.9344,lng:77.6173},{name:"KR Puram",pincode:"560036",lat:13.0022,lng:77.6951},{name:"Kyalasanahalli",pincode:"560077",lat:13.0269,lng:77.6589},{name:"Laggere",pincode:"560058",lat:13.0102,lng:77.5157},{name:"Mahadevapura",pincode:"560048",lat:12.9923,lng:77.6957},{name:"Majestic",pincode:"560009",lat:12.9779,lng:77.572},{name:"Malleshpalya",pincode:"560075",lat:12.9839,lng:77.6702},{name:"Malleshwaram",pincode:"560003",lat:12.9999,lng:77.5715},{name:"Manorayanapalya",pincode:"560032",lat:13.0365,lng:77.5726},{name:"Marathahalli",pincode:"560037",lat:12.9563,lng:77.7019},{name:"Mathikere",pincode:"560054",lat:13.0307,lng:77.5639},{name:"Munnekollal",pincode:"560037",lat:12.9568,lng:77.7045},{name:"Nagarbhavi",pincode:"560072",lat:12.9674,lng:77.5049},{name:"Nayandahalli",pincode:"560039",lat:12.9413,lng:77.5159},{name:"Neelasandra",pincode:"560047",lat:12.9479,lng:77.6236},{name:"Peenya",pincode:"560058",lat:13.0194,lng:77.5153},{name:"Raghuvanahalli",pincode:"560062",lat:12.8821,lng:77.5466},{name:"Rajajinagar",pincode:"560010",lat:12.9989,lng:77.5536},{name:"Ramamurthy Nagar",pincode:"560016",lat:13.0045,lng:77.6797},{name:"RT Nagar",pincode:"560032",lat:13.0266,lng:77.5979},{name:"Sadashivanagar",pincode:"560080",lat:13.0093,lng:77.5772},{name:"Shanti Nagar",pincode:"560027",lat:12.9537,lng:77.5926},{name:"Tavarekere",pincode:"560029",lat:12.931,lng:77.6106},{name:"Varthur",pincode:"560087",lat:12.9352,lng:77.7501},{name:"Vidyaranyapura",pincode:"560097",lat:13.067,lng:77.56}];locationSource=new Gt(null);currentLocation$=this.locationSource.asObservable();updateLocation(e,t,i){this.setUserLocation(t,i),this.locationSource.next({name:e,lat:t,lng:i})}DEFAULT_LOCATION_DATA={name:"Koramangala",lat:12.9352,lng:77.6245};getUserLocation(){return this.userLocation?Promise.resolve(this.userLocation):this.locationPromise?this.locationPromise:(this.locationPromise=new Promise(e=>{let t=!1,i=setTimeout(()=>{t||(t=!0,console.warn("[LocationService] Timeout expired. Using default location."),this.userLocation=this.DEFAULT_LOCATION,e(this.DEFAULT_LOCATION),this.locationPromise=null)},this.LOCATION_TIMEOUT_MS);if(!("geolocation"in navigator)){t||(t=!0,clearTimeout(i),this.userLocation=this.DEFAULT_LOCATION,e(this.DEFAULT_LOCATION));return}navigator.geolocation.getCurrentPosition(r=>{t||(t=!0,clearTimeout(i),this.userLocation={latitude:r.coords.latitude,longitude:r.coords.longitude},e(this.userLocation))},r=>{t||(t=!0,clearTimeout(i),console.warn("[LocationService] Geolocation error, using default. Code:",r.code),this.userLocation=this.DEFAULT_LOCATION,e(this.DEFAULT_LOCATION))},{enableHighAccuracy:!1,timeout:4e3,maximumAge:6e5})}),this.locationPromise)}setUserLocation(e,t){this.userLocation={latitude:e,longitude:t}}calculateDistance(e,t,i,r){let a=this.toRadians(i-e),l=this.toRadians(r-t),u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(i))*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}formatDistance(e){return e<1?`${Math.round(e*1e3)} m`:`${e.toFixed(1)} km`}getDistanceFromUser(e,t){return T(this,null,function*(){let i=yield this.getUserLocation(),r=this.calculateDistance(i.latitude,i.longitude,e,t);return this.formatDistance(r)})}toRadians(e){return e*(Math.PI/180)}clearLocation(){this.userLocation=null}getAreaName(e,t){return this.findNearestArea(e,t)}findNearestArea(e,t){let i="Bangalore",r=1/0;for(let o of this.AREAS){let a=this.calculateDistance(e,t,o.lat,o.lng);a<r&&(r=a,i=o.name)}return i}static \u0275fac=function(t){return new(t||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};var Lq=["searchInput"];function Fq(n,e){if(n&1){let t=gt();C(0,"div",33),ae("click",function(){let r=be(t).$implicit,o=ve(2);return Ee(o.selectLocation(r))}),C(1,"div",3),Te(),C(2,"svg",34),ie(3,"path",35),D()(),We(),C(4,"div",36)(5,"div",37),H(6),D(),C(7,"div",38),H(8),D()(),Te(),C(9,"svg",39),ie(10,"path",40),D()()}if(n&2){let t=e.$implicit;j(6),_t(t.name),j(2),ot("Pincode: ",t.pincode,"")}}function Vq(n,e){n&1&&(C(0,"div",41),Te(),C(1,"svg",42),ie(2,"circle",27)(3,"path",28),D(),We(),C(4,"p"),H(5,"No locations found"),D(),C(6,"span"),H(7,"Try searching for a different area"),D()())}function Bq(n,e){if(n&1){let t=gt();C(0,"div",19),ae("click",function(){be(t);let r=ve();return Ee(r.closeLocationModal())}),C(1,"div",20),ae("click",function(r){return be(t),Ee(r.stopPropagation())}),C(2,"div",21)(3,"h2"),H(4,"Select Location"),D(),C(5,"button",22),ae("click",function(){be(t);let r=ve();return Ee(r.closeLocationModal())}),Te(),C(6,"svg",23),ie(7,"path",24),D()()(),We(),C(8,"div",25),Te(),C(9,"svg",26),ie(10,"circle",27)(11,"path",28),D(),We(),C(12,"input",29,0),_n("ngModelChange",function(r){be(t);let o=ve();return Sn(o.searchQuery,r)||(o.searchQuery=r),Ee(r)}),D()(),C(14,"div",30),Re(15,Fq,11,2,"div",31)(16,Vq,8,0,"div",32),D()()()}if(n&2){let t=ve();j(12),gn("ngModel",t.searchQuery),j(3),X("ngForOf",t.filteredLocations),j(),X("ngIf",t.filteredLocations.length===0)}}var sv=class n{constructor(e,t){this.router=e;this.locationService=t}searchInput;showLocationModal=!1;searchQuery="";locations=[{name:"Adugodi",pincode:"560030",lat:12.9716,lng:77.5946},{name:"Agaram",pincode:"560007",lat:12.8431,lng:77.4863},{name:"Air Force Stn. Yelahanka",pincode:"560063",lat:13.1048,lng:77.5763},{name:"Banashankari",pincode:"560050",lat:12.925453,lng:77.546761},{name:"Banashankari 2nd Stage",pincode:"560070",lat:12.9249,lng:77.5662},{name:"Banashankari 3rd Stage",pincode:"560085",lat:12.9216,lng:77.5543},{name:"Banashankari 6th Stage",pincode:"560062",lat:12.8963,lng:77.5353},{name:"Banaswadi",pincode:"560043",lat:13.0159,lng:77.6516},{name:"Basavanapura",pincode:"560036",lat:12.9835,lng:77.6773},{name:"Basaveshwaranagar",pincode:"560079",lat:12.9975,lng:77.5334},{name:"Bellandur",pincode:"560103",lat:12.9304,lng:77.6784},{name:"Bidadi",pincode:"562109",lat:12.8274,lng:77.3971},{name:"Bilekahalli",pincode:"560076",lat:12.8989,lng:77.6103},{name:"Binnamangala",pincode:"560038",lat:12.9837,lng:77.6388},{name:"Bommanahalli",pincode:"560068",lat:12.9082,lng:77.6245},{name:"Bommasandra",pincode:"560099",lat:12.8009,lng:77.699},{name:"Brookefield",pincode:"560037",lat:12.9698,lng:77.7184},{name:"BTM 2nd Stage",pincode:"560076",lat:12.9167,lng:77.6108},{name:"Budigere",pincode:"562129",lat:13.035,lng:77.7478},{name:"Byatarayanapura",pincode:"560026",lat:13.056,lng:77.5926},{name:"C V Raman Nagar",pincode:"560093",lat:12.9767,lng:77.6597},{name:"Chamarajpet",pincode:"560018",lat:12.9582,lng:77.5709},{name:"Channasandra",pincode:"560067",lat:12.9629,lng:77.758},{name:"Chikbasavanapura",pincode:"560067",lat:12.9948,lng:77.7327},{name:"Chickpet",pincode:"560053",lat:12.9662,lng:77.5767},{name:"Chikkalasandra",pincode:"560061",lat:12.9132,lng:77.5454},{name:"Choodasandra",pincode:"560099",lat:12.8848,lng:77.6785},{name:"Cox Town",pincode:"560005",lat:12.9996,lng:77.6229},{name:"D J Halli",pincode:"560005",lat:13.0083,lng:77.6228},{name:"Doddabidarakallu",pincode:"560073",lat:13.0426,lng:77.5019},{name:"Doorvaninagar",pincode:"560016",lat:13.0252,lng:77.6688},{name:"Ejipura",pincode:"560047",lat:12.9437,lng:77.6274},{name:"Electronic City",pincode:"560100",lat:12.8394,lng:77.677},{name:"Frazer Town",pincode:"560005",lat:12.999,lng:77.6226},{name:"Gandhi Nagar",pincode:"560009",lat:12.9772,lng:77.573},{name:"Gavipuram Extn",pincode:"560019",lat:12.9552,lng:77.5668},{name:"Geddalahalli",pincode:"560077",lat:13.0309,lng:77.6389},{name:"Gottigere",pincode:"560083",lat:12.8725,lng:77.5944},{name:"Halasur",pincode:"560042",lat:12.9833,lng:77.6194},{name:"Hebbal",pincode:"560024",lat:13.0355,lng:77.606},{name:"Heggere",pincode:"560073",lat:13.0172,lng:77.5004},{name:"HMT Layout",pincode:"560031",lat:13.039,lng:77.547},{name:"Horamavu",pincode:"560043",lat:13.0267,lng:77.6571},{name:"Hosakerehalli",pincode:"560085",lat:12.9251,lng:77.536},{name:"HSR Layout",pincode:"560102",lat:12.9121,lng:77.6446},{name:"Hulimavu",pincode:"560076",lat:12.8829,lng:77.6083},{name:"Indiranagar",pincode:"560038",lat:12.9719,lng:77.6412},{name:"ISRO Layout",pincode:"560078",lat:12.9056,lng:77.5665},{name:"J P Nagar",pincode:"560078",lat:12.9041,lng:77.5852},{name:"Jakkur",pincode:"560064",lat:13.0811,lng:77.5924},{name:"Jalahalli",pincode:"560013",lat:13.0491,lng:77.5422},{name:"Jayanagar 4th T Block",pincode:"560041",lat:12.9352,lng:77.5837},{name:"Jigani",pincode:"560105",lat:12.7849,lng:77.642},{name:"Kadubeesanahalli",pincode:"560103",lat:12.956,lng:77.7026},{name:"Kadugodi",pincode:"560067",lat:12.9968,lng:77.7583},{name:"Kaggadasapura",pincode:"560093",lat:12.9782,lng:77.6801},{name:"Kalasipalyam",pincode:"560002",lat:12.9636,lng:77.5777},{name:"Kalyananagar",pincode:"560043",lat:13.0288,lng:77.6402},{name:"Kamakshipalya",pincode:"560079",lat:12.9829,lng:77.5208},{name:"Kengeri",pincode:"560060",lat:12.9177,lng:77.4822},{name:"Kodichikkanahalli",pincode:"560068",lat:12.8903,lng:77.6239},{name:"Koramangala",pincode:"560095",lat:12.9344,lng:77.6173},{name:"KR Puram",pincode:"560036",lat:13.0022,lng:77.6951},{name:"Kyalasanahalli",pincode:"560077",lat:13.0269,lng:77.6589},{name:"Laggere",pincode:"560058",lat:13.0102,lng:77.5157},{name:"Mahadevapura",pincode:"560048",lat:12.9923,lng:77.6957},{name:"Majestic",pincode:"560009",lat:12.9779,lng:77.572},{name:"Malleshpalya",pincode:"560075",lat:12.9839,lng:77.6702},{name:"Malleshwaram",pincode:"560003",lat:12.9999,lng:77.5715},{name:"Manorayanapalya",pincode:"560032",lat:13.0365,lng:77.5726},{name:"Marathahalli",pincode:"560037",lat:12.9563,lng:77.7019},{name:"Mathikere",pincode:"560054",lat:13.0307,lng:77.5639},{name:"Munnekollal",pincode:"560037",lat:12.9568,lng:77.7045},{name:"Nagarbhavi",pincode:"560072",lat:12.9674,lng:77.5049},{name:"Nayandahalli",pincode:"560039",lat:12.9413,lng:77.5159},{name:"Neelasandra",pincode:"560047",lat:12.9479,lng:77.6236},{name:"Peenya",pincode:"560058",lat:13.0194,lng:77.5153},{name:"Raghuvanahalli",pincode:"560062",lat:12.8821,lng:77.5466},{name:"Rajajinagar",pincode:"560010",lat:12.9989,lng:77.5536},{name:"Ramamurthy Nagar",pincode:"560016",lat:13.0045,lng:77.6797},{name:"RT Nagar",pincode:"560032",lat:13.0266,lng:77.5979},{name:"Sadashivanagar",pincode:"560080",lat:13.0093,lng:77.5772},{name:"Shanti Nagar",pincode:"560027",lat:12.9537,lng:77.5926},{name:"Tavarekere",pincode:"560029",lat:12.931,lng:77.6106},{name:"Varthur",pincode:"560087",lat:12.9352,lng:77.7501},{name:"Vidyaranyapura",pincode:"560097",lat:13.067,lng:77.56}];ngAfterViewInit(){this.showLocationModal&&this.searchInput&&setTimeout(()=>this.searchInput?.nativeElement.focus(),300)}allow(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,i=e.coords.longitude,r=this.locationService.findNearestArea(t,i);this.locationService.setUserLocation(t,i),this.router.navigate(["/main-app"],{replaceUrl:!0,state:{location:r,latitude:t,longitude:i}})},e=>{console.error("Location error:",e),alert("Location denied or unavailable")},{enableHighAccuracy:!0,timeout:1e4}):alert("Geolocation not supported")}manual(){this.showLocationModal=!0,this.searchQuery="",setTimeout(()=>this.searchInput?.nativeElement.focus(),300)}closeLocationModal(){this.showLocationModal=!1,this.searchQuery=""}selectLocation(e){this.locationService.setUserLocation(e.lat,e.lng),this.router.navigate(["/main-app"],{replaceUrl:!0,state:{location:e.name,latitude:e.lat,longitude:e.lng}})}get filteredLocations(){if(!this.searchQuery.trim())return this.locations;let e=this.searchQuery.toLowerCase();return this.locations.filter(t=>t.name.toLowerCase().includes(e)||t.pincode.includes(e))}static \u0275fac=function(t){return new(t||n)(oe(lt),oe(Wi))};static \u0275cmp=mt({type:n,selectors:[["app-location-permission"]],viewQuery:function(t,i){if(t&1&&Vi(Lq,5),t&2){let r;hi(r=fi())&&(i.searchInput=r.first)}},standalone:!0,features:[vt],decls:31,vars:1,consts:[["searchInput",""],[1,"location-section"],[1,"location-form"],[1,"location-icon"],["width","80","height","80","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","locationGradient","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","#ff6b35","stop-opacity","1"],["offset","100%",2,"stop-color","#ff8c5a","stop-opacity","1"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","url(#locationGradient)"],[1,"location-title"],[1,"location-subtitle"],[1,"location-benefits"],[1,"benefit-item"],[1,"benefit-icon"],[1,"benefit-text"],[1,"allow-location-btn",3,"click"],[1,"manual-location-btn",3,"click"],[1,"location-privacy"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"location-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-box"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"search-icon"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21l-4.35-4.35","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["type","text","placeholder","Search for a location...",1,"search-input",3,"ngModelChange","ngModel"],[1,"locations-list"],["class","location-item",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"location-item",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","currentColor"],[1,"location-info"],[1,"location-name"],[1,"location-area"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"chevron-right"],["d","M9 18l6-6-6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"no-results"],["width","48","height","48","viewBox","0 0 24 24","fill","none"]],template:function(t,i){t&1&&(C(0,"div",1)(1,"div",2)(2,"div",3),Te(),C(3,"svg",4)(4,"defs")(5,"linearGradient",5),ie(6,"stop",6)(7,"stop",7),D()(),ie(8,"path",8),D()(),We(),C(9,"h2",9),H(10,"Find Street Food Near You"),D(),C(11,"p",10),H(12,"We need your location to show you the best street food options around you"),D(),C(13,"div",11)(14,"div",12)(15,"span",13),H(16,"\u{1F3AF}"),D(),C(17,"span",14),H(18,"Discover food stalls nearby"),D()(),C(19,"div",12)(20,"span",13),H(21,"\u{1F4B0}"),D(),C(22,"span",14),H(23,"See accurate prices & distance"),D()()(),C(24,"button",15),ae("click",function(){return i.allow()}),H(25,"Allow Location Access"),D(),C(26,"button",16),ae("click",function(){return i.manual()}),H(27,"Select Location Manually"),D(),C(28,"p",17),H(29,"Your location data is secure and only used to show nearby food options."),D()(),Re(30,Bq,17,3,"div",18),D()),t&2&&(j(30),X("ngIf",i.showLocationModal))},dependencies:[Tt,Yn,Xt,Xn,Jn,Gi,Ti],styles:[".location-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1.5rem;background:#fff;font-family:Poppins,sans-serif}.location-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.location-icon[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:inline-block;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.location-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 12px rgba(255,107,53,.3))}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.location-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.location-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin-bottom:2.5rem;line-height:1.5}.location-benefits[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:2.5rem}.benefit-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border-radius:12px;text-align:left}.benefit-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:1rem;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:50%;box-shadow:0 2px 5px #0000000d}.benefit-text[_ngcontent-%COMP%]{font-weight:500;color:#34495e}.allow-location-btn[_ngcontent-%COMP%]{width:100%;padding:1.2rem;background:#ff6b35;color:#fff;border-radius:12px;border:none;font-size:1.1rem;font-weight:600;cursor:pointer;box-shadow:0 4px 15px #ff6b354d;transition:transform .2s;display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem}.allow-location-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.manual-location-btn[_ngcontent-%COMP%]{width:100%;padding:1.1rem;border-radius:12px;border:2px solid #e9ecef;background:#fff;color:#7f8c8d;font-weight:600;cursor:pointer;transition:all .2s}.manual-location-btn[_ngcontent-%COMP%]:hover{border-color:#ced4da;color:#495057}.location-privacy[_ngcontent-%COMP%]{font-size:.8rem;color:#adb5bd;margin-top:2rem;padding:1rem;background:#f8f9fa;border-radius:8px;border-left:3px solid #ff6b35;text-align:left;line-height:1.4}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;backdrop-filter:blur(1px);z-index:100;display:flex;align-items:flex-end;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.location-modal[_ngcontent-%COMP%]{background:#1a1a1a;width:100%;max-height:80vh;border-radius:24px 24px 0 0;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 20px 16px;border-bottom:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff;margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#888;cursor:pointer;border-radius:50%;transition:all .2s ease}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.search-box[_ngcontent-%COMP%]{padding:16px 20px;position:relative;border-bottom:1px solid rgba(255,255,255,.1)}.search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:36px;top:50%;transform:translateY(-50%);color:#666;pointer-events:none}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 48px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:12px;color:#fff;font-size:15px;transition:all .2s ease;box-sizing:border-box}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#666}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;background:#ffffff14;border-color:#ff6b35;box-shadow:0 0 0 3px #ff6b351a}.locations-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px 0}.location-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid rgba(255,255,255,.05)}.location-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.location-item[_ngcontent-%COMP%]:active{background:#ffffff1a;transform:scale(.98)}.location-item[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#ff6b351a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35;flex-shrink:0}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]{flex:1;min-width:0}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;margin-bottom:4px}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-area[_ngcontent-%COMP%]{font-size:13px;color:#888}.location-item[_ngcontent-%COMP%]   .chevron-right[_ngcontent-%COMP%]{color:#666;flex-shrink:0}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:#666}.no-results[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 8px;color:#888}.no-results[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}@media (min-width: 768px){.location-modal[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;border-radius:24px;max-height:70vh}.modal-overlay[_ngcontent-%COMP%]{align-items:center}}"],data:{animation:[sb("fadeIn",[Kd(":enter",[Vr({opacity:0}),Wd("200ms ease-out",Vr({opacity:1}))]),Kd(":leave",[Wd("200ms ease-in",Vr({opacity:0}))])]),sb("slideUp",[Kd(":enter",[Vr({transform:"translateY(100%)",opacity:0}),Wd("300ms cubic-bezier(0.4, 0, 0.2, 1)",Vr({transform:"translateY(0)",opacity:1}))]),Kd(":leave",[Wd("200ms ease-in",Vr({transform:"translateY(100%)",opacity:0}))])])]}})};var Uq=["videoEl"];function jq(n,e){n&1&&ie(0,"div",31)}function zq(n,e){if(n&1){let t=gt();C(0,"button",32),ae("click",function(r){be(t);let o=ve(2);return Ee(o.retryLoad(r))}),Te(),C(1,"svg",33),ie(2,"path",34)(3,"path",35),D(),We(),C(4,"span"),H(5,"Retry"),D()()}}function $q(n,e){if(n&1&&(C(0,"div",28),Re(1,jq,1,0,"div",29)(2,zq,6,0,"button",30),D()),n&2){let t=ve();j(),X("ngIf",!t.showRetry),j(),X("ngIf",t.showRetry)}}function Hq(n,e){n&1&&(C(0,"div",36),Te(),C(1,"svg",37),ie(2,"path",38),D()())}function qq(n,e){n&1&&(Te(),C(0,"svg",42),ie(1,"path",43),D())}function Gq(n,e){n&1&&(Te(),C(0,"svg",42),ie(1,"path",44),D())}function Wq(n,e){if(n&1&&(C(0,"div",39)(1,"div",40),Re(2,qq,2,0,"svg",41)(3,Gq,2,0,"svg",41),D()()),n&2){let t=ve();j(2),X("ngIf",t.isMuted),j(),X("ngIf",!t.isMuted)}}function Kq(n,e){if(n&1&&(C(0,"div",45),Te(),C(1,"svg",46),ie(2,"path",47)(3,"circle",48),D(),We(),C(4,"span",49),H(5),D()()),n&2){let t=ve();j(5),_t(t.formatViewCount(t.displayViewCount))}}function Zq(n,e){if(n&1&&(C(0,"span",50),H(1),D()),n&2){let t=ve();j(),_t(t.displayLikes)}}function Qq(n,e){if(n&1){let t=gt();C(0,"button",51),ae("click",function(r){be(t);let o=ve();return Ee(o.onDelete(r))}),Te(),C(1,"svg",52),ie(2,"path",53)(3,"line",54)(4,"line",55),D()()}}var Jh=class n{reel;src="";poster="";title="";vendor="";price="";distance="";active=!1;relativeIndex=0;priority="low";likes=0;viewCount=0;isLiked=!1;isBookmarked=!1;liked=new rt;bookmarked=new rt;shared=new rt;deleted=new rt;canDelete=!1;videoEl;lastTapTime=0;showLikeAnimation=!1;isProgressBarVisible=!1;progressBarHideTimeout;singleTapTimeout;get displaySrc(){let e=this.reel?.videoUrl||this.src;return e&&e.includes("videos.bengaluru-swada.com")&&(e=e.replace("https://videos.bengaluru-swada.com","https://r2-video-uploader.bengaluru-swada.workers.dev")),e}get displayPoster(){return this.reel?.thumbnailUrl||this.poster}get displayTitle(){return this.reel?.title||this.title}get displayVendor(){return this.reel?.vendor||this.vendor}get displayPrice(){return this.reel?.price||this.price}get displayDistance(){return this.reel?.distance||this.distance}get displayLikes(){return this.reel?.likes||this.likes}get displayViewCount(){return this.reel?.viewCount||this.viewCount}get displayIsLiked(){return this.reel?this.reel.isLiked||!1:this.isLiked}get displayIsBookmarked(){return this.reel?this.reel.isBookmarked||!1:this.isBookmarked}isLoading=!0;progress=0;isSeeking=!1;isMuted=!0;muteChanged=new rt;showMuteIcon=!1;progressInterval;ngOnChanges(e){if(e.reel||e.src){let t=this.displaySrc,i=e.reel?.previousValue?.videoUrl||e.src?.previousValue;t!==i&&(this.isLoading=!0,this.videoEl&&this.videoEl.nativeElement&&this.videoEl.nativeElement.load())}e.active&&(this.active?this.play():(this.pause(),this.resetVideo())),e.priority&&!this.active&&this.priority==="high"&&this.videoEl?.nativeElement&&this.videoEl.nativeElement.readyState===0&&this.videoEl.nativeElement.load(),e.isMuted&&this.videoEl?.nativeElement&&(this.videoEl.nativeElement.muted=this.isMuted)}ngAfterViewInit(){let e=this.videoEl.nativeElement;["loadstart","loadedmetadata","loadeddata","canplay","playing","waiting","error","stalled","suspend","emptied"].forEach(i=>{e.addEventListener(i,()=>{(i==="playing"||i==="canplay"||i==="loadeddata")&&(this.isLoading=!1,this.startProgressTracking()),i==="waiting"&&(this.isLoading=!0),i==="error"&&(console.error("[VideoCard] Video error:",e.error),this.isLoading=!1),i==="ended"&&(this.progress=0,this.play())})}),this.checkVideoReady(),this.active?this.play():this.priority==="high"&&e.load(),setTimeout(()=>{this.isLoading&&!this.active&&(this.isLoading=!1)},2e3)}resetVideo(){let e=this.videoEl?.nativeElement;e&&(e.pause(),e.currentTime=0,this.progress=0)}showRetry=!1;playWatchdogTimeout;checkVideoReady(){this.videoEl&&this.videoEl.nativeElement&&this.videoEl.nativeElement.readyState>=3&&(this.isLoading=!1)}startProgressTracking(){this.progressInterval&&clearInterval(this.progressInterval);let e=this.videoEl?.nativeElement;e&&(this.progressInterval=setInterval(()=>{!this.isSeeking&&e.duration&&(this.progress=e.currentTime/e.duration*100)},50))}play(){let e=this.videoEl?.nativeElement;if(e){e.muted=this.isMuted,e.currentTime=0,e.readyState<3&&(this.isLoading=!0,this.showRetry=!1);let t=e.play();t!==void 0&&t.catch(i=>{console.error("[VideoCard] Error playing video:",i),this.isLoading=!1}),this.playWatchdogTimeout&&clearTimeout(this.playWatchdogTimeout),this.playWatchdogTimeout=setTimeout(()=>{(e.paused||e.readyState<3)&&(console.warn("[VideoCard] Playback stalled, showing retry"),this.isLoading=!0,this.showRetry=!0)},3e3)}}retryLoad(e){e.stopPropagation(),this.showRetry=!1,this.isLoading=!0;let t=this.videoEl?.nativeElement;t&&(t.load(),t.play().catch(console.error))}preload(){let e=this.videoEl?.nativeElement;e&&(e.preload="auto",e.load())}pause(){this.playWatchdogTimeout&&clearTimeout(this.playWatchdogTimeout),this.videoEl?.nativeElement.pause()}bookmark(){this.reel||(this.isBookmarked=!this.isBookmarked),this.bookmarked.emit()}onDelete(e){e.stopPropagation(),this.deleted.emit()}openGoogleMaps(){if(this.reel?.latitude&&this.reel?.longitude){let{latitude:e,longitude:t}=this.reel,i=`https://www.google.com/maps?q=${e},${t}`;window.open(i,"_blank")}else console.warn("No location data available for this reel")}share(){this.shared.emit()}toggleLike(){this.reel||(this.isLiked=!this.isLiked),this.liked.emit(),this.isLiked&&this.showLikeAnimationEffect()}toggleMute(){let e=this.videoEl?.nativeElement;if(e){e.paused&&e.play().catch(i=>console.error("[VideoCard] Error playing on tap:",i));let t=!this.isMuted;e.muted=t,this.isMuted=t,this.muteChanged.emit(t),this.showMuteAnimation(),this.isProgressBarVisible=!0,this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout),this.progressBarHideTimeout=setTimeout(()=>{this.isProgressBarVisible=!1},2e3)}}showMuteAnimation(){this.showMuteIcon=!0,setTimeout(()=>{this.showMuteIcon=!1},1e3)}doubleTapLike(){this.isLiked?this.showLikeAnimationEffect():this.toggleLike()}onVideoTap(e){e.preventDefault();let t=new Date().getTime(),i=t-this.lastTapTime;i<300&&i>0?(this.singleTapTimeout&&(clearTimeout(this.singleTapTimeout),this.singleTapTimeout=void 0),this.doubleTapLike(),this.lastTapTime=0):(this.lastTapTime=t,this.singleTapTimeout=window.setTimeout(()=>{this.toggleMute(),this.singleTapTimeout=void 0},300))}toggleProgressBar(){this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout),this.isProgressBarVisible=!this.isProgressBarVisible,this.isProgressBarVisible&&(this.progressBarHideTimeout=setTimeout(()=>{this.isProgressBarVisible=!1},3e3))}showLikeAnimationEffect(){this.showLikeAnimation=!0,setTimeout(()=>{this.showLikeAnimation=!1},1e3)}formatViewCount(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}onProgressBarClick(e){e.stopPropagation(),this.seekToPosition(e)}onProgressBarTouchStart(e){this.isSeeking=!0,this.seekToPosition(e)}onProgressBarTouchMove(e){this.isSeeking&&this.seekToPosition(e)}onProgressBarTouchEnd(){this.isSeeking=!1}seekToPosition(e){let i=e.currentTarget.getBoundingClientRect(),r;if(e instanceof MouseEvent)r=e.clientX;else{let u=e.touches[0]||e.changedTouches[0];if(!u)return;r=u.clientX}let a=Math.max(0,Math.min(r-i.left,i.width))/i.width,l=this.videoEl?.nativeElement;l&&l.readyState>0&&(l.currentTime=a*l.duration,this.progress=a*100)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=mt({type:n,selectors:[["app-video-card"]],viewQuery:function(t,i){if(t&1&&Vi(Uq,5),t&2){let r;hi(r=fi())&&(i.videoEl=r.first)}},inputs:{reel:"reel",src:"src",poster:"poster",title:"title",vendor:"vendor",price:"price",distance:"distance",active:"active",relativeIndex:"relativeIndex",priority:"priority",likes:"likes",viewCount:"viewCount",isLiked:"isLiked",isBookmarked:"isBookmarked",canDelete:"canDelete",isMuted:"isMuted"},outputs:{liked:"liked",bookmarked:"bookmarked",shared:"shared",deleted:"deleted",muteChanged:"muteChanged"},standalone:!0,features:[Ni,vt],decls:33,vars:30,consts:[["videoEl",""],[1,"video-card"],["loop","","playsinline","","webkit-playsinline","","x-webkit-airplay","allow","disablePictureInPicture","",1,"video-player",3,"click","touchend","muted","preload","poster","src"],["class","loading-spinner",4,"ngIf"],["class","like-animation",4,"ngIf"],["class","mute-animation",4,"ngIf"],[1,"video-overlay"],[1,"video-info"],[1,"food-details"],[1,"dish-name"],[1,"vendor-name"],[1,"price-distance"],[1,"price"],[1,"distance"],[1,"action-buttons"],["class","view-count-action",4,"ngIf"],[1,"action-btn","like-btn",3,"click"],["width","28","height","28","viewBox","0 0 24 24",1,"action-icon"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","like-count",4,"ngIf"],[1,"action-btn","bookmark-btn",3,"click"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"action-btn","map-btn",3,"click"],["width","28","height","28","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"action-icon","navigate-icon"],["points","3 11 22 2 13 21 11 13 3 11"],["class","action-btn delete-btn",3,"click",4,"ngIf"],[1,"progress-container",3,"click","touchstart","touchmove","touchend","mouseenter","mouseleave"],[1,"progress-bar"],[1,"loading-spinner"],["class","spinner",4,"ngIf"],["class","retry-btn",3,"click",4,"ngIf"],[1,"spinner"],[1,"retry-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M23 4v6h-6M1 20v-6h6"],["d","M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 1 20.49 15"],[1,"like-animation"],["width","100","height","100","viewBox","0 0 24 24","fill","white"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"mute-animation"],[1,"mute-icon-bg"],["width","40","height","40","viewBox","0 0 24 24","fill","white",4,"ngIf"],["width","40","height","40","viewBox","0 0 24 24","fill","white"],["d","M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z"],["d","M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"],[1,"view-count-action"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","3","stroke","currentColor","stroke-width","2"],[1,"count-text"],[1,"like-count"],[1,"action-btn","delete-btn",3,"click"],["width","26","height","26","viewBox","0 0 24 24","fill","none","stroke","#ff4444","stroke-width","2",1,"action-icon"],["d","M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"]],template:function(t,i){if(t&1){let r=gt();C(0,"div",1)(1,"video",2,0),ae("click",function(a){return be(r),Ee(i.onVideoTap(a))})("touchend",function(a){return be(r),Ee(i.onVideoTap(a))}),D(),Re(3,$q,3,2,"div",3)(4,Hq,3,0,"div",4)(5,Wq,4,2,"div",5),C(6,"div",6)(7,"div",7)(8,"div",8)(9,"h3",9),H(10),D(),C(11,"p",10),H(12),D(),C(13,"div",11)(14,"span",12),H(15),D(),C(16,"span",13),H(17),D()()()(),C(18,"div",14),Re(19,Kq,6,1,"div",15),C(20,"button",16),ae("click",function(){return be(r),Ee(i.toggleLike())}),Te(),C(21,"svg",17),ie(22,"path",18),D(),Re(23,Zq,2,1,"span",19),D(),We(),C(24,"button",20),ae("click",function(){return be(r),Ee(i.bookmark())}),Te(),C(25,"svg",17),ie(26,"path",21),D()(),We(),C(27,"button",22),ae("click",function(){return be(r),Ee(i.openGoogleMaps())}),Te(),C(28,"svg",23),ie(29,"polygon",24),D()(),Re(30,Qq,5,0,"button",25),D()(),We(),C(31,"div",26),ae("click",function(a){return be(r),Ee(i.onProgressBarClick(a))})("touchstart",function(a){return be(r),Ee(i.onProgressBarTouchStart(a))})("touchmove",function(a){return be(r),Ee(i.onProgressBarTouchMove(a))})("touchend",function(){return be(r),Ee(i.onProgressBarTouchEnd())})("mouseenter",function(){return be(r),Ee(i.isProgressBarVisible=!0)})("mouseleave",function(){return be(r),Ee(i.isProgressBarVisible=!1)}),ie(32,"div",27),D()()}t&2&&(Ze("active",i.active)("prev",i.relativeIndex<0)("next",i.relativeIndex>0),j(),X("muted",i.isMuted)("preload",i.priority==="high"?"auto":"none")("poster",i.displayPoster,ui)("src",i.displaySrc,ui),j(2),X("ngIf",i.isLoading),j(),X("ngIf",i.showLikeAnimation),j(),X("ngIf",i.showMuteIcon),j(5),_t(i.displayTitle),j(2),_t(i.displayVendor),j(3),ot("\u20B9",i.displayPrice,""),j(2),ot("",i.displayDistance," away"),j(2),X("ngIf",i.displayViewCount>0),j(),Ze("liked",i.displayIsLiked),j(),Or("fill",i.displayIsLiked?"currentColor":"none"),j(2),X("ngIf",i.displayLikes>0),j(),Ze("bookmarked",i.displayIsBookmarked),j(),Or("fill",i.displayIsBookmarked?"currentColor":"none"),j(5),X("ngIf",i.canDelete),j(),Ze("visible",i.isProgressBarVisible),j(),wo("width",i.progress,"%"))},dependencies:[Tt,Xt],styles:[".video-card[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;transform:translateY(100%);transition:transform .4s cubic-bezier(.25,1,.5,1);background:#000;overflow:hidden;z-index:1}.video-card.prev[_ngcontent-%COMP%]{transform:translateY(-100%)}.video-card.next[_ngcontent-%COMP%]{transform:translateY(100%)}.video-card.active[_ngcontent-%COMP%]{transform:translateY(0);z-index:2}.video-player[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.progress-container[_ngcontent-%COMP%]{position:absolute;bottom:53px;left:0;width:100%;height:3px;background-color:#fff3;z-index:95;cursor:pointer;transition:opacity .3s ease;opacity:1;pointer-events:auto;margin:0;padding:0}.progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#fff;width:0%;transition:width .1s linear;box-shadow:0 0 10px #ffffff80}.progress-container[_ngcontent-%COMP%]:hover, .progress-container[_ngcontent-%COMP%]:active{height:4px;background-color:#ffffff4d}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#0000004d;z-index:10;gap:1rem}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}.loading-spinner[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#000000b3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:.8rem 1.5rem;border-radius:25px;cursor:pointer;font-size:1rem;transition:all .2s}.loading-spinner[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:active{transform:scale(.95);background:#000000e6}.loading-spinner[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.video-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:20px;background:linear-gradient(to top,rgba(0,0,0,.8),transparent);display:flex;justify-content:space-between;align-items:flex-end;pointer-events:none}.video-info[_ngcontent-%COMP%]{flex:1;color:#fff;padding-right:20px;pointer-events:auto;margin-bottom:50px}.dish-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0 0 5px;text-shadow:0 1px 2px rgba(0,0,0,.5)}.vendor-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin:0 0 10px;opacity:.9}.price-distance[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;font-size:.9rem;padding-bottom:20px}.price[_ngcontent-%COMP%]{font-weight:600;color:#ffffffe6;background:#ff6b35;padding:2px 8px;border-radius:4px}.distance[_ngcontent-%COMP%]{opacity:.8}.view-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;margin-top:8px;font-size:.85rem;opacity:.8}.view-count[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.9}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;pointer-events:auto;padding-bottom:60px}.action-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;display:flex;flex-direction:column;align-items:center;gap:5px;cursor:pointer;padding:0;transition:transform .2s}.action-btn[_ngcontent-%COMP%]:active{transform:scale(.9)}.action-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.like-count[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600}.like-btn.liked[_ngcontent-%COMP%]{color:#ff4757}.like-btn.liked[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse .3s cubic-bezier(.175,.885,.32,1.275)}.bookmark-btn.bookmarked[_ngcontent-%COMP%]{color:#ff6b35}.like-animation[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;pointer-events:none;animation:_ngcontent-%COMP%_pop-in-out .8s cubic-bezier(.175,.885,.32,1.275) forwards}@keyframes _ngcontent-%COMP%_pop-in-out{0%{transform:translate(-50%,-50%) scale(0);opacity:0}20%{transform:translate(-50%,-50%) scale(1.2);opacity:1}40%{transform:translate(-50%,-50%) scale(.9);opacity:1}80%{transform:translate(-50%,-50%) scale(1);opacity:1}to{transform:translate(-50%,-50%) scale(1.5);opacity:0}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}.mute-animation[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;pointer-events:none;animation:_ngcontent-%COMP%_fade-in-out 1s ease-in-out forwards}.mute-icon-bg[_ngcontent-%COMP%]{background:#0009;border-radius:50%;padding:15px;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_fade-in-out{0%{opacity:0;transform:translate(-50%,-50%) scale(.8)}20%{opacity:1;transform:translate(-50%,-50%) scale(1)}80%{opacity:1;transform:translate(-50%,-50%) scale(1)}to{opacity:0;transform:translate(-50%,-50%) scale(.8)}}.view-count-action[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;color:#fff;margin-bottom:5px}.view-count-action[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.view-count-action[_ngcontent-%COMP%]   .count-text[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.5)}"]})};var Ki=class n{constructor(e,t){this.firestore=e;this.http=t}collectionName="reels";getTrendingReels(e=20){return T(this,null,function*(){try{let t=lu(this.firestore,this.collectionName),i=uu(t,$h("createdAt","desc"),Q_(e*3)),o=(yield K_(i)).docs.map(f=>{let m=f.data();return m.videoUrl&&m.videoUrl.includes("videos.bengaluru-swada.com")&&(m.videoUrl=m.videoUrl.replace("https://videos.bengaluru-swada.com","https://r2-video-uploader.bengaluru-swada.workers.dev")),Y({id:f.id},m)}),a=Date.now(),l=o.map(f=>{let m=f.viewCount||0,v=f.likes||0,E=f.bookmarkedBy?.length||0,b=m*1+v*3+E*5,M=f.createdAt.toDate().getTime(),k=Math.max(0,(a-M)/(1e3*60*60)),N=b/Math.pow(k+2,1.5);return Oe(Y({},f),{_score:N})});l.sort((f,m)=>m._score-f._score);let u=l.slice(0,e);return this.shuffleArray(u)}catch(t){return console.error("Error fetching trending:",t),[]}})}getNewArrivals(e=20){return T(this,null,function*(){return yield this.getReels(e)})}shuffleArray(e){for(let t=e.length-1;t>0;t--){let i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}getReels(e=10,t){return T(this,null,function*(){try{let i=lu(this.firestore,this.collectionName),r=uu(i,$h("createdAt","desc"),Q_(e));return t&&(r=uu(r,Lk(t))),(yield K_(r)).docs.map(a=>Y({id:a.id},a.data()))}catch(i){return console.error("Error fetching reels:",i),[]}})}getReelsByUser(e){return T(this,null,function*(){try{let t=lu(this.firestore,this.collectionName),i=uu(t,Fk("uploadedBy","==",e),$h("createdAt","desc"));return(yield K_(i)).docs.map(o=>Y({id:o.id},o.data()))}catch(t){return console.error("Error fetching user reels:",t),[]}})}getReelById(e){return T(this,null,function*(){try{let t=hc(this.firestore,this.collectionName,e),i=yield Ok(t);return i.exists()?Y({id:i.id},i.data()):null}catch(t){return console.error("Error fetching reel:",t),null}})}createReel(e){return T(this,null,function*(){try{let t=lu(this.firestore,this.collectionName);return(yield Pk(t,Oe(Y({},e),{createdAt:Ht.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}))).id}catch(t){throw console.error("Error creating reel:",t),t}})}updateReel(e,t){return T(this,null,function*(){try{let i=hc(this.firestore,this.collectionName,e);yield fc(i,t)}catch(i){throw console.error("Error updating reel:",i),i}})}deleteReel(e){return T(this,null,function*(){try{let t=yield this.getReelById(e);if(!t){console.warn("Reel not found, cannot delete");return}let i="";if(t.videoUrl)if(t.videoUrl.includes("bengaluru-swada.workers.dev")){let o="bengaluru-swada.workers.dev/",a=t.videoUrl.indexOf(o);a!==-1&&(i=t.videoUrl.substring(a+o.length))}else{let o=t.videoUrl.split("/");i=o[o.length-1]}if(i)try{yield Gv(this.deleteFromR2(i)),console.log(`Deleted ${i} from R2`)}catch(o){console.error("Failed to delete from R2, proceeding with DB delete:",o)}let r=hc(this.firestore,this.collectionName,e);yield Rk(r),console.log("Deleted reel metadata from Firestore")}catch(t){throw console.error("Error deleting reel:",t),t}})}toggleLike(e,t,i){return T(this,null,function*(){try{let r=hc(this.firestore,this.collectionName,e);i?yield fc(r,{likedBy:sT(t),likes:Z_(-1)}):yield fc(r,{likedBy:aT(t),likes:Z_(1)})}catch(r){throw console.error("Error toggling like:",r),r}})}toggleBookmark(e,t,i){return T(this,null,function*(){try{let r=hc(this.firestore,this.collectionName,e);i?yield fc(r,{bookmarkedBy:sT(t)}):yield fc(r,{bookmarkedBy:aT(t)})}catch(r){throw console.error("Error toggling bookmark:",r),r}})}incrementViewCount(e){return T(this,null,function*(){try{let t=hc(this.firestore,this.collectionName,e);yield fc(t,{viewCount:Z_(1)})}catch(t){console.error("Error incrementing view count:",t)}})}getReelsRealtime(e=10){return new je(t=>{let i=lu(this.firestore,this.collectionName),r=uu(i,$h("createdAt","desc"),Q_(e)),o=Nk(r,a=>{let l=a.docs.map(u=>Y({id:u.id},u.data()));t.next(l)},a=>{console.error("Error in realtime reels:",a),t.error(a)});return()=>o()})}getUploadUrl(e,t){return this.http.post(Hh.cloudflare.workerUrl,{fileName:e,contentType:t})}uploadToR2(e,t){return this.http.put(e,t,{headers:{"Content-Type":t.type},reportProgress:!0,observe:"events"})}deleteFromR2(e){return this.http.delete(`${Hh.cloudflare.workerUrl}/${e}`)}isLikedByUser(e,t){return e.likedBy?.includes(t)||!1}isBookmarkedByUser(e,t){return e.bookmarkedBy?.includes(t)||!1}static \u0275fac=function(t){return new(t||n)(me(dc),me(mw))};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};function Yq(n,e){n&1&&(C(0,"div",11),ie(1,"app-video-feed-skeleton"),D())}function Jq(n,e){if(n&1){let t=gt();C(0,"div",12)(1,"div",13)(2,"h2"),H(3,"No Reels Found"),D(),C(4,"p"),H(5,"Be the first to share a tasty bite!"),D(),C(6,"div",14)(7,"button",15),ae("click",function(){be(t);let r=ve();return Ee(r.seedData())}),H(8,"Seed Sample Data"),D(),C(9,"a",16),H(10,"Upload Reel"),D()()()()}}function Xq(n,e){if(n&1){let t=gt();C(0,"app-video-card",19),ae("muteChanged",function(r){be(t);let o=ve(2);return Ee(o.onMuteChanged(r))})("deleted",function(){let r=be(t).$implicit,o=ve(2);return Ee(o.onReelDeleted(r))})("liked",function(){let r=be(t).index,o=ve(2);return Ee(o.onLike(r))})("bookmarked",function(){let r=be(t).index,o=ve(2);return Ee(o.onBookmark(r))})("shared",function(){let r=be(t).index,o=ve(2);return Ee(o.onShare(r))}),D()}if(n&2){let t=e.$implicit,i=e.index,r=ve(2);X("reel",t)("active",i===r.currentIndex&&r.isActive)("relativeIndex",i-r.currentIndex)("priority",r.getPriority(i))("isMuted",r.isGlobalMuted)("canDelete",r.isOwner(t))}}function eG(n,e){if(n&1&&(C(0,"div",17),Re(1,Xq,1,6,"app-video-card",18),D()),n&2){let t=ve();j(),X("ngForOf",t.reels)}}var gc=class n{constructor(e,t,i,r){this.reelsService=e;this.auth=t;this.cdr=i;this.locationService=r}isActive=!0;activeTab="all";isGlobalMuted=!0;reels=[];currentIndex=0;touchStartY=0;touchStartX=0;pullStartY=0;pullMoveY=0;isRefreshing=!1;pullThreshold=150;swipeThresholdX=50;isLoading=!0;viewedReels=new Set;viewTrackingTimeout;cards;ngOnInit(){return T(this,null,function*(){yield this.loadReels()})}ngAfterViewInit(){setTimeout(()=>{this.reels.length>0&&this.trackView()},50)}ngOnChanges(e){e.isActive}onMuteChanged(e){this.isGlobalMuted=e}ngOnDestroy(){this.viewTrackingTimeout&&clearTimeout(this.viewTrackingTimeout)}reloadReelsForNewLocation(){return T(this,null,function*(){console.log("[VideoFeed] Reloading reels for new location...");let e=[...this.reels],t=yield Promise.all(e.map(i=>T(this,null,function*(){let r="-- km";if(i.latitude&&i.longitude)try{r=yield this.locationService.getDistanceFromUser(i.latitude,i.longitude)}catch(o){console.error("[VideoFeed] Error calculating distance:",o)}return Oe(Y({},i),{distance:r})})));this.activeTab==="all"&&t.sort((i,r)=>{let o=i.distance==="-- km"?1/0:parseFloat(i.distance.split(" ")[0]),a=r.distance==="-- km"?1/0:parseFloat(r.distance.split(" ")[0]);return o-a}),this.reels=t,this.currentIndex=0,this.cdr.detectChanges()})}isOwner(e){return this.auth.currentUser?.uid===e.uploadedBy}onReelDeleted(e){return T(this,null,function*(){if(confirm("Are you sure you want to delete this reel permanently?"))try{yield this.reelsService.deleteReel(e.id),this.reels=this.reels.filter(t=>t.id!==e.id),this.currentIndex>=this.reels.length&&(this.currentIndex=Math.max(0,this.reels.length-1))}catch(t){console.error("Failed to delete reel:",t),alert("Failed to delete reel. Please try again.")}})}switchTab(e){return T(this,null,function*(){this.activeTab!==e&&(this.activeTab=e,this.reels=[],this.currentIndex=0,this.isLoading=!0,yield this.loadReels())})}loadReels(){return T(this,null,function*(){console.log(`[VideoFeed] Loading ${this.activeTab} reels...`),this.isLoading=!0;try{let e=[];this.activeTab==="trending"?e=yield this.reelsService.getTrendingReels(20):this.activeTab==="new"?e=yield this.reelsService.getNewArrivals(20):e=yield this.reelsService.getReels(50),console.log("[VideoFeed] Fetched reels:",e.length);let t=this.auth.currentUser;console.log("[VideoFeed] Current user:",t?.uid||"Not logged in");let i=yield Promise.all(e.map(r=>T(this,null,function*(){let o="-- km";if(r.latitude&&r.longitude)try{o=yield this.locationService.getDistanceFromUser(r.latitude,r.longitude)}catch(a){console.error("[VideoFeed] Error calculating distance:",a)}return Oe(Y({},r),{distance:o,isLiked:t?this.reelsService.isLikedByUser(r,t.uid):!1,isBookmarked:t?this.reelsService.isBookmarkedByUser(r,t.uid):!1})})));this.activeTab==="all"&&i.sort((r,o)=>{let a=r.distance==="-- km"?1/0:parseFloat(r.distance.split(" ")[0]),l=o.distance==="-- km"?1/0:parseFloat(o.distance.split(" ")[0]);return a-l}),this.reels=i,console.log("[VideoFeed] Final reels count:",this.reels.length)}catch(e){console.error("[VideoFeed] Error loading reels:",e)}finally{setTimeout(()=>{this.isLoading=!1,this.cdr.detectChanges(),this.reels.length>0&&this.trackView()},500)}})}trackView(){this.viewTrackingTimeout&&clearTimeout(this.viewTrackingTimeout);let e=this.reels[this.currentIndex];!e||!e.id||this.viewedReels.has(e.id)||(this.viewTrackingTimeout=window.setTimeout(()=>{e.id&&(this.reelsService.incrementViewCount(e.id),this.viewedReels.add(e.id),e.viewCount=(e.viewCount||0)+1)},3e3))}onTouchStart(e){this.touchStartY=e.touches[0].clientY,this.touchStartX=e.touches[0].clientX,this.currentIndex===0&&!this.isRefreshing&&(this.pullStartY=e.touches[0].clientY)}onTouchMove(e){if(this.currentIndex===0&&!this.isRefreshing&&this.pullStartY>0){let i=e.touches[0].clientY-this.pullStartY;i>0&&(this.pullMoveY=i*.5,i>10&&e.preventDefault())}}onTouchEnd(e){return T(this,null,function*(){let t=e.changedTouches[0].clientY,i=e.changedTouches[0].clientX,r=this.touchStartY-t,o=this.touchStartX-i;if(Math.abs(o)>this.swipeThresholdX&&Math.abs(o)>Math.abs(r)){o>0?this.activeTab==="all"?this.switchTab("trending"):this.activeTab==="trending"&&this.switchTab("new"):this.activeTab==="new"?this.switchTab("trending"):this.activeTab==="trending"&&this.switchTab("all");return}let a=80;r>a?this.next():r<-a&&this.pullMoveY<this.pullThreshold&&this.prev(),this.pullMoveY>=this.pullThreshold&&!this.isRefreshing&&(yield this.refresh()),this.pullStartY=0,this.pullMoveY=0})}refresh(){return T(this,null,function*(){this.isRefreshing=!0,navigator.vibrate&&navigator.vibrate(50);try{yield this.loadReels()}finally{setTimeout(()=>{this.isRefreshing=!1},500)}})}next(){this.currentIndex<this.reels.length-1&&(this.isGlobalMuted=!0,this.currentIndex++,this.trackView())}prev(){this.currentIndex>0&&(this.isGlobalMuted=!0,this.currentIndex--,this.trackView())}onLike(e){return T(this,null,function*(){let t=this.reels[e];if(!t||!t.id)return;let i=this.auth.currentUser;if(!i){console.warn("User must be logged in to like");return}let r=t.isLiked||!1;t.isLiked=!r,t.likes=(t.likes||0)+(r?-1:1);try{yield this.reelsService.toggleLike(t.id,i.uid,r)}catch(o){t.isLiked=r,t.likes=(t.likes||0)+(r?1:-1),console.error("Error toggling like:",o)}})}onBookmark(e){return T(this,null,function*(){let t=this.reels[e];if(!t||!t.id)return;let i=this.auth.currentUser;if(!i){console.warn("User must be logged in to bookmark");return}let r=t.isBookmarked||!1;t.isBookmarked=!r;try{yield this.reelsService.toggleBookmark(t.id,i.uid,r)}catch(o){t.isBookmarked=r,console.error("Error toggling bookmark:",o)}})}onShare(e){let t=this.reels[e];if(t)if(navigator.share)navigator.share({title:t.title,text:`Check out ${t.title} from ${t.vendor}!`,url:window.location.href}).catch(i=>console.log("Error sharing:",i));else{let i=`Check out ${t.title} from ${t.vendor}! \u20B9${t.price}`;navigator.clipboard.writeText(i).then(()=>alert("Link copied to clipboard!")).catch(r=>console.error("Error copying:",r))}}seedData(){return T(this,null,function*(){this.isLoading=!0;let e=[{title:"Masala Dosa",vendor:"CTR",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",thumbnailUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Masala_Dosa_with_Chutney_and_Sambar.jpg/1200px-Masala_Dosa_with_Chutney_and_Sambar.jpg",price:120,latitude:12.9352,longitude:77.6245,uploadedBy:this.auth.currentUser?.uid||"system",cloudflareVideoId:"sample-id-1",duration:60,createdAt:Ht.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]},{title:"Idli Vada",vendor:"Brahmins Coffee Bar",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",thumbnailUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Idli_Sambar.JPG/1200px-Idli_Sambar.JPG",price:80,latitude:12.9716,longitude:77.6412,uploadedBy:this.auth.currentUser?.uid||"system",cloudflareVideoId:"sample-id-2",duration:60,createdAt:Ht.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}];try{for(let t of e)yield this.reelsService.createReel(t);yield this.loadReels()}catch(t){console.error("Error seeding data:",t)}finally{this.isLoading=!1}})}navigateToReel(e){if(console.log(`[VideoFeed] Attempting to navigate to reel: ${e}`),console.log(`[VideoFeed] Total reels loaded: ${this.reels.length}`),this.reels.length===0){console.warn(`[VideoFeed] No reels loaded yet, cannot navigate to ${e}`);return}let t=this.reels.findIndex(i=>i.id===e);t!==-1?(console.log(`[VideoFeed] Found reel at index ${t}, navigating...`),this.currentIndex=t,this.isGlobalMuted=!0,setTimeout(()=>{this.trackView()},100),console.log(`[VideoFeed] Successfully navigated to reel: ${e}`)):(console.warn(`[VideoFeed] Reel not found in loaded reels: ${e}`),console.log("[VideoFeed] Available reel IDs:",this.reels.map(i=>i.id)))}getPriority(e){let t=Math.abs(e-this.currentIndex);return t===0?"high":t===1?"auto":"low"}static \u0275fac=function(t){return new(t||n)(oe(Ki),oe(St),oe(pi),oe(Wi))};static \u0275cmp=mt({type:n,selectors:[["app-video-feed"]],viewQuery:function(t,i){if(t&1&&Vi(Jh,5),t&2){let r;hi(r=fi())&&(i.cards=r)}},inputs:{isActive:"isActive"},standalone:!0,features:[Ni,vt],decls:22,vars:19,consts:[[1,"video-feed",3,"touchstart","touchmove","touchend"],[1,"feed-tabs"],[1,"tab-item",3,"click"],[1,"tab-separator"],[1,"tab-indicator"],[1,"refresh-indicator"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M12 4V2M12 20v2M4 12H2m20 0h-2m-2.05-5.95l-1.414-1.414M4.929 19.071L6.343 17.657m12.728 0l-1.414 1.414M4.929 4.929L6.343 6.343","stroke","currentColor","stroke-width","2.5","stroke-linecap","round"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","reels-container",4,"ngIf"],[1,"loading-container"],[1,"empty-state"],[1,"empty-content"],[1,"button-group"],[1,"seed-btn",3,"click"],["routerLink","/upload-reel",1,"upload-btn"],[1,"reels-container"],[3,"reel","active","relativeIndex","priority","isMuted","canDelete","muteChanged","deleted","liked","bookmarked","shared",4,"ngFor","ngForOf"],[3,"muteChanged","deleted","liked","bookmarked","shared","reel","active","relativeIndex","priority","isMuted","canDelete"]],template:function(t,i){t&1&&(C(0,"div",0),ae("touchstart",function(o){return i.onTouchStart(o)})("touchmove",function(o){return i.onTouchMove(o)})("touchend",function(o){return i.onTouchEnd(o)}),C(1,"div",1)(2,"div",2),ae("click",function(){return i.switchTab("all")}),C(3,"span"),H(4,"All"),D()(),C(5,"div",3),H(6,"|"),D(),C(7,"div",2),ae("click",function(){return i.switchTab("trending")}),C(8,"span"),H(9,"Trending"),D()(),C(10,"div",3),H(11,"|"),D(),C(12,"div",2),ae("click",function(){return i.switchTab("new")}),C(13,"span"),H(14,"New Arrivals"),D()(),ie(15,"div",4),D(),C(16,"div",5),Te(),C(17,"svg",6),ie(18,"path",7),D()(),Re(19,Yq,2,0,"div",8)(20,Jq,11,0,"div",9)(21,eG,2,1,"div",10),D()),t&2&&(j(2),Ze("active",i.activeTab==="all"),j(5),Ze("active",i.activeTab==="trending"),j(5),Ze("active",i.activeTab==="new"),j(3),Ze("trending-active",i.activeTab==="trending")("new-active",i.activeTab==="new"),j(),wo("transform","translateY("+(i.isRefreshing?60:i.pullMoveY)+"px)"),Ze("refreshing",i.isRefreshing),j(),wo("transform","rotate("+i.pullMoveY*2+"deg)"),j(2),X("ngIf",i.isLoading),j(),X("ngIf",!i.isLoading&&i.reels.length===0),j(),X("ngIf",!i.isLoading&&i.reels.length>0))},dependencies:[Tt,Yn,Xt,Jh,bx,px],styles:[".video-feed[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden;scroll-snap-type:y mandatory;-webkit-overflow-scrolling:touch;height:100vh;background:#000}.feed-tabs[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:60px;z-index:50;display:flex;align-items:center;justify-content:center;gap:15px;background:linear-gradient(to bottom,#000c,#0000);backdrop-filter:blur(2px);padding-top:10px}.tab-item[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#fff9;cursor:pointer;transition:color .3s ease,transform .2s ease;text-shadow:0 1px 4px rgba(0,0,0,.5)}.tab-item.active[_ngcontent-%COMP%]{color:#fff;transform:scale(1.05)}.tab-separator[_ngcontent-%COMP%]{color:#fff3;font-size:.9rem}.tab-indicator[_ngcontent-%COMP%]{position:absolute;bottom:12px;height:3px;width:20px;background:#fff;border-radius:2px;transition:transform .3s cubic-bezier(.4,0,.2,1);transform:translate(-105px);box-shadow:0 0 8px #fff6}.tab-indicator.trending-active[_ngcontent-%COMP%]{transform:translate(-15px)}.tab-indicator.new-active[_ngcontent-%COMP%]{transform:translate(85px)}.loading-state[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;z-index:10;background:#121212}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.1);border-left-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-content[_ngcontent-%COMP%]{text-align:center;padding:2rem}.empty-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#ff6b35}.empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa;margin-bottom:2rem}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:100%;max-width:250px}.seed-btn[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border-radius:25px;font-weight:600;text-align:center;text-decoration:none;cursor:pointer;transition:all .2s;border:none;font-size:1rem}.seed-btn[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2)}.seed-btn[_ngcontent-%COMP%]:hover{background:#fff3}.upload-btn[_ngcontent-%COMP%]{background:#ff6b35;color:#fff}.upload-btn[_ngcontent-%COMP%]:hover{background:#e55a2b;transform:translateY(-2px)}.refresh-indicator[_ngcontent-%COMP%]{position:absolute;top:-50px;left:0;width:100%;height:50px;display:flex;align-items:center;justify-content:center;z-index:20;pointer-events:none;transition:transform .1s linear}.refresh-indicator.refreshing[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(.175,.885,.32,1.275)}.refresh-indicator.refreshing[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.refresh-indicator[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b35;background:#fff;border-radius:50%;padding:5px;box-shadow:0 2px 5px #0003}"]})};var gu=class n{selectedReelId=new Gt(null);selectedReelId$=this.selectedReelId.asObservable();selectReel(e){console.log("[NavigationService] Setting selected reel:",e),this.selectedReelId.next(e)}clearSelection(){this.selectedReelId.next(null)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};function tG(n,e){n&1&&(C(0,"div",6)(1,"h1"),H(2,"Favorites"),D(),C(3,"p",7),H(4,"Your bookmarked reels"),D()())}function nG(n,e){n&1&&(C(0,"div",8),ie(1,"div",9),C(2,"p"),H(3,"Loading favorites..."),D()())}function iG(n,e){n&1&&(C(0,"div",10),Te(),C(1,"svg",11),ie(2,"path",12),D(),We(),C(3,"h2"),H(4,"No Favorites Yet"),D(),C(5,"p"),H(6,"Bookmark your favorite reels to see them here"),D()())}function rG(n,e){if(n&1){let t=gt();C(0,"video",33,0),ae("loadedmetadata",function(){be(t);let r=yl(1);return Ee(r.currentTime=.1)}),D()}if(n&2){let t=ve().$implicit;X("src",t.videoUrl,ui)}}function oG(n,e){if(n&1){let t=gt();C(0,"div",15),ae("click",function(){let r=be(t).$implicit,o=ve(2);return Ee(o.playReel(r))}),C(1,"div",16),Re(2,rG,2,1,"video",17),C(3,"div",18),Te(),C(4,"svg",19),ie(5,"path",20),D()(),We(),C(6,"div",21)(7,"span",22),Te(),C(8,"svg",23),ie(9,"path",24)(10,"circle",25),D(),H(11),D(),We(),C(12,"span",22),Te(),C(13,"svg",23),ie(14,"path",26),D(),H(15),D()()(),We(),C(16,"div",27)(17,"h3",28),H(18),D(),C(19,"p",29),H(20),D(),C(21,"div",30)(22,"span",31),H(23),D(),C(24,"span",32),H(25),D()()()()}if(n&2){let t=e.$implicit;j(2),X("ngIf",t.videoUrl),j(9),ot(" ",t.viewCount||0," "),j(4),ot(" ",t.likes||0," "),j(3),_t(t.title),j(2),_t(t.vendor),j(3),ot("\u20B9",t.price,""),j(2),_t(t.distance)}}function sG(n,e){if(n&1&&(C(0,"div",13),Re(1,oG,26,7,"div",14),D()),n&2){let t=ve();j(),X("ngForOf",t.bookmarkedReels)}}var Ws=class n{constructor(e,t,i,r,o){this.reelsService=e;this.auth=t;this.router=i;this.cdr=r;this.navigationService=o}showHeader=!0;bookmarkedReels=[];isLoading=!0;ngOnInit(){return T(this,null,function*(){yield this.loadBookmarkedReels()})}loadBookmarkedReels(){return T(this,null,function*(){console.log("[Favorites] Starting to load bookmarked reels..."),this.isLoading=!0,this.cdr.detectChanges();try{let e=this.auth.currentUser;if(console.log("[Favorites] Current user:",e?.uid||"Not logged in"),!e){this.bookmarkedReels=[],console.log("[Favorites] No user logged in, clearing bookmarks");return}console.log("[Favorites] Fetching all reels...");let t=yield this.reelsService.getReels(100);console.log("[Favorites] Fetched reels count:",t.length),this.bookmarkedReels=t.filter(i=>this.reelsService.isBookmarkedByUser(i,e.uid)),console.log("[Favorites] Bookmarked reels count:",this.bookmarkedReels.length)}catch(e){console.error("[Favorites] Error loading bookmarked reels:",e)}finally{this.isLoading=!1,this.cdr.detectChanges(),console.log("[Favorites] Loading complete. isLoading:",this.isLoading)}})}playReel(e){console.log("[Favorites] Playing reel:",e.id,e.title),this.navigationService.selectReel(e.id),this.router.navigate(["/main-app"])}static \u0275fac=function(t){return new(t||n)(oe(Ki),oe(St),oe(lt),oe(pi),oe(gu))};static \u0275cmp=mt({type:n,selectors:[["app-favorites"]],inputs:{showHeader:"showHeader"},standalone:!0,features:[vt],decls:5,vars:4,consts:[["videoThumb",""],[1,"favorites-container"],["class","favorites-header",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","reels-grid",4,"ngIf"],[1,"favorites-header"],[1,"subtitle"],[1,"loading-state"],[1,"spinner"],[1,"empty-state"],["width","80","height","80","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z","stroke","currentColor","stroke-width","2","fill","none"],[1,"reels-grid"],["class","reel-card",3,"click",4,"ngFor","ngForOf"],[1,"reel-card",3,"click"],[1,"reel-thumbnail"],["muted","","playsinline","","preload","metadata",3,"src","loadedmetadata",4,"ngIf"],[1,"play-overlay"],["width","48","height","48","viewBox","0 0 24 24","fill","white"],["d","M8 5v14l11-7z"],[1,"reel-stats"],[1,"stat"],["width","16","height","16","viewBox","0 0 24 24","fill","white"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","white","stroke-width","2","fill","none"],["cx","12","cy","12","r","3","stroke","white","stroke-width","2","fill","none"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"reel-info"],[1,"reel-title"],[1,"reel-vendor"],[1,"reel-meta"],[1,"price"],[1,"distance"],["muted","","playsinline","","preload","metadata",3,"loadedmetadata","src"]],template:function(t,i){t&1&&(C(0,"div",1),Re(1,tG,5,0,"div",2)(2,nG,4,0,"div",3)(3,iG,7,0,"div",4)(4,sG,2,1,"div",5),D()),t&2&&(j(),X("ngIf",i.showHeader),j(),X("ngIf",i.isLoading),j(),X("ngIf",!i.isLoading&&i.bookmarkedReels.length===0),j(),X("ngIf",!i.isLoading&&i.bookmarkedReels.length>0))},dependencies:[Tt,Yn,Xt],styles:['@charset "UTF-8";.favorites-container[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000;overflow-y:auto;padding:4rem 1rem 5rem}.favorites-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;padding:1rem 0}.favorites-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin-bottom:.5rem;background:linear-gradient(135deg,#ff6b35,#f7931e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.favorites-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#888;font-size:.9rem}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;color:#fff;text-align:center;padding:2rem}.loading-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b35;margin-bottom:1.5rem;opacity:.5}.loading-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#fff}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;font-size:.95rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.1);border-left-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.reels-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:1rem;padding:0 .5rem}@media (min-width: 640px){.reels-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.5rem}}.reel-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}.reel-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.reel-card[_ngcontent-%COMP%]:active{transform:scale(.98)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.reel-thumbnail[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:9/16;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,#1a1a1a,#2d2d2d);margin-bottom:.5rem;display:flex;align-items:center;justify-content:center}.reel-thumbnail[_ngcontent-%COMP%]:before{content:"\\1f3ac";font-size:3rem;opacity:.3;position:absolute}.reel-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .reel-thumbnail[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:relative;z-index:1}.reel-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:#0000004d;opacity:0;transition:opacity .2s;z-index:2}.reel-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 8px rgba(0,0,0,.5))}.reel-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;left:.5rem;right:.5rem;display:flex;gap:.75rem;font-size:.75rem;color:#fff;z-index:2}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;background:#0009;backdrop-filter:blur(1px);padding:.25rem .5rem;border-radius:12px;font-weight:600}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.reel-info[_ngcontent-%COMP%]   .reel-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#fff;margin-bottom:.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reel-info[_ngcontent-%COMP%]   .reel-vendor[_ngcontent-%COMP%]{font-size:.8rem;color:#888;margin-bottom:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b35,#f7931e);color:#fff;padding:.25rem .5rem;border-radius:8px;font-weight:600}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]   .distance[_ngcontent-%COMP%]{color:#666}']})};var Ks=zN(oN());function aG(n,e){n&1&&(C(0,"span"),H(1,"Search"),D())}function cG(n,e){n&1&&(C(0,"span"),H(1,"..."),D())}function lG(n,e){if(n&1){let t=gt();C(0,"div",20),ae("click",function(){let r=be(t).$implicit,o=ve(2);return Ee(o.selectSearchResult(r))}),H(1),D()}if(n&2){let t=e.$implicit;j(),ot(" ",t.display_name," ")}}function uG(n,e){if(n&1&&(C(0,"div",18),Re(1,lG,2,1,"div",19),D()),n&2){let t=ve();j(),X("ngForOf",t.searchResults)}}var cv=class n{locationSelected=new rt;cancel=new rt;map;marker;searchQuery="";searchResults=[];isSearching=!1;selectedLat=12.9716;selectedLng=77.5946;constructor(){}ngOnInit(){}ngAfterViewInit(){this.initMap()}ngOnDestroy(){this.map&&this.map.remove()}initMap(){this.map=Ks.map("map").setView([this.selectedLat,this.selectedLng],13),Ks.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map),this.addMarker(this.selectedLat,this.selectedLng),this.map.on("click",e=>{this.updateLocation(e.latlng.lat,e.latlng.lng)}),setTimeout(()=>{this.map?.invalidateSize()},100)}addMarker(e,t){if(this.marker)this.marker.setLatLng([e,t]);else{let i=Ks.divIcon({className:"custom-pin",html:`<svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="#ff4757" stroke="white" stroke-width="2"/>
               </svg>`,iconSize:[30,30],iconAnchor:[15,30]});this.marker=Ks.marker([e,t],{icon:i,draggable:!0}).addTo(this.map),this.marker.on("dragend",()=>{let r=this.marker.getLatLng();this.updateLocation(r.lat,r.lng,!1)})}}updateLocation(e,t,i=!1){this.selectedLat=e,this.selectedLng=t,this.marker?this.marker.setLatLng([e,t]):this.addMarker(e,t),i&&this.map&&this.map.panTo([e,t])}searchLocation(){return T(this,null,function*(){if(this.searchQuery.trim()){this.isSearching=!0,this.searchResults=[];try{let t=yield(yield fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(this.searchQuery)}`)).json();this.searchResults=t}catch(e){console.error("Error searching location:",e)}finally{this.isSearching=!1}}})}selectSearchResult(e){let t=parseFloat(e.lat),i=parseFloat(e.lon);this.updateLocation(t,i,!0),this.searchResults=[],this.searchQuery=e.display_name.split(",")[0]}confirmSelection(){this.locationSelected.emit({lat:this.selectedLat,lng:this.selectedLng})}onCancel(){this.cancel.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=mt({type:n,selectors:[["app-location-picker"]],outputs:{locationSelected:"locationSelected",cancel:"cancel"},standalone:!0,features:[vt],decls:27,vars:13,consts:[[1,"picker-overlay"],[1,"picker-container"],[1,"picker-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-bar"],["type","text","placeholder","Search for a place...",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-btn",3,"click","disabled"],[4,"ngIf"],["class","search-results",4,"ngIf"],[1,"map-container"],["id","map"],[1,"picker-footer"],[1,"coords"],[1,"actions"],[1,"cancel-btn",3,"click"],[1,"confirm-btn",3,"click"],[1,"search-results"],["class","result-item",3,"click",4,"ngFor","ngForOf"],[1,"result-item",3,"click"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),H(4,"Pick Location"),D(),C(5,"button",3),ae("click",function(){return i.onCancel()}),Te(),C(6,"svg",4),ie(7,"path",5),D()()(),We(),C(8,"div",6)(9,"input",7),_n("ngModelChange",function(o){return Sn(i.searchQuery,o)||(i.searchQuery=o),o}),ae("keyup.enter",function(){return i.searchLocation()}),D(),C(10,"button",8),ae("click",function(){return i.searchLocation()}),Re(11,aG,2,0,"span",9)(12,cG,2,0,"span",9),D()(),Re(13,uG,2,1,"div",10),C(14,"div",11),ie(15,"div",12),D(),C(16,"div",13)(17,"div",14)(18,"small"),H(19),fd(20,"number"),fd(21,"number"),D()(),C(22,"div",15)(23,"button",16),ae("click",function(){return i.onCancel()}),H(24,"Cancel"),D(),C(25,"button",17),ae("click",function(){return i.confirmSelection()}),H(26,"Confirm Location"),D()()()()()),t&2&&(j(9),gn("ngModel",i.searchQuery),j(),X("disabled",i.isSearching),j(),X("ngIf",!i.isSearching),j(),X("ngIf",i.isSearching),j(),X("ngIf",i.searchResults.length>0),j(6),Z0("",pd(20,7,i.selectedLat,"1.4-4"),", ",pd(21,10,i.selectedLng,"1.4-4"),""))},dependencies:[Tt,Yn,Xt,sM,Xn,Jn,Gi,Ti],styles:[".picker-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;z-index:2000;display:flex;align-items:center;justify-content:center;padding:20px}.picker-container[_ngcontent-%COMP%]{background:#1a1a1a;width:100%;max-width:500px;height:80vh;border-radius:12px;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 4px 20px #00000080}.picker-header[_ngcontent-%COMP%]{padding:15px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.1)}.picker-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.1rem}.picker-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;padding:5px;cursor:pointer}.search-bar[_ngcontent-%COMP%]{padding:15px;display:flex;gap:10px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;background:#333;border:1px solid #444;border-radius:8px;padding:10px 15px;color:#fff;font-size:.95rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff4757}.search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{background:#ff4757;color:#fff;border:none;border-radius:8px;padding:0 20px;font-weight:600;cursor:pointer}.search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:disabled{opacity:.7}.search-results[_ngcontent-%COMP%]{background:#2a2a2a;max-height:150px;overflow-y:auto;border-bottom:1px solid #444}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{padding:12px 15px;color:#ddd;border-bottom:1px solid #333;cursor:pointer;font-size:.9rem}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]:hover{background:#333}.map-container[_ngcontent-%COMP%]{flex:1;position:relative;background:#eee}.map-container[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:100%}.picker-footer[_ngcontent-%COMP%]{padding:15px 20px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;border-top:1px solid rgba(255,255,255,.1)}.picker-footer[_ngcontent-%COMP%]   .coords[_ngcontent-%COMP%]{color:#888;font-family:monospace}.picker-footer[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:10px}.picker-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:600;cursor:pointer;border:none}.picker-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#333;color:#fff}.picker-footer[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{background:#ff4757;color:#fff}"]})};function dG(n,e){if(n&1){let t=gt();C(0,"div",29),ie(1,"video",30),C(2,"button",31),ae("click",function(){be(t);let r=ve();return Ee(r.removeFile())}),Te(),C(3,"svg",32),ie(4,"path",33),D()()()}if(n&2){let t=ve();j(),X("src",t.videoPreviewUrl,ui)}}function hG(n,e){if(n&1){let t=gt();C(0,"label",34)(1,"input",35),ae("change",function(r){be(t);let o=ve();return Ee(o.onFileSelected(r))}),D(),C(2,"div",36),Te(),C(3,"svg",37),ie(4,"path",38)(5,"circle",39),D(),We(),C(6,"p",40),H(7,"Select Video"),D(),C(8,"p",41),H(9,"MP4, MOV, or WebM (max 100MB)"),D()()()}}function fG(n,e){if(n&1&&(C(0,"div",42),Te(),C(1,"svg",32),ie(2,"circle",43)(3,"path",44),D(),H(4),D()),n&2){let t=ve();j(4),ot(" ",t.uploadError," ")}}function pG(n,e){n&1&&(C(0,"div",45),Te(),C(1,"svg",32),ie(2,"path",46)(3,"path",47),D(),H(4," Upload successful! Redirecting... "),D())}function mG(n,e){if(n&1&&(C(0,"div",48)(1,"div",49),ie(2,"div",50),D(),C(3,"p",51),H(4),D()()),n&2){let t=ve();j(2),wo("width",t.uploadProgress,"%"),j(2),ot("Uploading... ",t.uploadProgress,"%")}}function gG(n,e){n&1&&(C(0,"span"),H(1,"Upload Reel"),D())}function _G(n,e){n&1&&(C(0,"span"),H(1,"Uploading..."),D())}function vG(n,e){if(n&1){let t=gt();C(0,"app-location-picker",52),ae("locationSelected",function(r){be(t);let o=ve();return Ee(o.onLocationSelected(r))})("cancel",function(){be(t);let r=ve();return Ee(r.closeLocationPicker())}),D()}}var _u=class n{constructor(e,t,i,r){this.reelsService=e;this.auth=t;this.router=i;this.locationService=r}title="";vendor="";price=null;latitude=null;longitude=null;selectedFile=null;videoPreviewUrl=null;isUploading=!1;uploadProgress=0;uploadError=null;uploadSuccess=!1;maxFileSize=200*1024*1024;acceptedFormats=["video/mp4","video/quicktime","video/webm"];ngOnInit(){}onFileSelected(e){let t=e.target;if(t.files&&t.files.length>0){let i=t.files[0];this.validateAndSetFile(i)}}validateAndSetFile(e){if(this.uploadError=null,!this.acceptedFormats.includes(e.type)){this.uploadError="Please select a valid video file (MP4, MOV, or WebM)";return}if(e.size>this.maxFileSize){this.uploadError=`File size must be less than ${this.maxFileSize/(1024*1024)}MB`;return}this.selectedFile=e,this.createVideoPreview(e)}createVideoPreview(e){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl),this.videoPreviewUrl=URL.createObjectURL(e)}removeFile(){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl),this.selectedFile=null,this.videoPreviewUrl=null,this.uploadError=null}isFormValid(){return!!(this.selectedFile&&this.title.trim()&&this.vendor.trim()&&this.price!==null&&this.price>0&&this.latitude!==null&&this.longitude!==null)}showLocationPicker=!1;getCurrentLocation(){return T(this,null,function*(){try{let e=yield this.locationService.getUserLocation();this.latitude=e.latitude,this.longitude=e.longitude}catch(e){console.error("Error getting location:",e),this.uploadError="Failed to get current location. Please enter coordinates manually."}})}openLocationPicker(){this.showLocationPicker=!0}onLocationSelected(e){this.latitude=e.lat,this.longitude=e.lng,this.showLocationPicker=!1}closeLocationPicker(){this.showLocationPicker=!1}uploadReel(){return T(this,null,function*(){if(!this.isFormValid()||!this.selectedFile){this.uploadError="Please fill in all fields and select a video";return}let e=this.auth.currentUser;if(!e){this.uploadError="You must be logged in to upload a reel";return}this.isUploading=!0,this.uploadError=null,this.uploadProgress=0;try{let t=Date.now(),i=this.selectedFile.name.replace(/[^a-zA-Z0-9.]/g,"_"),r=`videos/${e.uid}/${t}_${i}`;this.reelsService.getUploadUrl(r,this.selectedFile.type).subscribe({next:o=>{let{uploadUrl:a,key:l}=o;this.selectedFile&&this.reelsService.uploadToR2(a,this.selectedFile).subscribe({next:u=>T(this,null,function*(){if(u.type===1)u.total&&(this.uploadProgress=Math.round(100*u.loaded/u.total));else if(u.type===4)try{let f=`https://r2-video-uploader.bengaluru-swada.workers.dev/${l}`;yield this.reelsService.createReel({cloudflareVideoId:"",videoUrl:f,thumbnailUrl:"",duration:0,title:this.title.trim(),vendor:this.vendor.trim(),price:this.price,latitude:this.latitude,longitude:this.longitude,uploadedBy:e.uid,createdAt:null,viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}),this.uploadSuccess=!0,setTimeout(()=>{this.router.navigate(["/main-app"])},1500)}catch(f){console.error("Error creating reel record:",f),this.uploadError="Video uploaded but failed to save metadata.",this.isUploading=!1}}),error:u=>{console.error("R2 Upload error:",u),this.uploadError="Failed to upload video to server.",this.isUploading=!1}})},error:o=>{console.error("Signed URL error:",o),this.uploadError="Failed to initialize upload.",this.isUploading=!1}})}catch(t){console.error("Upload flow error:",t),this.uploadError=t instanceof Error?t.message:"Unknown error occurred",this.isUploading=!1}})}cancel(){this.router.navigate(["/main-app"])}ngOnDestroy(){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl)}static \u0275fac=function(t){return new(t||n)(oe(Ki),oe(St),oe(lt),oe(Wi))};static \u0275cmp=mt({type:n,selectors:[["app-upload-reel"]],standalone:!0,features:[vt],decls:47,vars:21,consts:[["fileSelector",""],[1,"upload-container"],[1,"upload-header"],[1,"spacer"],[1,"upload-content"],[1,"video-preview-section"],["class","video-preview",4,"ngIf","ngIfElse"],[1,"form-section"],[1,"form-group"],["for","title"],["type","text","id","title","placeholder","e.g., Masala Dosa",3,"ngModelChange","ngModel","disabled"],["for","vendor"],["type","text","id","vendor","placeholder","e.g., Vidyarthi Bhavan",3,"ngModelChange","ngModel","disabled"],["for","price"],["type","number","id","price","placeholder","50","min","0",3,"ngModelChange","ngModel","disabled"],["type","button",1,"location-btn",3,"click","disabled"],["type","button",1,"location-btn","map-btn",2,"margin-top","10px",3,"click","disabled"],[1,"form-row"],["for","latitude"],["type","number","id","latitude","placeholder","12.9352","step","0.0001",3,"ngModelChange","ngModel","disabled"],["for","longitude"],["type","number","id","longitude","placeholder","77.6245","step","0.0001",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],["class","upload-progress",4,"ngIf"],[1,"action-buttons"],[1,"upload-btn",3,"click","disabled"],[4,"ngIf"],[3,"locationSelected","cancel",4,"ngIf"],[1,"video-preview"],["controls","","playsinline","",1,"preview-video",3,"src"],[1,"remove-video-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"file-selector"],["type","file","accept","video/mp4,video/quicktime,video/webm","hidden","",3,"change"],[1,"file-selector-content"],["width","48","height","48","viewBox","0 0 24 24","fill","none"],["d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2"],["cx","12","cy","13","r","4","stroke","currentColor","stroke-width","2"],[1,"selector-title"],[1,"selector-subtitle"],[1,"error-message"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M12 8v4M12 16h.01","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"success-message"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M22 4L12 14.01l-3-3","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"upload-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[3,"locationSelected","cancel"]],template:function(t,i){if(t&1){let r=gt();C(0,"div",1)(1,"div",2)(2,"h1"),H(3,"Upload Reel"),D(),ie(4,"div",3),D(),C(5,"div",4)(6,"div",5),Re(7,dG,5,1,"div",6)(8,hG,10,0,"ng-template",null,0,N1),D(),C(10,"div",7)(11,"div",8)(12,"label",9),H(13,"Dish Name *"),D(),C(14,"input",10),_n("ngModelChange",function(a){return be(r),Sn(i.title,a)||(i.title=a),Ee(a)}),D()(),C(15,"div",8)(16,"label",11),H(17,"Vendor Name *"),D(),C(18,"input",12),_n("ngModelChange",function(a){return be(r),Sn(i.vendor,a)||(i.vendor=a),Ee(a)}),D()(),C(19,"div",8)(20,"label",13),H(21,"Price (\u20B9) *"),D(),C(22,"input",14),_n("ngModelChange",function(a){return be(r),Sn(i.price,a)||(i.price=a),Ee(a)}),D()(),C(23,"div",8)(24,"label"),H(25,"Location *"),D(),C(26,"button",15),ae("click",function(){return be(r),Ee(i.getCurrentLocation())}),H(27," \u{1F4CD} Use Current Location "),D(),C(28,"button",16),ae("click",function(){return be(r),Ee(i.openLocationPicker())}),H(29," \u{1F5FA}\uFE0F Pick on Map "),D()(),C(30,"div",17)(31,"div",8)(32,"label",18),H(33,"Latitude *"),D(),C(34,"input",19),_n("ngModelChange",function(a){return be(r),Sn(i.latitude,a)||(i.latitude=a),Ee(a)}),D()(),C(35,"div",8)(36,"label",20),H(37,"Longitude *"),D(),C(38,"input",21),_n("ngModelChange",function(a){return be(r),Sn(i.longitude,a)||(i.longitude=a),Ee(a)}),D()()(),Re(39,fG,5,1,"div",22)(40,pG,5,0,"div",23)(41,mG,5,3,"div",24),C(42,"div",25)(43,"button",26),ae("click",function(){return be(r),Ee(i.uploadReel())}),Re(44,gG,2,0,"span",27)(45,_G,2,0,"span",27),D()()()(),Re(46,vG,1,0,"app-location-picker",28),D()}if(t&2){let r=yl(9);j(7),X("ngIf",i.videoPreviewUrl)("ngIfElse",r),j(7),gn("ngModel",i.title),X("disabled",i.isUploading),j(4),gn("ngModel",i.vendor),X("disabled",i.isUploading),j(4),gn("ngModel",i.price),X("disabled",i.isUploading),j(4),X("disabled",i.isUploading),j(2),X("disabled",i.isUploading),j(6),gn("ngModel",i.latitude),X("disabled",i.isUploading),j(4),gn("ngModel",i.longitude),X("disabled",i.isUploading),j(),X("ngIf",i.uploadError),j(),X("ngIf",i.uploadSuccess),j(),X("ngIf",i.isUploading),j(2),X("disabled",!i.isFormValid()||i.isUploading),j(),X("ngIf",!i.isUploading),j(),X("ngIf",i.isUploading),j(),X("ngIf",i.showLocationPicker)}},dependencies:[Tt,Xt,Xn,Jn,gT,Gi,vT,Ti,cv],styles:[".upload-container[_ngcontent-%COMP%]{height:100vh;background:#0a0a0a;padding:0 0 100px;overflow-y:auto;position:relative}.upload-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:20px;background:#00000080;backdrop-filter:blur(1px);border-bottom:1px solid rgba(255,255,255,.1);position:sticky;top:0;z-index:10}.upload-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0;color:#fff}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;transition:all .2s ease;border-radius:50%}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.upload-header[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{width:40px}.upload-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}.video-preview-section[_ngcontent-%COMP%]{margin-bottom:24px}.video-preview[_ngcontent-%COMP%]{position:relative;background:#1a1a1a;border-radius:16px;overflow:hidden;aspect-ratio:9/16;max-height:500px;border:1px solid rgba(255,255,255,.1)}.video-preview[_ngcontent-%COMP%]   .preview-video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.video-preview[_ngcontent-%COMP%]   .remove-video-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;background:#000c;backdrop-filter:blur(1px);border:1px solid rgba(255,255,255,.2);border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;transition:all .2s ease}.video-preview[_ngcontent-%COMP%]   .remove-video-btn[_ngcontent-%COMP%]:hover{background:#ff3b30e6;border-color:#ff3b30}.video-preview[_ngcontent-%COMP%]   .remove-video-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.file-selector[_ngcontent-%COMP%]{display:block;cursor:pointer}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;padding:60px 40px;text-align:center;border:2px dashed rgba(255,107,53,.3);transition:all .3s ease}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b35;margin-bottom:20px}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   .selector-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#fff;margin:0 0 8px}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   .selector-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#888;margin:0}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]:hover{border-color:#ff6b35;background:#222;transform:translateY(-2px);box-shadow:0 8px 24px #ff6b3533}.form-section[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;padding:24px;border:1px solid rgba(255,255,255,.1)}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;color:#aaa;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;background:#0a0a0a;border:1px solid rgba(255,255,255,.1);border-radius:12px;font-size:16px;color:#fff;transition:all .2s ease;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff6b35;background:#111;box-shadow:0 0 0 3px #ff6b351a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#0a0a0a;opacity:.5;cursor:not-allowed}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#555}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:-1fr 1fr;gap:16px}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:12px;font-size:14px;margin-bottom:20px;font-weight:500}.error-message[_ngcontent-%COMP%]{background:#ff3b301a;color:#ff3b30;border:1px solid rgba(255,59,48,.3)}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.success-message[_ngcontent-%COMP%]{background:#34c7591a;color:#34c759;border:1px solid rgba(52,199,89,.3)}.success-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.upload-progress[_ngcontent-%COMP%]{margin-bottom:24px}.upload-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:6px;background:#ffffff1a;border-radius:3px;overflow:hidden;margin-bottom:8px}.upload-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ff6b35,#ff8c42);transition:width .3s ease;border-radius:3px}.upload-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:13px;color:#888;text-align:center;margin:0;font-weight:500}.action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:-1fr 2fr;gap:12px;margin-top:24px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:16px 24px;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;border:none}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.action-buttons[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.1)}.action-buttons[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff26}.action-buttons[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b35,#ff8c42);color:#fff;box-shadow:0 4px 12px #ff6b354d}.action-buttons[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #ff6b3566;transform:translateY(-2px)}@media (max-width: 768px){.upload-container[_ngcontent-%COMP%]{padding-bottom:100px}.upload-content[_ngcontent-%COMP%]{padding:16px}.form-section[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]{padding:40px 24px}}"]})};function yG(n,e){if(n&1){let t=gt();C(0,"div",37),ae("click",function(){let r=be(t).$implicit,o=ve(2);return Ee(o.selectLocation(r))}),C(1,"div",38),Te(),C(2,"svg",39),ie(3,"path",5),D()(),We(),C(4,"div",40)(5,"div",41),H(6),D(),C(7,"div",42),H(8),D()(),Te(),C(9,"svg",43),ie(10,"path",44),D()()}if(n&2){let t=e.$implicit;j(6),_t(t.name),j(2),ot("Pincode: ",t.pincode,"")}}function wG(n,e){n&1&&(C(0,"div",45),Te(),C(1,"svg",46),ie(2,"circle",31)(3,"path",32),D(),We(),C(4,"p"),H(5,"No locations found"),D(),C(6,"span"),H(7,"Try searching for a different area"),D()())}function bG(n,e){if(n&1){let t=gt();C(0,"div",23),ae("click",function(){be(t);let r=ve();return Ee(r.closeLocationModal())}),C(1,"div",24),ae("click",function(r){return be(t),Ee(r.stopPropagation())}),C(2,"div",25)(3,"h2"),H(4,"Select Location"),D(),C(5,"button",26),ae("click",function(){be(t);let r=ve();return Ee(r.closeLocationModal())}),Te(),C(6,"svg",27),ie(7,"path",28),D()()(),We(),C(8,"div",29),Te(),C(9,"svg",30),ie(10,"circle",31)(11,"path",32),D(),We(),C(12,"input",33),_n("ngModelChange",function(r){be(t);let o=ve();return Sn(o.locationSearchQuery,r)||(o.locationSearchQuery=r),Ee(r)}),D()(),C(13,"div",34),Re(14,yG,11,2,"div",35)(15,wG,8,0,"div",36),D()()()}if(n&2){let t=ve();j(12),gn("ngModel",t.locationSearchQuery),j(2),X("ngForOf",t.filteredLocations),j(),X("ngIf",t.filteredLocations.length===0)}}function EG(n,e){if(n&1){let t=gt();C(0,"button",47),ae("click",function(){let r=be(t).$implicit,o=ve();return Ee(o.selectPrice(r))}),H(1),D()}if(n&2){let t=e.$implicit,i=ve();Ze("active",i.selectedPriceRange===t),j(),ot(" ",t.label," ")}}function IG(n,e){if(n&1){let t=gt();C(0,"button",47),ae("click",function(){let r=be(t).$implicit,o=ve();return Ee(o.selectDistance(r))}),H(1),D()}if(n&2){let t=e.$implicit,i=ve();Ze("active",i.selectedDistance===t),j(),ot(" ",t.label," ")}}function CG(n,e){if(n&1){let t=gt();C(0,"button",47),ae("click",function(){let r=be(t).$implicit,o=ve();return Ee(o.selectSort(r))}),H(1),D()}if(n&2){let t=e.$implicit,i=ve();Ze("active",i.selectedSort===t),j(),ot(" ",t," ")}}function TG(n,e){n&1&&(C(0,"div",48),ie(1,"div",49),D())}function SG(n,e){n&1&&(C(0,"div",50)(1,"p"),H(2,"No tasty bites found matching your search."),D()())}function DG(n,e){if(n&1){let t=gt();C(0,"div",51),ae("click",function(){let r=be(t).$implicit,o=ve();return Ee(o.openReel(r))}),C(1,"div",52)(2,"video",53,0),ae("loadedmetadata",function(){be(t);let r=yl(3);return Ee(r.currentTime=.1)}),D(),C(4,"div",54),H(5),D()(),C(6,"div",55)(7,"div",56)(8,"h3",57),H(9),D()(),C(10,"p",58),H(11),D(),C(12,"div",59)(13,"span",60),H(14),D()()()()}if(n&2){let t=e.$implicit;j(2),X("src",t.videoUrl,ui),j(3),_t(t.distanceStr),j(4),_t(t.title),j(2),_t(t.vendor),j(3),ot("\u20B9",t.price,"")}}var lv=class n{constructor(e,t,i){this.reelsService=e;this.locationService=t;this.router=i}searchQuery="";reels=[];filteredReels=[];isLoading=!1;locationName="Koramangala, Bangalore";showLocationModal=!1;locationSearchQuery="";categories=["All","South Indian","North Indian","Street Food","Desserts","Beverages"];selectedCategory="All";priceRanges=[{label:"All",min:0,max:1/0},{label:"\u20B90-30",min:0,max:30},{label:"\u20B931-60",min:31,max:60},{label:"\u20B961-100",min:61,max:100},{label:"\u20B9100+",min:101,max:1/0}];selectedPriceRange=this.priceRanges[0];distances=[{label:"All",max:1/0},{label:"< 1 km",max:1},{label:"1-3 km",max:3},{label:"3-5 km",max:5},{label:"5+ km",max:1/0}];selectedDistance=this.distances[0];sortOptions=["Nearest First","Price: Low to High","Price: High to Low"];selectedSort="Nearest First";ngOnInit(){return T(this,null,function*(){this.locationService.currentLocation$.subscribe(e=>{e&&(this.locationName=`${e.name}, Bangalore`,this.loadReels())});try{let e=yield this.locationService.getUserLocation();this.locationName=this.locationService.getAreaName(e.latitude,e.longitude)+", Bangalore"}catch(e){console.warn("Could not get initial location name",e)}yield this.loadReels()})}loadReels(){return T(this,null,function*(){this.isLoading=!0;try{let e=yield this.reelsService.getReels(50);this.reels=yield Promise.all(e.map(t=>T(this,null,function*(){let i=1/0,r="-- km";if(t.latitude&&t.longitude)try{let o=yield this.locationService.getUserLocation();i=this.locationService.calculateDistance(o.latitude,o.longitude,t.latitude,t.longitude),r=i.toFixed(1)+" km"}catch(o){console.error("Error calculating distance",o)}return Oe(Y({},t),{distanceVal:i,distanceStr:r,rating:(4+Math.random()).toFixed(1)})}))),this.applyFilters()}catch(e){console.error("Error loading reels for search:",e)}finally{this.isLoading=!1}})}applyFilters(){let e=this.reels;if(this.searchQuery.trim()){let t=this.searchQuery.toLowerCase();e=e.filter(i=>i.title?.toLowerCase().includes(t)||i.vendor?.toLowerCase().includes(t))}if(this.selectedCategory,e=e.filter(t=>{let i=Number(t.price);return i>=this.selectedPriceRange.min&&i<=this.selectedPriceRange.max}),this.selectedDistance.label!=="All")if(this.selectedDistance.label==="5+ km")e=e.filter(t=>t.distanceVal>5&&t.distanceVal!==1/0);else if(this.selectedDistance.label==="< 1 km")e=e.filter(t=>t.distanceVal<1);else{let t=this.selectedDistance.max,i=this.distances[this.distances.indexOf(this.selectedDistance)-1]?.max||0;this.selectedDistance.label==="1-3 km"?e=e.filter(r=>r.distanceVal>=1&&r.distanceVal<=3):this.selectedDistance.label==="3-5 km"&&(e=e.filter(r=>r.distanceVal>=3&&r.distanceVal<=5))}this.selectedSort==="Nearest First"?e.sort((t,i)=>t.distanceVal-i.distanceVal):this.selectedSort==="Price: Low to High"?e.sort((t,i)=>Number(t.price)-Number(i.price)):this.selectedSort==="Price: High to Low"&&e.sort((t,i)=>Number(i.price)-Number(t.price)),this.filteredReels=e}selectCategory(e){this.selectedCategory=e,this.applyFilters()}selectPrice(e){this.selectedPriceRange=e,this.applyFilters()}selectDistance(e){this.selectedDistance=e,this.applyFilters()}selectSort(e){this.selectedSort=e,this.applyFilters()}openReel(e){this.router.navigate(["/main-app"],{state:{openFeed:!0,reelId:e.id}})}openLocationModal(){this.showLocationModal=!0,this.locationSearchQuery=""}closeLocationModal(){this.showLocationModal=!1,this.locationSearchQuery=""}selectLocation(e){this.locationService.updateLocation(e.name,e.lat,e.lng),this.closeLocationModal()}get filteredLocations(){let e=this.locationSearchQuery.toLowerCase().trim();return e?this.locationService.AREAS.filter(t=>t.name.toLowerCase().includes(e)||t.pincode.includes(e)):this.locationService.AREAS}static \u0275fac=function(t){return new(t||n)(oe(Ki),oe(Wi),oe(lt))};static \u0275cmp=mt({type:n,selectors:[["app-search"]],standalone:!0,features:[vt],decls:32,vars:9,consts:[["videoThumb",""],[1,"search-container"],[1,"search-header"],[1,"location-context",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none",1,"location-pin"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","currentColor"],[1,"location-text"],["width","12","height","12","viewBox","0 0 24 24","fill","none",1,"chevron-down"],["d","M6 9l6 6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-bar"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","placeholder","Search dosa, vada pav, biryani...",3,"ngModelChange","ngModel"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"filters-scroll"],[1,"filter-section-title"],[1,"filter-group"],["class","chip",3,"active","click",4,"ngFor","ngForOf"],[1,"results-grid"],["class","loading-spinner",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","food-card",3,"click",4,"ngFor","ngForOf"],[1,"modal-overlay",3,"click"],[1,"location-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"modal-search-box"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"search-icon"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21l-4.35-4.35","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["type","text","placeholder","Search for a location...",1,"search-input",3,"ngModelChange","ngModel"],[1,"locations-list"],["class","location-item",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"location-item",3,"click"],[1,"location-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],[1,"location-info"],[1,"location-name"],[1,"location-area"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"chevron-right"],["d","M9 18l6-6-6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"no-results"],["width","48","height","48","viewBox","0 0 24 24","fill","none"],[1,"chip",3,"click"],[1,"loading-spinner"],[1,"spinner"],[1,"empty-state"],[1,"food-card",3,"click"],[1,"card-image"],["muted","","playsinline","","preload","metadata",3,"loadedmetadata","src"],[1,"distance-badge"],[1,"card-details"],[1,"header-row"],[1,"dish-name"],[1,"vendor-name"],[1,"price-row"],[1,"price"]],template:function(t,i){t&1&&(C(0,"div",1)(1,"div",2)(2,"div",3),ae("click",function(){return i.openLocationModal()}),Te(),C(3,"svg",4),ie(4,"path",5),D(),We(),C(5,"span",6),H(6),D(),Te(),C(7,"svg",7),ie(8,"path",8),D()(),We(),C(9,"div",9),Te(),C(10,"svg",10),ie(11,"circle",11)(12,"line",12),D(),We(),C(13,"input",13),_n("ngModelChange",function(o){return Sn(i.searchQuery,o)||(i.searchQuery=o),o}),ae("ngModelChange",function(){return i.applyFilters()}),D()()(),Re(14,bG,16,3,"div",14),C(15,"div",15)(16,"div",16),H(17,"Price Range"),D(),C(18,"div",17),Re(19,EG,2,3,"button",18),D(),C(20,"div",16),H(21,"Distance"),D(),C(22,"div",17),Re(23,IG,2,3,"button",18),D(),C(24,"div",16),H(25,"Sort By"),D(),C(26,"div",17),Re(27,CG,2,3,"button",18),D()(),C(28,"div",19),Re(29,TG,2,0,"div",20)(30,SG,3,0,"div",21)(31,DG,15,5,"div",22),D()()),t&2&&(j(6),_t(i.locationName),j(7),gn("ngModel",i.searchQuery),j(),X("ngIf",i.showLocationModal),j(5),X("ngForOf",i.priceRanges),j(4),X("ngForOf",i.distances),j(4),X("ngForOf",i.sortOptions),j(2),X("ngIf",i.isLoading),j(),X("ngIf",!i.isLoading&&i.filteredReels.length===0),j(),X("ngForOf",i.filteredReels))},dependencies:[Tt,Yn,Xt,Xn,Jn,Gi,Ti],styles:[".search-container[_ngcontent-%COMP%]{height:100%;overflow-y:auto;background:#f8f9fa;background:#000;padding-bottom:80px;color:#fff}.search-header[_ngcontent-%COMP%]{padding:16px;background:#000;position:sticky;top:0;z-index:10;display:flex;flex-direction:column;gap:12px}.location-context[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#ffffff0d;padding:8px 16px;border-radius:12px;color:#ff6b35;font-size:.9rem;font-weight:500;cursor:pointer;width:fit-content;border:1px solid rgba(255,107,53,.2)}.location-context[_ngcontent-%COMP%]   .location-text[_ngcontent-%COMP%]{color:#fff}.location-context[_ngcontent-%COMP%]   .chevron-down[_ngcontent-%COMP%]{color:#888}.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#1a1a1a;border-radius:12px;padding:12px 16px;border:1px solid rgba(255,255,255,.1)}.search-bar[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{color:#888;margin-right:12px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:15px;width:100%;outline:none}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#666}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;backdrop-filter:blur(4px);z-index:1000;display:flex;align-items:flex-end}.location-modal[_ngcontent-%COMP%]{background:#121212;width:100%;max-height:80vh;border-radius:24px 24px 0 0;display:flex;flex-direction:column;border:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 20px 16px;border-bottom:1px solid rgba(255,255,255,.05)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff;margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#888;cursor:pointer}.modal-search-box[_ngcontent-%COMP%]{padding:16px 20px;position:relative}.modal-search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:36px;top:50%;transform:translateY(-50%);color:#666}.modal-search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 48px;background:#1e1e1e;border:1px solid rgba(255,255,255,.1);border-radius:12px;color:#fff;box-sizing:border-box}.modal-search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff6b35}.locations-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:24px}.location-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;cursor:pointer;border-bottom:1px solid rgba(255,255,255,.05)}.location-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.location-item[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#ff6b351a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]{flex:1}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-area[_ngcontent-%COMP%]{font-size:13px;color:#888}.no-results[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#666}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:8px}.filters-scroll[_ngcontent-%COMP%]{padding:0 16px 16px}.filters-scroll[_ngcontent-%COMP%]   .filter-section-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#fff;margin:12px 0 8px}.filters-scroll[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;gap:8px;overflow-x:auto;padding-bottom:4px;scrollbar-width:none}.filters-scroll[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.filters-scroll[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{background:#1a1a1a;color:#aaa;border:1px solid rgba(255,255,255,.1);padding:6px 14px;border-radius:20px;font-size:13px;white-space:nowrap;cursor:pointer;transition:all .2s}.filters-scroll[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;border-color:#ff6b35}.results-grid[_ngcontent-%COMP%]{padding:0 16px;display:grid;grid-template-columns:1fr;grid-template-columns:repeat(2,1fr);gap:16px}.food-card[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;overflow:hidden;cursor:pointer;transition:transform .2s}.food-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.food-card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{position:relative;aspect-ratio:4/3;background:#222}.food-card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.food-card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]   .distance-badge[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:#0009;backdrop-filter:blur(4px);padding:4px 8px;border-radius:6px;font-size:11px;font-weight:600}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{padding:12px}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .dish-name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin:0 8px 0 0;color:#fff;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{display:flex;align-items:center;background:#2ecc71;color:#fff;padding:2px 4px;border-radius:4px;font-size:11px;font-weight:700}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{font-size:10px;margin-left:2px}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .vendor-name[_ngcontent-%COMP%]{font-size:13px;color:#888;margin-bottom:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff}.food-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]{font-size:10px;color:#ff9f43;font-weight:700;text-transform:uppercase}.loading-spinner[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:center;padding:40px}.spinner[_ngcontent-%COMP%]{width:30px;height:30px;border:3px solid rgba(255,255,255,.1);border-top-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{grid-column:1/-1;text-align:center;padding:40px;color:#666;font-size:14px}"]})};function AG(n,e){n&1&&(C(0,"div",7),ie(1,"div",8),D())}function MG(n,e){if(n&1&&(C(0,"div",12)(1,"div",13),H(2),D(),C(3,"div",14)(4,"div",15),ie(5,"video",16),D(),C(6,"div",17)(7,"h3"),H(8),D(),C(9,"p",18),H(10),D(),C(11,"div",19)(12,"span"),H(13),D(),C(14,"span"),H(15),D()()()()()),n&2){let t=e.$implicit,i=e.index;j(2),ot("#",i+1,""),j(3),X("src",t.videoUrl,ui),j(3),_t(t.title),j(2),_t(t.vendor),j(3),ot("\u{1F441}\uFE0F ",t.viewCount||0,""),j(2),ot("\u2764\uFE0F ",t.likes||0,"")}}function xG(n,e){n&1&&(C(0,"div",20)(1,"p"),H(2,"No trending reels yet!"),D()())}function PG(n,e){if(n&1&&(C(0,"div",9),Re(1,MG,16,6,"div",10)(2,xG,3,0,"div",11),D()),n&2){let t=ve();j(),X("ngForOf",t.trendingReels),j(),X("ngIf",!t.isLoading&&t.trendingReels.length===0)}}function RG(n,e){if(n&1&&(C(0,"div",12)(1,"div",21),H(2,"\u{1F195}"),D(),C(3,"div",14)(4,"div",15),ie(5,"video",16),D(),C(6,"div",17)(7,"h3"),H(8),D(),C(9,"p",18),H(10),D(),C(11,"div",19)(12,"span"),H(13),fd(14,"date"),D()()()()()),n&2){let t=e.$implicit;j(5),X("src",t.videoUrl,ui),j(3),_t(t.title),j(2),_t(t.vendor),j(3),ot("\u{1F4C5} ",pd(14,4,t.createdAt==null?null:t.createdAt.toDate(),"shortDate"),"")}}function OG(n,e){n&1&&(C(0,"div",20)(1,"p"),H(2,"No new arrivals yet!"),D()())}function kG(n,e){if(n&1&&(C(0,"div",9),Re(1,RG,15,7,"div",10)(2,OG,3,0,"div",11),D()),n&2){let t=ve();j(),X("ngForOf",t.newArrivalsReels),j(),X("ngIf",!t.isLoading&&t.newArrivalsReels.length===0)}}var uv=class n{constructor(e){this.reelsService=e}trendingReels=[];newArrivalsReels=[];activeTab="trending";isLoading=!0;touchStartX=0;touchEndX=0;ngOnInit(){return T(this,null,function*(){yield this.loadTrending()})}loadTrending(){return T(this,null,function*(){this.isLoading=!0;try{let e=yield this.reelsService.getReels(50);this.trendingReels=[...e].sort((t,i)=>(i.viewCount||0)-(t.viewCount||0)).slice(0,10),this.newArrivalsReels=[...e].sort((t,i)=>{let r=t.createdAt?.toDate?t.createdAt.toDate().getTime():0;return(i.createdAt?.toDate?i.createdAt.toDate().getTime():0)-r}).slice(0,10)}catch(e){console.error("Error loading trending:",e)}finally{this.isLoading=!1}})}switchTab(e){this.activeTab=e,window.scrollTo({top:0,behavior:"smooth"})}onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX}onTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.handleSwipe()}handleSwipe(){this.touchStartX-this.touchEndX>50&&this.activeTab==="trending"&&this.switchTab("new"),this.touchEndX-this.touchStartX>50&&this.activeTab==="new"&&this.switchTab("trending")}static \u0275fac=function(t){return new(t||n)(oe(Ki))};static \u0275cmp=mt({type:n,selectors:[["app-trending"]],standalone:!0,features:[vt],decls:13,vars:9,consts:[[1,"trending-page"],[1,"tabs-header"],[1,"tab",3,"click"],[1,"slider"],[1,"content-container",3,"touchstart","touchend"],["class","loading-spinner",4,"ngIf"],["class","reels-list",4,"ngIf"],[1,"loading-spinner"],[1,"spinner"],[1,"reels-list"],["class","ranking-item",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"ranking-item"],[1,"rank"],[1,"reel-card"],[1,"thumbnail"],["muted","","loop","","playsinline","",3,"src"],[1,"info"],[1,"vendor"],[1,"stats"],[1,"empty-state"],[1,"rank","new"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2),ae("click",function(){return i.switchTab("trending")}),C(3,"span"),H(4,"Trending \u{1F525}"),D()(),C(5,"div",2),ae("click",function(){return i.switchTab("new")}),C(6,"span"),H(7,"New Arrivals \u2728"),D()(),ie(8,"div",3),D(),C(9,"div",4),ae("touchstart",function(o){return i.onTouchStart(o)})("touchend",function(o){return i.onTouchEnd(o)}),Re(10,AG,2,0,"div",5)(11,PG,3,2,"div",6)(12,kG,3,2,"div",6),D()()),t&2&&(j(2),Ze("active",i.activeTab==="trending"),j(3),Ze("active",i.activeTab==="new"),j(3),Ze("right",i.activeTab==="new"),j(2),X("ngIf",i.isLoading),j(),X("ngIf",!i.isLoading&&i.activeTab==="trending"),j(),X("ngIf",!i.isLoading&&i.activeTab==="new"))},dependencies:[Tt,Yn,Xt,oM],styles:[".trending-page[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:#000;color:#fff}.tabs-header[_ngcontent-%COMP%]{display:flex;position:relative;background:#000000e6;padding-top:max(12px,env(safe-area-inset-top));border-bottom:1px solid rgba(255,255,255,.1);z-index:10}.tabs-header[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1;text-align:center;padding:16px 0;font-weight:600;font-size:15px;color:#888;cursor:pointer;transition:color .3s}.tabs-header[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#ff6b35}.tabs-header[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:50%;height:2px;background:#ff6b35;transition:transform .3s ease}.tabs-header[_ngcontent-%COMP%]   .slider.right[_ngcontent-%COMP%]{transform:translate(100%)}.content-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:80px;min-height:0}.reels-list[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;gap:16px}.ranking-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;background:#111;border-radius:12px;padding:12px}.ranking-item[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{font-size:24px;font-weight:900;color:#ff6b35;min-width:40px;text-align:center;font-style:italic}.ranking-item[_ngcontent-%COMP%]   .rank.new[_ngcontent-%COMP%]{font-size:20px}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]{flex:1;display:flex;gap:12px}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:80px;height:120px;border-radius:8px;overflow:hidden;background:#222}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;color:#fff}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .vendor[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#ccc}.ranking-item[_ngcontent-%COMP%]   .reel-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:12px;color:#888}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:30px;height:30px;border:3px solid rgba(255,255,255,.1);border-top-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#888}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};var ef=class n{constructor(e,t){this.auth=e;this.router=t;let i=this.auth.currentUser;i&&(this.userEmail=i.email,i.displayName&&(this.fullName=i.displayName,this.userName=i.displayName.toLowerCase().replace(/\s+/g,"_")))}favoritesComponent;userEmail=null;userName="foodie_explorer";fullName="Bengaluru Foodie";stats={posts:12,followers:"1.2k",following:248};logout(){return T(this,null,function*(){try{yield this.auth.signOut(),this.router.navigate(["/"])}catch(e){console.error("Error signing out:",e)}})}reloadFavorites(){this.favoritesComponent&&this.favoritesComponent.loadBookmarkedReels()}static \u0275fac=function(t){return new(t||n)(oe(St),oe(lt))};static \u0275cmp=mt({type:n,selectors:[["app-profile"]],viewQuery:function(t,i){if(t&1&&Vi(Ws,5),t&2){let r;hi(r=fi())&&(i.favoritesComponent=r.first)}},standalone:!0,features:[vt],decls:64,vars:6,consts:[[1,"profile-page"],[1,"top-bar"],[1,"username"],[1,"verified-badge"],[1,"top-actions"],[1,"icon-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],[1,"scroll-content"],[1,"profile-header-row"],[1,"avatar-container"],[1,"story-ring"],["src","assets/avatar-placeholder.svg","alt","Avatar","onerror","this.src='https://ui-avatars.com/api/?name=Foodie+Explorer&background=ff6b35&color=fff'"],[1,"stats-container"],[1,"stat-item"],[1,"count"],[1,"label"],[1,"bio-section"],[1,"fullname"],[1,"bio-text"],[1,"action-buttons"],[1,"edit-profile-btn"],[1,"share-profile-btn"],[1,"content-tabs"],[1,"tab","active"],["x","3","y","3","width","7","height","7"],["x","14","y","3","width","7","height","7"],["x","14","y","14","width","7","height","7"],["x","3","y","14","width","7","height","7"],[1,"tab"],[1,"reel-icon"],["x","2","y","2","width","20","height","20","rx","5","ry","5"],["d","M10 8L16 12L10 16V8Z","fill","currentColor","stroke","none"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"grid-content"],[3,"showHeader"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1)(2,"h1",2),H(3),ie(4,"span",3),D(),C(5,"div",4)(6,"button",5),ae("click",function(){return i.logout()}),Te(),C(7,"svg",6),ie(8,"path",7)(9,"polyline",8)(10,"line",9),D()()()(),We(),C(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),ie(15,"img",14),D()(),C(16,"div",15)(17,"div",16)(18,"span",17),H(19),D(),C(20,"span",18),H(21,"Posts"),D()(),C(22,"div",16)(23,"span",17),H(24),D(),C(25,"span",18),H(26,"Followers"),D()(),C(27,"div",16)(28,"span",17),H(29),D(),C(30,"span",18),H(31,"Following"),D()()()(),C(32,"div",19)(33,"h2",20),H(34),D(),C(35,"p",21),H(36,"\u{1F4CD} Exploring Namma Bengaluru"),ie(37,"br"),H(38,"\u{1F35B} South Indian Food Lover"),ie(39,"br"),H(40,"\u2728 Digital Creator"),D()(),C(41,"div",22)(42,"button",23),H(43,"Edit Profile"),D(),C(44,"button",24),H(45,"Share Profile"),D()(),C(46,"div",25)(47,"div",26),Te(),C(48,"svg",6),ie(49,"rect",27)(50,"rect",28)(51,"rect",29)(52,"rect",30),D()(),We(),C(53,"div",31)(54,"div",32),Te(),C(55,"svg",6),ie(56,"rect",33)(57,"path",34),D()()(),We(),C(58,"div",31),Te(),C(59,"svg",6),ie(60,"path",35)(61,"circle",36),D()()(),We(),C(62,"div",37),ie(63,"app-favorites",38),D()()()),t&2&&(j(3),ot("",i.userName," "),j(16),_t(i.stats.posts),j(5),_t(i.stats.followers),j(5),_t(i.stats.following),j(5),_t(i.fullName),j(29),X("showHeader",!1))},dependencies:[Tt,Ws],styles:[".profile-page[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:#000;color:#fff}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;padding-top:max(12px,env(safe-area-inset-top));background:#000;position:sticky;top:0;z-index:10;border-bottom:1px solid rgba(255,255,255,.05)}.top-bar[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:22px;font-weight:700;margin:0;display:flex;align-items:center;gap:4px}.top-bar[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;padding:4px;cursor:pointer}.scroll-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:80px}.profile-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;gap:20px}.avatar-container[_ngcontent-%COMP%]   .story-ring[_ngcontent-%COMP%]{width:86px;height:86px;border-radius:50%;padding:3px;background:linear-gradient(45deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888)}.avatar-container[_ngcontent-%COMP%]   .story-ring[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:3px solid #000;background:#222}.stats-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-around}.stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:13px;color:#fff}.bio-section[_ngcontent-%COMP%]{padding:0 16px;margin-bottom:16px}.bio-section[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:14px;font-weight:700;margin:0 0 4px}.bio-section[_ngcontent-%COMP%]   .bio-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.4;margin:0;color:#efefef}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;padding:0 16px;margin-bottom:20px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;background:#363636;border:none;color:#fff;padding:8px 16px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#444}.content-tabs[_ngcontent-%COMP%]{display:flex;border-top:1px solid rgba(255,255,255,.1)}.content-tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;padding:12px 0;cursor:pointer;color:#888}.content-tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.content-tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.8}.grid-content[_ngcontent-%COMP%]     app-favorites .favorites-container{position:relative;inset:auto;padding:0 4px 20px;overflow:visible;height:auto;background:transparent}.grid-content[_ngcontent-%COMP%]     app-favorites .reels-grid{padding:0}.grid-content[_ngcontent-%COMP%]     app-favorites .loading-state, .grid-content[_ngcontent-%COMP%]     app-favorites .empty-state{min-height:300px}"]})};var dv=class n{constructor(e,t,i,r){this.router=e;this.locationService=t;this.navigationService=i;this.auth=r;let o=this.router.getCurrentNavigation();if(o?.extras?.state){let a=o.extras.state;if(a.location&&(this.location=`${a.location}, Bangalore`),a.latitude&&a.longitude&&this.locationService.setUserLocation(a.latitude,a.longitude),a.openFeed&&a.reelId){this.activeTab="feed";let l=a.reelId,u=(f=0)=>{setTimeout(()=>{this.videoFeedComponent&&this.videoFeedComponent.reels&&this.videoFeedComponent.reels.length>0?(console.log("[MainApp] Video feed loaded, navigating to reel:",l),this.videoFeedComponent.navigateToReel(l)):f<10?(console.log("[MainApp] Waiting for video feed to load... attempt",f+1),u(f+1)):console.error("[MainApp] Failed to navigate to reel - video feed did not load")},500)};u()}}}location="Koramangala, Bangalore";navigate=new rt;activeTab="feed";showProfileMenu=!1;favoritesComponent;profileComponent;videoFeedComponent;ngOnInit(){return T(this,null,function*(){if(this.location==="Koramangala, Bangalore")try{let e=yield this.locationService.getUserLocation(),t=this.locationService.findNearestArea(e.latitude,e.longitude);this.location=`${t}, Bangalore`}catch(e){console.error("Error getting location:",e)}this.locationService.currentLocation$.subscribe(e=>{e&&(this.location=`${e.name}, Bangalore`,this.videoFeedComponent&&this.activeTab==="feed"&&this.videoFeedComponent.reloadReelsForNewLocation())}),this.navigationService.selectedReelId$.subscribe(e=>{if(e){console.log("[MainApp] Received reel selection:",e),this.activeTab="feed";let t=(i=0)=>{setTimeout(()=>{this.videoFeedComponent&&this.videoFeedComponent.reels&&this.videoFeedComponent.reels.length>0?(console.log("[MainApp] Navigating to reel:",e),this.videoFeedComponent.navigateToReel(e),this.navigationService.clearSelection()):i<15?(console.log("[MainApp] Waiting for reels... attempt",i+1),t(i+1)):console.error("[MainApp] Failed to navigate - reels not loaded")},400)};t()}})})}select(e){this.activeTab=e,this.navigate.emit(e),e==="profile"&&this.profileComponent&&this.profileComponent.reloadFavorites(),e==="favorites"&&this.favoritesComponent&&this.favoritesComponent.loadBookmarkedReels()}goToUpload(){this.select("upload")}logout(){return T(this,null,function*(){try{yield this.auth.signOut(),this.router.navigate(["/"])}catch(e){console.error("Error signing out:",e)}})}toggleProfileMenu(){this.showProfileMenu=!this.showProfileMenu}static \u0275fac=function(t){return new(t||n)(oe(lt),oe(Wi),oe(gu),oe(St))};static \u0275cmp=mt({type:n,selectors:[["app-main-app"]],viewQuery:function(t,i){if(t&1&&(Vi(Ws,5),Vi(ef,5),Vi(gc,5)),t&2){let r;hi(r=fi())&&(i.favoritesComponent=r.first),hi(r=fi())&&(i.profileComponent=r.first),hi(r=fi())&&(i.videoFeedComponent=r.first)}},outputs:{navigate:"navigate"},standalone:!0,features:[vt],decls:31,vars:23,consts:[[1,"main-app"],[1,"top-nav"],[1,"nav-left"],[1,"nav-right"],[3,"isActive"],[1,"bottom-nav"],[1,"bottom-nav-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"nav-icon"],["x","2","y","2","width","20","height","20","rx","5","ry","5","stroke","currentColor","stroke-width","2"],["d","M10 8L16 12L10 16V8Z","fill","currentColor","stroke","none"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21L16.65 16.65","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"bottom-nav-btn","upload-btn",3,"click"],["d","M12 7v10M7 12h10","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"profile-container-bottom"],["d","M20 21C20 18.2386 17.7614 16 15 16H9C6.23858 16 4 18.2386 4 21","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","7","r","4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"div",1),ie(2,"div",2)(3,"div",3),D(),ie(4,"app-video-feed",4)(5,"app-search")(6,"app-trending")(7,"app-profile")(8,"app-favorites")(9,"app-upload-reel"),C(10,"div",5)(11,"button",6),ae("click",function(){return i.select("feed")}),Te(),C(12,"svg",7),ie(13,"rect",8)(14,"path",9),D()(),We(),C(15,"button",6),ae("click",function(){return i.select("search")}),Te(),C(16,"svg",7),ie(17,"circle",10)(18,"path",11),D()(),We(),C(19,"button",12),ae("click",function(){return i.goToUpload()}),Te(),C(20,"svg",7),ie(21,"rect",8)(22,"path",13),D()(),We(),C(23,"button",6),ae("click",function(){return i.select("favorites")}),Te(),C(24,"svg",7),ie(25,"path",14),D()(),We(),C(26,"div",15)(27,"button",6),ae("click",function(){return i.select("profile")}),Te(),C(28,"svg",7),ie(29,"path",16)(30,"circle",17),D()()()()()),t&2&&(j(4),Ze("hidden",i.activeTab!=="feed"),X("isActive",i.activeTab==="feed"),j(),Ze("hidden",i.activeTab!=="search"),j(),Ze("hidden",i.activeTab!=="trending"),j(),Ze("hidden",i.activeTab!=="profile"),j(),Ze("hidden",i.activeTab!=="favorites"),j(),Ze("hidden",i.activeTab!=="upload"),j(2),Ze("active",i.activeTab==="feed"),j(4),Ze("active",i.activeTab==="search"),j(4),Ze("active",i.activeTab==="upload"),j(4),Ze("active",i.activeTab==="favorites"),j(4),Ze("active",i.activeTab==="profile"))},dependencies:[Tt,gc,Ws,_u,lv,uv,ef,Xn],styles:['.main-app[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;flex-direction:column;background:#000;font-family:Poppins,sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.top-nav[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:10;display:flex;justify-content:space-between;padding:1rem;padding-top:max(1rem,env(safe-area-inset-top));background:linear-gradient(to bottom,rgba(0,0,0,.8) 0%,transparent 100%)}.profile-container-bottom[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.bottom-nav[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;display:flex;justify-content:space-around;padding:.75rem 0;padding-bottom:0;background:#0003;backdrop-filter:blur(1px);-webkit-backdrop-filter:blur(1px);border-top:1px solid rgba(255,255,255,.1);z-index:20}.bottom-nav-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#888;font-size:.7rem;display:flex;flex-direction:column;align-items:center;gap:.25rem;cursor:pointer;transition:color .2s;padding:.5rem 1rem;font-weight:400}.bottom-nav-btn.active[_ngcontent-%COMP%]{color:#ff6b35}.bottom-nav-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:2px}.nav-icon[_ngcontent-%COMP%]{width:24px;height:24px;color:inherit;transition:all .2s}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="M3 9.5"])   path[_ngcontent-%COMP%]{fill:currentColor;stroke:currentColor}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="19 21l-7-5"])   path[_ngcontent-%COMP%]{fill:currentColor}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(polyline[points*="23 6"])   polyline[_ngcontent-%COMP%]{fill:none;stroke-width:3px}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="M20 21C20"])   path[_ngcontent-%COMP%], .bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="M20 21C20"])   circle[_ngcontent-%COMP%]{stroke:currentColor}@media (min-width: 768px){.location-modal[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;border-radius:24px;max-height:70vh}.modal-overlay[_ngcontent-%COMP%]{align-items:center}}']})};var tf=()=>{let n=Q(St),e=Q(lt);return Zg(n).pipe(Me(t=>t?!0:(e.navigate(["/phone-input"]),!1)))};var wT=()=>{let n=Q(St),e=Q(lt);return Zg(n).pipe(Me(t=>t?(console.log("[NoAuthGuard] User is authenticated, redirecting to main-app"),e.createUrlTree(["/main-app"])):!0))};var sN=[{path:"",component:Y_},{path:"phone-input",component:rv,canActivate:[mc,wT]},{path:"otp",component:ov,canActivate:[mc,wT]},{path:"location-permission",component:sv,canActivate:[tf,mc]},{path:"main-app",component:dv,canActivate:[tf,mc]},{path:"video-feed",component:gc,canActivate:[tf,mc]},{path:"upload-reel",component:_u,canActivate:[tf,mc]}];var aN={providers:[gx(sN),vM(),Yx(),SP(()=>DP(Hh.firebase)),IR(()=>CR()),xk(()=>kk()),pc]};var hv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=mt({type:n,selectors:[["app-root"]],standalone:!0,features:[vt],decls:1,vars:0,template:function(t,i){t&1&&ie(0,"router-outlet")},dependencies:[eb]})};TM(hv,aN).catch(n=>console.error(n));

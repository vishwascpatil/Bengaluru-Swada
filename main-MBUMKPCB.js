import{$ as Aa,$a as Cd,$b as J_,A as Yr,Aa as gd,Ab as O_,B as no,Ba as ns,Bb as yn,C as io,Ca as D_,Cb as L_,D as ud,Da as so,Db as F_,Dc as c0,E as ro,Ea as H,Eb as ss,F as f_,Fa as le,Fb as qu,G as Bu,Ga as I_,Gb as mr,H as fr,Ha as _d,Hb as N_,I as cd,Ia as Uu,Ib as V_,J as p_,Ja as is,Jb as B_,K as m_,Ka as xa,Kb as U_,L as g_,La as yd,Lb as z_,M as qn,Ma as zu,Mb as j_,Mc as h0,N as __,Na as Vi,Nb as Id,O as jt,Oa as vd,Ob as Rn,P as pe,Pa as A_,Pb as $_,Q as y_,Qa as wd,Qb as zi,R as Xr,Ra as je,Rb as q_,S as we,Sa as P_,Sb as G_,T as Li,Ta as Bi,Tb as H_,U as v_,Ua as te,Ub as K_,V as Xe,Va as Ra,Vb as W_,W as hd,Wa as Bt,Wb as La,X as Pe,Xa as P,Xb as Z_,Y as ae,Ya as O,Yb as Q_,Z as pr,Za as ue,Zb as Y_,_ as w_,_a as ct,_b as X_,a as X,aa as lt,ab as ka,ac as Rt,b as He,ba as Fi,bb as de,bc as e0,c as s_,ca as Vt,cb as be,cc as t0,d as fb,da as C_,db as Ui,dc as n0,e as pb,ea as Pa,eb as ai,ec as i0,f as $,fa as b_,fb as li,fc as r0,g as o_,ga as Ma,gb as M_,gc as an,h as a_,ha as oi,hb as W,hc as s0,i as l_,ia as Gn,ib as Ut,ic as o0,j as sd,ja as ge,jb as Tt,jc as Gu,k as od,ka as _e,kb as x_,kc as a0,l as si,la as Oe,lb as $t,lc as l0,m as on,ma as Ke,mb as qt,mc as u0,n as dr,na as Ni,nb as Gt,o as en,oa as dd,ob as rs,p as Se,pa as Jr,pb as ht,q as Ia,qa as E_,qb as R_,r as u_,ra as ut,rb as bd,s as c_,sa as _n,sb as Ed,t as $e,ta as fd,tb as k_,u as Vu,ua as es,ub as ju,v as gn,va as S_,vb as Oa,w as ad,wa as pd,wb as Sd,x as h_,xa as T_,xb as Td,y as ld,ya as ts,yb as Dd,z as d_,za as md,zb as $u}from"./chunk-D4Q6AZUP.js";var VC=fb((Hh,NC)=>{"use strict";(function(n,e){typeof Hh=="object"&&typeof NC<"u"?e(Hh):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(Hh,function(n){"use strict";var e="1.9.4";function t(r){var a,c,d,g;for(c=1,d=arguments.length;c<d;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var i=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function s(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var d=c.call(arguments,2);return function(){return r.apply(a,d.length?d.concat(c.call(arguments)):arguments)}}var o=0;function l(r){return"_leaflet_id"in r||(r._leaflet_id=++o),r._leaflet_id}function h(r,a,c){var d,g,v,T;return T=function(){d=!1,g&&(v.apply(c,g),g=!1)},v=function(){d?g=arguments:(r.apply(c,arguments),setTimeout(T,a),d=!0)},v}function f(r,a,c){var d=a[1],g=a[0],v=d-g;return r===d&&c?r:((r-g)%v+v)%v+g}function m(){return!1}function y(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function C(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function E(r){return C(r).split(/\s+/)}function I(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?i(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function N(r,a,c){var d=[];for(var g in r)d.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+d.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function z(r,a){return r.replace(U,function(c,d){var g=a[d];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var Y=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function ne(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var he="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ve(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var it=0;function Re(r){var a=+new Date,c=Math.max(0,16-(a-it));return it=a+c,window.setTimeout(r,c)}var M=window.requestAnimationFrame||ve("RequestAnimationFrame")||Re,b=window.cancelAnimationFrame||ve("CancelAnimationFrame")||ve("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function S(r,a,c){if(c&&M===Re)r.call(a);else return M.call(window,s(r,a))}function A(r){r&&b.call(window,r)}var x={__proto__:null,extend:t,create:i,bind:s,get lastId(){return o},stamp:l,throttle:h,wrapNum:f,falseFn:m,formatNum:y,trim:C,splitWords:E,setOptions:I,getParamString:N,template:z,isArray:Y,indexOf:ne,emptyImageUrl:he,requestFn:M,cancelFn:b,requestAnimFrame:S,cancelAnimFrame:A};function R(){}R.extend=function(r){var a=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,d=i(c);d.constructor=a,a.prototype=d;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&t(a,r.statics),r.includes&&(D(r.includes),t.apply(null,[d].concat(r.includes))),t(d,r),delete d.statics,delete d.includes,d.options&&(d.options=c.options?i(c.options):{},t(d.options,r.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,T=d._initHooks.length;v<T;v++)d._initHooks[v].call(this)}},a},R.include=function(r){var a=this.prototype.options;return t(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},R.mergeOptions=function(r){return t(this.prototype.options,r),this},R.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function D(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=Y(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var et={on:function(r,a,c){if(typeof r=="object")for(var d in r)this._on(d,r[d],a);else{r=E(r);for(var g=0,v=r.length;g<v;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var d in r)this._off(d,r[d],a);else{r=E(r);for(var g=arguments.length===1,v=0,T=r.length;v<T;v++)g?this._off(r[v]):this._off(r[v],a,c)}return this},_on:function(r,a,c,d){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};d&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var d,g,v;if(this._events&&(d=this._events[r],!!d)){if(arguments.length===1){if(this._firingCount)for(g=0,v=d.length;g<v;g++)d[g].fn=m;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var T=this._listens(r,a,c);if(T!==!1){var F=d[T];this._firingCount&&(F.fn=m,this._events[r]=d=d.slice()),d.splice(T,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var d=t({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var v=0,T=g.length;v<T;v++){var F=g[v],V=F.fn;F.once&&this.off(r,V,F.ctx),V.call(F.ctx||this,d)}this._firingCount--}}return c&&this._propagateEvent(d),this},listens:function(r,a,c,d){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(d=!!a,g=void 0,c=void 0);var v=this._events&&this._events[r];if(v&&v.length&&this._listens(r,g,c)!==!1)return!0;if(d){for(var T in this._eventParents)if(this._eventParents[T].listens(r,a,c,d))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var d=this._events[r]||[];if(!a)return!!d.length;c===this&&(c=void 0);for(var g=0,v=d.length;g<v;g++)if(d[g].fn===a&&d[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var d in r)this._on(d,r[d],a,!0);else{r=E(r);for(var g=0,v=r.length;g<v;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[l(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[l(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,t({layer:r.target,propagatedFrom:r.target},r),!0)}};et.addEventListener=et.on,et.removeEventListener=et.clearAllEventListeners=et.off,et.addOneTimeEventListener=et.once,et.fireEvent=et.fire,et.hasEventListeners=et.listens;var nn=R.extend(et);function q(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var ie=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(r){return this.clone()._add(K(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(K(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new q(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new q(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ie(this.x),this.y=ie(this.y),this},distanceTo:function(r){r=K(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=K(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=K(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function K(r,a,c){return r instanceof q?r:Y(r)?new q(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new q(r.x,r.y):new q(r,a,c)}function oe(r,a){if(r)for(var c=a?[r,a]:r,d=0,g=c.length;d<g;d++)this.extend(c[d])}oe.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof q||typeof r[0]=="number"||"x"in r)a=c=K(r);else if(r=Fe(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return K((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return K(this.min.x,this.max.y)},getTopRight:function(){return K(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof q?r=K(r):r=Fe(r),r instanceof oe?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=Fe(r);var a=this.min,c=this.max,d=r.min,g=r.max,v=g.x>=a.x&&d.x<=c.x,T=g.y>=a.y&&d.y<=c.y;return v&&T},overlaps:function(r){r=Fe(r);var a=this.min,c=this.max,d=r.min,g=r.max,v=g.x>a.x&&d.x<c.x,T=g.y>a.y&&d.y<c.y;return v&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,d=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return Fe(K(a.x-d,a.y-g),K(c.x+d,c.y+g))},equals:function(r){return r?(r=Fe(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function Fe(r,a){return!r||r instanceof oe?r:new oe(r,a)}function Je(r,a){if(r)for(var c=a?[r,a]:r,d=0,g=c.length;d<g;d++)this.extend(c[d])}Je.prototype={extend:function(r){var a=this._southWest,c=this._northEast,d,g;if(r instanceof fe)d=r,g=r;else if(r instanceof Je){if(d=r._southWest,g=r._northEast,!d||!g)return this}else return r?this.extend(ce(r)||De(r)):this;return!a&&!c?(this._southWest=new fe(d.lat,d.lng),this._northEast=new fe(g.lat,g.lng)):(a.lat=Math.min(d.lat,a.lat),a.lng=Math.min(d.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,d=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Je(new fe(a.lat-d,a.lng-g),new fe(c.lat+d,c.lng+g))},getCenter:function(){return new fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof fe||"lat"in r?r=ce(r):r=De(r);var a=this._southWest,c=this._northEast,d,g;return r instanceof Je?(d=r.getSouthWest(),g=r.getNorthEast()):d=g=r,d.lat>=a.lat&&g.lat<=c.lat&&d.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=De(r);var a=this._southWest,c=this._northEast,d=r.getSouthWest(),g=r.getNorthEast(),v=g.lat>=a.lat&&d.lat<=c.lat,T=g.lng>=a.lng&&d.lng<=c.lng;return v&&T},overlaps:function(r){r=De(r);var a=this._southWest,c=this._northEast,d=r.getSouthWest(),g=r.getNorthEast(),v=g.lat>a.lat&&d.lat<c.lat,T=g.lng>a.lng&&d.lng<c.lng;return v&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=De(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function De(r,a){return r instanceof Je?r:new Je(r,a)}function fe(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}fe.prototype={equals:function(r,a){if(!r)return!1;r=ce(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+y(this.lat,r)+", "+y(this.lng,r)+")"},distanceTo:function(r){return Dn.distance(this,ce(r))},wrap:function(){return Dn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return De([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new fe(this.lat,this.lng,this.alt)}};function ce(r,a,c){return r instanceof fe?r:Y(r)&&typeof r[0]!="object"?r.length===3?new fe(r[0],r[1],r[2]):r.length===2?new fe(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new fe(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new fe(r,a,c)}var Dt={latLngToPoint:function(r,a){var c=this.projection.project(r),d=this.scale(a);return this.transformation._transform(c,d)},pointToLatLng:function(r,a){var c=this.scale(a),d=this.transformation.untransform(r,c);return this.projection.unproject(d)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),d=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new oe(d,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?f(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?f(r.lat,this.wrapLat,!0):r.lat,d=r.alt;return new fe(c,a,d)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),d=a.lat-c.lat,g=a.lng-c.lng;if(d===0&&g===0)return r;var v=r.getSouthWest(),T=r.getNorthEast(),F=new fe(v.lat-d,v.lng-g),V=new fe(T.lat-d,T.lng-g);return new Je(F,V)}},Dn=t({},Dt,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,d=r.lat*c,g=a.lat*c,v=Math.sin((a.lat-r.lat)*c/2),T=Math.sin((a.lng-r.lng)*c/2),F=v*v+Math.cos(d)*Math.cos(g)*T*T,V=2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F));return this.R*V}}),rt=6378137,un={R:rt,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,r.lat),-c),g=Math.sin(d*a);return new q(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new fe((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=rt*Math.PI;return new oe([-r,-r],[r,r])}()};function It(r,a,c,d){if(Y(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=d}It.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new q((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function Qt(r,a,c,d){return new It(r,a,c,d)}var In=t({},Dn,{code:"EPSG:3857",projection:un,transformation:function(){var r=.5/(Math.PI*un.R);return Qt(r,.5,-r,.5)}()}),Zo=t({},In,{code:"EPSG:900913"});function Rs(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ks(r,a){var c="",d,g,v,T,F,V;for(d=0,v=r.length;d<v;d++){for(F=r[d],g=0,T=F.length;g<T;g++)V=F[g],c+=(g?"L":"M")+V.x+" "+V.y;c+=a?re.svg?"z":"x":""}return c||"M0 0"}var kr=document.documentElement.style,Or="ActiveXObject"in window,tu=Or&&!document.addEventListener,nu="msLaunchUri"in navigator&&!("documentMode"in document),Os=cn("webkit"),Qo=cn("android"),Ls=cn("android 2")||cn("android 3"),iu=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qh=Qo&&cn("Google")&&iu<537&&!("AudioNode"in window),Lr=!!window.opera,Fs=!nu&&cn("chrome"),Ns=cn("gecko")&&!Os&&!Lr&&!Or,At=!Fs&&cn("safari"),Pt=cn("phantom"),Fr="OTransition"in kr,ru=navigator.platform.indexOf("Win")===0,Yo=Or&&"transition"in kr,Xo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ls,tr="MozPerspective"in kr,su=!window.L_DISABLE_3D&&(Yo||Xo||tr)&&!Fr&&!Pt,nr=typeof orientation<"u"||cn("mobile"),Jo=nr&&Os,Yh=nr&&Xo,ou=!window.PointerEvent&&window.MSPointerEvent,Vs=!!(window.PointerEvent||ou),ea="ontouchstart"in window||!!window.TouchEvent,au=!window.L_NO_TOUCH&&(ea||Vs),Nr=nr&&Lr,ta=nr&&Ns,na=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ti=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",m,a),window.removeEventListener("testPassiveEventSupport",m,a)}catch{}return r}(),lu=function(){return!!document.createElement("canvas").getContext}(),ir=!!(document.createElementNS&&Rs("svg").createSVGRect),uu=!!ir&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Vr=!ir&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),cu=navigator.platform.indexOf("Mac")===0,Ft=navigator.platform.indexOf("Linux")===0;function cn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var re={ie:Or,ielt9:tu,edge:nu,webkit:Os,android:Qo,android23:Ls,androidStock:Qh,opera:Lr,chrome:Fs,gecko:Ns,safari:At,phantom:Pt,opera12:Fr,win:ru,ie3d:Yo,webkit3d:Xo,gecko3d:tr,any3d:su,mobile:nr,mobileWebkit:Jo,mobileWebkit3d:Yh,msPointer:ou,pointer:Vs,touch:au,touchNative:ea,mobileOpera:Nr,mobileGecko:ta,retina:na,passiveEvents:Ti,canvas:lu,svg:ir,vml:Vr,inlineSvg:uu,mac:cu,linux:Ft},rr=re.msPointer?"MSPointerDown":"pointerdown",hu=re.msPointer?"MSPointerMove":"pointermove",du=re.msPointer?"MSPointerUp":"pointerup",Di=re.msPointer?"MSPointerCancel":"pointercancel",ia={touchstart:rr,touchmove:hu,touchend:du,touchcancel:Di},fu={touchstart:mu,touchmove:sr,touchend:sr,touchcancel:sr},Un={},ra=!1;function sa(r,a,c){return a==="touchstart"&&aa(),fu[a]?(c=fu[a].bind(this,c),r.addEventListener(ia[a],c,!1),c):(console.warn("wrong event specified:",a),m)}function Bs(r,a,c){if(!ia[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(ia[a],c,!1)}function Yn(r){Un[r.pointerId]=r}function pu(r){Un[r.pointerId]&&(Un[r.pointerId]=r)}function oa(r){delete Un[r.pointerId]}function aa(){ra||(document.addEventListener(rr,Yn,!0),document.addEventListener(hu,pu,!0),document.addEventListener(du,oa,!0),document.addEventListener(Di,oa,!0),ra=!0)}function sr(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Un)a.touches.push(Un[c]);a.changedTouches=[a],r(a)}}function mu(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&mt(a),sr(r,a)}function gu(r){var a={},c,d;for(d in r)c=r[d],a[d]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Xh=200;function Us(r,a){r.addEventListener("dblclick",a);var c=0,d;function g(v){if(v.detail!==1){d=v.detail;return}if(!(v.pointerType==="mouse"||v.sourceCapabilities&&!v.sourceCapabilities.firesTouchEvents)){var T=ga(v);if(!(T.some(function(V){return V instanceof HTMLLabelElement&&V.attributes.for})&&!T.some(function(V){return V instanceof HTMLInputElement||V instanceof HTMLSelectElement}))){var F=Date.now();F-c<=Xh?(d++,d===2&&a(gu(v))):d=1,c=F}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function _u(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var Br=An(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),zn=An(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xn=zn==="webkitTransition"||zn==="OTransition"?zn+"End":"transitionend";function zs(r){return typeof r=="string"?document.getElementById(r):r}function Ur(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(r,null);c=d?d[a]:null}return c==="auto"?null:c}function Be(r,a,c){var d=document.createElement(r);return d.className=a||"",c&&c.appendChild(d),d}function tt(r){var a=r.parentNode;a&&a.removeChild(r)}function zr(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Jn(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function ei(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function js(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=jr(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function Ie(r,a){if(r.classList!==void 0)for(var c=E(a),d=0,g=c.length;d<g;d++)r.classList.add(c[d]);else if(!js(r,a)){var v=jr(r);la(r,(v?v+" ":"")+a)}}function pt(r,a){r.classList!==void 0?r.classList.remove(a):la(r,C((" "+jr(r)+" ").replace(" "+a+" "," ")))}function la(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function jr(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Yt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Jh(r,a)}function Jh(r,a){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(d)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+d+"(opacity="+a+")"}function An(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Nt(r,a,c){var d=a||new q(0,0);r.style[Br]=(re.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(c?" scale("+c+")":"")}function st(r,a){r._leaflet_pos=a,re.any3d?Nt(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function Pn(r){return r._leaflet_pos||new q(0,0)}var or,Ge,ar;if("onselectstart"in document)or=function(){Ee(window,"selectstart",mt)},Ge=function(){Ze(window,"selectstart",mt)};else{var jn=An(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);or=function(){if(jn){var r=document.documentElement.style;ar=r[jn],r[jn]="none"}},Ge=function(){jn&&(document.documentElement.style[jn]=ar,ar=void 0)}}function Ii(){Ee(window,"dragstart",mt)}function ua(){Ze(window,"dragstart",mt)}var $r,ca;function ha(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&($s(),$r=r,ca=r.style.outlineStyle,r.style.outlineStyle="none",Ee(window,"keydown",$s))}function $s(){$r&&($r.style.outlineStyle=ca,$r=void 0,ca=void 0,Ze(window,"keydown",$s))}function yu(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Ai(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var ti={__proto__:null,TRANSFORM:Br,TRANSITION:zn,TRANSITION_END:Xn,get:zs,getStyle:Ur,create:Be,remove:tt,empty:zr,toFront:Jn,toBack:ei,hasClass:js,addClass:Ie,removeClass:pt,setClass:la,getClass:jr,setOpacity:Yt,testProp:An,setTransform:Nt,setPosition:st,getPosition:Pn,get disableTextSelection(){return or},get enableTextSelection(){return Ge},disableImageDrag:Ii,enableImageDrag:ua,preventOutline:ha,restoreOutline:$s,getSizedParentNode:yu,getScale:Ai};function Ee(r,a,c,d){if(a&&typeof a=="object")for(var g in a)fa(r,g,a[g],c);else{a=E(a);for(var v=0,T=a.length;v<T;v++)fa(r,a[v],c,d)}return this}var hn="_leaflet_events";function Ze(r,a,c,d){if(arguments.length===1)Pi(r),delete r[hn];else if(a&&typeof a=="object")for(var g in a)pa(r,g,a[g],c);else if(a=E(a),arguments.length===2)Pi(r,function(F){return ne(a,F)!==-1});else for(var v=0,T=a.length;v<T;v++)pa(r,a[v],c,d);return this}function Pi(r,a){for(var c in r[hn]){var d=c.split(/\d/)[0];(!a||a(d))&&pa(r,d,null,null,c)}}var da={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fa(r,a,c,d){var g=a+l(c)+(d?"_"+l(d):"");if(r[hn]&&r[hn][g])return this;var v=function(F){return c.call(d||r,F||window.event)},T=v;!re.touchNative&&re.pointer&&a.indexOf("touch")===0?v=sa(r,a,v):re.touch&&a==="dblclick"?v=Us(r,v):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(da[a]||a,v,re.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(v=function(F){F=F||window.event,Hr(r,F)&&T(F)},r.addEventListener(da[a],v,!1)):r.addEventListener(a,T,!1):r.attachEvent("on"+a,v),r[hn]=r[hn]||{},r[hn][g]=v}function pa(r,a,c,d,g){g=g||a+l(c)+(d?"_"+l(d):"");var v=r[hn]&&r[hn][g];if(!v)return this;!re.touchNative&&re.pointer&&a.indexOf("touch")===0?Bs(r,a,v):re.touch&&a==="dblclick"?_u(r,v):"removeEventListener"in r?r.removeEventListener(da[a]||a,v,!1):r.detachEvent("on"+a,v),r[hn][g]=null}function zt(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function ma(r){return fa(r,"wheel",zt),this}function qr(r){return Ee(r,"mousedown touchstart dblclick contextmenu",zt),r._leaflet_disable_click=!0,this}function mt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Mn(r){return mt(r),zt(r),this}function ga(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function lr(r,a){if(!a)return new q(r.clientX,r.clientY);var c=Ai(a),d=c.boundingClientRect;return new q((r.clientX-d.left)/c.x-a.clientLeft,(r.clientY-d.top)/c.y-a.clientTop)}var Gr=re.linux&&re.chrome?window.devicePixelRatio:re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function _a(r){return re.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Gr:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Hr(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var ot={__proto__:null,on:Ee,off:Ze,stopPropagation:zt,disableScrollPropagation:ma,disableClickPropagation:qr,preventDefault:mt,stop:Mn,getPropagationPath:ga,getMousePosition:lr,getWheelDelta:_a,isExternalTarget:Hr,addListener:Ee,removeListener:Ze},vu=nn.extend({run:function(r,a,c,d){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=Pn(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),st(this._el,c),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ne=nn.extend({options:{crs:In,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=I(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ce(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=zn&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,Xn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(ce(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=t({animate:c.animate},c.zoom),c.pan=t({animate:c.animate,duration:c.duration},c.pan));var d=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var d=this.getZoomScale(a),g=this.getSize().divideBy(2),v=r instanceof q?r:this.latLngToContainerPoint(r),T=v.subtract(g).multiplyBy(1-1/d),F=this.containerPointToLatLng(g.add(T));return this.setView(F,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():De(r);var c=K(a.paddingTopLeft||a.padding||[0,0]),d=K(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(d));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var v=d.subtract(c).divideBy(2),T=this.project(r.getSouthWest(),g),F=this.project(r.getNorthEast(),g),V=this.unproject(T.add(F).divideBy(2).add(v),g);return{center:V,zoom:g}},fitBounds:function(r,a){if(r=De(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=K(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new vu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){Ie(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!re.any3d)return this.setView(r,a,c);this._stop();var d=this.project(this.getCenter()),g=this.project(r),v=this.getSize(),T=this._zoom;r=ce(r),a=a===void 0?T:a;var F=Math.max(v.x,v.y),V=F*this.getZoomScale(T,a),G=g.distanceTo(d)||1,ee=1.42,ye=ee*ee;function Le(vt){var Nu=vt?-1:1,ub=vt?V:F,cb=V*V-F*F+Nu*ye*ye*G*G,hb=2*ub*ye*G,rd=cb/hb,r_=Math.sqrt(rd*rd+1)-rd,db=r_<1e-9?-18:Math.log(r_);return db}function Jt(vt){return(Math.exp(vt)-Math.exp(-vt))/2}function xt(vt){return(Math.exp(vt)+Math.exp(-vt))/2}function xn(vt){return Jt(vt)/xt(vt)}var sn=Le(0);function to(vt){return F*(xt(sn)/xt(sn+ee*vt))}function sb(vt){return F*(xt(sn)*xn(sn+ee*vt)-Jt(sn))/ye}function ob(vt){return 1-Math.pow(1-vt,1.5)}var ab=Date.now(),n_=(Le(1)-sn)/ee,lb=c.duration?1e3*c.duration:1e3*n_*.8;function i_(){var vt=(Date.now()-ab)/lb,Nu=ob(vt)*n_;vt<=1?(this._flyToFrame=S(i_,this),this._move(this.unproject(d.add(g.subtract(d).multiplyBy(sb(Nu)/G)),T),this.getScaleZoom(F/to(Nu),T),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),i_.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=De(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),d=this._limitCenter(c,this._zoom,De(r));return c.equals(d)||this.panTo(d,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=K(a.paddingTopLeft||a.padding||[0,0]),d=K(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),v=this.project(r),T=this.getPixelBounds(),F=Fe([T.min.add(c),T.max.subtract(d)]),V=F.getSize();if(!F.contains(v)){this._enforcingBounds=!0;var G=v.subtract(F.getCenter()),ee=F.extend(v).getSize().subtract(V);g.x+=G.x<0?-ee.x:ee.x,g.y+=G.y<0?-ee.y:ee.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=t({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),d=a.divideBy(2).round(),g=c.divideBy(2).round(),v=d.subtract(g);return!v.x&&!v.y?this:(r.animate&&r.pan?this.panBy(v):(r.pan&&this._rawPanBy(v),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=t({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=s(this._handleGeolocationResponse,this),c=s(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,d=new fe(a,c),g=d.toBounds(r.coords.accuracy*2),v=this._locateOptions;if(v.setView){var T=this.getBoundsZoom(g);this.setView(d,v.maxZoom?Math.min(T,v.maxZoom):T)}var F={latlng:d,bounds:g,timestamp:r.timestamp};for(var V in r.coords)typeof r.coords[V]=="number"&&(F[V]=r.coords[V]);this.fire("locationfound",F)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)tt(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),d=Be("div",c,a||this._mapPane);return r&&(this._panes[r]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Je(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=De(r),c=K(c||[0,0]);var d=this.getZoom()||0,g=this.getMinZoom(),v=this.getMaxZoom(),T=r.getNorthWest(),F=r.getSouthEast(),V=this.getSize().subtract(c),G=Fe(this.project(F,d),this.project(T,d)).getSize(),ee=re.any3d?this.options.zoomSnap:1,ye=V.x/G.x,Le=V.y/G.y,Jt=a?Math.max(ye,Le):Math.min(ye,Le);return d=this.getScaleZoom(Jt,d),ee&&(d=Math.round(d/(ee/100))*(ee/100),d=a?Math.ceil(d/ee)*ee:Math.floor(d/ee)*ee),Math.max(g,Math.min(v,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new oe(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var d=c.zoom(r*c.scale(a));return isNaN(d)?1/0:d},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ce(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(K(r),a)},layerPointToLatLng:function(r){var a=K(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(ce(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(ce(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(De(r))},distance:function(r,a){return this.options.crs.distance(ce(r),ce(a))},containerPointToLayerPoint:function(r){return K(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return K(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(K(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(r)))},mouseEventToContainerPoint:function(r){return lr(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=zs(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(a,"scroll",this._onScroll,this),this._containerId=l(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,Ie(r,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Ur(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ie(r.markerPane,"leaflet-zoom-hide"),Ie(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){st(this._mapPane,new q(0,0));var d=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,d){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),d?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){st(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[l(this._container)]=this;var a=r?Ze:Ee;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=S(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],d,g=a==="mouseout"||a==="mouseover",v=r.target||r.srcElement,T=!1;v;){if(d=this._targets[l(v)],d&&(a==="click"||a==="preclick")&&this._draggableMoved(d)){T=!0;break}if(d&&d.listens(a,!0)&&(g&&!Hr(v,r)||(c.push(d),g))||v===this._container)break;v=v.parentNode}return!c.length&&!T&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&ha(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var d=t({},r);d.type="preclick",this._fireDOMEvent(d,d.type,c)}var g=this._findEventTargets(r,a);if(c){for(var v=[],T=0;T<c.length;T++)c[T].listens(a,!0)&&v.push(c[T]);g=v.concat(g)}if(g.length){a==="contextmenu"&&mt(r);var F=g[0],V={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var G=F.getLatLng&&(!F._radius||F._radius<=10);V.containerPoint=G?this.latLngToContainerPoint(F.getLatLng()):this.mouseEventToContainerPoint(r),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=G?F.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(T=0;T<g.length;T++)if(g[T].fire(a,V,!0),V.originalEvent._stopped||g[T].options.bubblingMouseEvents===!1&&ne(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return Pn(this._mapPane)||new q(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var d=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(d)},_latLngBoundsToNewLayerBounds:function(r,a,c){var d=this._getNewPixelOrigin(c,a);return Fe([this.project(r.getSouthWest(),a)._subtract(d),this.project(r.getNorthWest(),a)._subtract(d),this.project(r.getSouthEast(),a)._subtract(d),this.project(r.getNorthEast(),a)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var d=this.project(r,a),g=this.getSize().divideBy(2),v=new oe(d.subtract(g),d.add(g)),T=this._getBoundsOffset(v,c,a);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?r:this.unproject(d.add(T),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),d=new oe(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(d,a))},_getBoundsOffset:function(r,a,c){var d=Fe(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=d.min.subtract(r.min),v=d.max.subtract(r.max),T=this._rebound(g.x,-v.x),F=this._rebound(g.y,-v.y);return new q(T,F)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),d=re.any3d?this.options.zoomSnap:1;return d&&(r=Math.round(r/d)*d),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=Br,d=this._proxy.style[c];Nt(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),d===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Nt(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/d);return c.animate!==!0&&!this.getSize().contains(g)?!1:(S(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,d){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,Ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function wu(r,a){return new Ne(r,a)}var rn=R.extend({options:{position:"topright"},initialize:function(r){I(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),d=r._controlCorners[c];return Ie(a,"leaflet-control"),c.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),ur=function(r){return new rn(r)};Ne.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Be("div",a+"control-container",this._container);function d(g,v){var T=a+g+" "+a+v;r[g+v]=Be("div",T,c)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)tt(this._controlCorners[r]);tt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Kr=rn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,d){return c<d?-1:d<c?1:0}},initialize:function(r,a,c){I(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in r)this._addLayer(r[d],d);for(d in a)this._addLayer(a[d],d,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return rn.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(l(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){Ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(Ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):pt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Be("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),qr(a),ma(a);var d=this._section=Be("section",r+"-list");c&&(this._map.on("click",this.collapse,this),Ee(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Be("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),Ee(g,{keydown:function(v){v.keyCode===13&&this._expandSafely()},click:function(v){mt(v),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Be("div",r+"-base",d),this._separator=Be("div",r+"-separator",d),this._overlaysList=Be("div",r+"-overlays",d),a.appendChild(d)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&l(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(s(function(d,g){return this.options.sortFunction(d.layer,g.layer,d.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;zr(this._baseLayersList),zr(this._overlaysList),this._layerControlInputs=[];var r,a,c,d,g=0;for(c=0;c<this._layers.length;c++)d=this._layers[c],this._addItem(d),a=a||d.overlay,r=r||!d.overlay,g+=d.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(l(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),d;r.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=c):d=this._createRadioElement("leaflet-base-layers_"+l(this),c),this._layerControlInputs.push(d),d.layerId=l(r.layer),Ee(d,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var v=document.createElement("span");a.appendChild(v),v.appendChild(d),v.appendChild(g);var T=r.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,d=[],g=[];this._handlingClick=!0;for(var v=r.length-1;v>=0;v--)a=r[v],c=this._getLayer(a.layerId).layer,a.checked?d.push(c):a.checked||g.push(c);for(v=0;v<g.length;v++)this._map.hasLayer(g[v])&&this._map.removeLayer(g[v]);for(v=0;v<d.length;v++)this._map.hasLayer(d[v])||this._map.addLayer(d[v]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,d=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&d<c.options.minZoom||c.options.maxZoom!==void 0&&d>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Ee(r,"click",mt),this.expand();var a=this;setTimeout(function(){Ze(r,"click",mt),a._preventClick=!1})}}),Cu=function(r,a,c){return new Kr(r,a,c)},dn=rn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Be("div",a+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,d,g){var v=Be("a",c,d);return v.innerHTML=r,v.href="#",v.title=a,v.setAttribute("role","button"),v.setAttribute("aria-label",a),qr(v),Ee(v,"click",Mn),Ee(v,"click",g,this),Ee(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";pt(this._zoomInButton,a),pt(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(Ie(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(Ie(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ne.mergeOptions({zoomControl:!0}),Ne.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new dn,this.addControl(this.zoomControl))});var bu=function(r){return new dn(r)},Eu=rn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Be("div",a),d=this.options;return this._addScales(d,a+"-line",c),r.on(d.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Be("div",a,c)),r.imperial&&(this._iScale=Be("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,d,g;a>5280?(c=a/5280,d=this._getRoundNum(c),this._updateScale(this._iScale,d+" mi",d/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Wr=function(r){return new Eu(r)},Su='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Zr=rn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?Su+" ":"")+"Leaflet</a>"},initialize:function(r){I(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Be("div","leaflet-control-attribution"),qr(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ne.mergeOptions({attributionControl:!0}),Ne.addInitHook(function(){this.options.attributionControl&&new Zr().addTo(this)});var qs=function(r){return new Zr(r)};rn.Layers=Kr,rn.Zoom=dn,rn.Scale=Eu,rn.Attribution=Zr,ur.layers=Cu,ur.zoom=bu,ur.scale=Wr,ur.attribution=qs;var fn=R.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fn.addTo=function(r,a){return r.addHandler(a,this),this};var Gs={Events:et},Tu=re.touch?"touchstart mousedown":"mousedown",$n=nn.extend({options:{clickTolerance:3},initialize:function(r,a,c,d){I(this,d),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(Ee(this._dragStartTarget,Tu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&($n._dragging===this&&this.finishDrag(!0),Ze(this._dragStartTarget,Tu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!js(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){$n._dragging===this&&this.finishDrag();return}if(!($n._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&($n._dragging=this,this._preventOutline&&ha(this._element),Ii(),or(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=yu(this._element);this._startPoint=new q(a.clientX,a.clientY),this._startPos=Pn(this._element),this._parentScale=Ai(c);var d=r.type==="mousedown";Ee(document,d?"mousemove":"touchmove",this._onMove,this),Ee(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new q(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,mt(r),this._moved||(this.fire("dragstart"),this._moved=!0,Ie(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),st(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){pt(document.body,"leaflet-dragging"),this._lastTarget&&(pt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ze(document,"mousemove touchmove",this._onMove,this),Ze(document,"mouseup touchend touchcancel",this._onUp,this),ua(),Ge();var a=this._moved&&this._moving;this._moving=!1,$n._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function cr(r,a,c){var d,g=[1,4,2,8],v,T,F,V,G,ee,ye,Le;for(v=0,ee=r.length;v<ee;v++)r[v]._code=ni(r[v],a);for(F=0;F<4;F++){for(ye=g[F],d=[],v=0,ee=r.length,T=ee-1;v<ee;T=v++)V=r[v],G=r[T],V._code&ye?G._code&ye||(Le=Qr(G,V,ye,a,c),Le._code=ni(Le,a),d.push(Le)):(G._code&ye&&(Le=Qr(G,V,ye,a,c),Le._code=ni(Le,a),d.push(Le)),d.push(V));r=d}return r}function ya(r,a){var c,d,g,v,T,F,V,G,ee;if(!r||r.length===0)throw new Error("latlngs not passed");Xt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ye=ce([0,0]),Le=De(r),Jt=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());Jt<1700&&(ye=Hs(r));var xt=r.length,xn=[];for(c=0;c<xt;c++){var sn=ce(r[c]);xn.push(a.project(ce([sn.lat-ye.lat,sn.lng-ye.lng])))}for(F=V=G=0,c=0,d=xt-1;c<xt;d=c++)g=xn[c],v=xn[d],T=g.y*v.x-v.y*g.x,V+=(g.x+v.x)*T,G+=(g.y+v.y)*T,F+=T*3;F===0?ee=xn[0]:ee=[V/F,G/F];var to=a.unproject(K(ee));return ce([to.lat+ye.lat,to.lng+ye.lng])}function Hs(r){for(var a=0,c=0,d=0,g=0;g<r.length;g++){var v=ce(r[g]);a+=v.lat,c+=v.lng,d++}return ce([a/d,c/d])}var va={__proto__:null,clipPolygon:cr,polygonCenter:ya,centroid:Hs};function Ks(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=Mi(r,c),r=Du(r,c),r}function wa(r,a,c){return Math.sqrt(St(r,a,c,!0))}function Ws(r,a,c){return St(r,a,c)}function Du(r,a){var c=r.length,d=typeof Uint8Array<"u"?Uint8Array:Array,g=new d(c);g[0]=g[c-1]=1,Zs(r,g,a,0,c-1);var v,T=[];for(v=0;v<c;v++)g[v]&&T.push(r[v]);return T}function Zs(r,a,c,d,g){var v=0,T,F,V;for(F=d+1;F<=g-1;F++)V=St(r[F],r[d],r[g],!0),V>v&&(T=F,v=V);v>c&&(a[T]=1,Zs(r,a,c,d,T),Zs(r,a,c,T,g))}function Mi(r,a){for(var c=[r[0]],d=1,g=0,v=r.length;d<v;d++)Qs(r[d],r[g])>a&&(c.push(r[d]),g=d);return g<v-1&&c.push(r[v-1]),c}var Ca;function ba(r,a,c,d,g){var v=d?Ca:ni(r,c),T=ni(a,c),F,V,G;for(Ca=T;;){if(!(v|T))return[r,a];if(v&T)return!1;F=v||T,V=Qr(r,a,F,c,g),G=ni(V,c),F===v?(r=V,v=G):(a=V,T=G)}}function Qr(r,a,c,d,g){var v=a.x-r.x,T=a.y-r.y,F=d.min,V=d.max,G,ee;return c&8?(G=r.x+v*(V.y-r.y)/T,ee=V.y):c&4?(G=r.x+v*(F.y-r.y)/T,ee=F.y):c&2?(G=V.x,ee=r.y+T*(V.x-r.x)/v):c&1&&(G=F.x,ee=r.y+T*(F.x-r.x)/v),new q(G,ee,g)}function ni(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function Qs(r,a){var c=a.x-r.x,d=a.y-r.y;return c*c+d*d}function St(r,a,c,d){var g=a.x,v=a.y,T=c.x-g,F=c.y-v,V=T*T+F*F,G;return V>0&&(G=((r.x-g)*T+(r.y-v)*F)/V,G>1?(g=c.x,v=c.y):G>0&&(g+=T*G,v+=F*G)),T=r.x-g,F=r.y-v,d?T*T+F*F:new q(g,v)}function Xt(r){return!Y(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Ea(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Xt(r)}function xi(r,a){var c,d,g,v,T,F,V,G;if(!r||r.length===0)throw new Error("latlngs not passed");Xt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ee=ce([0,0]),ye=De(r),Le=ye.getNorthWest().distanceTo(ye.getSouthWest())*ye.getNorthEast().distanceTo(ye.getNorthWest());Le<1700&&(ee=Hs(r));var Jt=r.length,xt=[];for(c=0;c<Jt;c++){var xn=ce(r[c]);xt.push(a.project(ce([xn.lat-ee.lat,xn.lng-ee.lng])))}for(c=0,d=0;c<Jt-1;c++)d+=xt[c].distanceTo(xt[c+1])/2;if(d===0)G=xt[0];else for(c=0,v=0;c<Jt-1;c++)if(T=xt[c],F=xt[c+1],g=T.distanceTo(F),v+=g,v>d){V=(v-d)/g,G=[F.x-V*(F.x-T.x),F.y-V*(F.y-T.y)];break}var sn=a.unproject(K(G));return ce([sn.lat+ee.lat,sn.lng+ee.lng])}var u={__proto__:null,simplify:Ks,pointToSegmentDistance:wa,closestPointOnSegment:Ws,clipSegment:ba,_getEdgeIntersection:Qr,_getBitCode:ni,_sqClosestPointOnSegment:St,isFlat:Xt,_flat:Ea,polylineCenter:xi},p={project:function(r){return new q(r.lng,r.lat)},unproject:function(r){return new fe(r.y,r.x)},bounds:new oe([-180,-90],[180,90])},_={R:6378137,R_MINOR:6356752314245179e-9,bounds:new oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,d=r.lat*a,g=this.R_MINOR/c,v=Math.sqrt(1-g*g),T=v*Math.sin(d),F=Math.tan(Math.PI/4-d/2)/Math.pow((1-T)/(1+T),v/2);return d=-c*Math.log(Math.max(F,1e-10)),new q(r.lng*a*c,d)},unproject:function(r){for(var a=180/Math.PI,c=this.R,d=this.R_MINOR/c,g=Math.sqrt(1-d*d),v=Math.exp(-r.y/c),T=Math.PI/2-2*Math.atan(v),F=0,V=.1,G;F<15&&Math.abs(V)>1e-7;F++)G=g*Math.sin(T),G=Math.pow((1-G)/(1+G),g/2),V=Math.PI/2-2*Math.atan(v*G)-T,T+=V;return new fe(T*a,r.x*a/c)}},w={__proto__:null,LonLat:p,Mercator:_,SphericalMercator:un},k=t({},Dn,{code:"EPSG:3395",projection:_,transformation:function(){var r=.5/(Math.PI*_.R);return Qt(r,.5,-r,.5)}()}),B=t({},Dn,{code:"EPSG:4326",projection:p,transformation:Qt(1/180,1,-1/180,.5)}),Q=t({},Dt,{projection:p,transformation:Qt(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,d=a.lat-r.lat;return Math.sqrt(c*c+d*d)},infinite:!0});Dt.Earth=Dn,Dt.EPSG3395=k,Dt.EPSG3857=In,Dt.EPSG900913=Zo,Dt.EPSG4326=B,Dt.Simple=Q;var ke=nn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[l(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[l(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ne.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=l(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=l(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return l(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?Y(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[l(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=l(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var d in this._zoomBoundLayers){var g=this._zoomBoundLayers[d].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var at=ke.extend({initialize:function(r,a){I(this,a),this._layers={};var c,d;if(r)for(c=0,d=r.length;c<d;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,d;for(c in this._layers)d=this._layers[c],d[r]&&d[r].apply(d,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return l(r)}}),Ue=function(r,a){return new at(r,a)},nt=at.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),at.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),at.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Je;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),Mt=function(r,a){return new nt(r,a)},pn=R.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){I(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(d,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(r,a){var c=this.options,d=c[a+"Size"];typeof d=="number"&&(d=[d,d]);var g=K(d),v=K(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),v&&(r.style.marginLeft=-v.x+"px",r.style.marginTop=-v.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return re.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function mn(r){return new pn(r)}var ii=pn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof ii.imagePath!="string"&&(ii.imagePath=this._detectIconPath()),(this.options.imagePath||ii.imagePath)+pn.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,d,g){var v=d.exec(c);return v&&v[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Be("div","leaflet-default-icon-path",document.body),a=Ur(r,"background-image")||Ur(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Ys=fn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new $n(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ie(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,d=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,v=Pn(a._icon),T=c.getPixelBounds(),F=c.getPixelOrigin(),V=Fe(T.min._subtract(F).add(g),T.max._subtract(F).subtract(g));if(!V.contains(v)){var G=K((Math.max(V.max.x,v.x)-V.max.x)/(T.max.x-V.max.x)-(Math.min(V.min.x,v.x)-V.min.x)/(T.min.x-V.min.x),(Math.max(V.max.y,v.y)-V.max.y)/(T.max.y-V.max.y)-(Math.min(V.min.y,v.y)-V.min.y)/(T.min.y-V.min.y)).multiplyBy(d);c.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),st(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=S(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,d=Pn(a._icon),g=a._map.layerPointToLatLng(d);c&&st(c,d),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Iu=ke.extend({options:{icon:new ii,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){I(this,a),this._latlng=ce(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=ce(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),Ie(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),v=!1;g!==this._shadow&&(this._removeShadow(),v=!0),g&&(Ie(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&v&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ze(this._icon,"focus",this._panOnFocus,this),tt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tt(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&st(this._icon,r),this._shadow&&st(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(Ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ys)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ys(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Yt(this._icon,r),this._shadow&&Yt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?K(a.iconSize):K(0,0),d=a.iconAnchor?K(a.iconAnchor):K(0,0);r.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:c.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function zC(r,a){return new Iu(r,a)}var hr=ke.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return I(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Au=hr.extend({options:{fill:!0,radius:10},initialize:function(r,a){I(this,a),this._latlng=ce(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=ce(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return hr.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),d=[r+c,a+c];this._pxBounds=new oe(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function jC(r,a){return new Au(r,a)}var ed=Au.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=t({},c,{radius:a})),I(this,a),this._latlng=ce(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Je(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:hr.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===Dn.distance){var g=Math.PI/180,v=this._mRadius/Dn.R/g,T=c.project([a+v,r]),F=c.project([a-v,r]),V=T.add(F).divideBy(2),G=c.unproject(V).lat,ee=Math.acos((Math.cos(v*g)-Math.sin(a*g)*Math.sin(G*g))/(Math.cos(a*g)*Math.cos(G*g)))/g;(isNaN(ee)||ee===0)&&(ee=v/Math.cos(Math.PI/180*a)),this._point=V.subtract(c.getPixelOrigin()),this._radius=isNaN(ee)?0:V.x-c.project([G,r-ee]).x,this._radiusY=V.y-T.y}else{var ye=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ye).x}this._updateBounds()}});function $C(r,a,c){return new ed(r,a,c)}var Ri=hr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){I(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,d=St,g,v,T=0,F=this._parts.length;T<F;T++)for(var V=this._parts[T],G=1,ee=V.length;G<ee;G++){g=V[G-1],v=V[G];var ye=d(r,g,v,!0);ye<a&&(a=ye,c=d(r,g,v))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=ce(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Je,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Xt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=Xt(r),d=0,g=r.length;d<g;d++)c?(a[d]=ce(r[d]),this._bounds.extend(a[d])):a[d]=this._convertLatLngs(r[d]);return a},_project:function(){var r=new oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new q(r,r);this._rawPxBounds&&(this._pxBounds=new oe([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var d=r[0]instanceof fe,g=r.length,v,T;if(d){for(T=[],v=0;v<g;v++)T[v]=this._map.latLngToLayerPoint(r[v]),c.extend(T[v]);a.push(T)}else for(v=0;v<g;v++)this._projectLatlngs(r[v],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,d,g,v,T,F,V;for(c=0,g=0,v=this._rings.length;c<v;c++)for(V=this._rings[c],d=0,T=V.length;d<T-1;d++)F=ba(V[d],V[d+1],r,d,!0),F&&(a[g]=a[g]||[],a[g].push(F[0]),(F[1]!==V[d+1]||d===T-2)&&(a[g].push(F[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,d=r.length;c<d;c++)r[c]=Ks(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,d,g,v,T,F,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,v=this._parts.length;c<v;c++)for(F=this._parts[c],d=0,T=F.length,g=T-1;d<T;g=d++)if(!(!a&&d===0)&&wa(r,F[g],F[d])<=V)return!0;return!1}});function qC(r,a){return new Ri(r,a)}Ri._flat=Ea;var Xs=Ri.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ya(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Ri.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof fe&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Ri.prototype._setLatLngs.call(this,r),Xt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Xt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new q(a,a);if(r=new oe(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,g=this._rings.length,v;d<g;d++)v=cr(this._rings[d],r,!0),v.length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,d,g,v,T,F,V,G;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(v=0,V=this._parts.length;v<V;v++)for(c=this._parts[v],T=0,G=c.length,F=G-1;T<G;F=T++)d=c[T],g=c[F],d.y>r.y!=g.y>r.y&&r.x<(g.x-d.x)*(r.y-d.y)/(g.y-d.y)+d.x&&(a=!a);return a||Ri.prototype._containsPoint.call(this,r,!0)}});function GC(r,a){return new Xs(r,a)}var ki=nt.extend({initialize:function(r,a){I(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=Y(r)?r:r.features,c,d,g;if(a){for(c=0,d=a.length;c<d;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var v=this.options;if(v.filter&&!v.filter(r))return this;var T=Pu(r,v);return T?(T.feature=Ru(r),T.defaultOptions=T.options,this.resetStyle(T),v.onEachFeature&&v.onEachFeature(r,T),this.addLayer(T)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=t({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Pu(r,a){var c=r.type==="Feature"?r.geometry:r,d=c?c.coordinates:null,g=[],v=a&&a.pointToLayer,T=a&&a.coordsToLatLng||td,F,V,G,ee;if(!d&&!c)return null;switch(c.type){case"Point":return F=T(d),Vg(v,r,F,a);case"MultiPoint":for(G=0,ee=d.length;G<ee;G++)F=T(d[G]),g.push(Vg(v,r,F,a));return new nt(g);case"LineString":case"MultiLineString":return V=Mu(d,c.type==="LineString"?0:1,T),new Ri(V,a);case"Polygon":case"MultiPolygon":return V=Mu(d,c.type==="Polygon"?1:2,T),new Xs(V,a);case"GeometryCollection":for(G=0,ee=c.geometries.length;G<ee;G++){var ye=Pu({geometry:c.geometries[G],type:"Feature",properties:r.properties},a);ye&&g.push(ye)}return new nt(g);case"FeatureCollection":for(G=0,ee=c.features.length;G<ee;G++){var Le=Pu(c.features[G],a);Le&&g.push(Le)}return new nt(g);default:throw new Error("Invalid GeoJSON object.")}}function Vg(r,a,c,d){return r?r(a,c):new Iu(c,d&&d.markersInheritOptions&&d)}function td(r){return new fe(r[1],r[0],r[2])}function Mu(r,a,c){for(var d=[],g=0,v=r.length,T;g<v;g++)T=a?Mu(r[g],a-1,c):(c||td)(r[g]),d.push(T);return d}function nd(r,a){return r=ce(r),r.alt!==void 0?[y(r.lng,a),y(r.lat,a),y(r.alt,a)]:[y(r.lng,a),y(r.lat,a)]}function xu(r,a,c,d){for(var g=[],v=0,T=r.length;v<T;v++)g.push(a?xu(r[v],Xt(r[v])?0:a-1,c,d):nd(r[v],d));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function Js(r,a){return r.feature?t({},r.feature,{geometry:a}):Ru(a)}function Ru(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var id={toGeoJSON:function(r){return Js(this,{type:"Point",coordinates:nd(this.getLatLng(),r)})}};Iu.include(id),ed.include(id),Au.include(id),Ri.include({toGeoJSON:function(r){var a=!Xt(this._latlngs),c=xu(this._latlngs,a?1:0,!1,r);return Js(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),Xs.include({toGeoJSON:function(r){var a=!Xt(this._latlngs),c=a&&!Xt(this._latlngs[0]),d=xu(this._latlngs,c?2:a?1:0,!0,r);return a||(d=[d]),Js(this,{type:(c?"Multi":"")+"Polygon",coordinates:d})}}),at.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),Js(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",d=[];return this.eachLayer(function(g){if(g.toGeoJSON){var v=g.toGeoJSON(r);if(c)d.push(v.geometry);else{var T=Ru(v);T.type==="FeatureCollection"?d.push.apply(d,T.features):d.push(T)}}}),c?Js(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function Bg(r,a){return new ki(r,a)}var HC=Bg,ku=ke.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=De(a),I(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Jn(this._image),this},bringToBack:function(){return this._map&&ei(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=De(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Be("img");if(Ie(a,"leaflet-image-layer"),this._zoomAnimated&&Ie(a,"leaflet-zoom-animated"),this.options.className&&Ie(a,this.options.className),a.onselectstart=m,a.onmousemove=m,a.onload=s(this.fire,this,"load"),a.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Nt(this._image,c,a)},_reset:function(){var r=this._image,a=new oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();st(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),KC=function(r,a,c){return new ku(r,a,c)},Ug=ku.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Be("video");if(Ie(a,"leaflet-image-layer"),this._zoomAnimated&&Ie(a,"leaflet-zoom-animated"),this.options.className&&Ie(a,this.options.className),a.onselectstart=m,a.onmousemove=m,a.onloadeddata=s(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),d=[],g=0;g<c.length;g++)d.push(c[g].src);this._url=c.length>0?d:[a.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var T=Be("source");T.src=this._url[v],a.appendChild(T)}}});function WC(r,a,c){return new Ug(r,a,c)}var zg=ku.extend({_initImage:function(){var r=this._image=this._url;Ie(r,"leaflet-image-layer"),this._zoomAnimated&&Ie(r,"leaflet-zoom-animated"),this.options.className&&Ie(r,this.options.className),r.onselectstart=m,r.onmousemove=m}});function ZC(r,a,c){return new zg(r,a,c)}var ri=ke.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof fe||Y(r))?(this._latlng=ce(r),I(this,a)):(I(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Yt(this._container,1),this.bringToFront(),this.options.interactive&&(Ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Yt(this._container,0),this._removeTimeout=setTimeout(s(tt,void 0,this._container),200)):tt(this._container),this.options.interactive&&(pt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=ce(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Jn(this._container),this},bringToBack:function(){return this._map&&ei(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof nt){a=null;var c=this._source._layers;for(var d in c)if(c[d]._map){a=c[d];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=K(this.options.offset),c=this._getAnchor();this._zoomAnimated?st(this._container,r.add(c)):a=a.add(r).add(c);var d=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=d+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ne.include({_initOverlay:function(r,a,c,d){var g=a;return g instanceof r||(g=new r(d).setContent(a)),c&&g.setLatLng(c),g}}),ke.include({_initOverlay:function(r,a,c,d){var g=c;return g instanceof r?(I(g,d),g._source=this):(g=a&&!d?a:new r(d,this),g.setContent(c)),g}});var Ou=ri.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,ri.prototype.openOn.call(this,r)},onAdd:function(r){ri.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hr||this._source.on("preclick",zt))},onRemove:function(r){ri.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hr||this._source.off("preclick",zt))},getEvents:function(){var r=ri.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Be("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Be("div",r+"-content-wrapper",a);if(this._contentNode=Be("div",r+"-content",c),qr(a),ma(this._contentNode),Ee(a,"contextmenu",zt),this._tipContainer=Be("div",r+"-tip-container",a),this._tip=Be("div",r+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=Be("a",r+"-close-button",a);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(d,"click",function(g){mt(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var d=r.offsetHeight,g=this.options.maxHeight,v="leaflet-popup-scrolled";g&&d>g?(a.height=g+"px",Ie(r,v)):pt(r,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();st(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(Ur(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,d=this._containerWidth,g=new q(this._containerLeft,-c-this._containerBottom);g._add(Pn(this._container));var v=r.layerPointToContainerPoint(g),T=K(this.options.autoPanPadding),F=K(this.options.autoPanPaddingTopLeft||T),V=K(this.options.autoPanPaddingBottomRight||T),G=r.getSize(),ee=0,ye=0;v.x+d+V.x>G.x&&(ee=v.x+d-G.x+V.x),v.x-ee-F.x<0&&(ee=v.x-F.x),v.y+c+V.y>G.y&&(ye=v.y+c-G.y+V.y),v.y-ye-F.y<0&&(ye=v.y-F.y),(ee||ye)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([ee,ye]))}},_getAnchor:function(){return K(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),QC=function(r,a){return new Ou(r,a)};Ne.mergeOptions({closePopupOnClick:!0}),Ne.include({openPopup:function(r,a,c){return this._initOverlay(Ou,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),ke.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Ou,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof nt||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Mn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof hr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Lu=ri.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){ri.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){ri.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=ri.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Be("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,d=this._map,g=this._container,v=d.latLngToContainerPoint(d.getCenter()),T=d.layerPointToContainerPoint(r),F=this.options.direction,V=g.offsetWidth,G=g.offsetHeight,ee=K(this.options.offset),ye=this._getAnchor();F==="top"?(a=V/2,c=G):F==="bottom"?(a=V/2,c=0):F==="center"?(a=V/2,c=G/2):F==="right"?(a=0,c=G/2):F==="left"?(a=V,c=G/2):T.x<v.x?(F="right",a=0,c=G/2):(F="left",a=V+(ee.x+ye.x)*2,c=G/2),r=r.subtract(K(a,c,!0)).add(ee).add(ye),pt(g,"leaflet-tooltip-right"),pt(g,"leaflet-tooltip-left"),pt(g,"leaflet-tooltip-top"),pt(g,"leaflet-tooltip-bottom"),Ie(g,"leaflet-tooltip-"+F),st(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Yt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return K(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),YC=function(r,a){return new Lu(r,a)};Ne.include({openTooltip:function(r,a,c){return this._initOverlay(Lu,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),ke.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Lu,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof nt||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(Ee(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Ee(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,d;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),d=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(a)}});var jg=pn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(zr(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var d=K(c.bgPos);a.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function XC(r){return new jg(r)}pn.Default=ii;var Sa=ke.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){I(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),tt(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ei(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof q?r:new q(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),d=0,g=a.length,v;d<g;d++)v=a[d].style.zIndex,a[d]!==this._container&&v&&(c=r(c,+v));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){Yt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var d in this._tiles){var g=this._tiles[d];if(!(!g.current||!g.loaded)){var v=Math.min(1,(r-g.loaded)/200);Yt(g.el,v),v<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(A(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(tt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var d=this._levels[r],g=this._map;return d||(d=this._levels[r]={},d.el=Be("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=a,d.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),d.zoom=r,this._setZoomTransform(d,g.getCenter(),g.getZoom()),m(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var d=a.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)tt(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,d){var g=Math.floor(r/2),v=Math.floor(a/2),T=c-1,F=new q(+g,+v);F.z=+T;var V=this._tileCoordsToKey(F),G=this._tiles[V];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),T>d?this._retainParent(g,v,T,d):!1)},_retainChildren:function(r,a,c,d){for(var g=2*r;g<2*r+2;g++)for(var v=2*a;v<2*a+2;v++){var T=new q(g,v);T.z=c+1;var F=this._tileCoordsToKey(T),V=this._tiles[F];if(V&&V.active){V.retain=!0;continue}else V&&V.loaded&&(V.retain=!0);c+1<d&&this._retainChildren(g,v,c+1,d)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,d){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var v=this.options.updateWhenZooming&&g!==this._tileZoom;(!d||v)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var d=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(a,c)).round();re.any3d?Nt(r.el,g,d):st(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],d).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],d).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],d).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),d=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),v=a.getSize().divideBy(d*2);return new oe(g.subtract(v),g.add(v))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(d),v=g.getCenter(),T=[],F=this.options.keepBuffer,V=new oe(g.getBottomLeft().subtract([F,-F]),g.getTopRight().add([F,-F]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var ee=this._tiles[G].coords;(ee.z!==this._tileZoom||!V.contains(new q(ee.x,ee.y)))&&(this._tiles[G].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var ye=g.min.y;ye<=g.max.y;ye++)for(var Le=g.min.x;Le<=g.max.x;Le++){var Jt=new q(Le,ye);if(Jt.z=this._tileZoom,!!this._isValidTile(Jt)){var xt=this._tiles[this._tileCoordsToKey(Jt)];xt?xt.current=!0:T.push(Jt)}}if(T.sort(function(sn,to){return sn.distanceTo(v)-to.distanceTo(v)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xn=document.createDocumentFragment();for(Le=0;Le<T.length;Le++)this._addTile(T[Le],xn);this._level.el.appendChild(xn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(r);return De(this.options.bounds).overlaps(d)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),d=r.scaleBy(c),g=d.add(c),v=a.unproject(d,r.z),T=a.unproject(g,r.z);return[v,T]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Je(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new q(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(tt(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){Ie(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=m,r.onmousemove=m,re.ielt9&&this.options.opacity<1&&Yt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),d=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),s(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&S(s(this._tileReady,this,r,null,g)),st(g,c),this._tiles[d]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var d=this._tileCoordsToKey(r);c=this._tiles[d],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Yt(c.el,0),A(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(Ie(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new q(this._wrapX?f(r.x,this._wrapX):r.x,this._wrapY?f(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new oe(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function JC(r){return new Sa(r)}var eo=Sa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=I(this,a),a.detectRetina&&re.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return Ee(c,"load",s(this._tileOnLoad,this,a,c)),Ee(c,"error",s(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:re.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return z(this._url,t(a,this.options))},_tileOnLoad:function(r,a){re.ielt9?setTimeout(s(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var d=this.options.errorTileUrl;d&&a.getAttribute("src")!==d&&(a.src=d),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,d=this.options.zoomOffset;return c&&(r=a-r),r+d},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=m,a.onerror=m,!a.complete)){a.src=he;var c=this._tiles[r].coords;tt(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",he),Sa.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===he))return Sa.prototype._tileReady.call(this,r,a,c)}});function $g(r,a){return new eo(r,a)}var qg=eo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=t({},this.defaultWmsParams);for(var d in a)d in this.options||(c[d]=a[d]);a=I(this,a);var g=a.detectRetina&&re.retina?2:1,v=this.getTileSize();c.width=v.x*g,c.height=v.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,eo.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,d=Fe(c.project(a[0]),c.project(a[1])),g=d.min,v=d.max,T=(this._wmsVersion>=1.3&&this._crs===B?[g.y,g.x,v.y,v.x]:[g.x,g.y,v.x,v.y]).join(","),F=eo.prototype.getTileUrl.call(this,r);return F+N(this.wmsParams,F,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(r,a){return t(this.wmsParams,r),a||this.redraw(),this}});function eb(r,a){return new qg(r,a)}eo.WMS=qg,$g.wms=eb;var Oi=ke.extend({options:{padding:.1},initialize:function(r){I(this,r),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),v=d.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));re.any3d?Nt(this._container,v,c):st(this._container,v)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new oe(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gg=Oi.extend({options:{tolerance:0},getEvents:function(){var r=Oi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Oi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Ee(r,"mousemove",this._onMouseMove,this),Ee(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,tt(this._container),Ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),d=re.retina?2:1;st(a,r.min),a.width=d*c.x,a.height=d*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Oi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[l(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,d=a.prev;c?c.prev=d:this._drawLast=d,d?d.next=c:this._drawFirst=c,delete r._order,delete this._layers[l(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],d,g;for(g=0;g<a.length;g++){if(d=Number(a[g]),isNaN(d))return;c.push(d)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new oe,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)r=d.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,d,g,v,T=r._parts,F=T.length,V=this._ctx;if(F){for(V.beginPath(),c=0;c<F;c++){for(d=0,g=T[c].length;d<g;d++)v=T[c][d],V[d?"lineTo":"moveTo"](v.x,v.y);a&&V.closePath()}this._fillStroke(V,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,d=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||d)/d;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,d,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,d,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(d=c);this._fireEvent(d?[d]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(pt(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,d,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(d=c);d!==this._hoveredLayer&&(this._handleMouseOut(r),d&&(Ie(this._container,"leaflet-interactive"),this._fireEvent([d],r,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,d=a.prev;if(c)c.prev=d;else return;d?d.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,d=a.prev;if(d)d.next=c;else return;c?c.prev=d:d&&(this._drawLast=d),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Hg(r){return re.canvas?new Gg(r):null}var Ta=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),tb={_initContainer:function(){this._container=Be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Oi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Ta("shape");Ie(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Ta("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[l(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;tt(a),r.removeInteractiveTarget(a),delete this._layers[l(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,d=r.options,g=r._container;g.stroked=!!d.stroke,g.filled=!!d.fill,d.stroke?(a||(a=r._stroke=Ta("stroke")),g.appendChild(a),a.weight=d.weight+"px",a.color=d.color,a.opacity=d.opacity,d.dashArray?a.dashStyle=Y(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=d.lineCap.replace("butt","flat"),a.joinstyle=d.lineJoin):a&&(g.removeChild(a),r._stroke=null),d.fill?(c||(c=r._fill=Ta("fill")),g.appendChild(c),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),d=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+d+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){Jn(r._container)},_bringToBack:function(r){ei(r._container)}},Fu=re.vml?Ta:Rs,Da=Oi.extend({_initContainer:function(){this._container=Fu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Fu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tt(this._container),Ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),st(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Fu("path");r.options.className&&Ie(a,r.options.className),r.options.interactive&&Ie(a,"leaflet-interactive"),this._updateStyle(r),this._layers[l(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){tt(r._path),r.removeInteractiveTarget(r._path),delete this._layers[l(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,ks(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),d=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+d+" 0 1,0 ",v=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,v)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){Jn(r._path)},_bringToBack:function(r){ei(r._path)}});re.vml&&Da.include(tb);function Kg(r){return re.svg||re.vml?new Da(r):null}Ne.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Hg(r)||Kg(r)}});var Wg=Xs.extend({initialize:function(r,a){Xs.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=De(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function nb(r,a){return new Wg(r,a)}Da.create=Fu,Da.pointsToPath=ks,ki.geometryToLayer=Pu,ki.coordsToLatLng=td,ki.coordsToLatLngs=Mu,ki.latLngToCoords=nd,ki.latLngsToCoords=xu,ki.getFeature=Js,ki.asFeature=Ru,Ne.mergeOptions({boxZoom:!0});var Zg=fn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),or(),Ii(),this._startPoint=this._map.mouseEventToContainerPoint(r),Ee(document,{contextmenu:Mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Be("div","leaflet-zoom-box",this._container),Ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new oe(this._point,this._startPoint),c=a.getSize();st(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(tt(this._box),pt(this._container,"leaflet-crosshair")),Ge(),ua(),Ze(document,{contextmenu:Mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var a=new Je(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ne.addInitHook("addHandler","boxZoom",Zg),Ne.mergeOptions({doubleClickZoom:!0});var Qg=fn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),d=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-d:c+d;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Ne.addInitHook("addHandler","doubleClickZoom",Qg),Ne.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Yg=fn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new $n(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}Ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pt(this._map._container,"leaflet-grab"),pt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=De(this._map.options.maxBounds);this._offsetLimit=Fe(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,g=(d-a+c)%r+a-c,v=(d+a+c)%r-a-c,T=Math.abs(g+c)<Math.abs(v+c)?g:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(r){var a=this._map,c=a.options,d=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),d)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),v=(this._lastTime-this._times[0])/1e3,T=c.easeLinearity,F=g.multiplyBy(T/v),V=F.distanceTo([0,0]),G=Math.min(c.inertiaMaxSpeed,V),ee=F.multiplyBy(G/V),ye=G/(c.inertiaDeceleration*T),Le=ee.multiplyBy(-ye/2).round();!Le.x&&!Le.y?a.fire("moveend"):(Le=a._limitOffset(Le,a.options.maxBounds),S(function(){a.panBy(Le,{duration:ye,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});Ne.addInitHook("addHandler","dragging",Yg),Ne.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Xg=fn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Ee(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,d=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(d,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,d,g;for(d=0,g=c.left.length;d<g;d++)a[c.left[d]]=[-1*r,0];for(d=0,g=c.right.length;d<g;d++)a[c.right[d]]=[r,0];for(d=0,g=c.down.length;d<g;d++)a[c.down[d]]=[0,r];for(d=0,g=c.up.length;d<g;d++)a[c.up[d]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,d,g;for(d=0,g=c.zoomIn.length;d<g;d++)a[c.zoomIn[d]]=r;for(d=0,g=c.zoomOut.length;d<g;d++)a[c.zoomOut[d]]=-r},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,d;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(d=this._panKeys[a],r.shiftKey&&(d=K(d).multiplyBy(3)),c.options.maxBounds&&(d=c._limitOffset(K(d),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(d)));c.panTo(g)}else c.panBy(d)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Mn(r)}}});Ne.addInitHook("addHandler","keyboard",Xg),Ne.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Jg=fn.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=_a(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),d),Mn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,v=c?Math.ceil(g/c)*c:g,T=r._limitZoom(a+(this._delta>0?v:-v))-a;this._delta=0,this._startTime=null,T&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+T):r.setZoomAround(this._lastMousePos,a+T))}});Ne.addInitHook("addHandler","scrollWheelZoom",Jg);var ib=600;Ne.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var e_=fn.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new q(a.clientX,a.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",mt),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),ib),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Ze(document,"touchend",mt),Ze(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Ze(document,"touchend touchcancel contextmenu",this._cancel,this),Ze(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new q(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ne.addInitHook("addHandler","tapHold",e_),Ne.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var t_=fn.extend({addHooks:function(){Ie(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),Ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),d=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(d)._divideBy(2))),this._startDist=c.distanceTo(d),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),mt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),d=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(d)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var v=c._add(d)._divideBy(2)._subtract(this._centerPoint);if(g===1&&v.x===0&&v.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var T=s(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=S(T,this,!0),mt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),Ze(document,"touchmove",this._onTouchMove,this),Ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ne.addInitHook("addHandler","touchZoom",t_),Ne.BoxZoom=Zg,Ne.DoubleClickZoom=Qg,Ne.Drag=Yg,Ne.Keyboard=Xg,Ne.ScrollWheelZoom=Jg,Ne.TapHold=e_,Ne.TouchZoom=t_,n.Bounds=oe,n.Browser=re,n.CRS=Dt,n.Canvas=Gg,n.Circle=ed,n.CircleMarker=Au,n.Class=R,n.Control=rn,n.DivIcon=jg,n.DivOverlay=ri,n.DomEvent=ot,n.DomUtil=ti,n.Draggable=$n,n.Evented=nn,n.FeatureGroup=nt,n.GeoJSON=ki,n.GridLayer=Sa,n.Handler=fn,n.Icon=pn,n.ImageOverlay=ku,n.LatLng=fe,n.LatLngBounds=Je,n.Layer=ke,n.LayerGroup=at,n.LineUtil=u,n.Map=Ne,n.Marker=Iu,n.Mixin=Gs,n.Path=hr,n.Point=q,n.PolyUtil=va,n.Polygon=Xs,n.Polyline=Ri,n.Popup=Ou,n.PosAnimation=vu,n.Projection=w,n.Rectangle=Wg,n.Renderer=Oi,n.SVG=Da,n.SVGOverlay=zg,n.TileLayer=eo,n.Tooltip=Lu,n.Transformation=It,n.Util=x,n.VideoOverlay=Ug,n.bind=s,n.bounds=Fe,n.canvas=Hg,n.circle=$C,n.circleMarker=jC,n.control=ur,n.divIcon=XC,n.extend=t,n.featureGroup=Mt,n.geoJSON=Bg,n.geoJson=HC,n.gridLayer=JC,n.icon=mn,n.imageOverlay=KC,n.latLng=ce,n.latLngBounds=De,n.layerGroup=Ue,n.map=wu,n.marker=zC,n.point=K,n.polygon=GC,n.polyline=qC,n.popup=QC,n.rectangle=nb,n.setOptions=I,n.stamp=l,n.svg=Kg,n.svgOverlay=ZC,n.tileLayer=$g,n.tooltip=YC,n.transformation=Qt,n.version=e,n.videoOverlay=WC;var rb=window.L;n.noConflict=function(){return window.L=rb,this},window.L=n})});var _0=null;function qi(){return _0}function y0(n){_0??=n}var Hu=class{};var Ht=new Xe(""),Ld=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>ae(_b),providedIn:"platform"})}}return n})(),v0=new Xe(""),_b=(()=>{class n extends Ld{constructor(){super(),this._doc=ae(Ht),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qi().getBaseHref(this._doc)}onPopState(t){let i=qi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=qi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,s){this._history.pushState(t,i,s)}replaceState(t,i,s){this._history.replaceState(t,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Fd(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function d0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function ji(n){return n&&n[0]!=="?"?"?"+n:n}var Gi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>ae(Nd),providedIn:"root"})}}return n})(),w0=new Xe(""),Nd=(()=>{class n extends Gi{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ae(Ht).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Fd(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+ji(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${i}${s}`:i}pushState(t,i,s,o){let l=this.prepareExternalUrl(s+ji(o));this._platformLocation.pushState(t,i,l)}replaceState(t,i,s,o){let l=this.prepareExternalUrl(s+ji(o));this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(Pe(Ld),Pe(w0,8))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),C0=(()=>{class n extends Gi{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=Fd(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,s,o){let l=this.prepareExternalUrl(s+ji(o));l.length==0&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,i,l)}replaceState(t,i,s,o){let l=this.prepareExternalUrl(s+ji(o));l.length==0&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(Pe(Ld),Pe(w0,8))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),oo=(()=>{class n{constructor(t){this._subject=new ut,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=wb(d0(f0(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ji(i))}normalize(t){return n.stripTrailingSlash(vb(this._basePath,f0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",s=null){this._locationStrategy.pushState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ji(i)),s)}replaceState(t,i="",s=null){this._locationStrategy.replaceState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ji(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(s=>s(t,i))}subscribe(t,i,s){return this._subject.subscribe({next:t,error:i,complete:s})}static{this.normalizeQueryParams=ji}static{this.joinWithSlash=Fd}static{this.stripTrailingSlash=d0}static{this.\u0275fac=function(i){return new(i||n)(Pe(Gi))}}static{this.\u0275prov=we({token:n,factory:()=>yb(),providedIn:"root"})}}return n})();function yb(){return new oo(Pe(Gi))}function vb(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function f0(n){return n.replace(/\/index.html$/,"")}function wb(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var b0=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(b0||{});var $i={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Fa(n,e){let t=Cd(n),i=t[ka.NumberSymbols][e];if(typeof i>"u"){if(e===$i.CurrencyDecimal)return t[ka.NumberSymbols][$i.Decimal];if(e===$i.CurrencyGroup)return t[ka.NumberSymbols][$i.Group]}return i}function Cb(n,e){return Cd(n)[ka.NumberFormats][e]}var bb=/^(\d+)?\.((\d+)(-(\d+))?)?$/,p0=22,Ku=".",Na="0",Eb=";",Sb=",",Ad="#";function Tb(n,e,t,i,s,o,l=!1){let h="",f=!1;if(!isFinite(n))h=Fa(t,$i.Infinity);else{let m=Pb(n);l&&(m=Ab(m));let y=e.minInt,C=e.minFrac,E=e.maxFrac;if(o){let ne=o.match(bb);if(ne===null)throw new Error(`${o} is not a valid digit info`);let he=ne[1],ve=ne[3],it=ne[5];he!=null&&(y=Pd(he)),ve!=null&&(C=Pd(ve)),it!=null?E=Pd(it):ve!=null&&C>E&&(E=C)}Mb(m,C,E);let I=m.digits,N=m.integerLen,U=m.exponent,z=[];for(f=I.every(ne=>!ne);N<y;N++)I.unshift(0);for(;N<0;N++)I.unshift(0);N>0?z=I.splice(N,I.length):(z=I,I=[0]);let Y=[];for(I.length>=e.lgSize&&Y.unshift(I.splice(-e.lgSize,I.length).join(""));I.length>e.gSize;)Y.unshift(I.splice(-e.gSize,I.length).join(""));I.length&&Y.unshift(I.join("")),h=Y.join(Fa(t,i)),z.length&&(h+=Fa(t,s)+z.join("")),U&&(h+=Fa(t,$i.Exponential)+"+"+U)}return n<0&&!f?h=e.negPre+h+e.negSuf:h=e.posPre+h+e.posSuf,h}function Db(n,e,t){let i=Cb(e,b0.Decimal),s=Ib(i,Fa(e,$i.MinusSign));return Tb(n,s,e,$i.Group,$i.Decimal,t)}function Ib(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(Eb),s=i[0],o=i[1],l=s.indexOf(Ku)!==-1?s.split(Ku):[s.substring(0,s.lastIndexOf(Na)+1),s.substring(s.lastIndexOf(Na)+1)],h=l[0],f=l[1]||"";t.posPre=h.substring(0,h.indexOf(Ad));for(let y=0;y<f.length;y++){let C=f.charAt(y);C===Na?t.minFrac=t.maxFrac=y+1:C===Ad?t.maxFrac=y+1:t.posSuf+=C}let m=h.split(Sb);if(t.gSize=m[1]?m[1].length:0,t.lgSize=m[2]||m[1]?(m[2]||m[1]).length:0,o){let y=s.length-t.posPre.length-t.posSuf.length,C=o.indexOf(Ad);t.negPre=o.substring(0,C).replace(/'/g,""),t.negSuf=o.slice(C+y).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function Ab(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function Pb(n){let e=Math.abs(n)+"",t=0,i,s,o,l,h;for((s=e.indexOf(Ku))>-1&&(e=e.replace(Ku,"")),(o=e.search(/e/i))>0?(s<0&&(s=o),s+=+e.slice(o+1),e=e.substring(0,o)):s<0&&(s=e.length),o=0;e.charAt(o)===Na;o++);if(o===(h=e.length))i=[0],s=1;else{for(h--;e.charAt(h)===Na;)h--;for(s-=o,i=[],l=0;o<=h;o++,l++)i[l]=Number(e.charAt(o))}return s>p0&&(i=i.splice(0,p0-1),t=s-1,s=1),{digits:i,exponent:t,integerLen:s}}function Mb(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,s=i.length-n.integerLen,o=Math.min(Math.max(e,s),t),l=o+n.integerLen,h=i[l];if(l>0){i.splice(Math.max(n.integerLen,l));for(let C=l;C<i.length;C++)i[C]=0}else{s=Math.max(0,s),n.integerLen=1,i.length=Math.max(1,l=o+1),i[0]=0;for(let C=1;C<l;C++)i[C]=0}if(h>=5)if(l-1<0){for(let C=0;C>l;C--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[l-1]++;for(;s<Math.max(0,o);s++)i.push(0);let f=o!==0,m=e+n.integerLen,y=i.reduceRight(function(C,E,I,N){return E=E+C,N[I]=E<10?E:E-10,f&&(N[I]===0&&I>=m?N.pop():f=!1),E>=10?1:0},0);y&&(i.unshift(y),n.integerLen++)}function Pd(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function E0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[s,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(s.trim()===e)return decodeURIComponent(o)}return null}var Md=class{constructor(e,t,i,s){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=s}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},kn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,s){this._viewContainer=t,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((s,o,l)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Md(s.item,this._ngForOf,-1,-1),l===null?void 0:l);else if(l==null)i.remove(o===null?void 0:o);else if(o!==null){let h=i.get(o);i.move(h,l),m0(h,s)}});for(let s=0,o=i.length;s<o;s++){let h=i.get(s).context;h.index=s,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);m0(o,s)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(le(xa),le(_d),le(L_))}}static{this.\u0275dir=Vt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function m0(n,e){n.context.$implicit=e.item}var kt=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new xd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){g0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){g0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(le(xa),le(_d))}}static{this.\u0275dir=Vt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),xd=class{constructor(){this.$implicit=null,this.ngIf=null}};function g0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${y_(e)}'.`)}function xb(n,e){return new pe(2100,!1)}var S0=(()=>{class n{constructor(t){this._locale=t}transform(t,i,s){if(!Rb(t))return null;s||=this._locale;try{let o=kb(t);return Db(o,s,i)}catch(o){throw xb(n,o.message)}}static{this.\u0275fac=function(i){return new(i||n)(le(O_,16))}}static{this.\u0275pipe=C_({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function Rb(n){return!(n==null||n===""||n!==n)}function kb(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var yt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Fi({type:n})}static{this.\u0275inj=Li({})}}return n})(),Vd="browser",Ob="server";function Lb(n){return n===Vd}function Bd(n){return n===Ob}var T0=(()=>{class n{static{this.\u0275prov=we({token:n,providedIn:"root",factory:()=>Lb(ae(ts))?new Rd(ae(Ht),window):new kd})}}return n})(),Rd=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Fb(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],s-o[1])}};function Fb(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),s=i.currentNode;for(;s;){let o=s.shadowRoot;if(o){let l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}s=i.nextNode()}}return null}var kd=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Wu=class{};var jd=class extends Hu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},$d=class n extends jd{static makeCurrent(){y0(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Vb();return t==null?null:Bb(t)}resetBaseElement(){Va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return E0(document.cookie,e)}},Va=null;function Vb(){return Va=Va||document.querySelector("base"),Va?Va.getAttribute("href"):null}function Bb(n){return new URL(n,document.baseURI).pathname}var Ub=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),qd=new Xe(""),A0=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,s){return this._findPluginFor(i).addEventListener(t,i,s)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new pe(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(Pe(qd),Pe(_n))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),Zu=class{constructor(e){this._doc=e}},Ud="ng-app-id",P0=(()=>{class n{constructor(t,i,s,o={}){this.doc=t,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Bd(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(s=>s.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Ud}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(t,i){let s=this.styleRef;if(s.has(t)){let o=s.get(t);return o.usage+=i,o.usage}return s.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===t)return s.delete(i),o.removeAttribute(Ud),o;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=i,this.platformIsServer&&l.setAttribute(Ud,this.appId),t.appendChild(l),l}}addStyleToHost(t,i){let s=this.getStyleElement(t,i),o=this.styleRef,l=o.get(i)?.elements;l?l.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(Pe(Ht),Pe(pd),Pe(gd,8),Pe(ts))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),zd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Hd=/%COMP%/g,M0="%COMP%",zb=`_nghost-${M0}`,jb=`_ngcontent-${M0}`,$b=!0,qb=new Xe("",{providedIn:"root",factory:()=>$b});function Gb(n){return jb.replace(Hd,n)}function Hb(n){return zb.replace(Hd,n)}function x0(n,e){return e.map(t=>t.replace(Hd,n))}var Qu=(()=>{class n{constructor(t,i,s,o,l,h,f,m=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=l,this.platformId=h,this.ngZone=f,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=Bd(h),this.defaultRenderer=new Ba(t,l,f,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Aa.ShadowDom&&(i=He(X({},i),{encapsulation:Aa.Emulated}));let s=this.getOrCreateRenderer(t,i);return s instanceof Yu?s.applyToHost(t):s instanceof Ua&&s.applyStyles(),s}getOrCreateRenderer(t,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let l=this.doc,h=this.ngZone,f=this.eventManager,m=this.sharedStylesHost,y=this.removeStylesOnCompDestroy,C=this.platformIsServer;switch(i.encapsulation){case Aa.Emulated:o=new Yu(f,m,i,this.appId,y,l,h,C);break;case Aa.ShadowDom:return new Gd(f,m,t,i,l,h,this.nonce,C);default:o=new Ua(f,m,i,y,l,h,C);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(Pe(A0),Pe(P0),Pe(pd),Pe(qb),Pe(Ht),Pe(ts),Pe(_n),Pe(gd))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),Ba=class{constructor(e,t,i,s){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(zd[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(D0(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(D0(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new pe(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,s){if(s){t=s+":"+t;let o=zd[s];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let s=zd[i];s?e.removeAttributeNS(s,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,s){s&(so.DashCase|so.Important)?e.style.setProperty(t,i,s&so.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&so.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=qi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function D0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Gd=class extends Ba{constructor(e,t,i,s,o,l,h,f){super(e,o,l,f),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=x0(s.id,s.styles);for(let y of m){let C=document.createElement("style");h&&C.setAttribute("nonce",h),C.textContent=y,this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ua=class extends Ba{constructor(e,t,i,s,o,l,h,f){super(e,o,l,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=f?x0(f,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Yu=class extends Ua{constructor(e,t,i,s,o,l,h,f){let m=s+"-"+i.id;super(e,t,i,o,l,h,f,m),this.contentAttr=Gb(m),this.hostAttr=Hb(m)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},Kb=(()=>{class n extends Zu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,s){return t.addEventListener(i,s,!1),()=>this.removeEventListener(t,i,s)}removeEventListener(t,i,s){return t.removeEventListener(i,s)}static{this.\u0275fac=function(i){return new(i||n)(Pe(Ht))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),I0=["alt","control","meta","shift"],Wb={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zb={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Qb=(()=>{class n extends Zu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,s){let o=n.parseEventName(i),l=n.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qi().onAndCancel(t,o.domEventName,l))}static parseEventName(t){let i=t.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=n._normalizeKey(i.pop()),l="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),l="code."),I0.forEach(m=>{let y=i.indexOf(m);y>-1&&(i.splice(y,1),l+=m+".")}),l+=o,i.length!=0||o.length===0)return null;let f={};return f.domEventName=s,f.fullKey=l,f}static matchEventFullKeyCode(t,i){let s=Wb[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(s=t.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),I0.forEach(l=>{if(l!==s){let h=Zb[l];h(t)&&(o+=l+".")}}),o+=s,o===i)}static eventCallback(t,i,s){return o=>{n.matchEventFullKeyCode(o,t)&&s.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(Pe(Ht))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();function R0(n,e,t){return F_(X({rootComponent:n,platformRef:t?.platformRef},Yb(e)))}function Yb(n){return{appProviders:[...n1,...n?.providers??[]],platformProviders:t1}}function Xb(){$d.makeCurrent()}function Jb(){return new fd}function e1(){return S_(document),document}var t1=[{provide:ts,useValue:Vd},{provide:T_,useValue:Xb,multi:!0},{provide:Ht,useFactory:e1,deps:[]}];var n1=[{provide:b_,useValue:"root"},{provide:fd,useFactory:Jb,deps:[]},{provide:qd,useClass:Kb,multi:!0,deps:[Ht,_n,ts]},{provide:qd,useClass:Qb,multi:!0,deps:[Ht]},Qu,P0,A0,{provide:Uu,useExisting:Qu},{provide:Wu,useClass:Ub,deps:[]},[]];var k0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(Pe(Ht))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Me="primary",tl=Symbol("RouteTitle"),Yd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function fo(n){return new Yd(n)}function r1(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let s={};for(let o=0;o<i.length;o++){let l=i[o],h=n[o];if(l[0]===":")s[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:s}}function s1(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ci(n[t],e[t]))return!1;return!0}function ci(n,e){let t=n?Xd(n):void 0,i=e?Xd(e):void 0;if(!t||!i||t.length!=i.length)return!1;let s;for(let o=0;o<t.length;o++)if(s=t[o],!q0(n[s],e[s]))return!1;return!0}function Xd(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function q0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((s,o)=>i[o]===s)}else return n===e}function G0(n){return n.length>0?n[n.length-1]:null}function yr(n){return u_(n)?n:Oa(n)?en(Promise.resolve(n)):Se(n)}var o1={exact:K0,subset:W0},H0={exact:a1,subset:l1,ignored:()=>!0};function O0(n,e,t){return o1[t.paths](n.root,e.root,t.matrixParams)&&H0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function a1(n,e){return ci(n,e)}function K0(n,e,t){if(!as(n.segments,e.segments)||!ec(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!K0(n.children[i],e.children[i],t))return!1;return!0}function l1(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>q0(n[t],e[t]))}function W0(n,e,t){return Z0(n,e,e.segments,t)}function Z0(n,e,t,i){if(n.segments.length>t.length){let s=n.segments.slice(0,t.length);return!(!as(s,t)||e.hasChildren()||!ec(s,t,i))}else if(n.segments.length===t.length){if(!as(n.segments,t)||!ec(n.segments,t,i))return!1;for(let s in e.children)if(!n.children[s]||!W0(n.children[s],e.children[s],i))return!1;return!0}else{let s=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!as(n.segments,s)||!ec(n.segments,s,i)||!n.children[Me]?!1:Z0(n.children[Me],e,o,i)}}function ec(n,e,t){return e.every((i,s)=>H0[t](n[s].parameters,i.parameters))}var Ki=class{constructor(e=new We([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=fo(this.queryParams),this._queryParamMap}toString(){return h1.serialize(this)}},We=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tc(this)}},os=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=fo(this.parameters),this._parameterMap}toString(){return Y0(this)}};function u1(n,e){return as(n,e)&&n.every((t,i)=>ci(t.parameters,e[i].parameters))}function as(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function c1(n,e){let t=[];return Object.entries(n.children).forEach(([i,s])=>{i===Me&&(t=t.concat(e(s,i)))}),Object.entries(n.children).forEach(([i,s])=>{i!==Me&&(t=t.concat(e(s,i)))}),t}var nl=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>new po,providedIn:"root"})}}return n})(),po=class{parse(e){let t=new ef(e);return new Ki(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${za(e.root,!0)}`,i=p1(e.queryParams),s=typeof e.fragment=="string"?`#${d1(e.fragment)}`:"";return`${t}${i}${s}`}},h1=new po;function tc(n){return n.segments.map(e=>Y0(e)).join("/")}function za(n,e){if(!n.hasChildren())return tc(n);if(e){let t=n.children[Me]?za(n.children[Me],!1):"",i=[];return Object.entries(n.children).forEach(([s,o])=>{s!==Me&&i.push(`${s}:${za(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=c1(n,(i,s)=>s===Me?[za(n.children[Me],!1)]:[`${s}:${za(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Me]!=null?`${tc(n)}/${t[0]}`:`${tc(n)}/(${t.join("//")})`}}function Q0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xu(n){return Q0(n).replace(/%3B/gi,";")}function d1(n){return encodeURI(n)}function Jd(n){return Q0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nc(n){return decodeURIComponent(n)}function L0(n){return nc(n.replace(/\+/g,"%20"))}function Y0(n){return`${Jd(n.path)}${f1(n.parameters)}`}function f1(n){return Object.entries(n).map(([e,t])=>`;${Jd(e)}=${Jd(t)}`).join("")}function p1(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(s=>`${Xu(t)}=${Xu(s)}`).join("&"):`${Xu(t)}=${Xu(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var m1=/^[^\/()?;#]+/;function Kd(n){let e=n.match(m1);return e?e[0]:""}var g1=/^[^\/()?;=#]+/;function _1(n){let e=n.match(g1);return e?e[0]:""}var y1=/^[^=?&#]+/;function v1(n){let e=n.match(y1);return e?e[0]:""}var w1=/^[^&#]+/;function C1(n){let e=n.match(w1);return e?e[0]:""}var ef=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new We([],{}):new We([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Me]=new We(e,t)),i}parseSegment(){let e=Kd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new pe(4009,!1);return this.capture(e),new os(nc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_1(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=Kd(this.remaining);s&&(i=s,this.capture(i))}e[nc(t)]=nc(i)}parseQueryParam(e){let t=v1(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let l=C1(this.remaining);l&&(i=l,this.capture(i))}let s=L0(t),o=L0(i);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(o)}else e[s]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Kd(this.remaining),s=this.remaining[i.length];if(s!=="/"&&s!==")"&&s!==";")throw new pe(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Me);let l=this.parseChildren();t[o]=Object.keys(l).length===1?l[Me]:new We([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new pe(4011,!1)}};function X0(n){return n.segments.length>0?new We([],{[Me]:n}):n}function J0(n){let e={};for(let[i,s]of Object.entries(n.children)){let o=J0(s);if(i===Me&&o.segments.length===0&&o.hasChildren())for(let[l,h]of Object.entries(o.children))e[l]=h;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new We(n.segments,e);return b1(t)}function b1(n){if(n.numberOfChildren===1&&n.children[Me]){let e=n.children[Me];return new We(n.segments.concat(e.segments),e.children)}return n}function ls(n){return n instanceof Ki}function E1(n,e,t=null,i=null){let s=ey(n);return ty(s,e,t,i)}function ey(n){let e;function t(o){let l={};for(let f of o.children){let m=t(f);l[f.outlet]=m}let h=new We(o.url,l);return o===n&&(e=h),h}let i=t(n.root),s=X0(i);return e??s}function ty(n,e,t,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return Wd(s,s,s,t,i);let o=S1(e);if(o.toRoot())return Wd(s,s,new We([],{}),t,i);let l=T1(o,s,n),h=l.processChildren?qa(l.segmentGroup,l.index,o.commands):iy(l.segmentGroup,l.index,o.commands);return Wd(s,l.segmentGroup,h,t,i)}function ic(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ka(n){return typeof n=="object"&&n!=null&&n.outlets}function Wd(n,e,t,i,s){let o={};i&&Object.entries(i).forEach(([f,m])=>{o[f]=Array.isArray(m)?m.map(y=>`${y}`):`${m}`});let l;n===e?l=t:l=ny(n,e,t);let h=X0(J0(l));return new Ki(h,o,s)}function ny(n,e,t){let i={};return Object.entries(n.children).forEach(([s,o])=>{o===e?i[s]=t:i[s]=ny(o,e,t)}),new We(n.segments,i)}var rc=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&ic(i[0]))throw new pe(4003,!1);let s=i.find(Ka);if(s&&s!==G0(i))throw new pe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function S1(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new rc(!0,0,n);let e=0,t=!1,i=n.reduce((s,o,l)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let h={};return Object.entries(o.outlets).forEach(([f,m])=>{h[f]=typeof m=="string"?m.split("/"):m}),[...s,{outlets:h}]}if(o.segmentPath)return[...s,o.segmentPath]}return typeof o!="string"?[...s,o]:l===0?(o.split("/").forEach((h,f)=>{f==0&&h==="."||(f==0&&h===""?t=!0:h===".."?e++:h!=""&&s.push(h))}),s):[...s,o]},[]);return new rc(t,e,i)}var uo=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function T1(n,e,t){if(n.isAbsolute)return new uo(e,!0,0);if(!t)return new uo(e,!1,NaN);if(t.parent===null)return new uo(t,!0,0);let i=ic(n.commands[0])?0:1,s=t.segments.length-1+i;return D1(t,s,n.numberOfDoubleDots)}function D1(n,e,t){let i=n,s=e,o=t;for(;o>s;){if(o-=s,i=i.parent,!i)throw new pe(4005,!1);s=i.segments.length}return new uo(i,!1,s-o)}function I1(n){return Ka(n[0])?n[0].outlets:{[Me]:n}}function iy(n,e,t){if(n??=new We([],{}),n.segments.length===0&&n.hasChildren())return qa(n,e,t);let i=A1(n,e,t),s=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new We(n.segments.slice(0,i.pathIndex),{});return o.children[Me]=new We(n.segments.slice(i.pathIndex),n.children),qa(o,0,s)}else return i.match&&s.length===0?new We(n.segments,{}):i.match&&!n.hasChildren()?tf(n,e,t):i.match?qa(n,0,s):tf(n,e,t)}function qa(n,e,t){if(t.length===0)return new We(n.segments,{});{let i=I1(t),s={};if(Object.keys(i).some(o=>o!==Me)&&n.children[Me]&&n.numberOfChildren===1&&n.children[Me].segments.length===0){let o=qa(n.children[Me],e,t);return new We(n.segments,o.children)}return Object.entries(i).forEach(([o,l])=>{typeof l=="string"&&(l=[l]),l!==null&&(s[o]=iy(n.children[o],e,l))}),Object.entries(n.children).forEach(([o,l])=>{i[o]===void 0&&(s[o]=l)}),new We(n.segments,s)}}function A1(n,e,t){let i=0,s=e,o={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(i>=t.length)return o;let l=n.segments[s],h=t[i];if(Ka(h))break;let f=`${h}`,m=i<t.length-1?t[i+1]:null;if(s>0&&f===void 0)break;if(f&&m&&typeof m=="object"&&m.outlets===void 0){if(!N0(f,m,l))return o;i+=2}else{if(!N0(f,{},l))return o;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}function tf(n,e,t){let i=n.segments.slice(0,e),s=0;for(;s<t.length;){let o=t[s];if(Ka(o)){let f=P1(o.outlets);return new We(i,f)}if(s===0&&ic(t[0])){let f=n.segments[e];i.push(new os(f.path,F0(t[0]))),s++;continue}let l=Ka(o)?o.outlets[Me]:`${o}`,h=s<t.length-1?t[s+1]:null;l&&h&&ic(h)?(i.push(new os(l,F0(h))),s+=2):(i.push(new os(l,{})),s++)}return new We(i,{})}function P1(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=tf(new We([],{}),0,i))}),e}function F0(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function N0(n,e,t){return n==t.path&&ci(e,t.parameters)}var Ga="imperative",Ot=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ot||{}),On=class{constructor(e,t){this.id=e,this.url=t}},mo=class extends On{constructor(e,t,i="imperative",s=null){super(e,t),this.type=Ot.NavigationStart,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hi=class extends On{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Ot.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},wn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(wn||{}),sc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(sc||{}),Hi=class extends On{constructor(e,t,i,s){super(e,t),this.reason=i,this.code=s,this.type=Ot.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gr=class extends On{constructor(e,t,i,s){super(e,t),this.reason=i,this.code=s,this.type=Ot.NavigationSkipped}},Wa=class extends On{constructor(e,t,i,s){super(e,t),this.error=i,this.target=s,this.type=Ot.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},oc=class extends On{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=Ot.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nf=class extends On{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=Ot.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rf=class extends On{constructor(e,t,i,s,o){super(e,t),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=o,this.type=Ot.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sf=class extends On{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=Ot.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},of=class extends On{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=Ot.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},af=class{constructor(e){this.route=e,this.type=Ot.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},lf=class{constructor(e){this.route=e,this.type=Ot.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},uf=class{constructor(e){this.snapshot=e,this.type=Ot.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cf=class{constructor(e){this.snapshot=e,this.type=Ot.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hf=class{constructor(e){this.snapshot=e,this.type=Ot.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},df=class{constructor(e){this.snapshot=e,this.type=Ot.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ac=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=Ot.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Za=class{},go=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function M1(n,e){return n.providers&&!n._injector&&(n._injector=wd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Hn(n){return n.outlet||Me}function x1(n,e){let t=n.filter(i=>Hn(i)===e);return t.push(...n.filter(i=>Hn(i)!==e)),t}function il(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ff=class{get injector(){return il(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new rl(this.rootInjector),this.attachRef=null}},rl=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let s=this.getOrCreateContext(t);s.outlet=i,this.contexts.set(t,s)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new ff(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(Pe(Ma))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=pf(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=pf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=mf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return mf(e,this._root).map(t=>t.value)}};function pf(n,e){if(n===e.value)return e;for(let t of e.children){let i=pf(n,t);if(i)return i}return null}function mf(n,e){if(n===e.value)return[e];for(let t of e.children){let i=mf(n,t);if(i.length)return i.unshift(e),i}return[]}var vn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function lo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var uc=class extends lc{constructor(e,t){super(e),this.snapshot=t,Sf(this,e)}toString(){return this.snapshot.toString()}};function ry(n){let e=R1(n),t=new on([new os("",{})]),i=new on({}),s=new on({}),o=new on({}),l=new on(""),h=new _r(t,i,o,l,s,Me,n,e.root);return h.snapshot=e.root,new uc(new vn(h,[]),e)}function R1(n){let e={},t={},i={},s="",o=new co([],e,i,s,t,Me,n,null,{});return new hc("",new vn(o,[]))}var _r=class{constructor(e,t,i,s,o,l,h,f){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=o,this.outlet=l,this.component=h,this._futureSnapshot=f,this.title=this.dataSubject?.pipe($e(m=>m[tl]))??Se(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($e(e=>fo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($e(e=>fo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cc(n,e,t="emptyOnly"){let i,{routeConfig:s}=n;return e!==null&&(t==="always"||s?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:X(X({},e.params),n.params),data:X(X({},e.data),n.data),resolve:X(X(X(X({},n.data),e.data),s?.data),n._resolvedData)}:i={params:X({},n.params),data:X({},n.data),resolve:X(X({},n.data),n._resolvedData??{})},s&&oy(s)&&(i.resolve[tl]=s.title),i}var co=class{get title(){return this.data?.[tl]}constructor(e,t,i,s,o,l,h,f,m){this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=o,this.outlet=l,this.component=h,this.routeConfig=f,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},hc=class extends lc{constructor(e,t){super(t),this.url=e,Sf(this,t)}toString(){return sy(this._root)}};function Sf(n,e){e.value._routerState=n,e.children.forEach(t=>Sf(n,t))}function sy(n){let e=n.children.length>0?` { ${n.children.map(sy).join(", ")} } `:"";return`${n.value}${e}`}function Zd(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ci(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ci(e.params,t.params)||n.paramsSubject.next(t.params),s1(e.url,t.url)||n.urlSubject.next(t.url),ci(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function gf(n,e){let t=ci(n.params,e.params)&&u1(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||gf(n.parent,e.parent))}function oy(n){return typeof n.title=="string"||n.title===null}var Tf=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Me,this.activateEvents=new ut,this.deactivateEvents=new ut,this.attachEvents=new ut,this.detachEvents=new ut,this.parentContexts=ae(rl),this.location=ae(xa),this.changeDetector=ae(yn),this.inputBinder=ae(mc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:s}=t.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new pe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new pe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new pe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new pe(4013,!1);this._activatedRoute=t;let s=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,f=new _f(t,h,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:f,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Vt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Gn]})}}return n})(),_f=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===_r?this.route:e===rl?this.childContexts:this.parent.get(e,t)}},mc=new Xe(""),V0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,s=Vu([i.queryParams,i.params,i.data]).pipe(qn(([o,l,h],f)=>(h=X(X(X({},o),l),h),f===0?Se(h):Promise.resolve(h)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let l=N_(i.component);if(!l){this.unsubscribeFromRouteData(t);return}for(let{templateName:h}of l.inputs)t.activatedComponentRef.setInput(h,o[h])});this.outletDataSubscriptions.set(t,s)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();function k1(n,e,t){let i=Qa(n,e._root,t?t._root:void 0);return new uc(i,e)}function Qa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let s=O1(n,e,t);return new vn(i,s)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Qa(n,h)),l}}let i=L1(e.value),s=e.children.map(o=>Qa(n,o));return new vn(i,s)}}function O1(n,e,t){return e.children.map(i=>{for(let s of t.children)if(n.shouldReuseRoute(i.value,s.value.snapshot))return Qa(n,i,s);return Qa(n,i)})}function L1(n){return new _r(new on(n.url),new on(n.params),new on(n.queryParams),new on(n.fragment),new on(n.data),n.outlet,n.component,n)}var Ya=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ay="ngNavigationCancelingError";function dc(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=ls(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=ly(!1,wn.Redirect);return s.url=t,s.navigationBehaviorOptions=i,s}function ly(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ay]=!0,t.cancellationCode=e,t}function F1(n){return uy(n)&&ls(n.url)}function uy(n){return!!n&&n[ay]}var N1=(n,e,t,i)=>$e(s=>(new yf(e,s.targetRouterState,s.currentRouterState,t,i).activate(n),s)),yf=class{constructor(e,t,i,s,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Zd(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let s=lo(t);e.children.forEach(o=>{let l=o.value.outlet;this.deactivateRoutes(o,s[l],i),delete s[l]}),Object.values(s).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let s=e.value,o=t?t.value:null;if(s===o)if(s.component){let l=i.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,o=lo(e);for(let l of Object.values(o))this.deactivateRouteAndItsChildren(l,s);if(i&&i.outlet){let l=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,o=lo(e);for(let l of Object.values(o))this.deactivateRouteAndItsChildren(l,s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let s=lo(t);e.children.forEach(o=>{this.activateRoutes(o,s[o.value.outlet],i),this.forwardEvent(new df(o.value.snapshot))}),e.children.length&&this.forwardEvent(new cf(e.value.snapshot))}activateRoutes(e,t,i){let s=e.value,o=t?t.value:null;if(Zd(s),s===o)if(s.component){let l=i.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,i);else if(s.component){let l=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let h=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Zd(h.route.value),this.activateChildRoutes(e,null,l.children)}else l.attachRef=null,l.route=s,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}else this.activateChildRoutes(e,null,i)}},fc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ho=class{constructor(e,t){this.component=e,this.route=t}};function V1(n,e,t){let i=n._root,s=e?e._root:null;return ja(i,s,t,[i.value])}function B1(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function yo(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!v_(n)?n:e.get(n):i}function ja(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let o=lo(e);return n.children.forEach(l=>{U1(l,o[l.value.outlet],t,i.concat([l.value]),s),delete o[l.value.outlet]}),Object.entries(o).forEach(([l,h])=>Ha(h,t.getContext(l),s)),s}function U1(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){let f=z1(l,o,o.routeConfig.runGuardsAndResolvers);f?s.canActivateChecks.push(new fc(i)):(o.data=l.data,o._resolvedData=l._resolvedData),o.component?ja(n,e,h?h.children:null,i,s):ja(n,e,t,i,s),f&&h&&h.outlet&&h.outlet.isActivated&&s.canDeactivateChecks.push(new ho(h.outlet.component,l))}else l&&Ha(e,h,s),s.canActivateChecks.push(new fc(i)),o.component?ja(n,null,h?h.children:null,i,s):ja(n,null,t,i,s);return s}function z1(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!as(n.url,e.url);case"pathParamsOrQueryParamsChange":return!as(n.url,e.url)||!ci(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gf(n,e)||!ci(n.queryParams,e.queryParams);case"paramsChange":default:return!gf(n,e)}}function Ha(n,e,t){let i=lo(n),s=n.value;Object.entries(i).forEach(([o,l])=>{s.component?e?Ha(l,e.children.getContext(o),t):Ha(l,null,t):Ha(l,e,t)}),s.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ho(e.outlet.component,s)):t.canDeactivateChecks.push(new ho(null,s)):t.canDeactivateChecks.push(new ho(null,s))}function sl(n){return typeof n=="function"}function j1(n){return typeof n=="boolean"}function $1(n){return n&&sl(n.canLoad)}function q1(n){return n&&sl(n.canActivate)}function G1(n){return n&&sl(n.canActivateChild)}function H1(n){return n&&sl(n.canDeactivate)}function K1(n){return n&&sl(n.canMatch)}function cy(n){return n instanceof c_||n?.name==="EmptyError"}var Ju=Symbol("INITIAL_VALUE");function _o(){return qn(n=>Vu(n.map(e=>e.pipe(ro(1),g_(Ju)))).pipe($e(e=>{for(let t of e)if(t!==!0){if(t===Ju)return Ju;if(t===!1||W1(t))return t}return!0}),Yr(e=>e!==Ju),ro(1)))}function W1(n){return ls(n)||n instanceof Ya}function Z1(n,e){return gn(t=>{let{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return l.length===0&&o.length===0?Se(He(X({},t),{guardsResult:!0})):Q1(l,i,s,n).pipe(gn(h=>h&&j1(h)?Y1(i,o,n,e):Se(h)),$e(h=>He(X({},t),{guardsResult:h})))})}function Q1(n,e,t,i){return en(n).pipe(gn(s=>nE(s.component,s.route,t,e,i)),fr(s=>s!==!0,!0))}function Y1(n,e,t,i){return en(e).pipe(io(s=>h_(J1(s.route.parent,i),X1(s.route,i),tE(n,s.path,t),eE(n,s.route,t))),fr(s=>s!==!0,!0))}function X1(n,e){return n!==null&&e&&e(new hf(n)),Se(!0)}function J1(n,e){return n!==null&&e&&e(new uf(n)),Se(!0)}function eE(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Se(!0);let s=i.map(o=>ld(()=>{let l=il(e)??t,h=yo(o,l),f=q1(h)?h.canActivate(e,n):oi(l,()=>h(e,n));return yr(f).pipe(fr())}));return Se(s).pipe(_o())}function tE(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>B1(l)).filter(l=>l!==null).map(l=>ld(()=>{let h=l.guards.map(f=>{let m=il(l.node)??t,y=yo(f,m),C=G1(y)?y.canActivateChild(i,n):oi(m,()=>y(i,n));return yr(C).pipe(fr())});return Se(h).pipe(_o())}));return Se(o).pipe(_o())}function nE(n,e,t,i,s){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Se(!0);let l=o.map(h=>{let f=il(e)??s,m=yo(h,f),y=H1(m)?m.canDeactivate(n,e,t,i):oi(f,()=>m(n,e,t,i));return yr(y).pipe(fr())});return Se(l).pipe(_o())}function iE(n,e,t,i){let s=e.canLoad;if(s===void 0||s.length===0)return Se(!0);let o=s.map(l=>{let h=yo(l,n),f=$1(h)?h.canLoad(e,t):oi(n,()=>h(e,t));return yr(f)});return Se(o).pipe(_o(),hy(i))}function hy(n){return a_(jt(e=>{if(typeof e!="boolean")throw dc(n,e)}),$e(e=>e===!0))}function rE(n,e,t,i){let s=e.canMatch;if(!s||s.length===0)return Se(!0);let o=s.map(l=>{let h=yo(l,n),f=K1(h)?h.canMatch(e,t):oi(n,()=>h(e,t));return yr(f)});return Se(o).pipe(_o(),hy(i))}var Xa=class{constructor(e){this.segmentGroup=e||null}},Ja=class extends Error{constructor(e){super(),this.urlTree=e}};function ao(n){return Ia(new Xa(n))}function sE(n){return Ia(new pe(4e3,!1))}function oE(n){return Ia(ly(!1,wn.GuardRejected))}var vf=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],s=t.root;for(;;){if(i=i.concat(s.segments),s.numberOfChildren===0)return Se(i);if(s.numberOfChildren>1||!s.children[Me])return sE(`${e.redirectTo}`);s=s.children[Me]}}applyRedirectCommands(e,t,i,s,o){if(typeof t!="string"){let h=t,{queryParams:f,fragment:m,routeConfig:y,url:C,outlet:E,params:I,data:N,title:U}=s,z=oi(o,()=>h({params:I,data:N,queryParams:f,fragment:m,routeConfig:y,url:C,outlet:E,title:U}));if(z instanceof Ki)throw new Ja(z);t=z}let l=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Ja(l);return l}applyRedirectCreateUrlTree(e,t,i,s){let o=this.createSegmentGroup(e,t.root,i,s);return new Ki(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([s,o])=>{if(typeof o=="string"&&o[0]===":"){let h=o.substring(1);i[s]=t[h]}else i[s]=o}),i}createSegmentGroup(e,t,i,s){let o=this.createSegments(e,t.segments,i,s),l={};return Object.entries(t.children).forEach(([h,f])=>{l[h]=this.createSegmentGroup(e,f,i,s)}),new We(o,l)}createSegments(e,t,i,s){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,s):this.findOrReturn(o,i))}findPosParam(e,t,i){let s=i[t.path.substring(1)];if(!s)throw new pe(4001,!1);return s}findOrReturn(e,t){let i=0;for(let s of t){if(s.path===e.path)return t.splice(i),s;i++}return e}},wf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aE(n,e,t,i,s){let o=dy(n,e,t);return o.matched?(i=M1(e,i),rE(i,e,t,s).pipe($e(l=>l===!0?o:X({},wf)))):Se(o)}function dy(n,e,t){if(e.path==="**")return lE(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?X({},wf):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let s=(e.matcher||r1)(t,n,e);if(!s)return X({},wf);let o={};Object.entries(s.posParams??{}).forEach(([h,f])=>{o[h]=f.path});let l=s.consumed.length>0?X(X({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function lE(n){return{matched:!0,parameters:n.length>0?G0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function B0(n,e,t,i){return t.length>0&&hE(n,t,i)?{segmentGroup:new We(e,cE(i,new We(t,n.children))),slicedSegments:[]}:t.length===0&&dE(n,t,i)?{segmentGroup:new We(n.segments,uE(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new We(n.segments,n.children),slicedSegments:t}}function uE(n,e,t,i){let s={};for(let o of t)if(gc(n,e,o)&&!i[Hn(o)]){let l=new We([],{});s[Hn(o)]=l}return X(X({},i),s)}function cE(n,e){let t={};t[Me]=e;for(let i of n)if(i.path===""&&Hn(i)!==Me){let s=new We([],{});t[Hn(i)]=s}return t}function hE(n,e,t){return t.some(i=>gc(n,e,i)&&Hn(i)!==Me)}function dE(n,e,t){return t.some(i=>gc(n,e,i))}function gc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function fE(n,e,t){return e.length===0&&!n.children[t]}var Cf=class{};function pE(n,e,t,i,s,o,l="emptyOnly"){return new bf(n,e,t,i,s,l,o).recognize()}var mE=31,bf=class{constructor(e,t,i,s,o,l,h){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=s,this.urlTree=o,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.applyRedirects=new vf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new pe(4002,`'${e.segmentGroup}'`)}recognize(){let e=B0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($e(({children:t,rootSnapshot:i})=>{let s=new vn(i,t),o=new hc("",s),l=E1(i,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(l),{state:o,tree:l}}))}match(e){let t=new co([],Object.freeze({}),Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Me,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Me,t).pipe($e(i=>({children:i,rootSnapshot:t})),no(i=>{if(i instanceof Ja)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Xa?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,s,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,s,!0,o).pipe($e(l=>l instanceof vn?[l]:[]))}processChildren(e,t,i,s){let o=[];for(let l of Object.keys(i.children))l==="primary"?o.unshift(l):o.push(l);return en(o).pipe(io(l=>{let h=i.children[l],f=x1(t,l);return this.processSegmentGroup(e,f,h,l,s)}),m_((l,h)=>(l.push(...h),l)),ud(null),p_(),gn(l=>{if(l===null)return ao(i);let h=fy(l);return gE(h),Se(h)}))}processSegment(e,t,i,s,o,l,h){return en(t).pipe(io(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,i,s,o,l,h).pipe(no(m=>{if(m instanceof Xa)return Se(null);throw m}))),fr(f=>!!f),no(f=>{if(cy(f))return fE(i,s,o)?Se(new Cf):ao(i);throw f}))}processSegmentAgainstRoute(e,t,i,s,o,l,h,f){return Hn(i)!==l&&(l===Me||!gc(s,o,i))?ao(s):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,s,i,o,l,f):this.allowRedirects&&h?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,i,o,l,f):ao(s)}expandSegmentAgainstRouteUsingRedirect(e,t,i,s,o,l,h){let{matched:f,parameters:m,consumedSegments:y,positionalParamSegments:C,remainingSegments:E}=dy(t,s,o);if(!f)return ao(t);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>mE&&(this.allowRedirects=!1));let I=new co(o,m,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,U0(s),Hn(s),s.component??s._loadedComponent??null,s,z0(s)),N=cc(I,h,this.paramsInheritanceStrategy);I.params=Object.freeze(N.params),I.data=Object.freeze(N.data);let U=this.applyRedirects.applyRedirectCommands(y,s.redirectTo,C,I,e);return this.applyRedirects.lineralizeSegments(s,U).pipe(gn(z=>this.processSegment(e,i,t,z.concat(E),l,!1,h)))}matchSegmentAgainstRoute(e,t,i,s,o,l){let h=aE(t,i,s,e,this.urlSerializer);return i.path==="**"&&(t.children={}),h.pipe(qn(f=>f.matched?(e=i._injector??e,this.getChildConfig(e,i,s).pipe(qn(({routes:m})=>{let y=i._loadedInjector??e,{parameters:C,consumedSegments:E,remainingSegments:I}=f,N=new co(E,C,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,U0(i),Hn(i),i.component??i._loadedComponent??null,i,z0(i)),U=cc(N,l,this.paramsInheritanceStrategy);N.params=Object.freeze(U.params),N.data=Object.freeze(U.data);let{segmentGroup:z,slicedSegments:Y}=B0(t,E,I,m);if(Y.length===0&&z.hasChildren())return this.processChildren(y,m,z,N).pipe($e(he=>new vn(N,he)));if(m.length===0&&Y.length===0)return Se(new vn(N,[]));let ne=Hn(i)===o;return this.processSegment(y,m,z,Y,ne?Me:o,!0,N).pipe($e(he=>new vn(N,he instanceof vn?[he]:[])))}))):ao(t)))}getChildConfig(e,t,i){return t.children?Se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Se({routes:t._loadedRoutes,injector:t._loadedInjector}):iE(e,t,i,this.urlSerializer).pipe(gn(s=>s?this.configLoader.loadChildren(e,t).pipe(jt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):oE(t))):Se({routes:[],injector:e})}};function gE(n){n.sort((e,t)=>e.value.outlet===Me?-1:t.value.outlet===Me?1:e.value.outlet.localeCompare(t.value.outlet))}function _E(n){let e=n.value.routeConfig;return e&&e.path===""}function fy(n){let e=[],t=new Set;for(let i of n){if(!_E(i)){e.push(i);continue}let s=e.find(o=>i.value.routeConfig===o.value.routeConfig);s!==void 0?(s.children.push(...i.children),t.add(s)):e.push(i)}for(let i of t){let s=fy(i.children);e.push(new vn(i.value,s))}return e.filter(i=>!t.has(i))}function U0(n){return n.data||{}}function z0(n){return n.resolve||{}}function yE(n,e,t,i,s,o){return gn(l=>pE(n,e,t,i,l.extractedUrl,s,o).pipe($e(({state:h,tree:f})=>He(X({},l),{targetSnapshot:h,urlAfterRedirects:f}))))}function vE(n,e){return gn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:s}}=t;if(!s.length)return Se(t);let o=new Set(s.map(f=>f.route)),l=new Set;for(let f of o)if(!l.has(f))for(let m of py(f))l.add(m);let h=0;return en(l).pipe(io(f=>o.has(f)?wE(f,i,n,e):(f.data=cc(f,f.parent,n).resolve,Se(void 0))),jt(()=>h++),cd(1),gn(f=>h===l.size?Se(t):dr))})}function py(n){let e=n.children.map(t=>py(t)).flat();return[n,...e]}function wE(n,e,t,i){let s=n.routeConfig,o=n._resolve;return s?.title!==void 0&&!oy(s)&&(o[tl]=s.title),CE(o,n,e,i).pipe($e(l=>(n._resolvedData=l,n.data=cc(n,n.parent,t).resolve,null)))}function CE(n,e,t,i){let s=Xd(n);if(s.length===0)return Se({});let o={};return en(s).pipe(gn(l=>bE(n[l],e,t,i).pipe(fr(),jt(h=>{if(h instanceof Ya)throw dc(new po,h);o[l]=h}))),cd(1),f_(o),no(l=>cy(l)?dr:Ia(l)))}function bE(n,e,t,i){let s=il(e)??i,o=yo(n,s),l=o.resolve?o.resolve(e,t):oi(s,()=>o(e,t));return yr(l)}function Qd(n){return qn(e=>{let t=n(e);return t?en(t).pipe($e(()=>e)):Se(e)})}var my=(()=>{class n{buildTitle(t){let i,s=t.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===Me);return i}getResolvedTitleForRoute(t){return t.data[tl]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>ae(EE),providedIn:"root"})}}return n})(),EE=(()=>{class n extends my{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(Pe(k0))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ol=new Xe("",{providedIn:"root",factory:()=>({})}),SE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=lt({type:n,selectors:[["ng-component"]],standalone:!0,features:[ht],decls:1,vars:0,template:function(i,s){i&1&&ue(0,"router-outlet")},dependencies:[Tf],encapsulation:2})}}return n})();function Df(n){let e=n.children&&n.children.map(Df),t=e?He(X({},n),{children:e}):X({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Me&&(t.component=SE),t}var el=new Xe(""),If=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ae($u)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=yr(t.loadComponent()).pipe($e(gy),jt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Bu(()=>{this.componentLoaders.delete(t)})),s=new od(i,()=>new si).pipe(sd());return this.componentLoaders.set(t,s),s}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=TE(i,this.compiler,t,this.onLoadEndListener).pipe(Bu(()=>{this.childrenLoaders.delete(i)})),l=new od(o,()=>new si).pipe(sd());return this.childrenLoaders.set(i,l),l}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function TE(n,e,t,i){return yr(n.loadChildren()).pipe($e(gy),gn(s=>s instanceof A_||Array.isArray(s)?Se(s):en(e.compileModuleAsync(s))),$e(s=>{i&&i(n);let o,l,h=!1;return Array.isArray(s)?(l=s,h=!0):(o=s.create(t).injector,l=o.get(el,[],{optional:!0,self:!0}).flat()),{routes:l.map(Df),injector:o}}))}function DE(n){return n&&typeof n=="object"&&"default"in n}function gy(n){return DE(n)?n.default:n}var Af=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>ae(IE),providedIn:"root"})}}return n})(),IE=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_y=new Xe(""),yy=new Xe("");function AE(n,e,t){let i=n.get(yy),s=n.get(Ht);return n.get(_n).runOutsideAngular(()=>{if(!s.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(m=>setTimeout(m));let o,l=new Promise(m=>{o=m}),h=s.startViewTransition(()=>(o(),PE(n))),{onViewTransitionCreated:f}=i;return f&&oi(n,()=>f({transition:h,from:e,to:t})),l})}function PE(n){return new Promise(e=>{P_({read:()=>setTimeout(e)},{injector:n})})}var ME=new Xe(""),Pf=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new si,this.transitionAbortSubject=new si,this.configLoader=ae(If),this.environmentInjector=ae(Ma),this.urlSerializer=ae(nl),this.rootContexts=ae(rl),this.location=ae(oo),this.inputBindingEnabled=ae(mc,{optional:!0})!==null,this.titleStrategy=ae(my),this.options=ae(ol,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ae(Af),this.createViewTransition=ae(_y,{optional:!0}),this.navigationErrorHandler=ae(ME,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Se(void 0),this.rootComponentType=null;let t=s=>this.events.next(new af(s)),i=s=>this.events.next(new lf(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(He(X(X({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,s){return this.transitions=new on({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ga,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Yr(o=>o.id!==0),$e(o=>He(X({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),qn(o=>{let l=!1,h=!1;return Se(o).pipe(qn(f=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",wn.SupersededByNewNavigation),dr;this.currentTransition=o,this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,targetBrowserUrl:typeof f.extras.browserUrl=="string"?this.urlSerializer.parse(f.extras.browserUrl):f.extras.browserUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?He(X({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),y=f.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!m&&y!=="reload"){let C="";return this.events.next(new gr(f.id,this.urlSerializer.serialize(f.rawUrl),C,sc.IgnoredSameUrlNavigation)),f.resolve(!1),dr}if(this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return Se(f).pipe(qn(C=>{let E=this.transitions?.getValue();return this.events.next(new mo(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),E!==this.transitions?.getValue()?dr:Promise.resolve(C)}),yE(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),jt(C=>{o.targetSnapshot=C.targetSnapshot,o.urlAfterRedirects=C.urlAfterRedirects,this.currentNavigation=He(X({},this.currentNavigation),{finalUrl:C.urlAfterRedirects});let E=new oc(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(E)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){let{id:C,extractedUrl:E,source:I,restoredState:N,extras:U}=f,z=new mo(C,this.urlSerializer.serialize(E),I,N);this.events.next(z);let Y=ry(this.rootComponentType).snapshot;return this.currentTransition=o=He(X({},f),{targetSnapshot:Y,urlAfterRedirects:E,extras:He(X({},U),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,Se(o)}else{let C="";return this.events.next(new gr(f.id,this.urlSerializer.serialize(f.extractedUrl),C,sc.IgnoredByUrlHandlingStrategy)),f.resolve(!1),dr}}),jt(f=>{let m=new nf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),$e(f=>(this.currentTransition=o=He(X({},f),{guards:V1(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),o)),Z1(this.environmentInjector,f=>this.events.next(f)),jt(f=>{if(o.guardsResult=f.guardsResult,f.guardsResult&&typeof f.guardsResult!="boolean")throw dc(this.urlSerializer,f.guardsResult);let m=new rf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(m)}),Yr(f=>f.guardsResult?!0:(this.cancelNavigationTransition(f,"",wn.GuardRejected),!1)),Qd(f=>{if(f.guards.canActivateChecks.length)return Se(f).pipe(jt(m=>{let y=new sf(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}),qn(m=>{let y=!1;return Se(m).pipe(vE(this.paramsInheritanceStrategy,this.environmentInjector),jt({next:()=>y=!0,complete:()=>{y||this.cancelNavigationTransition(m,"",wn.NoDataFromResolver)}}))}),jt(m=>{let y=new of(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}))}),Qd(f=>{let m=y=>{let C=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(y.routeConfig).pipe(jt(E=>{y.component=E}),$e(()=>{})));for(let E of y.children)C.push(...m(E));return C};return Vu(m(f.targetSnapshot.root)).pipe(ud(null),ro(1))}),Qd(()=>this.afterPreactivation()),qn(()=>{let{currentSnapshot:f,targetSnapshot:m}=o,y=this.createViewTransition?.(this.environmentInjector,f.root,m.root);return y?en(y).pipe($e(()=>o)):Se(o)}),$e(f=>{let m=k1(t.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=o=He(X({},f),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,o}),jt(()=>{this.events.next(new Za)}),N1(this.rootContexts,t.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),ro(1),jt({next:f=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hi(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),this.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{l=!0}}),__(this.transitionAbortSubject.pipe(jt(f=>{throw f}))),Bu(()=>{!l&&!h&&this.cancelNavigationTransition(o,"",wn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),no(f=>{if(h=!0,uy(f))this.events.next(new Hi(o.id,this.urlSerializer.serialize(o.extractedUrl),f.message,f.cancellationCode)),F1(f)?this.events.next(new go(f.url,f.navigationBehaviorOptions)):o.resolve(!1);else{let m=new Wa(o.id,this.urlSerializer.serialize(o.extractedUrl),f,o.targetSnapshot??void 0);try{let y=oi(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(y instanceof Ya){let{message:C,cancellationCode:E}=dc(this.urlSerializer,y);this.events.next(new Hi(o.id,this.urlSerializer.serialize(o.extractedUrl),C,E)),this.events.next(new go(y.redirectTo,y.navigationBehaviorOptions))}else{this.events.next(m);let C=t.errorHandler(f);o.resolve(!!C)}}catch(y){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(y)}}return dr}))}))}cancelNavigationTransition(t,i,s){let o=new Hi(t.id,this.urlSerializer.serialize(t.extractedUrl),i,s);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xE(n){return n!==Ga}var RE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>ae(kE),providedIn:"root"})}}return n})(),Ef=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},kE=(()=>{class n extends Ef{static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Ni(n)))(s||n)}})()}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>ae(OE),providedIn:"root"})}}return n})(),OE=(()=>{class n extends vy{constructor(){super(...arguments),this.location=ae(oo),this.urlSerializer=ae(nl),this.options=ae(ol,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ae(Af),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ki,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ry(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof mo)this.stateMemento=this.createStateMemento();else if(t instanceof gr)this.rawUrlTree=i.initialUrl;else if(t instanceof oc){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else t instanceof Za?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Hi&&(t.code===wn.GuardRejected||t.code===wn.NoDataFromResolver)?this.restoreHistory(i):t instanceof Wa?this.restoreHistory(i,!0):t instanceof hi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let s=t instanceof Ki?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,l=X(X({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",l)}else{let o=X(X({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Ni(n)))(s||n)}})()}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$a=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}($a||{});function wy(n,e){n.events.pipe(Yr(t=>t instanceof hi||t instanceof Hi||t instanceof Wa||t instanceof gr),$e(t=>t instanceof hi||t instanceof gr?$a.COMPLETE:(t instanceof Hi?t.code===wn.Redirect||t.code===wn.SupersededByNewNavigation:!1)?$a.REDIRECTING:$a.FAILED),Yr(t=>t!==$a.REDIRECTING),ro(1)).subscribe(()=>{e()})}function LE(n){throw n}var FE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=ae(ju),this.stateManager=ae(vy),this.options=ae(ol,{optional:!0})||{},this.pendingTasks=ae(E_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ae(Pf),this.urlSerializer=ae(nl),this.location=ae(oo),this.urlHandlingStrategy=ae(Af),this._events=new si,this.errorHandler=this.options.errorHandler||LE,this.navigated=!1,this.routeReuseStrategy=ae(RE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ae(el,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ae(mc,{optional:!0}),this.eventsSubscription=new o_,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Hi&&i.code!==wn.Redirect&&i.code!==wn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof hi)this.navigated=!0;else if(i instanceof go){let l=i.navigationBehaviorOptions,h=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),f=X({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||xE(s.source)},l);this.scheduleNavigation(h,Ga,null,f,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}BE(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,s){let o={replaceUrl:!0},l=s?.navigationId?s:null;if(s){let f=X({},s);delete f.navigationId,delete f.\u0275routerPageId,Object.keys(f).length!==0&&(o.state=f)}let h=this.parseUrl(t);this.scheduleNavigation(h,i,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Df),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:s,queryParams:o,fragment:l,queryParamsHandling:h,preserveFragment:f}=i,m=f?this.currentUrlTree.fragment:l,y=null;switch(h??this.options.defaultQueryParamsHandling){case"merge":y=X(X({},this.currentUrlTree.queryParams),o);break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=o||null}y!==null&&(y=this.removeEmptyProps(y));let C;try{let E=s?s.snapshot:this.routerState.snapshot.root;C=ey(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),C=this.currentUrlTree.root}return ty(C,t,y,m??null)}navigateByUrl(t,i={skipLocationChange:!1}){let s=ls(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ga,null,i)}navigate(t,i={skipLocationChange:!1}){return VE(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let s;if(i===!0?s=X({},FE):i===!1?s=X({},NE):s=i,ls(t))return O0(this.currentUrlTree,t,s);let o=this.parseUrl(t);return O0(this.currentUrlTree,o,s)}removeEmptyProps(t){return Object.entries(t).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(t,i,s,o,l){if(this.disposed)return Promise.resolve(!1);let h,f,m;l?(h=l.resolve,f=l.reject,m=l.promise):m=new Promise((C,E)=>{h=C,f=E});let y=this.pendingTasks.add();return wy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(y))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:f,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(C=>Promise.reject(C))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function VE(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new pe(4008,!1)}function BE(n){return!(n instanceof Za)&&!(n instanceof go)}var Cy=(()=>{class n{constructor(t,i,s,o,l,h){this.router=t,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=l,this.locationStrategy=h,this.href=null,this.onChanges=new si,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let f=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement=f==="a"||f==="area",this.isAnchorElement?this.subscription=t.events.subscribe(m=>{m instanceof hi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ls(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,s,o,l){let h=this.urlTree;if(h===null||this.isAnchorElement&&(t!==0||i||s||o||l||typeof this.target=="string"&&this.target!="_self"))return!0;let f={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(h,f),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:D_(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,t,i):s.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ls(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(le(Qe),le(_r),dd("tabindex"),le(is),le(es),le(Gi))}}static{this.\u0275dir=Vt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&de("click",function(l){return s.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),i&2&&Bi("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ss],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ss],replaceUrl:[2,"replaceUrl","replaceUrl",ss],routerLink:"routerLink"},standalone:!0,features:[vd,Gn]})}}return n})();var pc=class{};var UE=(()=>{class n{constructor(t,i,s,o,l){this.router=t,this.injector=s,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Yr(t=>t instanceof hi),io(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=wd(o.providers,t,`Route: ${o.path}`));let l=o._injector??t,h=o._loadedInjector??l;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(l,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(h,o.children??o._loadedRoutes))}return en(s).pipe(ad())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(t,i):s=Se(null);let o=s.pipe(gn(l=>l===null?Se(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(i.loadComponent&&!i._loadedComponent){let l=this.loader.loadComponent(i);return en([o,l]).pipe(ad())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(Pe(Qe),Pe($u),Pe(Ma),Pe(pc),Pe(If))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),by=new Xe(""),zE=(()=>{class n{constructor(t,i,s,o,l={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration||="disabled",l.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hi?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof gr&&t.code===sc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ac&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ac(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){I_()}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();function Ey(n,...e){return Pa([{provide:el,multi:!0,useValue:n},[],{provide:_r,useFactory:Sy,deps:[Qe]},{provide:Td,multi:!0,useFactory:Ty},e.map(t=>t.\u0275providers)])}function Sy(n){return n.routerState.root}function al(n,e){return{\u0275kind:n,\u0275providers:e}}function Ty(){let n=ae(Jr);return e=>{let t=n.get(Dd);if(e!==t.components[0])return;let i=n.get(Qe),s=n.get(Dy);n.get(Mf)===1&&i.initialNavigation(),n.get(Iy,null,hd.Optional)?.setUpPreloading(),n.get(by,null,hd.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var Dy=new Xe("",{factory:()=>new si}),Mf=new Xe("",{providedIn:"root",factory:()=>1});function jE(){return al(2,[{provide:Mf,useValue:0},{provide:Sd,multi:!0,deps:[Jr],useFactory:e=>{let t=e.get(v0,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let s=e.get(Qe),o=e.get(Dy);wy(s,()=>{i(!0)}),e.get(Pf).afterPreactivation=()=>(i(!0),o.closed?Se(void 0):o),s.initialNavigation()}))}}])}function $E(){return al(3,[{provide:Sd,multi:!0,useFactory:()=>{let e=ae(Qe);return()=>{e.setUpLocationChangeListener()}}},{provide:Mf,useValue:2}])}var Iy=new Xe("");function qE(n){return al(0,[{provide:Iy,useExisting:UE},{provide:pc,useExisting:n}])}function GE(){return al(8,[V0,{provide:mc,useExisting:V0}])}function HE(n){let e=[{provide:_y,useValue:AE},{provide:yy,useValue:X({skipNextTransition:!!n?.skipInitialTransition},n)}];return al(9,e)}var j0=new Xe("ROUTER_FORROOT_GUARD"),KE=[oo,{provide:nl,useClass:po},Qe,rl,{provide:_r,useFactory:Sy,deps:[Qe]},If,[]],Ay=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[KE,[],{provide:el,multi:!0,useValue:t},{provide:j0,useFactory:YE,deps:[[Qe,new pr,new w_]]},{provide:ol,useValue:i||{}},i?.useHash?ZE():QE(),WE(),i?.preloadingStrategy?qE(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?XE(i):[],i?.bindToComponentInputs?GE().\u0275providers:[],i?.enableViewTransitions?HE().\u0275providers:[],JE()]}}static forChild(t){return{ngModule:n,providers:[{provide:el,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(Pe(j0,8))}}static{this.\u0275mod=Fi({type:n})}static{this.\u0275inj=Li({})}}return n})();function WE(){return{provide:by,useFactory:()=>{let n=ae(T0),e=ae(_n),t=ae(ol),i=ae(Pf),s=ae(nl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new zE(s,i,n,e,t)}}}function ZE(){return{provide:Gi,useClass:C0}}function QE(){return{provide:Gi,useClass:Nd}}function YE(n){return"guarded"}function XE(n){return[n.initialNavigation==="disabled"?$E().\u0275providers:[],n.initialNavigation==="enabledBlocking"?jE().\u0275providers:[]]}var $0=new Xe("");function JE(){return[{provide:$0,useFactory:Ty},{provide:Td,multi:!0,useExisting:$0}]}var xe=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(xe||{}),di="*";function xf(n,e){return{type:xe.Trigger,name:n,definitions:e,options:{}}}function ul(n,e=null){return{type:xe.Animate,styles:e,timings:n}}function Py(n,e=null){return{type:xe.Sequence,steps:n,options:e}}function fi(n){return{type:xe.Style,styles:n,offset:null}}function cl(n,e,t=null){return{type:xe.Transition,expr:n,animation:e,options:t}}var wr=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},ll=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,s=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==o&&this._onFinish()}),l.onDestroy(()=>{++i==o&&this._onDestroy()}),l.onStart(()=>{++s==o&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let s=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(s)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},_c="!";function My(n){return new pe(3e3,!1)}function eS(){return new pe(3100,!1)}function tS(){return new pe(3101,!1)}function nS(n){return new pe(3001,!1)}function iS(n){return new pe(3003,!1)}function rS(n){return new pe(3004,!1)}function sS(n,e){return new pe(3005,!1)}function oS(){return new pe(3006,!1)}function aS(){return new pe(3007,!1)}function lS(n,e){return new pe(3008,!1)}function uS(n){return new pe(3002,!1)}function cS(n,e,t,i,s){return new pe(3010,!1)}function hS(){return new pe(3011,!1)}function dS(){return new pe(3012,!1)}function fS(){return new pe(3200,!1)}function pS(){return new pe(3202,!1)}function mS(){return new pe(3013,!1)}function gS(n){return new pe(3014,!1)}function _S(n){return new pe(3015,!1)}function yS(n){return new pe(3016,!1)}function vS(n,e){return new pe(3404,!1)}function wS(n){return new pe(3502,!1)}function CS(n){return new pe(3503,!1)}function bS(){return new pe(3300,!1)}function ES(n){return new pe(3504,!1)}function SS(n){return new pe(3301,!1)}function TS(n,e){return new pe(3302,!1)}function DS(n){return new pe(3303,!1)}function IS(n,e){return new pe(3400,!1)}function AS(n){return new pe(3401,!1)}function PS(n){return new pe(3402,!1)}function MS(n,e){return new pe(3505,!1)}function Cr(n){switch(n.length){case 0:return new wr;case 1:return n[0];default:return new ll(n)}}function qy(n,e,t=new Map,i=new Map){let s=[],o=[],l=-1,h=null;if(e.forEach(f=>{let m=f.get("offset"),y=m==l,C=y&&h||new Map;f.forEach((E,I)=>{let N=I,U=E;if(I!=="offset")switch(N=n.normalizePropertyName(N,s),U){case _c:U=t.get(I);break;case di:U=i.get(I);break;default:U=n.normalizeStyleValue(I,N,U,s);break}C.set(N,U)}),y||o.push(C),h=C,l=m}),s.length)throw wS(s);return o}function ep(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Rf(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Rf(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Rf(t,"destroy",n)));break}}function Rf(n,e,t){let i=t.totalTime,s=!!t.disabled,o=tp(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,s),l=n._data;return l!=null&&(o._data=l),o}function tp(n,e,t,i,s="",o=0,l){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:s,totalTime:o,disabled:!!l}}function bn(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function xy(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var xS=typeof document>"u"?null:document.documentElement;function np(n){let e=n.parentNode||n.host||null;return e===xS?null:e}function RS(n){return n.substring(1,6)=="ebkit"}var us=null,Ry=!1;function kS(n){us||(us=OS()||{},Ry=us.style?"WebkitAppearance"in us.style:!1);let e=!0;return us.style&&!RS(n)&&(e=n in us.style,!e&&Ry&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in us.style)),e}function OS(){return typeof document<"u"?document.body:null}function Gy(n,e){for(;e;){if(e===n)return!0;e=np(e)}return!1}function Hy(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var ip=(()=>{class n{validateStyleProperty(t){return kS(t)}containsElement(t,i){return Gy(t,i)}getParentElement(t){return np(t)}query(t,i,s){return Hy(t,i,s)}computeStyle(t,i,s){return s||""}animate(t,i,s,o,l,h=[],f){return new wr(s,o)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),ds=class{static{this.NOOP=new ip}},fs=class{};var LS=1e3,Ky="{{",FS="}}",Wy="ng-enter",Vf="ng-leave",yc="ng-trigger",Ec=".ng-trigger",ky="ng-animating",Bf=".ng-animating";function Wi(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Uf(parseFloat(e[1]),e[2])}function Uf(n,e){switch(e){case"s":return n*LS;default:return n}}function Sc(n,e,t){return n.hasOwnProperty("duration")?n:NS(n,e,t)}function NS(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,s,o=0,l="";if(typeof n=="string"){let h=n.match(i);if(h===null)return e.push(My(n)),{duration:0,delay:0,easing:""};s=Uf(parseFloat(h[1]),h[2]);let f=h[3];f!=null&&(o=Uf(parseFloat(f),h[4]));let m=h[5];m&&(l=m)}else s=n;if(!t){let h=!1,f=e.length;s<0&&(e.push(eS()),h=!0),o<0&&(e.push(tS()),h=!0),h&&e.splice(f,0,My(n))}return{duration:s,delay:o,easing:l}}function VS(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function pi(n,e,t){e.forEach((i,s)=>{let o=rp(s);t&&!t.has(s)&&t.set(s,n.style[o]),n.style[o]=i})}function hs(n,e){e.forEach((t,i)=>{let s=rp(i);n.style[s]=""})}function hl(n){return Array.isArray(n)?n.length==1?n[0]:Py(n):n}function BS(n,e,t){let i=e.params||{},s=Zy(n);s.length&&s.forEach(o=>{i.hasOwnProperty(o)||t.push(nS(o))})}var zf=new RegExp(`${Ky}\\s*(.+?)\\s*${FS}`,"g");function Zy(n){let e=[];if(typeof n=="string"){let t;for(;t=zf.exec(n);)e.push(t[1]);zf.lastIndex=0}return e}function fl(n,e,t){let i=`${n}`,s=i.replace(zf,(o,l)=>{let h=e[l];return h==null&&(t.push(iS(l)),h=""),h.toString()});return s==i?n:s}var US=/-+([a-z0-9])/g;function rp(n){return n.replace(US,(...e)=>e[1].toUpperCase())}function zS(n,e){return n===0||e===0}function jS(n,e,t){if(t.size&&e.length){let i=e[0],s=[];if(t.forEach((o,l)=>{i.has(l)||s.push(l),i.set(l,o)}),s.length)for(let o=1;o<e.length;o++){let l=e[o];s.forEach(h=>l.set(h,sp(n,h)))}}return e}function Cn(n,e,t){switch(e.type){case xe.Trigger:return n.visitTrigger(e,t);case xe.State:return n.visitState(e,t);case xe.Transition:return n.visitTransition(e,t);case xe.Sequence:return n.visitSequence(e,t);case xe.Group:return n.visitGroup(e,t);case xe.Animate:return n.visitAnimate(e,t);case xe.Keyframes:return n.visitKeyframes(e,t);case xe.Style:return n.visitStyle(e,t);case xe.Reference:return n.visitReference(e,t);case xe.AnimateChild:return n.visitAnimateChild(e,t);case xe.AnimateRef:return n.visitAnimateRef(e,t);case xe.Query:return n.visitQuery(e,t);case xe.Stagger:return n.visitStagger(e,t);default:throw rS(e.type)}}function sp(n,e){return window.getComputedStyle(n)[e]}var $S=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Tc=class extends fs{normalizePropertyName(e,t){return rp(e)}normalizeStyleValue(e,t,i,s){let o="",l=i.toString().trim();if($S.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&h[1].length==0&&s.push(sS(e,i))}return l+o}};var Dc="*";function qS(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>GS(i,t,e)):t.push(n),t}function GS(n,e,t){if(n[0]==":"){let f=HS(n,t);if(typeof f=="function"){e.push(f);return}n=f}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(_S(n)),e;let s=i[1],o=i[2],l=i[3];e.push(Oy(s,l));let h=s==Dc&&l==Dc;o[0]=="<"&&!h&&e.push(Oy(l,s))}function HS(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(yS(n)),"* => *"}}var vc=new Set(["true","1"]),wc=new Set(["false","0"]);function Oy(n,e){let t=vc.has(n)||wc.has(n),i=vc.has(e)||wc.has(e);return(s,o)=>{let l=n==Dc||n==s,h=e==Dc||e==o;return!l&&t&&typeof s=="boolean"&&(l=s?vc.has(n):wc.has(n)),!h&&i&&typeof o=="boolean"&&(h=o?vc.has(e):wc.has(e)),l&&h}}var Qy=":self",KS=new RegExp(`s*${Qy}s*,?`,"g");function Yy(n,e,t,i){return new jf(n).build(e,t,i)}var Ly="",jf=class{constructor(e){this._driver=e}build(e,t,i){let s=new $f(t);return this._resetContextStyleTimingState(s),Cn(this,hl(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector=Ly,e.collectedStyles=new Map,e.collectedStyles.set(Ly,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,s=t.depCount=0,o=[],l=[];return e.name.charAt(0)=="@"&&t.errors.push(oS()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),h.type==xe.State){let f=h,m=f.name;m.toString().split(/\s*,\s*/).forEach(y=>{f.name=y,o.push(this.visitState(f,t))}),f.name=m}else if(h.type==xe.Transition){let f=this.visitTransition(h,t);i+=f.queryCount,s+=f.depCount,l.push(f)}else t.errors.push(aS())}),{type:xe.Trigger,name:e.name,states:o,transitions:l,queryCount:i,depCount:s,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,l=s||{};i.styles.forEach(h=>{h instanceof Map&&h.forEach(f=>{Zy(f).forEach(m=>{l.hasOwnProperty(m)||o.add(m)})})}),o.size&&t.errors.push(lS(e.name,[...o.values()]))}return{type:xe.State,name:e.name,style:i,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=Cn(this,hl(e.animation),t),s=qS(e.expr,t.errors);return{type:xe.Transition,matchers:s,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:cs(e.options)}}visitSequence(e,t){return{type:xe.Sequence,steps:e.steps.map(i=>Cn(this,i,t)),options:cs(e.options)}}visitGroup(e,t){let i=t.currentTime,s=0,o=e.steps.map(l=>{t.currentTime=i;let h=Cn(this,l,t);return s=Math.max(s,t.currentTime),h});return t.currentTime=s,{type:xe.Group,steps:o,options:cs(e.options)}}visitAnimate(e,t){let i=YS(e.timings,t.errors);t.currentAnimateTimings=i;let s,o=e.styles?e.styles:fi({});if(o.type==xe.Keyframes)s=this.visitKeyframes(o,t);else{let l=e.styles,h=!1;if(!l){h=!0;let m={};i.easing&&(m.easing=i.easing),l=fi(m)}t.currentTime+=i.duration+i.delay;let f=this.visitStyle(l,t);f.isEmptyStep=h,s=f}return t.currentAnimateTimings=null,{type:xe.Animate,timings:i,style:s,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of s)typeof h=="string"?h===di?i.push(h):t.errors.push(uS(h)):i.push(new Map(Object.entries(h)));let o=!1,l=null;return i.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!o)){for(let f of h.values())if(f.toString().indexOf(Ky)>=0){o=!0;break}}}),{type:xe.Style,styles:i,easing:l,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,s=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(l=>{typeof l!="string"&&l.forEach((h,f)=>{let m=t.collectedStyles.get(t.currentQuerySelector),y=m.get(f),C=!0;y&&(o!=s&&o>=y.startTime&&s<=y.endTime&&(t.errors.push(cS(f,y.startTime,y.endTime,o,s)),C=!1),o=y.startTime),C&&m.set(f,{startTime:o,endTime:s}),t.options&&BS(h,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:xe.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(hS()),i;let s=1,o=0,l=[],h=!1,f=!1,m=0,y=e.steps.map(Y=>{let ne=this._makeStyleAst(Y,t),he=ne.offset!=null?ne.offset:QS(ne.styles),ve=0;return he!=null&&(o++,ve=ne.offset=he),f=f||ve<0||ve>1,h=h||ve<m,m=ve,l.push(ve),ne});f&&t.errors.push(dS()),h&&t.errors.push(fS());let C=e.steps.length,E=0;o>0&&o<C?t.errors.push(pS()):o==0&&(E=s/(C-1));let I=C-1,N=t.currentTime,U=t.currentAnimateTimings,z=U.duration;return y.forEach((Y,ne)=>{let he=E>0?ne==I?1:E*ne:l[ne],ve=he*z;t.currentTime=N+U.delay+ve,U.duration=ve,this._validateStyleAst(Y,t),Y.offset=he,i.styles.push(Y)}),i}visitReference(e,t){return{type:xe.Reference,animation:Cn(this,hl(e.animation),t),options:cs(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:xe.AnimateChild,options:cs(e.options)}}visitAnimateRef(e,t){return{type:xe.AnimateRef,animation:this.visitReference(e.animation,t),options:cs(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;let[o,l]=WS(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,bn(t.collectedStyles,t.currentQuerySelector,new Map);let h=Cn(this,hl(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:xe.Query,selector:o,limit:s.limit||0,optional:!!s.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:cs(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(mS());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Sc(e.timings,t.errors,!0);return{type:xe.Stagger,animation:Cn(this,hl(e.animation),t),timings:i,options:null}}};function WS(n){let e=!!n.split(/\s*,\s*/).find(t=>t==Qy);return e&&(n=n.replace(KS,"")),n=n.replace(/@\*/g,Ec).replace(/@\w+/g,t=>Ec+"-"+t.slice(1)).replace(/:animating/g,Bf),[n,e]}function ZS(n){return n?X({},n):null}var $f=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function QS(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function YS(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Sc(n,e).duration;return kf(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=kf(0,0,"");return o.dynamic=!0,o.strValue=t,o}let s=Sc(t,e);return kf(s.duration,s.delay,s.easing)}function cs(n){return n?(n=X({},n),n.params&&(n.params=ZS(n.params))):n={},n}function kf(n,e,t){return{duration:n,delay:e,easing:t}}function op(n,e,t,i,s,o,l=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:s,delay:o,totalTime:s+o,easing:l,subTimeline:h}}var pl=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},XS=1,JS=":enter",eT=new RegExp(JS,"g"),tT=":leave",nT=new RegExp(tT,"g");function Xy(n,e,t,i,s,o=new Map,l=new Map,h,f,m=[]){return new qf().buildKeyframes(n,e,t,i,s,o,l,h,f,m)}var qf=class{buildKeyframes(e,t,i,s,o,l,h,f,m,y=[]){m=m||new pl;let C=new Gf(e,t,m,s,o,y,[]);C.options=f;let E=f.delay?Wi(f.delay):0;C.currentTimeline.delayNextStep(E),C.currentTimeline.setStyles([l],null,C.errors,f),Cn(this,i,C);let I=C.timelines.filter(N=>N.containsAnimation());if(I.length&&h.size){let N;for(let U=I.length-1;U>=0;U--){let z=I[U];if(z.element===t){N=z;break}}N&&!N.allowOnlyTimelineStyles()&&N.setStyles([h],null,C.errors,f)}return I.length?I.map(N=>N.buildKeyframes()):[op(t,[],[],[],0,E,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let s=t.createSubContext(e.options),o=t.currentTimeline.currentTime,l=this._visitSubInstructions(i,s,s.options);o!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let s of e){let o=s?.delay;if(o){let l=typeof o=="number"?o:Wi(fl(o,s?.params??{},t.errors));i.delayNextStep(l)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,l=i.duration!=null?Wi(i.duration):null,h=i.delay!=null?Wi(i.delay):null;return l!==0&&e.forEach(f=>{let m=t.appendInstructionToTimeline(f,l,h);o=Math.max(o,m.duration+m.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Cn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,s=t,o=e.options;if(o&&(o.params||o.delay)&&(s=t.createSubContext(o),s.transformIntoNewTimeline(),o.delay!=null)){s.previousNode.type==xe.Style&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=Ic);let l=Wi(o.delay);s.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Cn(this,l,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],s=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Wi(e.options.delay):0;e.steps.forEach(l=>{let h=t.createSubContext(e.options);o&&h.delayNextStep(o),Cn(this,l,h),s=Math.max(s,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,s=t.params?fl(i,t.params,t.errors):i;return Sc(s,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),s.snapshotCurrentStyles());let o=e.style;o.type==xe.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,s=t.currentAnimateTimings;!s&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=s&&s.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,s=t.currentTimeline.duration,o=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(f=>{let m=f.offset||0;h.forwardTime(m*o),h.setStyles(f.styles,f.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(s+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,s=e.options||{},o=s.delay?Wi(s.delay):0;o&&(t.previousNode.type===xe.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ic);let l=i,h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=h.length;let f=null;h.forEach((m,y)=>{t.currentQueryIndex=y;let C=t.createSubContext(e.options,m);o&&C.delayNextStep(o),m===t.element&&(f=C.currentTimeline),Cn(this,e.animation,C),C.currentTimeline.applyStylesToKeyframe();let E=C.currentTimeline.currentTime;l=Math.max(l,E)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),f&&(t.currentTimeline.mergeTimelineCollectedStyles(f),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,s=t.currentTimeline,o=e.timings,l=Math.abs(o.duration),h=l*(t.currentQueryTotal-1),f=l*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":f=h-f;break;case"full":f=i.currentStaggerTime;break}let y=t.currentTimeline;f&&y.delayNextStep(f);let C=y.currentTime;Cn(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=s.currentTime-C+(s.startTime-i.currentTimeline.startTime)}},Ic={},Gf=class n{constructor(e,t,i,s,o,l,h,f){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=o,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ic,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new Ac(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,s=this.options;i.duration!=null&&(s.duration=Wi(i.duration)),i.delay!=null&&(s.delay=Wi(i.delay));let o=i.params;if(o){let l=s.params;l||(l=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=fl(o[h],l,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(s=>{i[s]=t[s]})}}return e}createSubContext(e=null,t,i){let s=t||this.element,o=new n(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Ic,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new Hf(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(o),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,s,o,l){let h=[];if(s&&h.push(this.element),e.length>0){e=e.replace(eT,"."+this._enterClassName),e=e.replace(nT,"."+this._leaveClassName);let f=i!=1,m=this._driver.query(this.element,e,f);i!==0&&(m=i<0?m.slice(m.length+i,m.length):m.slice(0,i)),h.push(...m)}return!o&&h.length==0&&l.push(gS(t)),h}},Ac=class n{constructor(e,t,i,s){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=s,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=XS,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||di),this._currentKeyframe.set(t,di);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,s){t&&this._previousKeyframe.set("easing",t);let o=s&&s.params||{},l=iT(e,this._globalTimelineStyles);for(let[h,f]of l){let m=fl(f,o,i);this._pendingStyles.set(h,m),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??di),this._updateStyle(h,m)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let s=this._styleSummary.get(i);(!s||t.time>s.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,s=[];this._keyframes.forEach((h,f)=>{let m=new Map([...this._backFill,...h]);m.forEach((y,C)=>{y===_c?e.add(C):y===di&&t.add(C)}),i||m.set("offset",f/this.duration),s.push(m)});let o=[...e.values()],l=[...t.values()];if(i){let h=s[0],f=new Map(h);h.set("offset",0),f.set("offset",1),s=[h,f]}return op(this.element,s,o,l,this.duration,this.startTime,this.easing,!1)}},Hf=class extends Ac{constructor(e,t,i,s,o,l,h=!1){super(e,t,l.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],l=i+t,h=t/l,f=new Map(e[0]);f.set("offset",0),o.push(f);let m=new Map(e[0]);m.set("offset",Fy(h)),o.push(m);let y=e.length-1;for(let C=1;C<=y;C++){let E=new Map(e[C]),I=E.get("offset"),N=t+I*i;E.set("offset",Fy(N/l)),o.push(E)}i=l,t=0,s="",e=o}return op(this.element,e,this.preStyleProps,this.postStyleProps,i,t,s,!0)}};function Fy(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function iT(n,e){let t=new Map,i;return n.forEach(s=>{if(s==="*"){i??=e.keys();for(let o of i)t.set(o,di)}else for(let[o,l]of s)t.set(o,l)}),t}function Ny(n,e,t,i,s,o,l,h,f,m,y,C,E){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:o,toState:i,toStyles:l,timelines:h,queriedElements:f,preStyleProps:m,postStyleProps:y,totalTime:C,errors:E}}var Of={},Pc=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,s){return rT(this.ast.matchers,e,t,i,s)}buildStyles(e,t,i){let s=this._stateStyles.get("*");return e!==void 0&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,i):new Map}build(e,t,i,s,o,l,h,f,m,y){let C=[],E=this.ast.options&&this.ast.options.params||Of,I=h&&h.params||Of,N=this.buildStyles(i,I,C),U=f&&f.params||Of,z=this.buildStyles(s,U,C),Y=new Set,ne=new Map,he=new Map,ve=s==="void",it={params:Jy(U,E),delay:this.ast.options?.delay},Re=y?[]:Xy(e,t,this.ast.animation,o,l,N,z,it,m,C),M=0;return Re.forEach(b=>{M=Math.max(b.duration+b.delay,M)}),C.length?Ny(t,this._triggerName,i,s,ve,N,z,[],[],ne,he,M,C):(Re.forEach(b=>{let S=b.element,A=bn(ne,S,new Set);b.preStyleProps.forEach(R=>A.add(R));let x=bn(he,S,new Set);b.postStyleProps.forEach(R=>x.add(R)),S!==t&&Y.add(S)}),Ny(t,this._triggerName,i,s,ve,N,z,Re,[...Y.values()],ne,he,M))}};function rT(n,e,t,i,s){return n.some(o=>o(e,t,i,s))}function Jy(n,e){let t=X({},e);return Object.entries(n).forEach(([i,s])=>{s!=null&&(t[i]=s)}),t}var Kf=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,s=Jy(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((l,h)=>{l&&(l=fl(l,s,t));let f=this.normalizer.normalizePropertyName(h,t);l=this.normalizer.normalizeStyleValue(h,f,l,t),i.set(h,l)})}),i}};function sT(n,e,t){return new Wf(n,e,t)}var Wf=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{let o=s.options&&s.options.params||{};this.states.set(s.name,new Kf(s.style,o,i))}),Vy(this.states,"true","1"),Vy(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new Pc(e,s,this.states))}),this.fallbackTransition=oT(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,s){return this.transitionFactories.find(l=>l.match(e,t,i,s))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function oT(n,e,t){let i=[(l,h)=>!0],s={type:xe.Sequence,steps:[],options:null},o={type:xe.Transition,animation:s,matchers:i,options:null,queryCount:0,depCount:0};return new Pc(n,o,e)}function Vy(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var aT=new pl,Zf=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],s=[],o=Yy(this._driver,t,i,s);if(i.length)throw CS(i);s.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,i){let s=e.element,o=qy(this._normalizer,e.keyframes,t,i);return this._driver.animate(s,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let s=[],o=this._animations.get(e),l,h=new Map;if(o?(l=Xy(this._driver,t,o,Wy,Vf,new Map,new Map,i,aT,s),l.forEach(y=>{let C=bn(h,y.element,new Map);y.postStyleProps.forEach(E=>C.set(E,null))})):(s.push(bS()),l=[]),s.length)throw ES(s);h.forEach((y,C)=>{y.forEach((E,I)=>{y.set(I,this._driver.computeStyle(C,I,di))})});let f=l.map(y=>{let C=h.get(y.element);return this._buildPlayer(y,new Map,C)}),m=Cr(f);return this._playersById.set(e,m),m.onDestroy(()=>this.destroy(e)),this.players.push(m),m}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw SS(e);return t}listen(e,t,i,s){let o=tp(t,"","","");return ep(this._getPlayer(e),i,o,s),()=>{}}command(e,t,i,s){if(i=="register"){this.register(e,s[0]);return}if(i=="create"){let l=s[0]||{};this.create(e,t,l);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e);break}}},By="ng-animate-queued",lT=".ng-animate-queued",Lf="ng-animate-disabled",uT=".ng-animate-disabled",cT="ng-star-inserted",hT=".ng-star-inserted",dT=[],ev={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Kn="__ng_removed",ml=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),s=i?e.value:e;if(this.value=mT(s),i){let o=e,{value:l}=o,h=s_(o,["value"]);this.options=h}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(s=>{i[s]==null&&(i[s]=t[s])})}}},dl="void",Ff=new ml(dl),Qf=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ln(t,this._hostClassName)}listen(e,t,i,s){if(!this._triggers.has(t))throw TS(i,t);if(i==null||i.length==0)throw DS(t);if(!gT(i))throw IS(i,t);let o=bn(this._elementListeners,e,[]),l={name:t,phase:i,callback:s};o.push(l);let h=bn(this._engine.statesByElement,e,new Map);return h.has(t)||(Ln(e,yc),Ln(e,yc+"-"+t),h.set(t,Ff)),()=>{this._engine.afterFlush(()=>{let f=o.indexOf(l);f>=0&&o.splice(f,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw AS(e);return t}trigger(e,t,i,s=!0){let o=this._getTrigger(t),l=new gl(this.id,t,e),h=this._engine.statesByElement.get(e);h||(Ln(e,yc),Ln(e,yc+"-"+t),this._engine.statesByElement.set(e,h=new Map));let f=h.get(t),m=new ml(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&m.absorbOptions(f.options),h.set(t,m),f||(f=Ff),!(m.value===dl)&&f.value===m.value){if(!vT(f.params,m.params)){let U=[],z=o.matchStyles(f.value,f.params,U),Y=o.matchStyles(m.value,m.params,U);U.length?this._engine.reportError(U):this._engine.afterFlush(()=>{hs(e,z),pi(e,Y)})}return}let E=bn(this._engine.playersByElement,e,[]);E.forEach(U=>{U.namespaceId==this.id&&U.triggerName==t&&U.queued&&U.destroy()});let I=o.matchTransition(f.value,m.value,e,m.params),N=!1;if(!I){if(!s)return;I=o.fallbackTransition,N=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:I,fromState:f,toState:m,player:l,isFallbackTransition:N}),N||(Ln(e,By),l.onStart(()=>{vo(e,By)})),l.onDone(()=>{let U=this.players.indexOf(l);U>=0&&this.players.splice(U,1);let z=this._engine.playersByElement.get(e);if(z){let Y=z.indexOf(l);Y>=0&&z.splice(Y,1)}}),this.players.push(l),E.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,Ec,!0);i.forEach(s=>{if(s[Kn])return;let o=this._engine.fetchNamespacesByElement(s);o.size?o.forEach(l=>l.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,i,s){let o=this._engine.statesByElement.get(e),l=new Map;if(o){let h=[];if(o.forEach((f,m)=>{if(l.set(m,f.value),this._triggers.has(m)){let y=this.trigger(e,m,dl,s);y&&h.push(y)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),i&&Cr(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let s=new Set;t.forEach(o=>{let l=o.name;if(s.has(l))return;s.add(l);let f=this._triggers.get(l).fallbackTransition,m=i.get(l)||Ff,y=new ml(dl),C=new gl(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:f,fromState:m,toState:y,player:C,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)s=!0;else{let l=e;for(;l=l.parentNode;)if(i.statesByElement.get(l)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[Kn];(!o||o===ev)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ln(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let s=i.player;if(s.destroyed)return;let o=i.element,l=this._elementListeners.get(o);l&&l.forEach(h=>{if(h.name==i.triggerName){let f=tp(o,i.triggerName,i.fromState.value,i.toState.value);f._data=e,ep(i.player,h.phase,f,h.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(i)}),this._queue=[],t.sort((i,s)=>{let o=i.transition.ast.depCount,l=s.transition.ast.depCount;return o==0||l==0?o-l:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Yf=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new Qf(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,s=this.namespacesByHostElement;if(i.length-1>=0){let l=!1,h=this.driver.getParentElement(t);for(;h;){let f=s.get(h);if(f){let m=i.indexOf(f);i.splice(m+1,0,e),l=!0;break}h=this.driver.getParentElement(h)}l||i.unshift(e)}else i.push(e);return s.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let s=this._namespaceLookup[e];s&&s.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let s of i.values())if(s.namespaceId){let o=this._fetchNamespace(s.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,s){if(Cc(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,s),!0}return!1}insertNode(e,t,i,s){if(!Cc(t))return;let o=t[Kn];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){let l=this._fetchNamespace(e);l&&l.insertNode(t,i)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ln(e,Lf)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),vo(e,Lf))}removeNode(e,t,i){if(Cc(t)){let s=e?this._fetchNamespace(e):null;s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,s,o){this.collectedLeaveElements.push(t),t[Kn]={namespaceId:e,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,s,o){return Cc(t)?this._fetchNamespace(e).listen(t,i,s,o):()=>{}}_buildInstruction(e,t,i,s,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,s,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Ec,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Bf,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Cr(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Kn];if(t&&t.setForRemoval){if(e[Kn]=ev,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Lf)&&this.markElementAsDisabled(e,!1),this.driver.query(e,uT,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let s=this.collectedEnterElements[i];Ln(s,cT)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let s=this.collectedLeaveElements[i];this.processLeaveNode(s)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Cr(t).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(e){throw PS(e)}_flushAnimations(e,t){let i=new pl,s=[],o=new Map,l=[],h=new Map,f=new Map,m=new Map,y=new Set;this.disabledNodes.forEach(q=>{y.add(q);let ie=this.driver.query(q,lT,!0);for(let K=0;K<ie.length;K++)y.add(ie[K])});let C=this.bodyNode,E=Array.from(this.statesByElement.keys()),I=jy(E,this.collectedEnterElements),N=new Map,U=0;I.forEach((q,ie)=>{let K=Wy+U++;N.set(ie,K),q.forEach(oe=>Ln(oe,K))});let z=[],Y=new Set,ne=new Set;for(let q=0;q<this.collectedLeaveElements.length;q++){let ie=this.collectedLeaveElements[q],K=ie[Kn];K&&K.setForRemoval&&(z.push(ie),Y.add(ie),K.hasAnimation?this.driver.query(ie,hT,!0).forEach(oe=>Y.add(oe)):ne.add(ie))}let he=new Map,ve=jy(E,Array.from(Y));ve.forEach((q,ie)=>{let K=Vf+U++;he.set(ie,K),q.forEach(oe=>Ln(oe,K))}),e.push(()=>{I.forEach((q,ie)=>{let K=N.get(ie);q.forEach(oe=>vo(oe,K))}),ve.forEach((q,ie)=>{let K=he.get(ie);q.forEach(oe=>vo(oe,K))}),z.forEach(q=>{this.processLeaveNode(q)})});let it=[],Re=[];for(let q=this._namespaceList.length-1;q>=0;q--)this._namespaceList[q].drainQueuedTransitions(t).forEach(K=>{let oe=K.player,Fe=K.element;if(it.push(oe),this.collectedEnterElements.length){let rt=Fe[Kn];if(rt&&rt.setForMove){if(rt.previousTriggersValues&&rt.previousTriggersValues.has(K.triggerName)){let un=rt.previousTriggersValues.get(K.triggerName),It=this.statesByElement.get(K.element);if(It&&It.has(K.triggerName)){let Qt=It.get(K.triggerName);Qt.value=un,It.set(K.triggerName,Qt)}}oe.destroy();return}}let Je=!C||!this.driver.containsElement(C,Fe),De=he.get(Fe),fe=N.get(Fe),ce=this._buildInstruction(K,i,fe,De,Je);if(ce.errors&&ce.errors.length){Re.push(ce);return}if(Je){oe.onStart(()=>hs(Fe,ce.fromStyles)),oe.onDestroy(()=>pi(Fe,ce.toStyles)),s.push(oe);return}if(K.isFallbackTransition){oe.onStart(()=>hs(Fe,ce.fromStyles)),oe.onDestroy(()=>pi(Fe,ce.toStyles)),s.push(oe);return}let Dt=[];ce.timelines.forEach(rt=>{rt.stretchStartingKeyframe=!0,this.disabledNodes.has(rt.element)||Dt.push(rt)}),ce.timelines=Dt,i.append(Fe,ce.timelines);let Dn={instruction:ce,player:oe,element:Fe};l.push(Dn),ce.queriedElements.forEach(rt=>bn(h,rt,[]).push(oe)),ce.preStyleProps.forEach((rt,un)=>{if(rt.size){let It=f.get(un);It||f.set(un,It=new Set),rt.forEach((Qt,In)=>It.add(In))}}),ce.postStyleProps.forEach((rt,un)=>{let It=m.get(un);It||m.set(un,It=new Set),rt.forEach((Qt,In)=>It.add(In))})});if(Re.length){let q=[];Re.forEach(ie=>{q.push(MS(ie.triggerName,ie.errors))}),it.forEach(ie=>ie.destroy()),this.reportError(q)}let M=new Map,b=new Map;l.forEach(q=>{let ie=q.element;i.has(ie)&&(b.set(ie,ie),this._beforeAnimationBuild(q.player.namespaceId,q.instruction,M))}),s.forEach(q=>{let ie=q.element;this._getPreviousPlayers(ie,!1,q.namespaceId,q.triggerName,null).forEach(oe=>{bn(M,ie,[]).push(oe),oe.destroy()})});let S=z.filter(q=>$y(q,f,m)),A=new Map;zy(A,this.driver,ne,m,di).forEach(q=>{$y(q,f,m)&&S.push(q)});let R=new Map;I.forEach((q,ie)=>{zy(R,this.driver,new Set(q),f,_c)}),S.forEach(q=>{let ie=A.get(q),K=R.get(q);A.set(q,new Map([...ie?.entries()??[],...K?.entries()??[]]))});let D=[],et=[],nn={};l.forEach(q=>{let{element:ie,player:K,instruction:oe}=q;if(i.has(ie)){if(y.has(ie)){K.onDestroy(()=>pi(ie,oe.toStyles)),K.disabled=!0,K.overrideTotalTime(oe.totalTime),s.push(K);return}let Fe=nn;if(b.size>1){let De=ie,fe=[];for(;De=De.parentNode;){let ce=b.get(De);if(ce){Fe=ce;break}fe.push(De)}fe.forEach(ce=>b.set(ce,Fe))}let Je=this._buildAnimation(K.namespaceId,oe,M,o,R,A);if(K.setRealPlayer(Je),Fe===nn)D.push(K);else{let De=this.playersByElement.get(Fe);De&&De.length&&(K.parentPlayer=Cr(De)),s.push(K)}}else hs(ie,oe.fromStyles),K.onDestroy(()=>pi(ie,oe.toStyles)),et.push(K),y.has(ie)&&s.push(K)}),et.forEach(q=>{let ie=o.get(q.element);if(ie&&ie.length){let K=Cr(ie);q.setRealPlayer(K)}}),s.forEach(q=>{q.parentPlayer?q.syncPlayerEvents(q.parentPlayer):q.destroy()});for(let q=0;q<z.length;q++){let ie=z[q],K=ie[Kn];if(vo(ie,Vf),K&&K.hasAnimation)continue;let oe=[];if(h.size){let Je=h.get(ie);Je&&Je.length&&oe.push(...Je);let De=this.driver.query(ie,Bf,!0);for(let fe=0;fe<De.length;fe++){let ce=h.get(De[fe]);ce&&ce.length&&oe.push(...ce)}}let Fe=oe.filter(Je=>!Je.destroyed);Fe.length?_T(this,ie,Fe):this.processLeaveNode(ie)}return z.length=0,D.forEach(q=>{this.players.push(q),q.onDone(()=>{q.destroy();let ie=this.players.indexOf(q);this.players.splice(ie,1)}),q.play()}),D}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,s,o){let l=[];if(t){let h=this.playersByQueriedElement.get(e);h&&(l=h)}else{let h=this.playersByElement.get(e);if(h){let f=!o||o==dl;h.forEach(m=>{m.queued||!f&&m.triggerName!=s||l.push(m)})}}return(i||s)&&(l=l.filter(h=>!(i&&i!=h.namespaceId||s&&s!=h.triggerName))),l}_beforeAnimationBuild(e,t,i){let s=t.triggerName,o=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:s;for(let f of t.timelines){let m=f.element,y=m!==o,C=bn(i,m,[]);this._getPreviousPlayers(m,y,l,h,t.toState).forEach(I=>{let N=I.getRealPlayer();N.beforeDestroy&&N.beforeDestroy(),I.destroy(),C.push(I)})}hs(o,t.fromStyles)}_buildAnimation(e,t,i,s,o,l){let h=t.triggerName,f=t.element,m=[],y=new Set,C=new Set,E=t.timelines.map(N=>{let U=N.element;y.add(U);let z=U[Kn];if(z&&z.removedBeforeQueried)return new wr(N.duration,N.delay);let Y=U!==f,ne=yT((i.get(U)||dT).map(M=>M.getRealPlayer())).filter(M=>{let b=M;return b.element?b.element===U:!1}),he=o.get(U),ve=l.get(U),it=qy(this._normalizer,N.keyframes,he,ve),Re=this._buildPlayer(N,it,ne);if(N.subTimeline&&s&&C.add(U),Y){let M=new gl(e,h,U);M.setRealPlayer(Re),m.push(M)}return Re});m.forEach(N=>{bn(this.playersByQueriedElement,N.element,[]).push(N),N.onDone(()=>pT(this.playersByQueriedElement,N.element,N))}),y.forEach(N=>Ln(N,ky));let I=Cr(E);return I.onDestroy(()=>{y.forEach(N=>vo(N,ky)),pi(f,t.toStyles)}),C.forEach(N=>{bn(s,N,[]).push(I)}),I}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new wr(e.duration,e.delay)}},gl=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new wr,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(s=>ep(e,i,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){bn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function pT(n,e,t){let i=n.get(e);if(i){if(i.length){let s=i.indexOf(t);i.splice(s,1)}i.length==0&&n.delete(e)}return i}function mT(n){return n??null}function Cc(n){return n&&n.nodeType===1}function gT(n){return n=="start"||n=="done"}function Uy(n,e){let t=n.style.display;return n.style.display=e??"none",t}function zy(n,e,t,i,s){let o=[];t.forEach(f=>o.push(Uy(f)));let l=[];i.forEach((f,m)=>{let y=new Map;f.forEach(C=>{let E=e.computeStyle(m,C,s);y.set(C,E),(!E||E.length==0)&&(m[Kn]=fT,l.push(m))}),n.set(m,y)});let h=0;return t.forEach(f=>Uy(f,o[h++])),l}function jy(n,e){let t=new Map;if(n.forEach(h=>t.set(h,[])),e.length==0)return t;let i=1,s=new Set(e),o=new Map;function l(h){if(!h)return i;let f=o.get(h);if(f)return f;let m=h.parentNode;return t.has(m)?f=m:s.has(m)?f=i:f=l(m),o.set(h,f),f}return e.forEach(h=>{let f=l(h);f!==i&&t.get(f).push(h)}),t}function Ln(n,e){n.classList?.add(e)}function vo(n,e){n.classList?.remove(e)}function _T(n,e,t){Cr(t).onDone(()=>n.processLeaveNode(e))}function yT(n){let e=[];return tv(n,e),e}function tv(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof ll?tv(i.players,e):e.push(i)}}function vT(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s=0;s<t.length;s++){let o=t[s];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function $y(n,e,t){let i=t.get(n);if(!i)return!1;let s=e.get(n);return s?i.forEach(o=>s.add(o)):e.set(n,i),t.delete(n),!0}var wo=class{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(s,o)=>{},this._transitionEngine=new Yf(e.body,t,i),this._timelineEngine=new Zf(e.body,t,i),this._transitionEngine.onRemovalComplete=(s,o)=>this.onRemovalComplete(s,o)}registerTrigger(e,t,i,s,o){let l=e+"-"+s,h=this._triggerCache[l];if(!h){let f=[],m=[],y=Yy(this._driver,o,f,m);if(f.length)throw vS(s,f);m.length&&void 0,h=sT(s,y,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,s,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,s){this._transitionEngine.insertNode(e,t,i,s)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,s){if(i.charAt(0)=="@"){let[o,l]=xy(i),h=s;this._timelineEngine.command(o,t,l,h)}else this._transitionEngine.trigger(e,t,i,s)}listen(e,t,i,s,o){if(i.charAt(0)=="@"){let[l,h]=xy(i);return this._timelineEngine.listen(l,t,h,o)}return this._transitionEngine.listen(e,t,i,s,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function wT(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Nf(e[0]),e.length>1&&(i=Nf(e[e.length-1]))):e instanceof Map&&(t=Nf(e)),t||i?new Xf(n,t,i):null}var Xf=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&pi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pi(this._element,this._initialStyles),this._endStyles&&(pi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(hs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hs(this._element,this._endStyles),this._endStyles=null),pi(this._element,this._initialStyles),this._state=3)}};function Nf(n){let e=null;return n.forEach((t,i)=>{CT(i)&&(e=e||new Map,e.set(i,t))}),e}function CT(n){return n==="display"||n==="position"}var Mc=class{constructor(e,t,i,s){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,s)=>{s!=="offset"&&e.set(s,this._finished?i:sp(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},xc=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Gy(e,t)}getParentElement(e){return np(e)}query(e,t,i){return Hy(e,t,i)}computeStyle(e,t,i){return sp(e,t)}animate(e,t,i,s,o,l=[]){let h=s==0?"both":"forwards",f={duration:i,delay:s,fill:h};o&&(f.easing=o);let m=new Map,y=l.filter(I=>I instanceof Mc);zS(i,s)&&y.forEach(I=>{I.currentSnapshot.forEach((N,U)=>m.set(U,N))});let C=VS(t).map(I=>new Map(I));C=jS(e,C,m);let E=wT(e,C);return new Mc(e,C,f,E)}};var bc="@",nv="@.disabled",Rc=class{constructor(e,t,i,s){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=s,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,s=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,s){this.delegate.setAttribute(e,t,i,s)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,s){this.delegate.setStyle(e,t,i,s)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==bc&&t==nv?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Jf=class extends Rc{constructor(e,t,i,s,o){super(t,i,s,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==bc?t.charAt(1)=="."&&t==nv?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==bc){let s=bT(e),o=t.slice(1),l="";return o.charAt(0)!=bc&&([o,l]=ET(o)),this.engine.listen(this.namespaceId,s,o,l,h=>{let f=h._data||-1;this.factory.scheduleListenerCallback(f,i,h)})}return this.delegate.listen(e,t,i)}};function bT(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function ET(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var kc=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(s,o)=>{o?.removeChild(null,s)}}createRenderer(e,t){let i="",s=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let m=this._rendererCache,y=m.get(s);if(!y){let C=()=>m.delete(s);y=new Rc(i,s,this.engine,C),m.set(s,y)}return y}let o=t.id,l=t.id+"-"+this._currentId;this._currentId++,this.engine.register(l,e);let h=m=>{Array.isArray(m)?m.forEach(h):this.engine.registerTrigger(o,l,e,m.name,m)};return t.data.animation.forEach(h),new Jf(this,l,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let s=this._animationCallbacksBuffer;s.length==0&&queueMicrotask(()=>{this._zone.run(()=>{s.forEach(o=>{let[l,h]=o;l(h)}),this._animationCallbacksBuffer=[]})}),s.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var TT=(()=>{class n extends wo{constructor(t,i,s){super(t,i,s)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(Pe(Ht),Pe(ds),Pe(fs))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();function DT(){return new Tc}function IT(n,e,t){return new kc(n,e,t)}var iv=[{provide:fs,useFactory:DT},{provide:wo,useClass:TT},{provide:Uu,useFactory:IT,deps:[Qu,wo,_n]}],AT=[{provide:ds,useFactory:()=>new xc},{provide:md,useValue:"BrowserAnimations"},...iv],xM=[{provide:ds,useClass:ip},{provide:md,useValue:"NoopAnimations"},...iv];function rv(){return yd("NgEagerAnimations"),[...AT]}var sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ov={};var br,ap;(function(){var n;function e(M,b){function S(){}S.prototype=b.prototype,M.D=b.prototype,M.prototype=new S,M.prototype.constructor=M,M.C=function(A,x,R){for(var D=Array(arguments.length-2),et=2;et<arguments.length;et++)D[et-2]=arguments[et];return b.prototype[x].apply(A,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(M,b,S){S||(S=0);var A=Array(16);if(typeof b=="string")for(var x=0;16>x;++x)A[x]=b.charCodeAt(S++)|b.charCodeAt(S++)<<8|b.charCodeAt(S++)<<16|b.charCodeAt(S++)<<24;else for(x=0;16>x;++x)A[x]=b[S++]|b[S++]<<8|b[S++]<<16|b[S++]<<24;b=M.g[0],S=M.g[1],x=M.g[2];var R=M.g[3],D=b+(R^S&(x^R))+A[0]+3614090360&4294967295;b=S+(D<<7&4294967295|D>>>25),D=R+(x^b&(S^x))+A[1]+3905402710&4294967295,R=b+(D<<12&4294967295|D>>>20),D=x+(S^R&(b^S))+A[2]+606105819&4294967295,x=R+(D<<17&4294967295|D>>>15),D=S+(b^x&(R^b))+A[3]+3250441966&4294967295,S=x+(D<<22&4294967295|D>>>10),D=b+(R^S&(x^R))+A[4]+4118548399&4294967295,b=S+(D<<7&4294967295|D>>>25),D=R+(x^b&(S^x))+A[5]+1200080426&4294967295,R=b+(D<<12&4294967295|D>>>20),D=x+(S^R&(b^S))+A[6]+2821735955&4294967295,x=R+(D<<17&4294967295|D>>>15),D=S+(b^x&(R^b))+A[7]+4249261313&4294967295,S=x+(D<<22&4294967295|D>>>10),D=b+(R^S&(x^R))+A[8]+1770035416&4294967295,b=S+(D<<7&4294967295|D>>>25),D=R+(x^b&(S^x))+A[9]+2336552879&4294967295,R=b+(D<<12&4294967295|D>>>20),D=x+(S^R&(b^S))+A[10]+4294925233&4294967295,x=R+(D<<17&4294967295|D>>>15),D=S+(b^x&(R^b))+A[11]+2304563134&4294967295,S=x+(D<<22&4294967295|D>>>10),D=b+(R^S&(x^R))+A[12]+1804603682&4294967295,b=S+(D<<7&4294967295|D>>>25),D=R+(x^b&(S^x))+A[13]+4254626195&4294967295,R=b+(D<<12&4294967295|D>>>20),D=x+(S^R&(b^S))+A[14]+2792965006&4294967295,x=R+(D<<17&4294967295|D>>>15),D=S+(b^x&(R^b))+A[15]+1236535329&4294967295,S=x+(D<<22&4294967295|D>>>10),D=b+(x^R&(S^x))+A[1]+4129170786&4294967295,b=S+(D<<5&4294967295|D>>>27),D=R+(S^x&(b^S))+A[6]+3225465664&4294967295,R=b+(D<<9&4294967295|D>>>23),D=x+(b^S&(R^b))+A[11]+643717713&4294967295,x=R+(D<<14&4294967295|D>>>18),D=S+(R^b&(x^R))+A[0]+3921069994&4294967295,S=x+(D<<20&4294967295|D>>>12),D=b+(x^R&(S^x))+A[5]+3593408605&4294967295,b=S+(D<<5&4294967295|D>>>27),D=R+(S^x&(b^S))+A[10]+38016083&4294967295,R=b+(D<<9&4294967295|D>>>23),D=x+(b^S&(R^b))+A[15]+3634488961&4294967295,x=R+(D<<14&4294967295|D>>>18),D=S+(R^b&(x^R))+A[4]+3889429448&4294967295,S=x+(D<<20&4294967295|D>>>12),D=b+(x^R&(S^x))+A[9]+568446438&4294967295,b=S+(D<<5&4294967295|D>>>27),D=R+(S^x&(b^S))+A[14]+3275163606&4294967295,R=b+(D<<9&4294967295|D>>>23),D=x+(b^S&(R^b))+A[3]+4107603335&4294967295,x=R+(D<<14&4294967295|D>>>18),D=S+(R^b&(x^R))+A[8]+1163531501&4294967295,S=x+(D<<20&4294967295|D>>>12),D=b+(x^R&(S^x))+A[13]+2850285829&4294967295,b=S+(D<<5&4294967295|D>>>27),D=R+(S^x&(b^S))+A[2]+4243563512&4294967295,R=b+(D<<9&4294967295|D>>>23),D=x+(b^S&(R^b))+A[7]+1735328473&4294967295,x=R+(D<<14&4294967295|D>>>18),D=S+(R^b&(x^R))+A[12]+2368359562&4294967295,S=x+(D<<20&4294967295|D>>>12),D=b+(S^x^R)+A[5]+4294588738&4294967295,b=S+(D<<4&4294967295|D>>>28),D=R+(b^S^x)+A[8]+2272392833&4294967295,R=b+(D<<11&4294967295|D>>>21),D=x+(R^b^S)+A[11]+1839030562&4294967295,x=R+(D<<16&4294967295|D>>>16),D=S+(x^R^b)+A[14]+4259657740&4294967295,S=x+(D<<23&4294967295|D>>>9),D=b+(S^x^R)+A[1]+2763975236&4294967295,b=S+(D<<4&4294967295|D>>>28),D=R+(b^S^x)+A[4]+1272893353&4294967295,R=b+(D<<11&4294967295|D>>>21),D=x+(R^b^S)+A[7]+4139469664&4294967295,x=R+(D<<16&4294967295|D>>>16),D=S+(x^R^b)+A[10]+3200236656&4294967295,S=x+(D<<23&4294967295|D>>>9),D=b+(S^x^R)+A[13]+681279174&4294967295,b=S+(D<<4&4294967295|D>>>28),D=R+(b^S^x)+A[0]+3936430074&4294967295,R=b+(D<<11&4294967295|D>>>21),D=x+(R^b^S)+A[3]+3572445317&4294967295,x=R+(D<<16&4294967295|D>>>16),D=S+(x^R^b)+A[6]+76029189&4294967295,S=x+(D<<23&4294967295|D>>>9),D=b+(S^x^R)+A[9]+3654602809&4294967295,b=S+(D<<4&4294967295|D>>>28),D=R+(b^S^x)+A[12]+3873151461&4294967295,R=b+(D<<11&4294967295|D>>>21),D=x+(R^b^S)+A[15]+530742520&4294967295,x=R+(D<<16&4294967295|D>>>16),D=S+(x^R^b)+A[2]+3299628645&4294967295,S=x+(D<<23&4294967295|D>>>9),D=b+(x^(S|~R))+A[0]+4096336452&4294967295,b=S+(D<<6&4294967295|D>>>26),D=R+(S^(b|~x))+A[7]+1126891415&4294967295,R=b+(D<<10&4294967295|D>>>22),D=x+(b^(R|~S))+A[14]+2878612391&4294967295,x=R+(D<<15&4294967295|D>>>17),D=S+(R^(x|~b))+A[5]+4237533241&4294967295,S=x+(D<<21&4294967295|D>>>11),D=b+(x^(S|~R))+A[12]+1700485571&4294967295,b=S+(D<<6&4294967295|D>>>26),D=R+(S^(b|~x))+A[3]+2399980690&4294967295,R=b+(D<<10&4294967295|D>>>22),D=x+(b^(R|~S))+A[10]+4293915773&4294967295,x=R+(D<<15&4294967295|D>>>17),D=S+(R^(x|~b))+A[1]+2240044497&4294967295,S=x+(D<<21&4294967295|D>>>11),D=b+(x^(S|~R))+A[8]+1873313359&4294967295,b=S+(D<<6&4294967295|D>>>26),D=R+(S^(b|~x))+A[15]+4264355552&4294967295,R=b+(D<<10&4294967295|D>>>22),D=x+(b^(R|~S))+A[6]+2734768916&4294967295,x=R+(D<<15&4294967295|D>>>17),D=S+(R^(x|~b))+A[13]+1309151649&4294967295,S=x+(D<<21&4294967295|D>>>11),D=b+(x^(S|~R))+A[4]+4149444226&4294967295,b=S+(D<<6&4294967295|D>>>26),D=R+(S^(b|~x))+A[11]+3174756917&4294967295,R=b+(D<<10&4294967295|D>>>22),D=x+(b^(R|~S))+A[2]+718787259&4294967295,x=R+(D<<15&4294967295|D>>>17),D=S+(R^(x|~b))+A[9]+3951481745&4294967295,M.g[0]=M.g[0]+b&4294967295,M.g[1]=M.g[1]+(x+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+x&4294967295,M.g[3]=M.g[3]+R&4294967295}i.prototype.u=function(M,b){b===void 0&&(b=M.length);for(var S=b-this.blockSize,A=this.B,x=this.h,R=0;R<b;){if(x==0)for(;R<=S;)s(this,M,R),R+=this.blockSize;if(typeof M=="string"){for(;R<b;)if(A[x++]=M.charCodeAt(R++),x==this.blockSize){s(this,A),x=0;break}}else for(;R<b;)if(A[x++]=M[R++],x==this.blockSize){s(this,A),x=0;break}}this.h=x,this.o+=b},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var b=1;b<M.length-8;++b)M[b]=0;var S=8*this.o;for(b=M.length-8;b<M.length;++b)M[b]=S&255,S/=256;for(this.u(M),M=Array(16),b=S=0;4>b;++b)for(var A=0;32>A;A+=8)M[S++]=this.g[b]>>>A&255;return M};function o(M,b){var S=h;return Object.prototype.hasOwnProperty.call(S,M)?S[M]:S[M]=b(M)}function l(M,b){this.h=b;for(var S=[],A=!0,x=M.length-1;0<=x;x--){var R=M[x]|0;A&&R==b||(S[x]=R,A=!1)}this.g=S}var h={};function f(M){return-128<=M&&128>M?o(M,function(b){return new l([b|0],0>b?-1:0)}):new l([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return C;if(0>M)return z(m(-M));for(var b=[],S=1,A=0;M>=S;A++)b[A]=M/S|0,S*=4294967296;return new l(b,0)}function y(M,b){if(M.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(M.charAt(0)=="-")return z(y(M.substring(1),b));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=m(Math.pow(b,8)),A=C,x=0;x<M.length;x+=8){var R=Math.min(8,M.length-x),D=parseInt(M.substring(x,x+R),b);8>R?(R=m(Math.pow(b,R)),A=A.j(R).add(m(D))):(A=A.j(S),A=A.add(m(D)))}return A}var C=f(0),E=f(1),I=f(16777216);n=l.prototype,n.m=function(){if(U(this))return-z(this).m();for(var M=0,b=1,S=0;S<this.g.length;S++){var A=this.i(S);M+=(0<=A?A:4294967296+A)*b,b*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(N(this))return"0";if(U(this))return"-"+z(this).toString(M);for(var b=m(Math.pow(M,6)),S=this,A="";;){var x=ve(S,b).g;S=Y(S,x.j(b));var R=((0<S.g.length?S.g[0]:S.h)>>>0).toString(M);if(S=x,N(S))return R+A;for(;6>R.length;)R="0"+R;A=R+A}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function N(M){if(M.h!=0)return!1;for(var b=0;b<M.g.length;b++)if(M.g[b]!=0)return!1;return!0}function U(M){return M.h==-1}n.l=function(M){return M=Y(this,M),U(M)?-1:N(M)?0:1};function z(M){for(var b=M.g.length,S=[],A=0;A<b;A++)S[A]=~M.g[A];return new l(S,~M.h).add(E)}n.abs=function(){return U(this)?z(this):this},n.add=function(M){for(var b=Math.max(this.g.length,M.g.length),S=[],A=0,x=0;x<=b;x++){var R=A+(this.i(x)&65535)+(M.i(x)&65535),D=(R>>>16)+(this.i(x)>>>16)+(M.i(x)>>>16);A=D>>>16,R&=65535,D&=65535,S[x]=D<<16|R}return new l(S,S[S.length-1]&-2147483648?-1:0)};function Y(M,b){return M.add(z(b))}n.j=function(M){if(N(this)||N(M))return C;if(U(this))return U(M)?z(this).j(z(M)):z(z(this).j(M));if(U(M))return z(this.j(z(M)));if(0>this.l(I)&&0>M.l(I))return m(this.m()*M.m());for(var b=this.g.length+M.g.length,S=[],A=0;A<2*b;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(var x=0;x<M.g.length;x++){var R=this.i(A)>>>16,D=this.i(A)&65535,et=M.i(x)>>>16,nn=M.i(x)&65535;S[2*A+2*x]+=D*nn,ne(S,2*A+2*x),S[2*A+2*x+1]+=R*nn,ne(S,2*A+2*x+1),S[2*A+2*x+1]+=D*et,ne(S,2*A+2*x+1),S[2*A+2*x+2]+=R*et,ne(S,2*A+2*x+2)}for(A=0;A<b;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=b;A<2*b;A++)S[A]=0;return new l(S,0)};function ne(M,b){for(;(M[b]&65535)!=M[b];)M[b+1]+=M[b]>>>16,M[b]&=65535,b++}function he(M,b){this.g=M,this.h=b}function ve(M,b){if(N(b))throw Error("division by zero");if(N(M))return new he(C,C);if(U(M))return b=ve(z(M),b),new he(z(b.g),z(b.h));if(U(b))return b=ve(M,z(b)),new he(z(b.g),b.h);if(30<M.g.length){if(U(M)||U(b))throw Error("slowDivide_ only works with positive integers.");for(var S=E,A=b;0>=A.l(M);)S=it(S),A=it(A);var x=Re(S,1),R=Re(A,1);for(A=Re(A,2),S=Re(S,2);!N(A);){var D=R.add(A);0>=D.l(M)&&(x=x.add(S),R=D),A=Re(A,1),S=Re(S,1)}return b=Y(M,x.j(b)),new he(x,b)}for(x=C;0<=M.l(b);){for(S=Math.max(1,Math.floor(M.m()/b.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),R=m(S),D=R.j(b);U(D)||0<D.l(M);)S-=A,R=m(S),D=R.j(b);N(R)&&(R=E),x=x.add(R),M=Y(M,D)}return new he(x,M)}n.A=function(M){return ve(this,M).h},n.and=function(M){for(var b=Math.max(this.g.length,M.g.length),S=[],A=0;A<b;A++)S[A]=this.i(A)&M.i(A);return new l(S,this.h&M.h)},n.or=function(M){for(var b=Math.max(this.g.length,M.g.length),S=[],A=0;A<b;A++)S[A]=this.i(A)|M.i(A);return new l(S,this.h|M.h)},n.xor=function(M){for(var b=Math.max(this.g.length,M.g.length),S=[],A=0;A<b;A++)S[A]=this.i(A)^M.i(A);return new l(S,this.h^M.h)};function it(M){for(var b=M.g.length+1,S=[],A=0;A<b;A++)S[A]=M.i(A)<<1|M.i(A-1)>>>31;return new l(S,M.h)}function Re(M,b){var S=b>>5;b%=32;for(var A=M.g.length-S,x=[],R=0;R<A;R++)x[R]=0<b?M.i(R+S)>>>b|M.i(R+S+1)<<32-b:M.i(R+S);return new l(x,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ap=ov.Md5=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,br=ov.Integer=l}).apply(typeof sv<"u"?sv:typeof self<"u"?self:typeof window<"u"?window:{});var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zi={};var lp,PT,Co,up,_l,Lc,cp,hp,dp;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oc=="object"&&Oc];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function s(u,p){if(p)e:{var _=i;u=u.split(".");for(var w=0;w<u.length-1;w++){var k=u[w];if(!(k in _))break e;_=_[k]}u=u[u.length-1],w=_[u],p=p(w),p!=w&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var _=0,w=!1,k={next:function(){if(!w&&_<u.length){var B=_++;return{value:p(B,u[B]),done:!1}}return w=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}s("Array.prototype.values",function(u){return u||function(){return o(this,function(p,_){return _})}});var l=l||{},h=this||self;function f(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function y(u,p,_){return u.call.apply(u.bind,arguments)}function C(u,p,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,w),u.apply(p,k)}}return function(){return u.apply(p,arguments)}}function E(u,p,_){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:C,E.apply(null,arguments)}function I(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function N(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,k,B){for(var Q=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)Q[ke-2]=arguments[ke];return p.prototype[k].apply(w,Q)}}function U(u){let p=u.length;if(0<p){let _=Array(p);for(let w=0;w<p;w++)_[w]=u[w];return _}return[]}function z(u,p){for(let _=1;_<arguments.length;_++){let w=arguments[_];if(f(w)){let k=u.length||0,B=w.length||0;u.length=k+B;for(let Q=0;Q<B;Q++)u[k+Q]=w[Q]}else u.push(w)}}class Y{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ne(u){return/^[\s\xa0]*$/.test(u)}function he(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function ve(u){return ve[" "](u),u}ve[" "]=function(){};var it=he().indexOf("Gecko")!=-1&&!(he().toLowerCase().indexOf("webkit")!=-1&&he().indexOf("Edge")==-1)&&!(he().indexOf("Trident")!=-1||he().indexOf("MSIE")!=-1)&&he().indexOf("Edge")==-1;function Re(u,p,_){for(let w in u)p.call(_,u[w],w,u)}function M(u,p){for(let _ in u)p.call(void 0,u[_],_,u)}function b(u){let p={};for(let _ in u)p[_]=u[_];return p}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,p){let _,w;for(let k=1;k<arguments.length;k++){w=arguments[k];for(_ in w)u[_]=w[_];for(let B=0;B<S.length;B++)_=S[B],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function x(u){var p=1;u=u.split(":");let _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function R(u){h.setTimeout(()=>{throw u},0)}function D(){var u=oe;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class et{constructor(){this.h=this.g=null}add(p,_){let w=nn.get();w.set(p,_),this.h?this.h.next=w:this.g=w,this.h=w}}var nn=new Y(()=>new q,u=>u.reset());class q{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,K=!1,oe=new et,Fe=()=>{let u=h.Promise.resolve(void 0);ie=()=>{u.then(Je)}};var Je=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(_){R(_)}var p=nn;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}K=!1};function De(){this.s=this.s,this.C=this.C}De.prototype.s=!1,De.prototype.ma=function(){this.s||(this.s=!0,this.N())},De.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return u}();function Dt(u,p){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(it){e:{try{ve(p.nodeName);var k=!0;break e}catch{}k=!1}k||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Dn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Dt.aa.h.call(this)}}N(Dt,fe);var Dn={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),un=0;function It(u,p,_,w,k){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!w,this.ha=k,this.key=++un,this.da=this.fa=!1}function Qt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function In(u){this.src=u,this.g={},this.h=0}In.prototype.add=function(u,p,_,w,k){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var Q=Rs(u,p,w,k);return-1<Q?(p=u[Q],_||(p.fa=!1)):(p=new It(p,this.src,B,!!w,k),p.fa=_,u.push(p)),p};function Zo(u,p){var _=p.type;if(_ in u.g){var w=u.g[_],k=Array.prototype.indexOf.call(w,p,void 0),B;(B=0<=k)&&Array.prototype.splice.call(w,k,1),B&&(Qt(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Rs(u,p,_,w){for(var k=0;k<u.length;++k){var B=u[k];if(!B.da&&B.listener==p&&B.capture==!!_&&B.ha==w)return k}return-1}var ks="closure_lm_"+(1e6*Math.random()|0),kr={};function Or(u,p,_,w,k){if(w&&w.once)return Os(u,p,_,w,k);if(Array.isArray(p)){for(var B=0;B<p.length;B++)Or(u,p[B],_,w,k);return null}return _=Ns(_),u&&u[rt]?u.K(p,_,m(w)?!!w.capture:!!w,k):tu(u,p,_,!1,w,k)}function tu(u,p,_,w,k,B){if(!p)throw Error("Invalid event type");var Q=m(k)?!!k.capture:!!k,ke=Lr(u);if(ke||(u[ks]=ke=new In(u)),_=ke.add(p,_,w,Q,B),_.proxy)return _;if(w=nu(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)ce||(k=Q),k===void 0&&(k=!1),u.addEventListener(p.toString(),w,k);else if(u.attachEvent)u.attachEvent(iu(p.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function nu(){function u(_){return p.call(u.src,u.listener,_)}let p=Qh;return u}function Os(u,p,_,w,k){if(Array.isArray(p)){for(var B=0;B<p.length;B++)Os(u,p[B],_,w,k);return null}return _=Ns(_),u&&u[rt]?u.L(p,_,m(w)?!!w.capture:!!w,k):tu(u,p,_,!0,w,k)}function Qo(u,p,_,w,k){if(Array.isArray(p))for(var B=0;B<p.length;B++)Qo(u,p[B],_,w,k);else w=m(w)?!!w.capture:!!w,_=Ns(_),u&&u[rt]?(u=u.i,p=String(p).toString(),p in u.g&&(B=u.g[p],_=Rs(B,_,w,k),-1<_&&(Qt(B[_]),Array.prototype.splice.call(B,_,1),B.length==0&&(delete u.g[p],u.h--)))):u&&(u=Lr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Rs(p,_,w,k)),(_=-1<u?p[u]:null)&&Ls(_))}function Ls(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[rt])Zo(p.i,u);else{var _=u.type,w=u.proxy;p.removeEventListener?p.removeEventListener(_,w,u.capture):p.detachEvent?p.detachEvent(iu(_),w):p.addListener&&p.removeListener&&p.removeListener(w),(_=Lr(p))?(Zo(_,u),_.h==0&&(_.src=null,p[ks]=null)):Qt(u)}}}function iu(u){return u in kr?kr[u]:kr[u]="on"+u}function Qh(u,p){if(u.da)u=!0;else{p=new Dt(p,this);var _=u.listener,w=u.ha||u.src;u.fa&&Ls(u),u=_.call(w,p)}return u}function Lr(u){return u=u[ks],u instanceof In?u:null}var Fs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ns(u){return typeof u=="function"?u:(u[Fs]||(u[Fs]=function(p){return u.handleEvent(p)}),u[Fs])}function At(){De.call(this),this.i=new In(this),this.M=this,this.F=null}N(At,De),At.prototype[rt]=!0,At.prototype.removeEventListener=function(u,p,_,w){Qo(this,u,p,_,w)};function Pt(u,p){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=p.type||p,typeof p=="string")p=new fe(p,u);else if(p instanceof fe)p.target=p.target||u;else{var k=p;p=new fe(w,u),A(p,k)}if(k=!0,_)for(var B=_.length-1;0<=B;B--){var Q=p.g=_[B];k=Fr(Q,w,!0,p)&&k}if(Q=p.g=u,k=Fr(Q,w,!0,p)&&k,k=Fr(Q,w,!1,p)&&k,_)for(B=0;B<_.length;B++)Q=p.g=_[B],k=Fr(Q,w,!1,p)&&k}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],w=0;w<_.length;w++)Qt(_[w]);delete u.g[p],u.h--}}this.F=null},At.prototype.K=function(u,p,_,w){return this.i.add(String(u),p,!1,_,w)},At.prototype.L=function(u,p,_,w){return this.i.add(String(u),p,!0,_,w)};function Fr(u,p,_,w){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var k=!0,B=0;B<p.length;++B){var Q=p[B];if(Q&&!Q.da&&Q.capture==_){var ke=Q.listener,at=Q.ha||Q.src;Q.fa&&Zo(u.i,Q),k=ke.call(at,w)!==!1&&k}}return k&&!w.defaultPrevented}function ru(u,p,_){if(typeof u=="function")_&&(u=E(u,_));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(u,p||0)}function Yo(u){u.g=ru(()=>{u.g=null,u.i&&(u.i=!1,Yo(u))},u.l);let p=u.h;u.h=null,u.m.apply(null,p)}class Xo extends De{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Yo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(u){De.call(this),this.h=u,this.g={}}N(tr,De);var su=[];function nr(u){Re(u.g,function(p,_){this.g.hasOwnProperty(_)&&Ls(p)},u),u.g={}}tr.prototype.N=function(){tr.aa.N.call(this),nr(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jo=h.JSON.stringify,Yh=h.JSON.parse,ou=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Vs(){}Vs.prototype.h=null;function ea(u){return u.h||(u.h=u.i())}function au(){}var Nr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ta(){fe.call(this,"d")}N(ta,fe);function na(){fe.call(this,"c")}N(na,fe);var Ti={},lu=null;function ir(){return lu=lu||new At}Ti.La="serverreachability";function uu(u){fe.call(this,Ti.La,u)}N(uu,fe);function Vr(u){let p=ir();Pt(p,new uu(p))}Ti.STAT_EVENT="statevent";function cu(u,p){fe.call(this,Ti.STAT_EVENT,u),this.stat=p}N(cu,fe);function Ft(u){let p=ir();Pt(p,new cu(p,u))}Ti.Ma="timingevent";function cn(u,p){fe.call(this,Ti.Ma,u),this.size=p}N(cn,fe);function re(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function rr(){this.g=!0}rr.prototype.xa=function(){this.g=!1};function hu(u,p,_,w,k,B){u.info(function(){if(u.g)if(B)for(var Q="",ke=B.split("&"),at=0;at<ke.length;at++){var Ue=ke[at].split("=");if(1<Ue.length){var nt=Ue[0];Ue=Ue[1];var Mt=nt.split("_");Q=2<=Mt.length&&Mt[1]=="type"?Q+(nt+"="+Ue+"&"):Q+(nt+"=redacted&")}}else Q=null;else Q=B;return"XMLHTTP REQ ("+w+") [attempt "+k+"]: "+p+`
`+_+`
`+Q})}function du(u,p,_,w,k,B,Q){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+k+"]: "+p+`
`+_+`
`+B+" "+Q})}function Di(u,p,_,w){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+fu(u,_)+(w?" "+w:"")})}function ia(u,p){u.info(function(){return"TIMEOUT: "+p})}rr.prototype.info=function(){};function fu(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var k=w[1];if(Array.isArray(k)&&!(1>k.length)){var B=k[0];if(B!="noop"&&B!="stop"&&B!="close")for(var Q=1;Q<k.length;Q++)k[Q]=""}}}}return Jo(_)}catch{return p}}var Un={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ra={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sa;function Bs(){}N(Bs,Vs),Bs.prototype.g=function(){return new XMLHttpRequest},Bs.prototype.i=function(){return{}},sa=new Bs;function Yn(u,p,_,w){this.j=u,this.i=p,this.l=_,this.R=w||1,this.U=new tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pu}function pu(){this.i=null,this.g="",this.h=!1}var oa={},aa={};function sr(u,p,_){u.L=1,u.v=ar(Nt(p)),u.m=_,u.P=!0,mu(u,null)}function mu(u,p){u.F=Date.now(),Us(u),u.A=Nt(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Ze(_.i,"t",w),u.C=0,_=u.j.J,u.h=new pu,u.g=Qr(u.j,_?p:null,!u.m),0<u.O&&(u.M=new Xo(E(u.Y,u,u.g),u.O)),p=u.U,_=u.g,w=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(su[0]=k.toString()),k=su);for(var B=0;B<k.length;B++){var Q=Or(_,k[B],w||p.handleEvent,!1,p.h||p);if(!Q)break;p.g[Q.key]=Q}p=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Vr(),hu(u.i,u.u,u.A,u.l,u.R,u.m)}Yn.prototype.ca=function(u){u=u.target;let p=this.M;p&&dn(u)==3?p.j():this.Y(u)},Yn.prototype.Y=function(u){try{if(u==this.g)e:{let Mt=dn(this.g);var p=this.g.Ba();let pn=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||Mt!=4||p==7||(p==8||0>=pn?Vr(3):Vr(2)),Br(this);var _=this.g.Z();this.X=_;t:if(gu(this)){var w=bu(this.g);u="";var k=w.length,B=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),zn(this);var Q="";break t}this.h.i=new h.TextDecoder}for(p=0;p<k;p++)this.h.h=!0,u+=this.h.i.decode(w[p],{stream:!(B&&p==k-1)});w.length=0,this.h.g+=u,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=_==200,du(this.i,this.u,this.A,this.l,this.R,Mt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,at=this.g;if((ke=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(ke)){var Ue=ke;break t}}Ue=null}if(_=Ue)Di(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zs(this,_);else{this.o=!1,this.s=3,Ft(12),Xn(this),zn(this);break e}}if(this.P){_=!0;let mn;for(;!this.J&&this.C<Q.length;)if(mn=Xh(this,Q),mn==aa){Mt==4&&(this.s=4,Ft(14),_=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==oa){this.s=4,Ft(15),Di(this.i,this.l,Q,"[Invalid Chunk]"),_=!1;break}else Di(this.i,this.l,mn,null),zs(this,mn);if(gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||Q.length!=0||this.h.h||(this.s=1,Ft(16),_=!1),this.o=this.o&&_,!_)Di(this.i,this.l,Q,"[Invalid Chunked Response]"),Xn(this),zn(this);else if(0<Q.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Ks(nt),nt.M=!0,Ft(11))}}else Di(this.i,this.l,Q,null),zs(this,Q);Mt==4&&Xn(this),this.o&&!this.J&&(Mt==4?Du(this.j,this):(this.o=!1,Us(this)))}else Eu(this.g),_==400&&0<Q.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Xn(this),zn(this)}}}catch{}finally{}};function gu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xh(u,p){var _=u.C,w=p.indexOf(`
`,_);return w==-1?aa:(_=Number(p.substring(_,w)),isNaN(_)?oa:(w+=1,w+_>p.length?aa:(p=p.slice(w,w+_),u.C=w+_,p)))}Yn.prototype.cancel=function(){this.J=!0,Xn(this)};function Us(u){u.S=Date.now()+u.I,_u(u,u.I)}function _u(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=re(E(u.ba,u),p)}function Br(u){u.B&&(h.clearTimeout(u.B),u.B=null)}Yn.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(ia(this.i,this.A),this.L!=2&&(Vr(),Ft(17)),Xn(this),this.s=2,zn(this)):_u(this,this.S-u)};function zn(u){u.j.G==0||u.J||Du(u.j,u)}function Xn(u){Br(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,nr(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function zs(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Jn(_.h,u))){if(!u.K&&Jn(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var k=w;if(k[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Ws(_),qs(_);else break e;va(_),Ft(18)}}else _.za=k[1],0<_.za-_.T&&37500>k[2]&&_.F&&_.v==0&&!_.C&&(_.C=re(E(_.Za,_),6e3));if(1>=zr(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Mi(_,11)}else if((u.K||_.g==u)&&Ws(_),!ne(p))for(k=_.Da.g.parse(p),p=0;p<k.length;p++){let Ue=k[p];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];let nt=Ue[3];nt!=null&&(_.la=nt,_.j.info("VER="+_.la));let Mt=Ue[4];Mt!=null&&(_.Aa=Mt,_.j.info("SVER="+_.Aa));let pn=Ue[5];pn!=null&&typeof pn=="number"&&0<pn&&(w=1.5*pn,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;let mn=u.g;if(mn){let ii=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var B=w.h;B.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(ei(B,B.h),B.h=null))}if(w.D){let Ys=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ys&&(w.ya=Ys,Ge(w.I,w.D,Ys))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var Q=u;if(w.qa=ba(w,w.J?w.ia:null,w.W),Q.K){js(w.h,Q);var ke=Q,at=w.L;at&&(ke.I=at),ke.B&&(Br(ke),Us(ke)),w.g=Q}else Hs(w);0<_.i.length&&Gs(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Mi(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Mi(_,7):Zr(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}Vr(4)}catch{}}var Ur=class{constructor(u,p){this.g=u,this.map=p}};function Be(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function zr(u){return u.h?1:u.g?u.g.size:0}function Jn(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ei(u,p){u.g?u.g.add(p):u.h=p}function js(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Be.prototype.cancel=function(){if(this.i=Ie(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Ie(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(let _ of u.g.values())p=p.concat(_.D);return p}return U(u.i)}function pt(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(f(u)){for(var p=[],_=u.length,w=0;w<_;w++)p.push(u[w]);return p}p=[],_=0;for(w in u)p[_++]=u[w];return p}function la(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(f(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(let w in u)p[_++]=w;return p}}}function jr(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(f(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=la(u),w=pt(u),k=w.length,B=0;B<k;B++)p.call(void 0,w[B],_&&_[B],u)}var Yt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jh(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),k=null;if(0<=w){var B=u[_].substring(0,w);k=u[_].substring(w+1)}else B=u[_];p(B,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function An(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof An){this.h=u.h,st(this,u.j),this.o=u.o,this.g=u.g,Pn(this,u.s),this.l=u.l;var p=u.i,_=new Ai;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),or(this,_),this.m=u.m}else u&&(p=String(u).match(Yt))?(this.h=!1,st(this,p[1]||"",!0),this.o=jn(p[2]||""),this.g=jn(p[3]||"",!0),Pn(this,p[4]),this.l=jn(p[5]||"",!0),or(this,p[6]||"",!0),this.m=jn(p[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}An.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Ii(p,$r,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ii(p,$r,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ii(_,_.charAt(0)=="/"?ha:ca,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ii(_,yu)),u.join("")};function Nt(u){return new An(u)}function st(u,p,_){u.j=_?jn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Pn(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function or(u,p,_){p instanceof Ai?(u.i=p,da(u.i,u.h)):(_||(p=Ii(p,$s)),u.i=new Ai(p,u.h))}function Ge(u,p,_){u.i.set(p,_)}function ar(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function jn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ii(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,ua),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ua(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $r=/[#\/\?@]/g,ca=/[#\?:]/g,ha=/[#\?]/g,$s=/[#\?@]/g,yu=/#/g;function Ai(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function ti(u){u.g||(u.g=new Map,u.h=0,u.i&&Jh(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=Ai.prototype,n.add=function(u,p){ti(this),this.i=null,u=Pi(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Ee(u,p){ti(u),p=Pi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function hn(u,p){return ti(u),p=Pi(u,p),u.g.has(p)}n.forEach=function(u,p){ti(this),this.g.forEach(function(_,w){_.forEach(function(k){u.call(p,k,w,this)},this)},this)},n.na=function(){ti(this);let u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let w=0;w<p.length;w++){let k=u[w];for(let B=0;B<k.length;B++)_.push(p[w])}return _},n.V=function(u){ti(this);let p=[];if(typeof u=="string")hn(this,u)&&(p=p.concat(this.g.get(Pi(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},n.set=function(u,p){return ti(this),this.i=null,u=Pi(this,u),hn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},n.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Ze(u,p,_){Ee(u,p),0<_.length&&(u.i=null,u.g.set(Pi(u,p),U(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var w=p[_];let B=encodeURIComponent(String(w)),Q=this.V(w);for(w=0;w<Q.length;w++){var k=B;Q[w]!==""&&(k+="="+encodeURIComponent(String(Q[w]))),u.push(k)}}return this.i=u.join("&")};function Pi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function da(u,p){p&&!u.j&&(ti(u),u.i=null,u.g.forEach(function(_,w){var k=w.toLowerCase();w!=k&&(Ee(this,w),Ze(this,k,_))},u)),u.j=p}function fa(u,p){let _=new rr;if(h.Image){let w=new Image;w.onload=I(zt,_,"TestLoadImage: loaded",!0,p,w),w.onerror=I(zt,_,"TestLoadImage: error",!1,p,w),w.onabort=I(zt,_,"TestLoadImage: abort",!1,p,w),w.ontimeout=I(zt,_,"TestLoadImage: timeout",!1,p,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else p(!1)}function pa(u,p){let _=new rr,w=new AbortController,k=setTimeout(()=>{w.abort(),zt(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:w.signal}).then(B=>{clearTimeout(k),B.ok?zt(_,"TestPingServer: ok",!0,p):zt(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(k),zt(_,"TestPingServer: error",!1,p)})}function zt(u,p,_,w,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),w(_)}catch{}}function ma(){this.g=new ou}function qr(u,p,_){let w=_||"";try{jr(u,function(k,B){let Q=k;m(k)&&(Q=Jo(k)),p.push(w+B+"="+encodeURIComponent(Q))})}catch(k){throw p.push(w+"type="+encodeURIComponent("_badmap")),k}}function mt(u){this.l=u.Ub||null,this.j=u.eb||!1}N(mt,Vs),mt.prototype.g=function(){return new Mn(this.l,this.j)},mt.prototype.i=function(u){return function(){return u}}({});function Mn(u,p){At.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Mn,At),n=Mn.prototype,n.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Gr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lr(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Gr(this)),this.g&&(this.readyState=3,Gr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ga(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ga(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?lr(this):Gr(this),this.readyState==3&&ga(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,lr(this))},n.Qa=function(u){this.g&&(this.response=u,lr(this))},n.ga=function(){this.g&&lr(this)};function lr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Gr(u)}n.setRequestHeader=function(u,p){this.u.append(u,p)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Gr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function _a(u){let p="";return Re(u,function(_,w){p+=w,p+=":",p+=_,p+=`\r
`}),p}function Hr(u,p,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=_a(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ge(u,p,_))}function ot(u){At.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(ot,At);var vu=/^https?$/i,Ne=["POST","PUT"];n=ot.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,p,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sa.g(),this.v=this.o?ea(this.o):ea(sa),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(B){wu(this,B);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var k in w)_.set(k,w[k]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let B of w.keys())_.set(B,w.get(B));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),k=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ne,p,void 0))||w||k||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,Q]of _)this.g.setRequestHeader(B,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cu(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){wu(this,B)}};function wu(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,rn(u),Kr(u)}function rn(u){u.A||(u.A=!0,Pt(u,"complete"),Pt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Pt(this,"complete"),Pt(this,"abort"),Kr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kr(this,!0)),ot.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ur(this):this.bb())},n.bb=function(){ur(this)};function ur(u){if(u.h&&typeof l<"u"&&(!u.v[1]||dn(u)!=4||u.Z()!=2)){if(u.u&&dn(u)==4)ru(u.Ea,0,u);else if(Pt(u,"readystatechange"),dn(u)==4){u.h=!1;try{let Q=u.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var w;if(w=Q===0){var k=String(u.D).match(Yt)[1]||null;!k&&h.self&&h.self.location&&(k=h.self.location.protocol.slice(0,-1)),w=!vu.test(k?k.toLowerCase():"")}_=w}if(_)Pt(u,"complete"),Pt(u,"success");else{u.m=6;try{var B=2<dn(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",rn(u)}}finally{Kr(u)}}}}function Kr(u,p){if(u.g){Cu(u);let _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Pt(u,"ready");try{_.onreadystatechange=w}catch{}}}function Cu(u){u.I&&(h.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function dn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Yh(p)}};function bu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Eu(u){let p={};u=(u.g&&2<=dn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(ne(u[w]))continue;var _=x(u[w]);let k=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let B=p[k]||[];p[k]=B,B.push(_)}M(p,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Su(u){this.Aa=0,this.i=[],this.j=new rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,u),this.cb=Wr("retryDelaySeedMs",1e4,u),this.Wa=Wr("forwardChannelMaxRetries",2,u),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Be(u&&u.concurrentRequestLimit),this.Da=new ma,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Su.prototype,n.la=8,n.G=1,n.connect=function(u,p,_,w){Ft(0),this.W=u,this.H=p||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=ba(this,null,this.W),Gs(this)};function Zr(u){if(fn(u),u.G==3){var p=u.U++,_=Nt(u.I);if(Ge(_,"SID",u.K),Ge(_,"RID",p),Ge(_,"TYPE","terminate"),cr(u,_),p=new Yn(u,u.j,p),p.L=2,p.v=ar(Nt(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.v,_=!0),_||(p.g=Qr(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Us(p)}Ca(u)}function qs(u){u.g&&(Ks(u),u.g.cancel(),u.g=null)}function fn(u){qs(u),u.u&&(h.clearTimeout(u.u),u.u=null),Ws(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Gs(u){if(!tt(u.h)&&!u.s){u.s=!0;var p=u.Ga;ie||Fe(),K||(ie(),K=!0),oe.add(p,u),u.B=0}}function Tu(u,p){return zr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=re(E(u.Ga,u,p),Zs(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let k=new Yn(this,this.j,u),B=this.o;if(this.S&&(B?(B=b(B),A(B,this.S)):B=this.S),this.m!==null||this.O||(k.H=B,B=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=ya(this,k,p),_=Nt(this.I),Ge(_,"RID",u),Ge(_,"CVER",22),this.D&&Ge(_,"X-HTTP-Session-Id",this.D),cr(this,_),B&&(this.O?p="headers="+encodeURIComponent(String(_a(B)))+"&"+p:this.m&&Hr(_,this.m,B)),ei(this.h,k),this.Ua&&Ge(_,"TYPE","init"),this.P?(Ge(_,"$req",p),Ge(_,"SID","null"),k.T=!0,sr(k,_,null)):sr(k,_,p),this.G=2}}else this.G==3&&(u?$n(this,u):this.i.length==0||tt(this.h)||$n(this))};function $n(u,p){var _;p?_=p.l:_=u.U++;let w=Nt(u.I);Ge(w,"SID",u.K),Ge(w,"RID",_),Ge(w,"AID",u.T),cr(u,w),u.m&&u.o&&Hr(w,u.m,u.o),_=new Yn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ya(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ei(u.h,_),sr(_,w,p)}function cr(u,p){u.H&&Re(u.H,function(_,w){Ge(p,w,_)}),u.l&&jr({},function(_,w){Ge(p,w,_)})}function ya(u,p,_){_=Math.min(u.i.length,_);var w=u.l?E(u.l.Na,u.l,u):null;e:{var k=u.i;let B=-1;for(;;){let Q=["count="+_];B==-1?0<_?(B=k[0].g,Q.push("ofs="+B)):B=0:Q.push("ofs="+B);let ke=!0;for(let at=0;at<_;at++){let Ue=k[at].g,nt=k[at].map;if(Ue-=B,0>Ue)B=Math.max(0,k[at].g-100),ke=!1;else try{qr(nt,Q,"req"+Ue+"_")}catch{w&&w(nt)}}if(ke){w=Q.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,w}function Hs(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ie||Fe(),K||(ie(),K=!0),oe.add(p,u),u.v=0}}function va(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=re(E(u.Fa,u),Zs(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,wa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=re(E(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),qs(this),wa(this))};function Ks(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function wa(u){u.g=new Yn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Nt(u.qa);Ge(p,"RID","rpc"),Ge(p,"SID",u.K),Ge(p,"AID",u.T),Ge(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(p,"TO",u.ja),Ge(p,"TYPE","xmlhttp"),cr(u,p),u.m&&u.o&&Hr(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ar(Nt(p)),_.m=null,_.P=!0,mu(_,u)}n.Za=function(){this.C!=null&&(this.C=null,qs(this),va(this),Ft(19))};function Ws(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Du(u,p){var _=null;if(u.g==p){Ws(u),Ks(u),u.g=null;var w=2}else if(Jn(u.h,p))_=p.D,js(u.h,p),w=1;else return;if(u.G!=0){if(p.o)if(w==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var k=u.B;w=ir(),Pt(w,new cn(w,_)),Gs(u)}else Hs(u);else if(k=p.s,k==3||k==0&&0<p.X||!(w==1&&Tu(u,p)||w==2&&va(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),k){case 1:Mi(u,5);break;case 4:Mi(u,10);break;case 3:Mi(u,6);break;default:Mi(u,2)}}}function Zs(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function Mi(u,p){if(u.j.info("Error code "+p),p==2){var _=E(u.fb,u),w=u.Xa;let k=!w;w=new An(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||st(w,"https"),ar(w),k?fa(w.toString(),_):pa(w.toString(),_)}else Ft(2);u.G=0,u.l&&u.l.sa(p),Ca(u),fn(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function Ca(u){if(u.G=0,u.ka=[],u.l){let p=Ie(u.h);(p.length!=0||u.i.length!=0)&&(z(u.ka,p),z(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function ba(u,p,_){var w=_ instanceof An?Nt(_):new An(_);if(w.g!="")p&&(w.g=p+"."+w.g),Pn(w,w.s);else{var k=h.location;w=k.protocol,p=p?p+"."+k.hostname:k.hostname,k=+k.port;var B=new An(null);w&&st(B,w),p&&(B.g=p),k&&Pn(B,k),_&&(B.l=_),w=B}return _=u.D,p=u.ya,_&&p&&Ge(w,_,p),Ge(w,"VER",u.la),cr(u,w),w}function Qr(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new ot(new mt({eb:_})):new ot(u.pa),p.Ha(u.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ni(){}n=ni.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qs(){}Qs.prototype.g=function(u,p){return new St(u,p)};function St(u,p){At.call(this),this.g=new Su(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!ne(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ne(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new xi(this)}N(St,At),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){Zr(this.g)},St.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Jo(u),u=_);p.i.push(new Ur(p.Ya++,u)),p.G==3&&Gs(p)},St.prototype.N=function(){this.g.l=null,delete this.j,Zr(this.g),delete this.g,St.aa.N.call(this)};function Xt(u){ta.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(let _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}N(Xt,ta);function Ea(){na.call(this),this.status=1}N(Ea,na);function xi(u){this.g=u}N(xi,ni),xi.prototype.ua=function(){Pt(this.g,"a")},xi.prototype.ta=function(u){Pt(this.g,new Xt(u))},xi.prototype.sa=function(u){Pt(this.g,new Ea)},xi.prototype.ra=function(){Pt(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,dp=Zi.createWebChannelTransport=function(){return new Qs},hp=Zi.getStatEventTarget=function(){return ir()},cp=Zi.Event=Ti,Lc=Zi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Un.NO_ERROR=0,Un.TIMEOUT=8,Un.HTTP_ERROR=6,_l=Zi.ErrorCode=Un,ra.COMPLETE="complete",up=Zi.EventType=ra,au.EventType=Nr,Nr.OPEN="a",Nr.CLOSE="b",Nr.ERROR="c",Nr.MESSAGE="d",At.prototype.listen=At.prototype.K,Co=Zi.WebChannel=au,PT=Zi.FetchXmlHttpFactory=mt,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,lp=Zi.XhrIo=ot}).apply(typeof Oc<"u"?Oc:typeof self<"u"?self:typeof window<"u"?window:{});var av="@firebase/firestore";var Lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");var Uo="10.14.0";var _s=new q_("@firebase/firestore");function yl(){return _s.logLevel}function se(n,...e){if(_s.logLevel<=zi.DEBUG){let t=e.map(Ym);_s.debug(`Firestore (${Uo}): ${n}`,...t)}}function Yi(n,...e){if(_s.logLevel<=zi.ERROR){let t=e.map(Ym);_s.error(`Firestore (${Uo}): ${n}`,...t)}}function Po(n,...e){if(_s.logLevel<=zi.WARN){let t=e.map(Ym);_s.warn(`Firestore (${Uo}): ${n}`,...t)}}function Ym(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Ce(n="Unexpected state"){let e=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: `+n;throw Yi(e),new Error(e)}function Ye(n,e){n||Ce()}function Te(n,e){return n}var j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},J=class extends j_{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Uc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_p=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lt.UNAUTHENTICATED))}shutdown(){}},yp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},vp=class{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0);let i=this.i,s=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve(),o=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wn,e.enqueueRetryable(()=>s(this.currentUser))};let l=()=>{let f=o;e.enqueueRetryable(()=>$(this,null,function*(){yield f.promise,yield s(this.currentUser)}))},h=f=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){let f=this.t.getImmediate({optional:!0});f?h(f):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wn)}},0),l()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ye(typeof i.accessToken=="string"),new Uc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string"),new Lt(e)}},wp=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Cp=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new wp(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ep=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ye(this.o===void 0);let i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let l=o.token!==this.R;return this.R=o.token,se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let s=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?s(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ye(typeof t.token=="string"),this.R=t.token,new bp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function MT(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var zc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let s=MT(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%e.length))}return i}};function qe(n,e){return n<e?-1:n>e?1:0}function Mo(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}var gt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ae=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new gt(0,0))}static max(){return new n(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jc=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(),i===void 0?i=e.length-t:i>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let s=0;s<i;s++){let o=e.get(s),l=t.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ft=class n extends jc{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new n(t)}static emptyPath(){return new n([])}},xT=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Sn=class n extends jc{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return xT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",s=0,o=()=>{if(i.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},l=!1;for(;s<e.length;){let h=e[s];if(h==="\\"){if(s+1===e.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var me=class n{constructor(e){this.path=e}static fromPath(e){return new n(ft.fromString(e))}static fromName(e){return new n(ft.fromString(e).popFirst(5))}static empty(){return new n(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ft(e.slice()))}};var Sp=class{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}};Sp.UNKNOWN_ID=-1;function RT(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(i===1e9?new gt(t+1,0):new gt(t,i));return new ys(s,me.empty(),e)}function kT(n){return new ys(n.readTime,n.key,-1)}var ys=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Ae.min(),me.empty(),-1)}static max(){return new n(Ae.max(),me.empty(),-1)}};function OT(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}var LT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ul(n){return $(this,null,function*(){if(n.code!==j.FAILED_PRECONDITION||n.message!==LT)throw n;se("LocalStore","Unexpectedly lost primary lease")})}var Z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&t()},f=>i(f))}),l=!0,o===s&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(s=>s?n.resolve(s):i());return t}static forEach(e,t){let i=[];return e.forEach((s,o)=>{i.push(t.call(this,s,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,s)=>{let o=e.length,l=new Array(o),h=0;for(let f=0;f<o;f++){let m=f;t(e[m]).next(y=>{l[m]=y,++h,h===o&&i(l)},y=>s(y))}})}static doWhile(e,t){return new n((i,s)=>{let o=()=>{e()===!0?t().next(()=>{o()},s):i()};o()})}};function FT(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zl(n){return n.name==="IndexedDbTransactionError"}var zv=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=s=>this.ie(s),this.se=s=>i.writeSequenceNumber(s))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function wh(n){return n==null}function El(n){return n===0&&1/n==-1/0}function NT(n){return typeof n=="number"&&Number.isInteger(n)&&!El(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var VT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],HM=[...VT,"documentOverlays"],BT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UT=BT,zT=[...UT,"indexConfiguration","indexState","indexEntries"];var KM=[...zT,"globals"];function lv(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Es(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jv(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var _t=class n{constructor(e,t){this.comparator=e,this.root=t||gi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new To(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new To(this.root,e,this.comparator,!1)}getReverseIterator(){return new To(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new To(this.root,e,this.comparator,!0)}},To=class{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gi=class n{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=s??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new n(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this,o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return n.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();let e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}};gi.EMPTY=null,gi.RED=!0,gi.BLACK=!1;gi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,i,s,o){return this}insert(e,t,i){return new gi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Wt=class n{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $c(this.data.getIterator())}getIteratorFrom(e){return new $c(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$c=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Fn=class n{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Wt(Sn.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var qc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Zt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new qc("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Zt.EMPTY_BYTE_STRING=new Zt("");var jT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(n){if(Ye(!!n),typeof n=="string"){let e=0,t=jT.exec(n);if(Ye(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Sr(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}function Ch(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Xm(n){let e=n.mapValue.fields.__previous_value__;return Ch(e)?Xm(e):e}function Sl(n){let e=Xi(n.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}var Dp=class{constructor(e,t,i,s,o,l,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}},Gc=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Fc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function vs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ch(n)?4:qv(n)?9007199254740991:$v(n)?10:11:Ce()}function vi(n,e){if(n===e)return!0;let t=vs(n);if(t!==vs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sl(n).isEqual(Sl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;let l=Xi(s.timestampValue),h=Xi(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Sr(s.bytesValue).isEqual(Sr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return dt(s.geoPointValue.latitude)===dt(o.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return dt(s.integerValue)===dt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){let l=dt(s.doubleValue),h=dt(o.doubleValue);return l===h?El(l)===El(h):isNaN(l)&&isNaN(h)}return!1}(n,e);case 9:return Mo(n.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return function(s,o){let l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(lv(l)!==lv(h))return!1;for(let f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!vi(l[f],h[f])))return!1;return!0}(n,e);default:return Ce()}}function Tl(n,e){return(n.values||[]).find(t=>vi(t,e))!==void 0}function xo(n,e){if(n===e)return 0;let t=vs(n),i=vs(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return function(o,l){let h=dt(o.integerValue||o.doubleValue),f=dt(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return uv(n.timestampValue,e.timestampValue);case 4:return uv(Sl(n),Sl(e));case 5:return qe(n.stringValue,e.stringValue);case 6:return function(o,l){let h=Sr(o),f=Sr(l);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){let h=o.split("/"),f=l.split("/");for(let m=0;m<h.length&&m<f.length;m++){let y=qe(h[m],f[m]);if(y!==0)return y}return qe(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){let h=qe(dt(o.latitude),dt(l.latitude));return h!==0?h:qe(dt(o.longitude),dt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return cv(n.arrayValue,e.arrayValue);case 10:return function(o,l){var h,f,m,y;let C=o.fields||{},E=l.fields||{},I=(h=C.value)===null||h===void 0?void 0:h.arrayValue,N=(f=E.value)===null||f===void 0?void 0:f.arrayValue,U=qe(((m=I?.values)===null||m===void 0?void 0:m.length)||0,((y=N?.values)===null||y===void 0?void 0:y.length)||0);return U!==0?U:cv(I,N)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===Fc.mapValue&&l===Fc.mapValue)return 0;if(o===Fc.mapValue)return 1;if(l===Fc.mapValue)return-1;let h=o.fields||{},f=Object.keys(h),m=l.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let C=0;C<f.length&&C<y.length;++C){let E=qe(f[C],y[C]);if(E!==0)return E;let I=xo(h[f[C]],m[y[C]]);if(I!==0)return I}return qe(f.length,y.length)}(n.mapValue,e.mapValue);default:throw Ce()}}function uv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);let t=Xi(n),i=Xi(e),s=qe(t.seconds,i.seconds);return s!==0?s:qe(t.nanos,i.nanos)}function cv(n,e){let t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){let o=xo(t[s],i[s]);if(o)return o}return qe(t.length,i.length)}function Ro(n){return Ip(n)}function Ip(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=Xi(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Sr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(let o of t.values||[])s?s=!1:i+=",",i+=Ip(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),s="{",o=!0;for(let l of i)o?o=!1:s+=",",s+=`${l}:${Ip(t.fields[l])}`;return s+"}"}(n.mapValue):Ce()}function Hc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ap(n){return!!n&&"integerValue"in n}function Jm(n){return!!n&&"arrayValue"in n}function hv(n){return!!n&&"nullValue"in n}function dv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vc(n){return!!n&&"mapValue"in n}function $v(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function wl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Es(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=wl(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qv(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var En=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Vc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(t)}setAll(e){let t=Sn.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){let f=this.getFieldsMap(t);this.applyChanges(f,i,s),i={},s=[],t=h.popLast()}l?i[h.lastSegment()]=wl(l):s.push(h.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){let t=this.field(e.popLast());Vc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Vc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Es(t,(s,o)=>e[s]=o);for(let s of i)delete e[s]}clone(){return new n(wl(this.value))}};function Gv(n){let e=[];return Es(n.fields,(t,i)=>{let s=new Sn([t]);if(Vc(i)){let o=Gv(i.mapValue).fields;if(o.length===0)e.push(s);else for(let l of o)e.push(s.child(l))}else e.push(s)}),new Fn(e)}var Zn=class n{constructor(e,t,i,s,o,l,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new n(e,0,Ae.min(),Ae.min(),Ae.min(),En.empty(),0)}static newFoundDocument(e,t,i,s){return new n(e,1,t,Ae.min(),i,s,0)}static newNoDocument(e,t){return new n(e,2,t,Ae.min(),Ae.min(),En.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ae.min(),Ae.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Tr=class{constructor(e,t){this.position=e,this.inclusive=t}};function fv(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){let o=e[s],l=n.position[s];if(o.field.isKeyField()?i=me.comparator(me.fromName(l.referenceValue),t.key):i=xo(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function pv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vi(n.position[t],e.position[t]))return!1;return!0}var ws=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $T(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Kc=class{},Et=class n extends Kc{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Mp(e,t,i):t==="array-contains"?new kp(e,i):t==="in"?new Op(e,i):t==="not-in"?new Lp(e,i):t==="array-contains-any"?new Fp(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new xp(e,i):new Rp(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(xo(t,this.value)):t!==null&&vs(this.value)===vs(t)&&this.matchesComparison(xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Qn=class n extends Kc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Hv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Hv(n){return n.op==="and"}function Kv(n){return qT(n)&&Hv(n)}function qT(n){for(let e of n.filters)if(e instanceof Qn)return!1;return!0}function Pp(n){if(n instanceof Et)return n.field.canonicalString()+n.op.toString()+Ro(n.value);if(Kv(n))return n.filters.map(e=>Pp(e)).join(",");{let e=n.filters.map(t=>Pp(t)).join(",");return`${n.op}(${e})`}}function Wv(n,e){return n instanceof Et?function(i,s){return s instanceof Et&&i.op===s.op&&i.field.isEqual(s.field)&&vi(i.value,s.value)}(n,e):n instanceof Qn?function(i,s){return s instanceof Qn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&Wv(l,s.filters[h]),!0):!1}(n,e):void Ce()}function Zv(n){return n instanceof Et?function(t){return`${t.field.canonicalString()} ${t.op} ${Ro(t.value)}`}(n):n instanceof Qn?function(t){return t.op.toString()+" {"+t.getFilters().map(Zv).join(" ,")+"}"}(n):"Filter"}var Mp=class extends Et{constructor(e,t,i){super(e,t,i),this.key=me.fromName(i.referenceValue)}matches(e){let t=me.comparator(e.key,this.key);return this.matchesComparison(t)}},xp=class extends Et{constructor(e,t){super(e,"in",t),this.keys=Qv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Rp=class extends Et{constructor(e,t){super(e,"not-in",t),this.keys=Qv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Qv(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>me.fromName(i.referenceValue))}var kp=class extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Jm(t)&&Tl(t.arrayValue,this.value)}},Op=class extends Et{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Tl(this.value.arrayValue,t)}},Lp=class extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Tl(this.value.arrayValue,t)}},Fp=class extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Jm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Tl(this.value.arrayValue,i))}};var Np=class{constructor(e,t=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}};function mv(n,e=null,t=[],i=[],s=null,o=null,l=null){return new Np(n,e,t,i,s,o,l)}function eg(n){let e=Te(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Pp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),wh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Ro(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Ro(i)).join(",")),e.ue=t}return e.ue}function tg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$T(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Wv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pv(n.startAt,e.startAt)&&pv(n.endAt,e.endAt)}function Vp(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ji=class{constructor(e,t=null,i=[],s=[],o=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function GT(n,e,t,i,s,o,l,h){return new Ji(n,e,t,i,s,o,l,h)}function bh(n){return new Ji(n)}function gv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ng(n){return n.collectionGroup!==null}function Do(n){let e=Te(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Wt(Sn.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ws(o,i))}),t.has(Sn.keyField().canonicalString())||e.ce.push(new ws(Sn.keyField(),i))}return e.ce}function _i(n){let e=Te(n);return e.le||(e.le=HT(e,Do(n))),e.le}function HT(n,e){if(n.limitType==="F")return mv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{let o=s.dir==="desc"?"asc":"desc";return new ws(s.field,o)});let t=n.endAt?new Tr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Tr(n.startAt.position,n.startAt.inclusive):null;return mv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Bp(n,e){let t=n.filters.concat([e]);return new Ji(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wc(n,e,t){return new Ji(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Eh(n,e){return tg(_i(n),_i(e))&&n.limitType===e.limitType}function Yv(n){return`${eg(_i(n))}|lt:${n.limitType}`}function bo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>Zv(s)).join(", ")}]`),wh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>Ro(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>Ro(s)).join(",")),`Target(${i})`}(_i(n))}; limitType=${n.limitType})`}function Sh(n,e){return e.isFoundDocument()&&function(i,s){let o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,s){for(let o of Do(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,s){for(let o of i.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(l,h,f){let m=fv(l,h,f);return l.inclusive?m<=0:m<0}(i.startAt,Do(i),s)||i.endAt&&!function(l,h,f){let m=fv(l,h,f);return l.inclusive?m>=0:m>0}(i.endAt,Do(i),s))}(n,e)}function KT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Xv(n){return(e,t)=>{let i=!1;for(let s of Do(n)){let o=WT(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function WT(n,e,t){let i=n.field.isKeyField()?me.comparator(e.key,t.key):function(o,l,h){let f=l.data.field(o),m=h.data.field(o);return f!==null&&m!==null?xo(f,m):Ce()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce()}}var Dr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(t,i)=>{for(let[s,o]of i)e(s,o)})}isEmpty(){return jv(this.inner)}size(){return this.innerSize}};var ZT=new _t(me.comparator);function er(){return ZT}var Jv=new _t(me.comparator);function vl(...n){let e=Jv;for(let t of n)e=e.insert(t.key,t);return e}function ew(n){let e=Jv;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ps(){return Cl()}function tw(){return Cl()}function Cl(){return new Dr(n=>n.toString(),(n,e)=>n.isEqual(e))}var QT=new _t(me.comparator),YT=new Wt(me.comparator);function Ve(...n){let e=YT;for(let t of n)e=e.add(t);return e}var XT=new Wt(qe);function JT(){return XT}function ig(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:El(e)?"-0":e}}function nw(n){return{integerValue:""+n}}function iw(n,e){return NT(e)?nw(e):ig(n,e)}var ko=class{constructor(){this._=void 0}};function eD(n,e,t){return n instanceof Oo?function(s,o){let l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Ch(o)&&(o=Xm(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Ir?sw(n,e):n instanceof Ar?ow(n,e):function(s,o){let l=rw(s,o),h=_v(l)+_v(s.Pe);return Ap(l)&&Ap(s.Pe)?nw(h):ig(s.serializer,h)}(n,e)}function tD(n,e,t){return n instanceof Ir?sw(n,e):n instanceof Ar?ow(n,e):t}function rw(n,e){return n instanceof Cs?function(i){return Ap(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Oo=class extends ko{},Ir=class extends ko{constructor(e){super(),this.elements=e}};function sw(n,e){let t=aw(e);for(let i of n.elements)t.some(s=>vi(s,i))||t.push(i);return{arrayValue:{values:t}}}var Ar=class extends ko{constructor(e){super(),this.elements=e}};function ow(n,e){let t=aw(e);for(let i of n.elements)t=t.filter(s=>!vi(s,i));return{arrayValue:{values:t}}}var Cs=class extends ko{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function _v(n){return dt(n.integerValue||n.doubleValue)}function aw(n){return Jm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Dl=class{constructor(e,t){this.field=e,this.transform=t}};function nD(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Ir&&s instanceof Ir||i instanceof Ar&&s instanceof Ar?Mo(i.elements,s.elements,vi):i instanceof Cs&&s instanceof Cs?vi(i.Pe,s.Pe):i instanceof Oo&&s instanceof Oo}(n.transform,e.transform)}var Up=class{constructor(e,t){this.version=e,this.transformResults=t}},Qi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Bc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Lo=class{};function lw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Il(n.key,Qi.none()):new bs(n.key,n.data,Qi.none());{let t=n.data,i=En.empty(),s=new Wt(Sn.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new wi(n.key,i,new Fn(s.toArray()),Qi.none())}}function iD(n,e,t){n instanceof bs?function(s,o,l){let h=s.value.clone(),f=vv(s.fieldTransforms,o,l.transformResults);h.setAll(f),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):n instanceof wi?function(s,o,l){if(!Bc(s.precondition,o))return void o.convertToUnknownDocument(l.version);let h=vv(s.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(uw(s)),f.setAll(h),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function bl(n,e,t,i){return n instanceof bs?function(o,l,h,f){if(!Bc(o.precondition,l))return h;let m=o.value.clone(),y=wv(o.fieldTransforms,f,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof wi?function(o,l,h,f){if(!Bc(o.precondition,l))return h;let m=wv(o.fieldTransforms,f,l),y=l.data;return y.setAll(uw(o)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(C=>C.field))}(n,e,t,i):function(o,l,h){return Bc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(n,e,t)}function rD(n,e){let t=null;for(let i of n.fieldTransforms){let s=e.data.field(i.field),o=rw(i.transform,s||null);o!=null&&(t===null&&(t=En.empty()),t.set(i.field,o))}return t||null}function yv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Mo(i,s,(o,l)=>nD(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var bs=class extends Lo{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}},wi=class extends Lo{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function uw(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function vv(n,e,t){let i=new Map;Ye(n.length===t.length);for(let s=0;s<t.length;s++){let o=n[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,tD(l,h,t[s]))}return i}function wv(n,e,t){let i=new Map;for(let s of n){let o=s.transform,l=t.data.field(s.field);i.set(s.field,eD(o,l,e))}return i}var Il=class extends Lo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},zp=class extends Lo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var jp=class{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){let o=this.mutations[s];o.key.isEqual(e.key)&&iD(o,e,i[s])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=bl(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=bl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=tw();return this.mutations.forEach(s=>{let o=e.get(s.key),l=o.overlayedDocument,h=this.applyToLocalView(l,o.mutatedFields);h=t.has(s.key)?null:h;let f=lw(l,h);f!==null&&i.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,(t,i)=>yv(t,i))&&Mo(this.baseMutations,e.baseMutations,(t,i)=>yv(t,i))}},$p=class n{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Ye(e.mutations.length===i.length);let s=function(){return QT}(),o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new n(e,t,i,s)}};var qp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Gp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ct,ze;function sD(n){switch(n){default:return Ce();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function cw(n){if(n===void 0)return Yi("GRPC error has no .code"),j.UNKNOWN;switch(n){case Ct.OK:return j.OK;case Ct.CANCELLED:return j.CANCELLED;case Ct.UNKNOWN:return j.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return j.INTERNAL;case Ct.UNAVAILABLE:return j.UNAVAILABLE;case Ct.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Ct.NOT_FOUND:return j.NOT_FOUND;case Ct.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Ct.ABORTED:return j.ABORTED;case Ct.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Ct.DATA_LOSS:return j.DATA_LOSS;default:return Ce()}}(ze=Ct||(Ct={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";var Cv=null;function oD(){return new TextEncoder}var aD=new br([4294967295,4294967295],0);function bv(n){let e=oD().encode(n),t=new ap;return t.update(e),new Uint8Array(t.digest())}function Ev(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new br([t,i],0),new br([s,o],0)]}var Hp=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ms(`Invalid padding: ${t}`);if(i<0)throw new ms(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ms(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ms(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=br.fromNumber(this.Ie)}Ee(e,t,i){let s=e.add(t.multiply(br.fromNumber(i)));return s.compare(aD)===1&&(s=new br([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=bv(e),[i,s]=Ev(t);for(let o=0;o<this.hashCount;o++){let l=this.Ee(i,s,o);if(!this.de(l))return!1}return!0}static create(e,t,i){let s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new n(o,s,t);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;let t=bv(e),[i,s]=Ev(t);for(let o=0;o<this.hashCount;o++){let l=this.Ee(i,s,o);this.Ae(l)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},ms=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Zc=class n{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let s=new Map;return s.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Ae.min(),s,new _t(qe),er(),Ve())}},Al=class n{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,Ve(),Ve(),Ve())}};var Io=class{constructor(e,t,i,s){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=s}},Qc=class{constructor(e,t){this.targetId=e,this.me=t}},Yc=class{constructor(e,t,i=Zt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}},Xc=class{constructor(){this.fe=0,this.ge=Tv(),this.pe=Zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ve(),t=Ve(),i=Ve();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Ce()}}),new Al(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Tv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Kp=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=er(),this.qe=Sv(),this.Qe=new _t(qe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ce()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,s)=>{this.ze(s)&&t(s)})}He(e){let t=e.targetId,i=e.me.count,s=this.Je(t);if(s){let o=s.target;if(Vp(o))if(i===0){let l=new me(o.path);this.Ue(t,l,Zn.newNoDocument(l,Ae.min()))}else Ye(i===1);else{let l=this.Ye(t);if(l!==i){let h=this.Ze(e),f=h?this.Xe(h,e,l):1;if(f!==0){this.je(t);let m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}Cv?.et(function(y,C,E,I,N){var U,z,Y,ne,he,ve;let it={localCacheCount:y,existenceFilterCount:C.count,databaseId:E.database,projectId:E.projectId},Re=C.unchangedNames;return Re&&(it.bloomFilter={applied:N===0,hashCount:(U=Re?.hashCount)!==null&&U!==void 0?U:0,bitmapLength:(ne=(Y=(z=Re?.bits)===null||z===void 0?void 0:z.bitmap)===null||Y===void 0?void 0:Y.length)!==null&&ne!==void 0?ne:0,padding:(ve=(he=Re?.bits)===null||he===void 0?void 0:he.padding)!==null&&ve!==void 0?ve:0,mightContain:M=>{var b;return(b=I?.mightContain(M))!==null&&b!==void 0&&b}}),it}(l,e.me,this.Le.tt(),h,f))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t,l,h;try{l=Sr(i).toUint8Array()}catch(f){if(f instanceof qc)return Po("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Hp(l,s,o)}catch(f){return Po(f instanceof ms?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),s=0;return i.forEach(o=>{let l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,o,null),s++)}),s}rt(e){let t=new Map;this.Be.forEach((o,l)=>{let h=this.Je(l);if(h){if(o.current&&Vp(h.target)){let f=new me(h.target.path);this.ke.get(f)!==null||this.it(l,f)||this.Ue(l,f,Zn.newNoDocument(f,e))}o.be&&(t.set(l,o.ve()),o.Ce())}});let i=Ve();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(f=>{let m=this.Je(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));let s=new Zc(e,t,this.Qe,this.ke,i);return this.ke=er(),this.qe=Sv(),this.Qe=new _t(qe),s}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Xc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Wt(qe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xc),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Sv(){return new _t(me.comparator)}function Tv(){return new _t(me.comparator)}var lD={asc:"ASCENDING",desc:"DESCENDING"},uD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cD={and:"AND",or:"OR"},Wp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Zp(n,e){return n.useProto3Json||wh(e)?e:{value:e}}function Jc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hD(n,e){return Jc(n,e.toTimestamp())}function yi(n){return Ye(!!n),Ae.fromTimestamp(function(t){let i=Xi(t);return new gt(i.seconds,i.nanos)}(n))}function rg(n,e){return Qp(n,e).canonicalString()}function Qp(n,e){let t=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function dw(n){let e=ft.fromString(n);return Ye(_w(e)),e}function Yp(n,e){return rg(n.databaseId,e.path)}function fp(n,e){let t=dw(e);if(t.get(1)!==n.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(pw(t))}function fw(n,e){return rg(n.databaseId,e)}function dD(n){let e=dw(n);return e.length===4?ft.emptyPath():pw(e)}function Xp(n){return new ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pw(n){return Ye(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Dv(n,e,t){return{name:Yp(n,e),fields:t.value.mapValue.fields}}function fD(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,y){return m.useProto3Json?(Ye(y===void 0||typeof y=="string"),Zt.fromBase64String(y||"")):(Ye(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Zt.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){let y=m.code===void 0?j.UNKNOWN:cw(m.code);return new J(y,m.message||"")}(l);t=new Yc(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let s=fp(n,i.document.name),o=yi(i.document.updateTime),l=i.document.createTime?yi(i.document.createTime):Ae.min(),h=new En({mapValue:{fields:i.document.fields}}),f=Zn.newFoundDocument(s,o,l,h),m=i.targetIds||[],y=i.removedTargetIds||[];t=new Io(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let s=fp(n,i.document),o=i.readTime?yi(i.readTime):Ae.min(),l=Zn.newNoDocument(s,o),h=i.removedTargetIds||[];t=new Io([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let s=fp(n,i.document),o=i.removedTargetIds||[];t=new Io([],o,s,null)}else{if(!("filter"in e))return Ce();{e.filter;let i=e.filter;i.targetId;let{count:s=0,unchangedNames:o}=i,l=new Gp(s,o),h=i.targetId;t=new Qc(h,l)}}return t}function pD(n,e){let t;if(e instanceof bs)t={update:Dv(n,e.key,e.value)};else if(e instanceof Il)t={delete:Yp(n,e.key)};else if(e instanceof wi)t={update:Dv(n,e.key,e.data),updateMask:ED(e.fieldMask)};else{if(!(e instanceof zp))return Ce();t={verify:Yp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,l){let h=l.transform;if(h instanceof Oo)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ir)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ar)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Cs)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw Ce()}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:hD(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ce()}(n,e.precondition)),t}function mD(n,e){return n&&n.length>0?(Ye(e!==void 0),n.map(t=>function(s,o){let l=s.updateTime?yi(s.updateTime):yi(o);return l.isEqual(Ae.min())&&(l=yi(o)),new Up(l,s.transformResults||[])}(t,e))):[]}function gD(n,e){return{documents:[fw(n,e.path)]}}function _D(n,e){let t={structuredQuery:{}},i=e.path,s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=fw(n,s);let o=function(m){if(m.length!==0)return gw(Qn.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let l=function(m){if(m.length!==0)return m.map(y=>function(E){return{field:Eo(E.field),direction:wD(E.dir)}}(y))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);let h=Zp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:s}}function yD(n){let e=dD(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,s=null;if(i>0){Ye(i===1);let y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(C){let E=mw(C);return E instanceof Qn&&Kv(E)?E.getFilters():[E]}(t.where));let l=[];t.orderBy&&(l=function(C){return C.map(E=>function(N){return new ws(So(N.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(E))}(t.orderBy));let h=null;t.limit&&(h=function(C){let E;return E=typeof C=="object"?C.value:C,wh(E)?null:E}(t.limit));let f=null;t.startAt&&(f=function(C){let E=!!C.before,I=C.values||[];return new Tr(I,E)}(t.startAt));let m=null;return t.endAt&&(m=function(C){let E=!C.before,I=C.values||[];return new Tr(I,E)}(t.endAt)),GT(e,s,l,o,h,"F",f,m)}function vD(n,e){let t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=So(t.unaryFilter.field);return Et.create(i,"==",{doubleValue:NaN});case"IS_NULL":let s=So(t.unaryFilter.field);return Et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=So(t.unaryFilter.field);return Et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let l=So(t.unaryFilter.field);return Et.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(n):n.fieldFilter!==void 0?function(t){return Et.create(So(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Qn.create(t.compositeFilter.filters.map(i=>mw(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce()}}(t.compositeFilter.op))}(n):Ce()}function wD(n){return lD[n]}function CD(n){return uD[n]}function bD(n){return cD[n]}function Eo(n){return{fieldPath:n.canonicalString()}}function So(n){return Sn.fromServerFormat(n.fieldPath)}function gw(n){return n instanceof Et?function(t){if(t.op==="=="){if(dv(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NAN"}};if(hv(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dv(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NAN"}};if(hv(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eo(t.field),op:CD(t.op),value:t.value}}}(n):n instanceof Qn?function(t){let i=t.getFilters().map(s=>gw(s));return i.length===1?i[0]:{compositeFilter:{op:bD(t.op),filters:i}}}(n):Ce()}function ED(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _w(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Pl=class n{constructor(e,t,i,s,o=Ae.min(),l=Ae.min(),h=Zt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Jp=class{constructor(e){this.ct=e}};function SD(n){let e=yD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wc(e,e.limit,"L"):e}var eh=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(dt(e.integerValue));else if("doubleValue"in e){let i=dt(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),El(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=Xi(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Sr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?qv(e)?this.dt(t,Number.MAX_SAFE_INTEGER):$v(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ce()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let s of Object.keys(i))this.Vt(s,t),this.Tt(i[s],t)}wt(e,t){var i,s;let o=e.fields||{};this.dt(t,53);let l="value",h=((s=(i=o[l].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.length)||0;this.dt(t,15),t.At(dt(h)),this.Vt(l,t),this.Tt(o[l],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let s of i)this.Tt(s,t)}yt(e,t){this.dt(t,37),me.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};eh.vt=new eh;var em=class{constructor(){this.un=new tm}addToCollectionParentIndex(e,t){return this.un.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(ys.min())}updateCollectionGroup(e,t,i){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}},tm=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Wt(ft.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Wt(ft.comparator)).toArray()}};var ZM=new Uint8Array(0);var mi=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(41943040,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);var Ml=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var nm=class{constructor(){this.changes=new Dr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?Z.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var im=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var rm=class{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&bl(i.mutation,s,Fn.empty(),gt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ve()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ve()){let s=ps();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(o=>{let l=vl();return o.forEach((h,f)=>{l=l.insert(h,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){let i=ps();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ve()))}populateOverlays(e,t,i){let s=[];return i.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,i,s){let o=er(),l=Cl(),h=function(){return Cl()}();return t.forEach((f,m)=>{let y=i.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof wi)?o=o.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),bl(y.mutation,m,y.mutation.getFieldMask(),gt.now())):l.set(m.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((m,y)=>l.set(m,y)),t.forEach((m,y)=>{var C;return h.set(m,new im(y,(C=l.get(m))!==null&&C!==void 0?C:null))}),h))}recalculateAndSaveOverlays(e,t){let i=Cl(),s=new _t((l,h)=>l-h),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(let h of l)h.keys().forEach(f=>{let m=t.get(f);if(m===null)return;let y=i.get(f)||Fn.empty();y=h.applyToLocalView(m,y),i.set(f,y);let C=(s.get(h.batchId)||Ve()).add(f);s=s.insert(h.batchId,C)})}).next(()=>{let l=[],h=s.getReverseIterator();for(;h.hasNext();){let f=h.getNext(),m=f.key,y=f.value,C=tw();y.forEach(E=>{if(!o.has(E)){let I=lw(t.get(E),i.get(E));I!==null&&C.set(E,I),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,C))}return Z.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(l){return me.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ng(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(o=>{let l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):Z.resolve(ps()),h=-1,f=o;return l.next(m=>Z.forEach(m,(y,C)=>(h<C.largestBatchId&&(h=C.largestBatchId),o.get(y)?Z.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{f=f.insert(y,E)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,f,m,Ve())).next(y=>({batchId:h,changes:ew(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(i=>{let s=vl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){let o=t.collectionGroup,l=vl();return this.indexManager.getCollectionParents(e,o).next(h=>Z.forEach(h,f=>{let m=function(C,E){return new Ji(E,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(y=>{y.forEach((C,E)=>{l=l.insert(C,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s))).next(l=>{o.forEach((f,m)=>{let y=m.getKey();l.get(y)===null&&(l=l.insert(y,Zn.newInvalidDocument(y)))});let h=vl();return l.forEach((f,m)=>{let y=o.get(f);y!==void 0&&bl(y.mutation,m,Fn.empty(),gt.now()),Sh(t,m)&&(h=h.insert(f,m))}),h})}};var sm=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Z.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:yi(s.createTime)}}(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(s){return{name:s.name,query:SD(s.bundledQuery),readTime:yi(s.readTime)}}(t)),Z.resolve()}};var om=class{constructor(){this.overlays=new _t(me.comparator),this.Ir=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){let i=ps();return Z.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,o)=>{this.ht(e,t,o)}),Z.resolve()}removeOverlaysForBatchId(e,t,i){let s=this.Ir.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Z.resolve()}getOverlaysForCollection(e,t,i){let s=ps(),o=t.length+1,l=new me(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){let f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>i&&s.set(f.getKey(),f)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new _t((m,y)=>m-y),l=this.overlays.getIterator();for(;l.hasNext();){let m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let y=o.get(m.largestBatchId);y===null&&(y=ps(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}let h=ps(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,y)=>h.set(m,y)),!(h.size()>=s)););return Z.resolve(h)}ht(e,t,i){let s=this.overlays.get(i.key);if(s!==null){let l=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new qp(t,i));let o=this.Ir.get(t);o===void 0&&(o=Ve(),this.Ir.set(t,o)),this.Ir.set(t,o.add(i.key))}};var am=class{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}};var xl=class{constructor(){this.Tr=new Wt(bt.Er),this.dr=new Wt(bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new bt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new bt(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new me(new ft([])),i=new bt(t,e),s=new bt(t,e+1),o=[];return this.dr.forEachInRange([i,s],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new me(new ft([])),i=new bt(t,e),s=new bt(t,e+1),o=Ve();return this.dr.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){let t=new bt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},bt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return me.comparator(e.key,t.key)||qe(e.wr,t.wr)}static Ar(e,t){return qe(e.wr,t.wr)||me.comparator(e.key,t.key)}};var lm=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Wt(bt.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let l=new jp(o,t,i,s);this.mutationQueue.push(l);for(let h of s)this.br=this.br.add(new bt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,t){return Z.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,s=this.vr(i),o=s<0?0:s;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new bt(t,0),s=new bt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,s],l=>{let h=this.Dr(l.wr);o.push(h)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Wt(qe);return t.forEach(s=>{let o=new bt(s,0),l=new bt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),Z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,s=i.length+1,o=i;me.isDocumentKey(o)||(o=o.child(""));let l=new bt(new me(o),0),h=new Wt(qe);return this.br.forEachWhile(f=>{let m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.wr)),!0)},l),Z.resolve(this.Cr(h))}Cr(e){let t=[];return e.forEach(i=>{let s=this.Dr(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ye(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Z.forEach(t.mutations,s=>{let o=new bt(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new bt(t,0),s=this.br.firstAfterOrEqual(i);return Z.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var um=class{constructor(e){this.Mr=e,this.docs=function(){return new _t(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,s=this.docs.get(i),o=s?s.size:0,l=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return Z.resolve(i?i.document.mutableCopy():Zn.newInvalidDocument(t))}getEntries(e,t){let i=er();return t.forEach(s=>{let o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Zn.newInvalidDocument(s))}),Z.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=er(),l=t.path,h=new me(l.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){let{key:m,value:{document:y}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||OT(kT(y),i)<=0||(s.has(y.key)||Sh(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,t,i,s){Ce()}Or(e,t){return Z.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new cm(this)}getSize(e){return Z.resolve(this.size)}},cm=class extends nm{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),Z.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var hm=class{constructor(e){this.persistence=e,this.Nr=new Dr(t=>eg(t),tg),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xl,this.targetCount=0,this.kr=Ml.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,s)=>t(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),Z.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ml(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.Kn(t),Z.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,i){let s=0,o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Z.waitFor(o).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return Z.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),Z.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return Z.resolve(i)}containsKey(e,t){return Z.resolve(this.Br.containsKey(t))}};var dm=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zv(0),this.Kr=!1,this.Kr=!0,this.$r=new am,this.referenceDelegate=e(this),this.Ur=new hm(this),this.indexManager=new em,this.remoteDocumentCache=function(s){return new um(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Jp(t),this.Gr=new sm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new om,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new lm(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){se("MemoryPersistence","Starting transaction:",e);let s=new fm(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,t){return Z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},fm=class extends Tp{constructor(e){super(),this.currentSequenceNumber=e}},pm=class n{constructor(e){this.persistence=e,this.Jr=new xl,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Ce()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),Z.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(s=>this.Xr.add(s.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,i=>{let s=me.fromPath(i);return this.ei(e,s).next(o=>{o||t.removeEntry(s,Ae.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Z.or([()=>Z.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var mm=class n{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=s}static Wi(e,t){let i=Ve(),s=Ve();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new n(e,t.fromCache,i,s)}};var gm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _m=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return z_()?8:FT(U_())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,s){let o={result:null};return this.Yi(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,t,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;let l=new gm;return this.Xi(e,t,l).next(h=>{if(o.result=h,this.zi)return this.es(e,t,l,h.size)})}).next(()=>o.result)}es(e,t,i,s){return i.documentReadCount<this.ji?(yl()<=zi.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(yl()<=zi.DEBUG&&se("QueryEngine","Query:",bo(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(yl()<=zi.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_i(t))):Z.resolve())}Yi(e,t){if(gv(t))return Z.resolve(null);let i=_i(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Wc(t,null,"F"),i=_i(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let l=Ve(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(f=>{let m=this.ts(t,h);return this.ns(t,m,l,f.readTime)?this.Yi(e,Wc(t,null,"F")):this.rs(e,m,t,f)}))})))}Zi(e,t,i,s){return gv(t)||s.isEqual(Ae.min())?Z.resolve(null):this.Ji.getDocuments(e,i).next(o=>{let l=this.ts(t,o);return this.ns(t,l,i,s)?Z.resolve(null):(yl()<=zi.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bo(t)),this.rs(e,l,t,RT(s,-1)).next(h=>h))})}ts(e,t){let i=new Wt(Xv(e));return t.forEach((s,o)=>{Sh(e,o)&&(i=i.add(o))}),i}ns(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,t,i){return yl()<=zi.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",bo(t)),this.Ji.getDocumentsMatchingQuery(e,t,ys.min(),i)}rs(e,t,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}};var ym=class{constructor(e,t,i,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new _t(qe),this._s=new Dr(o=>eg(o),tg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rm(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function TD(n,e,t,i){return new ym(n,e,t,i)}function yw(n,e){return $(this,null,function*(){let t=Te(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let l=[],h=[],f=Ve();for(let m of s){l.push(m.batchId);for(let y of m.mutations)f=f.add(y.key)}for(let m of o){h.push(m.batchId);for(let y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(i,f).next(m=>({hs:m,removedBatchIds:l,addedBatchIds:h}))})})})}function DD(n,e){let t=Te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let s=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,f,m,y){let C=m.batch,E=C.keys(),I=Z.resolve();return E.forEach(N=>{I=I.next(()=>y.getEntry(f,N)).next(U=>{let z=m.docVersions.get(N);Ye(z!==null),U.version.compareTo(z)<0&&(C.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),y.addEntry(U)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(f,C))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let f=Ve();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function vw(n){let e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function ID(n,e){let t=Te(n),i=e.snapshotVersion,s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let l=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;let h=[];e.targetChanges.forEach((y,C)=>{let E=s.get(C);if(!E)return;h.push(t.Ur.removeMatchingKeys(o,y.removedDocuments,C).next(()=>t.Ur.addMatchingKeys(o,y.addedDocuments,C)));let I=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(C)!==null?I=I.withResumeToken(Zt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,i)),s=s.insert(C,I),function(U,z,Y){return U.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(E,I,y)&&h.push(t.Ur.updateTargetData(o,I))});let f=er(),m=Ve();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(AD(o,l,e.documentUpdates).next(y=>{f=y.Ps,m=y.Is})),!i.isEqual(Ae.min())){let y=t.Ur.getLastRemoteSnapshotVersion(o).next(C=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return Z.waitFor(h).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,f,m)).next(()=>f)}).then(o=>(t.os=s,o))}function AD(n,e,t){let i=Ve(),s=Ve();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let l=er();return t.forEach((h,f)=>{let m=o.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(Ae.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):se("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{Ps:l,Is:s}})}function PD(n,e){let t=Te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function MD(n,e){let t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Ur.getTargetData(i,e).next(o=>o?(s=o,Z.resolve(s)):t.Ur.allocateTargetId(i).next(l=>(s=new Pl(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{let s=t.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function vm(n,e,t){return $(this,null,function*(){let i=Te(n),s=i.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!zl(l))throw l;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(s.target)})}function Iv(n,e,t){let i=Te(n),s=Ae.min(),o=Ve();return i.persistence.runTransaction("Execute query","readwrite",l=>function(f,m,y){let C=Te(f),E=C._s.get(y);return E!==void 0?Z.resolve(C.os.get(E)):C.Ur.getTargetData(m,y)}(i,l,_i(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(f=>{o=f})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,t?s:Ae.min(),t?o:Ve())).next(h=>(xD(i,KT(e),h),{documents:h,Ts:o})))}function xD(n,e,t){let i=n.us.get(e)||Ae.min();t.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.us.set(e,i)}var th=class{constructor(){this.activeTargetIds=JT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var wm=class{constructor(){this.so=new th,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new th,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Cm=class{_o(e){}shutdown(){}};var nh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Nc=null;function pp(){return Nc===null?Nc=function(){return 268435456+Math.round(2147483648*Math.random())}():Nc++,"0x"+Nc.toString(16)}var RD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var bm=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Kt="WebChannelConnection",Em=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(t,i,s,o,l){let h=pp(),f=this.xo(t,i.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${h}:`,f,s);let m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,l),this.No(t,f,m,s).then(y=>(se("RestConnection",`Received RPC '${t}' ${h}: `,y),y),y=>{throw Po("RestConnection",`RPC '${t}' ${h} failed with error: `,y,"url: ",f,"request:",s),y})}Lo(t,i,s,o,l,h){return this.Mo(t,i,s,o,l)}Oo(t,i,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>t[l]=o),s&&s.headers.forEach((o,l)=>t[l]=o)}xo(t,i){let s=RD[t];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,s){let o=pp();return new Promise((l,h)=>{let f=new lp;f.setWithCredentials(!0),f.listenOnce(up.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case _l.NO_ERROR:let y=f.getResponseJson();se(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),l(y);break;case _l.TIMEOUT:se(Kt,`RPC '${e}' ${o} timed out`),h(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case _l.HTTP_ERROR:let C=f.getStatus();if(se(Kt,`RPC '${e}' ${o} failed with status:`,C,"response text:",f.getResponseText()),C>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);let I=E?.error;if(I&&I.status&&I.message){let N=function(z){let Y=z.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(Y)>=0?Y:j.UNKNOWN}(I.status);h(new J(N,I.message))}else h(new J(j.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new J(j.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{se(Kt,`RPC '${e}' ${o} completed.`)}});let m=JSON.stringify(s);se(Kt,`RPC '${e}' ${o} sending request:`,s),f.send(t,"POST",m,i,15)})}Bo(e,t,i){let s=pp(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=dp(),h=hp(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;let y=o.join("");se(Kt,`Creating RPC '${e}' stream ${s}: ${y}`,f);let C=l.createWebChannel(y,f),E=!1,I=!1,N=new bm({Io:z=>{I?se(Kt,`Not sending because RPC '${e}' stream ${s} is closed:`,z):(E||(se(Kt,`Opening RPC '${e}' stream ${s} transport.`),C.open(),E=!0),se(Kt,`RPC '${e}' stream ${s} sending:`,z),C.send(z))},To:()=>C.close()}),U=(z,Y,ne)=>{z.listen(Y,he=>{try{ne(he)}catch(ve){setTimeout(()=>{throw ve},0)}})};return U(C,Co.EventType.OPEN,()=>{I||(se(Kt,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),U(C,Co.EventType.CLOSE,()=>{I||(I=!0,se(Kt,`RPC '${e}' stream ${s} transport closed`),N.So())}),U(C,Co.EventType.ERROR,z=>{I||(I=!0,Po(Kt,`RPC '${e}' stream ${s} transport errored:`,z),N.So(new J(j.UNAVAILABLE,"The operation could not be completed")))}),U(C,Co.EventType.MESSAGE,z=>{var Y;if(!I){let ne=z.data[0];Ye(!!ne);let he=ne,ve=he.error||((Y=he[0])===null||Y===void 0?void 0:Y.error);if(ve){se(Kt,`RPC '${e}' stream ${s} received error:`,ve);let it=ve.status,Re=function(S){let A=Ct[S];if(A!==void 0)return cw(A)}(it),M=ve.message;Re===void 0&&(Re=j.INTERNAL,M="Unknown error status: "+it+" with message "+ve.message),I=!0,N.So(new J(Re,M)),C.close()}else se(Kt,`RPC '${e}' stream ${s} received:`,ne),N.bo(ne)}}),U(h,cp.STAT_EVENT,z=>{z.stat===Lc.PROXY?se(Kt,`RPC '${e}' stream ${s} detected buffering proxy`):z.stat===Lc.NOPROXY&&se(Kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}};function mp(){return typeof document<"u"?document:null}function Th(n){return new Wp(n,!0)}var ih=class{constructor(e,t,i=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-i);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var rh=class{constructor(e,t,i,s,o,l,h,f){this.ui=e,this.Ho=i,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ih(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return $(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return $(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return $(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(Yi(t.toString()),Yi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===t&&this.P_(i,s)},i=>{e(()=>{let s=new J(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(()=>$(this,null,function*(){this.state=0,this.start()}))}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Sm=class extends rh{constructor(e,t,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=fD(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ae.min();let l=o.targetChange;return l.targetIds&&l.targetIds.length?Ae.min():l.readTime?yi(l.readTime):Ae.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=Xp(this.serializer),t.addTarget=function(o,l){let h,f=l.target;if(h=Vp(f)?{documents:gD(o,f)}:{query:_D(o,f)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=hw(o,l.resumeToken);let m=Zp(o,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(Ae.min())>0){h.readTime=Jc(o,l.snapshotVersion.toTimestamp());let m=Zp(o,l.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);let i=vD(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=Xp(this.serializer),t.removeTarget=e,this.a_(t)}},Tm=class extends rh{constructor(e,t,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=mD(e.writeResults,e.commitTime),i=yi(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=Xp(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>pD(this.serializer,i))};this.a_(t)}};var Dm=class extends class{}{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,Qp(t,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(j.UNKNOWN,o.toString())})}Lo(e,t,i,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,Qp(t,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new J(j.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Im=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yi(t),this.D_=!1):se("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Am=class{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(()=>$(this,null,function*(){Ss(this)&&(se("RemoteStore","Restarting streams for network reachability change."),yield function(f){return $(this,null,function*(){let m=Te(f);m.L_.add(4),yield jl(m),m.q_.set("Unknown"),m.L_.delete(4),yield Dh(m)})}(this))}))}),this.q_=new Im(i,s)}};function Dh(n){return $(this,null,function*(){if(Ss(n))for(let e of n.B_)yield e(!0)})}function jl(n){return $(this,null,function*(){for(let e of n.B_)yield e(!1)})}function ww(n,e){let t=Te(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),lg(t)?ag(t):zo(t).r_()&&og(t,e))}function sg(n,e){let t=Te(n),i=zo(t);t.N_.delete(e),i.r_()&&Cw(t,e),t.N_.size===0&&(i.r_()?i.o_():Ss(t)&&t.q_.set("Unknown"))}function og(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zo(n).A_(e)}function Cw(n,e){n.Q_.xe(e),zo(n).R_(e)}function ag(n){n.Q_=new Kp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),zo(n).start(),n.q_.v_()}function lg(n){return Ss(n)&&!zo(n).n_()&&n.N_.size>0}function Ss(n){return Te(n).L_.size===0}function bw(n){n.Q_=void 0}function kD(n){return $(this,null,function*(){n.q_.set("Online")})}function OD(n){return $(this,null,function*(){n.N_.forEach((e,t)=>{og(n,e)})})}function LD(n,e){return $(this,null,function*(){bw(n),lg(n)?(n.q_.M_(e),ag(n)):n.q_.set("Unknown")})}function FD(n,e,t){return $(this,null,function*(){if(n.q_.set("Online"),e instanceof Yc&&e.state===2&&e.cause)try{yield function(s,o){return $(this,null,function*(){let l=o.cause;for(let h of o.targetIds)s.N_.has(h)&&(yield s.remoteSyncer.rejectListen(h,l),s.N_.delete(h),s.Q_.removeTarget(h))})}(n,e)}catch(i){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield sh(n,i)}else if(e instanceof Io?n.Q_.Ke(e):e instanceof Qc?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ae.min()))try{let i=yield vw(n.localStore);t.compareTo(i)>=0&&(yield function(o,l){let h=o.Q_.rt(l);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){let y=o.N_.get(m);y&&o.N_.set(m,y.withResumeToken(f.resumeToken,l))}}),h.targetMismatches.forEach((f,m)=>{let y=o.N_.get(f);if(!y)return;o.N_.set(f,y.withResumeToken(Zt.EMPTY_BYTE_STRING,y.snapshotVersion)),Cw(o,f);let C=new Pl(y.target,f,m,y.sequenceNumber);og(o,C)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(i){se("RemoteStore","Failed to raise snapshot:",i),yield sh(n,i)}})}function sh(n,e,t){return $(this,null,function*(){if(!zl(e))throw e;n.L_.add(1),yield jl(n),n.q_.set("Offline"),t||(t=()=>vw(n.localStore)),n.asyncQueue.enqueueRetryable(()=>$(this,null,function*(){se("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Dh(n)}))})}function Ew(n,e){return e().catch(t=>sh(n,t,e))}function Ih(n){return $(this,null,function*(){let e=Te(n),t=Pr(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ND(e);)try{let s=yield PD(e.localStore,i);if(s===null){e.O_.length===0&&t.o_();break}i=s.batchId,VD(e,s)}catch(s){yield sh(e,s)}Sw(e)&&Tw(e)})}function ND(n){return Ss(n)&&n.O_.length<10}function VD(n,e){n.O_.push(e);let t=Pr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Sw(n){return Ss(n)&&!Pr(n).n_()&&n.O_.length>0}function Tw(n){Pr(n).start()}function BD(n){return $(this,null,function*(){Pr(n).p_()})}function UD(n){return $(this,null,function*(){let e=Pr(n);for(let t of n.O_)e.m_(t.mutations)})}function zD(n,e,t){return $(this,null,function*(){let i=n.O_.shift(),s=$p.from(i,e,t);yield Ew(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Ih(n)})}function jD(n,e){return $(this,null,function*(){e&&Pr(n).V_&&(yield function(i,s){return $(this,null,function*(){if(function(l){return sD(l)&&l!==j.ABORTED}(s.code)){let o=i.O_.shift();Pr(i).s_(),yield Ew(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Ih(i)}})}(n,e)),Sw(n)&&Tw(n)})}function Av(n,e){return $(this,null,function*(){let t=Te(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");let i=Ss(t);t.L_.add(3),yield jl(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Dh(t)})}function $D(n,e){return $(this,null,function*(){let t=Te(n);e?(t.L_.delete(2),yield Dh(t)):e||(t.L_.add(2),yield jl(t),t.q_.set("Unknown"))})}function zo(n){return n.K_||(n.K_=function(t,i,s){let o=Te(t);return o.w_(),new Sm(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Eo:kD.bind(null,n),Ro:OD.bind(null,n),mo:LD.bind(null,n),d_:FD.bind(null,n)}),n.B_.push(e=>$(this,null,function*(){e?(n.K_.s_(),lg(n)?ag(n):n.q_.set("Unknown")):(yield n.K_.stop(),bw(n))}))),n.K_}function Pr(n){return n.U_||(n.U_=function(t,i,s){let o=Te(t);return o.w_(),new Tm(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:BD.bind(null,n),mo:jD.bind(null,n),f_:UD.bind(null,n),g_:zD.bind(null,n)}),n.B_.push(e=>$(this,null,function*(){e?(n.U_.s_(),yield Ih(n)):(yield n.U_.stop(),n.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Pm=class n{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){let l=Date.now()+i,h=new n(e,t,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ug(n,e){if(Yi("AsyncQueue",`${e}: ${n}`),zl(n))return new J(j.UNAVAILABLE,`${e}: ${n}`);throw n}var oh=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||me.comparator(t.key,i.key):(t,i)=>me.comparator(t.key,i.key),this.keyedMap=vl(),this.sortedSet=new _t(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var ah=class{constructor(){this.W_=new _t(me.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ce():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},Fo=class n{constructor(e,t,i,s,o,l,h,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,s,o){let l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new n(e,t,oh.emptySet(t),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}};var Mm=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},xm=class{constructor(){this.queries=Pv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let s=Te(t),o=s.queries;s.queries=Pv(),o.forEach((l,h)=>{for(let f of h.j_)f.onError(i)})})(this,new J(j.ABORTED,"Firestore shutting down"))}};function Pv(){return new Dr(n=>Yv(n),Eh)}function cg(n,e){return $(this,null,function*(){let t=Te(n),i=3,s=e.query,o=t.queries.get(s);o?!o.H_()&&e.J_()&&(i=2):(o=new Mm,i=e.J_()?0:1);try{switch(i){case 0:o.z_=yield t.onListen(s,!0);break;case 1:o.z_=yield t.onListen(s,!1);break;case 2:yield t.onFirstRemoteStoreListen(s)}}catch(l){let h=ug(l,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&dg(t)})}function hg(n,e){return $(this,null,function*(){let t=Te(n),i=e.query,s=3,o=t.queries.get(i);if(o){let l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function qD(n,e){let t=Te(n),i=!1;for(let s of e){let o=s.query,l=t.queries.get(o);if(l){for(let h of l.j_)h.X_(s)&&(i=!0);l.z_=s}}i&&dg(t)}function GD(n,e,t){let i=Te(n),s=i.queries.get(e);if(s)for(let o of s.j_)o.onError(t);i.queries.delete(e)}function dg(n){n.Y_.forEach(e=>{e.next()})}var Rm,Mv;(Mv=Rm||(Rm={})).ea="default",Mv.Cache="cache";var Rl=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let s of e.docChanges)s.type!==3&&i.push(s);e=new Fo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rm.Cache}};var lh=class{constructor(e){this.key=e}},uh=class{constructor(e){this.key=e}},km=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ve(),this.mutatedKeys=Ve(),this.Aa=Xv(e),this.Ra=new oh(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new ah,s=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,l=s,h=!1,f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,C)=>{let E=s.get(y),I=Sh(this.query,C)?C:null,N=!!E&&this.mutatedKeys.has(E.key),U=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),z=!1;E&&I?E.data.isEqual(I.data)?N!==U&&(i.track({type:3,doc:I}),z=!0):this.ga(E,I)||(i.track({type:2,doc:I}),z=!0,(f&&this.Aa(I,f)>0||m&&this.Aa(I,m)<0)&&(h=!0)):!E&&I?(i.track({type:0,doc:I}),z=!0):E&&!I&&(i.track({type:1,doc:E}),z=!0,(f||m)&&(h=!0)),z&&(I?(l=l.add(I),o=U?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){let y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let l=e.fa.G_();l.sort((y,C)=>function(I,N){let U=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return U(I)-U(N)}(y.type,C.type)||this.Aa(y.doc,C.doc)),this.pa(i),s=s!=null&&s;let h=t&&!s?this.ya():[],f=this.da.size===0&&this.current&&!s?1:0,m=f!==this.Ea;return this.Ea=f,l.length!==0||m?{snapshot:new Fo(this.query,e.Ra,o,l,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ah,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Ve(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new uh(i))}),this.da.forEach(i=>{e.has(i)||t.push(new lh(i))}),t}ba(e){this.Ta=e.Ts,this.da=Ve();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Fo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Om=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Lm=class{constructor(e){this.key=e,this.va=!1}},Fm=class{constructor(e,t,i,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Dr(h=>Yv(h),Eh),this.Ma=new Map,this.xa=new Set,this.Oa=new _t(me.comparator),this.Na=new Map,this.La=new xl,this.Ba={},this.ka=new Map,this.qa=Ml.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function HD(n,e,t=!0){return $(this,null,function*(){let i=xw(n),s,o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=yield Dw(i,e,t,!0),s})}function KD(n,e){return $(this,null,function*(){let t=xw(n);yield Dw(t,e,!0,!1)})}function Dw(n,e,t,i){return $(this,null,function*(){let s=yield MD(n.localStore,_i(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t),h;return i&&(h=yield WD(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&ww(n.remoteStore,s),h})}function WD(n,e,t,i,s){return $(this,null,function*(){n.Ka=(C,E,I)=>function(U,z,Y,ne){return $(this,null,function*(){let he=z.view.ma(Y);he.ns&&(he=yield Iv(U.localStore,z.query,!1).then(({documents:M})=>z.view.ma(M,he)));let ve=ne&&ne.targetChanges.get(z.targetId),it=ne&&ne.targetMismatches.get(z.targetId)!=null,Re=z.view.applyChanges(he,U.isPrimaryClient,ve,it);return Rv(U,z.targetId,Re.wa),Re.snapshot})}(n,C,E,I);let o=yield Iv(n.localStore,e,!0),l=new km(e,o.Ts),h=l.ma(o.documents),f=Al.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),m=l.applyChanges(h,n.isPrimaryClient,f);Rv(n,t,m.wa);let y=new Om(e,t,l);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot})}function ZD(n,e,t){return $(this,null,function*(){let i=Te(n),s=i.Fa.get(e),o=i.Ma.get(s.targetId);if(o.length>1)return i.Ma.set(s.targetId,o.filter(l=>!Eh(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||(yield vm(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&sg(i.remoteStore,s.targetId),Nm(i,s.targetId)}).catch(Ul))):(Nm(i,s.targetId),yield vm(i.localStore,s.targetId,!0))})}function QD(n,e){return $(this,null,function*(){let t=Te(n),i=t.Fa.get(e),s=t.Ma.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),sg(t.remoteStore,i.targetId))})}function YD(n,e,t){return $(this,null,function*(){let i=rI(n);try{let s=yield function(l,h){let f=Te(l),m=gt.now(),y=h.reduce((I,N)=>I.add(N.key),Ve()),C,E;return f.persistence.runTransaction("Locally write mutations","readwrite",I=>{let N=er(),U=Ve();return f.cs.getEntries(I,y).next(z=>{N=z,N.forEach((Y,ne)=>{ne.isValidDocument()||(U=U.add(Y))})}).next(()=>f.localDocuments.getOverlayedDocuments(I,N)).next(z=>{C=z;let Y=[];for(let ne of h){let he=rD(ne,C.get(ne.key).overlayedDocument);he!=null&&Y.push(new wi(ne.key,he,Gv(he.value.mapValue),Qi.exists(!0)))}return f.mutationQueue.addMutationBatch(I,m,Y,h)}).next(z=>{E=z;let Y=z.applyToLocalDocumentSet(C,U);return f.documentOverlayCache.saveOverlays(I,z.batchId,Y)})}).then(()=>({batchId:E.batchId,changes:ew(C)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,f){let m=l.Ba[l.currentUser.toKey()];m||(m=new _t(qe)),m=m.insert(h,f),l.Ba[l.currentUser.toKey()]=m}(i,s.batchId,t),yield $l(i,s.changes),yield Ih(i.remoteStore)}catch(s){let o=ug(s,"Failed to persist write");t.reject(o)}})}function Iw(n,e){return $(this,null,function*(){let t=Te(n);try{let i=yield ID(t.localStore,e);e.targetChanges.forEach((s,o)=>{let l=t.Na.get(o);l&&(Ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Ye(l.va):s.removedDocuments.size>0&&(Ye(l.va),l.va=!1))}),yield $l(t,i,e)}catch(i){yield Ul(i)}})}function xv(n,e,t){let i=Te(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let s=[];i.Fa.forEach((o,l)=>{let h=l.view.Z_(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){let f=Te(l);f.onlineState=h;let m=!1;f.queries.forEach((y,C)=>{for(let E of C.j_)E.Z_(h)&&(m=!0)}),m&&dg(f)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function XD(n,e,t){return $(this,null,function*(){let i=Te(n);i.sharedClientState.updateQueryState(e,"rejected",t);let s=i.Na.get(e),o=s&&s.key;if(o){let l=new _t(me.comparator);l=l.insert(o,Zn.newNoDocument(o,Ae.min()));let h=Ve().add(o),f=new Zc(Ae.min(),new Map,new _t(qe),l,h);yield Iw(i,f),i.Oa=i.Oa.remove(o),i.Na.delete(e),fg(i)}else yield vm(i.localStore,e,!1).then(()=>Nm(i,e,t)).catch(Ul)})}function JD(n,e){return $(this,null,function*(){let t=Te(n),i=e.batch.batchId;try{let s=yield DD(t.localStore,e);Pw(t,i,null),Aw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield $l(t,s)}catch(s){yield Ul(s)}})}function eI(n,e,t){return $(this,null,function*(){let i=Te(n);try{let s=yield function(l,h){let f=Te(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return f.mutationQueue.lookupMutationBatch(m,h).next(C=>(Ye(C!==null),y=C.keys(),f.mutationQueue.removeMutationBatch(m,C))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>f.localDocuments.getDocuments(m,y))})}(i.localStore,e);Pw(i,e,t),Aw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield $l(i,s)}catch(s){yield Ul(s)}})}function Aw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Pw(n,e,t){let i=Te(n),s=i.Ba[i.currentUser.toKey()];if(s){let o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function Nm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||Mw(n,i)})}function Mw(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(sg(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),fg(n))}function Rv(n,e,t){for(let i of t)i instanceof lh?(n.La.addReference(i.key,e),tI(n,i)):i instanceof uh?(se("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||Mw(n,i.key)):Ce()}function tI(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(se("SyncEngine","New document in limbo: "+t),n.xa.add(i),fg(n))}function fg(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new me(ft.fromString(e)),i=n.qa.next();n.Na.set(i,new Lm(t)),n.Oa=n.Oa.insert(t,i),ww(n.remoteStore,new Pl(_i(bh(t.path)),i,"TargetPurposeLimboResolution",zv.oe))}}function $l(n,e,t){return $(this,null,function*(){let i=Te(n),s=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,f)=>{l.push(i.Ka(f,e,t).then(m=>{var y;if((m||t)&&i.isPrimaryClient){let C=m?!m.fromCache:(y=t?.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,C?"current":"not-current")}if(m){s.push(m);let C=mm.Wi(f.targetId,m);o.push(C)}}))}),yield Promise.all(l),i.Ca.d_(s),yield function(f,m){return $(this,null,function*(){let y=Te(f);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>Z.forEach(m,E=>Z.forEach(E.$i,I=>y.persistence.referenceDelegate.addReference(C,E.targetId,I)).next(()=>Z.forEach(E.Ui,I=>y.persistence.referenceDelegate.removeReference(C,E.targetId,I)))))}catch(C){if(!zl(C))throw C;se("LocalStore","Failed to update sequence numbers: "+C)}for(let C of m){let E=C.targetId;if(!C.fromCache){let I=y.os.get(E),N=I.snapshotVersion,U=I.withLastLimboFreeSnapshotVersion(N);y.os=y.os.insert(E,U)}}})}(i.localStore,o))})}function nI(n,e){return $(this,null,function*(){let t=Te(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());let i=yield yw(t.localStore,e);t.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(f=>{f.reject(new J(j.CANCELLED,l))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield $l(t,i.hs)}})}function iI(n,e){let t=Te(n),i=t.Na.get(e);if(i&&i.va)return Ve().add(i.key);{let s=Ve(),o=t.Ma.get(e);if(!o)return s;for(let l of o){let h=t.Fa.get(l);s=s.unionWith(h.view.Va)}return s}}function xw(n){let e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XD.bind(null,e),e.Ca.d_=qD.bind(null,e.eventManager),e.Ca.$a=GD.bind(null,e.eventManager),e}function rI(n){let e=Te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eI.bind(null,e),e}var kv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return $(this,null,function*(){this.serializer=Th(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return TD(this.persistence,new _m,t.initialUser,this.serializer)}Ga(t){return new dm(pm.Zr,this.serializer)}Wa(t){return new wm}terminate(){return $(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var sI=(()=>{class n{initialize(t,i){return $(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>xv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nI.bind(null,this.syncEngine),yield $D(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new xm}()}createDatastore(t){let i=Th(t.databaseInfo.databaseId),s=function(l){return new Em(l)}(t.databaseInfo);return function(l,h,f,m){return new Dm(l,h,f,m)}(t.authCredentials,t.appCheckCredentials,s,i)}createRemoteStore(t){return function(s,o,l,h,f){return new Am(s,o,l,h,f)}(this.localStore,this.datastore,t.asyncQueue,i=>xv(this.syncEngine,i,0),function(){return nh.D()?new nh:new Cm}())}createSyncEngine(t,i){return function(o,l,h,f,m,y,C){let E=new Fm(o,l,h,f,m,y);return C&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return $(this,null,function*(){var t,i;yield function(o){return $(this,null,function*(){let l=Te(o);se("RemoteStore","RemoteStore shutting down."),l.L_.add(5),yield jl(l),l.k_.shutdown(),l.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var kl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Yi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Vm=class{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Lt.UNAUTHENTICATED,this.clientId=zc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,l=>$(this,null,function*(){se("FirestoreClient","Received user=",l.uid),yield this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,l=>(se("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>$(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=ug(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function gp(n,e){return $(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(s=>$(this,null,function*(){i.isEqual(s)||(yield yw(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Ov(n,e){return $(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield oI(n);se("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Av(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Av(e.remoteStore,s)),n._onlineComponents=e})}function oI(n){return $(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{yield gp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),yield gp(n,new kv)}}else se("FirestoreClient","Using default OfflineComponentProvider"),yield gp(n,new kv);return n._offlineComponents})}function Rw(n){return $(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ov(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),yield Ov(n,new sI))),n._onlineComponents})}function aI(n){return Rw(n).then(e=>e.syncEngine)}function ch(n){return $(this,null,function*(){let e=yield Rw(n),t=e.eventManager;return t.onListen=HD.bind(null,e.syncEngine),t.onUnlisten=ZD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QD.bind(null,e.syncEngine),t})}function lI(n,e,t={}){let i=new Wn;return n.asyncQueue.enqueueAndForget(()=>$(this,null,function*(){return function(o,l,h,f,m){let y=new kl({next:E=>{y.Za(),l.enqueueAndForget(()=>hg(o,C));let I=E.docs.has(h);!I&&E.fromCache?m.reject(new J(j.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&f&&f.source==="server"?m.reject(new J(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),C=new Rl(bh(h.path),y,{includeMetadataChanges:!0,_a:!0});return cg(o,C)}(yield ch(n),n.asyncQueue,e,t,i)})),i.promise}function uI(n,e,t={}){let i=new Wn;return n.asyncQueue.enqueueAndForget(()=>$(this,null,function*(){return function(o,l,h,f,m){let y=new kl({next:E=>{y.Za(),l.enqueueAndForget(()=>hg(o,C)),E.fromCache&&f.source==="server"?m.reject(new J(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),C=new Rl(h,y,{includeMetadataChanges:!0,_a:!0});return cg(o,C)}(yield ch(n),n.asyncQueue,e,t,i)})),i.promise}function kw(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Lv=new Map;function Ow(n,e,t){if(!t)throw new J(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cI(n,e,t,i){if(e===!0&&i===!0)throw new J(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Fv(n){if(!me.isDocumentKey(n))throw new J(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Nv(n){if(me.isDocumentKey(n))throw new J(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ah(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce()}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ah(n);throw new J(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hI(n,e){if(e<=0)throw new J(j.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var hh=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},No=class{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hh(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new _p;switch(i.type){case"firstParty":return new Cp(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return $(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=Lv.get(t);i&&(se("ComponentProvider","Removing Datastore"),Lv.delete(t),i.terminate())}(this),Promise.resolve()}};function Lw(n,e,t,i={}){var s;let o=(n=Nn(n,No))._getSettings(),l=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,f;if(typeof i.mockUserToken=="string")h=i.mockUserToken,f=Lt.MOCK_USER;else{h=B_(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);let m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Lt(m)}n._authCredentials=new yp(new Uc(h,f))}}var Ci=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},tn=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Er=class n extends Ci{constructor(e,t,i){super(e,t,bh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new me(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Fw(n,e,...t){if(n=Rn(n),Ow("collection","path",e),n instanceof No){let i=ft.fromString(e,...t);return Nv(i),new Er(n,null,i)}{if(!(n instanceof tn||n instanceof Er))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(ft.fromString(e,...t));return Nv(i),new Er(n.firestore,null,i)}}function pg(n,e,...t){if(n=Rn(n),arguments.length===1&&(e=zc.newId()),Ow("doc","path",e),n instanceof No){let i=ft.fromString(e,...t);return Fv(i),new tn(n,null,new me(i))}{if(!(n instanceof tn||n instanceof Er))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(ft.fromString(e,...t));return Fv(i),new tn(n.firestore,n instanceof Er?n.converter:null,new me(i))}}var dh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ih(this,"async_queue_retry"),this.Vu=()=>{let i=mp();i&&se("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=mp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=mp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Wn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return $(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zl(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw Yi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let s=Pm.createAndSchedule(this,e,t,i,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&Ce()}verifyOperationInProgress(){}wu(){return $(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Vv(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let s=t;for(let o of i)if(o in s&&typeof s[o]=="function")return!0;return!1}(n,["next","error","complete"])}var bi=class extends No{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new dh,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return $(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new dh(e),this._firestoreClient=void 0,yield e}})}};function Nw(n,e){let t=typeof n=="object"?n:W_(),i=typeof n=="string"?n:e||"(default)",s=H_(t,"firestore").getImmediate({identifier:i});if(!s._initialized){let o=V_("firestore");o&&Lw(s,...o)}return s}function Ph(n){if(n._terminated)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||dI(n),n._firestoreClient}function dI(n){var e,t,i;let s=n._freezeSettings(),o=function(h,f,m,y){return new Dp(h,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,kw(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new Vm(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){let f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}}(n._componentsProvider))}var Ol=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Zt.fromBase64String(e))}catch(t){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Vo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Mr=class{constructor(e){this._methodName=e}};var Ll=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}};var Fl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}};var fI=/^__.*__$/,Bm=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new wi(e,this.data,this.fieldMask,t,this.fieldTransforms):new bs(e,this.data,t,this.fieldTransforms)}},fh=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new wi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Vw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}var ph=class n{constructor(e,t,i,s,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return gh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Vw(this.Cu)&&fI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Um=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Th(e)}Qu(e,t,i,s=!1){return new ph({Cu:e,methodName:t,qu:i,path:Sn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Mh(n){let e=n._freezeSettings(),t=Th(n._databaseId);return new Um(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pI(n,e,t,i,s,o={}){let l=n.Qu(o.merge||o.mergeFields?2:0,e,t,s);mg("Data must be an object, but it was:",l,i);let h=zw(i,l),f,m;if(o.merge)f=new Fn(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){let y=[];for(let C of o.mergeFields){let E=qm(e,C,t);if(!l.contains(E))throw new J(j.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);$w(y,E)||y.push(E)}f=new Fn(y),m=l.fieldTransforms.filter(C=>f.covers(C.field))}else f=null,m=l.fieldTransforms;return new Bm(new En(h),f,m)}var mh=class n extends Mr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Bw(n,e,t){return new ph({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var zm=class n extends Mr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Bw(this,e,!0),i=this.Ku.map(o=>Ts(o,t)),s=new Ir(i);return new Dl(e.path,s)}isEqual(e){return e instanceof n&&Id(this.Ku,e.Ku)}},jm=class n extends Mr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Bw(this,e,!0),i=this.Ku.map(o=>Ts(o,t)),s=new Ar(i);return new Dl(e.path,s)}isEqual(e){return e instanceof n&&Id(this.Ku,e.Ku)}},$m=class n extends Mr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Cs(e.serializer,iw(e.serializer,this.$u));return new Dl(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function mI(n,e,t,i){let s=n.Qu(1,e,t);mg("Data must be an object, but it was:",s,i);let o=[],l=En.empty();Es(i,(f,m)=>{let y=gg(e,f,t);m=Rn(m);let C=s.Nu(y);if(m instanceof mh)o.push(y);else{let E=Ts(m,C);E!=null&&(o.push(y),l.set(y,E))}});let h=new Fn(o);return new fh(l,h,s.fieldTransforms)}function gI(n,e,t,i,s,o){let l=n.Qu(1,e,t),h=[qm(e,i,t)],f=[s];if(o.length%2!=0)throw new J(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(qm(e,o[E])),f.push(o[E+1]);let m=[],y=En.empty();for(let E=h.length-1;E>=0;--E)if(!$w(m,h[E])){let I=h[E],N=f[E];N=Rn(N);let U=l.Nu(I);if(N instanceof mh)m.push(I);else{let z=Ts(N,U);z!=null&&(m.push(I),y.set(I,z))}}let C=new Fn(m);return new fh(y,C,l.fieldTransforms)}function Uw(n,e,t,i=!1){return Ts(t,n.Qu(i?4:3,e))}function Ts(n,e){if(jw(n=Rn(n)))return mg("Unsupported field value:",e,n),zw(n,e);if(n instanceof Mr)return function(i,s){if(!Vw(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){let o=[],l=0;for(let h of i){let f=Ts(h,s.Lu(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}}(n,e)}return function(i,s){if((i=Rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return iw(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=gt.fromDate(i);return{timestampValue:Jc(s.serializer,o)}}if(i instanceof gt){let o=new gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Jc(s.serializer,o)}}if(i instanceof Ll)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ol)return{bytesValue:hw(s.serializer,i._byteString)};if(i instanceof tn){let o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:rg(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Fl)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return ig(h.serializer,f)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${Ah(i)}`)}(n,e)}function zw(n,e){let t={};return jv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(n,(i,s)=>{let o=Ts(s,e.Mu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function jw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Ll||n instanceof Ol||n instanceof tn||n instanceof Mr||n instanceof Fl)}function mg(n,e,t){if(!jw(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){let i=Ah(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function qm(n,e,t){if((e=Rn(e))instanceof Vo)return e._internalPath;if(typeof e=="string")return gg(n,e);throw gh("Field path arguments must be of type string or ",n,!1,void 0,t)}var _I=new RegExp("[~\\*/\\[\\]]");function gg(n,e,t){if(e.search(_I)>=0)throw gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vo(...e.split("."))._internalPath}catch{throw gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gh(n,e,t,i,s){let o=i&&!i.isEmpty(),l=s!==void 0,h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${s}`),f+=")"),new J(j.INVALID_ARGUMENT,h+n+f)}function $w(n,e){return n.some(t=>t.isEqual(e))}var Nl=class{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Gm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(xh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Gm=class extends Nl{data(){return super.data()}};function xh(n,e){return typeof e=="string"?gg(n,e):e instanceof Vo?e._internalPath:e._delegate._internalPath}function qw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new J(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vl=class{},Bo=class extends Vl{};function Gw(n,e,...t){let i=[];e instanceof Vl&&i.push(e),i=i.concat(t),function(o){let l=o.filter(f=>f instanceof Hm).length,h=o.filter(f=>f instanceof _h).length;if(l>1||l>0&&h>0)throw new J(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let s of i)n=s._apply(n);return n}var _h=class n extends Bo{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return Qw(e._query,t),new Ci(e.firestore,e.converter,Bp(e._query,t))}_parse(e){let t=Mh(e.firestore);return function(o,l,h,f,m,y,C){let E;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new J(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Uv(C,y);let I=[];for(let N of C)I.push(Bv(f,o,N));E={arrayValue:{values:I}}}else E=Bv(f,o,C)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Uv(C,y),E=Uw(h,l,C,y==="in"||y==="not-in");return Et.create(m,y,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Hw(n,e,t){let i=e,s=xh("where",n);return _h._create(s,i,t)}var Hm=class n extends Vl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Qn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let l=s,h=o.getFlattenedFilters();for(let f of h)Qw(l,f),l=Bp(l,f)}(e._query,t),new Ci(e.firestore,e.converter,Bp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Km=class n extends Bo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(s,o,l){if(s.startAt!==null)throw new J(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new J(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ws(o,l)}(e._query,this._field,this._direction);return new Ci(e.firestore,e.converter,function(s,o){let l=s.explicitOrderBy.concat([o]);return new Ji(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}};function Kw(n,e="asc"){let t=e,i=xh("orderBy",n);return Km._create(i,t)}var Wm=class n extends Bo{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new Ci(e.firestore,e.converter,Wc(e._query,this._limit,this._limitType))}};function Ww(n){return hI("limit",n),Wm._create("limit",n,"F")}var Zm=class n extends Bo{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=yI(e,this.type,this._docOrFields,this._inclusive);return new Ci(e.firestore,e.converter,function(s,o){return new Ji(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)}(e._query,t))}};function Zw(...n){return Zm._create("startAfter",n,!1)}function yI(n,e,t,i){if(t[0]=Rn(t[0]),t[0]instanceof Nl)return function(o,l,h,f,m){if(!f)throw new J(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);let y=[];for(let C of Do(o))if(C.field.isKeyField())y.push(Hc(l,f.key));else{let E=f.data.field(C.field);if(Ch(E))throw new J(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){let I=C.field.canonicalString();throw new J(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}y.push(E)}return new Tr(y,m)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{let s=Mh(n.firestore);return function(l,h,f,m,y,C){let E=l.explicitOrderBy;if(y.length>E.length)throw new J(j.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let I=[];for(let N=0;N<y.length;N++){let U=y[N];if(E[N].field.isKeyField()){if(typeof U!="string")throw new J(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof U}`);if(!ng(l)&&U.indexOf("/")!==-1)throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${U}' contains a slash.`);let z=l.path.child(ft.fromString(U));if(!me.isDocumentKey(z))throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${z}' is not because it contains an odd number of segments.`);let Y=new me(z);I.push(Hc(h,Y))}else{let z=Uw(f,m,U);I.push(z)}}return new Tr(I,C)}(n._query,n.firestore._databaseId,s,e,t,i)}}function Bv(n,e,t){if(typeof(t=Rn(t))=="string"){if(t==="")throw new J(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ng(e)&&t.indexOf("/")!==-1)throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(ft.fromString(t));if(!me.isDocumentKey(i))throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Hc(n,new me(i))}if(t instanceof tn)return Hc(n,t._key);throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ah(t)}.`)}function Uv(n,e){if(!Array.isArray(n)||n.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qw(n,e){let t=function(s,o){for(let l of s)for(let h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Qm=class{convertValue(e,t="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Es(e,(s,o)=>{i[s]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,s;let o=(s=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(l=>dt(l.doubleValue));return new Fl(o)}convertGeoPoint(e){return new Ll(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Xm(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){let t=Xi(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=ft.fromString(e);Ye(_w(i));let s=new Gc(i.get(1),i.get(3)),o=new me(i.popFirst(5));return s.isEqual(t)||Yi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function vI(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var gs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},yh=class extends Nl{constructor(e,t,i,s,o,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ao(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(xh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Ao=class extends yh{data(e={}){return super.data(e)}},vh=class{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new gs(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ao(this._firestore,this._userDataWriter,i.key,i,new gs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{let f=new Ao(s._firestore,s._userDataWriter,h.doc.key,h.doc,new gs(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{let f=new Ao(s._firestore,s._userDataWriter,h.doc.key,h.doc,new gs(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter),m=-1,y=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:wI(h.type),doc:f,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function wI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}function Yw(n){n=Nn(n,tn);let e=Nn(n.firestore,bi);return lI(Ph(e),n._key).then(t=>iC(e,n,t))}var Bl=class extends Qm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ol(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,t)}};function Xw(n){n=Nn(n,Ci);let e=Nn(n.firestore,bi),t=Ph(e),i=new Bl(e);return qw(n._query),uI(t,n._query).then(s=>new vh(e,i,n,s))}function Jw(n,e,t,...i){n=Nn(n,tn);let s=Nn(n.firestore,bi),o=Mh(s),l;return l=typeof(e=Rn(e))=="string"||e instanceof Vo?gI(o,"updateDoc",n._key,e,t,i):mI(o,"updateDoc",n._key,e),_g(s,[l.toMutation(n._key,Qi.exists(!0))])}function eC(n){return _g(Nn(n.firestore,bi),[new Il(n._key,Qi.none())])}function tC(n,e){let t=Nn(n.firestore,bi),i=pg(n),s=vI(n.converter,e);return _g(t,[pI(Mh(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Qi.exists(!1))]).then(()=>i)}function nC(n,...e){var t,i,s;n=Rn(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Vv(e[l])||(o=e[l],l++);let h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Vv(e[l])){let C=e[l];e[l]=(t=C.next)===null||t===void 0?void 0:t.bind(C),e[l+1]=(i=C.error)===null||i===void 0?void 0:i.bind(C),e[l+2]=(s=C.complete)===null||s===void 0?void 0:s.bind(C)}let f,m,y;if(n instanceof tn)m=Nn(n.firestore,bi),y=bh(n._key.path),f={next:C=>{e[l]&&e[l](iC(m,n,C))},error:e[l+1],complete:e[l+2]};else{let C=Nn(n,Ci);m=Nn(C.firestore,bi),y=C._query;let E=new Bl(m);f={next:I=>{e[l]&&e[l](new vh(m,E,C,I))},error:e[l+1],complete:e[l+2]},qw(n._query)}return function(E,I,N,U){let z=new kl(U),Y=new Rl(I,z,N);return E.asyncQueue.enqueueAndForget(()=>$(this,null,function*(){return cg(yield ch(E),Y)})),()=>{z.Za(),E.asyncQueue.enqueueAndForget(()=>$(this,null,function*(){return hg(yield ch(E),Y)}))}}(Ph(m),y,h,f)}function _g(n,e){return function(i,s){let o=new Wn;return i.asyncQueue.enqueueAndForget(()=>$(this,null,function*(){return YD(yield aI(i),s,o)})),o.promise}(Ph(n),e)}function iC(n,e,t){let i=t.docs.get(e._key),s=new Bl(n);return new yh(n,s,e._key,i,new gs(t.hasPendingWrites,t.fromCache),e.converter)}function rC(...n){return new zm("arrayUnion",n)}function sC(...n){return new jm("arrayRemove",n)}function oC(n){return new $m("increment",n)}(function(e,t=!0){(function(s){Uo=s})(K_),G_(new $_("firestore",(i,{instanceIdentifier:s,options:o})=>{let l=i.getProvider("app").getImmediate(),h=new bi(new vp(i.getProvider("auth-internal")),new Ep(i.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(m.options.projectId,y)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),La(av,"4.7.3",e),La(av,"4.7.3","esm2017")})();var Ds=class{constructor(e){return e}},aC="firestore",yg=class{constructor(){return Y_(aC)}};var vg=new Xe("angularfire2.firestore-instances");function CI(n,e){let t=Q_(aC,n,e);return t&&new Ds(t)}function bI(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ds(i)}}var EI={provide:yg,deps:[[new pr,vg]]},SI={provide:Ds,useFactory:CI,deps:[[new pr,vg],e0]};function lC(n,...e){return La("angularfire",Z_.full,"fst"),Pa([SI,EI,{provide:vg,useFactory:bI(n),multi:!0,deps:[_n,Jr,J_,t0,[new pr,s0],[new pr,X_],...e]}])}var uC=Rt(tC,!0);var wg=Rt(sC,!0),Cg=Rt(rC,!0);var ql=Rt(Fw,!0);var cC=Rt(eC,!0);var Is=Rt(pg,!0);var hC=Rt(Yw,!0);var bg=Rt(Xw,!0);var dC=Rt(Nw,!0);var Rh=Rt(oC,!0);var Eg=Rt(Ww,!0);var fC=Rt(nC,!0);var kh=Rt(Kw,!0);var Gl=Rt(Gw,!0);var pC=Rt(Zw,!0);var As=Rt(Jw,!0);var mC=Rt(Hw,!0);var gC={production:!1,firebase:{apiKey:"AIzaSyA9H-CYGk2kEsfzKyFMA6cdPQRRQMf750M",authDomain:"bengaluru-swada-1ecca.firebaseapp.com",projectId:"bengaluru-swada-1ecca",storageBucket:"bengaluru-swada-1ecca.firebasestorage.app",messagingSenderId:"831575973864",appId:"1:831575973864:web:8ba5a2fa1e28b9e16bce5d",measurementId:"G-DEZTYKDN53"},cloudflare:{accountId:"49f1c9c0ed449773191d4a4ee7041a2e",streamApiToken:"9wIo0-ar2GwKCeKXzFaX5uV2PLGjnO9HHoVUs6AL",customerCode:"YOUR_CUSTOMER_CODE"}};var Ps=class{hasShownSplash=!1;markSplashShown(){this.hasShownSplash=!0}shouldShowSplash(){return!this.hasShownSplash}reset(){this.hasShownSplash=!1}},Ms=()=>{let n=ae(Qe);return ae(Ps).shouldShowSplash()?(console.log("[SplashGuard] Redirecting to splash screen"),n.createUrlTree(["/"])):!0};var Oh=class n{constructor(e,t,i){this.router=e;this.auth=t;this.appInit=i}minSplashDuration=3e3;splashStartTime=0;authUnsubscribe;ngOnInit(){this.splashStartTime=Date.now(),console.log("[Splash] Splash screen started at:",new Date().toISOString()),this.authUnsubscribe=l0(this.auth,e=>{let t=Date.now()-this.splashStartTime,i=Math.max(0,this.minSplashDuration-t);console.log(`[Splash] Auth checked. Elapsed: ${t}ms, Waiting additional: ${i}ms`),setTimeout(()=>{this.appInit.markSplashShown(),e?(console.log("[Splash] User is logged in:",e.uid),this.router.navigate(["/main-app"],{replaceUrl:!0})):(console.log("[Splash] User is not logged in, navigating to phone-input"),this.router.navigate(["/phone-input"],{replaceUrl:!0}))},i)})}ngOnDestroy(){this.authUnsubscribe&&this.authUnsubscribe()}static \u0275fac=function(t){return new(t||n)(le(Qe),le(an),le(Ps))};static \u0275cmp=lt({type:n,selectors:[["app-splash"]],standalone:!0,features:[ht],decls:2,vars:0,consts:[[1,"splash-container"],["src","logo.jpg","alt","Bengaluru Swada Logo",1,"splash-logo"]],template:function(t,i){t&1&&(P(0,"div",0),ue(1,"img",1),O())},dependencies:[yt],styles:[".splash-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#fff}.splash-logo[_ngcontent-%COMP%]{max-width:80%;max-height:50vh;object-fit:contain;animation:_ngcontent-%COMP%_fadeIn 1.5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}"]})};var SC=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(le(is),le(es))}}static{this.\u0275dir=Vt({type:n})}}return n})(),TC=(()=>{class n extends SC{static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Ni(n)))(s||n)}})()}static{this.\u0275dir=Vt({type:n,features:[Vi]})}}return n})(),Mg=new Xe("");var II={provide:Mg,useExisting:Xr(()=>ln),multi:!0};function AI(){let n=qi()?qi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var PI=new Xe(""),ln=(()=>{class n extends SC{constructor(t,i,s){super(t,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!AI())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(le(is),le(es),le(PI,8))}}static{this.\u0275dir=Vt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&de("input",function(l){return s._handleInput(l.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(l){return s._compositionEnd(l.target.value)})},features:[rs([II]),Vi]})}}return n})();function Sg(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function MI(n){return n!=null&&typeof n.length=="number"}var Uh=new Xe(""),xI=new Xe("");function RI(n){return e=>{if(Sg(e.value)||Sg(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function kI(n){return e=>MI(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function OI(n){if(!n)return Tg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Sg(i.value))return null;let s=i.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}function Tg(n){return null}function DC(n){return n!=null}function IC(n){return Oa(n)?en(n):n}function AC(n){let e={};return n.forEach(t=>{e=t!=null?X(X({},e),t):e}),Object.keys(e).length===0?null:e}function PC(n,e){return e.map(t=>t(n))}function LI(n){return!n.validate}function MC(n){return n.map(e=>LI(e)?e:t=>e.validate(t))}function FI(n){if(!n)return null;let e=n.filter(DC);return e.length==0?null:function(t){return AC(PC(t,e))}}function xC(n){return n!=null?FI(MC(n)):null}function NI(n){if(!n)return null;let e=n.filter(DC);return e.length==0?null:function(t){let i=PC(t,e).map(IC);return d_(i).pipe($e(AC))}}function RC(n){return n!=null?NI(MC(n)):null}function _C(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VI(n){return n._rawValidators}function BI(n){return n._rawAsyncValidators}function Dg(n){return n?Array.isArray(n)?n:[n]:[]}function Nh(n,e){return Array.isArray(n)?n.includes(e):n===e}function yC(n,e){let t=Dg(e);return Dg(n).forEach(s=>{Nh(t,s)||t.push(s)}),t}function vC(n,e){return Dg(e).filter(t=>!Nh(n,t))}var Vh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=RC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ig=class extends Vh{get formDirective(){return null}get path(){return null}},Ql=class extends Vh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ag=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},UI={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},A2=He(X({},UI),{"[class.ng-submitted]":"isSubmitted"}),Vn=(()=>{class n extends Ag{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(le(Ql,2))}}static{this.\u0275dir=Vt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Bt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Vi]})}}return n})();var Hl="VALID",Fh="INVALID",jo="PENDING",Kl="DISABLED",qo=class{},Bh=class extends qo{constructor(e,t){super(),this.value=e,this.source=t}},Wl=class extends qo{constructor(e,t){super(),this.pristine=e,this.source=t}},Zl=class extends qo{constructor(e,t){super(),this.touched=e,this.source=t}},$o=class extends qo{constructor(e,t){super(),this.status=e,this.source=t}};function zI(n){return(zh(n)?n.validators:n)||null}function jI(n){return Array.isArray(n)?xC(n):n||null}function $I(n,e){return(zh(e)?e.asyncValidators:n)||null}function qI(n){return Array.isArray(n)?RC(n):n||null}function zh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Pg=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=qu(()=>this.statusReactive()),this.statusReactive=zu(void 0),this._pristine=qu(()=>this.pristineReactive()),this.pristineReactive=zu(!0),this._touched=qu(()=>this.touchedReactive()),this.touchedReactive=zu(!1),this._events=new si,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return mr(this.statusReactive)}set status(e){mr(()=>this.statusReactive.set(e))}get valid(){return this.status===Hl}get invalid(){return this.status===Fh}get pending(){return this.status==jo}get disabled(){return this.status===Kl}get enabled(){return this.status!==Kl}get pristine(){return mr(this.pristineReactive)}set pristine(e){mr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return mr(this.touchedReactive)}set touched(e){mr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(yC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vC(e,this._rawAsyncValidators))}hasValidator(e){return Nh(this._rawValidators,e)}hasAsyncValidator(e){return Nh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(He(X({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Zl(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Zl(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(He(X({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Wl(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Wl(!0,i))}markAsPending(e={}){this.status=jo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $o(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(He(X({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Kl,this.errors=null,this._forEachChild(s=>{s.disable(He(X({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Bh(this.value,i)),this._events.next(new $o(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(He(X({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(s=>s(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Hl,this._forEachChild(i=>{i.enable(He(X({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(He(X({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hl||this.status===jo)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Bh(this.value,t)),this._events.next(new $o(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(He(X({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kl:Hl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=jo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=IC(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,s)=>i&&i._find(s),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new $o(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new ut,this.statusChanges=new ut}_calculateStatus(){return this._allControlsDisabled()?Kl:this.errors?Fh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jo)?jo:this._anyControlsHaveStatus(Fh)?Fh:Hl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),s=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),s&&this._events.next(new Wl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Zl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=jI(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=qI(this._rawAsyncValidators)}};var kC=new Xe("CallSetDisabledState",{providedIn:"root",factory:()=>xg}),xg="always";function GI(n,e){return[...e.path,n]}function HI(n,e,t=xg){WI(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),ZI(n,e),YI(n,e),QI(n,e),KI(n,e)}function wC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KI(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function WI(n,e){let t=VI(n);e.validator!==null?n.setValidators(_C(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=BI(n);e.asyncValidator!==null?n.setAsyncValidators(_C(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let s=()=>n.updateValueAndValidity();wC(e._rawValidators,s),wC(e._rawAsyncValidators,s)}function ZI(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&OC(n,e)})}function QI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&OC(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function OC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YI(n,e){let t=(i,s)=>{e.valueAccessor.writeValue(i),s&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function XI(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function JI(n){return Object.getPrototypeOf(n.constructor)===TC}function eA(n,e){if(!e)return null;Array.isArray(e);let t,i,s;return e.forEach(o=>{o.constructor===ln?t=o:JI(o)?i=o:s=o}),s||i||t||null}function CC(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function bC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var tA=class extends Pg{constructor(e=null,t,i){super(zI(t),$I(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(bC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){CC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){CC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){bC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var nA={provide:Ql,useExisting:Xr(()=>Tn)},EC=Promise.resolve(),Tn=(()=>{class n extends Ql{constructor(t,i,s,o,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new tA,this._registered=!1,this.name="",this.update=new ut,this._parent=t,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=eA(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),XI(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){HI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){EC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,s=i!==0&&ss(i);EC.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?GI(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(le(Ig,9),le(Uh,10),le(xI,10),le(Mg,10),le(yn,8),le(kC,8))}}static{this.\u0275dir=Vt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rs([nA]),Vi,Gn]})}}return n})();var iA={provide:Mg,useExisting:Xr(()=>Rg),multi:!0},Rg=(()=>{class n extends TC{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Ni(n)))(s||n)}})()}static{this.\u0275dir=Vt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&de("input",function(l){return s.onChange(l.target.value)})("blur",function(){return s.onTouched()})},features:[rs([iA]),Vi]})}}return n})();function rA(n){return typeof n=="number"?n:parseInt(n,10)}function sA(n){return typeof n=="number"?n:parseFloat(n)}var kg=(()=>{class n{constructor(){this._validator=Tg}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Tg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Vt({type:n,features:[Gn]})}}return n})();var oA={provide:Uh,useExisting:Xr(()=>Og),multi:!0},Og=(()=>{class n extends kg{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>sA(t),this.createValidator=t=>RI(t)}static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Ni(n)))(s||n)}})()}static{this.\u0275dir=Vt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,s){i&2&&Bi("min",s._enabled?s.min:null)},inputs:{min:"min"},features:[rs([oA]),Vi]})}}return n})();var aA={provide:Uh,useExisting:Xr(()=>Yl),multi:!0},Yl=(()=>{class n extends kg{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>rA(t),this.createValidator=t=>kI(t)}static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Ni(n)))(s||n)}})()}static{this.\u0275dir=Vt({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,s){i&2&&Bi("maxlength",s._enabled?s.maxlength:null)},inputs:{maxlength:"maxlength"},features:[rs([aA]),Vi]})}}return n})(),lA={provide:Uh,useExisting:Xr(()=>Lg),multi:!0},Lg=(()=>{class n extends kg{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>OI(t)}static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Ni(n)))(s||n)}})()}static{this.\u0275dir=Vt({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,s){i&2&&Bi("pattern",s._enabled?s.pattern:null)},inputs:{pattern:"pattern"},features:[rs([lA]),Vi]})}}return n})();var uA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Fi({type:n})}static{this.\u0275inj=Li({})}}return n})();var Bn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:kC,useValue:t.callSetDisabledState??xg}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Fi({type:n})}static{this.\u0275inj=Li({imports:[uA]})}}return n})();var Ho=class n{confirmationResult=null;phoneNumber="";setConfirmationResult(e){this.confirmationResult=e}getConfirmationResult(){return this.confirmationResult}setPhoneNumber(e){this.phoneNumber=e}getPhoneNumber(){return this.phoneNumber}static \u0275fac=function(t){return new(t||n)};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})};function cA(n,e){if(n&1&&(P(0,"div",14)(1,"span"),W(2),O()()),n&2){let t=be();H(2),Tt("\u26A0\uFE0F ",t.error,"")}}function hA(n,e){n&1&&(P(0,"span"),W(1,"Continue"),O())}function dA(n,e){n&1&&(P(0,"span",15),W(1,"Sending OTP..."),O())}var jh=class n{constructor(e,t,i){this.router=e;this.auth=t;this.phoneAuthService=i}mobile="";valid=!1;loading=!1;error="";recaptchaVerifier;confirmationResult;ngOnInit(){setTimeout(()=>{this.recaptchaVerifier=new r0(this.auth,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA success"),"expired-callback":()=>this.error="ReCAPTCHA expired. Try again."}),this.recaptchaVerifier.render()})}onInput(){this.valid=/^\d{10}$/.test(this.mobile),this.error=""}continue(){return $(this,null,function*(){if(!(!this.valid||this.loading)){this.loading=!0,this.error="";try{let e="+91"+this.mobile;this.confirmationResult=yield u0(this.auth,e,this.recaptchaVerifier),this.phoneAuthService.setConfirmationResult(this.confirmationResult),this.phoneAuthService.setPhoneNumber(this.mobile),this.router.navigate(["/otp"])}catch(e){console.error(e),e.code==="auth/invalid-phone-number"?this.error="Invalid phone number.":e.code==="auth/too-many-requests"?this.error="Too many attempts. Try again later.":e.code==="auth/quota-exceeded"?this.error="SMS quota exceeded.":e.code==="auth/billing-not-enabled"?this.error="Firebase billing is not enabled. Please enable it in the Firebase Console.":this.error=`Failed to send OTP: ${e.message} (${e.code})`,this.loading=!1}}})}static \u0275fac=function(t){return new(t||n)(le(Qe),le(an),le(Ho))};static \u0275cmp=lt({type:n,selectors:[["app-phone-input"]],standalone:!0,features:[ht],decls:18,vars:8,consts:[[1,"phone-input-page"],[1,"mobile-input-section"],[1,"mobile-form"],[1,"welcome-text"],[1,"subtitle","light-grey"],[1,"input-container"],[1,"country-code"],["type","tel","id","mobileNumber","placeholder","Enter your mobile number","maxlength","10","pattern","[0-9]{10}",3,"ngModelChange","input","ngModel","disabled"],["class","error-message",4,"ngIf"],[1,"continue-btn",3,"click","disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"privacy-text","light-grey"],["id","recaptcha-container"],[1,"error-message"],[1,"loading-spinner"]],template:function(t,i){t&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),W(4,"Welcome to Bengaluru Swada!"),O(),P(5,"p",4),W(6," Enter your mobile number to discover amazing street food near you "),O(),P(7,"div",5)(8,"div",6),W(9,"+91"),O(),P(10,"input",7),Gt("ngModelChange",function(o){return qt(i.mobile,o)||(i.mobile=o),o}),de("input",function(){return i.onInput()}),O()(),je(11,cA,3,1,"div",8),P(12,"button",9),de("click",function(){return i.continue()}),je(13,hA,2,0,"span",10)(14,dA,2,0,"span",11),O(),P(15,"p",12),W(16," We'll send you an OTP to verify your number. Your privacy is important to us. "),O(),ue(17,"div",13),O()()()),t&2&&(H(10),$t("ngModel",i.mobile),te("disabled",i.loading),H(),te("ngIf",i.error),H(),Bt("active",i.valid&&!i.loading),te("disabled",!i.valid||i.loading),H(),te("ngIf",!i.loading),H(),te("ngIf",i.loading))},dependencies:[yt,kt,Bn,ln,Vn,Yl,Lg,Tn],styles:[".mobile-input-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1rem}.welcome-text[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-bottom:1rem}.mobile-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:2rem;line-height:1.5}.input-container[_ngcontent-%COMP%]{display:flex;background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;overflow:hidden;margin:2rem 0}.country-code[_ngcontent-%COMP%]{padding:1rem;border-right:1px solid #e9ecef;font-weight:600}#mobileNumber[_ngcontent-%COMP%]{flex:1;padding:1rem;border:none;outline:none;font-size:1.1rem;background:transparent}#mobileNumber[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#fee;border:1px solid #fcc;border-radius:8px;padding:.75rem 1rem;margin-bottom:1rem;color:#c33;font-size:.9rem;text-align:left}#recaptcha-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1.5rem 0;min-height:78px}.continue-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;font-weight:600;border-radius:12px;border:none;background:#dee2e6;color:#6c757d;margin-bottom:20px;cursor:pointer;transition:all .2s;font-size:1rem}.continue-btn.active[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;box-shadow:0 4px 15px #ff6b354d;transform:translateY(-1px)}.continue-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.privacy-text[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.4}.light-grey[_ngcontent-%COMP%]{color:#6c757d}"]})};var fA=()=>[0,1,2,3,4,5];function pA(n,e){if(n&1){let t=ct();P(0,"input",14),Gt("ngModelChange",function(s){let o=ge(t).index,l=be();return qt(l.otp[o],s)||(l.otp[o]=s),_e(s)}),de("input",function(){let s=ge(t).index,o=be();return _e(o.onOtpInput(s))}),O()}if(n&2){let t=e.index,i=be();Bt("error-border",i.hasError),$t("ngModel",i.otp[t])}}function mA(n,e){if(n&1&&(P(0,"p",15),W(1,"Resend in "),P(2,"span",16),W(3),O()()),n&2){let t=be();H(3),Tt("",t.countdown,"s")}}function gA(n,e){if(n&1){let t=ct();P(0,"p",17),de("click",function(){ge(t);let s=be();return _e(s.resend())}),W(1,"Resend OTP"),O()}}function _A(n,e){n&1&&(P(0,"div",18)(1,"div",19)(2,"div",20),ue(3,"div",21),O(),P(4,"h2"),W(5,"Verified!"),O(),P(6,"p"),W(7,"Redirecting..."),O()()())}var $h=class n{constructor(e,t,i){this.router=e;this.cdr=t;this.phoneAuthService=i;this.phone=this.phoneAuthService.getPhoneNumber(),this.confirmationResult=this.phoneAuthService.getConfirmationResult(),this.confirmationResult||this.router.navigate(["/phone-input"])}phone="";back=new ut;verified=new ut;otp=["","","","","",""];countdown=30;timerHandle;complete=!1;loading=!1;error="";confirmationResult=null;hasError=!1;isVerified=!1;ngOnInit(){this.startTimer()}startTimer(){clearInterval(this.timerHandle),this.countdown=30,this.timerHandle=setInterval(()=>{this.countdown>0?this.countdown--:clearInterval(this.timerHandle),this.cdr.detectChanges()},1e3)}onOtpInput(e){if(this.complete=this.otp.join("").length===6&&/^\d{6}$/.test(this.otp.join("")),this.error="",this.hasError=!1,this.otp[e]&&e<5){let t=document.querySelectorAll(".otp-input")[e+1];t&&t.focus()}}verify(){return $(this,null,function*(){if(!(!this.complete||this.loading||!this.confirmationResult)){this.loading=!0,this.error="",this.hasError=!1;try{let e=this.otp.join(""),t=yield this.confirmationResult.confirm(e);console.log("User signed in successfully:",t.user),this.isVerified=!0,this.loading=!1,setTimeout(()=>{this.router.navigate(["/location-permission"],{replaceUrl:!0})},2e3)}catch(e){console.error("Error verifying OTP:",e),e.code==="auth/invalid-verification-code"?this.error="Invalid OTP. Please check and try again.":e.code==="auth/code-expired"?this.error="OTP has expired. Please request a new one.":this.error="Verification failed. Please try again.",this.loading=!1,this.hasError=!0,this.otp=["","","","","",""],this.complete=!1}}})}resend(){this.router.navigate(["/phone-input"])}change(){this.router.navigate(["/phone-input"])}static \u0275fac=function(t){return new(t||n)(le(Qe),le(yn),le(Ho))};static \u0275cmp=lt({type:n,selectors:[["app-otp"]],outputs:{back:"back",verified:"verified"},standalone:!0,features:[ht],decls:21,vars:7,consts:[[1,"otp-container"],[1,"otp-section"],[1,"otp-form"],[1,"otp-title"],[1,"otp-subtitle"],[1,"phone-number"],["class","otp-input","type","text","inputmode","numeric","maxlength","1",3,"error-border","ngModel","ngModelChange","input",4,"ngFor","ngForOf"],[1,"verify-btn",3,"click","disabled"],[1,"resend-container"],[1,"resend-text"],["class","timer",4,"ngIf"],["class","resend-link",3,"click",4,"ngIf"],[3,"click"],["class","success-overlay",4,"ngIf"],["type","text","inputmode","numeric","maxlength","1",1,"otp-input",3,"ngModelChange","input","ngModel"],[1,"timer"],[1,"countdown"],[1,"resend-link",3,"click"],[1,"success-overlay"],[1,"success-content"],[1,"checkmark-circle"],[1,"checkmark","draw"]],template:function(t,i){t&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),W(4,"Verify Your Number"),O(),P(5,"p",4),W(6,"We've sent a 6-digit OTP to "),P(7,"span",5),W(8),O()(),P(9,"div",0),je(10,pA,1,3,"input",6),O(),P(11,"button",7),de("click",function(){return i.verify()}),W(12,"Verify OTP"),O(),P(13,"div",8)(14,"p",9),W(15,"Didn't receive OTP?"),O(),je(16,mA,4,1,"p",10)(17,gA,2,0,"p",11),O(),P(18,"div",12),de("click",function(){return i.change()}),W(19,"\u2190 Change Number"),O()()(),je(20,_A,8,0,"div",13),O()),t&2&&(H(8),Ut(i.phone),H(2),te("ngForOf",R_(6,fA)),H(),te("disabled",!i.complete),H(5),te("ngIf",i.countdown>0),H(),te("ngIf",i.countdown===0),H(3),te("ngIf",i.isVerified))},dependencies:[Bn,ln,Vn,Yl,Tn,yt,kn,kt],styles:['.otp-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1rem;background:#fff;font-family:Poppins,sans-serif}.otp-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.otp-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.otp-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin-bottom:2.5rem}.phone-number[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600}.otp-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-bottom:2rem;width:100%}@media (min-width: 400px){.otp-container[_ngcontent-%COMP%]{gap:1rem}}.otp-input[_ngcontent-%COMP%]{width:100%;max-width:45px;aspect-ratio:1;height:auto;border:1px solid #dee2e6;border-radius:12px;text-align:center;font-size:1.2rem;background:#fff;color:#495057;transition:all .2s;box-shadow:0 2px 5px #00000005;padding:0}@media (min-width: 400px){.otp-input[_ngcontent-%COMP%]{max-width:60px;font-size:1.5rem}}.otp-input[_ngcontent-%COMP%]:focus{border-color:#ff6b35;outline:none;box-shadow:0 0 0 3px #ff6b351a}.error-border[_ngcontent-%COMP%]{border-color:red!important;box-shadow:0 0 0 3px #ff00001a!important}.verify-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;border-radius:12px;border:none;background:#dfe4ea;color:#495057;font-size:1rem;font-weight:600;cursor:not-allowed;margin-bottom:2rem;transition:all .2s}.verify-btn[_ngcontent-%COMP%]:not([disabled]){background:#2c3e50;color:#fff;cursor:pointer;box-shadow:0 4px 10px #2c3e5033}.resend-container[_ngcontent-%COMP%]{margin-bottom:2rem;color:#7f8c8d;font-size:.9rem}.resend-text[_ngcontent-%COMP%]{margin-bottom:.3rem;cursor:pointer;font-size:.9rem;transition:color .2s}.resend-text[_ngcontent-%COMP%]:hover{color:#495057}.timer[_ngcontent-%COMP%]{color:#7f8c8d}.timer[_ngcontent-%COMP%]   .countdown[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600}.resend-link[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600;cursor:pointer;text-decoration:underline}.success-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffffff2;display:flex;justify-content:center;align-items:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.success-content[_ngcontent-%COMP%]{text-align:center}.success-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin:1rem 0 .5rem;font-size:2rem}.success-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d}.checkmark-circle[_ngcontent-%COMP%]{width:80px;height:80px;position:relative;display:inline-block;vertical-align:top;border-radius:50%;background-color:#2ecc71;animation:_ngcontent-%COMP%_scaleIn .3s cubic-bezier(.175,.885,.32,1.275) forwards}.checkmark[_ngcontent-%COMP%]:after{content:"";display:block;width:20px;height:40px;border:solid #fff;border-width:0 4px 4px 0;position:absolute;top:16px;left:28px;transform:rotate(45deg);opacity:0;animation:_ngcontent-%COMP%_checkmark .3s ease-out .3s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_checkmark{0%{opacity:0;height:0}to{opacity:1;height:40px}}']})};var Si=class n{userLocation=null;constructor(){}getUserLocation(){return $(this,null,function*(){return this.userLocation?this.userLocation:new Promise((e,t)=>{if("geolocation"in navigator)navigator.geolocation.getCurrentPosition(i=>{this.userLocation={latitude:i.coords.latitude,longitude:i.coords.longitude},e(this.userLocation)},i=>{console.error("Error getting location:",i);let s={latitude:12.9352,longitude:77.6245};this.userLocation=s,e(s)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5});else{let i={latitude:12.9352,longitude:77.6245};this.userLocation=i,e(i)}})})}setUserLocation(e,t){this.userLocation={latitude:e,longitude:t}}calculateDistance(e,t,i,s){let l=this.toRadians(i-e),h=this.toRadians(s-t),f=Math.sin(l/2)*Math.sin(l/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(i))*Math.sin(h/2)*Math.sin(h/2);return 6371*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))}formatDistance(e){return e<1?`${Math.round(e*1e3)} m`:`${e.toFixed(1)} km`}getDistanceFromUser(e,t){return $(this,null,function*(){let i=yield this.getUserLocation(),s=this.calculateDistance(i.latitude,i.longitude,e,t);return this.formatDistance(s)})}toRadians(e){return e*(Math.PI/180)}clearLocation(){this.userLocation=null}findNearestArea(e,t){let i=[{name:"Adugodi",pincode:"560030",lat:12.9716,lng:77.5946},{name:"Agaram",pincode:"560007",lat:12.8431,lng:77.4863},{name:"Air Force Stn. Yelahanka",pincode:"560063",lat:13.1048,lng:77.5763},{name:"Banashankari",pincode:"560050",lat:12.925453,lng:77.546761},{name:"Banashankari 2nd Stage",pincode:"560070",lat:12.9249,lng:77.5662},{name:"Banashankari 3rd Stage",pincode:"560085",lat:12.9216,lng:77.5543},{name:"Banashankari 6th Stage",pincode:"560062",lat:12.8963,lng:77.5353},{name:"Banaswadi",pincode:"560043",lat:13.0159,lng:77.6516},{name:"Basavanapura",pincode:"560036",lat:12.9835,lng:77.6773},{name:"Basaveshwaranagar",pincode:"560079",lat:12.9975,lng:77.5334},{name:"Bellandur",pincode:"560103",lat:12.9304,lng:77.6784},{name:"Bidadi",pincode:"562109",lat:12.8274,lng:77.3971},{name:"Bilekahalli",pincode:"560076",lat:12.8989,lng:77.6103},{name:"Binnamangala",pincode:"560038",lat:12.9837,lng:77.6388},{name:"Bommanahalli",pincode:"560068",lat:12.9082,lng:77.6245},{name:"Bommasandra",pincode:"560099",lat:12.8009,lng:77.699},{name:"Brookefield",pincode:"560037",lat:12.9698,lng:77.7184},{name:"BTM 2nd Stage",pincode:"560076",lat:12.9167,lng:77.6108},{name:"Budigere",pincode:"562129",lat:13.035,lng:77.7478},{name:"Byatarayanapura",pincode:"560026",lat:13.056,lng:77.5926},{name:"C V Raman Nagar",pincode:"560093",lat:12.9767,lng:77.6597},{name:"Chamarajpet",pincode:"560018",lat:12.9582,lng:77.5709},{name:"Channasandra",pincode:"560067",lat:12.9629,lng:77.758},{name:"Chikbasavanapura",pincode:"560067",lat:12.9948,lng:77.7327},{name:"Chickpet",pincode:"560053",lat:12.9662,lng:77.5767},{name:"Chikkalasandra",pincode:"560061",lat:12.9132,lng:77.5454},{name:"Choodasandra",pincode:"560099",lat:12.8848,lng:77.6785},{name:"Cox Town",pincode:"560005",lat:12.9996,lng:77.6229},{name:"D J Halli",pincode:"560005",lat:13.0083,lng:77.6228},{name:"Doddabidarakallu",pincode:"560073",lat:13.0426,lng:77.5019},{name:"Doorvaninagar",pincode:"560016",lat:13.0252,lng:77.6688},{name:"Ejipura",pincode:"560047",lat:12.9437,lng:77.6274},{name:"Electronic City",pincode:"560100",lat:12.8394,lng:77.677},{name:"Frazer Town",pincode:"560005",lat:12.999,lng:77.6226},{name:"Gandhi Nagar",pincode:"560009",lat:12.9772,lng:77.573},{name:"Gavipuram Extn",pincode:"560019",lat:12.9552,lng:77.5668},{name:"Geddalahalli",pincode:"560077",lat:13.0309,lng:77.6389},{name:"Gottigere",pincode:"560083",lat:12.8725,lng:77.5944},{name:"Halasur",pincode:"560042",lat:12.9833,lng:77.6194},{name:"Hebbal",pincode:"560024",lat:13.0355,lng:77.606},{name:"Heggere",pincode:"560073",lat:13.0172,lng:77.5004},{name:"HMT Layout",pincode:"560031",lat:13.039,lng:77.547},{name:"Horamavu",pincode:"560043",lat:13.0267,lng:77.6571},{name:"Hosakerehalli",pincode:"560085",lat:12.9251,lng:77.536},{name:"HSR Layout",pincode:"560102",lat:12.9121,lng:77.6446},{name:"Hulimavu",pincode:"560076",lat:12.8829,lng:77.6083},{name:"Indiranagar",pincode:"560038",lat:12.9719,lng:77.6412},{name:"ISRO Layout",pincode:"560078",lat:12.9056,lng:77.5665},{name:"J P Nagar",pincode:"560078",lat:12.9041,lng:77.5852},{name:"Jakkur",pincode:"560064",lat:13.0811,lng:77.5924},{name:"Jalahalli",pincode:"560013",lat:13.0491,lng:77.5422},{name:"Jayanagar 4th T Block",pincode:"560041",lat:12.9352,lng:77.5837},{name:"Jigani",pincode:"560105",lat:12.7849,lng:77.642},{name:"Kadubeesanahalli",pincode:"560103",lat:12.956,lng:77.7026},{name:"Kadugodi",pincode:"560067",lat:12.9968,lng:77.7583},{name:"Kaggadasapura",pincode:"560093",lat:12.9782,lng:77.6801},{name:"Kalasipalyam",pincode:"560002",lat:12.9636,lng:77.5777},{name:"Kalyananagar",pincode:"560043",lat:13.0288,lng:77.6402},{name:"Kamakshipalya",pincode:"560079",lat:12.9829,lng:77.5208},{name:"Kengeri",pincode:"560060",lat:12.9177,lng:77.4822},{name:"Kodichikkanahalli",pincode:"560068",lat:12.8903,lng:77.6239},{name:"Koramangala",pincode:"560095",lat:12.9344,lng:77.6173},{name:"KR Puram",pincode:"560036",lat:13.0022,lng:77.6951},{name:"Kyalasanahalli",pincode:"560077",lat:13.0269,lng:77.6589},{name:"Laggere",pincode:"560058",lat:13.0102,lng:77.5157},{name:"Mahadevapura",pincode:"560048",lat:12.9923,lng:77.6957},{name:"Majestic",pincode:"560009",lat:12.9779,lng:77.572},{name:"Malleshpalya",pincode:"560075",lat:12.9839,lng:77.6702},{name:"Malleshwaram",pincode:"560003",lat:12.9999,lng:77.5715},{name:"Manorayanapalya",pincode:"560032",lat:13.0365,lng:77.5726},{name:"Marathahalli",pincode:"560037",lat:12.9563,lng:77.7019},{name:"Mathikere",pincode:"560054",lat:13.0307,lng:77.5639},{name:"Munnekollal",pincode:"560037",lat:12.9568,lng:77.7045},{name:"Nagarbhavi",pincode:"560072",lat:12.9674,lng:77.5049},{name:"Nayandahalli",pincode:"560039",lat:12.9413,lng:77.5159},{name:"Neelasandra",pincode:"560047",lat:12.9479,lng:77.6236},{name:"Peenya",pincode:"560058",lat:13.0194,lng:77.5153},{name:"Raghuvanahalli",pincode:"560062",lat:12.8821,lng:77.5466},{name:"Rajajinagar",pincode:"560010",lat:12.9989,lng:77.5536},{name:"Ramamurthy Nagar",pincode:"560016",lat:13.0045,lng:77.6797},{name:"RT Nagar",pincode:"560032",lat:13.0266,lng:77.5979},{name:"Sadashivanagar",pincode:"560080",lat:13.0093,lng:77.5772},{name:"Shanti Nagar",pincode:"560027",lat:12.9537,lng:77.5926},{name:"Tavarekere",pincode:"560029",lat:12.931,lng:77.6106},{name:"Varthur",pincode:"560087",lat:12.9352,lng:77.7501},{name:"Vidyaranyapura",pincode:"560097",lat:13.067,lng:77.56}],s="Bangalore",o=1/0;for(let l of i){let h=this.calculateDistance(e,t,l.lat,l.lng);h<o&&(o=h,s=l.name)}return s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})};var yA=["searchInput"];function vA(n,e){if(n&1){let t=ct();P(0,"div",33),de("click",function(){let s=ge(t).$implicit,o=be(2);return _e(o.selectLocation(s))}),P(1,"div",3),Oe(),P(2,"svg",34),ue(3,"path",35),O()(),Ke(),P(4,"div",36)(5,"div",37),W(6),O(),P(7,"div",38),W(8),O()(),Oe(),P(9,"svg",39),ue(10,"path",40),O()()}if(n&2){let t=e.$implicit;H(6),Ut(t.name),H(2),Tt("Pincode: ",t.pincode,"")}}function wA(n,e){n&1&&(P(0,"div",41),Oe(),P(1,"svg",42),ue(2,"circle",27)(3,"path",28),O(),Ke(),P(4,"p"),W(5,"No locations found"),O(),P(6,"span"),W(7,"Try searching for a different area"),O()())}function CA(n,e){if(n&1){let t=ct();P(0,"div",19),de("click",function(){ge(t);let s=be();return _e(s.closeLocationModal())}),P(1,"div",20),de("click",function(s){return ge(t),_e(s.stopPropagation())}),P(2,"div",21)(3,"h2"),W(4,"Select Location"),O(),P(5,"button",22),de("click",function(){ge(t);let s=be();return _e(s.closeLocationModal())}),Oe(),P(6,"svg",23),ue(7,"path",24),O()()(),Ke(),P(8,"div",25),Oe(),P(9,"svg",26),ue(10,"circle",27)(11,"path",28),O(),Ke(),P(12,"input",29,0),Gt("ngModelChange",function(s){ge(t);let o=be();return qt(o.searchQuery,s)||(o.searchQuery=s),_e(s)}),O()(),P(14,"div",30),je(15,vA,11,2,"div",31)(16,wA,8,0,"div",32),O()()()}if(n&2){let t=be();H(12),$t("ngModel",t.searchQuery),H(3),te("ngForOf",t.filteredLocations),H(),te("ngIf",t.filteredLocations.length===0)}}var Gh=class n{constructor(e,t){this.router=e;this.locationService=t}searchInput;showLocationModal=!1;searchQuery="";locations=[{name:"Adugodi",pincode:"560030",lat:12.9716,lng:77.5946},{name:"Agaram",pincode:"560007",lat:12.8431,lng:77.4863},{name:"Air Force Stn. Yelahanka",pincode:"560063",lat:13.1048,lng:77.5763},{name:"Banashankari",pincode:"560050",lat:12.925453,lng:77.546761},{name:"Banashankari 2nd Stage",pincode:"560070",lat:12.9249,lng:77.5662},{name:"Banashankari 3rd Stage",pincode:"560085",lat:12.9216,lng:77.5543},{name:"Banashankari 6th Stage",pincode:"560062",lat:12.8963,lng:77.5353},{name:"Banaswadi",pincode:"560043",lat:13.0159,lng:77.6516},{name:"Basavanapura",pincode:"560036",lat:12.9835,lng:77.6773},{name:"Basaveshwaranagar",pincode:"560079",lat:12.9975,lng:77.5334},{name:"Bellandur",pincode:"560103",lat:12.9304,lng:77.6784},{name:"Bidadi",pincode:"562109",lat:12.8274,lng:77.3971},{name:"Bilekahalli",pincode:"560076",lat:12.8989,lng:77.6103},{name:"Binnamangala",pincode:"560038",lat:12.9837,lng:77.6388},{name:"Bommanahalli",pincode:"560068",lat:12.9082,lng:77.6245},{name:"Bommasandra",pincode:"560099",lat:12.8009,lng:77.699},{name:"Brookefield",pincode:"560037",lat:12.9698,lng:77.7184},{name:"BTM 2nd Stage",pincode:"560076",lat:12.9167,lng:77.6108},{name:"Budigere",pincode:"562129",lat:13.035,lng:77.7478},{name:"Byatarayanapura",pincode:"560026",lat:13.056,lng:77.5926},{name:"C V Raman Nagar",pincode:"560093",lat:12.9767,lng:77.6597},{name:"Chamarajpet",pincode:"560018",lat:12.9582,lng:77.5709},{name:"Channasandra",pincode:"560067",lat:12.9629,lng:77.758},{name:"Chikbasavanapura",pincode:"560067",lat:12.9948,lng:77.7327},{name:"Chickpet",pincode:"560053",lat:12.9662,lng:77.5767},{name:"Chikkalasandra",pincode:"560061",lat:12.9132,lng:77.5454},{name:"Choodasandra",pincode:"560099",lat:12.8848,lng:77.6785},{name:"Cox Town",pincode:"560005",lat:12.9996,lng:77.6229},{name:"D J Halli",pincode:"560005",lat:13.0083,lng:77.6228},{name:"Doddabidarakallu",pincode:"560073",lat:13.0426,lng:77.5019},{name:"Doorvaninagar",pincode:"560016",lat:13.0252,lng:77.6688},{name:"Ejipura",pincode:"560047",lat:12.9437,lng:77.6274},{name:"Electronic City",pincode:"560100",lat:12.8394,lng:77.677},{name:"Frazer Town",pincode:"560005",lat:12.999,lng:77.6226},{name:"Gandhi Nagar",pincode:"560009",lat:12.9772,lng:77.573},{name:"Gavipuram Extn",pincode:"560019",lat:12.9552,lng:77.5668},{name:"Geddalahalli",pincode:"560077",lat:13.0309,lng:77.6389},{name:"Gottigere",pincode:"560083",lat:12.8725,lng:77.5944},{name:"Halasur",pincode:"560042",lat:12.9833,lng:77.6194},{name:"Hebbal",pincode:"560024",lat:13.0355,lng:77.606},{name:"Heggere",pincode:"560073",lat:13.0172,lng:77.5004},{name:"HMT Layout",pincode:"560031",lat:13.039,lng:77.547},{name:"Horamavu",pincode:"560043",lat:13.0267,lng:77.6571},{name:"Hosakerehalli",pincode:"560085",lat:12.9251,lng:77.536},{name:"HSR Layout",pincode:"560102",lat:12.9121,lng:77.6446},{name:"Hulimavu",pincode:"560076",lat:12.8829,lng:77.6083},{name:"Indiranagar",pincode:"560038",lat:12.9719,lng:77.6412},{name:"ISRO Layout",pincode:"560078",lat:12.9056,lng:77.5665},{name:"J P Nagar",pincode:"560078",lat:12.9041,lng:77.5852},{name:"Jakkur",pincode:"560064",lat:13.0811,lng:77.5924},{name:"Jalahalli",pincode:"560013",lat:13.0491,lng:77.5422},{name:"Jayanagar 4th T Block",pincode:"560041",lat:12.9352,lng:77.5837},{name:"Jigani",pincode:"560105",lat:12.7849,lng:77.642},{name:"Kadubeesanahalli",pincode:"560103",lat:12.956,lng:77.7026},{name:"Kadugodi",pincode:"560067",lat:12.9968,lng:77.7583},{name:"Kaggadasapura",pincode:"560093",lat:12.9782,lng:77.6801},{name:"Kalasipalyam",pincode:"560002",lat:12.9636,lng:77.5777},{name:"Kalyananagar",pincode:"560043",lat:13.0288,lng:77.6402},{name:"Kamakshipalya",pincode:"560079",lat:12.9829,lng:77.5208},{name:"Kengeri",pincode:"560060",lat:12.9177,lng:77.4822},{name:"Kodichikkanahalli",pincode:"560068",lat:12.8903,lng:77.6239},{name:"Koramangala",pincode:"560095",lat:12.9344,lng:77.6173},{name:"KR Puram",pincode:"560036",lat:13.0022,lng:77.6951},{name:"Kyalasanahalli",pincode:"560077",lat:13.0269,lng:77.6589},{name:"Laggere",pincode:"560058",lat:13.0102,lng:77.5157},{name:"Mahadevapura",pincode:"560048",lat:12.9923,lng:77.6957},{name:"Majestic",pincode:"560009",lat:12.9779,lng:77.572},{name:"Malleshpalya",pincode:"560075",lat:12.9839,lng:77.6702},{name:"Malleshwaram",pincode:"560003",lat:12.9999,lng:77.5715},{name:"Manorayanapalya",pincode:"560032",lat:13.0365,lng:77.5726},{name:"Marathahalli",pincode:"560037",lat:12.9563,lng:77.7019},{name:"Mathikere",pincode:"560054",lat:13.0307,lng:77.5639},{name:"Munnekollal",pincode:"560037",lat:12.9568,lng:77.7045},{name:"Nagarbhavi",pincode:"560072",lat:12.9674,lng:77.5049},{name:"Nayandahalli",pincode:"560039",lat:12.9413,lng:77.5159},{name:"Neelasandra",pincode:"560047",lat:12.9479,lng:77.6236},{name:"Peenya",pincode:"560058",lat:13.0194,lng:77.5153},{name:"Raghuvanahalli",pincode:"560062",lat:12.8821,lng:77.5466},{name:"Rajajinagar",pincode:"560010",lat:12.9989,lng:77.5536},{name:"Ramamurthy Nagar",pincode:"560016",lat:13.0045,lng:77.6797},{name:"RT Nagar",pincode:"560032",lat:13.0266,lng:77.5979},{name:"Sadashivanagar",pincode:"560080",lat:13.0093,lng:77.5772},{name:"Shanti Nagar",pincode:"560027",lat:12.9537,lng:77.5926},{name:"Tavarekere",pincode:"560029",lat:12.931,lng:77.6106},{name:"Varthur",pincode:"560087",lat:12.9352,lng:77.7501},{name:"Vidyaranyapura",pincode:"560097",lat:13.067,lng:77.56}];ngAfterViewInit(){this.showLocationModal&&this.searchInput&&setTimeout(()=>this.searchInput?.nativeElement.focus(),300)}allow(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,i=e.coords.longitude,s=this.locationService.findNearestArea(t,i);this.locationService.setUserLocation(t,i),this.router.navigate(["/main-app"],{replaceUrl:!0,state:{location:s,latitude:t,longitude:i}})},e=>{console.error("Location error:",e),alert("Location denied or unavailable")},{enableHighAccuracy:!0,timeout:1e4}):alert("Geolocation not supported")}manual(){this.showLocationModal=!0,this.searchQuery="",setTimeout(()=>this.searchInput?.nativeElement.focus(),300)}closeLocationModal(){this.showLocationModal=!1,this.searchQuery=""}selectLocation(e){this.locationService.setUserLocation(e.lat,e.lng),this.router.navigate(["/main-app"],{replaceUrl:!0,state:{location:e.name,latitude:e.lat,longitude:e.lng}})}get filteredLocations(){if(!this.searchQuery.trim())return this.locations;let e=this.searchQuery.toLowerCase();return this.locations.filter(t=>t.name.toLowerCase().includes(e)||t.pincode.includes(e))}static \u0275fac=function(t){return new(t||n)(le(Qe),le(Si))};static \u0275cmp=lt({type:n,selectors:[["app-location-permission"]],viewQuery:function(t,i){if(t&1&&Ui(yA,5),t&2){let s;ai(s=li())&&(i.searchInput=s.first)}},standalone:!0,features:[ht],decls:31,vars:1,consts:[["searchInput",""],[1,"location-section"],[1,"location-form"],[1,"location-icon"],["width","80","height","80","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","locationGradient","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","#ff6b35","stop-opacity","1"],["offset","100%",2,"stop-color","#ff8c5a","stop-opacity","1"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","url(#locationGradient)"],[1,"location-title"],[1,"location-subtitle"],[1,"location-benefits"],[1,"benefit-item"],[1,"benefit-icon"],[1,"benefit-text"],[1,"allow-location-btn",3,"click"],[1,"manual-location-btn",3,"click"],[1,"location-privacy"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"location-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-box"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"search-icon"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21l-4.35-4.35","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["type","text","placeholder","Search for a location...",1,"search-input",3,"ngModelChange","ngModel"],[1,"locations-list"],["class","location-item",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"location-item",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","currentColor"],[1,"location-info"],[1,"location-name"],[1,"location-area"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"chevron-right"],["d","M9 18l6-6-6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"no-results"],["width","48","height","48","viewBox","0 0 24 24","fill","none"]],template:function(t,i){t&1&&(P(0,"div",1)(1,"div",2)(2,"div",3),Oe(),P(3,"svg",4)(4,"defs")(5,"linearGradient",5),ue(6,"stop",6)(7,"stop",7),O()(),ue(8,"path",8),O()(),Ke(),P(9,"h2",9),W(10,"Find Street Food Near You"),O(),P(11,"p",10),W(12,"We need your location to show you the best street food options around you"),O(),P(13,"div",11)(14,"div",12)(15,"span",13),W(16,"\u{1F3AF}"),O(),P(17,"span",14),W(18,"Discover food stalls nearby"),O()(),P(19,"div",12)(20,"span",13),W(21,"\u{1F4B0}"),O(),P(22,"span",14),W(23,"See accurate prices & distance"),O()()(),P(24,"button",15),de("click",function(){return i.allow()}),W(25,"Allow Location Access"),O(),P(26,"button",16),de("click",function(){return i.manual()}),W(27,"Select Location Manually"),O(),P(28,"p",17),W(29,"Your location data is secure and only used to show nearby food options."),O()(),je(30,CA,17,3,"div",18),O()),t&2&&(H(30),te("ngIf",i.showLocationModal))},dependencies:[yt,kn,kt,Bn,ln,Vn,Tn],styles:[".location-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem 1.5rem;background:#fff;font-family:Poppins,sans-serif}.location-form[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.location-icon[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:inline-block;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.location-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 12px rgba(255,107,53,.3))}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.location-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.location-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin-bottom:2.5rem;line-height:1.5}.location-benefits[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:2.5rem}.benefit-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border-radius:12px;text-align:left}.benefit-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:1rem;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:50%;box-shadow:0 2px 5px #0000000d}.benefit-text[_ngcontent-%COMP%]{font-weight:500;color:#34495e}.allow-location-btn[_ngcontent-%COMP%]{width:100%;padding:1.2rem;background:#ff6b35;color:#fff;border-radius:12px;border:none;font-size:1.1rem;font-weight:600;cursor:pointer;box-shadow:0 4px 15px #ff6b354d;transition:transform .2s;display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem}.allow-location-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.manual-location-btn[_ngcontent-%COMP%]{width:100%;padding:1.1rem;border-radius:12px;border:2px solid #e9ecef;background:#fff;color:#7f8c8d;font-weight:600;cursor:pointer;transition:all .2s}.manual-location-btn[_ngcontent-%COMP%]:hover{border-color:#ced4da;color:#495057}.location-privacy[_ngcontent-%COMP%]{font-size:.8rem;color:#adb5bd;margin-top:2rem;padding:1rem;background:#f8f9fa;border-radius:8px;border-left:3px solid #ff6b35;text-align:left;line-height:1.4}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;backdrop-filter:blur(1px);z-index:100;display:flex;align-items:flex-end;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.location-modal[_ngcontent-%COMP%]{background:#1a1a1a;width:100%;max-height:80vh;border-radius:24px 24px 0 0;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 20px 16px;border-bottom:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff;margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#888;cursor:pointer;border-radius:50%;transition:all .2s ease}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.search-box[_ngcontent-%COMP%]{padding:16px 20px;position:relative;border-bottom:1px solid rgba(255,255,255,.1)}.search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:36px;top:50%;transform:translateY(-50%);color:#666;pointer-events:none}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 48px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:12px;color:#fff;font-size:15px;transition:all .2s ease;box-sizing:border-box}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#666}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;background:#ffffff14;border-color:#ff6b35;box-shadow:0 0 0 3px #ff6b351a}.locations-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px 0}.location-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid rgba(255,255,255,.05)}.location-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.location-item[_ngcontent-%COMP%]:active{background:#ffffff1a;transform:scale(.98)}.location-item[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#ff6b351a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35;flex-shrink:0}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]{flex:1;min-width:0}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;margin-bottom:4px}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-area[_ngcontent-%COMP%]{font-size:13px;color:#888}.location-item[_ngcontent-%COMP%]   .chevron-right[_ngcontent-%COMP%]{color:#666;flex-shrink:0}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:#666}.no-results[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 8px;color:#888}.no-results[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}@media (min-width: 768px){.location-modal[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;border-radius:24px;max-height:70vh}.modal-overlay[_ngcontent-%COMP%]{align-items:center}}"],data:{animation:[xf("fadeIn",[cl(":enter",[fi({opacity:0}),ul("200ms ease-out",fi({opacity:1}))]),cl(":leave",[ul("200ms ease-in",fi({opacity:0}))])]),xf("slideUp",[cl(":enter",[fi({transform:"translateY(100%)",opacity:0}),ul("300ms cubic-bezier(0.4, 0, 0.2, 1)",fi({transform:"translateY(0)",opacity:1}))]),cl(":leave",[ul("200ms ease-in",fi({transform:"translateY(100%)",opacity:0}))])])]}})};var bA=["videoEl"];function EA(n,e){n&1&&(P(0,"div",27),ue(1,"div",28),O())}function SA(n,e){n&1&&(P(0,"div",29),Oe(),P(1,"svg",30),ue(2,"path",31),O()())}function TA(n,e){n&1&&(Oe(),P(0,"svg",35),ue(1,"path",36),O())}function DA(n,e){n&1&&(Oe(),P(0,"svg",35),ue(1,"path",37),O())}function IA(n,e){if(n&1&&(P(0,"div",32)(1,"div",33),je(2,TA,2,0,"svg",34)(3,DA,2,0,"svg",34),O()()),n&2){let t=be();H(2),te("ngIf",t.isMuted),H(),te("ngIf",!t.isMuted)}}function AA(n,e){if(n&1&&(P(0,"div",38),Oe(),P(1,"svg",39),ue(2,"path",40)(3,"circle",41),O(),Ke(),P(4,"span",42),W(5),O()()),n&2){let t=be();H(5),Ut(t.formatViewCount(t.displayViewCount))}}function PA(n,e){if(n&1&&(P(0,"span",43),W(1),O()),n&2){let t=be();H(),Ut(t.displayLikes)}}var Xl=class n{reel;src="";poster="";title="";vendor="";price="";distance="";active=!1;relativeIndex=0;likes=0;viewCount=0;isLiked=!1;isBookmarked=!1;liked=new ut;bookmarked=new ut;shared=new ut;videoEl;lastTapTime=0;showLikeAnimation=!1;isProgressBarVisible=!1;progressBarHideTimeout;singleTapTimeout;get displaySrc(){return this.reel?.videoUrl||this.src}get displayPoster(){return this.reel?.thumbnailUrl||this.poster}get displayTitle(){return this.reel?.title||this.title}get displayVendor(){return this.reel?.vendor||this.vendor}get displayPrice(){return this.reel?.price||this.price}get displayDistance(){return this.reel?.distance||this.distance}get displayLikes(){return this.reel?.likes||this.likes}get displayViewCount(){return this.reel?.viewCount||this.viewCount}get displayIsLiked(){return this.reel?.isLiked||this.isLiked}get displayIsBookmarked(){return this.reel?.isBookmarked||this.isBookmarked}isLoading=!0;progress=0;isSeeking=!1;isMuted=!0;muteChanged=new ut;showMuteIcon=!1;progressInterval;ngOnChanges(e){(e.reel||e.src)&&(this.isLoading=!0,this.videoEl&&this.videoEl.nativeElement&&this.videoEl.nativeElement.load()),e.isMuted&&this.videoEl?.nativeElement&&(this.videoEl.nativeElement.muted=this.isMuted)}ngAfterViewInit(){let e=this.videoEl.nativeElement;["loadstart","loadedmetadata","loadeddata","canplay","playing","waiting","error","stalled","suspend","emptied"].forEach(i=>{e.addEventListener(i,()=>{(i==="playing"||i==="canplay"||i==="loadeddata")&&(this.isLoading=!1,this.startProgressTracking()),i==="waiting"&&(this.isLoading=!0),i==="error"&&(console.error("[VideoCard] Video error:",e.error),this.isLoading=!1),i==="ended"&&(this.progress=0)})}),this.checkVideoReady(),setTimeout(()=>{this.isLoading&&(console.warn("[VideoCard] Loading timed out, hiding spinner"),this.isLoading=!1)},2e3)}startProgressTracking(){this.progressInterval&&clearInterval(this.progressInterval);let e=this.videoEl?.nativeElement;e&&(this.progressInterval=setInterval(()=>{!this.isSeeking&&e.duration&&(this.progress=e.currentTime/e.duration*100)},50))}ngOnDestroy(){this.progressInterval&&clearInterval(this.progressInterval),this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout)}checkVideoReady(){this.videoEl&&this.videoEl.nativeElement&&this.videoEl.nativeElement.readyState>=3&&(this.isLoading=!1)}play(){let e=this.videoEl?.nativeElement;if(e){e.muted=this.isMuted,e.currentTime=0,e.readyState<3&&(this.isLoading=!0);let t=e.play();t!==void 0&&t.catch(i=>{console.error("[VideoCard] Error playing video:",i),this.isLoading=!1})}}preload(){let e=this.videoEl?.nativeElement;e&&(e.preload="auto",e.load())}pause(){this.videoEl?.nativeElement.pause()}bookmark(){this.isBookmarked=!this.isBookmarked,this.bookmarked.emit()}openGoogleMaps(){if(this.reel?.latitude&&this.reel?.longitude){let{latitude:e,longitude:t}=this.reel,i=`https://www.google.com/maps?q=${e},${t}`;window.open(i,"_blank")}else console.warn("No location data available for this reel")}share(){this.shared.emit()}toggleLike(){this.isLiked=!this.isLiked,this.liked.emit(),this.isLiked&&this.showLikeAnimationEffect()}toggleMute(){let e=this.videoEl?.nativeElement;if(e){e.paused&&e.play().catch(i=>console.error("[VideoCard] Error playing on tap:",i));let t=!this.isMuted;e.muted=t,this.isMuted=t,this.muteChanged.emit(t),this.showMuteAnimation(),this.isProgressBarVisible=!0,this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout),this.progressBarHideTimeout=setTimeout(()=>{this.isProgressBarVisible=!1},2e3)}}showMuteAnimation(){this.showMuteIcon=!0,setTimeout(()=>{this.showMuteIcon=!1},1e3)}doubleTapLike(){this.isLiked?this.showLikeAnimationEffect():this.toggleLike()}onVideoTap(e){e.preventDefault();let t=new Date().getTime(),i=t-this.lastTapTime;i<300&&i>0?(this.singleTapTimeout&&(clearTimeout(this.singleTapTimeout),this.singleTapTimeout=void 0),this.doubleTapLike(),this.lastTapTime=0):(this.lastTapTime=t,this.singleTapTimeout=window.setTimeout(()=>{this.toggleMute(),this.singleTapTimeout=void 0},300))}toggleProgressBar(){this.progressBarHideTimeout&&clearTimeout(this.progressBarHideTimeout),this.isProgressBarVisible=!this.isProgressBarVisible,this.isProgressBarVisible&&(this.progressBarHideTimeout=setTimeout(()=>{this.isProgressBarVisible=!1},3e3))}showLikeAnimationEffect(){this.showLikeAnimation=!0,setTimeout(()=>{this.showLikeAnimation=!1},1e3)}formatViewCount(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}onProgressBarClick(e){e.stopPropagation(),this.seekToPosition(e)}onProgressBarTouchStart(e){this.isSeeking=!0,this.seekToPosition(e)}onProgressBarTouchMove(e){this.isSeeking&&this.seekToPosition(e)}onProgressBarTouchEnd(){this.isSeeking=!1}seekToPosition(e){let i=e.currentTarget.getBoundingClientRect(),s;if(e instanceof MouseEvent)s=e.clientX;else{let f=e.touches[0]||e.changedTouches[0];if(!f)return;s=f.clientX}let l=Math.max(0,Math.min(s-i.left,i.width))/i.width,h=this.videoEl?.nativeElement;h&&h.readyState>0&&(h.currentTime=l*h.duration,this.progress=l*100)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lt({type:n,selectors:[["app-video-card"]],viewQuery:function(t,i){if(t&1&&Ui(bA,5),t&2){let s;ai(s=li())&&(i.videoEl=s.first)}},inputs:{reel:"reel",src:"src",poster:"poster",title:"title",vendor:"vendor",price:"price",distance:"distance",active:"active",relativeIndex:"relativeIndex",likes:"likes",viewCount:"viewCount",isLiked:"isLiked",isBookmarked:"isBookmarked",isMuted:"isMuted"},outputs:{liked:"liked",bookmarked:"bookmarked",shared:"shared",muteChanged:"muteChanged"},standalone:!0,features:[Gn,ht],decls:32,vars:28,consts:[["videoEl",""],[1,"video-card"],["loop","","autoplay","","playsinline","","webkit-playsinline","","preload","auto","x-webkit-airplay","allow","disablePictureInPicture","",1,"video-player",3,"click","touchend","muted","poster","src"],["class","loading-spinner",4,"ngIf"],["class","like-animation",4,"ngIf"],["class","mute-animation",4,"ngIf"],[1,"video-overlay"],[1,"video-info"],[1,"food-details"],[1,"dish-name"],[1,"vendor-name"],[1,"price-distance"],[1,"price"],[1,"distance"],[1,"action-buttons"],["class","view-count-action",4,"ngIf"],[1,"action-btn","like-btn",3,"click"],["width","28","height","28","viewBox","0 0 24 24",1,"action-icon"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","like-count",4,"ngIf"],[1,"action-btn","bookmark-btn",3,"click"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"action-btn","map-btn",3,"click"],["width","28","height","28","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"action-icon","navigate-icon"],["points","3 11 22 2 13 21 11 13 3 11"],[1,"progress-container",3,"click","touchstart","touchmove","touchend","mouseenter","mouseleave"],[1,"progress-bar"],[1,"loading-spinner"],[1,"spinner"],[1,"like-animation"],["width","100","height","100","viewBox","0 0 24 24","fill","white"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"mute-animation"],[1,"mute-icon-bg"],["width","40","height","40","viewBox","0 0 24 24","fill","white",4,"ngIf"],["width","40","height","40","viewBox","0 0 24 24","fill","white"],["d","M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z"],["d","M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"],[1,"view-count-action"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","3","stroke","currentColor","stroke-width","2"],[1,"count-text"],[1,"like-count"]],template:function(t,i){if(t&1){let s=ct();P(0,"div",1)(1,"video",2,0),de("click",function(l){return ge(s),_e(i.onVideoTap(l))})("touchend",function(l){return ge(s),_e(i.onVideoTap(l))}),O(),je(3,EA,2,0,"div",3)(4,SA,3,0,"div",4)(5,IA,4,2,"div",5),P(6,"div",6)(7,"div",7)(8,"div",8)(9,"h3",9),W(10),O(),P(11,"p",10),W(12),O(),P(13,"div",11)(14,"span",12),W(15),O(),P(16,"span",13),W(17),O()()()(),P(18,"div",14),je(19,AA,6,1,"div",15),P(20,"button",16),de("click",function(){return ge(s),_e(i.toggleLike())}),Oe(),P(21,"svg",17),ue(22,"path",18),O(),je(23,PA,2,1,"span",19),O(),Ke(),P(24,"button",20),de("click",function(){return ge(s),_e(i.bookmark())}),Oe(),P(25,"svg",17),ue(26,"path",21),O()(),Ke(),P(27,"button",22),de("click",function(){return ge(s),_e(i.openGoogleMaps())}),Oe(),P(28,"svg",23),ue(29,"polygon",24),O()()()(),Ke(),P(30,"div",25),de("click",function(l){return ge(s),_e(i.onProgressBarClick(l))})("touchstart",function(l){return ge(s),_e(i.onProgressBarTouchStart(l))})("touchmove",function(l){return ge(s),_e(i.onProgressBarTouchMove(l))})("touchend",function(){return ge(s),_e(i.onProgressBarTouchEnd())})("mouseenter",function(){return ge(s),_e(i.isProgressBarVisible=!0)})("mouseleave",function(){return ge(s),_e(i.isProgressBarVisible=!1)}),ue(31,"div",26),O()()}t&2&&(Bt("active",i.active)("prev",i.relativeIndex<0)("next",i.relativeIndex>0),H(),te("muted",i.isMuted)("poster",i.displayPoster,ns)("src",i.displaySrc,ns),H(2),te("ngIf",i.isLoading),H(),te("ngIf",i.showLikeAnimation),H(),te("ngIf",i.showMuteIcon),H(5),Ut(i.displayTitle),H(2),Ut(i.displayVendor),H(3),Tt("\u20B9",i.displayPrice,""),H(2),Ut(i.displayDistance),H(2),te("ngIf",i.displayViewCount>0),H(),Bt("liked",i.displayIsLiked),H(),Bi("fill",i.displayIsLiked?"currentColor":"none"),H(2),te("ngIf",i.displayLikes>0),H(),Bt("bookmarked",i.displayIsBookmarked),H(),Bi("fill",i.displayIsBookmarked?"currentColor":"none"),H(5),Bt("visible",i.isProgressBarVisible),H(),Ra("width",i.progress,"%"))},dependencies:[yt,kt],styles:[".video-card[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;transform:translateY(100%);transition:transform .4s cubic-bezier(.25,1,.5,1);background:#000;overflow:hidden;z-index:1}.video-card.prev[_ngcontent-%COMP%]{transform:translateY(-100%)}.video-card.next[_ngcontent-%COMP%]{transform:translateY(100%)}.video-card.active[_ngcontent-%COMP%]{transform:translateY(0);z-index:2}.video-player[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.progress-container[_ngcontent-%COMP%]{position:absolute;bottom:60px;left:0;width:100%;height:3px;background-color:#fff3;z-index:95;cursor:pointer;transition:opacity .3s ease;opacity:1;pointer-events:auto;margin:0;padding:0}.progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#fff;width:0%;transition:width .1s linear;box-shadow:0 0 10px #ffffff80}.progress-container[_ngcontent-%COMP%]:hover, .progress-container[_ngcontent-%COMP%]:active{height:4px;background-color:#ffffff4d}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#0000004d;z-index:10}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.video-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:20px;background:linear-gradient(to top,rgba(0,0,0,.8),transparent);display:flex;justify-content:space-between;align-items:flex-end;pointer-events:none}.video-info[_ngcontent-%COMP%]{flex:1;color:#fff;padding-right:20px;pointer-events:auto}.dish-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0 0 5px;text-shadow:0 1px 2px rgba(0,0,0,.5)}.vendor-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin:0 0 10px;opacity:.9}.price-distance[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;font-size:.9rem;padding-bottom:20px}.price[_ngcontent-%COMP%]{font-weight:600;color:#ff6b35;background:#ffffffe6;padding:2px 8px;border-radius:4px}.distance[_ngcontent-%COMP%]{opacity:.8}.view-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;margin-top:8px;font-size:.85rem;opacity:.8}.view-count[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.9}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;pointer-events:auto;padding-bottom:60px}.action-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;display:flex;flex-direction:column;align-items:center;gap:5px;cursor:pointer;padding:0;transition:transform .2s}.action-btn[_ngcontent-%COMP%]:active{transform:scale(.9)}.action-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.like-count[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600}.like-btn.liked[_ngcontent-%COMP%]{color:#ff4757}.like-btn.liked[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse .3s cubic-bezier(.175,.885,.32,1.275)}.bookmark-btn.bookmarked[_ngcontent-%COMP%]{color:#ff6b35}.like-animation[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;pointer-events:none;animation:_ngcontent-%COMP%_pop-in-out .8s cubic-bezier(.175,.885,.32,1.275) forwards}@keyframes _ngcontent-%COMP%_pop-in-out{0%{transform:translate(-50%,-50%) scale(0);opacity:0}20%{transform:translate(-50%,-50%) scale(1.2);opacity:1}40%{transform:translate(-50%,-50%) scale(.9);opacity:1}80%{transform:translate(-50%,-50%) scale(1);opacity:1}to{transform:translate(-50%,-50%) scale(1.5);opacity:0}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}.mute-animation[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;pointer-events:none;animation:_ngcontent-%COMP%_fade-in-out 1s ease-in-out forwards}.mute-icon-bg[_ngcontent-%COMP%]{background:#0009;border-radius:50%;padding:15px;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_fade-in-out{0%{opacity:0;transform:translate(-50%,-50%) scale(.8)}20%{opacity:1;transform:translate(-50%,-50%) scale(1)}80%{opacity:1;transform:translate(-50%,-50%) scale(1)}to{opacity:0;transform:translate(-50%,-50%) scale(.8)}}.view-count-action[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;color:#fff;margin-bottom:5px}.view-count-action[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.view-count-action[_ngcontent-%COMP%]   .count-text[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.5)}"]})};var xr=class n{constructor(e){this.firestore=e}collectionName="reels";getReels(e=10,t){return $(this,null,function*(){try{let i=ql(this.firestore,this.collectionName),s=Gl(i,kh("createdAt","desc"),Eg(e));return t&&(s=Gl(s,pC(t))),(yield bg(s)).docs.map(l=>X({id:l.id},l.data()))}catch(i){return console.error("Error fetching reels:",i),[]}})}getReelsByUser(e){return $(this,null,function*(){try{let t=ql(this.firestore,this.collectionName),i=Gl(t,mC("uploadedBy","==",e),kh("createdAt","desc"));return(yield bg(i)).docs.map(o=>X({id:o.id},o.data()))}catch(t){return console.error("Error fetching user reels:",t),[]}})}getReelById(e){return $(this,null,function*(){try{let t=Is(this.firestore,this.collectionName,e),i=yield hC(t);return i.exists()?X({id:i.id},i.data()):null}catch(t){return console.error("Error fetching reel:",t),null}})}createReel(e){return $(this,null,function*(){try{let t=ql(this.firestore,this.collectionName);return(yield uC(t,He(X({},e),{createdAt:gt.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}))).id}catch(t){throw console.error("Error creating reel:",t),t}})}updateReel(e,t){return $(this,null,function*(){try{let i=Is(this.firestore,this.collectionName,e);yield As(i,t)}catch(i){throw console.error("Error updating reel:",i),i}})}deleteReel(e){return $(this,null,function*(){try{let t=Is(this.firestore,this.collectionName,e);yield cC(t)}catch(t){throw console.error("Error deleting reel:",t),t}})}toggleLike(e,t,i){return $(this,null,function*(){try{let s=Is(this.firestore,this.collectionName,e);i?yield As(s,{likedBy:wg(t),likes:Rh(-1)}):yield As(s,{likedBy:Cg(t),likes:Rh(1)})}catch(s){throw console.error("Error toggling like:",s),s}})}toggleBookmark(e,t,i){return $(this,null,function*(){try{let s=Is(this.firestore,this.collectionName,e);i?yield As(s,{bookmarkedBy:wg(t)}):yield As(s,{bookmarkedBy:Cg(t)})}catch(s){throw console.error("Error toggling bookmark:",s),s}})}incrementViewCount(e){return $(this,null,function*(){try{let t=Is(this.firestore,this.collectionName,e);yield As(t,{viewCount:Rh(1)})}catch(t){console.error("Error incrementing view count:",t)}})}getReelsRealtime(e=10){return new l_(t=>{let i=ql(this.firestore,this.collectionName),s=Gl(i,kh("createdAt","desc"),Eg(e)),o=fC(s,l=>{let h=l.docs.map(f=>X({id:f.id},f.data()));t.next(h)},l=>{console.error("Error in realtime reels:",l),t.error(l)});return()=>o()})}isLikedByUser(e,t){return e.likedBy?.includes(t)||!1}isBookmarkedByUser(e,t){return e.bookmarkedBy?.includes(t)||!1}static \u0275fac=function(t){return new(t||n)(Pe(Ds))};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})};function MA(n,e){n&1&&(P(0,"div",4),ue(1,"div",5),P(2,"p"),W(3,"Loading tasty bites..."),O()())}function xA(n,e){if(n&1){let t=ct();P(0,"div",6)(1,"div",7)(2,"h2"),W(3,"No Reels Found"),O(),P(4,"p"),W(5,"Be the first to share a tasty bite!"),O(),P(6,"div",8)(7,"button",9),de("click",function(){ge(t);let s=be();return _e(s.seedData())}),W(8,"Seed Sample Data"),O(),P(9,"a",10),W(10,"Upload Reel"),O()()()()}}function RA(n,e){if(n&1){let t=ct();P(0,"app-video-card",11),de("muteChanged",function(s){ge(t);let o=be();return _e(o.onMuteChanged(s))})("liked",function(){let s=ge(t).index,o=be();return _e(o.onLike(s))})("bookmarked",function(){let s=ge(t).index,o=be();return _e(o.onBookmark(s))})("shared",function(){let s=ge(t).index,o=be();return _e(o.onShare(s))}),O()}if(n&2){let t=e.$implicit,i=e.index,s=be();te("reel",t)("active",i===s.currentIndex)("relativeIndex",i-s.currentIndex)("isMuted",s.isGlobalMuted)}}var xs=class n{constructor(e,t,i,s){this.reelsService=e;this.auth=t;this.cdr=i;this.locationService=s}isActive=!0;isGlobalMuted=!0;reels=[];currentIndex=0;touchStartY=0;isLoading=!1;viewedReels=new Set;viewTrackingTimeout;cards;ngOnInit(){return $(this,null,function*(){yield this.loadReels()})}ngAfterViewInit(){setTimeout(()=>{this.reels.length>0&&(this.playCurrent(),this.trackView())},50)}ngOnChanges(e){e.isActive&&(this.isActive?this.reels.length>0&&this.playCurrent():this.pauseCurrent())}onMuteChanged(e){this.isGlobalMuted=e}ngOnDestroy(){this.viewTrackingTimeout&&clearTimeout(this.viewTrackingTimeout)}reloadReelsForNewLocation(){return $(this,null,function*(){console.log("[VideoFeed] Reloading reels for new location...");let e=[...this.reels],t=yield Promise.all(e.map(i=>$(this,null,function*(){let s="-- km";if(i.latitude&&i.longitude)try{s=yield this.locationService.getDistanceFromUser(i.latitude,i.longitude)}catch(o){console.error("[VideoFeed] Error calculating distance:",o)}return He(X({},i),{distance:s})})));t.sort((i,s)=>{let o=i.distance==="-- km"?1/0:parseFloat(i.distance.split(" ")[0]),l=s.distance==="-- km"?1/0:parseFloat(s.distance.split(" ")[0]);return o-l}),this.reels=t,this.currentIndex=0,this.playCurrent()})}loadReels(){return $(this,null,function*(){console.log("[VideoFeed] Starting to load reels..."),this.isLoading=!0;try{let e=yield this.reelsService.getReels(20);console.log("[VideoFeed] Fetched reels:",e.length);let t=this.auth.currentUser;console.log("[VideoFeed] Current user:",t?.uid||"Not logged in");let i=yield Promise.all(e.map(s=>$(this,null,function*(){let o="-- km";if(s.latitude&&s.longitude)try{o=yield this.locationService.getDistanceFromUser(s.latitude,s.longitude)}catch(l){console.error("[VideoFeed] Error calculating distance:",l)}return He(X({},s),{distance:o,isLiked:t?this.reelsService.isLikedByUser(s,t.uid):!1,isBookmarked:t?this.reelsService.isBookmarkedByUser(s,t.uid):!1})})));i.sort((s,o)=>{let l=s.distance==="-- km"?1/0:parseFloat(s.distance.split(" ")[0]),h=o.distance==="-- km"?1/0:parseFloat(o.distance.split(" ")[0]);return l-h}),this.reels=i,console.log("[VideoFeed] Final reels count:",this.reels.length)}catch(e){console.error("[VideoFeed] Error loading reels:",e)}finally{this.isLoading=!1,this.cdr.detectChanges(),console.log("[VideoFeed] Loading complete. isLoading:",this.isLoading),this.reels.length>0&&(this.playCurrent(),this.trackView())}})}trackView(){this.viewTrackingTimeout&&clearTimeout(this.viewTrackingTimeout);let e=this.reels[this.currentIndex];!e||!e.id||this.viewedReels.has(e.id)||(this.viewTrackingTimeout=window.setTimeout(()=>{e.id&&(this.reelsService.incrementViewCount(e.id),this.viewedReels.add(e.id),e.viewCount=(e.viewCount||0)+1)},3e3))}onTouchStart(e){this.touchStartY=e.touches[0].clientY}onTouchEnd(e){let t=this.touchStartY-e.changedTouches[0].clientY,i=80;t>i?this.next():t<-i&&this.prev()}playCurrent(){this.cards.forEach((t,i)=>{i===this.currentIndex?t.play():t.pause()});let e=this.currentIndex+1;if(e<this.reels.length){let t=this.cards.get(e);t&&t.preload()}}pauseCurrent(){this.cards.forEach(e=>e.pause())}next(){this.currentIndex<this.reels.length-1&&(this.currentIndex++,this.playCurrent(),this.trackView())}prev(){this.currentIndex>0&&(this.currentIndex--,this.playCurrent(),this.trackView())}onLike(e){return $(this,null,function*(){let t=this.reels[e];if(!t||!t.id)return;let i=this.auth.currentUser;if(!i){console.warn("User must be logged in to like");return}let s=t.isLiked||!1;t.isLiked=!s,t.likes=(t.likes||0)+(s?-1:1);try{yield this.reelsService.toggleLike(t.id,i.uid,s)}catch(o){t.isLiked=s,t.likes=(t.likes||0)+(s?1:-1),console.error("Error toggling like:",o)}})}onBookmark(e){return $(this,null,function*(){let t=this.reels[e];if(!t||!t.id)return;let i=this.auth.currentUser;if(!i){console.warn("User must be logged in to bookmark");return}let s=t.isBookmarked||!1;t.isBookmarked=!s;try{yield this.reelsService.toggleBookmark(t.id,i.uid,s)}catch(o){t.isBookmarked=s,console.error("Error toggling bookmark:",o)}})}onShare(e){let t=this.reels[e];if(t)if(navigator.share)navigator.share({title:t.title,text:`Check out ${t.title} from ${t.vendor}!`,url:window.location.href}).catch(i=>console.log("Error sharing:",i));else{let i=`Check out ${t.title} from ${t.vendor}! \u20B9${t.price}`;navigator.clipboard.writeText(i).then(()=>alert("Link copied to clipboard!")).catch(s=>console.error("Error copying:",s))}}seedData(){return $(this,null,function*(){this.isLoading=!0;let e=[{title:"Masala Dosa",vendor:"CTR",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",thumbnailUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Masala_Dosa_with_Chutney_and_Sambar.jpg/1200px-Masala_Dosa_with_Chutney_and_Sambar.jpg",price:120,latitude:12.9352,longitude:77.6245,uploadedBy:this.auth.currentUser?.uid||"system",cloudflareVideoId:"sample-id-1",duration:60,createdAt:gt.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]},{title:"Idli Vada",vendor:"Brahmins Coffee Bar",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",thumbnailUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Idli_Sambar.JPG/1200px-Idli_Sambar.JPG",price:80,latitude:12.9716,longitude:77.6412,uploadedBy:this.auth.currentUser?.uid||"system",cloudflareVideoId:"sample-id-2",duration:60,createdAt:gt.now(),viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}];try{for(let t of e)yield this.reelsService.createReel(t);yield this.loadReels()}catch(t){console.error("Error seeding data:",t)}finally{this.isLoading=!1}})}navigateToReel(e){if(console.log(`[VideoFeed] Attempting to navigate to reel: ${e}`),console.log(`[VideoFeed] Total reels loaded: ${this.reels.length}`),this.reels.length===0){console.warn(`[VideoFeed] No reels loaded yet, cannot navigate to ${e}`);return}let t=this.reels.findIndex(i=>i.id===e);t!==-1?(console.log(`[VideoFeed] Found reel at index ${t}, navigating...`),this.currentIndex=t,setTimeout(()=>{this.playCurrent(),this.trackView()},100),console.log(`[VideoFeed] Successfully navigated to reel: ${e}`)):(console.warn(`[VideoFeed] Reel not found in loaded reels: ${e}`),console.log("[VideoFeed] Available reel IDs:",this.reels.map(i=>i.id)))}static \u0275fac=function(t){return new(t||n)(le(xr),le(an),le(yn),le(Si))};static \u0275cmp=lt({type:n,selectors:[["app-video-feed"]],viewQuery:function(t,i){if(t&1&&Ui(Xl,5),t&2){let s;ai(s=li())&&(i.cards=s)}},inputs:{isActive:"isActive"},standalone:!0,features:[Gn,ht],decls:4,vars:3,consts:[[1,"video-feed",3,"touchstart","touchend"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"reel","active","relativeIndex","isMuted","muteChanged","liked","bookmarked","shared",4,"ngFor","ngForOf"],[1,"loading-state"],[1,"spinner"],[1,"empty-state"],[1,"empty-content"],[1,"button-group"],[1,"seed-btn",3,"click"],["routerLink","/upload-reel",1,"upload-btn"],[3,"muteChanged","liked","bookmarked","shared","reel","active","relativeIndex","isMuted"]],template:function(t,i){t&1&&(P(0,"div",0),de("touchstart",function(o){return i.onTouchStart(o)})("touchend",function(o){return i.onTouchEnd(o)}),je(1,MA,4,0,"div",1)(2,xA,11,0,"div",2)(3,RA,1,4,"app-video-card",3),O()),t&2&&(H(),te("ngIf",i.isLoading),H(),te("ngIf",!i.isLoading&&i.reels.length===0),H(),te("ngForOf",i.reels))},dependencies:[yt,kn,kt,Xl,Ay,Cy],styles:[".video-feed[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden;scroll-snap-type:y mandatory;-webkit-overflow-scrolling:touch;height:100vh;background:#000}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;z-index:10;background:#121212}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.1);border-left-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-content[_ngcontent-%COMP%]{text-align:center;padding:2rem}.empty-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#ff6b35}.empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa;margin-bottom:2rem}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:100%;max-width:250px}.seed-btn[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border-radius:25px;font-weight:600;text-align:center;text-decoration:none;cursor:pointer;transition:all .2s;border:none;font-size:1rem}.seed-btn[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2)}.seed-btn[_ngcontent-%COMP%]:hover{background:#fff3}.upload-btn[_ngcontent-%COMP%]{background:#ff6b35;color:#fff}.upload-btn[_ngcontent-%COMP%]:hover{background:#e55a2b;transform:translateY(-2px)}"]})};var Ko=class n{selectedReelId=new on(null);selectedReelId$=this.selectedReelId.asObservable();selectReel(e){console.log("[NavigationService] Setting selected reel:",e),this.selectedReelId.next(e)}clearSelection(){this.selectedReelId.next(null)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})};function kA(n,e){n&1&&(P(0,"div",6),ue(1,"div",7),P(2,"p"),W(3,"Loading favorites..."),O()())}function OA(n,e){n&1&&(P(0,"div",8),Oe(),P(1,"svg",9),ue(2,"path",10),O(),Ke(),P(3,"h2"),W(4,"No Favorites Yet"),O(),P(5,"p"),W(6,"Bookmark your favorite reels to see them here"),O()())}function LA(n,e){if(n&1){let t=ct();P(0,"img",31),de("error",function(s){return ge(t),_e(s.target.style.display="none")}),O()}if(n&2){let t=be().$implicit;te("src",t.thumbnailUrl,ns)("alt",t.title)}}function FA(n,e){if(n&1){let t=ct();P(0,"div",13),de("click",function(){let s=ge(t).$implicit,o=be(2);return _e(o.playReel(s))}),P(1,"div",14),je(2,LA,1,2,"img",15),P(3,"div",16),Oe(),P(4,"svg",17),ue(5,"path",18),O()(),Ke(),P(6,"div",19)(7,"span",20),Oe(),P(8,"svg",21),ue(9,"path",22)(10,"circle",23),O(),W(11),O(),Ke(),P(12,"span",20),Oe(),P(13,"svg",21),ue(14,"path",24),O(),W(15),O()()(),Ke(),P(16,"div",25)(17,"h3",26),W(18),O(),P(19,"p",27),W(20),O(),P(21,"div",28)(22,"span",29),W(23),O(),P(24,"span",30),W(25),O()()()()}if(n&2){let t=e.$implicit;H(2),te("ngIf",t.thumbnailUrl),H(9),Tt(" ",t.viewCount||0," "),H(4),Tt(" ",t.likes||0," "),H(3),Ut(t.title),H(2),Ut(t.vendor),H(3),Tt("\u20B9",t.price,""),H(2),Ut(t.distance)}}function NA(n,e){if(n&1&&(P(0,"div",11),je(1,FA,26,7,"div",12),O()),n&2){let t=be();H(),te("ngForOf",t.bookmarkedReels)}}var Jl=class n{constructor(e,t,i,s,o){this.reelsService=e;this.auth=t;this.router=i;this.cdr=s;this.navigationService=o}bookmarkedReels=[];isLoading=!0;ngOnInit(){return $(this,null,function*(){yield this.loadBookmarkedReels()})}loadBookmarkedReels(){return $(this,null,function*(){console.log("[Favorites] Starting to load bookmarked reels..."),this.isLoading=!0,this.cdr.detectChanges();try{let e=this.auth.currentUser;if(console.log("[Favorites] Current user:",e?.uid||"Not logged in"),!e){this.bookmarkedReels=[],console.log("[Favorites] No user logged in, clearing bookmarks");return}console.log("[Favorites] Fetching all reels...");let t=yield this.reelsService.getReels(100);console.log("[Favorites] Fetched reels count:",t.length),this.bookmarkedReels=t.filter(i=>this.reelsService.isBookmarkedByUser(i,e.uid)),console.log("[Favorites] Bookmarked reels count:",this.bookmarkedReels.length)}catch(e){console.error("[Favorites] Error loading bookmarked reels:",e)}finally{this.isLoading=!1,this.cdr.detectChanges(),console.log("[Favorites] Loading complete. isLoading:",this.isLoading)}})}playReel(e){console.log("[Favorites] Playing reel:",e.id,e.title),this.navigationService.selectReel(e.id),this.router.navigate(["/main-app"])}static \u0275fac=function(t){return new(t||n)(le(xr),le(an),le(Qe),le(yn),le(Ko))};static \u0275cmp=lt({type:n,selectors:[["app-favorites"]],standalone:!0,features:[ht],decls:9,vars:3,consts:[[1,"favorites-container"],[1,"favorites-header"],[1,"subtitle"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","reels-grid",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"empty-state"],["width","80","height","80","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z","stroke","currentColor","stroke-width","2","fill","none"],[1,"reels-grid"],["class","reel-card",3,"click",4,"ngFor","ngForOf"],[1,"reel-card",3,"click"],[1,"reel-thumbnail"],[3,"src","alt","error",4,"ngIf"],[1,"play-overlay"],["width","48","height","48","viewBox","0 0 24 24","fill","white"],["d","M8 5v14l11-7z"],[1,"reel-stats"],[1,"stat"],["width","16","height","16","viewBox","0 0 24 24","fill","white"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","white","stroke-width","2","fill","none"],["cx","12","cy","12","r","3","stroke","white","stroke-width","2","fill","none"],["d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"],[1,"reel-info"],[1,"reel-title"],[1,"reel-vendor"],[1,"reel-meta"],[1,"price"],[1,"distance"],[3,"error","src","alt"]],template:function(t,i){t&1&&(P(0,"div",0)(1,"div",1)(2,"h1"),W(3,"Favorites"),O(),P(4,"p",2),W(5,"Your bookmarked reels"),O()(),je(6,kA,4,0,"div",3)(7,OA,7,0,"div",4)(8,NA,2,1,"div",5),O()),t&2&&(H(6),te("ngIf",i.isLoading),H(),te("ngIf",!i.isLoading&&i.bookmarkedReels.length===0),H(),te("ngIf",!i.isLoading&&i.bookmarkedReels.length>0))},dependencies:[yt,kn,kt],styles:['@charset "UTF-8";.favorites-container[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000;overflow-y:auto;padding:4rem 1rem 5rem}.favorites-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;padding:1rem 0}.favorites-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin-bottom:.5rem;background:linear-gradient(135deg,#ff6b35,#f7931e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.favorites-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#888;font-size:.9rem}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;color:#fff;text-align:center;padding:2rem}.loading-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b35;margin-bottom:1.5rem;opacity:.5}.loading-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#fff}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;font-size:.95rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.1);border-left-color:#ff6b35;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.reels-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:1rem;padding:0 .5rem}@media (min-width: 640px){.reels-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.5rem}}.reel-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}.reel-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.reel-card[_ngcontent-%COMP%]:active{transform:scale(.98)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.reel-thumbnail[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:9/16;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,#1a1a1a,#2d2d2d);margin-bottom:.5rem;display:flex;align-items:center;justify-content:center}.reel-thumbnail[_ngcontent-%COMP%]:before{content:"\\1f3ac";font-size:3rem;opacity:.3;position:absolute}.reel-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:relative;z-index:1}.reel-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:#0000004d;opacity:0;transition:opacity .2s;z-index:2}.reel-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 8px rgba(0,0,0,.5))}.reel-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;left:.5rem;right:.5rem;display:flex;gap:.75rem;font-size:.75rem;color:#fff;z-index:2}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;background:#0009;backdrop-filter:blur(1px);padding:.25rem .5rem;border-radius:12px;font-weight:600}.reel-thumbnail[_ngcontent-%COMP%]   .reel-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.reel-info[_ngcontent-%COMP%]   .reel-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#fff;margin-bottom:.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reel-info[_ngcontent-%COMP%]   .reel-vendor[_ngcontent-%COMP%]{font-size:.8rem;color:#888;margin-bottom:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b35,#f7931e);color:#fff;padding:.25rem .5rem;border-radius:8px;font-weight:600}.reel-info[_ngcontent-%COMP%]   .reel-meta[_ngcontent-%COMP%]   .distance[_ngcontent-%COMP%]{color:#666}']})};var Rr=pb(VC());function VA(n,e){n&1&&(P(0,"span"),W(1,"Search"),O())}function BA(n,e){n&1&&(P(0,"span"),W(1,"..."),O())}function UA(n,e){if(n&1){let t=ct();P(0,"div",20),de("click",function(){let s=ge(t).$implicit,o=be(2);return _e(o.selectSearchResult(s))}),W(1),O()}if(n&2){let t=e.$implicit;H(),Tt(" ",t.display_name," ")}}function zA(n,e){if(n&1&&(P(0,"div",18),je(1,UA,2,1,"div",19),O()),n&2){let t=be();H(),te("ngForOf",t.searchResults)}}var Kh=class n{locationSelected=new ut;cancel=new ut;map;marker;searchQuery="";searchResults=[];isSearching=!1;selectedLat=12.9716;selectedLng=77.5946;constructor(){}ngOnInit(){}ngAfterViewInit(){this.initMap()}ngOnDestroy(){this.map&&this.map.remove()}initMap(){this.map=Rr.map("map").setView([this.selectedLat,this.selectedLng],13),Rr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map),this.addMarker(this.selectedLat,this.selectedLng),this.map.on("click",e=>{this.updateLocation(e.latlng.lat,e.latlng.lng)}),setTimeout(()=>{this.map?.invalidateSize()},100)}addMarker(e,t){if(this.marker)this.marker.setLatLng([e,t]);else{let i=Rr.divIcon({className:"custom-pin",html:`<svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="#ff4757" stroke="white" stroke-width="2"/>
               </svg>`,iconSize:[30,30],iconAnchor:[15,30]});this.marker=Rr.marker([e,t],{icon:i,draggable:!0}).addTo(this.map),this.marker.on("dragend",()=>{let s=this.marker.getLatLng();this.updateLocation(s.lat,s.lng,!1)})}}updateLocation(e,t,i=!1){this.selectedLat=e,this.selectedLng=t,this.marker?this.marker.setLatLng([e,t]):this.addMarker(e,t),i&&this.map&&this.map.panTo([e,t])}searchLocation(){return $(this,null,function*(){if(this.searchQuery.trim()){this.isSearching=!0,this.searchResults=[];try{let t=yield(yield fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(this.searchQuery)}`)).json();this.searchResults=t}catch(e){console.error("Error searching location:",e)}finally{this.isSearching=!1}}})}selectSearchResult(e){let t=parseFloat(e.lat),i=parseFloat(e.lon);this.updateLocation(t,i,!0),this.searchResults=[],this.searchQuery=e.display_name.split(",")[0]}confirmSelection(){this.locationSelected.emit({lat:this.selectedLat,lng:this.selectedLng})}onCancel(){this.cancel.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lt({type:n,selectors:[["app-location-picker"]],outputs:{locationSelected:"locationSelected",cancel:"cancel"},standalone:!0,features:[ht],decls:27,vars:13,consts:[[1,"picker-overlay"],[1,"picker-container"],[1,"picker-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-bar"],["type","text","placeholder","Search for a place...",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-btn",3,"click","disabled"],[4,"ngIf"],["class","search-results",4,"ngIf"],[1,"map-container"],["id","map"],[1,"picker-footer"],[1,"coords"],[1,"actions"],[1,"cancel-btn",3,"click"],[1,"confirm-btn",3,"click"],[1,"search-results"],["class","result-item",3,"click",4,"ngFor","ngForOf"],[1,"result-item",3,"click"]],template:function(t,i){t&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),W(4,"Pick Location"),O(),P(5,"button",3),de("click",function(){return i.onCancel()}),Oe(),P(6,"svg",4),ue(7,"path",5),O()()(),Ke(),P(8,"div",6)(9,"input",7),Gt("ngModelChange",function(o){return qt(i.searchQuery,o)||(i.searchQuery=o),o}),de("keyup.enter",function(){return i.searchLocation()}),O(),P(10,"button",8),de("click",function(){return i.searchLocation()}),je(11,VA,2,0,"span",9)(12,BA,2,0,"span",9),O()(),je(13,zA,2,1,"div",10),P(14,"div",11),ue(15,"div",12),O(),P(16,"div",13)(17,"div",14)(18,"small"),W(19),bd(20,"number"),bd(21,"number"),O()(),P(22,"div",15)(23,"button",16),de("click",function(){return i.onCancel()}),W(24,"Cancel"),O(),P(25,"button",17),de("click",function(){return i.confirmSelection()}),W(26,"Confirm Location"),O()()()()()),t&2&&(H(9),$t("ngModel",i.searchQuery),H(),te("disabled",i.isSearching),H(),te("ngIf",!i.isSearching),H(),te("ngIf",i.isSearching),H(),te("ngIf",i.searchResults.length>0),H(6),x_("",Ed(20,7,i.selectedLat,"1.4-4"),", ",Ed(21,10,i.selectedLng,"1.4-4"),""))},dependencies:[yt,kn,kt,S0,Bn,ln,Vn,Tn],styles:[".picker-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;z-index:2000;display:flex;align-items:center;justify-content:center;padding:20px}.picker-container[_ngcontent-%COMP%]{background:#1a1a1a;width:100%;max-width:500px;height:80vh;border-radius:12px;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 4px 20px #00000080}.picker-header[_ngcontent-%COMP%]{padding:15px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.1)}.picker-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.1rem}.picker-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;padding:5px;cursor:pointer}.search-bar[_ngcontent-%COMP%]{padding:15px;display:flex;gap:10px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;background:#333;border:1px solid #444;border-radius:8px;padding:10px 15px;color:#fff;font-size:.95rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff4757}.search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{background:#ff4757;color:#fff;border:none;border-radius:8px;padding:0 20px;font-weight:600;cursor:pointer}.search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:disabled{opacity:.7}.search-results[_ngcontent-%COMP%]{background:#2a2a2a;max-height:150px;overflow-y:auto;border-bottom:1px solid #444}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{padding:12px 15px;color:#ddd;border-bottom:1px solid #333;cursor:pointer;font-size:.9rem}.search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]:hover{background:#333}.map-container[_ngcontent-%COMP%]{flex:1;position:relative;background:#eee}.map-container[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:100%}.picker-footer[_ngcontent-%COMP%]{padding:15px 20px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;border-top:1px solid rgba(255,255,255,.1)}.picker-footer[_ngcontent-%COMP%]   .coords[_ngcontent-%COMP%]{color:#888;font-family:monospace}.picker-footer[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:10px}.picker-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:600;cursor:pointer;border:none}.picker-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#333;color:#fff}.picker-footer[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{background:#ff4757;color:#fff}"]})};function jA(n,e){if(n&1){let t=ct();P(0,"div",32),ue(1,"video",33),P(2,"button",34),de("click",function(){ge(t);let s=be();return _e(s.removeFile())}),Oe(),P(3,"svg",35),ue(4,"path",36),O()()()}if(n&2){let t=be();H(),te("src",t.videoPreviewUrl,ns)}}function $A(n,e){if(n&1){let t=ct();P(0,"label",37)(1,"input",38),de("change",function(s){ge(t);let o=be();return _e(o.onFileSelected(s))}),O(),P(2,"div",39),Oe(),P(3,"svg",40),ue(4,"path",41)(5,"circle",42),O(),Ke(),P(6,"p",43),W(7,"Select Video"),O(),P(8,"p",44),W(9,"MP4, MOV, or WebM (max 100MB)"),O()()()}}function qA(n,e){if(n&1&&(P(0,"div",45),Oe(),P(1,"svg",35),ue(2,"circle",46)(3,"path",47),O(),W(4),O()),n&2){let t=be();H(4),Tt(" ",t.uploadError," ")}}function GA(n,e){n&1&&(P(0,"div",48),Oe(),P(1,"svg",35),ue(2,"path",49)(3,"path",50),O(),W(4," Upload successful! Redirecting... "),O())}function HA(n,e){if(n&1&&(P(0,"div",51)(1,"div",52),ue(2,"div",53),O(),P(3,"p",54),W(4),O()()),n&2){let t=be();H(2),Ra("width",t.uploadProgress,"%"),H(2),Tt("Uploading... ",t.uploadProgress,"%")}}function KA(n,e){n&1&&(P(0,"span"),W(1,"Upload Reel"),O())}function WA(n,e){n&1&&(P(0,"span"),W(1,"Uploading..."),O())}function ZA(n,e){if(n&1){let t=ct();P(0,"app-location-picker",55),de("locationSelected",function(s){ge(t);let o=be();return _e(o.onLocationSelected(s))})("cancel",function(){ge(t);let s=be();return _e(s.closeLocationPicker())}),O()}}var Wo=class n{constructor(e,t,i,s){this.reelsService=e;this.auth=t;this.router=i;this.locationService=s}title="";vendor="";price=null;latitude=null;longitude=null;selectedFile=null;videoPreviewUrl=null;isUploading=!1;uploadProgress=0;uploadError=null;uploadSuccess=!1;maxFileSize=100*1024*1024;acceptedFormats=["video/mp4","video/quicktime","video/webm"];ngOnInit(){}onFileSelected(e){let t=e.target;if(t.files&&t.files.length>0){let i=t.files[0];this.validateAndSetFile(i)}}validateAndSetFile(e){if(this.uploadError=null,!this.acceptedFormats.includes(e.type)){this.uploadError="Please select a valid video file (MP4, MOV, or WebM)";return}if(e.size>this.maxFileSize){this.uploadError=`File size must be less than ${this.maxFileSize/(1024*1024)}MB`;return}this.selectedFile=e,this.createVideoPreview(e)}createVideoPreview(e){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl),this.videoPreviewUrl=URL.createObjectURL(e)}removeFile(){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl),this.selectedFile=null,this.videoPreviewUrl=null,this.uploadError=null}isFormValid(){return!!(this.selectedFile&&this.title.trim()&&this.vendor.trim()&&this.price!==null&&this.price>0&&this.latitude!==null&&this.longitude!==null)}showLocationPicker=!1;getCurrentLocation(){return $(this,null,function*(){try{let e=yield this.locationService.getUserLocation();this.latitude=e.latitude,this.longitude=e.longitude}catch(e){console.error("Error getting location:",e),this.uploadError="Failed to get current location. Please enter coordinates manually."}})}openLocationPicker(){this.showLocationPicker=!0}onLocationSelected(e){this.latitude=e.lat,this.longitude=e.lng,this.showLocationPicker=!1}closeLocationPicker(){this.showLocationPicker=!1}uploadReel(){return $(this,null,function*(){if(!this.isFormValid()||!this.selectedFile){this.uploadError="Please fill in all fields and select a video";return}let e=this.auth.currentUser;if(!e){this.uploadError="You must be logged in to upload a reel";return}this.isUploading=!0,this.uploadError=null,this.uploadProgress=0;try{let{getStorage:t,ref:i,uploadBytesResumable:s,getDownloadURL:o}=yield import("./chunk-6QXLYDAR.js"),l=t(),h=Date.now(),f=`videos/${e.uid}/${h}_${this.selectedFile.name}`,m=i(l,f),y=s(m,this.selectedFile);y.on("state_changed",C=>{this.uploadProgress=Math.round(C.bytesTransferred/C.totalBytes*100)},C=>{console.error("Upload error:",C),this.uploadError="Failed to upload video. Please try again.",this.isUploading=!1},()=>$(this,null,function*(){try{let C=yield o(y.snapshot.ref);yield this.reelsService.createReel({cloudflareVideoId:"",videoUrl:C,thumbnailUrl:"",duration:0,title:this.title.trim(),vendor:this.vendor.trim(),price:this.price,latitude:this.latitude,longitude:this.longitude,uploadedBy:e.uid,createdAt:null,viewCount:0,likes:0,likedBy:[],bookmarkedBy:[]}),this.uploadSuccess=!0,setTimeout(()=>{this.router.navigate(["/main-app"])},1500)}catch(C){console.error("Error creating reel:",C),this.uploadError="Failed to save reel data. Please try again.",this.isUploading=!1}}))}catch(t){console.error("Upload error:",t),this.uploadError=t instanceof Error?t.message:"Failed to upload video. Please try again.",this.isUploading=!1}})}cancel(){this.router.navigate(["/main-app"])}ngOnDestroy(){this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl)}static \u0275fac=function(t){return new(t||n)(le(xr),le(an),le(Qe),le(Si))};static \u0275cmp=lt({type:n,selectors:[["app-upload-reel"]],standalone:!0,features:[ht],decls:50,vars:21,consts:[["fileSelector",""],[1,"upload-container"],[1,"upload-header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M19 12H5M5 12L12 19M5 12L12 5","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"spacer"],[1,"upload-content"],[1,"video-preview-section"],["class","video-preview",4,"ngIf","ngIfElse"],[1,"form-section"],[1,"form-group"],["for","title"],["type","text","id","title","placeholder","e.g., Masala Dosa",3,"ngModelChange","ngModel","disabled"],["for","vendor"],["type","text","id","vendor","placeholder","e.g., Vidyarthi Bhavan",3,"ngModelChange","ngModel","disabled"],["for","price"],["type","number","id","price","placeholder","50","min","0",3,"ngModelChange","ngModel","disabled"],["type","button",1,"location-btn",3,"click","disabled"],["type","button",1,"location-btn","map-btn",2,"margin-top","10px",3,"click","disabled"],[1,"form-row"],["for","latitude"],["type","number","id","latitude","placeholder","12.9352","step","0.0001",3,"ngModelChange","ngModel","disabled"],["for","longitude"],["type","number","id","longitude","placeholder","77.6245","step","0.0001",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],["class","upload-progress",4,"ngIf"],[1,"action-buttons"],[1,"upload-btn",3,"click","disabled"],[4,"ngIf"],[3,"locationSelected","cancel",4,"ngIf"],[1,"video-preview"],["controls","","playsinline","",1,"preview-video",3,"src"],[1,"remove-video-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"file-selector"],["type","file","accept","video/mp4,video/quicktime,video/webm","hidden","",3,"change"],[1,"file-selector-content"],["width","48","height","48","viewBox","0 0 24 24","fill","none"],["d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2"],["cx","12","cy","13","r","4","stroke","currentColor","stroke-width","2"],[1,"selector-title"],[1,"selector-subtitle"],[1,"error-message"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M12 8v4M12 16h.01","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"success-message"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M22 4L12 14.01l-3-3","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"upload-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[3,"locationSelected","cancel"]],template:function(t,i){if(t&1){let s=ct();P(0,"div",1)(1,"div",2)(2,"button",3),de("click",function(){return ge(s),_e(i.cancel())}),Oe(),P(3,"svg",4),ue(4,"path",5),O()(),Ke(),P(5,"h1"),W(6,"Upload Reel"),O(),ue(7,"div",6),O(),P(8,"div",7)(9,"div",8),je(10,jA,5,1,"div",9)(11,$A,10,0,"ng-template",null,0,k_),O(),P(13,"div",10)(14,"div",11)(15,"label",12),W(16,"Dish Name *"),O(),P(17,"input",13),Gt("ngModelChange",function(l){return ge(s),qt(i.title,l)||(i.title=l),_e(l)}),O()(),P(18,"div",11)(19,"label",14),W(20,"Vendor Name *"),O(),P(21,"input",15),Gt("ngModelChange",function(l){return ge(s),qt(i.vendor,l)||(i.vendor=l),_e(l)}),O()(),P(22,"div",11)(23,"label",16),W(24,"Price (\u20B9) *"),O(),P(25,"input",17),Gt("ngModelChange",function(l){return ge(s),qt(i.price,l)||(i.price=l),_e(l)}),O()(),P(26,"div",11)(27,"label"),W(28,"Location *"),O(),P(29,"button",18),de("click",function(){return ge(s),_e(i.getCurrentLocation())}),W(30," \u{1F4CD} Use Current Location "),O(),P(31,"button",19),de("click",function(){return ge(s),_e(i.openLocationPicker())}),W(32," \u{1F5FA}\uFE0F Pick on Map "),O()(),P(33,"div",20)(34,"div",11)(35,"label",21),W(36,"Latitude *"),O(),P(37,"input",22),Gt("ngModelChange",function(l){return ge(s),qt(i.latitude,l)||(i.latitude=l),_e(l)}),O()(),P(38,"div",11)(39,"label",23),W(40,"Longitude *"),O(),P(41,"input",24),Gt("ngModelChange",function(l){return ge(s),qt(i.longitude,l)||(i.longitude=l),_e(l)}),O()()(),je(42,qA,5,1,"div",25)(43,GA,5,0,"div",26)(44,HA,5,3,"div",27),P(45,"div",28)(46,"button",29),de("click",function(){return ge(s),_e(i.uploadReel())}),je(47,KA,2,0,"span",30)(48,WA,2,0,"span",30),O()()()(),je(49,ZA,1,0,"app-location-picker",31),O()}if(t&2){let s=M_(12);H(10),te("ngIf",i.videoPreviewUrl)("ngIfElse",s),H(7),$t("ngModel",i.title),te("disabled",i.isUploading),H(4),$t("ngModel",i.vendor),te("disabled",i.isUploading),H(4),$t("ngModel",i.price),te("disabled",i.isUploading),H(4),te("disabled",i.isUploading),H(2),te("disabled",i.isUploading),H(6),$t("ngModel",i.latitude),te("disabled",i.isUploading),H(4),$t("ngModel",i.longitude),te("disabled",i.isUploading),H(),te("ngIf",i.uploadError),H(),te("ngIf",i.uploadSuccess),H(),te("ngIf",i.isUploading),H(2),te("disabled",!i.isFormValid()||i.isUploading),H(),te("ngIf",!i.isUploading),H(),te("ngIf",i.isUploading),H(),te("ngIf",i.showLocationPicker)}},dependencies:[yt,kt,Bn,ln,Rg,Vn,Og,Tn,Kh],styles:[".upload-container[_ngcontent-%COMP%]{height:100vh;background:#0a0a0a;padding:0 0 100px;overflow-y:auto;position:relative}.upload-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:20px;background:#00000080;backdrop-filter:blur(1px);border-bottom:1px solid rgba(255,255,255,.1);position:sticky;top:0;z-index:10}.upload-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0;color:#fff}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;transition:all .2s ease;border-radius:50%}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.upload-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.upload-header[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{width:40px}.upload-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}.video-preview-section[_ngcontent-%COMP%]{margin-bottom:24px}.video-preview[_ngcontent-%COMP%]{position:relative;background:#1a1a1a;border-radius:16px;overflow:hidden;aspect-ratio:9/16;max-height:500px;border:1px solid rgba(255,255,255,.1)}.video-preview[_ngcontent-%COMP%]   .preview-video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.video-preview[_ngcontent-%COMP%]   .remove-video-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;background:#000c;backdrop-filter:blur(1px);border:1px solid rgba(255,255,255,.2);border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;transition:all .2s ease}.video-preview[_ngcontent-%COMP%]   .remove-video-btn[_ngcontent-%COMP%]:hover{background:#ff3b30e6;border-color:#ff3b30}.video-preview[_ngcontent-%COMP%]   .remove-video-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.file-selector[_ngcontent-%COMP%]{display:block;cursor:pointer}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;padding:60px 40px;text-align:center;border:2px dashed rgba(255,107,53,.3);transition:all .3s ease}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b35;margin-bottom:20px}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   .selector-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#fff;margin:0 0 8px}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]   .selector-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#888;margin:0}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]:hover{border-color:#ff6b35;background:#222;transform:translateY(-2px);box-shadow:0 8px 24px #ff6b3533}.form-section[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:16px;padding:24px;border:1px solid rgba(255,255,255,.1)}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;color:#aaa;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;background:#0a0a0a;border:1px solid rgba(255,255,255,.1);border-radius:12px;font-size:16px;color:#fff;transition:all .2s ease;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff6b35;background:#111;box-shadow:0 0 0 3px #ff6b351a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#0a0a0a;opacity:.5;cursor:not-allowed}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#555}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:-1fr 1fr;gap:16px}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:12px;font-size:14px;margin-bottom:20px;font-weight:500}.error-message[_ngcontent-%COMP%]{background:#ff3b301a;color:#ff3b30;border:1px solid rgba(255,59,48,.3)}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.success-message[_ngcontent-%COMP%]{background:#34c7591a;color:#34c759;border:1px solid rgba(52,199,89,.3)}.success-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.upload-progress[_ngcontent-%COMP%]{margin-bottom:24px}.upload-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:6px;background:#ffffff1a;border-radius:3px;overflow:hidden;margin-bottom:8px}.upload-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ff6b35,#ff8c42);transition:width .3s ease;border-radius:3px}.upload-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:13px;color:#888;text-align:center;margin:0;font-weight:500}.action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:-1fr 2fr;gap:12px;margin-top:24px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:16px 24px;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;border:none}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.action-buttons[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.1)}.action-buttons[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff26}.action-buttons[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b35,#ff8c42);color:#fff;box-shadow:0 4px 12px #ff6b354d}.action-buttons[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #ff6b3566;transform:translateY(-2px)}@media (max-width: 768px){.upload-container[_ngcontent-%COMP%]{padding-bottom:100px}.upload-content[_ngcontent-%COMP%]{padding:16px}.form-section[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.file-selector[_ngcontent-%COMP%]   .file-selector-content[_ngcontent-%COMP%]{padding:40px 24px}}"]})};function QA(n,e){if(n&1){let t=ct();P(0,"div",34),de("click",function(){let s=ge(t).$implicit,o=be(2);return _e(o.selectLocation(s))}),P(1,"div",35),Oe(),P(2,"svg",36),ue(3,"path",5),O()(),Ke(),P(4,"div",37)(5,"div",38),W(6),O(),P(7,"div",39),W(8),O()(),Oe(),P(9,"svg",40),ue(10,"path",41),O()()}if(n&2){let t=e.$implicit;H(6),Ut(t.name),H(2),Tt("Pincode: ",t.pincode,"")}}function YA(n,e){n&1&&(P(0,"div",42),Oe(),P(1,"svg",43),ue(2,"circle",28)(3,"path",29),O(),Ke(),P(4,"p"),W(5,"No locations found"),O(),P(6,"span"),W(7,"Try searching for a different area"),O()())}function XA(n,e){if(n&1){let t=ct();P(0,"div",20),de("click",function(){ge(t);let s=be();return _e(s.closeLocationModal())}),P(1,"div",21),de("click",function(s){return ge(t),_e(s.stopPropagation())}),P(2,"div",22)(3,"h2"),W(4,"Select Location"),O(),P(5,"button",23),de("click",function(){ge(t);let s=be();return _e(s.closeLocationModal())}),Oe(),P(6,"svg",24),ue(7,"path",25),O()()(),Ke(),P(8,"div",26),Oe(),P(9,"svg",27),ue(10,"circle",28)(11,"path",29),O(),Ke(),P(12,"input",30),Gt("ngModelChange",function(s){ge(t);let o=be();return qt(o.searchQuery,s)||(o.searchQuery=s),_e(s)}),O()(),P(13,"div",31),je(14,QA,11,2,"div",32)(15,YA,8,0,"div",33),O()()()}if(n&2){let t=be();H(12),$t("ngModel",t.searchQuery),H(2),te("ngForOf",t.filteredLocations),H(),te("ngIf",t.filteredLocations.length===0)}}var Wh=class n{constructor(e,t,i){this.router=e;this.locationService=t;this.navigationService=i;let s=this.router.getCurrentNavigation();if(s?.extras?.state){let o=s.extras.state;if(o.location&&(this.location=`${o.location}, Bangalore`),o.latitude&&o.longitude&&this.locationService.setUserLocation(o.latitude,o.longitude),o.openFeed&&o.reelId){this.activeTab="feed";let l=o.reelId,h=(f=0)=>{setTimeout(()=>{this.videoFeedComponent&&this.videoFeedComponent.reels&&this.videoFeedComponent.reels.length>0?(console.log("[MainApp] Video feed loaded, navigating to reel:",l),this.videoFeedComponent.navigateToReel(l)):f<10?(console.log("[MainApp] Waiting for video feed to load... attempt",f+1),h(f+1)):console.error("[MainApp] Failed to navigate to reel - video feed did not load")},500)};h()}}}location="Koramangala, Bangalore";navigate=new ut;activeTab="feed";showLocationModal=!1;searchQuery="";locations=[{name:"Adugodi",pincode:"560030",lat:12.9716,lng:77.5946},{name:"Agaram",pincode:"560007",lat:12.8431,lng:77.4863},{name:"Air Force Stn. Yelahanka",pincode:"560063",lat:13.1048,lng:77.5763},{name:"Banashankari",pincode:"560050",lat:12.925453,lng:77.546761},{name:"Banashankari 2nd Stage",pincode:"560070",lat:12.9249,lng:77.5662},{name:"Banashankari 3rd Stage",pincode:"560085",lat:12.9216,lng:77.5543},{name:"Banashankari 6th Stage",pincode:"560062",lat:12.8963,lng:77.5353},{name:"Banaswadi",pincode:"560043",lat:13.0159,lng:77.6516},{name:"Basavanapura",pincode:"560036",lat:12.9835,lng:77.6773},{name:"Basaveshwaranagar",pincode:"560079",lat:12.9975,lng:77.5334},{name:"Bellandur",pincode:"560103",lat:12.9304,lng:77.6784},{name:"Bidadi",pincode:"562109",lat:12.8274,lng:77.3971},{name:"Bilekahalli",pincode:"560076",lat:12.8989,lng:77.6103},{name:"Binnamangala",pincode:"560038",lat:12.9837,lng:77.6388},{name:"Bommanahalli",pincode:"560068",lat:12.9082,lng:77.6245},{name:"Bommasandra",pincode:"560099",lat:12.8009,lng:77.699},{name:"Brookefield",pincode:"560037",lat:12.9698,lng:77.7184},{name:"BTM 2nd Stage",pincode:"560076",lat:12.9167,lng:77.6108},{name:"Budigere",pincode:"562129",lat:13.035,lng:77.7478},{name:"Byatarayanapura",pincode:"560026",lat:13.056,lng:77.5926},{name:"C V Raman Nagar",pincode:"560093",lat:12.9767,lng:77.6597},{name:"Chamarajpet",pincode:"560018",lat:12.9582,lng:77.5709},{name:"Channasandra",pincode:"560067",lat:12.9629,lng:77.758},{name:"Chikbasavanapura",pincode:"560067",lat:12.9948,lng:77.7327},{name:"Chickpet",pincode:"560053",lat:12.9662,lng:77.5767},{name:"Chikkalasandra",pincode:"560061",lat:12.9132,lng:77.5454},{name:"Choodasandra",pincode:"560099",lat:12.8848,lng:77.6785},{name:"Cox Town",pincode:"560005",lat:12.9996,lng:77.6229},{name:"D J Halli",pincode:"560005",lat:13.0083,lng:77.6228},{name:"Doddabidarakallu",pincode:"560073",lat:13.0426,lng:77.5019},{name:"Doorvaninagar",pincode:"560016",lat:13.0252,lng:77.6688},{name:"Ejipura",pincode:"560047",lat:12.9437,lng:77.6274},{name:"Electronic City",pincode:"560100",lat:12.8394,lng:77.677},{name:"Frazer Town",pincode:"560005",lat:12.999,lng:77.6226},{name:"Gandhi Nagar",pincode:"560009",lat:12.9772,lng:77.573},{name:"Gavipuram Extn",pincode:"560019",lat:12.9552,lng:77.5668},{name:"Geddalahalli",pincode:"560077",lat:13.0309,lng:77.6389},{name:"Gottigere",pincode:"560083",lat:12.8725,lng:77.5944},{name:"Halasur",pincode:"560042",lat:12.9833,lng:77.6194},{name:"Hebbal",pincode:"560024",lat:13.0355,lng:77.606},{name:"Heggere",pincode:"560073",lat:13.0172,lng:77.5004},{name:"HMT Layout",pincode:"560031",lat:13.039,lng:77.547},{name:"Horamavu",pincode:"560043",lat:13.0267,lng:77.6571},{name:"Hosakerehalli",pincode:"560085",lat:12.9251,lng:77.536},{name:"HSR Layout",pincode:"560102",lat:12.9121,lng:77.6446},{name:"Hulimavu",pincode:"560076",lat:12.8829,lng:77.6083},{name:"Indiranagar",pincode:"560038",lat:12.9719,lng:77.6412},{name:"ISRO Layout",pincode:"560078",lat:12.9056,lng:77.5665},{name:"J P Nagar",pincode:"560078",lat:12.9041,lng:77.5852},{name:"Jakkur",pincode:"560064",lat:13.0811,lng:77.5924},{name:"Jalahalli",pincode:"560013",lat:13.0491,lng:77.5422},{name:"Jayanagar 4th T Block",pincode:"560041",lat:12.9352,lng:77.5837},{name:"Jigani",pincode:"560105",lat:12.7849,lng:77.642},{name:"Kadubeesanahalli",pincode:"560103",lat:12.956,lng:77.7026},{name:"Kadugodi",pincode:"560067",lat:12.9968,lng:77.7583},{name:"Kaggadasapura",pincode:"560093",lat:12.9782,lng:77.6801},{name:"Kalasipalyam",pincode:"560002",lat:12.9636,lng:77.5777},{name:"Kalyananagar",pincode:"560043",lat:13.0288,lng:77.6402},{name:"Kamakshipalya",pincode:"560079",lat:12.9829,lng:77.5208},{name:"Kengeri",pincode:"560060",lat:12.9177,lng:77.4822},{name:"Kodichikkanahalli",pincode:"560068",lat:12.8903,lng:77.6239},{name:"Koramangala",pincode:"560095",lat:12.9344,lng:77.6173},{name:"KR Puram",pincode:"560036",lat:13.0022,lng:77.6951},{name:"Kyalasanahalli",pincode:"560077",lat:13.0269,lng:77.6589},{name:"Laggere",pincode:"560058",lat:13.0102,lng:77.5157},{name:"Mahadevapura",pincode:"560048",lat:12.9923,lng:77.6957},{name:"Majestic",pincode:"560009",lat:12.9779,lng:77.572},{name:"Malleshpalya",pincode:"560075",lat:12.9839,lng:77.6702},{name:"Malleshwaram",pincode:"560003",lat:12.9999,lng:77.5715},{name:"Manorayanapalya",pincode:"560032",lat:13.0365,lng:77.5726},{name:"Marathahalli",pincode:"560037",lat:12.9563,lng:77.7019},{name:"Mathikere",pincode:"560054",lat:13.0307,lng:77.5639},{name:"Munnekollal",pincode:"560037",lat:12.9568,lng:77.7045},{name:"Nagarbhavi",pincode:"560072",lat:12.9674,lng:77.5049},{name:"Nayandahalli",pincode:"560039",lat:12.9413,lng:77.5159},{name:"Neelasandra",pincode:"560047",lat:12.9479,lng:77.6236},{name:"Peenya",pincode:"560058",lat:13.0194,lng:77.5153},{name:"Raghuvanahalli",pincode:"560062",lat:12.8821,lng:77.5466},{name:"Rajajinagar",pincode:"560010",lat:12.9989,lng:77.5536},{name:"Ramamurthy Nagar",pincode:"560016",lat:13.0045,lng:77.6797},{name:"RT Nagar",pincode:"560032",lat:13.0266,lng:77.5979},{name:"Sadashivanagar",pincode:"560080",lat:13.0093,lng:77.5772},{name:"Shanti Nagar",pincode:"560027",lat:12.9537,lng:77.5926},{name:"Tavarekere",pincode:"560029",lat:12.931,lng:77.6106},{name:"Varthur",pincode:"560087",lat:12.9352,lng:77.7501},{name:"Vidyaranyapura",pincode:"560097",lat:13.067,lng:77.56}];favoritesComponent;videoFeedComponent;ngOnInit(){return $(this,null,function*(){if(this.location==="Koramangala, Bangalore")try{let e=yield this.locationService.getUserLocation(),t=this.locationService.findNearestArea(e.latitude,e.longitude);this.location=`${t}, Bangalore`}catch(e){console.error("Error getting location:",e)}this.navigationService.selectedReelId$.subscribe(e=>{if(e){console.log("[MainApp] Received reel selection:",e),this.activeTab="feed";let t=(i=0)=>{setTimeout(()=>{this.videoFeedComponent&&this.videoFeedComponent.reels&&this.videoFeedComponent.reels.length>0?(console.log("[MainApp] Navigating to reel:",e),this.videoFeedComponent.navigateToReel(e),this.navigationService.clearSelection()):i<15?(console.log("[MainApp] Waiting for reels... attempt",i+1),t(i+1)):console.error("[MainApp] Failed to navigate - reels not loaded")},400)};t()}})})}select(e){this.activeTab=e,this.navigate.emit(e),e==="favorites"&&this.favoritesComponent&&this.favoritesComponent.loadBookmarkedReels()}goToUpload(){this.select("upload")}openLocationModal(){this.showLocationModal=!0,this.searchQuery=""}closeLocationModal(){this.showLocationModal=!1,this.searchQuery=""}selectLocation(e){return $(this,null,function*(){this.location=`${e.name}, Bangalore`,this.locationService.setUserLocation(e.lat,e.lng),this.closeLocationModal(),this.videoFeedComponent&&(yield this.videoFeedComponent.reloadReelsForNewLocation())})}get filteredLocations(){if(!this.searchQuery.trim())return this.locations;let e=this.searchQuery.toLowerCase();return this.locations.filter(t=>t.name.toLowerCase().includes(e)||t.pincode.includes(e))}static \u0275fac=function(t){return new(t||n)(le(Qe),le(Si),le(Ko))};static \u0275cmp=lt({type:n,selectors:[["app-main-app"]],viewQuery:function(t,i){if(t&1&&(Ui(Jl,5),Ui(xs,5)),t&2){let s;ai(s=li())&&(i.favoritesComponent=s.first),ai(s=li())&&(i.videoFeedComponent=s.first)}},outputs:{navigate:"navigate"},standalone:!0,features:[ht],decls:26,vars:13,consts:[[1,"main-app"],[1,"top-nav"],[1,"nav-left"],[1,"location-badge",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"location-pin"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z","fill","currentColor"],[1,"location-text"],["width","12","height","12","viewBox","0 0 24 24","fill","none",1,"chevron-down"],["d","M6 9l6 6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"nav-right"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"isActive"],[1,"bottom-nav"],[1,"bottom-nav-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"nav-icon"],["x","2","y","2","width","20","height","20","rx","5","ry","5","stroke","currentColor","stroke-width","2"],["d","M10 8L16 12L10 16V8Z","fill","currentColor","stroke","none"],[1,"bottom-nav-btn","upload-btn",3,"click"],["d","M12 5v14M5 12h14","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"modal-overlay",3,"click"],[1,"location-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"search-box"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"search-icon"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","M21 21l-4.35-4.35","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["type","text","placeholder","Search for a location...",1,"search-input",3,"ngModelChange","ngModel"],[1,"locations-list"],["class","location-item",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"location-item",3,"click"],[1,"location-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],[1,"location-info"],[1,"location-name"],[1,"location-area"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"chevron-right"],["d","M9 18l6-6-6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"no-results"],["width","48","height","48","viewBox","0 0 24 24","fill","none"]],template:function(t,i){t&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),de("click",function(){return i.openLocationModal()}),Oe(),P(4,"svg",4),ue(5,"path",5),O(),Ke(),P(6,"span",6),W(7),O(),Oe(),P(8,"svg",7),ue(9,"path",8),O()()(),Ke(),ue(10,"div",9),O(),je(11,XA,16,3,"div",10),ue(12,"app-video-feed",11)(13,"app-favorites")(14,"app-upload-reel"),P(15,"div",12)(16,"button",13),de("click",function(){return i.select("feed")}),Oe(),P(17,"svg",14),ue(18,"rect",15)(19,"path",16),O()(),Ke(),P(20,"button",17),de("click",function(){return i.goToUpload()}),Oe(),P(21,"svg",14),ue(22,"path",18),O()(),Ke(),P(23,"button",13),de("click",function(){return i.select("favorites")}),Oe(),P(24,"svg",14),ue(25,"path",19),O()()()()),t&2&&(H(7),Ut(i.location),H(4),te("ngIf",i.showLocationModal),H(),Bt("hidden",i.activeTab!=="feed"),te("isActive",i.activeTab==="feed"),H(),Bt("hidden",i.activeTab!=="favorites"),H(),Bt("hidden",i.activeTab!=="upload"),H(2),Bt("active",i.activeTab==="feed"),H(7),Bt("active",i.activeTab==="favorites"))},dependencies:[yt,kn,kt,xs,Jl,Wo,Bn,ln,Vn,Tn],styles:['.main-app[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;flex-direction:column;background:#000;font-family:Poppins,sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.top-nav[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:10;display:flex;justify-content:space-between;padding:1rem;padding-top:max(1rem,env(safe-area-inset-top));background:linear-gradient(to bottom,rgba(0,0,0,.8) 0%,transparent 100%)}.location-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#fff3;backdrop-filter:blur(1px);padding:.5rem 1rem;border-radius:20px;color:#fff;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s ease}.location-badge[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-1px)}.location-badge[_ngcontent-%COMP%]:active{transform:scale(.98)}.location-pin[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.chevron-down[_ngcontent-%COMP%]{opacity:.7;transition:transform .2s ease}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;backdrop-filter:blur(1px);z-index:100;display:flex;align-items:flex-end;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.location-modal[_ngcontent-%COMP%]{background:#1a1a1a;width:100%;max-height:80vh;border-radius:24px 24px 0 0;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 20px 16px;border-bottom:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff;margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:transparent;border:none;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#888;cursor:pointer;border-radius:50%;transition:all .2s ease}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.search-box[_ngcontent-%COMP%]{padding:16px 20px;position:relative;border-bottom:1px solid rgba(255,255,255,.1)}.search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:36px;top:50%;transform:translateY(-50%);color:#666;pointer-events:none}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px 14px 48px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:12px;color:#fff;font-size:15px;transition:all .2s ease;box-sizing:border-box}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#666}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;background:#ffffff14;border-color:#ff6b35;box-shadow:0 0 0 3px #ff6b351a}.locations-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px 0}.location-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid rgba(255,255,255,.05)}.location-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.location-item[_ngcontent-%COMP%]:active{background:#ffffff1a;transform:scale(.98)}.location-item[_ngcontent-%COMP%]   .location-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#ff6b351a;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#ff6b35;flex-shrink:0}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]{flex:1;min-width:0}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;margin-bottom:4px}.location-item[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-area[_ngcontent-%COMP%]{font-size:13px;color:#888}.location-item[_ngcontent-%COMP%]   .chevron-right[_ngcontent-%COMP%]{color:#666;flex-shrink:0}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:#666}.no-results[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 8px;color:#888}.no-results[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}.bottom-nav[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;display:flex;justify-content:space-around;padding:.75rem 0;padding-bottom:0;background:#0003;backdrop-filter:blur(1px);-webkit-backdrop-filter:blur(1px);border-top:1px solid rgba(255,255,255,.1);z-index:20}.bottom-nav-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#888;font-size:.7rem;display:flex;flex-direction:column;align-items:center;gap:.25rem;cursor:pointer;transition:color .2s;padding:.5rem 1rem;font-weight:400}.bottom-nav-btn.active[_ngcontent-%COMP%]{color:#ff6b35}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:currentColor}.bottom-nav-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:2px}.nav-icon[_ngcontent-%COMP%]{width:24px;height:24px;color:inherit;transition:all .2s}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="M3 9.5"])   path[_ngcontent-%COMP%]{fill:currentColor;stroke:currentColor}.bottom-nav-btn.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]:has(path[d*="12 21.35"])   path[_ngcontent-%COMP%]{fill:currentColor}@media (min-width: 768px){.location-modal[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;border-radius:24px;max-height:70vh}.modal-overlay[_ngcontent-%COMP%]{align-items:center}}']})};var eu=()=>{let n=ae(an),e=ae(Qe);return Gu(n).pipe($e(t=>t?!0:(e.navigate(["/phone-input"]),!1)))};var Ng=()=>{let n=ae(an),e=ae(Qe);return Gu(n).pipe($e(t=>t?(console.log("[NoAuthGuard] User is authenticated, redirecting to main-app"),e.createUrlTree(["/main-app"])):!0))};var BC=[{path:"",component:Oh},{path:"phone-input",component:jh,canActivate:[Ms,Ng]},{path:"otp",component:$h,canActivate:[Ms,Ng]},{path:"location-permission",component:Gh,canActivate:[eu,Ms]},{path:"main-app",component:Wh,canActivate:[eu,Ms]},{path:"video-feed",component:xs,canActivate:[eu,Ms]},{path:"upload-reel",component:Wo,canActivate:[eu,Ms]}];var UC={providers:[Ey(BC),rv(),n0(()=>i0(gC.firebase)),o0(()=>a0()),lC(()=>dC()),c0(()=>h0()),Ps]};var Zh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lt({type:n,selectors:[["app-root"]],standalone:!0,features:[ht],decls:1,vars:0,template:function(t,i){t&1&&ue(0,"router-outlet")},dependencies:[Tf]})};R0(Zh,UC).catch(n=>console.error(n));
